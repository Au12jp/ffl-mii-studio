var k$=Object.create;var{getPrototypeOf:S$,defineProperty:b6,getOwnPropertyNames:b7,getOwnPropertyDescriptor:T$}=Object,f7=Object.prototype.hasOwnProperty;var z$=(A,Q,E)=>{E=A!=null?k$(S$(A)):{};let B=Q||!A||!A.__esModule?b6(E,"default",{value:A,enumerable:!0}):E;for(let I of b7(A))if(!f7.call(B,I))b6(B,I,{get:()=>A[I],enumerable:!0});return B},x7=/*@__PURE__*/new WeakMap,gz=(A)=>{var Q=x7.get(A),E;if(Q)return Q;if(Q=b6({},"__esModule",{value:!0}),A&&typeof A==="object"||typeof A==="function")b7(A).map((B)=>!f7.call(Q,B)&&b6(Q,B,{get:()=>A[B],enumerable:!(E=T$(A,B))||E.enumerable}));return x7.set(A,Q),Q},P$=(A,Q)=>()=>(Q||A((Q={exports:{}}).exports,Q),Q.exports);var rU=(A,Q)=>{for(var E in Q)b6(A,E,{get:Q[E],enumerable:!0,configurable:!0,set:(B)=>Q[E]=()=>B})};var V$=(A,Q)=>()=>(A&&(Q=A(A=0)),Q);var xz=/*@__PURE__*/((A)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(A,{get:(Q,E)=>(typeof require!=="undefined"?require:Q)[E]}):A)(function(A){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+A+'" is not supported')});var uN=P$((mz,BU)=>{/*!
 * The following is a version of the struct-fu library
 * fork by ariankordi: https://github.com/ariankordi/struct-fu
 * with the following changes made for code size:
 * Added: _.uintptr, mapping to _.uint32le (with WASM in mind)
 * Added (TODO): add JSDoc StructInstance template
 * Removed: Polyfills Function.prototype.bind, TextEncoder/TextDecoder
 * Removed: bitfield, bitfieldLE...
 * Removed: char16be, swapBytesPairs
 * Removed: 64-bit types, 16-bit float
 * Modified: addField (no bit handling), _.struct (rm "aligned bitfield" message)
 */var MQ={};function IU(A){return new Uint8Array(new ArrayBuffer(A))}function UH(A){var Q=Array.prototype.slice.call(arguments,1);return Q.forEach(function(E){Object.keys(E).forEach(function(B){A[B]=E[B]})}),A}function bI(A,Q){return A.bytes+=Q.size,A}function CU(A,Q){var E=typeof Q==="number"?UH({name:A.name,field:A,valueFromBytes:function(B,I){I||(I={bytes:0,bits:0});var C=new Array(Q);for(var K=0,J=C.length;K<J;K+=1)C[K]=A.valueFromBytes(B,I);return C},bytesFromValue:function(B,I,C){B||(B=new Array(Q)),I||(I=IU(this.size)),C||(C={bytes:0,bits:0});for(var K=0,J=Math.min(B.length,Q);K<J;K+=1)A.bytesFromValue(B[K],I,C);while(K++<Q)bI(C,A);return I}},"width"in A?{width:A.width*Q}:{size:A.size*Q}):A;return E.pack=E.bytesFromValue,E.unpack=E.valueFromBytes,E}MQ.struct=function(A,Q,E){if(typeof A!=="string")E=Q,Q=A,A=null;var B={bytes:0,bits:0},I=Object.create(null),C=Q.reduce(function(K,J){if("_padTo"in J){J._id||(J._id="id"+Math.random().toFixed(20).slice(2));var U=I[J._id]=B.bits?{width:8*(J._padTo-B.bytes)-B.bits}:{size:J._padTo-B.bytes};if(U.width!==void 0&&U.width<0||U.size!==void 0&&U.size<0){var Y=B.bits?" and "+B.bits+" bits":"";throw Error("Invalid .padTo("+J._padTo+") field, struct is already "+B.bytes+" byte(s)"+Y+"!")}J=U}else if(J._hoistFields)Object.keys(J._hoistFields).forEach(function(H){var R=Object.create(J._hoistFields[H]);if("width"in R)R.offset={bytes:R.offset.bytes+B.bytes,bits:R.offset.bits};else R.offset+=B.bytes;K[H]=R});else if(J.name)J=Object.create(J),J.offset="width"in J?{bytes:B.bytes,bits:B.bits}:B.bytes,K[J.name]=J;return bI(B,J),K},{});if(B.bits)throw Error("Improperly aligned bitfield at end of struct: "+A);return CU({valueFromBytes:function(K,J){J||(J={bytes:0,bits:0});var U={};return Q.forEach(function(Y){if("_padTo"in Y)return bI(J,I[Y._id]);var H=Y.valueFromBytes(K,J);if(Y.name)U[Y.name]=H;else if(typeof H==="object")UH(U,H)}),U},bytesFromValue:function(K,J,U){return K||(K={}),J||(J=IU(this.size)),U||(U={bytes:0,bits:0}),Q.forEach(function(Y){if("_padTo"in Y)return bI(U,I[Y._id]);var H=Y.name?K[Y.name]:K;Y.bytesFromValue(H,J,U)}),J},_hoistFields:!A?C:null,fields:C,size:B.bytes,name:A},E)};MQ.padTo=function(A){return{_padTo:A}};function YH(A,Q,E){if(typeof A!=="string")E=Q,Q=A,A=null;Q=typeof Q==="number"?Q:1;var B=this;return CU({valueFromBytes:function(I,C){C||(C={bytes:0,bits:0});var K=I instanceof ArrayBuffer?new Uint8Array(I):I,J=K.subarray(C.bytes,C.bytes+this.size);return bI(C,this),B.b2v.call(this,J)},bytesFromValue:function(I,C,K){C||(C=IU(this.size)),K||(K={bytes:0,bits:0});var J=C instanceof ArrayBuffer?new Uint8Array(C):C,U=J.subarray(K.bytes,K.bytes+this.size);return B.vTb.call(this,I,U),bI(K,this),C},size:Q,name:A},E)}MQ.byte=YH.bind({b2v:function(A){return A},vTb:function(A,Q){if(!A)return 0;return Q.set(new Uint8Array(A)),A.byteLength}});MQ.char=YH.bind({b2v:function(A){var Q=new TextDecoder("utf-8"),E=Q.decode(A),B=E.indexOf("\x00");return~B?E.slice(0,B):E},vTb:function(A,Q){A||(A="");var E=new TextEncoder("utf-8"),B=E.encode(A);for(var I=0;I<B.length&&I<Q.length;I++)Q[I]=B[I];return B.length}});MQ.char16le=YH.bind({b2v:function(A){var Q=new TextDecoder("utf-16le"),E=Q.decode(A),B=E.indexOf("\x00");return~B?E.slice(0,B):E},vTb:function(A,Q){A||(A="");var E=0;for(var B=0;B<A.length&&E+1<Q.length;B++){var I=A.charCodeAt(B);Q[E++]=I&255,Q[E++]=I>>8&255}return E}});function tE(A,Q,E){var B="get"+A,I="set"+A;return Q||(Q=+A.match(/\d+/)[0]/8),function(C,K){if(typeof C!=="string")K=C,C=null;return CU({valueFromBytes:function(J,U){U||(U={bytes:0});var Y=J instanceof ArrayBuffer?new Uint8Array(J):J,H=new DataView(Y.buffer,Y.byteOffset,Y.byteLength),R=H[B](U.bytes,E);return bI(U,this),R},bytesFromValue:function(J,U,Y){J||(J=0),U||(U=IU(this.size)),Y||(Y={bytes:0});var H=U instanceof ArrayBuffer?new Uint8Array(U):U,R=new DataView(H.buffer,H.byteOffset,H.byteLength);return R[I](Y.bytes,J,E),bI(Y,this),U},size:Q,name:C},K)}}MQ.uint8=tE("Uint8",1,!1);MQ.uint16=tE("Uint16",2,!1);MQ.uint32=tE("Uint32",4,!1);MQ.uint16le=tE("Uint16",2,!0);MQ.uint32le=tE("Uint32",4,!0);MQ.uintptr=MQ.uint32le;MQ.int8=tE("Int8",1,!1);MQ.int16=tE("Int16",2,!1);MQ.int32=tE("Int32",4,!1);MQ.int16le=tE("Int16",2,!0);MQ.int32le=tE("Int32",4,!0);MQ.float32=tE("Float32",4,!1);MQ.float32le=tE("Float32",4,!0);MQ.derive=function(A,Q,E){return function(B,I){if(typeof B!=="string")I=B,B=null;return CU(UH({valueFromBytes:function(C,K){return E(A.valueFromBytes(C,K))},bytesFromValue:function(C,K,J){return A.bytesFromValue(Q(C),K,J)},name:B},"width"in A?{width:A.width}:{size:A.size}),I)}};if(typeof BU!=="undefined"&&BU.exports)BU.exports=MQ;else window._=MQ});var X$={};rU(X$,{default:()=>hz});function IT(A){if(GA.locateFile)return GA.locateFile(A,qI);return qI+A}function Y$(){var A=nU.buffer;GA.HEAP8=KT=new Int8Array(A),GA.HEAP16=JT=new Int16Array(A),GA.HEAPU8=v7=new Uint8Array(A),GA.HEAPU16=UT=new Uint16Array(A),GA.HEAP32=YT=new Int32Array(A),GA.HEAPU32=OT=new Uint32Array(A),GA.HEAPF32=HT=new Float32Array(A),GA.HEAPF64=ZT=new Float64Array(A)}function NT(){if(GA.preRun){if(typeof GA.preRun=="function")GA.preRun=[GA.preRun];while(GA.preRun.length)XT(GA.preRun.shift())}h7(O$)}function GT(){RT=!0,h7(H$)}function WT(){if(GA.postRun){if(typeof GA.postRun=="function")GA.postRun=[GA.postRun];while(GA.postRun.length)LT(GA.postRun.shift())}h7(Z$)}function XT(A){O$.unshift(A)}function $T(A){H$.unshift(A)}function LT(A){Z$.unshift(A)}function qT(A){B8++,GA.monitorRunDependencies?.(B8)}function FT(A){if(B8--,GA.monitorRunDependencies?.(B8),B8==0){if(j7!==null)clearInterval(j7),j7=null;if(cK){var Q=cK;cK=null,Q()}}}function R$(A){GA.onAbort?.(A),A="Aborted("+A+")",lK(A),U$=!0,CT=1,A+=". Build with -sASSERTIONS for more info.";var Q=new WebAssembly.RuntimeError(A);throw Q}function MT(){var A="/dist/ffl-emscripten.wasm";if(!N$(A))return IT(A);return A}function E$(A){if(A==dU&&dK)return new Uint8Array(dK);if(Q$)return Q$(A);throw"both async and sync fetching of the wasm failed"}function wT(A){if(!dK)return J$(A).then((Q)=>new Uint8Array(Q),()=>E$(A));return Promise.resolve().then(()=>E$(A))}function B$(A,Q,E){return wT(A).then((B)=>WebAssembly.instantiate(B,Q)).then(E,(B)=>{lK(`failed to asynchronously prepare wasm: ${B}`),R$(B)})}function _T(A,Q,E,B){if(!A&&typeof WebAssembly.instantiateStreaming=="function"&&!N$(Q)&&typeof fetch=="function")return fetch(Q,{credentials:"same-origin"}).then((I)=>{var C=WebAssembly.instantiateStreaming(I,E);return C.then(B,function(K){return lK(`wasm streaming compile failed: ${K}`),lK("falling back to ArrayBuffer instantiation"),B$(Q,E,B)})});return B$(Q,E,B)}function kT(){return{a:mT}}function ST(){var A=kT();function Q(B,I){return X0=B.exports,nU=X0.e,Y$(),I8=X0.O,$T(X0.f),FT("wasm-instantiate"),X0}qT("wasm-instantiate");function E(B){Q(B.instance)}if(GA.instantiateWasm)try{return GA.instantiateWasm(A,Q)}catch(B){return lK(`Module.instantiateWasm callback failed with error: ${B}`),!1}if(!dU)dU=MT();return _T(dK,dU,A,E),{}}function W$(){if(B8>0)return;if(NT(),B8>0)return;function A(){if(sU)return;if(sU=!0,GA.calledRun=!0,U$)return;GT(),GA.onRuntimeInitialized?.(),WT()}if(GA.setStatus)GA.setStatus("Running..."),setTimeout(function(){setTimeout(function(){GA.setStatus("")},1),A()},1);else A()}var GA,AT=!0,A$=!1,K$,QT,ET="./this.program",BT=(A,Q)=>{throw Q},qI="",J$,Q$,zr,lK,dK,nU,U$=!1,CT,KT,v7,JT,UT,YT,OT,HT,ZT,O$,H$,Z$,RT=!1,B8=0,j7=null,cK=null,DT="data:application/octet-stream;base64,",N$=(A)=>A.startsWith(DT),dU,h7=(A)=>{while(A.length>0)A.shift()(GA)},Pr,TT=()=>{R$("")},zT=(A,Q,E)=>v7.copyWithin(A,Q,Q+E),PT=()=>Math.random(),VT=()=>2147483648,jT=(A)=>{var Q=nU.buffer,E=(A-Q.byteLength+65535)/65536;try{return nU.grow(E),Y$(),1}catch(B){}},vT=(A)=>{var Q=v7.length;A>>>=0;var E=VT();if(A>E)return!1;var B=(U,Y)=>U+(Y-U%Y)%Y;for(var I=1;I<=4;I*=2){var C=Q*(1+0.2/I);C=Math.min(C,A+100663296);var K=Math.min(E,B(Math.max(A,C),65536)),J=jT(K);if(J)return!0}return!1},G$=(A,Q)=>{if(A<128)Q.push(A);else Q.push(A%128|128,A>>7)},hT=(A)=>{var Q={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},E={parameters:[],results:A[0]=="v"?[]:[Q[A[0]]]};for(var B=1;B<A.length;++B)E.parameters.push(Q[A[B]]);return E},yT=(A,Q)=>{var E=A.slice(0,1),B=A.slice(1),I={i:127,p:127,j:126,f:125,d:124,e:111};Q.push(96),G$(B.length,Q);for(var C=0;C<B.length;++C)Q.push(I[B[C]]);if(E=="v")Q.push(0);else Q.push(1,I[E])},gT=(A,Q)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(hT(Q),A);var E=[1];yT(Q,E);var B=[0,97,115,109,1,0,0,0,1];G$(E.length,B),B.push(...E),B.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var I=new WebAssembly.Module(new Uint8Array(B)),C=new WebAssembly.Instance(I,{e:{f:A}}),K=C.exports.f;return K},mK,I8,xT=(A)=>{var Q=mK[A];if(!Q){if(A>=mK.length)mK.length=A+1;mK[A]=Q=I8.get(A)}return Q},bT=(A,Q)=>{if(j6)for(var E=A;E<A+Q;E++){var B=xT(E);if(B)j6.set(B,E)}},j6,fT=(A)=>{if(!j6)j6=/*@__PURE__*/new WeakMap,bT(0,I8.length);return j6.get(A)||0},I$,uT=()=>{if(I$.length)return I$.pop();try{I8.grow(1)}catch(A){if(!(A instanceof RangeError))throw A;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return I8.length-1},C$=(A,Q)=>{I8.set(A,Q),mK[A]=I8.get(A)},pT=(A,Q)=>{var E=fT(A);if(E)return E;var B=uT();try{C$(B,A)}catch(C){if(!(C instanceof TypeError))throw C;var I=gT(A,Q);C$(B,I)}return j6.set(A,B),B},mT,X0,cT,lT,dT,nT,sT,iT,oT,rT,aT,tT,eT,Az,Qz,Ez,Bz,Iz,Cz,Kz,Jz,Uz,Yz,Oz,Hz,Zz,Rz,Nz,Gz,Wz,Xz,$z,Lz,qz,Fz,Dz,Mz,wz,_z,kz,Sz,Tz,zz,Pz,Vz,jz,vz,sU,hz;var $$=V$(()=>{GA=typeof GA!="undefined"?GA:{},K$=Object.assign({},GA),QT=[];if(AT||A$){if(A$)qI=self.location.href;else if(typeof document!="undefined"&&document.currentScript)qI=document.currentScript.src;if(qI.startsWith("blob:"))qI="";else qI=qI.substr(0,qI.replace(/[?#].*/,"").lastIndexOf("/")+1);J$=(A)=>fetch(A,{credentials:"same-origin"}).then((Q)=>{if(Q.ok)return Q.arrayBuffer();return Promise.reject(new Error(Q.status+" : "+Q.url))})}zr=GA.print||console.log.bind(console),lK=GA.printErr||console.error.bind(console);Object.assign(GA,K$);K$=null;if(GA.arguments)QT=GA.arguments;if(GA.thisProgram)ET=GA.thisProgram;if(GA.quit)BT=GA.quit;if(GA.wasmBinary)dK=GA.wasmBinary;O$=[],H$=[],Z$=[];Pr=GA.noExitRuntime||!0,mK=[],I$=[],mT={a:TT,c:zT,d:PT,b:vT},X0=ST(),cT=GA._FFLInitCharModelCPUStepWithCallback=(A,Q,E,B)=>(cT=GA._FFLInitCharModelCPUStepWithCallback=X0.g)(A,Q,E,B),lT=GA._FFLInitCharModelCPUStep=(A,Q,E)=>(lT=GA._FFLInitCharModelCPUStep=X0.h)(A,Q,E),dT=GA._FFLDeleteCharModel=(A)=>(dT=GA._FFLDeleteCharModel=X0.i)(A),nT=GA._FFLGetDrawParamOpaFaceline=(A)=>(nT=GA._FFLGetDrawParamOpaFaceline=X0.j)(A),sT=GA._FFLGetDrawParamOpaBeard=(A)=>(sT=GA._FFLGetDrawParamOpaBeard=X0.k)(A),iT=GA._FFLGetDrawParamOpaNose=(A)=>(iT=GA._FFLGetDrawParamOpaNose=X0.l)(A),oT=GA._FFLGetDrawParamOpaForehead=(A)=>(oT=GA._FFLGetDrawParamOpaForehead=X0.m)(A),rT=GA._FFLGetDrawParamOpaHair=(A)=>(rT=GA._FFLGetDrawParamOpaHair=X0.n)(A),aT=GA._FFLGetDrawParamOpaCap=(A)=>(aT=GA._FFLGetDrawParamOpaCap=X0.o)(A),tT=GA._FFLGetDrawParamXluMask=(A)=>(tT=GA._FFLGetDrawParamXluMask=X0.p)(A),eT=GA._FFLGetDrawParamXluNoseLine=(A)=>(eT=GA._FFLGetDrawParamXluNoseLine=X0.q)(A),Az=GA._FFLGetDrawParamXluGlass=(A)=>(Az=GA._FFLGetDrawParamXluGlass=X0.r)(A),Qz=GA._FFLSetExpression=(A,Q)=>(Qz=GA._FFLSetExpression=X0.s)(A,Q),Ez=GA._FFLGetExpression=(A)=>(Ez=GA._FFLGetExpression=X0.t)(A),Bz=GA._FFLSetViewModelType=(A,Q)=>(Bz=GA._FFLSetViewModelType=X0.u)(A,Q),Iz=GA._FFLGetBoundingBox=(A,Q)=>(Iz=GA._FFLGetBoundingBox=X0.v)(A,Q),Cz=GA._FFLIsAvailableExpression=(A,Q)=>(Cz=GA._FFLIsAvailableExpression=X0.w)(A,Q),Kz=GA._FFLSetCoordinate=(A,Q)=>(Kz=GA._FFLSetCoordinate=X0.x)(A,Q),Jz=GA._FFLSetScale=(A)=>(Jz=GA._FFLSetScale=X0.y)(A),Uz=GA._FFLiGetRandomCharInfo=(A,Q,E,B)=>(Uz=GA._FFLiGetRandomCharInfo=X0.z)(A,Q,E,B),Yz=GA._FFLpGetStoreDataFromCharInfo=(A,Q)=>(Yz=GA._FFLpGetStoreDataFromCharInfo=X0.A)(A,Q),Oz=GA._FFLpGetCharInfoFromStoreData=(A,Q)=>(Oz=GA._FFLpGetCharInfoFromStoreData=X0.B)(A,Q),Hz=GA._FFLGetAdditionalInfo=(A,Q,E,B,I)=>(Hz=GA._FFLGetAdditionalInfo=X0.C)(A,Q,E,B,I),Zz=GA._FFLInitRes=(A,Q)=>(Zz=GA._FFLInitRes=X0.D)(A,Q),Rz=GA._FFLInitResGPUStep=()=>(Rz=GA._FFLInitResGPUStep=X0.E)(),Nz=GA._FFLExit=()=>(Nz=GA._FFLExit=X0.F)(),Gz=GA._FFLIsAvailable=()=>(Gz=GA._FFLIsAvailable=X0.G)(),Wz=GA._FFLGetFavoriteColor=(A,Q)=>(Wz=GA._FFLGetFavoriteColor=X0.H)(A,Q),Xz=GA._FFLSetLinearGammaMode=(A)=>(Xz=GA._FFLSetLinearGammaMode=X0.I)(A),$z=GA._FFLGetFacelineColor=(A,Q)=>($z=GA._FFLGetFacelineColor=X0.J)(A,Q),Lz=GA._FFLSetTextureFlipY=(A)=>(Lz=GA._FFLSetTextureFlipY=X0.K)(A),qz=GA._FFLSetNormalIsSnorm8_8_8_8=(A)=>(qz=GA._FFLSetNormalIsSnorm8_8_8_8=X0.L)(A),Fz=GA._FFLSetFrontCullForFlipX=(A)=>(Fz=GA._FFLSetFrontCullForFlipX=X0.M)(A),Dz=GA._FFLSetTextureCallback=(A)=>(Dz=GA._FFLSetTextureCallback=X0.N)(A),Mz=GA._FFLiDeleteTempObjectMaskTextures=(A,Q,E)=>(Mz=GA._FFLiDeleteTempObjectMaskTextures=X0.P)(A,Q,E),wz=GA._FFLiDeleteTempObjectFacelineTexture=(A,Q,E)=>(wz=GA._FFLiDeleteTempObjectFacelineTexture=X0.Q)(A,Q,E),_z=GA._FFLiDeleteTextureTempObject=(A)=>(_z=GA._FFLiDeleteTextureTempObject=X0.R)(A),kz=GA._FFLiiGetEyeRotateOffset=(A)=>(kz=GA._FFLiiGetEyeRotateOffset=X0.S)(A),Sz=GA._FFLiiGetEyebrowRotateOffset=(A)=>(Sz=GA._FFLiiGetEyebrowRotateOffset=X0.T)(A),Tz=GA._FFLiInvalidateTempObjectFacelineTexture=(A)=>(Tz=GA._FFLiInvalidateTempObjectFacelineTexture=X0.U)(A),zz=GA._FFLiInvalidatePartsTextures=(A)=>(zz=GA._FFLiInvalidatePartsTextures=X0.V)(A),Pz=GA._FFLiInvalidateRawMask=(A)=>(Pz=GA._FFLiInvalidateRawMask=X0.W)(A),Vz=GA._FFLiVerifyCharInfoWithReason=(A,Q)=>(Vz=GA._FFLiVerifyCharInfoWithReason=X0.X)(A,Q),jz=GA._malloc=(A)=>(jz=GA._malloc=X0.Y)(A),vz=GA._free=(A)=>(vz=GA._free=X0.Z)(A);GA.addFunction=pT;cK=function A(){if(!sU)W$();if(!sU)cK=A};if(GA.preInit){if(typeof GA.preInit=="function")GA.preInit=[GA.preInit];while(GA.preInit.length>0)GA.preInit.pop()()}W$();hz={Module:GA}});var QK={};rU(QK,{createCanvasElement:()=>LO,ZeroStencilOp:()=>NR,ZeroSlopeEnding:()=>JR,ZeroFactor:()=>$E,ZeroCurvatureEnding:()=>KR,WrapAroundEnding:()=>UR,WireframeGeometry:()=>r8,WebXRController:()=>m8,WebGPUCoordinateSystem:()=>xR,WebGLUtils:()=>xN,WebGLRenderer:()=>AK,WebGLRenderTarget:()=>Q0,WebGLCubeRenderTarget:()=>DC,WebGLCoordinateSystem:()=>L9,WebGLArrayRenderTarget:()=>qO,WebGL3DRenderTarget:()=>FO,VideoTexture:()=>_9,VideoFrameTexture:()=>kO,VectorKeyframeTrack:()=>YE,Vector4:()=>MA,Vector3:()=>y,Vector2:()=>AA,VSMShadowMap:()=>RB,UnsignedShortType:()=>hB,UnsignedShort5551Type:()=>eJ,UnsignedShort4444Type:()=>tJ,UnsignedIntType:()=>$1,UnsignedInt5999Type:()=>EO,UnsignedInt248Type:()=>VE,UnsignedByteType:()=>x0,UniformsUtils:()=>oA,UniformsLib:()=>vA,UniformsGroup:()=>pO,Uniform:()=>rC,Uint8ClampedBufferAttribute:()=>DO,Uint8BufferAttribute:()=>qC,Uint32BufferAttribute:()=>FC,Uint16BufferAttribute:()=>VI,UVMapping:()=>jB,TubeGeometry:()=>uC,TrianglesDrawMode:()=>W9,TriangleStripDrawMode:()=>x8,TriangleFanDrawMode:()=>z1,Triangle:()=>PQ,TorusKnotGeometry:()=>fC,TorusGeometry:()=>o8,TimestampQuery:()=>bR,TextureUtils:()=>BN,TextureLoader:()=>nQ,Texture:()=>EQ,TetrahedronGeometry:()=>bC,TangentSpaceNormalMap:()=>KO,TOUCH:()=>IC,SubtractiveBlending:()=>uJ,SubtractEquation:()=>uY,StringKeyframeTrack:()=>JI,StreamReadUsage:()=>jR,StreamDrawUsage:()=>zR,StreamCopyUsage:()=>yR,StereoCamera:()=>E6,StaticReadUsage:()=>PR,StaticDrawUsage:()=>TR,StaticCopyUsage:()=>vR,SrcColorFactor:()=>lY,SrcAlphaSaturateFactor:()=>sY,SrcAlphaFactor:()=>EE,SpriteMaterial:()=>y1,Sprite:()=>c8,SpotLightHelper:()=>lO,SpotLight:()=>UI,SplineCurve:()=>VC,SphericalHarmonics3:()=>lC,Spherical:()=>I6,SphereGeometry:()=>FE,Sphere:()=>KQ,Source:()=>OB,SkinnedMesh:()=>jI,SkeletonHelper:()=>i9,Skeleton:()=>gB,ShortType:()=>QO,ShapeUtils:()=>WE,ShapePath:()=>aC,ShapeGeometry:()=>xC,Shape:()=>TB,ShadowMaterial:()=>v9,ShaderMaterial:()=>bA,ShaderLib:()=>CE,ShaderChunk:()=>G0,Scene:()=>yQ,SRGBTransfer:()=>IQ,SRGBColorSpace:()=>N0,SIGNED_RED_RGTC1_Format:()=>R9,SIGNED_RED_GREEN_RGTC2_Format:()=>G9,RingGeometry:()=>gC,ReverseSubtractEquation:()=>pY,ReplaceStencilOp:()=>WR,RepeatWrapping:()=>BQ,RenderTargetArray:()=>uO,RenderTarget3D:()=>fO,RenderTarget:()=>u8,ReinhardToneMapping:()=>dJ,RedIntegerFormat:()=>NC,RedFormat:()=>SQ,RectAreaLight:()=>cC,Raycaster:()=>bE,Ray:()=>qE,RawShaderMaterial:()=>II,RGIntegerFormat:()=>GC,RGFormat:()=>jE,RGDepthPacking:()=>RR,RGB_S3TC_DXT1_Format:()=>j8,RGB_PVRTC_4BPPV1_Format:()=>F1,RGB_PVRTC_2BPPV1_Format:()=>WC,RGB_ETC2_Format:()=>h8,RGB_ETC1_Format:()=>M1,RGB_BPTC_UNSIGNED_Format:()=>S1,RGB_BPTC_SIGNED_Format:()=>$C,RGBIntegerFormat:()=>QR,RGBFormat:()=>IO,RGBDepthPacking:()=>ZR,RGBA_S3TC_DXT5_Format:()=>PI,RGBA_S3TC_DXT3_Format:()=>v8,RGBA_S3TC_DXT1_Format:()=>q1,RGBA_PVRTC_4BPPV1_Format:()=>D1,RGBA_PVRTC_2BPPV1_Format:()=>XC,RGBA_ETC2_EAC_Format:()=>y8,RGBA_BPTC_Format:()=>k1,RGBA_ASTC_8x8_Format:()=>K9,RGBA_ASTC_8x6_Format:()=>C9,RGBA_ASTC_8x5_Format:()=>I9,RGBA_ASTC_6x6_Format:()=>_1,RGBA_ASTC_6x5_Format:()=>B9,RGBA_ASTC_5x5_Format:()=>E9,RGBA_ASTC_5x4_Format:()=>Q9,RGBA_ASTC_4x4_Format:()=>w1,RGBA_ASTC_12x12_Format:()=>Z9,RGBA_ASTC_12x10_Format:()=>H9,RGBA_ASTC_10x8_Format:()=>Y9,RGBA_ASTC_10x6_Format:()=>U9,RGBA_ASTC_10x5_Format:()=>J9,RGBA_ASTC_10x10_Format:()=>O9,RGBAIntegerFormat:()=>A9,RGBAFormat:()=>V0,RGBADepthPacking:()=>b8,REVISION:()=>ZB,RED_RGTC1_Format:()=>CO,RED_GREEN_RGTC2_Format:()=>N9,QuaternionLinearInterpolant:()=>f9,QuaternionKeyframeTrack:()=>ME,Quaternion:()=>J0,QuadraticBezierCurve3:()=>PC,QuadraticBezierCurve:()=>zC,PropertyMixer:()=>d9,PropertyBinding:()=>T0,PositionalAudio:()=>hO,PolyhedronGeometry:()=>BI,PolarGridHelper:()=>sO,PointsMaterial:()=>aE,Points:()=>GB,PointLightHelper:()=>dO,PointLight:()=>WB,PlaneHelper:()=>aO,PlaneGeometry:()=>dQ,Plane:()=>UQ,PerspectiveCamera:()=>v0,Path:()=>TI,PMREMGenerator:()=>QU,PCFSoftShadowMap:()=>fY,PCFShadowMap:()=>fJ,OrthographicCamera:()=>HE,OneMinusSrcColorFactor:()=>dY,OneMinusSrcAlphaFactor:()=>iE,OneMinusDstColorFactor:()=>nY,OneMinusDstAlphaFactor:()=>N1,OneMinusConstantColorFactor:()=>oY,OneMinusConstantAlphaFactor:()=>aY,OneFactor:()=>PE,OctahedronGeometry:()=>x1,ObjectSpaceNormalMap:()=>JO,ObjectLoader:()=>VO,Object3D:()=>I0,NumberKeyframeTrack:()=>zE,NotEqualStencilFunc:()=>_R,NotEqualDepth:()=>HC,NotEqualCompare:()=>NO,NormalBlending:()=>zB,NormalAnimationBlendMode:()=>YR,NoToneMapping:()=>VB,NoColorSpace:()=>YQ,NoBlending:()=>H0,NeverStencilFunc:()=>FR,NeverDepth:()=>CC,NeverCompare:()=>OO,NeutralToneMapping:()=>rJ,NearestMipmapNearestFilter:()=>X1,NearestMipmapLinearFilter:()=>vB,NearestMipMapNearestFilter:()=>tZ,NearestMipMapLinearFilter:()=>eZ,NearestFilter:()=>Z0,MultiplyOperation:()=>mJ,MultiplyBlending:()=>pJ,MixOperation:()=>tY,MirroredRepeatWrapping:()=>OE,MinEquation:()=>mY,MeshToonMaterial:()=>h9,MeshStandardMaterial:()=>aQ,MeshPhysicalMaterial:()=>fQ,MeshPhongMaterial:()=>DE,MeshNormalMaterial:()=>gE,MeshMatcapMaterial:()=>y9,MeshLambertMaterial:()=>CI,MeshDistanceMaterial:()=>pC,MeshDepthMaterial:()=>hI,MeshBasicMaterial:()=>_0,Mesh:()=>xA,MaxEquation:()=>cY,Matrix4:()=>RA,Matrix3:()=>E0,Matrix2:()=>s9,MathUtils:()=>o0,MaterialLoader:()=>dC,Material:()=>$Q,MOUSE:()=>T8,LuminanceFormat:()=>L1,LuminanceAlphaFormat:()=>ZC,LoopRepeat:()=>BR,LoopPingPong:()=>IR,LoopOnce:()=>ER,LoadingManager:()=>t8,LoaderUtils:()=>QE,Loader:()=>C0,LinearTransfer:()=>LC,LinearToneMapping:()=>lJ,LinearSRGBColorSpace:()=>b0,LinearMipmapNearestFilter:()=>AI,LinearMipmapLinearFilter:()=>hQ,LinearMipMapNearestFilter:()=>AR,LinearMipMapLinearFilter:()=>eY,LinearInterpolant:()=>mC,LinearFilter:()=>L0,LineSegments:()=>RQ,LineLoop:()=>l8,LineDashedMaterial:()=>g9,LineCurve3:()=>z9,LineCurve:()=>TC,LineBasicMaterial:()=>p0,Line3:()=>$B,Line:()=>VQ,LightProbe:()=>Q6,Light:()=>uB,LessStencilFunc:()=>DR,LessEqualStencilFunc:()=>MR,LessEqualDepth:()=>z8,LessEqualCompare:()=>X9,LessDepth:()=>JC,LessCompare:()=>HO,Layers:()=>j1,LatheGeometry:()=>n8,LOD:()=>M9,KeyframeTrack:()=>xE,KeepStencilOp:()=>GR,InvertStencilOp:()=>qR,InterpolateSmooth:()=>CR,InterpolateLinear:()=>T1,InterpolateDiscrete:()=>g8,Interpolant:()=>KI,InterleavedBufferAttribute:()=>xQ,InterleavedBuffer:()=>hE,IntType:()=>aJ,Int8BufferAttribute:()=>p8,Int32BufferAttribute:()=>F9,Int16BufferAttribute:()=>MO,InstancedMesh:()=>vI,InstancedInterleavedBuffer:()=>B6,InstancedBufferGeometry:()=>nC,InstancedBufferAttribute:()=>HB,IncrementWrapStencilOp:()=>$R,IncrementStencilOp:()=>UO,ImageUtils:()=>q9,ImageLoader:()=>R1,ImageBitmapLoader:()=>iC,IcosahedronGeometry:()=>yC,HemisphereLightHelper:()=>nO,HemisphereLight:()=>p9,HalfFloatType:()=>sA,Group:()=>i0,GridHelper:()=>o9,GreaterStencilFunc:()=>wR,GreaterEqualStencilFunc:()=>kR,GreaterEqualDepth:()=>YC,GreaterEqualCompare:()=>GO,GreaterDepth:()=>OC,GreaterCompare:()=>RO,GLSL3:()=>$9,GLSL1:()=>gR,GLBufferAttribute:()=>mO,Frustum:()=>xB,FrontSide:()=>jQ,FramebufferTexture:()=>d8,FogExp2:()=>MC,Fog:()=>wC,FloatType:()=>m0,Float32BufferAttribute:()=>PA,Float16BufferAttribute:()=>wO,FileLoader:()=>U0,ExtrudeGeometry:()=>i8,EventDispatcher:()=>rE,Euler:()=>DQ,EquirectangularRefractionMapping:()=>P8,EquirectangularReflectionMapping:()=>W1,EqualStencilFunc:()=>YO,EqualDepth:()=>UC,EqualCompare:()=>ZO,EllipseCurve:()=>g1,EdgesGeometry:()=>V9,DynamicReadUsage:()=>VR,DynamicDrawUsage:()=>f8,DynamicCopyUsage:()=>hR,DstColorFactor:()=>PB,DstAlphaFactor:()=>LE,DoubleSide:()=>y0,DodecahedronGeometry:()=>hC,DiscreteInterpolant:()=>b9,DirectionalLightHelper:()=>iO,DirectionalLight:()=>XB,DetachedBindMode:()=>aZ,DepthTexture:()=>IE,DepthStencilFormat:()=>oE,DepthFormat:()=>RC,DefaultLoadingManager:()=>u9,DecrementWrapStencilOp:()=>LR,DecrementStencilOp:()=>XR,DataUtils:()=>vE,DataTextureLoader:()=>yI,DataTexture:()=>h0,DataArrayTexture:()=>V1,Data3DTexture:()=>NB,Cylindrical:()=>cO,CylinderGeometry:()=>bB,CustomToneMapping:()=>iJ,CustomBlending:()=>vQ,CurvePath:()=>P9,Curve:()=>rQ,CullFaceNone:()=>xY,CullFaceFrontBack:()=>iZ,CullFaceFront:()=>bY,CullFaceBack:()=>bJ,CubicInterpolant:()=>x9,CubicBezierCurve3:()=>T9,CubicBezierCurve:()=>SC,CubeUVReflectionMapping:()=>V8,CubeTextureLoader:()=>PO,CubeTexture:()=>QI,CubeRefractionMapping:()=>zI,CubeReflectionMapping:()=>G1,CubeCamera:()=>D9,Controls:()=>LB,ConstantColorFactor:()=>iY,ConstantAlphaFactor:()=>rY,ConeGeometry:()=>s8,CompressedTextureLoader:()=>e8,CompressedTexture:()=>yE,CompressedCubeTexture:()=>kC,CompressedArrayTexture:()=>_C,ColorManagement:()=>O0,ColorKeyframeTrack:()=>a8,Color:()=>a,Clock:()=>gI,ClampToEdgeWrapping:()=>JQ,CircleGeometry:()=>vC,CineonToneMapping:()=>nJ,CatmullRomCurve3:()=>S9,CapsuleGeometry:()=>jC,CanvasTexture:()=>EI,CameraHelper:()=>oO,Camera:()=>h1,Cache:()=>SB,ByteType:()=>AO,BufferGeometryLoader:()=>sC,BufferGeometry:()=>hA,BufferAttribute:()=>tA,BoxHelper:()=>rO,BoxGeometry:()=>bQ,Box3Helper:()=>r9,Box3:()=>g0,Box2:()=>b1,BooleanKeyframeTrack:()=>fB,Bone:()=>yB,BatchedMesh:()=>w9,BasicShadowMap:()=>oZ,BasicDepthPacking:()=>HR,BackSide:()=>ZQ,AxesHelper:()=>eO,AudioLoader:()=>jO,AudioListener:()=>vO,AudioContext:()=>oC,AudioAnalyser:()=>yO,Audio:()=>l9,AttachedBindMode:()=>rZ,ArrowHelper:()=>tO,ArrayCamera:()=>c9,ArcCurve:()=>k9,AnimationUtils:()=>rR,AnimationObjectGroup:()=>bO,AnimationMixer:()=>xI,AnimationLoader:()=>zO,AnimationClip:()=>oQ,AnimationAction:()=>n9,AmbientLight:()=>A6,AlwaysStencilFunc:()=>SR,AlwaysDepth:()=>KC,AlwaysCompare:()=>WO,AlphaFormat:()=>BO,AgXToneMapping:()=>oJ,AdditiveBlending:()=>XE,AdditiveAnimationBlendMode:()=>OR,AddOperation:()=>cJ,AddEquation:()=>kQ,ACESFilmicToneMapping:()=>sJ});var ZB="173",T8={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},IC={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},xY=0,bJ=1,bY=2,iZ=3,oZ=0,fJ=1,fY=2,RB=3,jQ=0,ZQ=1,y0=2,H0=0,zB=1,XE=2,uJ=3,pJ=4,vQ=5,kQ=100,uY=101,pY=102,mY=103,cY=104,$E=200,PE=201,lY=202,dY=203,EE=204,iE=205,LE=206,N1=207,PB=208,nY=209,sY=210,iY=211,oY=212,rY=213,aY=214,CC=0,KC=1,JC=2,z8=3,UC=4,YC=5,OC=6,HC=7,mJ=0,tY=1,cJ=2,VB=0,lJ=1,dJ=2,nJ=3,sJ=4,iJ=5,oJ=6,rJ=7,rZ="attached",aZ="detached",jB=300,G1=301,zI=302,W1=303,P8=304,V8=306,BQ=1000,JQ=1001,OE=1002,Z0=1003,X1=1004,tZ=1004,vB=1005,eZ=1005,L0=1006,AI=1007,AR=1007,hQ=1008,eY=1008,x0=1009,AO=1010,QO=1011,hB=1012,aJ=1013,$1=1014,m0=1015,sA=1016,tJ=1017,eJ=1018,VE=1020,EO=35902,BO=1021,IO=1022,V0=1023,L1=1024,ZC=1025,RC=1026,oE=1027,SQ=1028,NC=1029,jE=1030,GC=1031,QR=1032,A9=1033,j8=33776,q1=33777,v8=33778,PI=33779,F1=35840,WC=35841,D1=35842,XC=35843,M1=36196,h8=37492,y8=37496,w1=37808,Q9=37809,E9=37810,B9=37811,_1=37812,I9=37813,C9=37814,K9=37815,J9=37816,U9=37817,Y9=37818,O9=37819,H9=37820,Z9=37821,k1=36492,$C=36494,S1=36495,CO=36283,R9=36284,N9=36285,G9=36286,ER=2200,BR=2201,IR=2202,g8=2300,T1=2301,CR=2302,KR=2400,JR=2401,UR=2402,YR=2500,OR=2501,W9=0,x8=1,z1=2,HR=3200,b8=3201,ZR=3202,RR=3203,KO=0,JO=1,YQ="",N0="srgb",b0="srgb-linear",LC="linear",IQ="srgb",NR=0,GR=7680,WR=7681,UO=7682,XR=7683,$R=34055,LR=34056,qR=5386,FR=512,DR=513,YO=514,MR=515,wR=516,_R=517,kR=518,SR=519,OO=512,HO=513,ZO=514,X9=515,RO=516,NO=517,GO=518,WO=519,TR=35044,f8=35048,zR=35040,PR=35045,VR=35049,jR=35041,vR=35046,hR=35050,yR=35042,gR="100",$9="300 es",L9=2000,xR=2001,bR={COMPUTE:"compute",RENDER:"render"};class rE{addEventListener(A,Q){if(this._listeners===void 0)this._listeners={};let E=this._listeners;if(E[A]===void 0)E[A]=[];if(E[A].indexOf(Q)===-1)E[A].push(Q)}hasEventListener(A,Q){let E=this._listeners;if(E===void 0)return!1;return E[A]!==void 0&&E[A].indexOf(Q)!==-1}removeEventListener(A,Q){let E=this._listeners;if(E===void 0)return;let B=E[A];if(B!==void 0){let I=B.indexOf(Q);if(I!==-1)B.splice(I,1)}}dispatchEvent(A){let Q=this._listeners;if(Q===void 0)return;let E=Q[A.type];if(E!==void 0){A.target=this;let B=E.slice(0);for(let I=0,C=B.length;I<C;I++)B[I].call(this,A);A.target=null}}}var tQ=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],u7=1234567,O1=Math.PI/180,H1=180/Math.PI;function TE(){let A=Math.random()*4294967295|0,Q=Math.random()*4294967295|0,E=Math.random()*4294967295|0,B=Math.random()*4294967295|0;return(tQ[A&255]+tQ[A>>8&255]+tQ[A>>16&255]+tQ[A>>24&255]+"-"+tQ[Q&255]+tQ[Q>>8&255]+"-"+tQ[Q>>16&15|64]+tQ[Q>>24&255]+"-"+tQ[E&63|128]+tQ[E>>8&255]+"-"+tQ[E>>16&255]+tQ[E>>24&255]+tQ[B&255]+tQ[B>>8&255]+tQ[B>>16&255]+tQ[B>>24&255]).toLowerCase()}function w0(A,Q,E){return Math.max(Q,Math.min(E,A))}function XO(A,Q){return(A%Q+Q)%Q}function j$(A,Q,E,B,I){return B+(A-Q)*(I-B)/(E-Q)}function v$(A,Q,E){if(A!==Q)return(E-A)/(Q-A);else return 0}function t6(A,Q,E){return(1-E)*A+E*Q}function h$(A,Q,E,B){return t6(A,Q,1-Math.exp(-E*B))}function y$(A,Q=1){return Q-Math.abs(XO(A,Q*2)-Q)}function g$(A,Q,E){if(A<=Q)return 0;if(A>=E)return 1;return A=(A-Q)/(E-Q),A*A*(3-2*A)}function x$(A,Q,E){if(A<=Q)return 0;if(A>=E)return 1;return A=(A-Q)/(E-Q),A*A*A*(A*(A*6-15)+10)}function b$(A,Q){return A+Math.floor(Math.random()*(Q-A+1))}function f$(A,Q){return A+Math.random()*(Q-A)}function u$(A){return A*(0.5-Math.random())}function p$(A){if(A!==void 0)u7=A;let Q=u7+=1831565813;return Q=Math.imul(Q^Q>>>15,Q|1),Q^=Q+Math.imul(Q^Q>>>7,Q|61),((Q^Q>>>14)>>>0)/4294967296}function m$(A){return A*O1}function c$(A){return A*H1}function l$(A){return(A&A-1)===0&&A!==0}function d$(A){return Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))}function n$(A){return Math.pow(2,Math.floor(Math.log(A)/Math.LN2))}function s$(A,Q,E,B,I){let{cos:C,sin:K}=Math,J=C(E/2),U=K(E/2),Y=C((Q+B)/2),H=K((Q+B)/2),R=C((Q-B)/2),O=K((Q-B)/2),N=C((B-Q)/2),$=K((B-Q)/2);switch(I){case"XYX":A.set(J*H,U*R,U*O,J*Y);break;case"YZY":A.set(U*O,J*H,U*R,J*Y);break;case"ZXZ":A.set(U*R,U*O,J*H,J*Y);break;case"XZX":A.set(J*H,U*$,U*N,J*Y);break;case"YXY":A.set(U*N,J*H,U*$,J*Y);break;case"ZYZ":A.set(U*$,U*N,J*H,J*Y);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+I)}}function UE(A,Q){switch(Q.constructor){case Float32Array:return A;case Uint32Array:return A/4294967295;case Uint16Array:return A/65535;case Uint8Array:return A/255;case Int32Array:return Math.max(A/2147483647,-1);case Int16Array:return Math.max(A/32767,-1);case Int8Array:return Math.max(A/127,-1);default:throw new Error("Invalid component type.")}}function S0(A,Q){switch(Q.constructor){case Float32Array:return A;case Uint32Array:return Math.round(A*4294967295);case Uint16Array:return Math.round(A*65535);case Uint8Array:return Math.round(A*255);case Int32Array:return Math.round(A*2147483647);case Int16Array:return Math.round(A*32767);case Int8Array:return Math.round(A*127);default:throw new Error("Invalid component type.")}}var o0={DEG2RAD:O1,RAD2DEG:H1,generateUUID:TE,clamp:w0,euclideanModulo:XO,mapLinear:j$,inverseLerp:v$,lerp:t6,damp:h$,pingpong:y$,smoothstep:g$,smootherstep:x$,randInt:b$,randFloat:f$,randFloatSpread:u$,seededRandom:p$,degToRad:m$,radToDeg:c$,isPowerOfTwo:l$,ceilPowerOfTwo:d$,floorPowerOfTwo:n$,setQuaternionFromProperEuler:s$,normalize:S0,denormalize:UE};class AA{constructor(A=0,Q=0){AA.prototype.isVector2=!0,this.x=A,this.y=Q}get width(){return this.x}set width(A){this.x=A}get height(){return this.y}set height(A){this.y=A}set(A,Q){return this.x=A,this.y=Q,this}setScalar(A){return this.x=A,this.y=A,this}setX(A){return this.x=A,this}setY(A){return this.y=A,this}setComponent(A,Q){switch(A){case 0:this.x=Q;break;case 1:this.y=Q;break;default:throw new Error("index is out of range: "+A)}return this}getComponent(A){switch(A){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+A)}}clone(){return new this.constructor(this.x,this.y)}copy(A){return this.x=A.x,this.y=A.y,this}add(A){return this.x+=A.x,this.y+=A.y,this}addScalar(A){return this.x+=A,this.y+=A,this}addVectors(A,Q){return this.x=A.x+Q.x,this.y=A.y+Q.y,this}addScaledVector(A,Q){return this.x+=A.x*Q,this.y+=A.y*Q,this}sub(A){return this.x-=A.x,this.y-=A.y,this}subScalar(A){return this.x-=A,this.y-=A,this}subVectors(A,Q){return this.x=A.x-Q.x,this.y=A.y-Q.y,this}multiply(A){return this.x*=A.x,this.y*=A.y,this}multiplyScalar(A){return this.x*=A,this.y*=A,this}divide(A){return this.x/=A.x,this.y/=A.y,this}divideScalar(A){return this.multiplyScalar(1/A)}applyMatrix3(A){let Q=this.x,E=this.y,B=A.elements;return this.x=B[0]*Q+B[3]*E+B[6],this.y=B[1]*Q+B[4]*E+B[7],this}min(A){return this.x=Math.min(this.x,A.x),this.y=Math.min(this.y,A.y),this}max(A){return this.x=Math.max(this.x,A.x),this.y=Math.max(this.y,A.y),this}clamp(A,Q){return this.x=w0(this.x,A.x,Q.x),this.y=w0(this.y,A.y,Q.y),this}clampScalar(A,Q){return this.x=w0(this.x,A,Q),this.y=w0(this.y,A,Q),this}clampLength(A,Q){let E=this.length();return this.divideScalar(E||1).multiplyScalar(w0(E,A,Q))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(A){return this.x*A.x+this.y*A.y}cross(A){return this.x*A.y-this.y*A.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(A){let Q=Math.sqrt(this.lengthSq()*A.lengthSq());if(Q===0)return Math.PI/2;let E=this.dot(A)/Q;return Math.acos(w0(E,-1,1))}distanceTo(A){return Math.sqrt(this.distanceToSquared(A))}distanceToSquared(A){let Q=this.x-A.x,E=this.y-A.y;return Q*Q+E*E}manhattanDistanceTo(A){return Math.abs(this.x-A.x)+Math.abs(this.y-A.y)}setLength(A){return this.normalize().multiplyScalar(A)}lerp(A,Q){return this.x+=(A.x-this.x)*Q,this.y+=(A.y-this.y)*Q,this}lerpVectors(A,Q,E){return this.x=A.x+(Q.x-A.x)*E,this.y=A.y+(Q.y-A.y)*E,this}equals(A){return A.x===this.x&&A.y===this.y}fromArray(A,Q=0){return this.x=A[Q],this.y=A[Q+1],this}toArray(A=[],Q=0){return A[Q]=this.x,A[Q+1]=this.y,A}fromBufferAttribute(A,Q){return this.x=A.getX(Q),this.y=A.getY(Q),this}rotateAround(A,Q){let E=Math.cos(Q),B=Math.sin(Q),I=this.x-A.x,C=this.y-A.y;return this.x=I*E-C*B+A.x,this.y=I*B+C*E+A.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class E0{constructor(A,Q,E,B,I,C,K,J,U){if(E0.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],A!==void 0)this.set(A,Q,E,B,I,C,K,J,U)}set(A,Q,E,B,I,C,K,J,U){let Y=this.elements;return Y[0]=A,Y[1]=B,Y[2]=K,Y[3]=Q,Y[4]=I,Y[5]=J,Y[6]=E,Y[7]=C,Y[8]=U,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(A){let Q=this.elements,E=A.elements;return Q[0]=E[0],Q[1]=E[1],Q[2]=E[2],Q[3]=E[3],Q[4]=E[4],Q[5]=E[5],Q[6]=E[6],Q[7]=E[7],Q[8]=E[8],this}extractBasis(A,Q,E){return A.setFromMatrix3Column(this,0),Q.setFromMatrix3Column(this,1),E.setFromMatrix3Column(this,2),this}setFromMatrix4(A){let Q=A.elements;return this.set(Q[0],Q[4],Q[8],Q[1],Q[5],Q[9],Q[2],Q[6],Q[10]),this}multiply(A){return this.multiplyMatrices(this,A)}premultiply(A){return this.multiplyMatrices(A,this)}multiplyMatrices(A,Q){let E=A.elements,B=Q.elements,I=this.elements,C=E[0],K=E[3],J=E[6],U=E[1],Y=E[4],H=E[7],R=E[2],O=E[5],N=E[8],$=B[0],L=B[3],W=B[6],Z=B[1],G=B[4],X=B[7],q=B[2],M=B[5],F=B[8];return I[0]=C*$+K*Z+J*q,I[3]=C*L+K*G+J*M,I[6]=C*W+K*X+J*F,I[1]=U*$+Y*Z+H*q,I[4]=U*L+Y*G+H*M,I[7]=U*W+Y*X+H*F,I[2]=R*$+O*Z+N*q,I[5]=R*L+O*G+N*M,I[8]=R*W+O*X+N*F,this}multiplyScalar(A){let Q=this.elements;return Q[0]*=A,Q[3]*=A,Q[6]*=A,Q[1]*=A,Q[4]*=A,Q[7]*=A,Q[2]*=A,Q[5]*=A,Q[8]*=A,this}determinant(){let A=this.elements,Q=A[0],E=A[1],B=A[2],I=A[3],C=A[4],K=A[5],J=A[6],U=A[7],Y=A[8];return Q*C*Y-Q*K*U-E*I*Y+E*K*J+B*I*U-B*C*J}invert(){let A=this.elements,Q=A[0],E=A[1],B=A[2],I=A[3],C=A[4],K=A[5],J=A[6],U=A[7],Y=A[8],H=Y*C-K*U,R=K*J-Y*I,O=U*I-C*J,N=Q*H+E*R+B*O;if(N===0)return this.set(0,0,0,0,0,0,0,0,0);let $=1/N;return A[0]=H*$,A[1]=(B*U-Y*E)*$,A[2]=(K*E-B*C)*$,A[3]=R*$,A[4]=(Y*Q-B*J)*$,A[5]=(B*I-K*Q)*$,A[6]=O*$,A[7]=(E*J-U*Q)*$,A[8]=(C*Q-E*I)*$,this}transpose(){let A,Q=this.elements;return A=Q[1],Q[1]=Q[3],Q[3]=A,A=Q[2],Q[2]=Q[6],Q[6]=A,A=Q[5],Q[5]=Q[7],Q[7]=A,this}getNormalMatrix(A){return this.setFromMatrix4(A).invert().transpose()}transposeIntoArray(A){let Q=this.elements;return A[0]=Q[0],A[1]=Q[3],A[2]=Q[6],A[3]=Q[1],A[4]=Q[4],A[5]=Q[7],A[6]=Q[2],A[7]=Q[5],A[8]=Q[8],this}setUvTransform(A,Q,E,B,I,C,K){let J=Math.cos(I),U=Math.sin(I);return this.set(E*J,E*U,-E*(J*C+U*K)+C+A,-B*U,B*J,-B*(-U*C+J*K)+K+Q,0,0,1),this}scale(A,Q){return this.premultiply(aU.makeScale(A,Q)),this}rotate(A){return this.premultiply(aU.makeRotation(-A)),this}translate(A,Q){return this.premultiply(aU.makeTranslation(A,Q)),this}makeTranslation(A,Q){if(A.isVector2)this.set(1,0,A.x,0,1,A.y,0,0,1);else this.set(1,0,A,0,1,Q,0,0,1);return this}makeRotation(A){let Q=Math.cos(A),E=Math.sin(A);return this.set(Q,-E,0,E,Q,0,0,0,1),this}makeScale(A,Q){return this.set(A,0,0,0,Q,0,0,0,1),this}equals(A){let Q=this.elements,E=A.elements;for(let B=0;B<9;B++)if(Q[B]!==E[B])return!1;return!0}fromArray(A,Q=0){for(let E=0;E<9;E++)this.elements[E]=A[E+Q];return this}toArray(A=[],Q=0){let E=this.elements;return A[Q]=E[0],A[Q+1]=E[1],A[Q+2]=E[2],A[Q+3]=E[3],A[Q+4]=E[4],A[Q+5]=E[5],A[Q+6]=E[6],A[Q+7]=E[7],A[Q+8]=E[8],A}clone(){return new this.constructor().fromArray(this.elements)}}var aU=/*@__PURE__*/new E0;function $O(A){for(let Q=A.length-1;Q>=0;--Q)if(A[Q]>=65535)return!0;return!1}var i$={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function w8(A,Q){return new i$[A](Q)}function S8(A){return document.createElementNS("http://www.w3.org/1999/xhtml",A)}function LO(){let A=S8("canvas");return A.style.display="block",A}var p7={};function P1(A){if(A in p7)return;p7[A]=!0,console.warn(A)}function fR(A,Q,E){return new Promise(function(B,I){function C(){switch(A.clientWaitSync(Q,A.SYNC_FLUSH_COMMANDS_BIT,0)){case A.WAIT_FAILED:I();break;case A.TIMEOUT_EXPIRED:setTimeout(C,E);break;default:B()}}setTimeout(C,E)})}function uR(A){let Q=A.elements;Q[2]=0.5*Q[2]+0.5*Q[3],Q[6]=0.5*Q[6]+0.5*Q[7],Q[10]=0.5*Q[10]+0.5*Q[11],Q[14]=0.5*Q[14]+0.5*Q[15]}function pR(A){let Q=A.elements;if(Q[11]===-1)Q[10]=-Q[10]-1,Q[14]=-Q[14];else Q[10]=-Q[10],Q[14]=-Q[14]+1}var m7=/*@__PURE__*/new E0().set(0.4123908,0.3575843,0.1804808,0.212639,0.7151687,0.0721923,0.0193308,0.1191948,0.9505322),c7=/*@__PURE__*/new E0().set(3.2409699,-1.5373832,-0.4986108,-0.9692436,1.8759675,0.0415551,0.0556301,-0.203977,1.0569715);function o$(){let A={enabled:!0,workingColorSpace:"srgb-linear",spaces:{},convert:function(I,C,K){if(this.enabled===!1||C===K||!C||!K)return I;if(this.spaces[C].transfer==="srgb")I.r=eB(I.r),I.g=eB(I.g),I.b=eB(I.b);if(this.spaces[C].primaries!==this.spaces[K].primaries)I.applyMatrix3(this.spaces[C].toXYZ),I.applyMatrix3(this.spaces[K].fromXYZ);if(this.spaces[K].transfer==="srgb")I.r=k8(I.r),I.g=k8(I.g),I.b=k8(I.b);return I},fromWorkingColorSpace:function(I,C){return this.convert(I,this.workingColorSpace,C)},toWorkingColorSpace:function(I,C){return this.convert(I,C,this.workingColorSpace)},getPrimaries:function(I){return this.spaces[I].primaries},getTransfer:function(I){if(I==="")return"linear";return this.spaces[I].transfer},getLuminanceCoefficients:function(I,C=this.workingColorSpace){return I.fromArray(this.spaces[C].luminanceCoefficients)},define:function(I){Object.assign(this.spaces,I)},_getMatrix:function(I,C,K){return I.copy(this.spaces[C].toXYZ).multiply(this.spaces[K].fromXYZ)},_getDrawingBufferColorSpace:function(I){return this.spaces[I].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(I=this.workingColorSpace){return this.spaces[I].workingColorSpaceConfig.unpackColorSpace}},Q=[0.64,0.33,0.3,0.6,0.15,0.06],E=[0.2126,0.7152,0.0722],B=[0.3127,0.329];return A.define({["srgb-linear"]:{primaries:Q,whitePoint:B,transfer:"linear",toXYZ:m7,fromXYZ:c7,luminanceCoefficients:E,workingColorSpaceConfig:{unpackColorSpace:"srgb"},outputColorSpaceConfig:{drawingBufferColorSpace:"srgb"}},["srgb"]:{primaries:Q,whitePoint:B,transfer:"srgb",toXYZ:m7,fromXYZ:c7,luminanceCoefficients:E,outputColorSpaceConfig:{drawingBufferColorSpace:"srgb"}}}),A}var O0=/*@__PURE__*/o$();function eB(A){return A<0.04045?A*0.0773993808:Math.pow(A*0.9478672986+0.0521327014,2.4)}function k8(A){return A<0.0031308?A*12.92:1.055*Math.pow(A,0.41666)-0.055}var J8;class q9{static getDataURL(A){if(/^data:/i.test(A.src))return A.src;if(typeof HTMLCanvasElement==="undefined")return A.src;let Q;if(A instanceof HTMLCanvasElement)Q=A;else{if(J8===void 0)J8=S8("canvas");J8.width=A.width,J8.height=A.height;let E=J8.getContext("2d");if(A instanceof ImageData)E.putImageData(A,0,0);else E.drawImage(A,0,0,A.width,A.height);Q=J8}return Q.toDataURL("image/png")}static sRGBToLinear(A){if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap){let Q=S8("canvas");Q.width=A.width,Q.height=A.height;let E=Q.getContext("2d");E.drawImage(A,0,0,A.width,A.height);let B=E.getImageData(0,0,A.width,A.height),I=B.data;for(let C=0;C<I.length;C++)I[C]=eB(I[C]/255)*255;return E.putImageData(B,0,0),Q}else if(A.data){let Q=A.data.slice(0);for(let E=0;E<Q.length;E++)if(Q instanceof Uint8Array||Q instanceof Uint8ClampedArray)Q[E]=Math.floor(eB(Q[E]/255)*255);else Q[E]=eB(Q[E]);return{data:Q,width:A.width,height:A.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),A}}var r$=0;class OB{constructor(A=null){this.isSource=!0,Object.defineProperty(this,"id",{value:r$++}),this.uuid=TE(),this.data=A,this.dataReady=!0,this.version=0}set needsUpdate(A){if(A===!0)this.version++}toJSON(A){let Q=A===void 0||typeof A==="string";if(!Q&&A.images[this.uuid]!==void 0)return A.images[this.uuid];let E={uuid:this.uuid,url:""},B=this.data;if(B!==null){let I;if(Array.isArray(B)){I=[];for(let C=0,K=B.length;C<K;C++)if(B[C].isDataTexture)I.push(tU(B[C].image));else I.push(tU(B[C]))}else I=tU(B);E.url=I}if(!Q)A.images[this.uuid]=E;return E}}function tU(A){if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap)return q9.getDataURL(A);else if(A.data)return{data:Array.from(A.data),width:A.width,height:A.height,type:A.data.constructor.name};else return console.warn("THREE.Texture: Unable to serialize Texture."),{}}var a$=0;class EQ extends rE{constructor(A=EQ.DEFAULT_IMAGE,Q=EQ.DEFAULT_MAPPING,E=1001,B=1001,I=1006,C=1008,K=1023,J=1009,U=EQ.DEFAULT_ANISOTROPY,Y=""){super();this.isTexture=!0,Object.defineProperty(this,"id",{value:a$++}),this.uuid=TE(),this.name="",this.source=new OB(A),this.mipmaps=[],this.mapping=Q,this.channel=0,this.wrapS=E,this.wrapT=B,this.magFilter=I,this.minFilter=C,this.anisotropy=U,this.format=K,this.internalFormat=null,this.type=J,this.offset=new AA(0,0),this.repeat=new AA(1,1),this.center=new AA(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new E0,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=Y,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(A=null){this.source.data=A}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(A){return this.name=A.name,this.source=A.source,this.mipmaps=A.mipmaps.slice(0),this.mapping=A.mapping,this.channel=A.channel,this.wrapS=A.wrapS,this.wrapT=A.wrapT,this.magFilter=A.magFilter,this.minFilter=A.minFilter,this.anisotropy=A.anisotropy,this.format=A.format,this.internalFormat=A.internalFormat,this.type=A.type,this.offset.copy(A.offset),this.repeat.copy(A.repeat),this.center.copy(A.center),this.rotation=A.rotation,this.matrixAutoUpdate=A.matrixAutoUpdate,this.matrix.copy(A.matrix),this.generateMipmaps=A.generateMipmaps,this.premultiplyAlpha=A.premultiplyAlpha,this.flipY=A.flipY,this.unpackAlignment=A.unpackAlignment,this.colorSpace=A.colorSpace,this.renderTarget=A.renderTarget,this.isRenderTargetTexture=A.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(A.userData)),this.needsUpdate=!0,this}toJSON(A){let Q=A===void 0||typeof A==="string";if(!Q&&A.textures[this.uuid]!==void 0)return A.textures[this.uuid];let E={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(A).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(Object.keys(this.userData).length>0)E.userData=this.userData;if(!Q)A.textures[this.uuid]=E;return E}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(A){if(this.mapping!==300)return A;if(A.applyMatrix3(this.matrix),A.x<0||A.x>1)switch(this.wrapS){case 1000:A.x=A.x-Math.floor(A.x);break;case 1001:A.x=A.x<0?0:1;break;case 1002:if(Math.abs(Math.floor(A.x)%2)===1)A.x=Math.ceil(A.x)-A.x;else A.x=A.x-Math.floor(A.x);break}if(A.y<0||A.y>1)switch(this.wrapT){case 1000:A.y=A.y-Math.floor(A.y);break;case 1001:A.y=A.y<0?0:1;break;case 1002:if(Math.abs(Math.floor(A.y)%2)===1)A.y=Math.ceil(A.y)-A.y;else A.y=A.y-Math.floor(A.y);break}if(this.flipY)A.y=1-A.y;return A}set needsUpdate(A){if(A===!0)this.version++,this.source.needsUpdate=!0}set needsPMREMUpdate(A){if(A===!0)this.pmremVersion++}}EQ.DEFAULT_IMAGE=null;EQ.DEFAULT_MAPPING=300;EQ.DEFAULT_ANISOTROPY=1;class MA{constructor(A=0,Q=0,E=0,B=1){MA.prototype.isVector4=!0,this.x=A,this.y=Q,this.z=E,this.w=B}get width(){return this.z}set width(A){this.z=A}get height(){return this.w}set height(A){this.w=A}set(A,Q,E,B){return this.x=A,this.y=Q,this.z=E,this.w=B,this}setScalar(A){return this.x=A,this.y=A,this.z=A,this.w=A,this}setX(A){return this.x=A,this}setY(A){return this.y=A,this}setZ(A){return this.z=A,this}setW(A){return this.w=A,this}setComponent(A,Q){switch(A){case 0:this.x=Q;break;case 1:this.y=Q;break;case 2:this.z=Q;break;case 3:this.w=Q;break;default:throw new Error("index is out of range: "+A)}return this}getComponent(A){switch(A){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+A)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(A){return this.x=A.x,this.y=A.y,this.z=A.z,this.w=A.w!==void 0?A.w:1,this}add(A){return this.x+=A.x,this.y+=A.y,this.z+=A.z,this.w+=A.w,this}addScalar(A){return this.x+=A,this.y+=A,this.z+=A,this.w+=A,this}addVectors(A,Q){return this.x=A.x+Q.x,this.y=A.y+Q.y,this.z=A.z+Q.z,this.w=A.w+Q.w,this}addScaledVector(A,Q){return this.x+=A.x*Q,this.y+=A.y*Q,this.z+=A.z*Q,this.w+=A.w*Q,this}sub(A){return this.x-=A.x,this.y-=A.y,this.z-=A.z,this.w-=A.w,this}subScalar(A){return this.x-=A,this.y-=A,this.z-=A,this.w-=A,this}subVectors(A,Q){return this.x=A.x-Q.x,this.y=A.y-Q.y,this.z=A.z-Q.z,this.w=A.w-Q.w,this}multiply(A){return this.x*=A.x,this.y*=A.y,this.z*=A.z,this.w*=A.w,this}multiplyScalar(A){return this.x*=A,this.y*=A,this.z*=A,this.w*=A,this}applyMatrix4(A){let Q=this.x,E=this.y,B=this.z,I=this.w,C=A.elements;return this.x=C[0]*Q+C[4]*E+C[8]*B+C[12]*I,this.y=C[1]*Q+C[5]*E+C[9]*B+C[13]*I,this.z=C[2]*Q+C[6]*E+C[10]*B+C[14]*I,this.w=C[3]*Q+C[7]*E+C[11]*B+C[15]*I,this}divide(A){return this.x/=A.x,this.y/=A.y,this.z/=A.z,this.w/=A.w,this}divideScalar(A){return this.multiplyScalar(1/A)}setAxisAngleFromQuaternion(A){this.w=2*Math.acos(A.w);let Q=Math.sqrt(1-A.w*A.w);if(Q<0.0001)this.x=1,this.y=0,this.z=0;else this.x=A.x/Q,this.y=A.y/Q,this.z=A.z/Q;return this}setAxisAngleFromRotationMatrix(A){let Q,E,B,I,C=0.01,K=0.1,J=A.elements,U=J[0],Y=J[4],H=J[8],R=J[1],O=J[5],N=J[9],$=J[2],L=J[6],W=J[10];if(Math.abs(Y-R)<0.01&&Math.abs(H-$)<0.01&&Math.abs(N-L)<0.01){if(Math.abs(Y+R)<0.1&&Math.abs(H+$)<0.1&&Math.abs(N+L)<0.1&&Math.abs(U+O+W-3)<0.1)return this.set(1,0,0,0),this;Q=Math.PI;let G=(U+1)/2,X=(O+1)/2,q=(W+1)/2,M=(Y+R)/4,F=(H+$)/4,D=(N+L)/4;if(G>X&&G>q)if(G<0.01)E=0,B=0.707106781,I=0.707106781;else E=Math.sqrt(G),B=M/E,I=F/E;else if(X>q)if(X<0.01)E=0.707106781,B=0,I=0.707106781;else B=Math.sqrt(X),E=M/B,I=D/B;else if(q<0.01)E=0.707106781,B=0.707106781,I=0;else I=Math.sqrt(q),E=F/I,B=D/I;return this.set(E,B,I,Q),this}let Z=Math.sqrt((L-N)*(L-N)+(H-$)*(H-$)+(R-Y)*(R-Y));if(Math.abs(Z)<0.001)Z=1;return this.x=(L-N)/Z,this.y=(H-$)/Z,this.z=(R-Y)/Z,this.w=Math.acos((U+O+W-1)/2),this}setFromMatrixPosition(A){let Q=A.elements;return this.x=Q[12],this.y=Q[13],this.z=Q[14],this.w=Q[15],this}min(A){return this.x=Math.min(this.x,A.x),this.y=Math.min(this.y,A.y),this.z=Math.min(this.z,A.z),this.w=Math.min(this.w,A.w),this}max(A){return this.x=Math.max(this.x,A.x),this.y=Math.max(this.y,A.y),this.z=Math.max(this.z,A.z),this.w=Math.max(this.w,A.w),this}clamp(A,Q){return this.x=w0(this.x,A.x,Q.x),this.y=w0(this.y,A.y,Q.y),this.z=w0(this.z,A.z,Q.z),this.w=w0(this.w,A.w,Q.w),this}clampScalar(A,Q){return this.x=w0(this.x,A,Q),this.y=w0(this.y,A,Q),this.z=w0(this.z,A,Q),this.w=w0(this.w,A,Q),this}clampLength(A,Q){let E=this.length();return this.divideScalar(E||1).multiplyScalar(w0(E,A,Q))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(A){return this.x*A.x+this.y*A.y+this.z*A.z+this.w*A.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(A){return this.normalize().multiplyScalar(A)}lerp(A,Q){return this.x+=(A.x-this.x)*Q,this.y+=(A.y-this.y)*Q,this.z+=(A.z-this.z)*Q,this.w+=(A.w-this.w)*Q,this}lerpVectors(A,Q,E){return this.x=A.x+(Q.x-A.x)*E,this.y=A.y+(Q.y-A.y)*E,this.z=A.z+(Q.z-A.z)*E,this.w=A.w+(Q.w-A.w)*E,this}equals(A){return A.x===this.x&&A.y===this.y&&A.z===this.z&&A.w===this.w}fromArray(A,Q=0){return this.x=A[Q],this.y=A[Q+1],this.z=A[Q+2],this.w=A[Q+3],this}toArray(A=[],Q=0){return A[Q]=this.x,A[Q+1]=this.y,A[Q+2]=this.z,A[Q+3]=this.w,A}fromBufferAttribute(A,Q){return this.x=A.getX(Q),this.y=A.getY(Q),this.z=A.getZ(Q),this.w=A.getW(Q),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class u8 extends rE{constructor(A=1,Q=1,E={}){super();this.isRenderTarget=!0,this.width=A,this.height=Q,this.depth=1,this.scissor=new MA(0,0,A,Q),this.scissorTest=!1,this.viewport=new MA(0,0,A,Q);let B={width:A,height:Q,depth:1};E=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:1006,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},E);let I=new EQ(B,E.mapping,E.wrapS,E.wrapT,E.magFilter,E.minFilter,E.format,E.type,E.anisotropy,E.colorSpace);I.flipY=!1,I.generateMipmaps=E.generateMipmaps,I.internalFormat=E.internalFormat,this.textures=[];let C=E.count;for(let K=0;K<C;K++)this.textures[K]=I.clone(),this.textures[K].isRenderTargetTexture=!0,this.textures[K].renderTarget=this;this.depthBuffer=E.depthBuffer,this.stencilBuffer=E.stencilBuffer,this.resolveDepthBuffer=E.resolveDepthBuffer,this.resolveStencilBuffer=E.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=E.depthTexture,this.samples=E.samples}get texture(){return this.textures[0]}set texture(A){this.textures[0]=A}set depthTexture(A){if(this._depthTexture!==null)this._depthTexture.renderTarget=null;if(A!==null)A.renderTarget=this;this._depthTexture=A}get depthTexture(){return this._depthTexture}setSize(A,Q,E=1){if(this.width!==A||this.height!==Q||this.depth!==E){this.width=A,this.height=Q,this.depth=E;for(let B=0,I=this.textures.length;B<I;B++)this.textures[B].image.width=A,this.textures[B].image.height=Q,this.textures[B].image.depth=E;this.dispose()}this.viewport.set(0,0,A,Q),this.scissor.set(0,0,A,Q)}clone(){return new this.constructor().copy(this)}copy(A){this.width=A.width,this.height=A.height,this.depth=A.depth,this.scissor.copy(A.scissor),this.scissorTest=A.scissorTest,this.viewport.copy(A.viewport),this.textures.length=0;for(let E=0,B=A.textures.length;E<B;E++)this.textures[E]=A.textures[E].clone(),this.textures[E].isRenderTargetTexture=!0,this.textures[E].renderTarget=this;let Q=Object.assign({},A.texture.image);if(this.texture.source=new OB(Q),this.depthBuffer=A.depthBuffer,this.stencilBuffer=A.stencilBuffer,this.resolveDepthBuffer=A.resolveDepthBuffer,this.resolveStencilBuffer=A.resolveStencilBuffer,A.depthTexture!==null)this.depthTexture=A.depthTexture.clone();return this.samples=A.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Q0 extends u8{constructor(A=1,Q=1,E={}){super(A,Q,E);this.isWebGLRenderTarget=!0}}class V1 extends EQ{constructor(A=null,Q=1,E=1,B=1){super(null);this.isDataArrayTexture=!0,this.image={data:A,width:Q,height:E,depth:B},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=/*@__PURE__*/new Set}addLayerUpdate(A){this.layerUpdates.add(A)}clearLayerUpdates(){this.layerUpdates.clear()}}class qO extends Q0{constructor(A=1,Q=1,E=1,B={}){super(A,Q,B);this.isWebGLArrayRenderTarget=!0,this.depth=E,this.texture=new V1(null,A,Q,E),this.texture.isRenderTargetTexture=!0}}class NB extends EQ{constructor(A=null,Q=1,E=1,B=1){super(null);this.isData3DTexture=!0,this.image={data:A,width:Q,height:E,depth:B},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class FO extends Q0{constructor(A=1,Q=1,E=1,B={}){super(A,Q,B);this.isWebGL3DRenderTarget=!0,this.depth=E,this.texture=new NB(null,A,Q,E),this.texture.isRenderTargetTexture=!0}}class J0{constructor(A=0,Q=0,E=0,B=1){this.isQuaternion=!0,this._x=A,this._y=Q,this._z=E,this._w=B}static slerpFlat(A,Q,E,B,I,C,K){let J=E[B+0],U=E[B+1],Y=E[B+2],H=E[B+3],R=I[C+0],O=I[C+1],N=I[C+2],$=I[C+3];if(K===0){A[Q+0]=J,A[Q+1]=U,A[Q+2]=Y,A[Q+3]=H;return}if(K===1){A[Q+0]=R,A[Q+1]=O,A[Q+2]=N,A[Q+3]=$;return}if(H!==$||J!==R||U!==O||Y!==N){let L=1-K,W=J*R+U*O+Y*N+H*$,Z=W>=0?1:-1,G=1-W*W;if(G>Number.EPSILON){let q=Math.sqrt(G),M=Math.atan2(q,W*Z);L=Math.sin(L*M)/q,K=Math.sin(K*M)/q}let X=K*Z;if(J=J*L+R*X,U=U*L+O*X,Y=Y*L+N*X,H=H*L+$*X,L===1-K){let q=1/Math.sqrt(J*J+U*U+Y*Y+H*H);J*=q,U*=q,Y*=q,H*=q}}A[Q]=J,A[Q+1]=U,A[Q+2]=Y,A[Q+3]=H}static multiplyQuaternionsFlat(A,Q,E,B,I,C){let K=E[B],J=E[B+1],U=E[B+2],Y=E[B+3],H=I[C],R=I[C+1],O=I[C+2],N=I[C+3];return A[Q]=K*N+Y*H+J*O-U*R,A[Q+1]=J*N+Y*R+U*H-K*O,A[Q+2]=U*N+Y*O+K*R-J*H,A[Q+3]=Y*N-K*H-J*R-U*O,A}get x(){return this._x}set x(A){this._x=A,this._onChangeCallback()}get y(){return this._y}set y(A){this._y=A,this._onChangeCallback()}get z(){return this._z}set z(A){this._z=A,this._onChangeCallback()}get w(){return this._w}set w(A){this._w=A,this._onChangeCallback()}set(A,Q,E,B){return this._x=A,this._y=Q,this._z=E,this._w=B,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(A){return this._x=A.x,this._y=A.y,this._z=A.z,this._w=A.w,this._onChangeCallback(),this}setFromEuler(A,Q=!0){let{_x:E,_y:B,_z:I,_order:C}=A,K=Math.cos,J=Math.sin,U=K(E/2),Y=K(B/2),H=K(I/2),R=J(E/2),O=J(B/2),N=J(I/2);switch(C){case"XYZ":this._x=R*Y*H+U*O*N,this._y=U*O*H-R*Y*N,this._z=U*Y*N+R*O*H,this._w=U*Y*H-R*O*N;break;case"YXZ":this._x=R*Y*H+U*O*N,this._y=U*O*H-R*Y*N,this._z=U*Y*N-R*O*H,this._w=U*Y*H+R*O*N;break;case"ZXY":this._x=R*Y*H-U*O*N,this._y=U*O*H+R*Y*N,this._z=U*Y*N+R*O*H,this._w=U*Y*H-R*O*N;break;case"ZYX":this._x=R*Y*H-U*O*N,this._y=U*O*H+R*Y*N,this._z=U*Y*N-R*O*H,this._w=U*Y*H+R*O*N;break;case"YZX":this._x=R*Y*H+U*O*N,this._y=U*O*H+R*Y*N,this._z=U*Y*N-R*O*H,this._w=U*Y*H-R*O*N;break;case"XZY":this._x=R*Y*H-U*O*N,this._y=U*O*H-R*Y*N,this._z=U*Y*N+R*O*H,this._w=U*Y*H+R*O*N;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+C)}if(Q===!0)this._onChangeCallback();return this}setFromAxisAngle(A,Q){let E=Q/2,B=Math.sin(E);return this._x=A.x*B,this._y=A.y*B,this._z=A.z*B,this._w=Math.cos(E),this._onChangeCallback(),this}setFromRotationMatrix(A){let Q=A.elements,E=Q[0],B=Q[4],I=Q[8],C=Q[1],K=Q[5],J=Q[9],U=Q[2],Y=Q[6],H=Q[10],R=E+K+H;if(R>0){let O=0.5/Math.sqrt(R+1);this._w=0.25/O,this._x=(Y-J)*O,this._y=(I-U)*O,this._z=(C-B)*O}else if(E>K&&E>H){let O=2*Math.sqrt(1+E-K-H);this._w=(Y-J)/O,this._x=0.25*O,this._y=(B+C)/O,this._z=(I+U)/O}else if(K>H){let O=2*Math.sqrt(1+K-E-H);this._w=(I-U)/O,this._x=(B+C)/O,this._y=0.25*O,this._z=(J+Y)/O}else{let O=2*Math.sqrt(1+H-E-K);this._w=(C-B)/O,this._x=(I+U)/O,this._y=(J+Y)/O,this._z=0.25*O}return this._onChangeCallback(),this}setFromUnitVectors(A,Q){let E=A.dot(Q)+1;if(E<Number.EPSILON)if(E=0,Math.abs(A.x)>Math.abs(A.z))this._x=-A.y,this._y=A.x,this._z=0,this._w=E;else this._x=0,this._y=-A.z,this._z=A.y,this._w=E;else this._x=A.y*Q.z-A.z*Q.y,this._y=A.z*Q.x-A.x*Q.z,this._z=A.x*Q.y-A.y*Q.x,this._w=E;return this.normalize()}angleTo(A){return 2*Math.acos(Math.abs(w0(this.dot(A),-1,1)))}rotateTowards(A,Q){let E=this.angleTo(A);if(E===0)return this;let B=Math.min(1,Q/E);return this.slerp(A,B),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(A){return this._x*A._x+this._y*A._y+this._z*A._z+this._w*A._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let A=this.length();if(A===0)this._x=0,this._y=0,this._z=0,this._w=1;else A=1/A,this._x=this._x*A,this._y=this._y*A,this._z=this._z*A,this._w=this._w*A;return this._onChangeCallback(),this}multiply(A){return this.multiplyQuaternions(this,A)}premultiply(A){return this.multiplyQuaternions(A,this)}multiplyQuaternions(A,Q){let{_x:E,_y:B,_z:I,_w:C}=A,K=Q._x,J=Q._y,U=Q._z,Y=Q._w;return this._x=E*Y+C*K+B*U-I*J,this._y=B*Y+C*J+I*K-E*U,this._z=I*Y+C*U+E*J-B*K,this._w=C*Y-E*K-B*J-I*U,this._onChangeCallback(),this}slerp(A,Q){if(Q===0)return this;if(Q===1)return this.copy(A);let E=this._x,B=this._y,I=this._z,C=this._w,K=C*A._w+E*A._x+B*A._y+I*A._z;if(K<0)this._w=-A._w,this._x=-A._x,this._y=-A._y,this._z=-A._z,K=-K;else this.copy(A);if(K>=1)return this._w=C,this._x=E,this._y=B,this._z=I,this;let J=1-K*K;if(J<=Number.EPSILON){let O=1-Q;return this._w=O*C+Q*this._w,this._x=O*E+Q*this._x,this._y=O*B+Q*this._y,this._z=O*I+Q*this._z,this.normalize(),this}let U=Math.sqrt(J),Y=Math.atan2(U,K),H=Math.sin((1-Q)*Y)/U,R=Math.sin(Q*Y)/U;return this._w=C*H+this._w*R,this._x=E*H+this._x*R,this._y=B*H+this._y*R,this._z=I*H+this._z*R,this._onChangeCallback(),this}slerpQuaternions(A,Q,E){return this.copy(A).slerp(Q,E)}random(){let A=2*Math.PI*Math.random(),Q=2*Math.PI*Math.random(),E=Math.random(),B=Math.sqrt(1-E),I=Math.sqrt(E);return this.set(B*Math.sin(A),B*Math.cos(A),I*Math.sin(Q),I*Math.cos(Q))}equals(A){return A._x===this._x&&A._y===this._y&&A._z===this._z&&A._w===this._w}fromArray(A,Q=0){return this._x=A[Q],this._y=A[Q+1],this._z=A[Q+2],this._w=A[Q+3],this._onChangeCallback(),this}toArray(A=[],Q=0){return A[Q]=this._x,A[Q+1]=this._y,A[Q+2]=this._z,A[Q+3]=this._w,A}fromBufferAttribute(A,Q){return this._x=A.getX(Q),this._y=A.getY(Q),this._z=A.getZ(Q),this._w=A.getW(Q),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(A){return this._onChangeCallback=A,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class y{constructor(A=0,Q=0,E=0){y.prototype.isVector3=!0,this.x=A,this.y=Q,this.z=E}set(A,Q,E){if(E===void 0)E=this.z;return this.x=A,this.y=Q,this.z=E,this}setScalar(A){return this.x=A,this.y=A,this.z=A,this}setX(A){return this.x=A,this}setY(A){return this.y=A,this}setZ(A){return this.z=A,this}setComponent(A,Q){switch(A){case 0:this.x=Q;break;case 1:this.y=Q;break;case 2:this.z=Q;break;default:throw new Error("index is out of range: "+A)}return this}getComponent(A){switch(A){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+A)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(A){return this.x=A.x,this.y=A.y,this.z=A.z,this}add(A){return this.x+=A.x,this.y+=A.y,this.z+=A.z,this}addScalar(A){return this.x+=A,this.y+=A,this.z+=A,this}addVectors(A,Q){return this.x=A.x+Q.x,this.y=A.y+Q.y,this.z=A.z+Q.z,this}addScaledVector(A,Q){return this.x+=A.x*Q,this.y+=A.y*Q,this.z+=A.z*Q,this}sub(A){return this.x-=A.x,this.y-=A.y,this.z-=A.z,this}subScalar(A){return this.x-=A,this.y-=A,this.z-=A,this}subVectors(A,Q){return this.x=A.x-Q.x,this.y=A.y-Q.y,this.z=A.z-Q.z,this}multiply(A){return this.x*=A.x,this.y*=A.y,this.z*=A.z,this}multiplyScalar(A){return this.x*=A,this.y*=A,this.z*=A,this}multiplyVectors(A,Q){return this.x=A.x*Q.x,this.y=A.y*Q.y,this.z=A.z*Q.z,this}applyEuler(A){return this.applyQuaternion(l7.setFromEuler(A))}applyAxisAngle(A,Q){return this.applyQuaternion(l7.setFromAxisAngle(A,Q))}applyMatrix3(A){let Q=this.x,E=this.y,B=this.z,I=A.elements;return this.x=I[0]*Q+I[3]*E+I[6]*B,this.y=I[1]*Q+I[4]*E+I[7]*B,this.z=I[2]*Q+I[5]*E+I[8]*B,this}applyNormalMatrix(A){return this.applyMatrix3(A).normalize()}applyMatrix4(A){let Q=this.x,E=this.y,B=this.z,I=A.elements,C=1/(I[3]*Q+I[7]*E+I[11]*B+I[15]);return this.x=(I[0]*Q+I[4]*E+I[8]*B+I[12])*C,this.y=(I[1]*Q+I[5]*E+I[9]*B+I[13])*C,this.z=(I[2]*Q+I[6]*E+I[10]*B+I[14])*C,this}applyQuaternion(A){let Q=this.x,E=this.y,B=this.z,I=A.x,C=A.y,K=A.z,J=A.w,U=2*(C*B-K*E),Y=2*(K*Q-I*B),H=2*(I*E-C*Q);return this.x=Q+J*U+C*H-K*Y,this.y=E+J*Y+K*U-I*H,this.z=B+J*H+I*Y-C*U,this}project(A){return this.applyMatrix4(A.matrixWorldInverse).applyMatrix4(A.projectionMatrix)}unproject(A){return this.applyMatrix4(A.projectionMatrixInverse).applyMatrix4(A.matrixWorld)}transformDirection(A){let Q=this.x,E=this.y,B=this.z,I=A.elements;return this.x=I[0]*Q+I[4]*E+I[8]*B,this.y=I[1]*Q+I[5]*E+I[9]*B,this.z=I[2]*Q+I[6]*E+I[10]*B,this.normalize()}divide(A){return this.x/=A.x,this.y/=A.y,this.z/=A.z,this}divideScalar(A){return this.multiplyScalar(1/A)}min(A){return this.x=Math.min(this.x,A.x),this.y=Math.min(this.y,A.y),this.z=Math.min(this.z,A.z),this}max(A){return this.x=Math.max(this.x,A.x),this.y=Math.max(this.y,A.y),this.z=Math.max(this.z,A.z),this}clamp(A,Q){return this.x=w0(this.x,A.x,Q.x),this.y=w0(this.y,A.y,Q.y),this.z=w0(this.z,A.z,Q.z),this}clampScalar(A,Q){return this.x=w0(this.x,A,Q),this.y=w0(this.y,A,Q),this.z=w0(this.z,A,Q),this}clampLength(A,Q){let E=this.length();return this.divideScalar(E||1).multiplyScalar(w0(E,A,Q))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(A){return this.x*A.x+this.y*A.y+this.z*A.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(A){return this.normalize().multiplyScalar(A)}lerp(A,Q){return this.x+=(A.x-this.x)*Q,this.y+=(A.y-this.y)*Q,this.z+=(A.z-this.z)*Q,this}lerpVectors(A,Q,E){return this.x=A.x+(Q.x-A.x)*E,this.y=A.y+(Q.y-A.y)*E,this.z=A.z+(Q.z-A.z)*E,this}cross(A){return this.crossVectors(this,A)}crossVectors(A,Q){let{x:E,y:B,z:I}=A,C=Q.x,K=Q.y,J=Q.z;return this.x=B*J-I*K,this.y=I*C-E*J,this.z=E*K-B*C,this}projectOnVector(A){let Q=A.lengthSq();if(Q===0)return this.set(0,0,0);let E=A.dot(this)/Q;return this.copy(A).multiplyScalar(E)}projectOnPlane(A){return eU.copy(this).projectOnVector(A),this.sub(eU)}reflect(A){return this.sub(eU.copy(A).multiplyScalar(2*this.dot(A)))}angleTo(A){let Q=Math.sqrt(this.lengthSq()*A.lengthSq());if(Q===0)return Math.PI/2;let E=this.dot(A)/Q;return Math.acos(w0(E,-1,1))}distanceTo(A){return Math.sqrt(this.distanceToSquared(A))}distanceToSquared(A){let Q=this.x-A.x,E=this.y-A.y,B=this.z-A.z;return Q*Q+E*E+B*B}manhattanDistanceTo(A){return Math.abs(this.x-A.x)+Math.abs(this.y-A.y)+Math.abs(this.z-A.z)}setFromSpherical(A){return this.setFromSphericalCoords(A.radius,A.phi,A.theta)}setFromSphericalCoords(A,Q,E){let B=Math.sin(Q)*A;return this.x=B*Math.sin(E),this.y=Math.cos(Q)*A,this.z=B*Math.cos(E),this}setFromCylindrical(A){return this.setFromCylindricalCoords(A.radius,A.theta,A.y)}setFromCylindricalCoords(A,Q,E){return this.x=A*Math.sin(Q),this.y=E,this.z=A*Math.cos(Q),this}setFromMatrixPosition(A){let Q=A.elements;return this.x=Q[12],this.y=Q[13],this.z=Q[14],this}setFromMatrixScale(A){let Q=this.setFromMatrixColumn(A,0).length(),E=this.setFromMatrixColumn(A,1).length(),B=this.setFromMatrixColumn(A,2).length();return this.x=Q,this.y=E,this.z=B,this}setFromMatrixColumn(A,Q){return this.fromArray(A.elements,Q*4)}setFromMatrix3Column(A,Q){return this.fromArray(A.elements,Q*3)}setFromEuler(A){return this.x=A._x,this.y=A._y,this.z=A._z,this}setFromColor(A){return this.x=A.r,this.y=A.g,this.z=A.b,this}equals(A){return A.x===this.x&&A.y===this.y&&A.z===this.z}fromArray(A,Q=0){return this.x=A[Q],this.y=A[Q+1],this.z=A[Q+2],this}toArray(A=[],Q=0){return A[Q]=this.x,A[Q+1]=this.y,A[Q+2]=this.z,A}fromBufferAttribute(A,Q){return this.x=A.getX(Q),this.y=A.getY(Q),this.z=A.getZ(Q),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let A=Math.random()*Math.PI*2,Q=Math.random()*2-1,E=Math.sqrt(1-Q*Q);return this.x=E*Math.cos(A),this.y=Q,this.z=E*Math.sin(A),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}var eU=/*@__PURE__*/new y,l7=/*@__PURE__*/new J0;class g0{constructor(A=new y(1/0,1/0,1/0),Q=new y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=A,this.max=Q}set(A,Q){return this.min.copy(A),this.max.copy(Q),this}setFromArray(A){this.makeEmpty();for(let Q=0,E=A.length;Q<E;Q+=3)this.expandByPoint(JB.fromArray(A,Q));return this}setFromBufferAttribute(A){this.makeEmpty();for(let Q=0,E=A.count;Q<E;Q++)this.expandByPoint(JB.fromBufferAttribute(A,Q));return this}setFromPoints(A){this.makeEmpty();for(let Q=0,E=A.length;Q<E;Q++)this.expandByPoint(A[Q]);return this}setFromCenterAndSize(A,Q){let E=JB.copy(Q).multiplyScalar(0.5);return this.min.copy(A).sub(E),this.max.copy(A).add(E),this}setFromObject(A,Q=!1){return this.makeEmpty(),this.expandByObject(A,Q)}clone(){return new this.constructor().copy(this)}copy(A){return this.min.copy(A.min),this.max.copy(A.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(A){return this.isEmpty()?A.set(0,0,0):A.addVectors(this.min,this.max).multiplyScalar(0.5)}getSize(A){return this.isEmpty()?A.set(0,0,0):A.subVectors(this.max,this.min)}expandByPoint(A){return this.min.min(A),this.max.max(A),this}expandByVector(A){return this.min.sub(A),this.max.add(A),this}expandByScalar(A){return this.min.addScalar(-A),this.max.addScalar(A),this}expandByObject(A,Q=!1){A.updateWorldMatrix(!1,!1);let E=A.geometry;if(E!==void 0){let I=E.getAttribute("position");if(Q===!0&&I!==void 0&&A.isInstancedMesh!==!0)for(let C=0,K=I.count;C<K;C++){if(A.isMesh===!0)A.getVertexPosition(C,JB);else JB.fromBufferAttribute(I,C);JB.applyMatrix4(A.matrixWorld),this.expandByPoint(JB)}else{if(A.boundingBox!==void 0){if(A.boundingBox===null)A.computeBoundingBox();sK.copy(A.boundingBox)}else{if(E.boundingBox===null)E.computeBoundingBox();sK.copy(E.boundingBox)}sK.applyMatrix4(A.matrixWorld),this.union(sK)}}let B=A.children;for(let I=0,C=B.length;I<C;I++)this.expandByObject(B[I],Q);return this}containsPoint(A){return A.x>=this.min.x&&A.x<=this.max.x&&A.y>=this.min.y&&A.y<=this.max.y&&A.z>=this.min.z&&A.z<=this.max.z}containsBox(A){return this.min.x<=A.min.x&&A.max.x<=this.max.x&&this.min.y<=A.min.y&&A.max.y<=this.max.y&&this.min.z<=A.min.z&&A.max.z<=this.max.z}getParameter(A,Q){return Q.set((A.x-this.min.x)/(this.max.x-this.min.x),(A.y-this.min.y)/(this.max.y-this.min.y),(A.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(A){return A.max.x>=this.min.x&&A.min.x<=this.max.x&&A.max.y>=this.min.y&&A.min.y<=this.max.y&&A.max.z>=this.min.z&&A.min.z<=this.max.z}intersectsSphere(A){return this.clampPoint(A.center,JB),JB.distanceToSquared(A.center)<=A.radius*A.radius}intersectsPlane(A){let Q,E;if(A.normal.x>0)Q=A.normal.x*this.min.x,E=A.normal.x*this.max.x;else Q=A.normal.x*this.max.x,E=A.normal.x*this.min.x;if(A.normal.y>0)Q+=A.normal.y*this.min.y,E+=A.normal.y*this.max.y;else Q+=A.normal.y*this.max.y,E+=A.normal.y*this.min.y;if(A.normal.z>0)Q+=A.normal.z*this.min.z,E+=A.normal.z*this.max.z;else Q+=A.normal.z*this.max.z,E+=A.normal.z*this.min.z;return Q<=-A.constant&&E>=-A.constant}intersectsTriangle(A){if(this.isEmpty())return!1;this.getCenter(f6),iK.subVectors(this.max,f6),U8.subVectors(A.a,f6),Y8.subVectors(A.b,f6),O8.subVectors(A.c,f6),FI.subVectors(Y8,U8),DI.subVectors(O8,Y8),tI.subVectors(U8,O8);let Q=[0,-FI.z,FI.y,0,-DI.z,DI.y,0,-tI.z,tI.y,FI.z,0,-FI.x,DI.z,0,-DI.x,tI.z,0,-tI.x,-FI.y,FI.x,0,-DI.y,DI.x,0,-tI.y,tI.x,0];if(!AY(Q,U8,Y8,O8,iK))return!1;if(Q=[1,0,0,0,1,0,0,0,1],!AY(Q,U8,Y8,O8,iK))return!1;return oK.crossVectors(FI,DI),Q=[oK.x,oK.y,oK.z],AY(Q,U8,Y8,O8,iK)}clampPoint(A,Q){return Q.copy(A).clamp(this.min,this.max)}distanceToPoint(A){return this.clampPoint(A,JB).distanceTo(A)}getBoundingSphere(A){if(this.isEmpty())A.makeEmpty();else this.getCenter(A.center),A.radius=this.getSize(JB).length()*0.5;return A}intersect(A){if(this.min.max(A.min),this.max.min(A.max),this.isEmpty())this.makeEmpty();return this}union(A){return this.min.min(A.min),this.max.max(A.max),this}applyMatrix4(A){if(this.isEmpty())return this;return nB[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(A),nB[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(A),nB[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(A),nB[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(A),nB[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(A),nB[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(A),nB[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(A),nB[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(A),this.setFromPoints(nB),this}translate(A){return this.min.add(A),this.max.add(A),this}equals(A){return A.min.equals(this.min)&&A.max.equals(this.max)}}var nB=[/*@__PURE__*/new y,/*@__PURE__*/new y,/*@__PURE__*/new y,/*@__PURE__*/new y,/*@__PURE__*/new y,/*@__PURE__*/new y,/*@__PURE__*/new y,/*@__PURE__*/new y],JB=/*@__PURE__*/new y,sK=/*@__PURE__*/new g0,U8=/*@__PURE__*/new y,Y8=/*@__PURE__*/new y,O8=/*@__PURE__*/new y,FI=/*@__PURE__*/new y,DI=/*@__PURE__*/new y,tI=/*@__PURE__*/new y,f6=/*@__PURE__*/new y,iK=/*@__PURE__*/new y,oK=/*@__PURE__*/new y,eI=/*@__PURE__*/new y;function AY(A,Q,E,B,I){for(let C=0,K=A.length-3;C<=K;C+=3){eI.fromArray(A,C);let J=I.x*Math.abs(eI.x)+I.y*Math.abs(eI.y)+I.z*Math.abs(eI.z),U=Q.dot(eI),Y=E.dot(eI),H=B.dot(eI);if(Math.max(-Math.max(U,Y,H),Math.min(U,Y,H))>J)return!1}return!0}var t$=/*@__PURE__*/new g0,u6=/*@__PURE__*/new y,QY=/*@__PURE__*/new y;class KQ{constructor(A=new y,Q=-1){this.isSphere=!0,this.center=A,this.radius=Q}set(A,Q){return this.center.copy(A),this.radius=Q,this}setFromPoints(A,Q){let E=this.center;if(Q!==void 0)E.copy(Q);else t$.setFromPoints(A).getCenter(E);let B=0;for(let I=0,C=A.length;I<C;I++)B=Math.max(B,E.distanceToSquared(A[I]));return this.radius=Math.sqrt(B),this}copy(A){return this.center.copy(A.center),this.radius=A.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(A){return A.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(A){return A.distanceTo(this.center)-this.radius}intersectsSphere(A){let Q=this.radius+A.radius;return A.center.distanceToSquared(this.center)<=Q*Q}intersectsBox(A){return A.intersectsSphere(this)}intersectsPlane(A){return Math.abs(A.distanceToPoint(this.center))<=this.radius}clampPoint(A,Q){let E=this.center.distanceToSquared(A);if(Q.copy(A),E>this.radius*this.radius)Q.sub(this.center).normalize(),Q.multiplyScalar(this.radius).add(this.center);return Q}getBoundingBox(A){if(this.isEmpty())return A.makeEmpty(),A;return A.set(this.center,this.center),A.expandByScalar(this.radius),A}applyMatrix4(A){return this.center.applyMatrix4(A),this.radius=this.radius*A.getMaxScaleOnAxis(),this}translate(A){return this.center.add(A),this}expandByPoint(A){if(this.isEmpty())return this.center.copy(A),this.radius=0,this;u6.subVectors(A,this.center);let Q=u6.lengthSq();if(Q>this.radius*this.radius){let E=Math.sqrt(Q),B=(E-this.radius)*0.5;this.center.addScaledVector(u6,B/E),this.radius+=B}return this}union(A){if(A.isEmpty())return this;if(this.isEmpty())return this.copy(A),this;if(this.center.equals(A.center)===!0)this.radius=Math.max(this.radius,A.radius);else QY.subVectors(A.center,this.center).setLength(A.radius),this.expandByPoint(u6.copy(A.center).add(QY)),this.expandByPoint(u6.copy(A.center).sub(QY));return this}equals(A){return A.center.equals(this.center)&&A.radius===this.radius}clone(){return new this.constructor().copy(this)}}var sB=/*@__PURE__*/new y,EY=/*@__PURE__*/new y,rK=/*@__PURE__*/new y,MI=/*@__PURE__*/new y,BY=/*@__PURE__*/new y,aK=/*@__PURE__*/new y,IY=/*@__PURE__*/new y;class qE{constructor(A=new y,Q=new y(0,0,-1)){this.origin=A,this.direction=Q}set(A,Q){return this.origin.copy(A),this.direction.copy(Q),this}copy(A){return this.origin.copy(A.origin),this.direction.copy(A.direction),this}at(A,Q){return Q.copy(this.origin).addScaledVector(this.direction,A)}lookAt(A){return this.direction.copy(A).sub(this.origin).normalize(),this}recast(A){return this.origin.copy(this.at(A,sB)),this}closestPointToPoint(A,Q){Q.subVectors(A,this.origin);let E=Q.dot(this.direction);if(E<0)return Q.copy(this.origin);return Q.copy(this.origin).addScaledVector(this.direction,E)}distanceToPoint(A){return Math.sqrt(this.distanceSqToPoint(A))}distanceSqToPoint(A){let Q=sB.subVectors(A,this.origin).dot(this.direction);if(Q<0)return this.origin.distanceToSquared(A);return sB.copy(this.origin).addScaledVector(this.direction,Q),sB.distanceToSquared(A)}distanceSqToSegment(A,Q,E,B){EY.copy(A).add(Q).multiplyScalar(0.5),rK.copy(Q).sub(A).normalize(),MI.copy(this.origin).sub(EY);let I=A.distanceTo(Q)*0.5,C=-this.direction.dot(rK),K=MI.dot(this.direction),J=-MI.dot(rK),U=MI.lengthSq(),Y=Math.abs(1-C*C),H,R,O,N;if(Y>0)if(H=C*J-K,R=C*K-J,N=I*Y,H>=0)if(R>=-N)if(R<=N){let $=1/Y;H*=$,R*=$,O=H*(H+C*R+2*K)+R*(C*H+R+2*J)+U}else R=I,H=Math.max(0,-(C*R+K)),O=-H*H+R*(R+2*J)+U;else R=-I,H=Math.max(0,-(C*R+K)),O=-H*H+R*(R+2*J)+U;else if(R<=-N)H=Math.max(0,-(-C*I+K)),R=H>0?-I:Math.min(Math.max(-I,-J),I),O=-H*H+R*(R+2*J)+U;else if(R<=N)H=0,R=Math.min(Math.max(-I,-J),I),O=R*(R+2*J)+U;else H=Math.max(0,-(C*I+K)),R=H>0?I:Math.min(Math.max(-I,-J),I),O=-H*H+R*(R+2*J)+U;else R=C>0?-I:I,H=Math.max(0,-(C*R+K)),O=-H*H+R*(R+2*J)+U;if(E)E.copy(this.origin).addScaledVector(this.direction,H);if(B)B.copy(EY).addScaledVector(rK,R);return O}intersectSphere(A,Q){sB.subVectors(A.center,this.origin);let E=sB.dot(this.direction),B=sB.dot(sB)-E*E,I=A.radius*A.radius;if(B>I)return null;let C=Math.sqrt(I-B),K=E-C,J=E+C;if(J<0)return null;if(K<0)return this.at(J,Q);return this.at(K,Q)}intersectsSphere(A){return this.distanceSqToPoint(A.center)<=A.radius*A.radius}distanceToPlane(A){let Q=A.normal.dot(this.direction);if(Q===0){if(A.distanceToPoint(this.origin)===0)return 0;return null}let E=-(this.origin.dot(A.normal)+A.constant)/Q;return E>=0?E:null}intersectPlane(A,Q){let E=this.distanceToPlane(A);if(E===null)return null;return this.at(E,Q)}intersectsPlane(A){let Q=A.distanceToPoint(this.origin);if(Q===0)return!0;if(A.normal.dot(this.direction)*Q<0)return!0;return!1}intersectBox(A,Q){let E,B,I,C,K,J,U=1/this.direction.x,Y=1/this.direction.y,H=1/this.direction.z,R=this.origin;if(U>=0)E=(A.min.x-R.x)*U,B=(A.max.x-R.x)*U;else E=(A.max.x-R.x)*U,B=(A.min.x-R.x)*U;if(Y>=0)I=(A.min.y-R.y)*Y,C=(A.max.y-R.y)*Y;else I=(A.max.y-R.y)*Y,C=(A.min.y-R.y)*Y;if(E>C||I>B)return null;if(I>E||isNaN(E))E=I;if(C<B||isNaN(B))B=C;if(H>=0)K=(A.min.z-R.z)*H,J=(A.max.z-R.z)*H;else K=(A.max.z-R.z)*H,J=(A.min.z-R.z)*H;if(E>J||K>B)return null;if(K>E||E!==E)E=K;if(J<B||B!==B)B=J;if(B<0)return null;return this.at(E>=0?E:B,Q)}intersectsBox(A){return this.intersectBox(A,sB)!==null}intersectTriangle(A,Q,E,B,I){BY.subVectors(Q,A),aK.subVectors(E,A),IY.crossVectors(BY,aK);let C=this.direction.dot(IY),K;if(C>0){if(B)return null;K=1}else if(C<0)K=-1,C=-C;else return null;MI.subVectors(this.origin,A);let J=K*this.direction.dot(aK.crossVectors(MI,aK));if(J<0)return null;let U=K*this.direction.dot(BY.cross(MI));if(U<0)return null;if(J+U>C)return null;let Y=-K*MI.dot(IY);if(Y<0)return null;return this.at(Y/C,I)}applyMatrix4(A){return this.origin.applyMatrix4(A),this.direction.transformDirection(A),this}equals(A){return A.origin.equals(this.origin)&&A.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class RA{constructor(A,Q,E,B,I,C,K,J,U,Y,H,R,O,N,$,L){if(RA.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A!==void 0)this.set(A,Q,E,B,I,C,K,J,U,Y,H,R,O,N,$,L)}set(A,Q,E,B,I,C,K,J,U,Y,H,R,O,N,$,L){let W=this.elements;return W[0]=A,W[4]=Q,W[8]=E,W[12]=B,W[1]=I,W[5]=C,W[9]=K,W[13]=J,W[2]=U,W[6]=Y,W[10]=H,W[14]=R,W[3]=O,W[7]=N,W[11]=$,W[15]=L,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new RA().fromArray(this.elements)}copy(A){let Q=this.elements,E=A.elements;return Q[0]=E[0],Q[1]=E[1],Q[2]=E[2],Q[3]=E[3],Q[4]=E[4],Q[5]=E[5],Q[6]=E[6],Q[7]=E[7],Q[8]=E[8],Q[9]=E[9],Q[10]=E[10],Q[11]=E[11],Q[12]=E[12],Q[13]=E[13],Q[14]=E[14],Q[15]=E[15],this}copyPosition(A){let Q=this.elements,E=A.elements;return Q[12]=E[12],Q[13]=E[13],Q[14]=E[14],this}setFromMatrix3(A){let Q=A.elements;return this.set(Q[0],Q[3],Q[6],0,Q[1],Q[4],Q[7],0,Q[2],Q[5],Q[8],0,0,0,0,1),this}extractBasis(A,Q,E){return A.setFromMatrixColumn(this,0),Q.setFromMatrixColumn(this,1),E.setFromMatrixColumn(this,2),this}makeBasis(A,Q,E){return this.set(A.x,Q.x,E.x,0,A.y,Q.y,E.y,0,A.z,Q.z,E.z,0,0,0,0,1),this}extractRotation(A){let Q=this.elements,E=A.elements,B=1/H8.setFromMatrixColumn(A,0).length(),I=1/H8.setFromMatrixColumn(A,1).length(),C=1/H8.setFromMatrixColumn(A,2).length();return Q[0]=E[0]*B,Q[1]=E[1]*B,Q[2]=E[2]*B,Q[3]=0,Q[4]=E[4]*I,Q[5]=E[5]*I,Q[6]=E[6]*I,Q[7]=0,Q[8]=E[8]*C,Q[9]=E[9]*C,Q[10]=E[10]*C,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,this}makeRotationFromEuler(A){let Q=this.elements,E=A.x,B=A.y,I=A.z,C=Math.cos(E),K=Math.sin(E),J=Math.cos(B),U=Math.sin(B),Y=Math.cos(I),H=Math.sin(I);if(A.order==="XYZ"){let R=C*Y,O=C*H,N=K*Y,$=K*H;Q[0]=J*Y,Q[4]=-J*H,Q[8]=U,Q[1]=O+N*U,Q[5]=R-$*U,Q[9]=-K*J,Q[2]=$-R*U,Q[6]=N+O*U,Q[10]=C*J}else if(A.order==="YXZ"){let R=J*Y,O=J*H,N=U*Y,$=U*H;Q[0]=R+$*K,Q[4]=N*K-O,Q[8]=C*U,Q[1]=C*H,Q[5]=C*Y,Q[9]=-K,Q[2]=O*K-N,Q[6]=$+R*K,Q[10]=C*J}else if(A.order==="ZXY"){let R=J*Y,O=J*H,N=U*Y,$=U*H;Q[0]=R-$*K,Q[4]=-C*H,Q[8]=N+O*K,Q[1]=O+N*K,Q[5]=C*Y,Q[9]=$-R*K,Q[2]=-C*U,Q[6]=K,Q[10]=C*J}else if(A.order==="ZYX"){let R=C*Y,O=C*H,N=K*Y,$=K*H;Q[0]=J*Y,Q[4]=N*U-O,Q[8]=R*U+$,Q[1]=J*H,Q[5]=$*U+R,Q[9]=O*U-N,Q[2]=-U,Q[6]=K*J,Q[10]=C*J}else if(A.order==="YZX"){let R=C*J,O=C*U,N=K*J,$=K*U;Q[0]=J*Y,Q[4]=$-R*H,Q[8]=N*H+O,Q[1]=H,Q[5]=C*Y,Q[9]=-K*Y,Q[2]=-U*Y,Q[6]=O*H+N,Q[10]=R-$*H}else if(A.order==="XZY"){let R=C*J,O=C*U,N=K*J,$=K*U;Q[0]=J*Y,Q[4]=-H,Q[8]=U*Y,Q[1]=R*H+$,Q[5]=C*Y,Q[9]=O*H-N,Q[2]=N*H-O,Q[6]=K*Y,Q[10]=$*H+R}return Q[3]=0,Q[7]=0,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,this}makeRotationFromQuaternion(A){return this.compose(e$,A,AL)}lookAt(A,Q,E){let B=this.elements;if(kE.subVectors(A,Q),kE.lengthSq()===0)kE.z=1;if(kE.normalize(),wI.crossVectors(E,kE),wI.lengthSq()===0){if(Math.abs(E.z)===1)kE.x+=0.0001;else kE.z+=0.0001;kE.normalize(),wI.crossVectors(E,kE)}return wI.normalize(),tK.crossVectors(kE,wI),B[0]=wI.x,B[4]=tK.x,B[8]=kE.x,B[1]=wI.y,B[5]=tK.y,B[9]=kE.y,B[2]=wI.z,B[6]=tK.z,B[10]=kE.z,this}multiply(A){return this.multiplyMatrices(this,A)}premultiply(A){return this.multiplyMatrices(A,this)}multiplyMatrices(A,Q){let E=A.elements,B=Q.elements,I=this.elements,C=E[0],K=E[4],J=E[8],U=E[12],Y=E[1],H=E[5],R=E[9],O=E[13],N=E[2],$=E[6],L=E[10],W=E[14],Z=E[3],G=E[7],X=E[11],q=E[15],M=B[0],F=B[4],D=B[8],_=B[12],w=B[1],k=B[5],T=B[9],z=B[13],j=B[2],v=B[6],g=B[10],P=B[14],V=B[3],S=B[7],h=B[11],x=B[15];return I[0]=C*M+K*w+J*j+U*V,I[4]=C*F+K*k+J*v+U*S,I[8]=C*D+K*T+J*g+U*h,I[12]=C*_+K*z+J*P+U*x,I[1]=Y*M+H*w+R*j+O*V,I[5]=Y*F+H*k+R*v+O*S,I[9]=Y*D+H*T+R*g+O*h,I[13]=Y*_+H*z+R*P+O*x,I[2]=N*M+$*w+L*j+W*V,I[6]=N*F+$*k+L*v+W*S,I[10]=N*D+$*T+L*g+W*h,I[14]=N*_+$*z+L*P+W*x,I[3]=Z*M+G*w+X*j+q*V,I[7]=Z*F+G*k+X*v+q*S,I[11]=Z*D+G*T+X*g+q*h,I[15]=Z*_+G*z+X*P+q*x,this}multiplyScalar(A){let Q=this.elements;return Q[0]*=A,Q[4]*=A,Q[8]*=A,Q[12]*=A,Q[1]*=A,Q[5]*=A,Q[9]*=A,Q[13]*=A,Q[2]*=A,Q[6]*=A,Q[10]*=A,Q[14]*=A,Q[3]*=A,Q[7]*=A,Q[11]*=A,Q[15]*=A,this}determinant(){let A=this.elements,Q=A[0],E=A[4],B=A[8],I=A[12],C=A[1],K=A[5],J=A[9],U=A[13],Y=A[2],H=A[6],R=A[10],O=A[14],N=A[3],$=A[7],L=A[11],W=A[15];return N*(+I*J*H-B*U*H-I*K*R+E*U*R+B*K*O-E*J*O)+$*(+Q*J*O-Q*U*R+I*C*R-B*C*O+B*U*Y-I*J*Y)+L*(+Q*U*H-Q*K*O-I*C*H+E*C*O+I*K*Y-E*U*Y)+W*(-B*K*Y-Q*J*H+Q*K*R+B*C*H-E*C*R+E*J*Y)}transpose(){let A=this.elements,Q;return Q=A[1],A[1]=A[4],A[4]=Q,Q=A[2],A[2]=A[8],A[8]=Q,Q=A[6],A[6]=A[9],A[9]=Q,Q=A[3],A[3]=A[12],A[12]=Q,Q=A[7],A[7]=A[13],A[13]=Q,Q=A[11],A[11]=A[14],A[14]=Q,this}setPosition(A,Q,E){let B=this.elements;if(A.isVector3)B[12]=A.x,B[13]=A.y,B[14]=A.z;else B[12]=A,B[13]=Q,B[14]=E;return this}invert(){let A=this.elements,Q=A[0],E=A[1],B=A[2],I=A[3],C=A[4],K=A[5],J=A[6],U=A[7],Y=A[8],H=A[9],R=A[10],O=A[11],N=A[12],$=A[13],L=A[14],W=A[15],Z=H*L*U-$*R*U+$*J*O-K*L*O-H*J*W+K*R*W,G=N*R*U-Y*L*U-N*J*O+C*L*O+Y*J*W-C*R*W,X=Y*$*U-N*H*U+N*K*O-C*$*O-Y*K*W+C*H*W,q=N*H*J-Y*$*J-N*K*R+C*$*R+Y*K*L-C*H*L,M=Q*Z+E*G+B*X+I*q;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let F=1/M;return A[0]=Z*F,A[1]=($*R*I-H*L*I-$*B*O+E*L*O+H*B*W-E*R*W)*F,A[2]=(K*L*I-$*J*I+$*B*U-E*L*U-K*B*W+E*J*W)*F,A[3]=(H*J*I-K*R*I-H*B*U+E*R*U+K*B*O-E*J*O)*F,A[4]=G*F,A[5]=(Y*L*I-N*R*I+N*B*O-Q*L*O-Y*B*W+Q*R*W)*F,A[6]=(N*J*I-C*L*I-N*B*U+Q*L*U+C*B*W-Q*J*W)*F,A[7]=(C*R*I-Y*J*I+Y*B*U-Q*R*U-C*B*O+Q*J*O)*F,A[8]=X*F,A[9]=(N*H*I-Y*$*I-N*E*O+Q*$*O+Y*E*W-Q*H*W)*F,A[10]=(C*$*I-N*K*I+N*E*U-Q*$*U-C*E*W+Q*K*W)*F,A[11]=(Y*K*I-C*H*I-Y*E*U+Q*H*U+C*E*O-Q*K*O)*F,A[12]=q*F,A[13]=(Y*$*B-N*H*B+N*E*R-Q*$*R-Y*E*L+Q*H*L)*F,A[14]=(N*K*B-C*$*B-N*E*J+Q*$*J+C*E*L-Q*K*L)*F,A[15]=(C*H*B-Y*K*B+Y*E*J-Q*H*J-C*E*R+Q*K*R)*F,this}scale(A){let Q=this.elements,E=A.x,B=A.y,I=A.z;return Q[0]*=E,Q[4]*=B,Q[8]*=I,Q[1]*=E,Q[5]*=B,Q[9]*=I,Q[2]*=E,Q[6]*=B,Q[10]*=I,Q[3]*=E,Q[7]*=B,Q[11]*=I,this}getMaxScaleOnAxis(){let A=this.elements,Q=A[0]*A[0]+A[1]*A[1]+A[2]*A[2],E=A[4]*A[4]+A[5]*A[5]+A[6]*A[6],B=A[8]*A[8]+A[9]*A[9]+A[10]*A[10];return Math.sqrt(Math.max(Q,E,B))}makeTranslation(A,Q,E){if(A.isVector3)this.set(1,0,0,A.x,0,1,0,A.y,0,0,1,A.z,0,0,0,1);else this.set(1,0,0,A,0,1,0,Q,0,0,1,E,0,0,0,1);return this}makeRotationX(A){let Q=Math.cos(A),E=Math.sin(A);return this.set(1,0,0,0,0,Q,-E,0,0,E,Q,0,0,0,0,1),this}makeRotationY(A){let Q=Math.cos(A),E=Math.sin(A);return this.set(Q,0,E,0,0,1,0,0,-E,0,Q,0,0,0,0,1),this}makeRotationZ(A){let Q=Math.cos(A),E=Math.sin(A);return this.set(Q,-E,0,0,E,Q,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(A,Q){let E=Math.cos(Q),B=Math.sin(Q),I=1-E,C=A.x,K=A.y,J=A.z,U=I*C,Y=I*K;return this.set(U*C+E,U*K-B*J,U*J+B*K,0,U*K+B*J,Y*K+E,Y*J-B*C,0,U*J-B*K,Y*J+B*C,I*J*J+E,0,0,0,0,1),this}makeScale(A,Q,E){return this.set(A,0,0,0,0,Q,0,0,0,0,E,0,0,0,0,1),this}makeShear(A,Q,E,B,I,C){return this.set(1,E,I,0,A,1,C,0,Q,B,1,0,0,0,0,1),this}compose(A,Q,E){let B=this.elements,I=Q._x,C=Q._y,K=Q._z,J=Q._w,U=I+I,Y=C+C,H=K+K,R=I*U,O=I*Y,N=I*H,$=C*Y,L=C*H,W=K*H,Z=J*U,G=J*Y,X=J*H,q=E.x,M=E.y,F=E.z;return B[0]=(1-($+W))*q,B[1]=(O+X)*q,B[2]=(N-G)*q,B[3]=0,B[4]=(O-X)*M,B[5]=(1-(R+W))*M,B[6]=(L+Z)*M,B[7]=0,B[8]=(N+G)*F,B[9]=(L-Z)*F,B[10]=(1-(R+$))*F,B[11]=0,B[12]=A.x,B[13]=A.y,B[14]=A.z,B[15]=1,this}decompose(A,Q,E){let B=this.elements,I=H8.set(B[0],B[1],B[2]).length(),C=H8.set(B[4],B[5],B[6]).length(),K=H8.set(B[8],B[9],B[10]).length();if(this.determinant()<0)I=-I;A.x=B[12],A.y=B[13],A.z=B[14],UB.copy(this);let U=1/I,Y=1/C,H=1/K;return UB.elements[0]*=U,UB.elements[1]*=U,UB.elements[2]*=U,UB.elements[4]*=Y,UB.elements[5]*=Y,UB.elements[6]*=Y,UB.elements[8]*=H,UB.elements[9]*=H,UB.elements[10]*=H,Q.setFromRotationMatrix(UB),E.x=I,E.y=C,E.z=K,this}makePerspective(A,Q,E,B,I,C,K=2000){let J=this.elements,U=2*I/(Q-A),Y=2*I/(E-B),H=(Q+A)/(Q-A),R=(E+B)/(E-B),O,N;if(K===2000)O=-(C+I)/(C-I),N=-2*C*I/(C-I);else if(K===2001)O=-C/(C-I),N=-C*I/(C-I);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+K);return J[0]=U,J[4]=0,J[8]=H,J[12]=0,J[1]=0,J[5]=Y,J[9]=R,J[13]=0,J[2]=0,J[6]=0,J[10]=O,J[14]=N,J[3]=0,J[7]=0,J[11]=-1,J[15]=0,this}makeOrthographic(A,Q,E,B,I,C,K=2000){let J=this.elements,U=1/(Q-A),Y=1/(E-B),H=1/(C-I),R=(Q+A)*U,O=(E+B)*Y,N,$;if(K===2000)N=(C+I)*H,$=-2*H;else if(K===2001)N=I*H,$=-1*H;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+K);return J[0]=2*U,J[4]=0,J[8]=0,J[12]=-R,J[1]=0,J[5]=2*Y,J[9]=0,J[13]=-O,J[2]=0,J[6]=0,J[10]=$,J[14]=-N,J[3]=0,J[7]=0,J[11]=0,J[15]=1,this}equals(A){let Q=this.elements,E=A.elements;for(let B=0;B<16;B++)if(Q[B]!==E[B])return!1;return!0}fromArray(A,Q=0){for(let E=0;E<16;E++)this.elements[E]=A[E+Q];return this}toArray(A=[],Q=0){let E=this.elements;return A[Q]=E[0],A[Q+1]=E[1],A[Q+2]=E[2],A[Q+3]=E[3],A[Q+4]=E[4],A[Q+5]=E[5],A[Q+6]=E[6],A[Q+7]=E[7],A[Q+8]=E[8],A[Q+9]=E[9],A[Q+10]=E[10],A[Q+11]=E[11],A[Q+12]=E[12],A[Q+13]=E[13],A[Q+14]=E[14],A[Q+15]=E[15],A}}var H8=/*@__PURE__*/new y,UB=/*@__PURE__*/new RA,e$=/*@__PURE__*/new y(0,0,0),AL=/*@__PURE__*/new y(1,1,1),wI=/*@__PURE__*/new y,tK=/*@__PURE__*/new y,kE=/*@__PURE__*/new y,d7=/*@__PURE__*/new RA,n7=/*@__PURE__*/new J0;class DQ{constructor(A=0,Q=0,E=0,B=DQ.DEFAULT_ORDER){this.isEuler=!0,this._x=A,this._y=Q,this._z=E,this._order=B}get x(){return this._x}set x(A){this._x=A,this._onChangeCallback()}get y(){return this._y}set y(A){this._y=A,this._onChangeCallback()}get z(){return this._z}set z(A){this._z=A,this._onChangeCallback()}get order(){return this._order}set order(A){this._order=A,this._onChangeCallback()}set(A,Q,E,B=this._order){return this._x=A,this._y=Q,this._z=E,this._order=B,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(A){return this._x=A._x,this._y=A._y,this._z=A._z,this._order=A._order,this._onChangeCallback(),this}setFromRotationMatrix(A,Q=this._order,E=!0){let B=A.elements,I=B[0],C=B[4],K=B[8],J=B[1],U=B[5],Y=B[9],H=B[2],R=B[6],O=B[10];switch(Q){case"XYZ":if(this._y=Math.asin(w0(K,-1,1)),Math.abs(K)<0.9999999)this._x=Math.atan2(-Y,O),this._z=Math.atan2(-C,I);else this._x=Math.atan2(R,U),this._z=0;break;case"YXZ":if(this._x=Math.asin(-w0(Y,-1,1)),Math.abs(Y)<0.9999999)this._y=Math.atan2(K,O),this._z=Math.atan2(J,U);else this._y=Math.atan2(-H,I),this._z=0;break;case"ZXY":if(this._x=Math.asin(w0(R,-1,1)),Math.abs(R)<0.9999999)this._y=Math.atan2(-H,O),this._z=Math.atan2(-C,U);else this._y=0,this._z=Math.atan2(J,I);break;case"ZYX":if(this._y=Math.asin(-w0(H,-1,1)),Math.abs(H)<0.9999999)this._x=Math.atan2(R,O),this._z=Math.atan2(J,I);else this._x=0,this._z=Math.atan2(-C,U);break;case"YZX":if(this._z=Math.asin(w0(J,-1,1)),Math.abs(J)<0.9999999)this._x=Math.atan2(-Y,U),this._y=Math.atan2(-H,I);else this._x=0,this._y=Math.atan2(K,O);break;case"XZY":if(this._z=Math.asin(-w0(C,-1,1)),Math.abs(C)<0.9999999)this._x=Math.atan2(R,U),this._y=Math.atan2(K,I);else this._x=Math.atan2(-Y,O),this._y=0;break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+Q)}if(this._order=Q,E===!0)this._onChangeCallback();return this}setFromQuaternion(A,Q,E){return d7.makeRotationFromQuaternion(A),this.setFromRotationMatrix(d7,Q,E)}setFromVector3(A,Q=this._order){return this.set(A.x,A.y,A.z,Q)}reorder(A){return n7.setFromEuler(this),this.setFromQuaternion(n7,A)}equals(A){return A._x===this._x&&A._y===this._y&&A._z===this._z&&A._order===this._order}fromArray(A){if(this._x=A[0],this._y=A[1],this._z=A[2],A[3]!==void 0)this._order=A[3];return this._onChangeCallback(),this}toArray(A=[],Q=0){return A[Q]=this._x,A[Q+1]=this._y,A[Q+2]=this._z,A[Q+3]=this._order,A}_onChange(A){return this._onChangeCallback=A,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}DQ.DEFAULT_ORDER="XYZ";class j1{constructor(){this.mask=1}set(A){this.mask=(1<<A|0)>>>0}enable(A){this.mask|=1<<A|0}enableAll(){this.mask=-1}toggle(A){this.mask^=1<<A|0}disable(A){this.mask&=~(1<<A|0)}disableAll(){this.mask=0}test(A){return(this.mask&A.mask)!==0}isEnabled(A){return(this.mask&(1<<A|0))!==0}}var QL=0,s7=/*@__PURE__*/new y,Z8=/*@__PURE__*/new J0,iB=/*@__PURE__*/new RA,eK=/*@__PURE__*/new y,p6=/*@__PURE__*/new y,EL=/*@__PURE__*/new y,BL=/*@__PURE__*/new J0,i7=/*@__PURE__*/new y(1,0,0),o7=/*@__PURE__*/new y(0,1,0),r7=/*@__PURE__*/new y(0,0,1),a7={type:"added"},IL={type:"removed"},R8={type:"childadded",child:null},CY={type:"childremoved",child:null};class I0 extends rE{constructor(){super();this.isObject3D=!0,Object.defineProperty(this,"id",{value:QL++}),this.uuid=TE(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=I0.DEFAULT_UP.clone();let A=new y,Q=new DQ,E=new J0,B=new y(1,1,1);function I(){E.setFromEuler(Q,!1)}function C(){Q.setFromQuaternion(E,void 0,!1)}Q._onChange(I),E._onChange(C),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:A},rotation:{configurable:!0,enumerable:!0,value:Q},quaternion:{configurable:!0,enumerable:!0,value:E},scale:{configurable:!0,enumerable:!0,value:B},modelViewMatrix:{value:new RA},normalMatrix:{value:new E0}}),this.matrix=new RA,this.matrixWorld=new RA,this.matrixAutoUpdate=I0.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=I0.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new j1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(A){if(this.matrixAutoUpdate)this.updateMatrix();this.matrix.premultiply(A),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(A){return this.quaternion.premultiply(A),this}setRotationFromAxisAngle(A,Q){this.quaternion.setFromAxisAngle(A,Q)}setRotationFromEuler(A){this.quaternion.setFromEuler(A,!0)}setRotationFromMatrix(A){this.quaternion.setFromRotationMatrix(A)}setRotationFromQuaternion(A){this.quaternion.copy(A)}rotateOnAxis(A,Q){return Z8.setFromAxisAngle(A,Q),this.quaternion.multiply(Z8),this}rotateOnWorldAxis(A,Q){return Z8.setFromAxisAngle(A,Q),this.quaternion.premultiply(Z8),this}rotateX(A){return this.rotateOnAxis(i7,A)}rotateY(A){return this.rotateOnAxis(o7,A)}rotateZ(A){return this.rotateOnAxis(r7,A)}translateOnAxis(A,Q){return s7.copy(A).applyQuaternion(this.quaternion),this.position.add(s7.multiplyScalar(Q)),this}translateX(A){return this.translateOnAxis(i7,A)}translateY(A){return this.translateOnAxis(o7,A)}translateZ(A){return this.translateOnAxis(r7,A)}localToWorld(A){return this.updateWorldMatrix(!0,!1),A.applyMatrix4(this.matrixWorld)}worldToLocal(A){return this.updateWorldMatrix(!0,!1),A.applyMatrix4(iB.copy(this.matrixWorld).invert())}lookAt(A,Q,E){if(A.isVector3)eK.copy(A);else eK.set(A,Q,E);let B=this.parent;if(this.updateWorldMatrix(!0,!1),p6.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight)iB.lookAt(p6,eK,this.up);else iB.lookAt(eK,p6,this.up);if(this.quaternion.setFromRotationMatrix(iB),B)iB.extractRotation(B.matrixWorld),Z8.setFromRotationMatrix(iB),this.quaternion.premultiply(Z8.invert())}add(A){if(arguments.length>1){for(let Q=0;Q<arguments.length;Q++)this.add(arguments[Q]);return this}if(A===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",A),this;if(A&&A.isObject3D)A.removeFromParent(),A.parent=this,this.children.push(A),A.dispatchEvent(a7),R8.child=A,this.dispatchEvent(R8),R8.child=null;else console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",A);return this}remove(A){if(arguments.length>1){for(let E=0;E<arguments.length;E++)this.remove(arguments[E]);return this}let Q=this.children.indexOf(A);if(Q!==-1)A.parent=null,this.children.splice(Q,1),A.dispatchEvent(IL),CY.child=A,this.dispatchEvent(CY),CY.child=null;return this}removeFromParent(){let A=this.parent;if(A!==null)A.remove(this);return this}clear(){return this.remove(...this.children)}attach(A){if(this.updateWorldMatrix(!0,!1),iB.copy(this.matrixWorld).invert(),A.parent!==null)A.parent.updateWorldMatrix(!0,!1),iB.multiply(A.parent.matrixWorld);return A.applyMatrix4(iB),A.removeFromParent(),A.parent=this,this.children.push(A),A.updateWorldMatrix(!1,!0),A.dispatchEvent(a7),R8.child=A,this.dispatchEvent(R8),R8.child=null,this}getObjectById(A){return this.getObjectByProperty("id",A)}getObjectByName(A){return this.getObjectByProperty("name",A)}getObjectByProperty(A,Q){if(this[A]===Q)return this;for(let E=0,B=this.children.length;E<B;E++){let C=this.children[E].getObjectByProperty(A,Q);if(C!==void 0)return C}return}getObjectsByProperty(A,Q,E=[]){if(this[A]===Q)E.push(this);let B=this.children;for(let I=0,C=B.length;I<C;I++)B[I].getObjectsByProperty(A,Q,E);return E}getWorldPosition(A){return this.updateWorldMatrix(!0,!1),A.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(A){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(p6,A,EL),A}getWorldScale(A){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(p6,BL,A),A}getWorldDirection(A){this.updateWorldMatrix(!0,!1);let Q=this.matrixWorld.elements;return A.set(Q[8],Q[9],Q[10]).normalize()}raycast(){}traverse(A){A(this);let Q=this.children;for(let E=0,B=Q.length;E<B;E++)Q[E].traverse(A)}traverseVisible(A){if(this.visible===!1)return;A(this);let Q=this.children;for(let E=0,B=Q.length;E<B;E++)Q[E].traverseVisible(A)}traverseAncestors(A){let Q=this.parent;if(Q!==null)A(Q),Q.traverseAncestors(A)}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(A){if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldNeedsUpdate||A){if(this.matrixWorldAutoUpdate===!0)if(this.parent===null)this.matrixWorld.copy(this.matrix);else this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);this.matrixWorldNeedsUpdate=!1,A=!0}let Q=this.children;for(let E=0,B=Q.length;E<B;E++)Q[E].updateMatrixWorld(A)}updateWorldMatrix(A,Q){let E=this.parent;if(A===!0&&E!==null)E.updateWorldMatrix(!0,!1);if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldAutoUpdate===!0)if(this.parent===null)this.matrixWorld.copy(this.matrix);else this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(Q===!0){let B=this.children;for(let I=0,C=B.length;I<C;I++)B[I].updateWorldMatrix(!1,!0)}}toJSON(A){let Q=A===void 0||typeof A==="string",E={};if(Q)A={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},E.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"};let B={};if(B.uuid=this.uuid,B.type=this.type,this.name!=="")B.name=this.name;if(this.castShadow===!0)B.castShadow=!0;if(this.receiveShadow===!0)B.receiveShadow=!0;if(this.visible===!1)B.visible=!1;if(this.frustumCulled===!1)B.frustumCulled=!1;if(this.renderOrder!==0)B.renderOrder=this.renderOrder;if(Object.keys(this.userData).length>0)B.userData=this.userData;if(B.layers=this.layers.mask,B.matrix=this.matrix.toArray(),B.up=this.up.toArray(),this.matrixAutoUpdate===!1)B.matrixAutoUpdate=!1;if(this.isInstancedMesh){if(B.type="InstancedMesh",B.count=this.count,B.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null)B.instanceColor=this.instanceColor.toJSON()}if(this.isBatchedMesh){if(B.type="BatchedMesh",B.perObjectFrustumCulled=this.perObjectFrustumCulled,B.sortObjects=this.sortObjects,B.drawRanges=this._drawRanges,B.reservedRanges=this._reservedRanges,B.visibility=this._visibility,B.active=this._active,B.bounds=this._bounds.map((K)=>({boxInitialized:K.boxInitialized,boxMin:K.box.min.toArray(),boxMax:K.box.max.toArray(),sphereInitialized:K.sphereInitialized,sphereRadius:K.sphere.radius,sphereCenter:K.sphere.center.toArray()})),B.maxInstanceCount=this._maxInstanceCount,B.maxVertexCount=this._maxVertexCount,B.maxIndexCount=this._maxIndexCount,B.geometryInitialized=this._geometryInitialized,B.geometryCount=this._geometryCount,B.matricesTexture=this._matricesTexture.toJSON(A),this._colorsTexture!==null)B.colorsTexture=this._colorsTexture.toJSON(A);if(this.boundingSphere!==null)B.boundingSphere={center:B.boundingSphere.center.toArray(),radius:B.boundingSphere.radius};if(this.boundingBox!==null)B.boundingBox={min:B.boundingBox.min.toArray(),max:B.boundingBox.max.toArray()}}function I(K,J){if(K[J.uuid]===void 0)K[J.uuid]=J.toJSON(A);return J.uuid}if(this.isScene){if(this.background){if(this.background.isColor)B.background=this.background.toJSON();else if(this.background.isTexture)B.background=this.background.toJSON(A).uuid}if(this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0)B.environment=this.environment.toJSON(A).uuid}else if(this.isMesh||this.isLine||this.isPoints){B.geometry=I(A.geometries,this.geometry);let K=this.geometry.parameters;if(K!==void 0&&K.shapes!==void 0){let J=K.shapes;if(Array.isArray(J))for(let U=0,Y=J.length;U<Y;U++){let H=J[U];I(A.shapes,H)}else I(A.shapes,J)}}if(this.isSkinnedMesh){if(B.bindMode=this.bindMode,B.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0)I(A.skeletons,this.skeleton),B.skeleton=this.skeleton.uuid}if(this.material!==void 0)if(Array.isArray(this.material)){let K=[];for(let J=0,U=this.material.length;J<U;J++)K.push(I(A.materials,this.material[J]));B.material=K}else B.material=I(A.materials,this.material);if(this.children.length>0){B.children=[];for(let K=0;K<this.children.length;K++)B.children.push(this.children[K].toJSON(A).object)}if(this.animations.length>0){B.animations=[];for(let K=0;K<this.animations.length;K++){let J=this.animations[K];B.animations.push(I(A.animations,J))}}if(Q){let K=C(A.geometries),J=C(A.materials),U=C(A.textures),Y=C(A.images),H=C(A.shapes),R=C(A.skeletons),O=C(A.animations),N=C(A.nodes);if(K.length>0)E.geometries=K;if(J.length>0)E.materials=J;if(U.length>0)E.textures=U;if(Y.length>0)E.images=Y;if(H.length>0)E.shapes=H;if(R.length>0)E.skeletons=R;if(O.length>0)E.animations=O;if(N.length>0)E.nodes=N}return E.object=B,E;function C(K){let J=[];for(let U in K){let Y=K[U];delete Y.metadata,J.push(Y)}return J}}clone(A){return new this.constructor().copy(this,A)}copy(A,Q=!0){if(this.name=A.name,this.up.copy(A.up),this.position.copy(A.position),this.rotation.order=A.rotation.order,this.quaternion.copy(A.quaternion),this.scale.copy(A.scale),this.matrix.copy(A.matrix),this.matrixWorld.copy(A.matrixWorld),this.matrixAutoUpdate=A.matrixAutoUpdate,this.matrixWorldAutoUpdate=A.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=A.matrixWorldNeedsUpdate,this.layers.mask=A.layers.mask,this.visible=A.visible,this.castShadow=A.castShadow,this.receiveShadow=A.receiveShadow,this.frustumCulled=A.frustumCulled,this.renderOrder=A.renderOrder,this.animations=A.animations.slice(),this.userData=JSON.parse(JSON.stringify(A.userData)),Q===!0)for(let E=0;E<A.children.length;E++){let B=A.children[E];this.add(B.clone())}return this}}I0.DEFAULT_UP=/*@__PURE__*/new y(0,1,0);I0.DEFAULT_MATRIX_AUTO_UPDATE=!0;I0.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var YB=/*@__PURE__*/new y,oB=/*@__PURE__*/new y,KY=/*@__PURE__*/new y,rB=/*@__PURE__*/new y,N8=/*@__PURE__*/new y,G8=/*@__PURE__*/new y,t7=/*@__PURE__*/new y,JY=/*@__PURE__*/new y,UY=/*@__PURE__*/new y,YY=/*@__PURE__*/new y,OY=/*@__PURE__*/new MA,HY=/*@__PURE__*/new MA,ZY=/*@__PURE__*/new MA;class PQ{constructor(A=new y,Q=new y,E=new y){this.a=A,this.b=Q,this.c=E}static getNormal(A,Q,E,B){B.subVectors(E,Q),YB.subVectors(A,Q),B.cross(YB);let I=B.lengthSq();if(I>0)return B.multiplyScalar(1/Math.sqrt(I));return B.set(0,0,0)}static getBarycoord(A,Q,E,B,I){YB.subVectors(B,Q),oB.subVectors(E,Q),KY.subVectors(A,Q);let C=YB.dot(YB),K=YB.dot(oB),J=YB.dot(KY),U=oB.dot(oB),Y=oB.dot(KY),H=C*U-K*K;if(H===0)return I.set(0,0,0),null;let R=1/H,O=(U*J-K*Y)*R,N=(C*Y-K*J)*R;return I.set(1-O-N,N,O)}static containsPoint(A,Q,E,B){if(this.getBarycoord(A,Q,E,B,rB)===null)return!1;return rB.x>=0&&rB.y>=0&&rB.x+rB.y<=1}static getInterpolation(A,Q,E,B,I,C,K,J){if(this.getBarycoord(A,Q,E,B,rB)===null){if(J.x=0,J.y=0,"z"in J)J.z=0;if("w"in J)J.w=0;return null}return J.setScalar(0),J.addScaledVector(I,rB.x),J.addScaledVector(C,rB.y),J.addScaledVector(K,rB.z),J}static getInterpolatedAttribute(A,Q,E,B,I,C){return OY.setScalar(0),HY.setScalar(0),ZY.setScalar(0),OY.fromBufferAttribute(A,Q),HY.fromBufferAttribute(A,E),ZY.fromBufferAttribute(A,B),C.setScalar(0),C.addScaledVector(OY,I.x),C.addScaledVector(HY,I.y),C.addScaledVector(ZY,I.z),C}static isFrontFacing(A,Q,E,B){return YB.subVectors(E,Q),oB.subVectors(A,Q),YB.cross(oB).dot(B)<0?!0:!1}set(A,Q,E){return this.a.copy(A),this.b.copy(Q),this.c.copy(E),this}setFromPointsAndIndices(A,Q,E,B){return this.a.copy(A[Q]),this.b.copy(A[E]),this.c.copy(A[B]),this}setFromAttributeAndIndices(A,Q,E,B){return this.a.fromBufferAttribute(A,Q),this.b.fromBufferAttribute(A,E),this.c.fromBufferAttribute(A,B),this}clone(){return new this.constructor().copy(this)}copy(A){return this.a.copy(A.a),this.b.copy(A.b),this.c.copy(A.c),this}getArea(){return YB.subVectors(this.c,this.b),oB.subVectors(this.a,this.b),YB.cross(oB).length()*0.5}getMidpoint(A){return A.addVectors(this.a,this.b).add(this.c).multiplyScalar(0.3333333333333333)}getNormal(A){return PQ.getNormal(this.a,this.b,this.c,A)}getPlane(A){return A.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(A,Q){return PQ.getBarycoord(A,this.a,this.b,this.c,Q)}getInterpolation(A,Q,E,B,I){return PQ.getInterpolation(A,this.a,this.b,this.c,Q,E,B,I)}containsPoint(A){return PQ.containsPoint(A,this.a,this.b,this.c)}isFrontFacing(A){return PQ.isFrontFacing(this.a,this.b,this.c,A)}intersectsBox(A){return A.intersectsTriangle(this)}closestPointToPoint(A,Q){let E=this.a,B=this.b,I=this.c,C,K;N8.subVectors(B,E),G8.subVectors(I,E),JY.subVectors(A,E);let J=N8.dot(JY),U=G8.dot(JY);if(J<=0&&U<=0)return Q.copy(E);UY.subVectors(A,B);let Y=N8.dot(UY),H=G8.dot(UY);if(Y>=0&&H<=Y)return Q.copy(B);let R=J*H-Y*U;if(R<=0&&J>=0&&Y<=0)return C=J/(J-Y),Q.copy(E).addScaledVector(N8,C);YY.subVectors(A,I);let O=N8.dot(YY),N=G8.dot(YY);if(N>=0&&O<=N)return Q.copy(I);let $=O*U-J*N;if($<=0&&U>=0&&N<=0)return K=U/(U-N),Q.copy(E).addScaledVector(G8,K);let L=Y*N-O*H;if(L<=0&&H-Y>=0&&O-N>=0)return t7.subVectors(I,B),K=(H-Y)/(H-Y+(O-N)),Q.copy(B).addScaledVector(t7,K);let W=1/(L+$+R);return C=$*W,K=R*W,Q.copy(E).addScaledVector(N8,C).addScaledVector(G8,K)}equals(A){return A.a.equals(this.a)&&A.b.equals(this.b)&&A.c.equals(this.c)}}var mR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_I={h:0,s:0,l:0},AJ={h:0,s:0,l:0};function RY(A,Q,E){if(E<0)E+=1;if(E>1)E-=1;if(E<0.16666666666666666)return A+(Q-A)*6*E;if(E<0.5)return Q;if(E<0.6666666666666666)return A+(Q-A)*6*(0.6666666666666666-E);return A}class a{constructor(A,Q,E){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(A,Q,E)}set(A,Q,E){if(Q===void 0&&E===void 0){let B=A;if(B&&B.isColor)this.copy(B);else if(typeof B==="number")this.setHex(B);else if(typeof B==="string")this.setStyle(B)}else this.setRGB(A,Q,E);return this}setScalar(A){return this.r=A,this.g=A,this.b=A,this}setHex(A,Q="srgb"){return A=Math.floor(A),this.r=(A>>16&255)/255,this.g=(A>>8&255)/255,this.b=(A&255)/255,O0.toWorkingColorSpace(this,Q),this}setRGB(A,Q,E,B=O0.workingColorSpace){return this.r=A,this.g=Q,this.b=E,O0.toWorkingColorSpace(this,B),this}setHSL(A,Q,E,B=O0.workingColorSpace){if(A=XO(A,1),Q=w0(Q,0,1),E=w0(E,0,1),Q===0)this.r=this.g=this.b=E;else{let I=E<=0.5?E*(1+Q):E+Q-E*Q,C=2*E-I;this.r=RY(C,I,A+0.3333333333333333),this.g=RY(C,I,A),this.b=RY(C,I,A-0.3333333333333333)}return O0.toWorkingColorSpace(this,B),this}setStyle(A,Q="srgb"){function E(I){if(I===void 0)return;if(parseFloat(I)<1)console.warn("THREE.Color: Alpha component of "+A+" will be ignored.")}let B;if(B=/^(\w+)\(([^\)]*)\)/.exec(A)){let I,C=B[1],K=B[2];switch(C){case"rgb":case"rgba":if(I=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return E(I[4]),this.setRGB(Math.min(255,parseInt(I[1],10))/255,Math.min(255,parseInt(I[2],10))/255,Math.min(255,parseInt(I[3],10))/255,Q);if(I=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return E(I[4]),this.setRGB(Math.min(100,parseInt(I[1],10))/100,Math.min(100,parseInt(I[2],10))/100,Math.min(100,parseInt(I[3],10))/100,Q);break;case"hsl":case"hsla":if(I=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return E(I[4]),this.setHSL(parseFloat(I[1])/360,parseFloat(I[2])/100,parseFloat(I[3])/100,Q);break;default:console.warn("THREE.Color: Unknown color model "+A)}}else if(B=/^\#([A-Fa-f\d]+)$/.exec(A)){let I=B[1],C=I.length;if(C===3)return this.setRGB(parseInt(I.charAt(0),16)/15,parseInt(I.charAt(1),16)/15,parseInt(I.charAt(2),16)/15,Q);else if(C===6)return this.setHex(parseInt(I,16),Q);else console.warn("THREE.Color: Invalid hex color "+A)}else if(A&&A.length>0)return this.setColorName(A,Q);return this}setColorName(A,Q="srgb"){let E=mR[A.toLowerCase()];if(E!==void 0)this.setHex(E,Q);else console.warn("THREE.Color: Unknown color "+A);return this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(A){return this.r=A.r,this.g=A.g,this.b=A.b,this}copySRGBToLinear(A){return this.r=eB(A.r),this.g=eB(A.g),this.b=eB(A.b),this}copyLinearToSRGB(A){return this.r=k8(A.r),this.g=k8(A.g),this.b=k8(A.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(A="srgb"){return O0.fromWorkingColorSpace(eQ.copy(this),A),Math.round(w0(eQ.r*255,0,255))*65536+Math.round(w0(eQ.g*255,0,255))*256+Math.round(w0(eQ.b*255,0,255))}getHexString(A="srgb"){return("000000"+this.getHex(A).toString(16)).slice(-6)}getHSL(A,Q=O0.workingColorSpace){O0.fromWorkingColorSpace(eQ.copy(this),Q);let{r:E,g:B,b:I}=eQ,C=Math.max(E,B,I),K=Math.min(E,B,I),J,U,Y=(K+C)/2;if(K===C)J=0,U=0;else{let H=C-K;switch(U=Y<=0.5?H/(C+K):H/(2-C-K),C){case E:J=(B-I)/H+(B<I?6:0);break;case B:J=(I-E)/H+2;break;case I:J=(E-B)/H+4;break}J/=6}return A.h=J,A.s=U,A.l=Y,A}getRGB(A,Q=O0.workingColorSpace){return O0.fromWorkingColorSpace(eQ.copy(this),Q),A.r=eQ.r,A.g=eQ.g,A.b=eQ.b,A}getStyle(A="srgb"){O0.fromWorkingColorSpace(eQ.copy(this),A);let{r:Q,g:E,b:B}=eQ;if(A!=="srgb")return`color(${A} ${Q.toFixed(3)} ${E.toFixed(3)} ${B.toFixed(3)})`;return`rgb(${Math.round(Q*255)},${Math.round(E*255)},${Math.round(B*255)})`}offsetHSL(A,Q,E){return this.getHSL(_I),this.setHSL(_I.h+A,_I.s+Q,_I.l+E)}add(A){return this.r+=A.r,this.g+=A.g,this.b+=A.b,this}addColors(A,Q){return this.r=A.r+Q.r,this.g=A.g+Q.g,this.b=A.b+Q.b,this}addScalar(A){return this.r+=A,this.g+=A,this.b+=A,this}sub(A){return this.r=Math.max(0,this.r-A.r),this.g=Math.max(0,this.g-A.g),this.b=Math.max(0,this.b-A.b),this}multiply(A){return this.r*=A.r,this.g*=A.g,this.b*=A.b,this}multiplyScalar(A){return this.r*=A,this.g*=A,this.b*=A,this}lerp(A,Q){return this.r+=(A.r-this.r)*Q,this.g+=(A.g-this.g)*Q,this.b+=(A.b-this.b)*Q,this}lerpColors(A,Q,E){return this.r=A.r+(Q.r-A.r)*E,this.g=A.g+(Q.g-A.g)*E,this.b=A.b+(Q.b-A.b)*E,this}lerpHSL(A,Q){this.getHSL(_I),A.getHSL(AJ);let E=t6(_I.h,AJ.h,Q),B=t6(_I.s,AJ.s,Q),I=t6(_I.l,AJ.l,Q);return this.setHSL(E,B,I),this}setFromVector3(A){return this.r=A.x,this.g=A.y,this.b=A.z,this}applyMatrix3(A){let Q=this.r,E=this.g,B=this.b,I=A.elements;return this.r=I[0]*Q+I[3]*E+I[6]*B,this.g=I[1]*Q+I[4]*E+I[7]*B,this.b=I[2]*Q+I[5]*E+I[8]*B,this}equals(A){return A.r===this.r&&A.g===this.g&&A.b===this.b}fromArray(A,Q=0){return this.r=A[Q],this.g=A[Q+1],this.b=A[Q+2],this}toArray(A=[],Q=0){return A[Q]=this.r,A[Q+1]=this.g,A[Q+2]=this.b,A}fromBufferAttribute(A,Q){return this.r=A.getX(Q),this.g=A.getY(Q),this.b=A.getZ(Q),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}var eQ=/*@__PURE__*/new a;a.NAMES=mR;var CL=0;class $Q extends rE{constructor(){super();this.isMaterial=!0,Object.defineProperty(this,"id",{value:CL++}),this.uuid=TE(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new a(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(A){if(this._alphaTest>0!==A>0)this.version++;this._alphaTest=A}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(A){if(A===void 0)return;for(let Q in A){let E=A[Q];if(E===void 0){console.warn(`THREE.Material: parameter '${Q}' has value of undefined.`);continue}let B=this[Q];if(B===void 0){console.warn(`THREE.Material: '${Q}' is not a property of THREE.${this.type}.`);continue}if(B&&B.isColor)B.set(E);else if(B&&B.isVector3&&(E&&E.isVector3))B.copy(E);else this[Q]=E}}toJSON(A){let Q=A===void 0||typeof A==="string";if(Q)A={textures:{},images:{}};let E={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};if(E.uuid=this.uuid,E.type=this.type,this.name!=="")E.name=this.name;if(this.color&&this.color.isColor)E.color=this.color.getHex();if(this.roughness!==void 0)E.roughness=this.roughness;if(this.metalness!==void 0)E.metalness=this.metalness;if(this.sheen!==void 0)E.sheen=this.sheen;if(this.sheenColor&&this.sheenColor.isColor)E.sheenColor=this.sheenColor.getHex();if(this.sheenRoughness!==void 0)E.sheenRoughness=this.sheenRoughness;if(this.emissive&&this.emissive.isColor)E.emissive=this.emissive.getHex();if(this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1)E.emissiveIntensity=this.emissiveIntensity;if(this.specular&&this.specular.isColor)E.specular=this.specular.getHex();if(this.specularIntensity!==void 0)E.specularIntensity=this.specularIntensity;if(this.specularColor&&this.specularColor.isColor)E.specularColor=this.specularColor.getHex();if(this.shininess!==void 0)E.shininess=this.shininess;if(this.clearcoat!==void 0)E.clearcoat=this.clearcoat;if(this.clearcoatRoughness!==void 0)E.clearcoatRoughness=this.clearcoatRoughness;if(this.clearcoatMap&&this.clearcoatMap.isTexture)E.clearcoatMap=this.clearcoatMap.toJSON(A).uuid;if(this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture)E.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(A).uuid;if(this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture)E.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(A).uuid,E.clearcoatNormalScale=this.clearcoatNormalScale.toArray();if(this.dispersion!==void 0)E.dispersion=this.dispersion;if(this.iridescence!==void 0)E.iridescence=this.iridescence;if(this.iridescenceIOR!==void 0)E.iridescenceIOR=this.iridescenceIOR;if(this.iridescenceThicknessRange!==void 0)E.iridescenceThicknessRange=this.iridescenceThicknessRange;if(this.iridescenceMap&&this.iridescenceMap.isTexture)E.iridescenceMap=this.iridescenceMap.toJSON(A).uuid;if(this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture)E.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(A).uuid;if(this.anisotropy!==void 0)E.anisotropy=this.anisotropy;if(this.anisotropyRotation!==void 0)E.anisotropyRotation=this.anisotropyRotation;if(this.anisotropyMap&&this.anisotropyMap.isTexture)E.anisotropyMap=this.anisotropyMap.toJSON(A).uuid;if(this.map&&this.map.isTexture)E.map=this.map.toJSON(A).uuid;if(this.matcap&&this.matcap.isTexture)E.matcap=this.matcap.toJSON(A).uuid;if(this.alphaMap&&this.alphaMap.isTexture)E.alphaMap=this.alphaMap.toJSON(A).uuid;if(this.lightMap&&this.lightMap.isTexture)E.lightMap=this.lightMap.toJSON(A).uuid,E.lightMapIntensity=this.lightMapIntensity;if(this.aoMap&&this.aoMap.isTexture)E.aoMap=this.aoMap.toJSON(A).uuid,E.aoMapIntensity=this.aoMapIntensity;if(this.bumpMap&&this.bumpMap.isTexture)E.bumpMap=this.bumpMap.toJSON(A).uuid,E.bumpScale=this.bumpScale;if(this.normalMap&&this.normalMap.isTexture)E.normalMap=this.normalMap.toJSON(A).uuid,E.normalMapType=this.normalMapType,E.normalScale=this.normalScale.toArray();if(this.displacementMap&&this.displacementMap.isTexture)E.displacementMap=this.displacementMap.toJSON(A).uuid,E.displacementScale=this.displacementScale,E.displacementBias=this.displacementBias;if(this.roughnessMap&&this.roughnessMap.isTexture)E.roughnessMap=this.roughnessMap.toJSON(A).uuid;if(this.metalnessMap&&this.metalnessMap.isTexture)E.metalnessMap=this.metalnessMap.toJSON(A).uuid;if(this.emissiveMap&&this.emissiveMap.isTexture)E.emissiveMap=this.emissiveMap.toJSON(A).uuid;if(this.specularMap&&this.specularMap.isTexture)E.specularMap=this.specularMap.toJSON(A).uuid;if(this.specularIntensityMap&&this.specularIntensityMap.isTexture)E.specularIntensityMap=this.specularIntensityMap.toJSON(A).uuid;if(this.specularColorMap&&this.specularColorMap.isTexture)E.specularColorMap=this.specularColorMap.toJSON(A).uuid;if(this.envMap&&this.envMap.isTexture){if(E.envMap=this.envMap.toJSON(A).uuid,this.combine!==void 0)E.combine=this.combine}if(this.envMapRotation!==void 0)E.envMapRotation=this.envMapRotation.toArray();if(this.envMapIntensity!==void 0)E.envMapIntensity=this.envMapIntensity;if(this.reflectivity!==void 0)E.reflectivity=this.reflectivity;if(this.refractionRatio!==void 0)E.refractionRatio=this.refractionRatio;if(this.gradientMap&&this.gradientMap.isTexture)E.gradientMap=this.gradientMap.toJSON(A).uuid;if(this.transmission!==void 0)E.transmission=this.transmission;if(this.transmissionMap&&this.transmissionMap.isTexture)E.transmissionMap=this.transmissionMap.toJSON(A).uuid;if(this.thickness!==void 0)E.thickness=this.thickness;if(this.thicknessMap&&this.thicknessMap.isTexture)E.thicknessMap=this.thicknessMap.toJSON(A).uuid;if(this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0)E.attenuationDistance=this.attenuationDistance;if(this.attenuationColor!==void 0)E.attenuationColor=this.attenuationColor.getHex();if(this.size!==void 0)E.size=this.size;if(this.shadowSide!==null)E.shadowSide=this.shadowSide;if(this.sizeAttenuation!==void 0)E.sizeAttenuation=this.sizeAttenuation;if(this.blending!==1)E.blending=this.blending;if(this.side!==0)E.side=this.side;if(this.vertexColors===!0)E.vertexColors=!0;if(this.opacity<1)E.opacity=this.opacity;if(this.transparent===!0)E.transparent=!0;if(this.blendSrc!==204)E.blendSrc=this.blendSrc;if(this.blendDst!==205)E.blendDst=this.blendDst;if(this.blendEquation!==100)E.blendEquation=this.blendEquation;if(this.blendSrcAlpha!==null)E.blendSrcAlpha=this.blendSrcAlpha;if(this.blendDstAlpha!==null)E.blendDstAlpha=this.blendDstAlpha;if(this.blendEquationAlpha!==null)E.blendEquationAlpha=this.blendEquationAlpha;if(this.blendColor&&this.blendColor.isColor)E.blendColor=this.blendColor.getHex();if(this.blendAlpha!==0)E.blendAlpha=this.blendAlpha;if(this.depthFunc!==3)E.depthFunc=this.depthFunc;if(this.depthTest===!1)E.depthTest=this.depthTest;if(this.depthWrite===!1)E.depthWrite=this.depthWrite;if(this.colorWrite===!1)E.colorWrite=this.colorWrite;if(this.stencilWriteMask!==255)E.stencilWriteMask=this.stencilWriteMask;if(this.stencilFunc!==519)E.stencilFunc=this.stencilFunc;if(this.stencilRef!==0)E.stencilRef=this.stencilRef;if(this.stencilFuncMask!==255)E.stencilFuncMask=this.stencilFuncMask;if(this.stencilFail!==7680)E.stencilFail=this.stencilFail;if(this.stencilZFail!==7680)E.stencilZFail=this.stencilZFail;if(this.stencilZPass!==7680)E.stencilZPass=this.stencilZPass;if(this.stencilWrite===!0)E.stencilWrite=this.stencilWrite;if(this.rotation!==void 0&&this.rotation!==0)E.rotation=this.rotation;if(this.polygonOffset===!0)E.polygonOffset=!0;if(this.polygonOffsetFactor!==0)E.polygonOffsetFactor=this.polygonOffsetFactor;if(this.polygonOffsetUnits!==0)E.polygonOffsetUnits=this.polygonOffsetUnits;if(this.linewidth!==void 0&&this.linewidth!==1)E.linewidth=this.linewidth;if(this.dashSize!==void 0)E.dashSize=this.dashSize;if(this.gapSize!==void 0)E.gapSize=this.gapSize;if(this.scale!==void 0)E.scale=this.scale;if(this.dithering===!0)E.dithering=!0;if(this.alphaTest>0)E.alphaTest=this.alphaTest;if(this.alphaHash===!0)E.alphaHash=!0;if(this.alphaToCoverage===!0)E.alphaToCoverage=!0;if(this.premultipliedAlpha===!0)E.premultipliedAlpha=!0;if(this.forceSinglePass===!0)E.forceSinglePass=!0;if(this.wireframe===!0)E.wireframe=!0;if(this.wireframeLinewidth>1)E.wireframeLinewidth=this.wireframeLinewidth;if(this.wireframeLinecap!=="round")E.wireframeLinecap=this.wireframeLinecap;if(this.wireframeLinejoin!=="round")E.wireframeLinejoin=this.wireframeLinejoin;if(this.flatShading===!0)E.flatShading=!0;if(this.visible===!1)E.visible=!1;if(this.toneMapped===!1)E.toneMapped=!1;if(this.fog===!1)E.fog=!1;if(Object.keys(this.userData).length>0)E.userData=this.userData;function B(I){let C=[];for(let K in I){let J=I[K];delete J.metadata,C.push(J)}return C}if(Q){let I=B(A.textures),C=B(A.images);if(I.length>0)E.textures=I;if(C.length>0)E.images=C}return E}clone(){return new this.constructor().copy(this)}copy(A){this.name=A.name,this.blending=A.blending,this.side=A.side,this.vertexColors=A.vertexColors,this.opacity=A.opacity,this.transparent=A.transparent,this.blendSrc=A.blendSrc,this.blendDst=A.blendDst,this.blendEquation=A.blendEquation,this.blendSrcAlpha=A.blendSrcAlpha,this.blendDstAlpha=A.blendDstAlpha,this.blendEquationAlpha=A.blendEquationAlpha,this.blendColor.copy(A.blendColor),this.blendAlpha=A.blendAlpha,this.depthFunc=A.depthFunc,this.depthTest=A.depthTest,this.depthWrite=A.depthWrite,this.stencilWriteMask=A.stencilWriteMask,this.stencilFunc=A.stencilFunc,this.stencilRef=A.stencilRef,this.stencilFuncMask=A.stencilFuncMask,this.stencilFail=A.stencilFail,this.stencilZFail=A.stencilZFail,this.stencilZPass=A.stencilZPass,this.stencilWrite=A.stencilWrite;let Q=A.clippingPlanes,E=null;if(Q!==null){let B=Q.length;E=new Array(B);for(let I=0;I!==B;++I)E[I]=Q[I].clone()}return this.clippingPlanes=E,this.clipIntersection=A.clipIntersection,this.clipShadows=A.clipShadows,this.shadowSide=A.shadowSide,this.colorWrite=A.colorWrite,this.precision=A.precision,this.polygonOffset=A.polygonOffset,this.polygonOffsetFactor=A.polygonOffsetFactor,this.polygonOffsetUnits=A.polygonOffsetUnits,this.dithering=A.dithering,this.alphaTest=A.alphaTest,this.alphaHash=A.alphaHash,this.alphaToCoverage=A.alphaToCoverage,this.premultipliedAlpha=A.premultipliedAlpha,this.forceSinglePass=A.forceSinglePass,this.visible=A.visible,this.toneMapped=A.toneMapped,this.userData=JSON.parse(JSON.stringify(A.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(A){if(A===!0)this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class _0 extends $Q{constructor(A){super();this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new a(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new DQ,this.combine=0,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.lightMap=A.lightMap,this.lightMapIntensity=A.lightMapIntensity,this.aoMap=A.aoMap,this.aoMapIntensity=A.aoMapIntensity,this.specularMap=A.specularMap,this.alphaMap=A.alphaMap,this.envMap=A.envMap,this.envMapRotation.copy(A.envMapRotation),this.combine=A.combine,this.reflectivity=A.reflectivity,this.refractionRatio=A.refractionRatio,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.wireframeLinecap=A.wireframeLinecap,this.wireframeLinejoin=A.wireframeLinejoin,this.fog=A.fog,this}}var tB=/*@__PURE__*/KL();function KL(){let A=new ArrayBuffer(4),Q=new Float32Array(A),E=new Uint32Array(A),B=new Uint32Array(512),I=new Uint32Array(512);for(let U=0;U<256;++U){let Y=U-127;if(Y<-27)B[U]=0,B[U|256]=32768,I[U]=24,I[U|256]=24;else if(Y<-14)B[U]=1024>>-Y-14,B[U|256]=1024>>-Y-14|32768,I[U]=-Y-1,I[U|256]=-Y-1;else if(Y<=15)B[U]=Y+15<<10,B[U|256]=Y+15<<10|32768,I[U]=13,I[U|256]=13;else if(Y<128)B[U]=31744,B[U|256]=64512,I[U]=24,I[U|256]=24;else B[U]=31744,B[U|256]=64512,I[U]=13,I[U|256]=13}let C=new Uint32Array(2048),K=new Uint32Array(64),J=new Uint32Array(64);for(let U=1;U<1024;++U){let Y=U<<13,H=0;while((Y&8388608)===0)Y<<=1,H-=8388608;Y&=-8388609,H+=947912704,C[U]=Y|H}for(let U=1024;U<2048;++U)C[U]=939524096+(U-1024<<13);for(let U=1;U<31;++U)K[U]=U<<23;K[31]=1199570944,K[32]=2147483648;for(let U=33;U<63;++U)K[U]=2147483648+(U-32<<23);K[63]=3347054592;for(let U=1;U<64;++U)if(U!==32)J[U]=1024;return{floatView:Q,uint32View:E,baseTable:B,shiftTable:I,mantissaTable:C,exponentTable:K,offsetTable:J}}function GE(A){if(Math.abs(A)>65504)console.warn("THREE.DataUtils.toHalfFloat(): Value out of range.");A=w0(A,-65504,65504),tB.floatView[0]=A;let Q=tB.uint32View[0],E=Q>>23&511;return tB.baseTable[E]+((Q&8388607)>>tB.shiftTable[E])}function a6(A){let Q=A>>10;return tB.uint32View[0]=tB.mantissaTable[tB.offsetTable[Q]+(A&1023)]+tB.exponentTable[Q],tB.floatView[0]}var vE={toHalfFloat:GE,fromHalfFloat:a6},zQ=/*@__PURE__*/new y,QJ=/*@__PURE__*/new AA,JL=0;class tA{constructor(A,Q,E=!1){if(Array.isArray(A))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:JL++}),this.name="",this.array=A,this.itemSize=Q,this.count=A!==void 0?A.length/Q:0,this.normalized=E,this.usage=35044,this.updateRanges=[],this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(A){if(A===!0)this.version++}setUsage(A){return this.usage=A,this}addUpdateRange(A,Q){this.updateRanges.push({start:A,count:Q})}clearUpdateRanges(){this.updateRanges.length=0}copy(A){return this.name=A.name,this.array=new A.array.constructor(A.array),this.itemSize=A.itemSize,this.count=A.count,this.normalized=A.normalized,this.usage=A.usage,this.gpuType=A.gpuType,this}copyAt(A,Q,E){A*=this.itemSize,E*=Q.itemSize;for(let B=0,I=this.itemSize;B<I;B++)this.array[A+B]=Q.array[E+B];return this}copyArray(A){return this.array.set(A),this}applyMatrix3(A){if(this.itemSize===2)for(let Q=0,E=this.count;Q<E;Q++)QJ.fromBufferAttribute(this,Q),QJ.applyMatrix3(A),this.setXY(Q,QJ.x,QJ.y);else if(this.itemSize===3)for(let Q=0,E=this.count;Q<E;Q++)zQ.fromBufferAttribute(this,Q),zQ.applyMatrix3(A),this.setXYZ(Q,zQ.x,zQ.y,zQ.z);return this}applyMatrix4(A){for(let Q=0,E=this.count;Q<E;Q++)zQ.fromBufferAttribute(this,Q),zQ.applyMatrix4(A),this.setXYZ(Q,zQ.x,zQ.y,zQ.z);return this}applyNormalMatrix(A){for(let Q=0,E=this.count;Q<E;Q++)zQ.fromBufferAttribute(this,Q),zQ.applyNormalMatrix(A),this.setXYZ(Q,zQ.x,zQ.y,zQ.z);return this}transformDirection(A){for(let Q=0,E=this.count;Q<E;Q++)zQ.fromBufferAttribute(this,Q),zQ.transformDirection(A),this.setXYZ(Q,zQ.x,zQ.y,zQ.z);return this}set(A,Q=0){return this.array.set(A,Q),this}getComponent(A,Q){let E=this.array[A*this.itemSize+Q];if(this.normalized)E=UE(E,this.array);return E}setComponent(A,Q,E){if(this.normalized)E=S0(E,this.array);return this.array[A*this.itemSize+Q]=E,this}getX(A){let Q=this.array[A*this.itemSize];if(this.normalized)Q=UE(Q,this.array);return Q}setX(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.array[A*this.itemSize]=Q,this}getY(A){let Q=this.array[A*this.itemSize+1];if(this.normalized)Q=UE(Q,this.array);return Q}setY(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.array[A*this.itemSize+1]=Q,this}getZ(A){let Q=this.array[A*this.itemSize+2];if(this.normalized)Q=UE(Q,this.array);return Q}setZ(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.array[A*this.itemSize+2]=Q,this}getW(A){let Q=this.array[A*this.itemSize+3];if(this.normalized)Q=UE(Q,this.array);return Q}setW(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.array[A*this.itemSize+3]=Q,this}setXY(A,Q,E){if(A*=this.itemSize,this.normalized)Q=S0(Q,this.array),E=S0(E,this.array);return this.array[A+0]=Q,this.array[A+1]=E,this}setXYZ(A,Q,E,B){if(A*=this.itemSize,this.normalized)Q=S0(Q,this.array),E=S0(E,this.array),B=S0(B,this.array);return this.array[A+0]=Q,this.array[A+1]=E,this.array[A+2]=B,this}setXYZW(A,Q,E,B,I){if(A*=this.itemSize,this.normalized)Q=S0(Q,this.array),E=S0(E,this.array),B=S0(B,this.array),I=S0(I,this.array);return this.array[A+0]=Q,this.array[A+1]=E,this.array[A+2]=B,this.array[A+3]=I,this}onUpload(A){return this.onUploadCallback=A,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let A={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};if(this.name!=="")A.name=this.name;if(this.usage!==35044)A.usage=this.usage;return A}}class p8 extends tA{constructor(A,Q,E){super(new Int8Array(A),Q,E)}}class qC extends tA{constructor(A,Q,E){super(new Uint8Array(A),Q,E)}}class DO extends tA{constructor(A,Q,E){super(new Uint8ClampedArray(A),Q,E)}}class MO extends tA{constructor(A,Q,E){super(new Int16Array(A),Q,E)}}class VI extends tA{constructor(A,Q,E){super(new Uint16Array(A),Q,E)}}class F9 extends tA{constructor(A,Q,E){super(new Int32Array(A),Q,E)}}class FC extends tA{constructor(A,Q,E){super(new Uint32Array(A),Q,E)}}class wO extends tA{constructor(A,Q,E){super(new Uint16Array(A),Q,E);this.isFloat16BufferAttribute=!0}getX(A){let Q=a6(this.array[A*this.itemSize]);if(this.normalized)Q=UE(Q,this.array);return Q}setX(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.array[A*this.itemSize]=GE(Q),this}getY(A){let Q=a6(this.array[A*this.itemSize+1]);if(this.normalized)Q=UE(Q,this.array);return Q}setY(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.array[A*this.itemSize+1]=GE(Q),this}getZ(A){let Q=a6(this.array[A*this.itemSize+2]);if(this.normalized)Q=UE(Q,this.array);return Q}setZ(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.array[A*this.itemSize+2]=GE(Q),this}getW(A){let Q=a6(this.array[A*this.itemSize+3]);if(this.normalized)Q=UE(Q,this.array);return Q}setW(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.array[A*this.itemSize+3]=GE(Q),this}setXY(A,Q,E){if(A*=this.itemSize,this.normalized)Q=S0(Q,this.array),E=S0(E,this.array);return this.array[A+0]=GE(Q),this.array[A+1]=GE(E),this}setXYZ(A,Q,E,B){if(A*=this.itemSize,this.normalized)Q=S0(Q,this.array),E=S0(E,this.array),B=S0(B,this.array);return this.array[A+0]=GE(Q),this.array[A+1]=GE(E),this.array[A+2]=GE(B),this}setXYZW(A,Q,E,B,I){if(A*=this.itemSize,this.normalized)Q=S0(Q,this.array),E=S0(E,this.array),B=S0(B,this.array),I=S0(I,this.array);return this.array[A+0]=GE(Q),this.array[A+1]=GE(E),this.array[A+2]=GE(B),this.array[A+3]=GE(I),this}}class PA extends tA{constructor(A,Q,E){super(new Float32Array(A),Q,E)}}var UL=0,sE=/*@__PURE__*/new RA,NY=/*@__PURE__*/new I0,W8=/*@__PURE__*/new y,SE=/*@__PURE__*/new g0,m6=/*@__PURE__*/new g0,lQ=/*@__PURE__*/new y;class hA extends rE{constructor(){super();this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:UL++}),this.uuid=TE(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(A){if(Array.isArray(A))this.index=new(($O(A))?FC:VI)(A,1);else this.index=A;return this}setIndirect(A){return this.indirect=A,this}getIndirect(){return this.indirect}getAttribute(A){return this.attributes[A]}setAttribute(A,Q){return this.attributes[A]=Q,this}deleteAttribute(A){return delete this.attributes[A],this}hasAttribute(A){return this.attributes[A]!==void 0}addGroup(A,Q,E=0){this.groups.push({start:A,count:Q,materialIndex:E})}clearGroups(){this.groups=[]}setDrawRange(A,Q){this.drawRange.start=A,this.drawRange.count=Q}applyMatrix4(A){let Q=this.attributes.position;if(Q!==void 0)Q.applyMatrix4(A),Q.needsUpdate=!0;let E=this.attributes.normal;if(E!==void 0){let I=new E0().getNormalMatrix(A);E.applyNormalMatrix(I),E.needsUpdate=!0}let B=this.attributes.tangent;if(B!==void 0)B.transformDirection(A),B.needsUpdate=!0;if(this.boundingBox!==null)this.computeBoundingBox();if(this.boundingSphere!==null)this.computeBoundingSphere();return this}applyQuaternion(A){return sE.makeRotationFromQuaternion(A),this.applyMatrix4(sE),this}rotateX(A){return sE.makeRotationX(A),this.applyMatrix4(sE),this}rotateY(A){return sE.makeRotationY(A),this.applyMatrix4(sE),this}rotateZ(A){return sE.makeRotationZ(A),this.applyMatrix4(sE),this}translate(A,Q,E){return sE.makeTranslation(A,Q,E),this.applyMatrix4(sE),this}scale(A,Q,E){return sE.makeScale(A,Q,E),this.applyMatrix4(sE),this}lookAt(A){return NY.lookAt(A),NY.updateMatrix(),this.applyMatrix4(NY.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(W8).negate(),this.translate(W8.x,W8.y,W8.z),this}setFromPoints(A){let Q=this.getAttribute("position");if(Q===void 0){let E=[];for(let B=0,I=A.length;B<I;B++){let C=A[B];E.push(C.x,C.y,C.z||0)}this.setAttribute("position",new PA(E,3))}else{let E=Math.min(A.length,Q.count);for(let B=0;B<E;B++){let I=A[B];Q.setXYZ(B,I.x,I.y,I.z||0)}if(A.length>Q.count)console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry.");Q.needsUpdate=!0}return this}computeBoundingBox(){if(this.boundingBox===null)this.boundingBox=new g0;let A=this.attributes.position,Q=this.morphAttributes.position;if(A&&A.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new y(-1/0,-1/0,-1/0),new y(1/0,1/0,1/0));return}if(A!==void 0){if(this.boundingBox.setFromBufferAttribute(A),Q)for(let E=0,B=Q.length;E<B;E++){let I=Q[E];if(SE.setFromBufferAttribute(I),this.morphTargetsRelative)lQ.addVectors(this.boundingBox.min,SE.min),this.boundingBox.expandByPoint(lQ),lQ.addVectors(this.boundingBox.max,SE.max),this.boundingBox.expandByPoint(lQ);else this.boundingBox.expandByPoint(SE.min),this.boundingBox.expandByPoint(SE.max)}}else this.boundingBox.makeEmpty();if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){if(this.boundingSphere===null)this.boundingSphere=new KQ;let A=this.attributes.position,Q=this.morphAttributes.position;if(A&&A.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new y,1/0);return}if(A){let E=this.boundingSphere.center;if(SE.setFromBufferAttribute(A),Q)for(let I=0,C=Q.length;I<C;I++){let K=Q[I];if(m6.setFromBufferAttribute(K),this.morphTargetsRelative)lQ.addVectors(SE.min,m6.min),SE.expandByPoint(lQ),lQ.addVectors(SE.max,m6.max),SE.expandByPoint(lQ);else SE.expandByPoint(m6.min),SE.expandByPoint(m6.max)}SE.getCenter(E);let B=0;for(let I=0,C=A.count;I<C;I++)lQ.fromBufferAttribute(A,I),B=Math.max(B,E.distanceToSquared(lQ));if(Q)for(let I=0,C=Q.length;I<C;I++){let K=Q[I],J=this.morphTargetsRelative;for(let U=0,Y=K.count;U<Y;U++){if(lQ.fromBufferAttribute(K,U),J)W8.fromBufferAttribute(A,U),lQ.add(W8);B=Math.max(B,E.distanceToSquared(lQ))}}if(this.boundingSphere.radius=Math.sqrt(B),isNaN(this.boundingSphere.radius))console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let A=this.index,Q=this.attributes;if(A===null||Q.position===void 0||Q.normal===void 0||Q.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let{position:E,normal:B,uv:I}=Q;if(this.hasAttribute("tangent")===!1)this.setAttribute("tangent",new tA(new Float32Array(4*E.count),4));let C=this.getAttribute("tangent"),K=[],J=[];for(let D=0;D<E.count;D++)K[D]=new y,J[D]=new y;let U=new y,Y=new y,H=new y,R=new AA,O=new AA,N=new AA,$=new y,L=new y;function W(D,_,w){U.fromBufferAttribute(E,D),Y.fromBufferAttribute(E,_),H.fromBufferAttribute(E,w),R.fromBufferAttribute(I,D),O.fromBufferAttribute(I,_),N.fromBufferAttribute(I,w),Y.sub(U),H.sub(U),O.sub(R),N.sub(R);let k=1/(O.x*N.y-N.x*O.y);if(!isFinite(k))return;$.copy(Y).multiplyScalar(N.y).addScaledVector(H,-O.y).multiplyScalar(k),L.copy(H).multiplyScalar(O.x).addScaledVector(Y,-N.x).multiplyScalar(k),K[D].add($),K[_].add($),K[w].add($),J[D].add(L),J[_].add(L),J[w].add(L)}let Z=this.groups;if(Z.length===0)Z=[{start:0,count:A.count}];for(let D=0,_=Z.length;D<_;++D){let w=Z[D],k=w.start,T=w.count;for(let z=k,j=k+T;z<j;z+=3)W(A.getX(z+0),A.getX(z+1),A.getX(z+2))}let G=new y,X=new y,q=new y,M=new y;function F(D){q.fromBufferAttribute(B,D),M.copy(q);let _=K[D];G.copy(_),G.sub(q.multiplyScalar(q.dot(_))).normalize(),X.crossVectors(M,_);let k=X.dot(J[D])<0?-1:1;C.setXYZW(D,G.x,G.y,G.z,k)}for(let D=0,_=Z.length;D<_;++D){let w=Z[D],k=w.start,T=w.count;for(let z=k,j=k+T;z<j;z+=3)F(A.getX(z+0)),F(A.getX(z+1)),F(A.getX(z+2))}}computeVertexNormals(){let A=this.index,Q=this.getAttribute("position");if(Q!==void 0){let E=this.getAttribute("normal");if(E===void 0)E=new tA(new Float32Array(Q.count*3),3),this.setAttribute("normal",E);else for(let R=0,O=E.count;R<O;R++)E.setXYZ(R,0,0,0);let B=new y,I=new y,C=new y,K=new y,J=new y,U=new y,Y=new y,H=new y;if(A)for(let R=0,O=A.count;R<O;R+=3){let N=A.getX(R+0),$=A.getX(R+1),L=A.getX(R+2);B.fromBufferAttribute(Q,N),I.fromBufferAttribute(Q,$),C.fromBufferAttribute(Q,L),Y.subVectors(C,I),H.subVectors(B,I),Y.cross(H),K.fromBufferAttribute(E,N),J.fromBufferAttribute(E,$),U.fromBufferAttribute(E,L),K.add(Y),J.add(Y),U.add(Y),E.setXYZ(N,K.x,K.y,K.z),E.setXYZ($,J.x,J.y,J.z),E.setXYZ(L,U.x,U.y,U.z)}else for(let R=0,O=Q.count;R<O;R+=3)B.fromBufferAttribute(Q,R+0),I.fromBufferAttribute(Q,R+1),C.fromBufferAttribute(Q,R+2),Y.subVectors(C,I),H.subVectors(B,I),Y.cross(H),E.setXYZ(R+0,Y.x,Y.y,Y.z),E.setXYZ(R+1,Y.x,Y.y,Y.z),E.setXYZ(R+2,Y.x,Y.y,Y.z);this.normalizeNormals(),E.needsUpdate=!0}}normalizeNormals(){let A=this.attributes.normal;for(let Q=0,E=A.count;Q<E;Q++)lQ.fromBufferAttribute(A,Q),lQ.normalize(),A.setXYZ(Q,lQ.x,lQ.y,lQ.z)}toNonIndexed(){function A(K,J){let{array:U,itemSize:Y,normalized:H}=K,R=new U.constructor(J.length*Y),O=0,N=0;for(let $=0,L=J.length;$<L;$++){if(K.isInterleavedBufferAttribute)O=J[$]*K.data.stride+K.offset;else O=J[$]*Y;for(let W=0;W<Y;W++)R[N++]=U[O++]}return new tA(R,Y,H)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let Q=new hA,E=this.index.array,B=this.attributes;for(let K in B){let J=B[K],U=A(J,E);Q.setAttribute(K,U)}let I=this.morphAttributes;for(let K in I){let J=[],U=I[K];for(let Y=0,H=U.length;Y<H;Y++){let R=U[Y],O=A(R,E);J.push(O)}Q.morphAttributes[K]=J}Q.morphTargetsRelative=this.morphTargetsRelative;let C=this.groups;for(let K=0,J=C.length;K<J;K++){let U=C[K];Q.addGroup(U.start,U.count,U.materialIndex)}return Q}toJSON(){let A={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(A.uuid=this.uuid,A.type=this.type,this.name!=="")A.name=this.name;if(Object.keys(this.userData).length>0)A.userData=this.userData;if(this.parameters!==void 0){let J=this.parameters;for(let U in J)if(J[U]!==void 0)A[U]=J[U];return A}A.data={attributes:{}};let Q=this.index;if(Q!==null)A.data.index={type:Q.array.constructor.name,array:Array.prototype.slice.call(Q.array)};let E=this.attributes;for(let J in E){let U=E[J];A.data.attributes[J]=U.toJSON(A.data)}let B={},I=!1;for(let J in this.morphAttributes){let U=this.morphAttributes[J],Y=[];for(let H=0,R=U.length;H<R;H++){let O=U[H];Y.push(O.toJSON(A.data))}if(Y.length>0)B[J]=Y,I=!0}if(I)A.data.morphAttributes=B,A.data.morphTargetsRelative=this.morphTargetsRelative;let C=this.groups;if(C.length>0)A.data.groups=JSON.parse(JSON.stringify(C));let K=this.boundingSphere;if(K!==null)A.data.boundingSphere={center:K.center.toArray(),radius:K.radius};return A}clone(){return new this.constructor().copy(this)}copy(A){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let Q={};this.name=A.name;let E=A.index;if(E!==null)this.setIndex(E.clone(Q));let B=A.attributes;for(let U in B){let Y=B[U];this.setAttribute(U,Y.clone(Q))}let I=A.morphAttributes;for(let U in I){let Y=[],H=I[U];for(let R=0,O=H.length;R<O;R++)Y.push(H[R].clone(Q));this.morphAttributes[U]=Y}this.morphTargetsRelative=A.morphTargetsRelative;let C=A.groups;for(let U=0,Y=C.length;U<Y;U++){let H=C[U];this.addGroup(H.start,H.count,H.materialIndex)}let K=A.boundingBox;if(K!==null)this.boundingBox=K.clone();let J=A.boundingSphere;if(J!==null)this.boundingSphere=J.clone();return this.drawRange.start=A.drawRange.start,this.drawRange.count=A.drawRange.count,this.userData=A.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}var e7=/*@__PURE__*/new RA,A1=/*@__PURE__*/new qE,EJ=/*@__PURE__*/new KQ,AZ=/*@__PURE__*/new y,BJ=/*@__PURE__*/new y,IJ=/*@__PURE__*/new y,CJ=/*@__PURE__*/new y,GY=/*@__PURE__*/new y,KJ=/*@__PURE__*/new y,QZ=/*@__PURE__*/new y,JJ=/*@__PURE__*/new y;class xA extends I0{constructor(A=new hA,Q=new _0){super();this.isMesh=!0,this.type="Mesh",this.geometry=A,this.material=Q,this.updateMorphTargets()}copy(A,Q){if(super.copy(A,Q),A.morphTargetInfluences!==void 0)this.morphTargetInfluences=A.morphTargetInfluences.slice();if(A.morphTargetDictionary!==void 0)this.morphTargetDictionary=Object.assign({},A.morphTargetDictionary);return this.material=Array.isArray(A.material)?A.material.slice():A.material,this.geometry=A.geometry,this}updateMorphTargets(){let Q=this.geometry.morphAttributes,E=Object.keys(Q);if(E.length>0){let B=Q[E[0]];if(B!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,C=B.length;I<C;I++){let K=B[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=I}}}}getVertexPosition(A,Q){let E=this.geometry,B=E.attributes.position,I=E.morphAttributes.position,C=E.morphTargetsRelative;Q.fromBufferAttribute(B,A);let K=this.morphTargetInfluences;if(I&&K){KJ.set(0,0,0);for(let J=0,U=I.length;J<U;J++){let Y=K[J],H=I[J];if(Y===0)continue;if(GY.fromBufferAttribute(H,A),C)KJ.addScaledVector(GY,Y);else KJ.addScaledVector(GY.sub(Q),Y)}Q.add(KJ)}return Q}raycast(A,Q){let E=this.geometry,B=this.material,I=this.matrixWorld;if(B===void 0)return;if(E.boundingSphere===null)E.computeBoundingSphere();if(EJ.copy(E.boundingSphere),EJ.applyMatrix4(I),A1.copy(A.ray).recast(A.near),EJ.containsPoint(A1.origin)===!1){if(A1.intersectSphere(EJ,AZ)===null)return;if(A1.origin.distanceToSquared(AZ)>(A.far-A.near)**2)return}if(e7.copy(I).invert(),A1.copy(A.ray).applyMatrix4(e7),E.boundingBox!==null){if(A1.intersectsBox(E.boundingBox)===!1)return}this._computeIntersections(A,Q,A1)}_computeIntersections(A,Q,E){let B,I=this.geometry,C=this.material,K=I.index,J=I.attributes.position,U=I.attributes.uv,Y=I.attributes.uv1,H=I.attributes.normal,R=I.groups,O=I.drawRange;if(K!==null)if(Array.isArray(C))for(let N=0,$=R.length;N<$;N++){let L=R[N],W=C[L.materialIndex],Z=Math.max(L.start,O.start),G=Math.min(K.count,Math.min(L.start+L.count,O.start+O.count));for(let X=Z,q=G;X<q;X+=3){let M=K.getX(X),F=K.getX(X+1),D=K.getX(X+2);if(B=UJ(this,W,A,E,U,Y,H,M,F,D),B)B.faceIndex=Math.floor(X/3),B.face.materialIndex=L.materialIndex,Q.push(B)}}else{let N=Math.max(0,O.start),$=Math.min(K.count,O.start+O.count);for(let L=N,W=$;L<W;L+=3){let Z=K.getX(L),G=K.getX(L+1),X=K.getX(L+2);if(B=UJ(this,C,A,E,U,Y,H,Z,G,X),B)B.faceIndex=Math.floor(L/3),Q.push(B)}}else if(J!==void 0)if(Array.isArray(C))for(let N=0,$=R.length;N<$;N++){let L=R[N],W=C[L.materialIndex],Z=Math.max(L.start,O.start),G=Math.min(J.count,Math.min(L.start+L.count,O.start+O.count));for(let X=Z,q=G;X<q;X+=3){let M=X,F=X+1,D=X+2;if(B=UJ(this,W,A,E,U,Y,H,M,F,D),B)B.faceIndex=Math.floor(X/3),B.face.materialIndex=L.materialIndex,Q.push(B)}}else{let N=Math.max(0,O.start),$=Math.min(J.count,O.start+O.count);for(let L=N,W=$;L<W;L+=3){let Z=L,G=L+1,X=L+2;if(B=UJ(this,C,A,E,U,Y,H,Z,G,X),B)B.faceIndex=Math.floor(L/3),Q.push(B)}}}}function YL(A,Q,E,B,I,C,K,J){let U;if(Q.side===1)U=B.intersectTriangle(K,C,I,!0,J);else U=B.intersectTriangle(I,C,K,Q.side===0,J);if(U===null)return null;JJ.copy(J),JJ.applyMatrix4(A.matrixWorld);let Y=E.ray.origin.distanceTo(JJ);if(Y<E.near||Y>E.far)return null;return{distance:Y,point:JJ.clone(),object:A}}function UJ(A,Q,E,B,I,C,K,J,U,Y){A.getVertexPosition(J,BJ),A.getVertexPosition(U,IJ),A.getVertexPosition(Y,CJ);let H=YL(A,Q,E,B,BJ,IJ,CJ,QZ);if(H){let R=new y;if(PQ.getBarycoord(QZ,BJ,IJ,CJ,R),I)H.uv=PQ.getInterpolatedAttribute(I,J,U,Y,R,new AA);if(C)H.uv1=PQ.getInterpolatedAttribute(C,J,U,Y,R,new AA);if(K){if(H.normal=PQ.getInterpolatedAttribute(K,J,U,Y,R,new y),H.normal.dot(B.direction)>0)H.normal.multiplyScalar(-1)}let O={a:J,b:U,c:Y,normal:new y,materialIndex:0};PQ.getNormal(BJ,IJ,CJ,O.normal),H.face=O,H.barycoord=R}return H}class bQ extends hA{constructor(A=1,Q=1,E=1,B=1,I=1,C=1){super();this.type="BoxGeometry",this.parameters={width:A,height:Q,depth:E,widthSegments:B,heightSegments:I,depthSegments:C};let K=this;B=Math.floor(B),I=Math.floor(I),C=Math.floor(C);let J=[],U=[],Y=[],H=[],R=0,O=0;N("z","y","x",-1,-1,E,Q,A,C,I,0),N("z","y","x",1,-1,E,Q,-A,C,I,1),N("x","z","y",1,1,A,E,Q,B,C,2),N("x","z","y",1,-1,A,E,-Q,B,C,3),N("x","y","z",1,-1,A,Q,E,B,I,4),N("x","y","z",-1,-1,A,Q,-E,B,I,5),this.setIndex(J),this.setAttribute("position",new PA(U,3)),this.setAttribute("normal",new PA(Y,3)),this.setAttribute("uv",new PA(H,2));function N($,L,W,Z,G,X,q,M,F,D,_){let w=X/F,k=q/D,T=X/2,z=q/2,j=M/2,v=F+1,g=D+1,P=0,V=0,S=new y;for(let h=0;h<g;h++){let x=h*k-z;for(let b=0;b<v;b++){let m=b*w-T;S[$]=m*Z,S[L]=x*G,S[W]=j,U.push(S.x,S.y,S.z),S[$]=0,S[L]=0,S[W]=M>0?1:-1,Y.push(S.x,S.y,S.z),H.push(b/F),H.push(1-h/D),P+=1}}for(let h=0;h<D;h++)for(let x=0;x<F;x++){let b=R+x+v*h,m=R+x+v*(h+1),s=R+(x+1)+v*(h+1),i=R+(x+1)+v*h;J.push(b,m,i),J.push(m,s,i),V+=6}K.addGroup(O,V,_),O+=V,R+=P}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new bQ(A.width,A.height,A.depth,A.widthSegments,A.heightSegments,A.depthSegments)}}function v1(A){let Q={};for(let E in A){Q[E]={};for(let B in A[E]){let I=A[E][B];if(I&&(I.isColor||I.isMatrix3||I.isMatrix4||I.isVector2||I.isVector3||I.isVector4||I.isTexture||I.isQuaternion))if(I.isRenderTargetTexture)console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),Q[E][B]=null;else Q[E][B]=I.clone();else if(Array.isArray(I))Q[E][B]=I.slice();else Q[E][B]=I}}return Q}function BE(A){let Q={};for(let E=0;E<A.length;E++){let B=v1(A[E]);for(let I in B)Q[I]=B[I]}return Q}function OL(A){let Q=[];for(let E=0;E<A.length;E++)Q.push(A[E].clone());return Q}function _O(A){let Q=A.getRenderTarget();if(Q===null)return A.outputColorSpace;if(Q.isXRRenderTarget===!0)return Q.texture.colorSpace;return O0.workingColorSpace}var oA={clone:v1,merge:BE},HL=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ZL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class bA extends $Q{constructor(A){super();if(this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HL,this.fragmentShader=ZL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,A!==void 0)this.setValues(A)}copy(A){return super.copy(A),this.fragmentShader=A.fragmentShader,this.vertexShader=A.vertexShader,this.uniforms=v1(A.uniforms),this.uniformsGroups=OL(A.uniformsGroups),this.defines=Object.assign({},A.defines),this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.fog=A.fog,this.lights=A.lights,this.clipping=A.clipping,this.extensions=Object.assign({},A.extensions),this.glslVersion=A.glslVersion,this}toJSON(A){let Q=super.toJSON(A);Q.glslVersion=this.glslVersion,Q.uniforms={};for(let B in this.uniforms){let C=this.uniforms[B].value;if(C&&C.isTexture)Q.uniforms[B]={type:"t",value:C.toJSON(A).uuid};else if(C&&C.isColor)Q.uniforms[B]={type:"c",value:C.getHex()};else if(C&&C.isVector2)Q.uniforms[B]={type:"v2",value:C.toArray()};else if(C&&C.isVector3)Q.uniforms[B]={type:"v3",value:C.toArray()};else if(C&&C.isVector4)Q.uniforms[B]={type:"v4",value:C.toArray()};else if(C&&C.isMatrix3)Q.uniforms[B]={type:"m3",value:C.toArray()};else if(C&&C.isMatrix4)Q.uniforms[B]={type:"m4",value:C.toArray()};else Q.uniforms[B]={value:C}}if(Object.keys(this.defines).length>0)Q.defines=this.defines;Q.vertexShader=this.vertexShader,Q.fragmentShader=this.fragmentShader,Q.lights=this.lights,Q.clipping=this.clipping;let E={};for(let B in this.extensions)if(this.extensions[B]===!0)E[B]=!0;if(Object.keys(E).length>0)Q.extensions=E;return Q}}class h1 extends I0{constructor(){super();this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new RA,this.projectionMatrix=new RA,this.projectionMatrixInverse=new RA,this.coordinateSystem=2000}copy(A,Q){return super.copy(A,Q),this.matrixWorldInverse.copy(A.matrixWorldInverse),this.projectionMatrix.copy(A.projectionMatrix),this.projectionMatrixInverse.copy(A.projectionMatrixInverse),this.coordinateSystem=A.coordinateSystem,this}getWorldDirection(A){return super.getWorldDirection(A).negate()}updateMatrixWorld(A){super.updateMatrixWorld(A),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(A,Q){super.updateWorldMatrix(A,Q),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}var kI=/*@__PURE__*/new y,EZ=/*@__PURE__*/new AA,BZ=/*@__PURE__*/new AA;class v0 extends h1{constructor(A=50,Q=1,E=0.1,B=2000){super();this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=A,this.zoom=1,this.near=E,this.far=B,this.focus=10,this.aspect=Q,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(A,Q){return super.copy(A,Q),this.fov=A.fov,this.zoom=A.zoom,this.near=A.near,this.far=A.far,this.focus=A.focus,this.aspect=A.aspect,this.view=A.view===null?null:Object.assign({},A.view),this.filmGauge=A.filmGauge,this.filmOffset=A.filmOffset,this}setFocalLength(A){let Q=0.5*this.getFilmHeight()/A;this.fov=H1*2*Math.atan(Q),this.updateProjectionMatrix()}getFocalLength(){let A=Math.tan(O1*0.5*this.fov);return 0.5*this.getFilmHeight()/A}getEffectiveFOV(){return H1*2*Math.atan(Math.tan(O1*0.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(A,Q,E){kI.set(-1,-1,0.5).applyMatrix4(this.projectionMatrixInverse),Q.set(kI.x,kI.y).multiplyScalar(-A/kI.z),kI.set(1,1,0.5).applyMatrix4(this.projectionMatrixInverse),E.set(kI.x,kI.y).multiplyScalar(-A/kI.z)}getViewSize(A,Q){return this.getViewBounds(A,EZ,BZ),Q.subVectors(BZ,EZ)}setViewOffset(A,Q,E,B,I,C){if(this.aspect=A/Q,this.view===null)this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=!0,this.view.fullWidth=A,this.view.fullHeight=Q,this.view.offsetX=E,this.view.offsetY=B,this.view.width=I,this.view.height=C,this.updateProjectionMatrix()}clearViewOffset(){if(this.view!==null)this.view.enabled=!1;this.updateProjectionMatrix()}updateProjectionMatrix(){let A=this.near,Q=A*Math.tan(O1*0.5*this.fov)/this.zoom,E=2*Q,B=this.aspect*E,I=-0.5*B,C=this.view;if(this.view!==null&&this.view.enabled){let{fullWidth:J,fullHeight:U}=C;I+=C.offsetX*B/J,Q-=C.offsetY*E/U,B*=C.width/J,E*=C.height/U}let K=this.filmOffset;if(K!==0)I+=A*K/this.getFilmWidth();this.projectionMatrix.makePerspective(I,I+B,Q,Q-E,A,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(A){let Q=super.toJSON(A);if(Q.object.fov=this.fov,Q.object.zoom=this.zoom,Q.object.near=this.near,Q.object.far=this.far,Q.object.focus=this.focus,Q.object.aspect=this.aspect,this.view!==null)Q.object.view=Object.assign({},this.view);return Q.object.filmGauge=this.filmGauge,Q.object.filmOffset=this.filmOffset,Q}}var X8=-90,$8=1;class D9 extends I0{constructor(A,Q,E){super();this.type="CubeCamera",this.renderTarget=E,this.coordinateSystem=null,this.activeMipmapLevel=0;let B=new v0(X8,$8,A,Q);B.layers=this.layers,this.add(B);let I=new v0(X8,$8,A,Q);I.layers=this.layers,this.add(I);let C=new v0(X8,$8,A,Q);C.layers=this.layers,this.add(C);let K=new v0(X8,$8,A,Q);K.layers=this.layers,this.add(K);let J=new v0(X8,$8,A,Q);J.layers=this.layers,this.add(J);let U=new v0(X8,$8,A,Q);U.layers=this.layers,this.add(U)}updateCoordinateSystem(){let A=this.coordinateSystem,Q=this.children.concat(),[E,B,I,C,K,J]=Q;for(let U of Q)this.remove(U);if(A===2000)E.up.set(0,1,0),E.lookAt(1,0,0),B.up.set(0,1,0),B.lookAt(-1,0,0),I.up.set(0,0,-1),I.lookAt(0,1,0),C.up.set(0,0,1),C.lookAt(0,-1,0),K.up.set(0,1,0),K.lookAt(0,0,1),J.up.set(0,1,0),J.lookAt(0,0,-1);else if(A===2001)E.up.set(0,-1,0),E.lookAt(-1,0,0),B.up.set(0,-1,0),B.lookAt(1,0,0),I.up.set(0,0,1),I.lookAt(0,1,0),C.up.set(0,0,-1),C.lookAt(0,-1,0),K.up.set(0,-1,0),K.lookAt(0,0,1),J.up.set(0,-1,0),J.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+A);for(let U of Q)this.add(U),U.updateMatrixWorld()}update(A,Q){if(this.parent===null)this.updateMatrixWorld();let{renderTarget:E,activeMipmapLevel:B}=this;if(this.coordinateSystem!==A.coordinateSystem)this.coordinateSystem=A.coordinateSystem,this.updateCoordinateSystem();let[I,C,K,J,U,Y]=this.children,H=A.getRenderTarget(),R=A.getActiveCubeFace(),O=A.getActiveMipmapLevel(),N=A.xr.enabled;A.xr.enabled=!1;let $=E.texture.generateMipmaps;E.texture.generateMipmaps=!1,A.setRenderTarget(E,0,B),A.render(Q,I),A.setRenderTarget(E,1,B),A.render(Q,C),A.setRenderTarget(E,2,B),A.render(Q,K),A.setRenderTarget(E,3,B),A.render(Q,J),A.setRenderTarget(E,4,B),A.render(Q,U),E.texture.generateMipmaps=$,A.setRenderTarget(E,5,B),A.render(Q,Y),A.setRenderTarget(H,R,O),A.xr.enabled=N,E.texture.needsPMREMUpdate=!0}}class QI extends EQ{constructor(A,Q,E,B,I,C,K,J,U,Y){A=A!==void 0?A:[],Q=Q!==void 0?Q:301;super(A,Q,E,B,I,C,K,J,U,Y);this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(A){this.image=A}}class DC extends Q0{constructor(A=1,Q={}){super(A,A,Q);this.isWebGLCubeRenderTarget=!0;let E={width:A,height:A,depth:1},B=[E,E,E,E,E,E];this.texture=new QI(B,Q.mapping,Q.wrapS,Q.wrapT,Q.magFilter,Q.minFilter,Q.format,Q.type,Q.anisotropy,Q.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=Q.generateMipmaps!==void 0?Q.generateMipmaps:!1,this.texture.minFilter=Q.minFilter!==void 0?Q.minFilter:1006}fromEquirectangularTexture(A,Q){this.texture.type=Q.type,this.texture.colorSpace=Q.colorSpace,this.texture.generateMipmaps=Q.generateMipmaps,this.texture.minFilter=Q.minFilter,this.texture.magFilter=Q.magFilter;let E={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},B=new bQ(5,5,5),I=new bA({name:"CubemapFromEquirect",uniforms:v1(E.uniforms),vertexShader:E.vertexShader,fragmentShader:E.fragmentShader,side:1,blending:0});I.uniforms.tEquirect.value=Q;let C=new xA(B,I),K=Q.minFilter;if(Q.minFilter===1008)Q.minFilter=1006;return new D9(1,10,this).update(A,C),Q.minFilter=K,C.geometry.dispose(),C.material.dispose(),this}clear(A,Q,E,B){let I=A.getRenderTarget();for(let C=0;C<6;C++)A.setRenderTarget(this,C),A.clear(Q,E,B);A.setRenderTarget(I)}}class i0 extends I0{constructor(){super();this.isGroup=!0,this.type="Group"}}var RL={type:"move"};class m8{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){if(this._hand===null)this._hand=new i0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1};return this._hand}getTargetRaySpace(){if(this._targetRay===null)this._targetRay=new i0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new y;return this._targetRay}getGripSpace(){if(this._grip===null)this._grip=new i0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new y;return this._grip}dispatchEvent(A){if(this._targetRay!==null)this._targetRay.dispatchEvent(A);if(this._grip!==null)this._grip.dispatchEvent(A);if(this._hand!==null)this._hand.dispatchEvent(A);return this}connect(A){if(A&&A.hand){let Q=this._hand;if(Q)for(let E of A.hand.values())this._getHandJoint(Q,E)}return this.dispatchEvent({type:"connected",data:A}),this}disconnect(A){if(this.dispatchEvent({type:"disconnected",data:A}),this._targetRay!==null)this._targetRay.visible=!1;if(this._grip!==null)this._grip.visible=!1;if(this._hand!==null)this._hand.visible=!1;return this}update(A,Q,E){let B=null,I=null,C=null,K=this._targetRay,J=this._grip,U=this._hand;if(A&&Q.session.visibilityState!=="visible-blurred"){if(U&&A.hand){C=!0;for(let $ of A.hand.values()){let L=Q.getJointPose($,E),W=this._getHandJoint(U,$);if(L!==null)W.matrix.fromArray(L.transform.matrix),W.matrix.decompose(W.position,W.rotation,W.scale),W.matrixWorldNeedsUpdate=!0,W.jointRadius=L.radius;W.visible=L!==null}let Y=U.joints["index-finger-tip"],H=U.joints["thumb-tip"],R=Y.position.distanceTo(H.position),O=0.02,N=0.005;if(U.inputState.pinching&&R>O+N)U.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:A.handedness,target:this});else if(!U.inputState.pinching&&R<=O-N)U.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:A.handedness,target:this})}else if(J!==null&&A.gripSpace){if(I=Q.getPose(A.gripSpace,E),I!==null){if(J.matrix.fromArray(I.transform.matrix),J.matrix.decompose(J.position,J.rotation,J.scale),J.matrixWorldNeedsUpdate=!0,I.linearVelocity)J.hasLinearVelocity=!0,J.linearVelocity.copy(I.linearVelocity);else J.hasLinearVelocity=!1;if(I.angularVelocity)J.hasAngularVelocity=!0,J.angularVelocity.copy(I.angularVelocity);else J.hasAngularVelocity=!1}}if(K!==null){if(B=Q.getPose(A.targetRaySpace,E),B===null&&I!==null)B=I;if(B!==null){if(K.matrix.fromArray(B.transform.matrix),K.matrix.decompose(K.position,K.rotation,K.scale),K.matrixWorldNeedsUpdate=!0,B.linearVelocity)K.hasLinearVelocity=!0,K.linearVelocity.copy(B.linearVelocity);else K.hasLinearVelocity=!1;if(B.angularVelocity)K.hasAngularVelocity=!0,K.angularVelocity.copy(B.angularVelocity);else K.hasAngularVelocity=!1;this.dispatchEvent(RL)}}}if(K!==null)K.visible=B!==null;if(J!==null)J.visible=I!==null;if(U!==null)U.visible=C!==null;return this}_getHandJoint(A,Q){if(A.joints[Q.jointName]===void 0){let E=new i0;E.matrixAutoUpdate=!1,E.visible=!1,A.joints[Q.jointName]=E,A.add(E)}return A.joints[Q.jointName]}}class MC{constructor(A,Q=0.00025){this.isFogExp2=!0,this.name="",this.color=new a(A),this.density=Q}clone(){return new MC(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class wC{constructor(A,Q=1,E=1000){this.isFog=!0,this.name="",this.color=new a(A),this.near=Q,this.far=E}clone(){return new wC(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class yQ extends I0{constructor(){super();if(this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new DQ,this.environmentIntensity=1,this.environmentRotation=new DQ,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(A,Q){if(super.copy(A,Q),A.background!==null)this.background=A.background.clone();if(A.environment!==null)this.environment=A.environment.clone();if(A.fog!==null)this.fog=A.fog.clone();if(this.backgroundBlurriness=A.backgroundBlurriness,this.backgroundIntensity=A.backgroundIntensity,this.backgroundRotation.copy(A.backgroundRotation),this.environmentIntensity=A.environmentIntensity,this.environmentRotation.copy(A.environmentRotation),A.overrideMaterial!==null)this.overrideMaterial=A.overrideMaterial.clone();return this.matrixAutoUpdate=A.matrixAutoUpdate,this}toJSON(A){let Q=super.toJSON(A);if(this.fog!==null)Q.object.fog=this.fog.toJSON();if(this.backgroundBlurriness>0)Q.object.backgroundBlurriness=this.backgroundBlurriness;if(this.backgroundIntensity!==1)Q.object.backgroundIntensity=this.backgroundIntensity;if(Q.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1)Q.object.environmentIntensity=this.environmentIntensity;return Q.object.environmentRotation=this.environmentRotation.toArray(),Q}}class hE{constructor(A,Q){this.isInterleavedBuffer=!0,this.array=A,this.stride=Q,this.count=A!==void 0?A.length/Q:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=TE()}onUploadCallback(){}set needsUpdate(A){if(A===!0)this.version++}setUsage(A){return this.usage=A,this}addUpdateRange(A,Q){this.updateRanges.push({start:A,count:Q})}clearUpdateRanges(){this.updateRanges.length=0}copy(A){return this.array=new A.array.constructor(A.array),this.count=A.count,this.stride=A.stride,this.usage=A.usage,this}copyAt(A,Q,E){A*=this.stride,E*=Q.stride;for(let B=0,I=this.stride;B<I;B++)this.array[A+B]=Q.array[E+B];return this}set(A,Q=0){return this.array.set(A,Q),this}clone(A){if(A.arrayBuffers===void 0)A.arrayBuffers={};if(this.array.buffer._uuid===void 0)this.array.buffer._uuid=TE();if(A.arrayBuffers[this.array.buffer._uuid]===void 0)A.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer;let Q=new this.array.constructor(A.arrayBuffers[this.array.buffer._uuid]),E=new this.constructor(Q,this.stride);return E.setUsage(this.usage),E}onUpload(A){return this.onUploadCallback=A,this}toJSON(A){if(A.arrayBuffers===void 0)A.arrayBuffers={};if(this.array.buffer._uuid===void 0)this.array.buffer._uuid=TE();if(A.arrayBuffers[this.array.buffer._uuid]===void 0)A.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer));return{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}var JE=/*@__PURE__*/new y;class xQ{constructor(A,Q,E,B=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=A,this.itemSize=Q,this.offset=E,this.normalized=B}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(A){this.data.needsUpdate=A}applyMatrix4(A){for(let Q=0,E=this.data.count;Q<E;Q++)JE.fromBufferAttribute(this,Q),JE.applyMatrix4(A),this.setXYZ(Q,JE.x,JE.y,JE.z);return this}applyNormalMatrix(A){for(let Q=0,E=this.count;Q<E;Q++)JE.fromBufferAttribute(this,Q),JE.applyNormalMatrix(A),this.setXYZ(Q,JE.x,JE.y,JE.z);return this}transformDirection(A){for(let Q=0,E=this.count;Q<E;Q++)JE.fromBufferAttribute(this,Q),JE.transformDirection(A),this.setXYZ(Q,JE.x,JE.y,JE.z);return this}getComponent(A,Q){let E=this.array[A*this.data.stride+this.offset+Q];if(this.normalized)E=UE(E,this.array);return E}setComponent(A,Q,E){if(this.normalized)E=S0(E,this.array);return this.data.array[A*this.data.stride+this.offset+Q]=E,this}setX(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.data.array[A*this.data.stride+this.offset]=Q,this}setY(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.data.array[A*this.data.stride+this.offset+1]=Q,this}setZ(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.data.array[A*this.data.stride+this.offset+2]=Q,this}setW(A,Q){if(this.normalized)Q=S0(Q,this.array);return this.data.array[A*this.data.stride+this.offset+3]=Q,this}getX(A){let Q=this.data.array[A*this.data.stride+this.offset];if(this.normalized)Q=UE(Q,this.array);return Q}getY(A){let Q=this.data.array[A*this.data.stride+this.offset+1];if(this.normalized)Q=UE(Q,this.array);return Q}getZ(A){let Q=this.data.array[A*this.data.stride+this.offset+2];if(this.normalized)Q=UE(Q,this.array);return Q}getW(A){let Q=this.data.array[A*this.data.stride+this.offset+3];if(this.normalized)Q=UE(Q,this.array);return Q}setXY(A,Q,E){if(A=A*this.data.stride+this.offset,this.normalized)Q=S0(Q,this.array),E=S0(E,this.array);return this.data.array[A+0]=Q,this.data.array[A+1]=E,this}setXYZ(A,Q,E,B){if(A=A*this.data.stride+this.offset,this.normalized)Q=S0(Q,this.array),E=S0(E,this.array),B=S0(B,this.array);return this.data.array[A+0]=Q,this.data.array[A+1]=E,this.data.array[A+2]=B,this}setXYZW(A,Q,E,B,I){if(A=A*this.data.stride+this.offset,this.normalized)Q=S0(Q,this.array),E=S0(E,this.array),B=S0(B,this.array),I=S0(I,this.array);return this.data.array[A+0]=Q,this.data.array[A+1]=E,this.data.array[A+2]=B,this.data.array[A+3]=I,this}clone(A){if(A===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let Q=[];for(let E=0;E<this.count;E++){let B=E*this.data.stride+this.offset;for(let I=0;I<this.itemSize;I++)Q.push(this.data.array[B+I])}return new tA(new this.array.constructor(Q),this.itemSize,this.normalized)}else{if(A.interleavedBuffers===void 0)A.interleavedBuffers={};if(A.interleavedBuffers[this.data.uuid]===void 0)A.interleavedBuffers[this.data.uuid]=this.data.clone(A);return new xQ(A.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}}toJSON(A){if(A===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let Q=[];for(let E=0;E<this.count;E++){let B=E*this.data.stride+this.offset;for(let I=0;I<this.itemSize;I++)Q.push(this.data.array[B+I])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:Q,normalized:this.normalized}}else{if(A.interleavedBuffers===void 0)A.interleavedBuffers={};if(A.interleavedBuffers[this.data.uuid]===void 0)A.interleavedBuffers[this.data.uuid]=this.data.toJSON(A);return{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}}class y1 extends $Q{constructor(A){super();this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new a(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.alphaMap=A.alphaMap,this.rotation=A.rotation,this.sizeAttenuation=A.sizeAttenuation,this.fog=A.fog,this}}var L8,c6=/*@__PURE__*/new y,q8=/*@__PURE__*/new y,F8=/*@__PURE__*/new y,D8=/*@__PURE__*/new AA,l6=/*@__PURE__*/new AA,cR=/*@__PURE__*/new RA,YJ=/*@__PURE__*/new y,d6=/*@__PURE__*/new y,OJ=/*@__PURE__*/new y,IZ=/*@__PURE__*/new AA,WY=/*@__PURE__*/new AA,CZ=/*@__PURE__*/new AA;class c8 extends I0{constructor(A=new y1){super();if(this.isSprite=!0,this.type="Sprite",L8===void 0){L8=new hA;let Q=new Float32Array([-0.5,-0.5,0,0,0,0.5,-0.5,0,1,0,0.5,0.5,0,1,1,-0.5,0.5,0,0,1]),E=new hE(Q,5);L8.setIndex([0,1,2,0,2,3]),L8.setAttribute("position",new xQ(E,3,0,!1)),L8.setAttribute("uv",new xQ(E,2,3,!1))}this.geometry=L8,this.material=A,this.center=new AA(0.5,0.5)}raycast(A,Q){if(A.camera===null)console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');if(q8.setFromMatrixScale(this.matrixWorld),cR.copy(A.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(A.camera.matrixWorldInverse,this.matrixWorld),F8.setFromMatrixPosition(this.modelViewMatrix),A.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1)q8.multiplyScalar(-F8.z);let E=this.material.rotation,B,I;if(E!==0)I=Math.cos(E),B=Math.sin(E);let C=this.center;HJ(YJ.set(-0.5,-0.5,0),F8,C,q8,B,I),HJ(d6.set(0.5,-0.5,0),F8,C,q8,B,I),HJ(OJ.set(0.5,0.5,0),F8,C,q8,B,I),IZ.set(0,0),WY.set(1,0),CZ.set(1,1);let K=A.ray.intersectTriangle(YJ,d6,OJ,!1,c6);if(K===null){if(HJ(d6.set(-0.5,0.5,0),F8,C,q8,B,I),WY.set(0,1),K=A.ray.intersectTriangle(YJ,OJ,d6,!1,c6),K===null)return}let J=A.ray.origin.distanceTo(c6);if(J<A.near||J>A.far)return;Q.push({distance:J,point:c6.clone(),uv:PQ.getInterpolation(c6,YJ,d6,OJ,IZ,WY,CZ,new AA),face:null,object:this})}copy(A,Q){if(super.copy(A,Q),A.center!==void 0)this.center.copy(A.center);return this.material=A.material,this}}function HJ(A,Q,E,B,I,C){if(D8.subVectors(A,E).addScalar(0.5).multiply(B),I!==void 0)l6.x=C*D8.x-I*D8.y,l6.y=I*D8.x+C*D8.y;else l6.copy(D8);A.copy(Q),A.x+=l6.x,A.y+=l6.y,A.applyMatrix4(cR)}var ZJ=/*@__PURE__*/new y,KZ=/*@__PURE__*/new y;class M9 extends I0{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(A){super.copy(A,!1);let Q=A.levels;for(let E=0,B=Q.length;E<B;E++){let I=Q[E];this.addLevel(I.object.clone(),I.distance,I.hysteresis)}return this.autoUpdate=A.autoUpdate,this}addLevel(A,Q=0,E=0){Q=Math.abs(Q);let B=this.levels,I;for(I=0;I<B.length;I++)if(Q<B[I].distance)break;return B.splice(I,0,{distance:Q,hysteresis:E,object:A}),this.add(A),this}removeLevel(A){let Q=this.levels;for(let E=0;E<Q.length;E++)if(Q[E].distance===A){let B=Q.splice(E,1);return this.remove(B[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(A){let Q=this.levels;if(Q.length>0){let E,B;for(E=1,B=Q.length;E<B;E++){let I=Q[E].distance;if(Q[E].object.visible)I-=I*Q[E].hysteresis;if(A<I)break}return Q[E-1].object}return null}raycast(A,Q){if(this.levels.length>0){ZJ.setFromMatrixPosition(this.matrixWorld);let B=A.ray.origin.distanceTo(ZJ);this.getObjectForDistance(B).raycast(A,Q)}}update(A){let Q=this.levels;if(Q.length>1){ZJ.setFromMatrixPosition(A.matrixWorld),KZ.setFromMatrixPosition(this.matrixWorld);let E=ZJ.distanceTo(KZ)/A.zoom;Q[0].object.visible=!0;let B,I;for(B=1,I=Q.length;B<I;B++){let C=Q[B].distance;if(Q[B].object.visible)C-=C*Q[B].hysteresis;if(E>=C)Q[B-1].object.visible=!1,Q[B].object.visible=!0;else break}this._currentLevel=B-1;for(;B<I;B++)Q[B].object.visible=!1}}toJSON(A){let Q=super.toJSON(A);if(this.autoUpdate===!1)Q.object.autoUpdate=!1;Q.object.levels=[];let E=this.levels;for(let B=0,I=E.length;B<I;B++){let C=E[B];Q.object.levels.push({object:C.object.uuid,distance:C.distance,hysteresis:C.hysteresis})}return Q}}var JZ=/*@__PURE__*/new y,UZ=/*@__PURE__*/new MA,YZ=/*@__PURE__*/new MA,NL=/*@__PURE__*/new y,OZ=/*@__PURE__*/new RA,RJ=/*@__PURE__*/new y,XY=/*@__PURE__*/new KQ,HZ=/*@__PURE__*/new RA,$Y=/*@__PURE__*/new qE;class jI extends xA{constructor(A,Q){super(A,Q);this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new RA,this.bindMatrixInverse=new RA,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let A=this.geometry;if(this.boundingBox===null)this.boundingBox=new g0;this.boundingBox.makeEmpty();let Q=A.getAttribute("position");for(let E=0;E<Q.count;E++)this.getVertexPosition(E,RJ),this.boundingBox.expandByPoint(RJ)}computeBoundingSphere(){let A=this.geometry;if(this.boundingSphere===null)this.boundingSphere=new KQ;this.boundingSphere.makeEmpty();let Q=A.getAttribute("position");for(let E=0;E<Q.count;E++)this.getVertexPosition(E,RJ),this.boundingSphere.expandByPoint(RJ)}copy(A,Q){if(super.copy(A,Q),this.bindMode=A.bindMode,this.bindMatrix.copy(A.bindMatrix),this.bindMatrixInverse.copy(A.bindMatrixInverse),this.skeleton=A.skeleton,A.boundingBox!==null)this.boundingBox=A.boundingBox.clone();if(A.boundingSphere!==null)this.boundingSphere=A.boundingSphere.clone();return this}raycast(A,Q){let E=this.material,B=this.matrixWorld;if(E===void 0)return;if(this.boundingSphere===null)this.computeBoundingSphere();if(XY.copy(this.boundingSphere),XY.applyMatrix4(B),A.ray.intersectsSphere(XY)===!1)return;if(HZ.copy(B).invert(),$Y.copy(A.ray).applyMatrix4(HZ),this.boundingBox!==null){if($Y.intersectsBox(this.boundingBox)===!1)return}this._computeIntersections(A,Q,$Y)}getVertexPosition(A,Q){return super.getVertexPosition(A,Q),this.applyBoneTransform(A,Q),Q}bind(A,Q){if(this.skeleton=A,Q===void 0)this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),Q=this.matrixWorld;this.bindMatrix.copy(Q),this.bindMatrixInverse.copy(Q).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let A=new MA,Q=this.geometry.attributes.skinWeight;for(let E=0,B=Q.count;E<B;E++){A.fromBufferAttribute(Q,E);let I=1/A.manhattanLength();if(I!==1/0)A.multiplyScalar(I);else A.set(1,0,0,0);Q.setXYZW(E,A.x,A.y,A.z,A.w)}}updateMatrixWorld(A){if(super.updateMatrixWorld(A),this.bindMode==="attached")this.bindMatrixInverse.copy(this.matrixWorld).invert();else if(this.bindMode==="detached")this.bindMatrixInverse.copy(this.bindMatrix).invert();else console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(A,Q){let E=this.skeleton,B=this.geometry;UZ.fromBufferAttribute(B.attributes.skinIndex,A),YZ.fromBufferAttribute(B.attributes.skinWeight,A),JZ.copy(Q).applyMatrix4(this.bindMatrix),Q.set(0,0,0);for(let I=0;I<4;I++){let C=YZ.getComponent(I);if(C!==0){let K=UZ.getComponent(I);OZ.multiplyMatrices(E.bones[K].matrixWorld,E.boneInverses[K]),Q.addScaledVector(NL.copy(JZ).applyMatrix4(OZ),C)}}return Q.applyMatrix4(this.bindMatrixInverse)}}class yB extends I0{constructor(){super();this.isBone=!0,this.type="Bone"}}class h0 extends EQ{constructor(A=null,Q=1,E=1,B,I,C,K,J,U=1003,Y=1003,H,R){super(null,C,K,J,U,Y,B,I,H,R);this.isDataTexture=!0,this.image={data:A,width:Q,height:E},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var ZZ=/*@__PURE__*/new RA,GL=/*@__PURE__*/new RA;class gB{constructor(A=[],Q=[]){this.uuid=TE(),this.bones=A.slice(0),this.boneInverses=Q,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let A=this.bones,Q=this.boneInverses;if(this.boneMatrices=new Float32Array(A.length*16),Q.length===0)this.calculateInverses();else if(A.length!==Q.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let E=0,B=this.bones.length;E<B;E++)this.boneInverses.push(new RA)}}calculateInverses(){this.boneInverses.length=0;for(let A=0,Q=this.bones.length;A<Q;A++){let E=new RA;if(this.bones[A])E.copy(this.bones[A].matrixWorld).invert();this.boneInverses.push(E)}}pose(){for(let A=0,Q=this.bones.length;A<Q;A++){let E=this.bones[A];if(E)E.matrixWorld.copy(this.boneInverses[A]).invert()}for(let A=0,Q=this.bones.length;A<Q;A++){let E=this.bones[A];if(E){if(E.parent&&E.parent.isBone)E.matrix.copy(E.parent.matrixWorld).invert(),E.matrix.multiply(E.matrixWorld);else E.matrix.copy(E.matrixWorld);E.matrix.decompose(E.position,E.quaternion,E.scale)}}}update(){let A=this.bones,Q=this.boneInverses,E=this.boneMatrices,B=this.boneTexture;for(let I=0,C=A.length;I<C;I++){let K=A[I]?A[I].matrixWorld:GL;ZZ.multiplyMatrices(K,Q[I]),ZZ.toArray(E,I*16)}if(B!==null)B.needsUpdate=!0}clone(){return new gB(this.bones,this.boneInverses)}computeBoneTexture(){let A=Math.sqrt(this.bones.length*4);A=Math.ceil(A/4)*4,A=Math.max(A,4);let Q=new Float32Array(A*A*4);Q.set(this.boneMatrices);let E=new h0(Q,A,A,1023,1015);return E.needsUpdate=!0,this.boneMatrices=Q,this.boneTexture=E,this}getBoneByName(A){for(let Q=0,E=this.bones.length;Q<E;Q++){let B=this.bones[Q];if(B.name===A)return B}return}dispose(){if(this.boneTexture!==null)this.boneTexture.dispose(),this.boneTexture=null}fromJSON(A,Q){this.uuid=A.uuid;for(let E=0,B=A.bones.length;E<B;E++){let I=A.bones[E],C=Q[I];if(C===void 0)console.warn("THREE.Skeleton: No bone found with UUID:",I),C=new yB;this.bones.push(C),this.boneInverses.push(new RA().fromArray(A.boneInverses[E]))}return this.init(),this}toJSON(){let A={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};A.uuid=this.uuid;let Q=this.bones,E=this.boneInverses;for(let B=0,I=Q.length;B<I;B++){let C=Q[B];A.bones.push(C.uuid);let K=E[B];A.boneInverses.push(K.toArray())}return A}}class HB extends tA{constructor(A,Q,E,B=1){super(A,Q,E);this.isInstancedBufferAttribute=!0,this.meshPerAttribute=B}copy(A){return super.copy(A),this.meshPerAttribute=A.meshPerAttribute,this}toJSON(){let A=super.toJSON();return A.meshPerAttribute=this.meshPerAttribute,A.isInstancedBufferAttribute=!0,A}}var M8=/*@__PURE__*/new RA,RZ=/*@__PURE__*/new RA,NJ=[],NZ=/*@__PURE__*/new g0,WL=/*@__PURE__*/new RA,n6=/*@__PURE__*/new xA,s6=/*@__PURE__*/new KQ;class vI extends xA{constructor(A,Q,E){super(A,Q);this.isInstancedMesh=!0,this.instanceMatrix=new HB(new Float32Array(E*16),16),this.instanceColor=null,this.morphTexture=null,this.count=E,this.boundingBox=null,this.boundingSphere=null;for(let B=0;B<E;B++)this.setMatrixAt(B,WL)}computeBoundingBox(){let A=this.geometry,Q=this.count;if(this.boundingBox===null)this.boundingBox=new g0;if(A.boundingBox===null)A.computeBoundingBox();this.boundingBox.makeEmpty();for(let E=0;E<Q;E++)this.getMatrixAt(E,M8),NZ.copy(A.boundingBox).applyMatrix4(M8),this.boundingBox.union(NZ)}computeBoundingSphere(){let A=this.geometry,Q=this.count;if(this.boundingSphere===null)this.boundingSphere=new KQ;if(A.boundingSphere===null)A.computeBoundingSphere();this.boundingSphere.makeEmpty();for(let E=0;E<Q;E++)this.getMatrixAt(E,M8),s6.copy(A.boundingSphere).applyMatrix4(M8),this.boundingSphere.union(s6)}copy(A,Q){if(super.copy(A,Q),this.instanceMatrix.copy(A.instanceMatrix),A.morphTexture!==null)this.morphTexture=A.morphTexture.clone();if(A.instanceColor!==null)this.instanceColor=A.instanceColor.clone();if(this.count=A.count,A.boundingBox!==null)this.boundingBox=A.boundingBox.clone();if(A.boundingSphere!==null)this.boundingSphere=A.boundingSphere.clone();return this}getColorAt(A,Q){Q.fromArray(this.instanceColor.array,A*3)}getMatrixAt(A,Q){Q.fromArray(this.instanceMatrix.array,A*16)}getMorphAt(A,Q){let E=Q.morphTargetInfluences,B=this.morphTexture.source.data.data,I=E.length+1,C=A*I+1;for(let K=0;K<E.length;K++)E[K]=B[C+K]}raycast(A,Q){let E=this.matrixWorld,B=this.count;if(n6.geometry=this.geometry,n6.material=this.material,n6.material===void 0)return;if(this.boundingSphere===null)this.computeBoundingSphere();if(s6.copy(this.boundingSphere),s6.applyMatrix4(E),A.ray.intersectsSphere(s6)===!1)return;for(let I=0;I<B;I++){this.getMatrixAt(I,M8),RZ.multiplyMatrices(E,M8),n6.matrixWorld=RZ,n6.raycast(A,NJ);for(let C=0,K=NJ.length;C<K;C++){let J=NJ[C];J.instanceId=I,J.object=this,Q.push(J)}NJ.length=0}}setColorAt(A,Q){if(this.instanceColor===null)this.instanceColor=new HB(new Float32Array(this.instanceMatrix.count*3).fill(1),3);Q.toArray(this.instanceColor.array,A*3)}setMatrixAt(A,Q){Q.toArray(this.instanceMatrix.array,A*16)}setMorphAt(A,Q){let E=Q.morphTargetInfluences,B=E.length+1;if(this.morphTexture===null)this.morphTexture=new h0(new Float32Array(B*this.count),B,this.count,1028,1015);let I=this.morphTexture.source.data.data,C=0;for(let U=0;U<E.length;U++)C+=E[U];let K=this.geometry.morphTargetsRelative?1:1-C,J=B*A;I[J]=K,I.set(E,J+1)}updateMorphTargets(){}dispose(){if(this.dispatchEvent({type:"dispose"}),this.morphTexture!==null)this.morphTexture.dispose(),this.morphTexture=null;return this}}var LY=/*@__PURE__*/new y,XL=/*@__PURE__*/new y,$L=/*@__PURE__*/new E0;class UQ{constructor(A=new y(1,0,0),Q=0){this.isPlane=!0,this.normal=A,this.constant=Q}set(A,Q){return this.normal.copy(A),this.constant=Q,this}setComponents(A,Q,E,B){return this.normal.set(A,Q,E),this.constant=B,this}setFromNormalAndCoplanarPoint(A,Q){return this.normal.copy(A),this.constant=-Q.dot(this.normal),this}setFromCoplanarPoints(A,Q,E){let B=LY.subVectors(E,Q).cross(XL.subVectors(A,Q)).normalize();return this.setFromNormalAndCoplanarPoint(B,A),this}copy(A){return this.normal.copy(A.normal),this.constant=A.constant,this}normalize(){let A=1/this.normal.length();return this.normal.multiplyScalar(A),this.constant*=A,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(A){return this.normal.dot(A)+this.constant}distanceToSphere(A){return this.distanceToPoint(A.center)-A.radius}projectPoint(A,Q){return Q.copy(A).addScaledVector(this.normal,-this.distanceToPoint(A))}intersectLine(A,Q){let E=A.delta(LY),B=this.normal.dot(E);if(B===0){if(this.distanceToPoint(A.start)===0)return Q.copy(A.start);return null}let I=-(A.start.dot(this.normal)+this.constant)/B;if(I<0||I>1)return null;return Q.copy(A.start).addScaledVector(E,I)}intersectsLine(A){let Q=this.distanceToPoint(A.start),E=this.distanceToPoint(A.end);return Q<0&&E>0||E<0&&Q>0}intersectsBox(A){return A.intersectsPlane(this)}intersectsSphere(A){return A.intersectsPlane(this)}coplanarPoint(A){return A.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(A,Q){let E=Q||$L.getNormalMatrix(A),B=this.coplanarPoint(LY).applyMatrix4(A),I=this.normal.applyMatrix3(E).normalize();return this.constant=-B.dot(I),this}translate(A){return this.constant-=A.dot(this.normal),this}equals(A){return A.normal.equals(this.normal)&&A.constant===this.constant}clone(){return new this.constructor().copy(this)}}var Q1=/*@__PURE__*/new KQ,GJ=/*@__PURE__*/new y;class xB{constructor(A=new UQ,Q=new UQ,E=new UQ,B=new UQ,I=new UQ,C=new UQ){this.planes=[A,Q,E,B,I,C]}set(A,Q,E,B,I,C){let K=this.planes;return K[0].copy(A),K[1].copy(Q),K[2].copy(E),K[3].copy(B),K[4].copy(I),K[5].copy(C),this}copy(A){let Q=this.planes;for(let E=0;E<6;E++)Q[E].copy(A.planes[E]);return this}setFromProjectionMatrix(A,Q=2000){let E=this.planes,B=A.elements,I=B[0],C=B[1],K=B[2],J=B[3],U=B[4],Y=B[5],H=B[6],R=B[7],O=B[8],N=B[9],$=B[10],L=B[11],W=B[12],Z=B[13],G=B[14],X=B[15];if(E[0].setComponents(J-I,R-U,L-O,X-W).normalize(),E[1].setComponents(J+I,R+U,L+O,X+W).normalize(),E[2].setComponents(J+C,R+Y,L+N,X+Z).normalize(),E[3].setComponents(J-C,R-Y,L-N,X-Z).normalize(),E[4].setComponents(J-K,R-H,L-$,X-G).normalize(),Q===2000)E[5].setComponents(J+K,R+H,L+$,X+G).normalize();else if(Q===2001)E[5].setComponents(K,H,$,G).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+Q);return this}intersectsObject(A){if(A.boundingSphere!==void 0){if(A.boundingSphere===null)A.computeBoundingSphere();Q1.copy(A.boundingSphere).applyMatrix4(A.matrixWorld)}else{let Q=A.geometry;if(Q.boundingSphere===null)Q.computeBoundingSphere();Q1.copy(Q.boundingSphere).applyMatrix4(A.matrixWorld)}return this.intersectsSphere(Q1)}intersectsSprite(A){return Q1.center.set(0,0,0),Q1.radius=0.7071067811865476,Q1.applyMatrix4(A.matrixWorld),this.intersectsSphere(Q1)}intersectsSphere(A){let Q=this.planes,E=A.center,B=-A.radius;for(let I=0;I<6;I++)if(Q[I].distanceToPoint(E)<B)return!1;return!0}intersectsBox(A){let Q=this.planes;for(let E=0;E<6;E++){let B=Q[E];if(GJ.x=B.normal.x>0?A.max.x:A.min.x,GJ.y=B.normal.y>0?A.max.y:A.min.y,GJ.z=B.normal.z>0?A.max.z:A.min.z,B.distanceToPoint(GJ)<0)return!1}return!0}containsPoint(A){let Q=this.planes;for(let E=0;E<6;E++)if(Q[E].distanceToPoint(A)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function qY(A,Q){return A-Q}function LL(A,Q){return A.z-Q.z}function qL(A,Q){return Q.z-A.z}class lR{constructor(){this.index=0,this.pool=[],this.list=[]}push(A,Q,E,B){let I=this.pool,C=this.list;if(this.index>=I.length)I.push({start:-1,count:-1,z:-1,index:-1});let K=I[this.index];C.push(K),this.index++,K.start=A,K.count=Q,K.z=E,K.index=B}reset(){this.list.length=0,this.index=0}}var NE=/*@__PURE__*/new RA,FL=/*@__PURE__*/new a(1,1,1),FY=/*@__PURE__*/new xB,WJ=/*@__PURE__*/new g0,E1=/*@__PURE__*/new KQ,i6=/*@__PURE__*/new y,GZ=/*@__PURE__*/new y,DL=/*@__PURE__*/new y,DY=/*@__PURE__*/new lR,AE=/*@__PURE__*/new xA,XJ=[];function ML(A,Q,E=0){let B=Q.itemSize;if(A.isInterleavedBufferAttribute||A.array.constructor!==Q.array.constructor){let I=A.count;for(let C=0;C<I;C++)for(let K=0;K<B;K++)Q.setComponent(C+E,K,A.getComponent(C,K))}else Q.array.set(A.array,E*B);Q.needsUpdate=!0}function B1(A,Q){if(A.constructor!==Q.constructor){let E=Math.min(A.length,Q.length);for(let B=0;B<E;B++)Q[B]=A[B]}else{let E=Math.min(A.length,Q.length);Q.set(new A.constructor(A.buffer,0,E))}}class w9 extends xA{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(A,Q,E=Q*2,B){super(new hA,B);this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=A,this._maxVertexCount=Q,this._maxIndexCount=E,this._multiDrawCounts=new Int32Array(A),this._multiDrawStarts=new Int32Array(A),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let A=Math.sqrt(this._maxInstanceCount*4);A=Math.ceil(A/4)*4,A=Math.max(A,4);let Q=new Float32Array(A*A*4),E=new h0(Q,A,A,1023,1015);this._matricesTexture=E}_initIndirectTexture(){let A=Math.sqrt(this._maxInstanceCount);A=Math.ceil(A);let Q=new Uint32Array(A*A),E=new h0(Q,A,A,1029,1014);this._indirectTexture=E}_initColorsTexture(){let A=Math.sqrt(this._maxInstanceCount);A=Math.ceil(A);let Q=new Float32Array(A*A*4).fill(1),E=new h0(Q,A,A,1023,1015);E.colorSpace=O0.workingColorSpace,this._colorsTexture=E}_initializeGeometry(A){let Q=this.geometry,E=this._maxVertexCount,B=this._maxIndexCount;if(this._geometryInitialized===!1){for(let I in A.attributes){let C=A.getAttribute(I),{array:K,itemSize:J,normalized:U}=C,Y=new K.constructor(E*J),H=new tA(Y,J,U);Q.setAttribute(I,H)}if(A.getIndex()!==null){let I=E>65535?new Uint32Array(B):new Uint16Array(B);Q.setIndex(new tA(I,1))}this._geometryInitialized=!0}}_validateGeometry(A){let Q=this.geometry;if(Boolean(A.getIndex())!==Boolean(Q.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(let E in Q.attributes){if(!A.hasAttribute(E))throw new Error(`THREE.BatchedMesh: Added geometry missing "${E}". All geometries must have consistent attributes.`);let B=A.getAttribute(E),I=Q.getAttribute(E);if(B.itemSize!==I.itemSize||B.normalized!==I.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(A){let Q=this._instanceInfo;if(A<0||A>=Q.length||Q[A].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${A}. Instance is either out of range or has been deleted.`)}validateGeometryId(A){let Q=this._geometryInfo;if(A<0||A>=Q.length||Q[A].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${A}. Geometry is either out of range or has been deleted.`)}setCustomSort(A){return this.customSort=A,this}computeBoundingBox(){if(this.boundingBox===null)this.boundingBox=new g0;let A=this.boundingBox,Q=this._instanceInfo;A.makeEmpty();for(let E=0,B=Q.length;E<B;E++){if(Q[E].active===!1)continue;let I=Q[E].geometryIndex;this.getMatrixAt(E,NE),this.getBoundingBoxAt(I,WJ).applyMatrix4(NE),A.union(WJ)}}computeBoundingSphere(){if(this.boundingSphere===null)this.boundingSphere=new KQ;let A=this.boundingSphere,Q=this._instanceInfo;A.makeEmpty();for(let E=0,B=Q.length;E<B;E++){if(Q[E].active===!1)continue;let I=Q[E].geometryIndex;this.getMatrixAt(E,NE),this.getBoundingSphereAt(I,E1).applyMatrix4(NE),A.union(E1)}}addInstance(A){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");let E={visible:!0,active:!0,geometryIndex:A},B=null;if(this._availableInstanceIds.length>0)this._availableInstanceIds.sort(qY),B=this._availableInstanceIds.shift(),this._instanceInfo[B]=E;else B=this._instanceInfo.length,this._instanceInfo.push(E);let I=this._matricesTexture;NE.identity().toArray(I.image.data,B*16),I.needsUpdate=!0;let C=this._colorsTexture;if(C)FL.toArray(C.image.data,B*4),C.needsUpdate=!0;return this._visibilityChanged=!0,B}addGeometry(A,Q=-1,E=-1){this._initializeGeometry(A),this._validateGeometry(A);let B={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},I=this._geometryInfo;B.vertexStart=this._nextVertexStart,B.reservedVertexCount=Q===-1?A.getAttribute("position").count:Q;let C=A.getIndex();if(C!==null)B.indexStart=this._nextIndexStart,B.reservedIndexCount=E===-1?C.count:E;if(B.indexStart!==-1&&B.indexStart+B.reservedIndexCount>this._maxIndexCount||B.vertexStart+B.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let J;if(this._availableGeometryIds.length>0)this._availableGeometryIds.sort(qY),J=this._availableGeometryIds.shift(),I[J]=B;else J=this._geometryCount,this._geometryCount++,I.push(B);return this.setGeometryAt(J,A),this._nextIndexStart=B.indexStart+B.reservedIndexCount,this._nextVertexStart=B.vertexStart+B.reservedVertexCount,J}setGeometryAt(A,Q){if(A>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(Q);let E=this.geometry,B=E.getIndex()!==null,I=E.getIndex(),C=Q.getIndex(),K=this._geometryInfo[A];if(B&&C.count>K.reservedIndexCount||Q.attributes.position.count>K.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");let{vertexStart:J,reservedVertexCount:U}=K;K.vertexCount=Q.getAttribute("position").count;for(let Y in E.attributes){let H=Q.getAttribute(Y),R=E.getAttribute(Y);ML(H,R,J);let O=H.itemSize;for(let N=H.count,$=U;N<$;N++){let L=J+N;for(let W=0;W<O;W++)R.setComponent(L,W,0)}R.needsUpdate=!0,R.addUpdateRange(J*O,U*O)}if(B){let{indexStart:Y,reservedIndexCount:H}=K;K.indexCount=Q.getIndex().count;for(let R=0;R<C.count;R++)I.setX(Y+R,J+C.getX(R));for(let R=C.count,O=H;R<O;R++)I.setX(Y+R,J);I.needsUpdate=!0,I.addUpdateRange(Y,K.reservedIndexCount)}if(K.start=B?K.indexStart:K.vertexStart,K.count=B?K.indexCount:K.vertexCount,K.boundingBox=null,Q.boundingBox!==null)K.boundingBox=Q.boundingBox.clone();if(K.boundingSphere=null,Q.boundingSphere!==null)K.boundingSphere=Q.boundingSphere.clone();return this._visibilityChanged=!0,A}deleteGeometry(A){let Q=this._geometryInfo;if(A>=Q.length||Q[A].active===!1)return this;let E=this._instanceInfo;for(let B=0,I=E.length;B<I;B++)if(E[B].active&&E[B].geometryIndex===A)this.deleteInstance(B);return Q[A].active=!1,this._availableGeometryIds.push(A),this._visibilityChanged=!0,this}deleteInstance(A){return this.validateInstanceId(A),this._instanceInfo[A].active=!1,this._availableInstanceIds.push(A),this._visibilityChanged=!0,this}optimize(){let A=0,Q=0,E=this._geometryInfo,B=E.map((C,K)=>K).sort((C,K)=>{return E[C].vertexStart-E[K].vertexStart}),I=this.geometry;for(let C=0,K=E.length;C<K;C++){let J=B[C],U=E[J];if(U.active===!1)continue;if(I.index!==null){if(U.indexStart!==Q){let{indexStart:Y,vertexStart:H,reservedIndexCount:R}=U,O=I.index,N=O.array,$=A-H;for(let L=Y;L<Y+R;L++)N[L]=N[L]+$;O.array.copyWithin(Q,Y,Y+R),O.addUpdateRange(Q,R),U.indexStart=Q}Q+=U.reservedIndexCount}if(U.vertexStart!==A){let{vertexStart:Y,reservedVertexCount:H}=U,R=I.attributes;for(let O in R){let N=R[O],{array:$,itemSize:L}=N;$.copyWithin(A*L,Y*L,(Y+H)*L),N.addUpdateRange(A*L,H*L)}U.vertexStart=A}A+=U.reservedVertexCount,U.start=I.index?U.indexStart:U.vertexStart,this._nextIndexStart=I.index?U.indexStart+U.reservedIndexCount:0,this._nextVertexStart=U.vertexStart+U.reservedVertexCount}return this}getBoundingBoxAt(A,Q){if(A>=this._geometryCount)return null;let E=this.geometry,B=this._geometryInfo[A];if(B.boundingBox===null){let I=new g0,C=E.index,K=E.attributes.position;for(let J=B.start,U=B.start+B.count;J<U;J++){let Y=J;if(C)Y=C.getX(Y);I.expandByPoint(i6.fromBufferAttribute(K,Y))}B.boundingBox=I}return Q.copy(B.boundingBox),Q}getBoundingSphereAt(A,Q){if(A>=this._geometryCount)return null;let E=this.geometry,B=this._geometryInfo[A];if(B.boundingSphere===null){let I=new KQ;this.getBoundingBoxAt(A,WJ),WJ.getCenter(I.center);let C=E.index,K=E.attributes.position,J=0;for(let U=B.start,Y=B.start+B.count;U<Y;U++){let H=U;if(C)H=C.getX(H);i6.fromBufferAttribute(K,H),J=Math.max(J,I.center.distanceToSquared(i6))}I.radius=Math.sqrt(J),B.boundingSphere=I}return Q.copy(B.boundingSphere),Q}setMatrixAt(A,Q){this.validateInstanceId(A);let E=this._matricesTexture,B=this._matricesTexture.image.data;return Q.toArray(B,A*16),E.needsUpdate=!0,this}getMatrixAt(A,Q){return this.validateInstanceId(A),Q.fromArray(this._matricesTexture.image.data,A*16)}setColorAt(A,Q){if(this.validateInstanceId(A),this._colorsTexture===null)this._initColorsTexture();return Q.toArray(this._colorsTexture.image.data,A*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(A,Q){return this.validateInstanceId(A),Q.fromArray(this._colorsTexture.image.data,A*4)}setVisibleAt(A,Q){if(this.validateInstanceId(A),this._instanceInfo[A].visible===Q)return this;return this._instanceInfo[A].visible=Q,this._visibilityChanged=!0,this}getVisibleAt(A){return this.validateInstanceId(A),this._instanceInfo[A].visible}setGeometryIdAt(A,Q){return this.validateInstanceId(A),this.validateGeometryId(Q),this._instanceInfo[A].geometryIndex=Q,this}getGeometryIdAt(A){return this.validateInstanceId(A),this._instanceInfo[A].geometryIndex}getGeometryRangeAt(A,Q={}){this.validateGeometryId(A);let E=this._geometryInfo[A];return Q.vertexStart=E.vertexStart,Q.vertexCount=E.vertexCount,Q.reservedVertexCount=E.reservedVertexCount,Q.indexStart=E.indexStart,Q.indexCount=E.indexCount,Q.reservedIndexCount=E.reservedIndexCount,Q.start=E.start,Q.count=E.count,Q}setInstanceCount(A){let Q=this._availableInstanceIds,E=this._instanceInfo;Q.sort(qY);while(Q[Q.length-1]===E.length)E.pop(),Q.pop();if(A<E.length)throw new Error(`BatchedMesh: Instance ids outside the range ${A} are being used. Cannot shrink instance count.`);let B=new Int32Array(A),I=new Int32Array(A);B1(this._multiDrawCounts,B),B1(this._multiDrawStarts,I),this._multiDrawCounts=B,this._multiDrawStarts=I,this._maxInstanceCount=A;let C=this._indirectTexture,K=this._matricesTexture,J=this._colorsTexture;if(C.dispose(),this._initIndirectTexture(),B1(C.image.data,this._indirectTexture.image.data),K.dispose(),this._initMatricesTexture(),B1(K.image.data,this._matricesTexture.image.data),J)J.dispose(),this._initColorsTexture(),B1(J.image.data,this._colorsTexture.image.data)}setGeometrySize(A,Q){let E=[...this._geometryInfo].filter((K)=>K.active);if(Math.max(...E.map((K)=>K.vertexStart+K.reservedVertexCount))>A)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${Q}. Cannot shrink further.`);if(this.geometry.index){if(Math.max(...E.map((J)=>J.indexStart+J.reservedIndexCount))>Q)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${Q}. Cannot shrink further.`)}let I=this.geometry;if(I.dispose(),this._maxVertexCount=A,this._maxIndexCount=Q,this._geometryInitialized)this._geometryInitialized=!1,this.geometry=new hA,this._initializeGeometry(I);let C=this.geometry;if(I.index)B1(I.index.array,C.index.array);for(let K in I.attributes)B1(I.attributes[K].array,C.attributes[K].array)}raycast(A,Q){let E=this._instanceInfo,B=this._geometryInfo,I=this.matrixWorld,C=this.geometry;if(AE.material=this.material,AE.geometry.index=C.index,AE.geometry.attributes=C.attributes,AE.geometry.boundingBox===null)AE.geometry.boundingBox=new g0;if(AE.geometry.boundingSphere===null)AE.geometry.boundingSphere=new KQ;for(let K=0,J=E.length;K<J;K++){if(!E[K].visible||!E[K].active)continue;let U=E[K].geometryIndex,Y=B[U];AE.geometry.setDrawRange(Y.start,Y.count),this.getMatrixAt(K,AE.matrixWorld).premultiply(I),this.getBoundingBoxAt(U,AE.geometry.boundingBox),this.getBoundingSphereAt(U,AE.geometry.boundingSphere),AE.raycast(A,XJ);for(let H=0,R=XJ.length;H<R;H++){let O=XJ[H];O.object=this,O.batchId=K,Q.push(O)}XJ.length=0}AE.material=null,AE.geometry.index=null,AE.geometry.attributes={},AE.geometry.setDrawRange(0,1/0)}copy(A){if(super.copy(A),this.geometry=A.geometry.clone(),this.perObjectFrustumCulled=A.perObjectFrustumCulled,this.sortObjects=A.sortObjects,this.boundingBox=A.boundingBox!==null?A.boundingBox.clone():null,this.boundingSphere=A.boundingSphere!==null?A.boundingSphere.clone():null,this._geometryInfo=A._geometryInfo.map((Q)=>({...Q,boundingBox:Q.boundingBox!==null?Q.boundingBox.clone():null,boundingSphere:Q.boundingSphere!==null?Q.boundingSphere.clone():null})),this._instanceInfo=A._instanceInfo.map((Q)=>({...Q})),this._maxInstanceCount=A._maxInstanceCount,this._maxVertexCount=A._maxVertexCount,this._maxIndexCount=A._maxIndexCount,this._geometryInitialized=A._geometryInitialized,this._geometryCount=A._geometryCount,this._multiDrawCounts=A._multiDrawCounts.slice(),this._multiDrawStarts=A._multiDrawStarts.slice(),this._matricesTexture=A._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null)this._colorsTexture=A._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice();return this}dispose(){if(this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null)this._colorsTexture.dispose(),this._colorsTexture=null;return this}onBeforeRender(A,Q,E,B,I){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let C=B.getIndex(),K=C===null?1:C.array.BYTES_PER_ELEMENT,J=this._instanceInfo,U=this._multiDrawStarts,Y=this._multiDrawCounts,H=this._geometryInfo,R=this.perObjectFrustumCulled,O=this._indirectTexture,N=O.image.data;if(R)NE.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse).multiply(this.matrixWorld),FY.setFromProjectionMatrix(NE,A.coordinateSystem);let $=0;if(this.sortObjects){NE.copy(this.matrixWorld).invert(),i6.setFromMatrixPosition(E.matrixWorld).applyMatrix4(NE),GZ.set(0,0,-1).transformDirection(E.matrixWorld).transformDirection(NE);for(let Z=0,G=J.length;Z<G;Z++)if(J[Z].visible&&J[Z].active){let X=J[Z].geometryIndex;this.getMatrixAt(Z,NE),this.getBoundingSphereAt(X,E1).applyMatrix4(NE);let q=!1;if(R)q=!FY.intersectsSphere(E1);if(!q){let M=H[X],F=DL.subVectors(E1.center,i6).dot(GZ);DY.push(M.start,M.count,F,Z)}}let L=DY.list,W=this.customSort;if(W===null)L.sort(I.transparent?qL:LL);else W.call(this,L,E);for(let Z=0,G=L.length;Z<G;Z++){let X=L[Z];U[$]=X.start*K,Y[$]=X.count,N[$]=X.index,$++}DY.reset()}else for(let L=0,W=J.length;L<W;L++)if(J[L].visible&&J[L].active){let Z=J[L].geometryIndex,G=!1;if(R)this.getMatrixAt(L,NE),this.getBoundingSphereAt(Z,E1).applyMatrix4(NE),G=!FY.intersectsSphere(E1);if(!G){let X=H[Z];U[$]=X.start*K,Y[$]=X.count,N[$]=L,$++}}O.needsUpdate=!0,this._multiDrawCount=$,this._visibilityChanged=!1}onBeforeShadow(A,Q,E,B,I,C){this.onBeforeRender(A,null,B,I,C)}}class p0 extends $Q{constructor(A){super();this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new a(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.linewidth=A.linewidth,this.linecap=A.linecap,this.linejoin=A.linejoin,this.fog=A.fog,this}}var yJ=/*@__PURE__*/new y,gJ=/*@__PURE__*/new y,WZ=/*@__PURE__*/new RA,o6=/*@__PURE__*/new qE,$J=/*@__PURE__*/new KQ,MY=/*@__PURE__*/new y,XZ=/*@__PURE__*/new y;class VQ extends I0{constructor(A=new hA,Q=new p0){super();this.isLine=!0,this.type="Line",this.geometry=A,this.material=Q,this.updateMorphTargets()}copy(A,Q){return super.copy(A,Q),this.material=Array.isArray(A.material)?A.material.slice():A.material,this.geometry=A.geometry,this}computeLineDistances(){let A=this.geometry;if(A.index===null){let Q=A.attributes.position,E=[0];for(let B=1,I=Q.count;B<I;B++)yJ.fromBufferAttribute(Q,B-1),gJ.fromBufferAttribute(Q,B),E[B]=E[B-1],E[B]+=yJ.distanceTo(gJ);A.setAttribute("lineDistance",new PA(E,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(A,Q){let E=this.geometry,B=this.matrixWorld,I=A.params.Line.threshold,C=E.drawRange;if(E.boundingSphere===null)E.computeBoundingSphere();if($J.copy(E.boundingSphere),$J.applyMatrix4(B),$J.radius+=I,A.ray.intersectsSphere($J)===!1)return;WZ.copy(B).invert(),o6.copy(A.ray).applyMatrix4(WZ);let K=I/((this.scale.x+this.scale.y+this.scale.z)/3),J=K*K,U=this.isLineSegments?2:1,Y=E.index,R=E.attributes.position;if(Y!==null){let O=Math.max(0,C.start),N=Math.min(Y.count,C.start+C.count);for(let $=O,L=N-1;$<L;$+=U){let W=Y.getX($),Z=Y.getX($+1),G=LJ(this,A,o6,J,W,Z,$);if(G)Q.push(G)}if(this.isLineLoop){let $=Y.getX(N-1),L=Y.getX(O),W=LJ(this,A,o6,J,$,L,N-1);if(W)Q.push(W)}}else{let O=Math.max(0,C.start),N=Math.min(R.count,C.start+C.count);for(let $=O,L=N-1;$<L;$+=U){let W=LJ(this,A,o6,J,$,$+1,$);if(W)Q.push(W)}if(this.isLineLoop){let $=LJ(this,A,o6,J,N-1,O,N-1);if($)Q.push($)}}}updateMorphTargets(){let Q=this.geometry.morphAttributes,E=Object.keys(Q);if(E.length>0){let B=Q[E[0]];if(B!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,C=B.length;I<C;I++){let K=B[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=I}}}}}function LJ(A,Q,E,B,I,C,K){let J=A.geometry.attributes.position;if(yJ.fromBufferAttribute(J,I),gJ.fromBufferAttribute(J,C),E.distanceSqToSegment(yJ,gJ,MY,XZ)>B)return;MY.applyMatrix4(A.matrixWorld);let Y=Q.ray.origin.distanceTo(MY);if(Y<Q.near||Y>Q.far)return;return{distance:Y,point:XZ.clone().applyMatrix4(A.matrixWorld),index:K,face:null,faceIndex:null,barycoord:null,object:A}}var $Z=/*@__PURE__*/new y,LZ=/*@__PURE__*/new y;class RQ extends VQ{constructor(A,Q){super(A,Q);this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let A=this.geometry;if(A.index===null){let Q=A.attributes.position,E=[];for(let B=0,I=Q.count;B<I;B+=2)$Z.fromBufferAttribute(Q,B),LZ.fromBufferAttribute(Q,B+1),E[B]=B===0?0:E[B-1],E[B+1]=E[B]+$Z.distanceTo(LZ);A.setAttribute("lineDistance",new PA(E,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class l8 extends VQ{constructor(A,Q){super(A,Q);this.isLineLoop=!0,this.type="LineLoop"}}class aE extends $Q{constructor(A){super();this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new a(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.alphaMap=A.alphaMap,this.size=A.size,this.sizeAttenuation=A.sizeAttenuation,this.fog=A.fog,this}}var qZ=/*@__PURE__*/new RA,jY=/*@__PURE__*/new qE,qJ=/*@__PURE__*/new KQ,FJ=/*@__PURE__*/new y;class GB extends I0{constructor(A=new hA,Q=new aE){super();this.isPoints=!0,this.type="Points",this.geometry=A,this.material=Q,this.updateMorphTargets()}copy(A,Q){return super.copy(A,Q),this.material=Array.isArray(A.material)?A.material.slice():A.material,this.geometry=A.geometry,this}raycast(A,Q){let E=this.geometry,B=this.matrixWorld,I=A.params.Points.threshold,C=E.drawRange;if(E.boundingSphere===null)E.computeBoundingSphere();if(qJ.copy(E.boundingSphere),qJ.applyMatrix4(B),qJ.radius+=I,A.ray.intersectsSphere(qJ)===!1)return;qZ.copy(B).invert(),jY.copy(A.ray).applyMatrix4(qZ);let K=I/((this.scale.x+this.scale.y+this.scale.z)/3),J=K*K,U=E.index,H=E.attributes.position;if(U!==null){let R=Math.max(0,C.start),O=Math.min(U.count,C.start+C.count);for(let N=R,$=O;N<$;N++){let L=U.getX(N);FJ.fromBufferAttribute(H,L),FZ(FJ,L,J,B,A,Q,this)}}else{let R=Math.max(0,C.start),O=Math.min(H.count,C.start+C.count);for(let N=R,$=O;N<$;N++)FJ.fromBufferAttribute(H,N),FZ(FJ,N,J,B,A,Q,this)}}updateMorphTargets(){let Q=this.geometry.morphAttributes,E=Object.keys(Q);if(E.length>0){let B=Q[E[0]];if(B!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,C=B.length;I<C;I++){let K=B[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=I}}}}}function FZ(A,Q,E,B,I,C,K){let J=jY.distanceSqToPoint(A);if(J<E){let U=new y;jY.closestPointToPoint(A,U),U.applyMatrix4(B);let Y=I.ray.origin.distanceTo(U);if(Y<I.near||Y>I.far)return;C.push({distance:Y,distanceToRay:Math.sqrt(J),point:U,index:Q,face:null,faceIndex:null,barycoord:null,object:K})}}class _9 extends EQ{constructor(A,Q,E,B,I,C,K,J,U){super(A,Q,E,B,I,C,K,J,U);this.isVideoTexture=!0,this.minFilter=C!==void 0?C:1006,this.magFilter=I!==void 0?I:1006,this.generateMipmaps=!1;let Y=this;function H(){Y.needsUpdate=!0,A.requestVideoFrameCallback(H)}if("requestVideoFrameCallback"in A)A.requestVideoFrameCallback(H)}clone(){return new this.constructor(this.image).copy(this)}update(){let A=this.image;if("requestVideoFrameCallback"in A===!1&&A.readyState>=A.HAVE_CURRENT_DATA)this.needsUpdate=!0}}class kO extends _9{constructor(A,Q,E,B,I,C,K,J){super({},A,Q,E,B,I,C,K,J);this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(A){this.image=A,this.needsUpdate=!0}}class d8 extends EQ{constructor(A,Q){super({width:A,height:Q});this.isFramebufferTexture=!0,this.magFilter=1003,this.minFilter=1003,this.generateMipmaps=!1,this.needsUpdate=!0}}class yE extends EQ{constructor(A,Q,E,B,I,C,K,J,U,Y,H,R){super(null,C,K,J,U,Y,B,I,H,R);this.isCompressedTexture=!0,this.image={width:Q,height:E},this.mipmaps=A,this.flipY=!1,this.generateMipmaps=!1}}class _C extends yE{constructor(A,Q,E,B,I,C){super(A,Q,E,I,C);this.isCompressedArrayTexture=!0,this.image.depth=B,this.wrapR=1001,this.layerUpdates=/*@__PURE__*/new Set}addLayerUpdate(A){this.layerUpdates.add(A)}clearLayerUpdates(){this.layerUpdates.clear()}}class kC extends yE{constructor(A,Q,E){super(void 0,A[0].width,A[0].height,Q,E,301);this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=A}}class EI extends EQ{constructor(A,Q,E,B,I,C,K,J,U){super(A,Q,E,B,I,C,K,J,U);this.isCanvasTexture=!0,this.needsUpdate=!0}}class IE extends EQ{constructor(A,Q,E,B,I,C,K,J,U,Y=1026){if(Y!==1026&&Y!==1027)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");if(E===void 0&&Y===1026)E=1014;if(E===void 0&&Y===1027)E=1020;super(null,B,I,C,K,J,Y,E,U);this.isDepthTexture=!0,this.image={width:A,height:Q},this.magFilter=K!==void 0?K:1003,this.minFilter=J!==void 0?J:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(A){return super.copy(A),this.compareFunction=A.compareFunction,this}toJSON(A){let Q=super.toJSON(A);if(this.compareFunction!==null)Q.compareFunction=this.compareFunction;return Q}}class rQ{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(A,Q){let E=this.getUtoTmapping(A);return this.getPoint(E,Q)}getPoints(A=5){let Q=[];for(let E=0;E<=A;E++)Q.push(this.getPoint(E/A));return Q}getSpacedPoints(A=5){let Q=[];for(let E=0;E<=A;E++)Q.push(this.getPointAt(E/A));return Q}getLength(){let A=this.getLengths();return A[A.length-1]}getLengths(A=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===A+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let Q=[],E,B=this.getPoint(0),I=0;Q.push(0);for(let C=1;C<=A;C++)E=this.getPoint(C/A),I+=E.distanceTo(B),Q.push(I),B=E;return this.cacheArcLengths=Q,Q}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(A,Q){let E=this.getLengths(),B=0,I=E.length,C;if(Q)C=Q;else C=A*E[I-1];let K=0,J=I-1,U;while(K<=J)if(B=Math.floor(K+(J-K)/2),U=E[B]-C,U<0)K=B+1;else if(U>0)J=B-1;else{J=B;break}if(B=J,E[B]===C)return B/(I-1);let Y=E[B],R=E[B+1]-Y,O=(C-Y)/R;return(B+O)/(I-1)}getTangent(A,Q){let B=A-0.0001,I=A+0.0001;if(B<0)B=0;if(I>1)I=1;let C=this.getPoint(B),K=this.getPoint(I),J=Q||(C.isVector2?new AA:new y);return J.copy(K).sub(C).normalize(),J}getTangentAt(A,Q){let E=this.getUtoTmapping(A);return this.getTangent(E,Q)}computeFrenetFrames(A,Q){let E=new y,B=[],I=[],C=[],K=new y,J=new RA;for(let O=0;O<=A;O++){let N=O/A;B[O]=this.getTangentAt(N,new y)}I[0]=new y,C[0]=new y;let U=Number.MAX_VALUE,Y=Math.abs(B[0].x),H=Math.abs(B[0].y),R=Math.abs(B[0].z);if(Y<=U)U=Y,E.set(1,0,0);if(H<=U)U=H,E.set(0,1,0);if(R<=U)E.set(0,0,1);K.crossVectors(B[0],E).normalize(),I[0].crossVectors(B[0],K),C[0].crossVectors(B[0],I[0]);for(let O=1;O<=A;O++){if(I[O]=I[O-1].clone(),C[O]=C[O-1].clone(),K.crossVectors(B[O-1],B[O]),K.length()>Number.EPSILON){K.normalize();let N=Math.acos(w0(B[O-1].dot(B[O]),-1,1));I[O].applyMatrix4(J.makeRotationAxis(K,N))}C[O].crossVectors(B[O],I[O])}if(Q===!0){let O=Math.acos(w0(I[0].dot(I[A]),-1,1));if(O/=A,B[0].dot(K.crossVectors(I[0],I[A]))>0)O=-O;for(let N=1;N<=A;N++)I[N].applyMatrix4(J.makeRotationAxis(B[N],O*N)),C[N].crossVectors(B[N],I[N])}return{tangents:B,normals:I,binormals:C}}clone(){return new this.constructor().copy(this)}copy(A){return this.arcLengthDivisions=A.arcLengthDivisions,this}toJSON(){let A={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return A.arcLengthDivisions=this.arcLengthDivisions,A.type=this.type,A}fromJSON(A){return this.arcLengthDivisions=A.arcLengthDivisions,this}}class g1 extends rQ{constructor(A=0,Q=0,E=1,B=1,I=0,C=Math.PI*2,K=!1,J=0){super();this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=A,this.aY=Q,this.xRadius=E,this.yRadius=B,this.aStartAngle=I,this.aEndAngle=C,this.aClockwise=K,this.aRotation=J}getPoint(A,Q=new AA){let E=Q,B=Math.PI*2,I=this.aEndAngle-this.aStartAngle,C=Math.abs(I)<Number.EPSILON;while(I<0)I+=B;while(I>B)I-=B;if(I<Number.EPSILON)if(C)I=0;else I=B;if(this.aClockwise===!0&&!C)if(I===B)I=-B;else I=I-B;let K=this.aStartAngle+A*I,J=this.aX+this.xRadius*Math.cos(K),U=this.aY+this.yRadius*Math.sin(K);if(this.aRotation!==0){let Y=Math.cos(this.aRotation),H=Math.sin(this.aRotation),R=J-this.aX,O=U-this.aY;J=R*Y-O*H+this.aX,U=R*H+O*Y+this.aY}return E.set(J,U)}copy(A){return super.copy(A),this.aX=A.aX,this.aY=A.aY,this.xRadius=A.xRadius,this.yRadius=A.yRadius,this.aStartAngle=A.aStartAngle,this.aEndAngle=A.aEndAngle,this.aClockwise=A.aClockwise,this.aRotation=A.aRotation,this}toJSON(){let A=super.toJSON();return A.aX=this.aX,A.aY=this.aY,A.xRadius=this.xRadius,A.yRadius=this.yRadius,A.aStartAngle=this.aStartAngle,A.aEndAngle=this.aEndAngle,A.aClockwise=this.aClockwise,A.aRotation=this.aRotation,A}fromJSON(A){return super.fromJSON(A),this.aX=A.aX,this.aY=A.aY,this.xRadius=A.xRadius,this.yRadius=A.yRadius,this.aStartAngle=A.aStartAngle,this.aEndAngle=A.aEndAngle,this.aClockwise=A.aClockwise,this.aRotation=A.aRotation,this}}class k9 extends g1{constructor(A,Q,E,B,I,C){super(A,Q,E,E,B,I,C);this.isArcCurve=!0,this.type="ArcCurve"}}function SO(){let A=0,Q=0,E=0,B=0;function I(C,K,J,U){A=C,Q=J,E=-3*C+3*K-2*J-U,B=2*C-2*K+J+U}return{initCatmullRom:function(C,K,J,U,Y){I(K,J,Y*(J-C),Y*(U-K))},initNonuniformCatmullRom:function(C,K,J,U,Y,H,R){let O=(K-C)/Y-(J-C)/(Y+H)+(J-K)/H,N=(J-K)/H-(U-K)/(H+R)+(U-J)/R;O*=H,N*=H,I(K,J,O,N)},calc:function(C){let K=C*C,J=K*C;return A+Q*C+E*K+B*J}}}var DJ=/*@__PURE__*/new y,wY=/*@__PURE__*/new SO,_Y=/*@__PURE__*/new SO,kY=/*@__PURE__*/new SO;class S9 extends rQ{constructor(A=[],Q=!1,E="centripetal",B=0.5){super();this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=A,this.closed=Q,this.curveType=E,this.tension=B}getPoint(A,Q=new y){let E=Q,B=this.points,I=B.length,C=(I-(this.closed?0:1))*A,K=Math.floor(C),J=C-K;if(this.closed)K+=K>0?0:(Math.floor(Math.abs(K)/I)+1)*I;else if(J===0&&K===I-1)K=I-2,J=1;let U,Y;if(this.closed||K>0)U=B[(K-1)%I];else DJ.subVectors(B[0],B[1]).add(B[0]),U=DJ;let H=B[K%I],R=B[(K+1)%I];if(this.closed||K+2<I)Y=B[(K+2)%I];else DJ.subVectors(B[I-1],B[I-2]).add(B[I-1]),Y=DJ;if(this.curveType==="centripetal"||this.curveType==="chordal"){let O=this.curveType==="chordal"?0.5:0.25,N=Math.pow(U.distanceToSquared(H),O),$=Math.pow(H.distanceToSquared(R),O),L=Math.pow(R.distanceToSquared(Y),O);if($<0.0001)$=1;if(N<0.0001)N=$;if(L<0.0001)L=$;wY.initNonuniformCatmullRom(U.x,H.x,R.x,Y.x,N,$,L),_Y.initNonuniformCatmullRom(U.y,H.y,R.y,Y.y,N,$,L),kY.initNonuniformCatmullRom(U.z,H.z,R.z,Y.z,N,$,L)}else if(this.curveType==="catmullrom")wY.initCatmullRom(U.x,H.x,R.x,Y.x,this.tension),_Y.initCatmullRom(U.y,H.y,R.y,Y.y,this.tension),kY.initCatmullRom(U.z,H.z,R.z,Y.z,this.tension);return E.set(wY.calc(J),_Y.calc(J),kY.calc(J)),E}copy(A){super.copy(A),this.points=[];for(let Q=0,E=A.points.length;Q<E;Q++){let B=A.points[Q];this.points.push(B.clone())}return this.closed=A.closed,this.curveType=A.curveType,this.tension=A.tension,this}toJSON(){let A=super.toJSON();A.points=[];for(let Q=0,E=this.points.length;Q<E;Q++){let B=this.points[Q];A.points.push(B.toArray())}return A.closed=this.closed,A.curveType=this.curveType,A.tension=this.tension,A}fromJSON(A){super.fromJSON(A),this.points=[];for(let Q=0,E=A.points.length;Q<E;Q++){let B=A.points[Q];this.points.push(new y().fromArray(B))}return this.closed=A.closed,this.curveType=A.curveType,this.tension=A.tension,this}}function DZ(A,Q,E,B,I){let C=(B-Q)*0.5,K=(I-E)*0.5,J=A*A,U=A*J;return(2*E-2*B+C+K)*U+(-3*E+3*B-2*C-K)*J+C*A+E}function wL(A,Q){let E=1-A;return E*E*Q}function _L(A,Q){return 2*(1-A)*A*Q}function kL(A,Q){return A*A*Q}function e6(A,Q,E,B){return wL(A,Q)+_L(A,E)+kL(A,B)}function SL(A,Q){let E=1-A;return E*E*E*Q}function TL(A,Q){let E=1-A;return 3*E*E*A*Q}function zL(A,Q){return 3*(1-A)*A*A*Q}function PL(A,Q){return A*A*A*Q}function AC(A,Q,E,B,I){return SL(A,Q)+TL(A,E)+zL(A,B)+PL(A,I)}class SC extends rQ{constructor(A=new AA,Q=new AA,E=new AA,B=new AA){super();this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=A,this.v1=Q,this.v2=E,this.v3=B}getPoint(A,Q=new AA){let E=Q,B=this.v0,I=this.v1,C=this.v2,K=this.v3;return E.set(AC(A,B.x,I.x,C.x,K.x),AC(A,B.y,I.y,C.y,K.y)),E}copy(A){return super.copy(A),this.v0.copy(A.v0),this.v1.copy(A.v1),this.v2.copy(A.v2),this.v3.copy(A.v3),this}toJSON(){let A=super.toJSON();return A.v0=this.v0.toArray(),A.v1=this.v1.toArray(),A.v2=this.v2.toArray(),A.v3=this.v3.toArray(),A}fromJSON(A){return super.fromJSON(A),this.v0.fromArray(A.v0),this.v1.fromArray(A.v1),this.v2.fromArray(A.v2),this.v3.fromArray(A.v3),this}}class T9 extends rQ{constructor(A=new y,Q=new y,E=new y,B=new y){super();this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=A,this.v1=Q,this.v2=E,this.v3=B}getPoint(A,Q=new y){let E=Q,B=this.v0,I=this.v1,C=this.v2,K=this.v3;return E.set(AC(A,B.x,I.x,C.x,K.x),AC(A,B.y,I.y,C.y,K.y),AC(A,B.z,I.z,C.z,K.z)),E}copy(A){return super.copy(A),this.v0.copy(A.v0),this.v1.copy(A.v1),this.v2.copy(A.v2),this.v3.copy(A.v3),this}toJSON(){let A=super.toJSON();return A.v0=this.v0.toArray(),A.v1=this.v1.toArray(),A.v2=this.v2.toArray(),A.v3=this.v3.toArray(),A}fromJSON(A){return super.fromJSON(A),this.v0.fromArray(A.v0),this.v1.fromArray(A.v1),this.v2.fromArray(A.v2),this.v3.fromArray(A.v3),this}}class TC extends rQ{constructor(A=new AA,Q=new AA){super();this.isLineCurve=!0,this.type="LineCurve",this.v1=A,this.v2=Q}getPoint(A,Q=new AA){let E=Q;if(A===1)E.copy(this.v2);else E.copy(this.v2).sub(this.v1),E.multiplyScalar(A).add(this.v1);return E}getPointAt(A,Q){return this.getPoint(A,Q)}getTangent(A,Q=new AA){return Q.subVectors(this.v2,this.v1).normalize()}getTangentAt(A,Q){return this.getTangent(A,Q)}copy(A){return super.copy(A),this.v1.copy(A.v1),this.v2.copy(A.v2),this}toJSON(){let A=super.toJSON();return A.v1=this.v1.toArray(),A.v2=this.v2.toArray(),A}fromJSON(A){return super.fromJSON(A),this.v1.fromArray(A.v1),this.v2.fromArray(A.v2),this}}class z9 extends rQ{constructor(A=new y,Q=new y){super();this.isLineCurve3=!0,this.type="LineCurve3",this.v1=A,this.v2=Q}getPoint(A,Q=new y){let E=Q;if(A===1)E.copy(this.v2);else E.copy(this.v2).sub(this.v1),E.multiplyScalar(A).add(this.v1);return E}getPointAt(A,Q){return this.getPoint(A,Q)}getTangent(A,Q=new y){return Q.subVectors(this.v2,this.v1).normalize()}getTangentAt(A,Q){return this.getTangent(A,Q)}copy(A){return super.copy(A),this.v1.copy(A.v1),this.v2.copy(A.v2),this}toJSON(){let A=super.toJSON();return A.v1=this.v1.toArray(),A.v2=this.v2.toArray(),A}fromJSON(A){return super.fromJSON(A),this.v1.fromArray(A.v1),this.v2.fromArray(A.v2),this}}class zC extends rQ{constructor(A=new AA,Q=new AA,E=new AA){super();this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=A,this.v1=Q,this.v2=E}getPoint(A,Q=new AA){let E=Q,B=this.v0,I=this.v1,C=this.v2;return E.set(e6(A,B.x,I.x,C.x),e6(A,B.y,I.y,C.y)),E}copy(A){return super.copy(A),this.v0.copy(A.v0),this.v1.copy(A.v1),this.v2.copy(A.v2),this}toJSON(){let A=super.toJSON();return A.v0=this.v0.toArray(),A.v1=this.v1.toArray(),A.v2=this.v2.toArray(),A}fromJSON(A){return super.fromJSON(A),this.v0.fromArray(A.v0),this.v1.fromArray(A.v1),this.v2.fromArray(A.v2),this}}class PC extends rQ{constructor(A=new y,Q=new y,E=new y){super();this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=A,this.v1=Q,this.v2=E}getPoint(A,Q=new y){let E=Q,B=this.v0,I=this.v1,C=this.v2;return E.set(e6(A,B.x,I.x,C.x),e6(A,B.y,I.y,C.y),e6(A,B.z,I.z,C.z)),E}copy(A){return super.copy(A),this.v0.copy(A.v0),this.v1.copy(A.v1),this.v2.copy(A.v2),this}toJSON(){let A=super.toJSON();return A.v0=this.v0.toArray(),A.v1=this.v1.toArray(),A.v2=this.v2.toArray(),A}fromJSON(A){return super.fromJSON(A),this.v0.fromArray(A.v0),this.v1.fromArray(A.v1),this.v2.fromArray(A.v2),this}}class VC extends rQ{constructor(A=[]){super();this.isSplineCurve=!0,this.type="SplineCurve",this.points=A}getPoint(A,Q=new AA){let E=Q,B=this.points,I=(B.length-1)*A,C=Math.floor(I),K=I-C,J=B[C===0?C:C-1],U=B[C],Y=B[C>B.length-2?B.length-1:C+1],H=B[C>B.length-3?B.length-1:C+2];return E.set(DZ(K,J.x,U.x,Y.x,H.x),DZ(K,J.y,U.y,Y.y,H.y)),E}copy(A){super.copy(A),this.points=[];for(let Q=0,E=A.points.length;Q<E;Q++){let B=A.points[Q];this.points.push(B.clone())}return this}toJSON(){let A=super.toJSON();A.points=[];for(let Q=0,E=this.points.length;Q<E;Q++){let B=this.points[Q];A.points.push(B.toArray())}return A}fromJSON(A){super.fromJSON(A),this.points=[];for(let Q=0,E=A.points.length;Q<E;Q++){let B=A.points[Q];this.points.push(new AA().fromArray(B))}return this}}var xJ=/*@__PURE__*/Object.freeze({__proto__:null,ArcCurve:k9,CatmullRomCurve3:S9,CubicBezierCurve:SC,CubicBezierCurve3:T9,EllipseCurve:g1,LineCurve:TC,LineCurve3:z9,QuadraticBezierCurve:zC,QuadraticBezierCurve3:PC,SplineCurve:VC});class P9 extends rQ{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(A){this.curves.push(A)}closePath(){let A=this.curves[0].getPoint(0),Q=this.curves[this.curves.length-1].getPoint(1);if(!A.equals(Q)){let E=A.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new xJ[E](Q,A))}return this}getPoint(A,Q){let E=A*this.getLength(),B=this.getCurveLengths(),I=0;while(I<B.length){if(B[I]>=E){let C=B[I]-E,K=this.curves[I],J=K.getLength(),U=J===0?0:1-C/J;return K.getPointAt(U,Q)}I++}return null}getLength(){let A=this.getCurveLengths();return A[A.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let A=[],Q=0;for(let E=0,B=this.curves.length;E<B;E++)Q+=this.curves[E].getLength(),A.push(Q);return this.cacheLengths=A,A}getSpacedPoints(A=40){let Q=[];for(let E=0;E<=A;E++)Q.push(this.getPoint(E/A));if(this.autoClose)Q.push(Q[0]);return Q}getPoints(A=12){let Q=[],E;for(let B=0,I=this.curves;B<I.length;B++){let C=I[B],K=C.isEllipseCurve?A*2:C.isLineCurve||C.isLineCurve3?1:C.isSplineCurve?A*C.points.length:A,J=C.getPoints(K);for(let U=0;U<J.length;U++){let Y=J[U];if(E&&E.equals(Y))continue;Q.push(Y),E=Y}}if(this.autoClose&&Q.length>1&&!Q[Q.length-1].equals(Q[0]))Q.push(Q[0]);return Q}copy(A){super.copy(A),this.curves=[];for(let Q=0,E=A.curves.length;Q<E;Q++){let B=A.curves[Q];this.curves.push(B.clone())}return this.autoClose=A.autoClose,this}toJSON(){let A=super.toJSON();A.autoClose=this.autoClose,A.curves=[];for(let Q=0,E=this.curves.length;Q<E;Q++){let B=this.curves[Q];A.curves.push(B.toJSON())}return A}fromJSON(A){super.fromJSON(A),this.autoClose=A.autoClose,this.curves=[];for(let Q=0,E=A.curves.length;Q<E;Q++){let B=A.curves[Q];this.curves.push(new xJ[B.type]().fromJSON(B))}return this}}class TI extends P9{constructor(A){super();if(this.type="Path",this.currentPoint=new AA,A)this.setFromPoints(A)}setFromPoints(A){this.moveTo(A[0].x,A[0].y);for(let Q=1,E=A.length;Q<E;Q++)this.lineTo(A[Q].x,A[Q].y);return this}moveTo(A,Q){return this.currentPoint.set(A,Q),this}lineTo(A,Q){let E=new TC(this.currentPoint.clone(),new AA(A,Q));return this.curves.push(E),this.currentPoint.set(A,Q),this}quadraticCurveTo(A,Q,E,B){let I=new zC(this.currentPoint.clone(),new AA(A,Q),new AA(E,B));return this.curves.push(I),this.currentPoint.set(E,B),this}bezierCurveTo(A,Q,E,B,I,C){let K=new SC(this.currentPoint.clone(),new AA(A,Q),new AA(E,B),new AA(I,C));return this.curves.push(K),this.currentPoint.set(I,C),this}splineThru(A){let Q=[this.currentPoint.clone()].concat(A),E=new VC(Q);return this.curves.push(E),this.currentPoint.copy(A[A.length-1]),this}arc(A,Q,E,B,I,C){let K=this.currentPoint.x,J=this.currentPoint.y;return this.absarc(A+K,Q+J,E,B,I,C),this}absarc(A,Q,E,B,I,C){return this.absellipse(A,Q,E,E,B,I,C),this}ellipse(A,Q,E,B,I,C,K,J){let U=this.currentPoint.x,Y=this.currentPoint.y;return this.absellipse(A+U,Q+Y,E,B,I,C,K,J),this}absellipse(A,Q,E,B,I,C,K,J){let U=new g1(A,Q,E,B,I,C,K,J);if(this.curves.length>0){let H=U.getPoint(0);if(!H.equals(this.currentPoint))this.lineTo(H.x,H.y)}this.curves.push(U);let Y=U.getPoint(1);return this.currentPoint.copy(Y),this}copy(A){return super.copy(A),this.currentPoint.copy(A.currentPoint),this}toJSON(){let A=super.toJSON();return A.currentPoint=this.currentPoint.toArray(),A}fromJSON(A){return super.fromJSON(A),this.currentPoint.fromArray(A.currentPoint),this}}class n8 extends hA{constructor(A=[new AA(0,-0.5),new AA(0.5,0),new AA(0,0.5)],Q=12,E=0,B=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:A,segments:Q,phiStart:E,phiLength:B},Q=Math.floor(Q),B=w0(B,0,Math.PI*2);let I=[],C=[],K=[],J=[],U=[],Y=1/Q,H=new y,R=new AA,O=new y,N=new y,$=new y,L=0,W=0;for(let Z=0;Z<=A.length-1;Z++)switch(Z){case 0:L=A[Z+1].x-A[Z].x,W=A[Z+1].y-A[Z].y,O.x=W*1,O.y=-L,O.z=W*0,$.copy(O),O.normalize(),J.push(O.x,O.y,O.z);break;case A.length-1:J.push($.x,$.y,$.z);break;default:L=A[Z+1].x-A[Z].x,W=A[Z+1].y-A[Z].y,O.x=W*1,O.y=-L,O.z=W*0,N.copy(O),O.x+=$.x,O.y+=$.y,O.z+=$.z,O.normalize(),J.push(O.x,O.y,O.z),$.copy(N)}for(let Z=0;Z<=Q;Z++){let G=E+Z*Y*B,X=Math.sin(G),q=Math.cos(G);for(let M=0;M<=A.length-1;M++){H.x=A[M].x*X,H.y=A[M].y,H.z=A[M].x*q,C.push(H.x,H.y,H.z),R.x=Z/Q,R.y=M/(A.length-1),K.push(R.x,R.y);let F=J[3*M+0]*X,D=J[3*M+1],_=J[3*M+0]*q;U.push(F,D,_)}}for(let Z=0;Z<Q;Z++)for(let G=0;G<A.length-1;G++){let X=G+Z*A.length,q=X,M=X+A.length,F=X+A.length+1,D=X+1;I.push(q,M,D),I.push(F,D,M)}this.setIndex(I),this.setAttribute("position",new PA(C,3)),this.setAttribute("uv",new PA(K,2)),this.setAttribute("normal",new PA(U,3))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new n8(A.points,A.segments,A.phiStart,A.phiLength)}}class jC extends n8{constructor(A=1,Q=1,E=4,B=8){let I=new TI;I.absarc(0,-Q/2,A,Math.PI*1.5,0),I.absarc(0,Q/2,A,0,Math.PI*0.5);super(I.getPoints(E),B);this.type="CapsuleGeometry",this.parameters={radius:A,length:Q,capSegments:E,radialSegments:B}}static fromJSON(A){return new jC(A.radius,A.length,A.capSegments,A.radialSegments)}}class vC extends hA{constructor(A=1,Q=32,E=0,B=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:A,segments:Q,thetaStart:E,thetaLength:B},Q=Math.max(3,Q);let I=[],C=[],K=[],J=[],U=new y,Y=new AA;C.push(0,0,0),K.push(0,0,1),J.push(0.5,0.5);for(let H=0,R=3;H<=Q;H++,R+=3){let O=E+H/Q*B;U.x=A*Math.cos(O),U.y=A*Math.sin(O),C.push(U.x,U.y,U.z),K.push(0,0,1),Y.x=(C[R]/A+1)/2,Y.y=(C[R+1]/A+1)/2,J.push(Y.x,Y.y)}for(let H=1;H<=Q;H++)I.push(H,H+1,0);this.setIndex(I),this.setAttribute("position",new PA(C,3)),this.setAttribute("normal",new PA(K,3)),this.setAttribute("uv",new PA(J,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new vC(A.radius,A.segments,A.thetaStart,A.thetaLength)}}class bB extends hA{constructor(A=1,Q=1,E=1,B=32,I=1,C=!1,K=0,J=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:A,radiusBottom:Q,height:E,radialSegments:B,heightSegments:I,openEnded:C,thetaStart:K,thetaLength:J};let U=this;B=Math.floor(B),I=Math.floor(I);let Y=[],H=[],R=[],O=[],N=0,$=[],L=E/2,W=0;if(Z(),C===!1){if(A>0)G(!0);if(Q>0)G(!1)}this.setIndex(Y),this.setAttribute("position",new PA(H,3)),this.setAttribute("normal",new PA(R,3)),this.setAttribute("uv",new PA(O,2));function Z(){let X=new y,q=new y,M=0,F=(Q-A)/E;for(let D=0;D<=I;D++){let _=[],w=D/I,k=w*(Q-A)+A;for(let T=0;T<=B;T++){let z=T/B,j=z*J+K,v=Math.sin(j),g=Math.cos(j);q.x=k*v,q.y=-w*E+L,q.z=k*g,H.push(q.x,q.y,q.z),X.set(v,F,g).normalize(),R.push(X.x,X.y,X.z),O.push(z,1-w),_.push(N++)}$.push(_)}for(let D=0;D<B;D++)for(let _=0;_<I;_++){let w=$[_][D],k=$[_+1][D],T=$[_+1][D+1],z=$[_][D+1];if(A>0||_!==0)Y.push(w,k,z),M+=3;if(Q>0||_!==I-1)Y.push(k,T,z),M+=3}U.addGroup(W,M,0),W+=M}function G(X){let q=N,M=new AA,F=new y,D=0,_=X===!0?A:Q,w=X===!0?1:-1;for(let T=1;T<=B;T++)H.push(0,L*w,0),R.push(0,w,0),O.push(0.5,0.5),N++;let k=N;for(let T=0;T<=B;T++){let j=T/B*J+K,v=Math.cos(j),g=Math.sin(j);F.x=_*g,F.y=L*w,F.z=_*v,H.push(F.x,F.y,F.z),R.push(0,w,0),M.x=v*0.5+0.5,M.y=g*0.5*w+0.5,O.push(M.x,M.y),N++}for(let T=0;T<B;T++){let z=q+T,j=k+T;if(X===!0)Y.push(j,j+1,z);else Y.push(j+1,j,z);D+=3}U.addGroup(W,D,X===!0?1:2),W+=D}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new bB(A.radiusTop,A.radiusBottom,A.height,A.radialSegments,A.heightSegments,A.openEnded,A.thetaStart,A.thetaLength)}}class s8 extends bB{constructor(A=1,Q=1,E=32,B=1,I=!1,C=0,K=Math.PI*2){super(0,A,Q,E,B,I,C,K);this.type="ConeGeometry",this.parameters={radius:A,height:Q,radialSegments:E,heightSegments:B,openEnded:I,thetaStart:C,thetaLength:K}}static fromJSON(A){return new s8(A.radius,A.height,A.radialSegments,A.heightSegments,A.openEnded,A.thetaStart,A.thetaLength)}}class BI extends hA{constructor(A=[],Q=[],E=1,B=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:A,indices:Q,radius:E,detail:B};let I=[],C=[];if(K(B),U(E),Y(),this.setAttribute("position",new PA(I,3)),this.setAttribute("normal",new PA(I.slice(),3)),this.setAttribute("uv",new PA(C,2)),B===0)this.computeVertexNormals();else this.normalizeNormals();function K(Z){let G=new y,X=new y,q=new y;for(let M=0;M<Q.length;M+=3)O(Q[M+0],G),O(Q[M+1],X),O(Q[M+2],q),J(G,X,q,Z)}function J(Z,G,X,q){let M=q+1,F=[];for(let D=0;D<=M;D++){F[D]=[];let _=Z.clone().lerp(X,D/M),w=G.clone().lerp(X,D/M),k=M-D;for(let T=0;T<=k;T++)if(T===0&&D===M)F[D][T]=_;else F[D][T]=_.clone().lerp(w,T/k)}for(let D=0;D<M;D++)for(let _=0;_<2*(M-D)-1;_++){let w=Math.floor(_/2);if(_%2===0)R(F[D][w+1]),R(F[D+1][w]),R(F[D][w]);else R(F[D][w+1]),R(F[D+1][w+1]),R(F[D+1][w])}}function U(Z){let G=new y;for(let X=0;X<I.length;X+=3)G.x=I[X+0],G.y=I[X+1],G.z=I[X+2],G.normalize().multiplyScalar(Z),I[X+0]=G.x,I[X+1]=G.y,I[X+2]=G.z}function Y(){let Z=new y;for(let G=0;G<I.length;G+=3){Z.x=I[G+0],Z.y=I[G+1],Z.z=I[G+2];let X=L(Z)/2/Math.PI+0.5,q=W(Z)/Math.PI+0.5;C.push(X,1-q)}N(),H()}function H(){for(let Z=0;Z<C.length;Z+=6){let G=C[Z+0],X=C[Z+2],q=C[Z+4],M=Math.max(G,X,q),F=Math.min(G,X,q);if(M>0.9&&F<0.1){if(G<0.2)C[Z+0]+=1;if(X<0.2)C[Z+2]+=1;if(q<0.2)C[Z+4]+=1}}}function R(Z){I.push(Z.x,Z.y,Z.z)}function O(Z,G){let X=Z*3;G.x=A[X+0],G.y=A[X+1],G.z=A[X+2]}function N(){let Z=new y,G=new y,X=new y,q=new y,M=new AA,F=new AA,D=new AA;for(let _=0,w=0;_<I.length;_+=9,w+=6){Z.set(I[_+0],I[_+1],I[_+2]),G.set(I[_+3],I[_+4],I[_+5]),X.set(I[_+6],I[_+7],I[_+8]),M.set(C[w+0],C[w+1]),F.set(C[w+2],C[w+3]),D.set(C[w+4],C[w+5]),q.copy(Z).add(G).add(X).divideScalar(3);let k=L(q);$(M,w+0,Z,k),$(F,w+2,G,k),$(D,w+4,X,k)}}function $(Z,G,X,q){if(q<0&&Z.x===1)C[G]=Z.x-1;if(X.x===0&&X.z===0)C[G]=q/2/Math.PI+0.5}function L(Z){return Math.atan2(Z.z,-Z.x)}function W(Z){return Math.atan2(-Z.y,Math.sqrt(Z.x*Z.x+Z.z*Z.z))}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new BI(A.vertices,A.indices,A.radius,A.details)}}class hC extends BI{constructor(A=1,Q=0){let E=(1+Math.sqrt(5))/2,B=1/E,I=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-B,-E,0,-B,E,0,B,-E,0,B,E,-B,-E,0,-B,E,0,B,-E,0,B,E,0,-E,0,-B,E,0,-B,-E,0,B,E,0,B],C=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(I,C,A,Q);this.type="DodecahedronGeometry",this.parameters={radius:A,detail:Q}}static fromJSON(A){return new hC(A.radius,A.detail)}}var MJ=/*@__PURE__*/new y,wJ=/*@__PURE__*/new y,SY=/*@__PURE__*/new y,_J=/*@__PURE__*/new PQ;class V9 extends hA{constructor(A=null,Q=1){super();if(this.type="EdgesGeometry",this.parameters={geometry:A,thresholdAngle:Q},A!==null){let B=Math.pow(10,4),I=Math.cos(O1*Q),C=A.getIndex(),K=A.getAttribute("position"),J=C?C.count:K.count,U=[0,0,0],Y=["a","b","c"],H=new Array(3),R={},O=[];for(let N=0;N<J;N+=3){if(C)U[0]=C.getX(N),U[1]=C.getX(N+1),U[2]=C.getX(N+2);else U[0]=N,U[1]=N+1,U[2]=N+2;let{a:$,b:L,c:W}=_J;if($.fromBufferAttribute(K,U[0]),L.fromBufferAttribute(K,U[1]),W.fromBufferAttribute(K,U[2]),_J.getNormal(SY),H[0]=`${Math.round($.x*B)},${Math.round($.y*B)},${Math.round($.z*B)}`,H[1]=`${Math.round(L.x*B)},${Math.round(L.y*B)},${Math.round(L.z*B)}`,H[2]=`${Math.round(W.x*B)},${Math.round(W.y*B)},${Math.round(W.z*B)}`,H[0]===H[1]||H[1]===H[2]||H[2]===H[0])continue;for(let Z=0;Z<3;Z++){let G=(Z+1)%3,X=H[Z],q=H[G],M=_J[Y[Z]],F=_J[Y[G]],D=`${X}_${q}`,_=`${q}_${X}`;if(_ in R&&R[_]){if(SY.dot(R[_].normal)<=I)O.push(M.x,M.y,M.z),O.push(F.x,F.y,F.z);R[_]=null}else if(!(D in R))R[D]={index0:U[Z],index1:U[G],normal:SY.clone()}}}for(let N in R)if(R[N]){let{index0:$,index1:L}=R[N];MJ.fromBufferAttribute(K,$),wJ.fromBufferAttribute(K,L),O.push(MJ.x,MJ.y,MJ.z),O.push(wJ.x,wJ.y,wJ.z)}this.setAttribute("position",new PA(O,3))}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}}class TB extends TI{constructor(A){super(A);this.uuid=TE(),this.type="Shape",this.holes=[]}getPointsHoles(A){let Q=[];for(let E=0,B=this.holes.length;E<B;E++)Q[E]=this.holes[E].getPoints(A);return Q}extractPoints(A){return{shape:this.getPoints(A),holes:this.getPointsHoles(A)}}copy(A){super.copy(A),this.holes=[];for(let Q=0,E=A.holes.length;Q<E;Q++){let B=A.holes[Q];this.holes.push(B.clone())}return this}toJSON(){let A=super.toJSON();A.uuid=this.uuid,A.holes=[];for(let Q=0,E=this.holes.length;Q<E;Q++){let B=this.holes[Q];A.holes.push(B.toJSON())}return A}fromJSON(A){super.fromJSON(A),this.uuid=A.uuid,this.holes=[];for(let Q=0,E=A.holes.length;Q<E;Q++){let B=A.holes[Q];this.holes.push(new TI().fromJSON(B))}return this}}var VL={triangulate:function(A,Q,E=2){let B=Q&&Q.length,I=B?Q[0]*E:A.length,C=dR(A,0,I,E,!0),K=[];if(!C||C.next===C.prev)return K;let J,U,Y,H,R,O,N;if(B)C=gL(A,Q,C,E);if(A.length>80*E){J=Y=A[0],U=H=A[1];for(let $=E;$<I;$+=E){if(R=A[$],O=A[$+1],R<J)J=R;if(O<U)U=O;if(R>Y)Y=R;if(O>H)H=O}N=Math.max(Y-J,H-U),N=N!==0?32767/N:0}return QC(C,K,E,J,U,N,0),K}};function dR(A,Q,E,B,I){let C,K;if(I===sL(A,Q,E,B)>0)for(C=Q;C<E;C+=B)K=MZ(C,A[C],A[C+1],K);else for(C=E-B;C>=Q;C-=B)K=MZ(C,A[C],A[C+1],K);if(K&&j9(K,K.next))BC(K),K=K.next;return K}function Z1(A,Q){if(!A)return A;if(!Q)Q=A;let E=A,B;do if(B=!1,!E.steiner&&(j9(E,E.next)||XQ(E.prev,E,E.next)===0)){if(BC(E),E=Q=E.prev,E===E.next)break;B=!0}else E=E.next;while(B||E!==Q);return Q}function QC(A,Q,E,B,I,C,K){if(!A)return;if(!K&&C)pL(A,B,I,C);let J=A,U,Y;while(A.prev!==A.next){if(U=A.prev,Y=A.next,C?vL(A,B,I,C):jL(A)){Q.push(U.i/E|0),Q.push(A.i/E|0),Q.push(Y.i/E|0),BC(A),A=Y.next,J=Y.next;continue}if(A=Y,A===J){if(!K)QC(Z1(A),Q,E,B,I,C,1);else if(K===1)A=hL(Z1(A),Q,E),QC(A,Q,E,B,I,C,2);else if(K===2)yL(A,Q,E,B,I,C);break}}}function jL(A){let Q=A.prev,E=A,B=A.next;if(XQ(Q,E,B)>=0)return!1;let I=Q.x,C=E.x,K=B.x,J=Q.y,U=E.y,Y=B.y,H=I<C?I<K?I:K:C<K?C:K,R=J<U?J<Y?J:Y:U<Y?U:Y,O=I>C?I>K?I:K:C>K?C:K,N=J>U?J>Y?J:Y:U>Y?U:Y,$=B.next;while($!==Q){if($.x>=H&&$.x<=O&&$.y>=R&&$.y<=N&&_8(I,J,C,U,K,Y,$.x,$.y)&&XQ($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function vL(A,Q,E,B){let I=A.prev,C=A,K=A.next;if(XQ(I,C,K)>=0)return!1;let J=I.x,U=C.x,Y=K.x,H=I.y,R=C.y,O=K.y,N=J<U?J<Y?J:Y:U<Y?U:Y,$=H<R?H<O?H:O:R<O?R:O,L=J>U?J>Y?J:Y:U>Y?U:Y,W=H>R?H>O?H:O:R>O?R:O,Z=vY(N,$,Q,E,B),G=vY(L,W,Q,E,B),X=A.prevZ,q=A.nextZ;while(X&&X.z>=Z&&q&&q.z<=G){if(X.x>=N&&X.x<=L&&X.y>=$&&X.y<=W&&X!==I&&X!==K&&_8(J,H,U,R,Y,O,X.x,X.y)&&XQ(X.prev,X,X.next)>=0)return!1;if(X=X.prevZ,q.x>=N&&q.x<=L&&q.y>=$&&q.y<=W&&q!==I&&q!==K&&_8(J,H,U,R,Y,O,q.x,q.y)&&XQ(q.prev,q,q.next)>=0)return!1;q=q.nextZ}while(X&&X.z>=Z){if(X.x>=N&&X.x<=L&&X.y>=$&&X.y<=W&&X!==I&&X!==K&&_8(J,H,U,R,Y,O,X.x,X.y)&&XQ(X.prev,X,X.next)>=0)return!1;X=X.prevZ}while(q&&q.z<=G){if(q.x>=N&&q.x<=L&&q.y>=$&&q.y<=W&&q!==I&&q!==K&&_8(J,H,U,R,Y,O,q.x,q.y)&&XQ(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function hL(A,Q,E){let B=A;do{let I=B.prev,C=B.next.next;if(!j9(I,C)&&nR(I,B,B.next,C)&&EC(I,C)&&EC(C,I))Q.push(I.i/E|0),Q.push(B.i/E|0),Q.push(C.i/E|0),BC(B),BC(B.next),B=A=C;B=B.next}while(B!==A);return Z1(B)}function yL(A,Q,E,B,I,C){let K=A;do{let J=K.next.next;while(J!==K.prev){if(K.i!==J.i&&lL(K,J)){let U=sR(K,J);K=Z1(K,K.next),U=Z1(U,U.next),QC(K,Q,E,B,I,C,0),QC(U,Q,E,B,I,C,0);return}J=J.next}K=K.next}while(K!==A)}function gL(A,Q,E,B){let I=[],C,K,J,U,Y;for(C=0,K=Q.length;C<K;C++){if(J=Q[C]*B,U=C<K-1?Q[C+1]*B:A.length,Y=dR(A,J,U,B,!1),Y===Y.next)Y.steiner=!0;I.push(cL(Y))}I.sort(xL);for(C=0;C<I.length;C++)E=bL(I[C],E);return E}function xL(A,Q){return A.x-Q.x}function bL(A,Q){let E=fL(A,Q);if(!E)return Q;let B=sR(E,A);return Z1(B,B.next),Z1(E,E.next)}function fL(A,Q){let E=Q,B=-1/0,I,C=A.x,K=A.y;do{if(K<=E.y&&K>=E.next.y&&E.next.y!==E.y){let O=E.x+(K-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(O<=C&&O>B){if(B=O,I=E.x<E.next.x?E:E.next,O===C)return I}}E=E.next}while(E!==Q);if(!I)return null;let J=I,U=I.x,Y=I.y,H=1/0,R;E=I;do{if(C>=E.x&&E.x>=U&&C!==E.x&&_8(K<Y?C:B,K,U,Y,K<Y?B:C,K,E.x,E.y)){if(R=Math.abs(K-E.y)/(C-E.x),EC(E,A)&&(R<H||R===H&&(E.x>I.x||E.x===I.x&&uL(I,E))))I=E,H=R}E=E.next}while(E!==J);return I}function uL(A,Q){return XQ(A.prev,A,Q.prev)<0&&XQ(Q.next,A,A.next)<0}function pL(A,Q,E,B){let I=A;do{if(I.z===0)I.z=vY(I.x,I.y,Q,E,B);I.prevZ=I.prev,I.nextZ=I.next,I=I.next}while(I!==A);I.prevZ.nextZ=null,I.prevZ=null,mL(I)}function mL(A){let Q,E,B,I,C,K,J,U,Y=1;do{E=A,A=null,C=null,K=0;while(E){K++,B=E,J=0;for(Q=0;Q<Y;Q++)if(J++,B=B.nextZ,!B)break;U=Y;while(J>0||U>0&&B){if(J!==0&&(U===0||!B||E.z<=B.z))I=E,E=E.nextZ,J--;else I=B,B=B.nextZ,U--;if(C)C.nextZ=I;else A=I;I.prevZ=C,C=I}E=B}C.nextZ=null,Y*=2}while(K>1);return A}function vY(A,Q,E,B,I){return A=(A-E)*I|0,Q=(Q-B)*I|0,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,Q=(Q|Q<<8)&16711935,Q=(Q|Q<<4)&252645135,Q=(Q|Q<<2)&858993459,Q=(Q|Q<<1)&1431655765,A|Q<<1}function cL(A){let Q=A,E=A;do{if(Q.x<E.x||Q.x===E.x&&Q.y<E.y)E=Q;Q=Q.next}while(Q!==A);return E}function _8(A,Q,E,B,I,C,K,J){return(I-K)*(Q-J)>=(A-K)*(C-J)&&(A-K)*(B-J)>=(E-K)*(Q-J)&&(E-K)*(C-J)>=(I-K)*(B-J)}function lL(A,Q){return A.next.i!==Q.i&&A.prev.i!==Q.i&&!dL(A,Q)&&(EC(A,Q)&&EC(Q,A)&&nL(A,Q)&&(XQ(A.prev,A,Q.prev)||XQ(A,Q.prev,Q))||j9(A,Q)&&XQ(A.prev,A,A.next)>0&&XQ(Q.prev,Q,Q.next)>0)}function XQ(A,Q,E){return(Q.y-A.y)*(E.x-Q.x)-(Q.x-A.x)*(E.y-Q.y)}function j9(A,Q){return A.x===Q.x&&A.y===Q.y}function nR(A,Q,E,B){let I=SJ(XQ(A,Q,E)),C=SJ(XQ(A,Q,B)),K=SJ(XQ(E,B,A)),J=SJ(XQ(E,B,Q));if(I!==C&&K!==J)return!0;if(I===0&&kJ(A,E,Q))return!0;if(C===0&&kJ(A,B,Q))return!0;if(K===0&&kJ(E,A,B))return!0;if(J===0&&kJ(E,Q,B))return!0;return!1}function kJ(A,Q,E){return Q.x<=Math.max(A.x,E.x)&&Q.x>=Math.min(A.x,E.x)&&Q.y<=Math.max(A.y,E.y)&&Q.y>=Math.min(A.y,E.y)}function SJ(A){return A>0?1:A<0?-1:0}function dL(A,Q){let E=A;do{if(E.i!==A.i&&E.next.i!==A.i&&E.i!==Q.i&&E.next.i!==Q.i&&nR(E,E.next,A,Q))return!0;E=E.next}while(E!==A);return!1}function EC(A,Q){return XQ(A.prev,A,A.next)<0?XQ(A,Q,A.next)>=0&&XQ(A,A.prev,Q)>=0:XQ(A,Q,A.prev)<0||XQ(A,A.next,Q)<0}function nL(A,Q){let E=A,B=!1,I=(A.x+Q.x)/2,C=(A.y+Q.y)/2;do{if(E.y>C!==E.next.y>C&&E.next.y!==E.y&&I<(E.next.x-E.x)*(C-E.y)/(E.next.y-E.y)+E.x)B=!B;E=E.next}while(E!==A);return B}function sR(A,Q){let E=new hY(A.i,A.x,A.y),B=new hY(Q.i,Q.x,Q.y),I=A.next,C=Q.prev;return A.next=Q,Q.prev=A,E.next=I,I.prev=E,B.next=E,E.prev=B,C.next=B,B.prev=C,B}function MZ(A,Q,E,B){let I=new hY(A,Q,E);if(!B)I.prev=I,I.next=I;else I.next=B.next,I.prev=B,B.next.prev=I,B.next=I;return I}function BC(A){if(A.next.prev=A.prev,A.prev.next=A.next,A.prevZ)A.prevZ.nextZ=A.nextZ;if(A.nextZ)A.nextZ.prevZ=A.prevZ}function hY(A,Q,E){this.i=A,this.x=Q,this.y=E,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sL(A,Q,E,B){let I=0;for(let C=Q,K=E-B;C<E;C+=B)I+=(A[K]-A[C])*(A[C+1]+A[K+1]),K=C;return I}class WE{static area(A){let Q=A.length,E=0;for(let B=Q-1,I=0;I<Q;B=I++)E+=A[B].x*A[I].y-A[I].x*A[B].y;return E*0.5}static isClockWise(A){return WE.area(A)<0}static triangulateShape(A,Q){let E=[],B=[],I=[];wZ(A),_Z(E,A);let C=A.length;Q.forEach(wZ);for(let J=0;J<Q.length;J++)B.push(C),C+=Q[J].length,_Z(E,Q[J]);let K=VL.triangulate(E,B);for(let J=0;J<K.length;J+=3)I.push(K.slice(J,J+3));return I}}function wZ(A){let Q=A.length;if(Q>2&&A[Q-1].equals(A[0]))A.pop()}function _Z(A,Q){for(let E=0;E<Q.length;E++)A.push(Q[E].x),A.push(Q[E].y)}class i8 extends hA{constructor(A=new TB([new AA(0.5,0.5),new AA(-0.5,0.5),new AA(-0.5,-0.5),new AA(0.5,-0.5)]),Q={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:A,options:Q},A=Array.isArray(A)?A:[A];let E=this,B=[],I=[];for(let K=0,J=A.length;K<J;K++){let U=A[K];C(U)}this.setAttribute("position",new PA(B,3)),this.setAttribute("uv",new PA(I,2)),this.computeVertexNormals();function C(K){let J=[],U=Q.curveSegments!==void 0?Q.curveSegments:12,Y=Q.steps!==void 0?Q.steps:1,H=Q.depth!==void 0?Q.depth:1,R=Q.bevelEnabled!==void 0?Q.bevelEnabled:!0,O=Q.bevelThickness!==void 0?Q.bevelThickness:0.2,N=Q.bevelSize!==void 0?Q.bevelSize:O-0.1,$=Q.bevelOffset!==void 0?Q.bevelOffset:0,L=Q.bevelSegments!==void 0?Q.bevelSegments:3,W=Q.extrudePath,Z=Q.UVGenerator!==void 0?Q.UVGenerator:iL,G,X=!1,q,M,F,D;if(W)G=W.getSpacedPoints(Y),X=!0,R=!1,q=W.computeFrenetFrames(Y,!1),M=new y,F=new y,D=new y;if(!R)L=0,O=0,N=0,$=0;let _=K.extractPoints(U),w=_.shape,k=_.holes;if(!WE.isClockWise(w)){w=w.reverse();for(let EA=0,CA=k.length;EA<CA;EA++){let f=k[EA];if(WE.isClockWise(f))k[EA]=f.reverse()}}let z=WE.triangulateShape(w,k),j=w;for(let EA=0,CA=k.length;EA<CA;EA++){let f=k[EA];w=w.concat(f)}function v(EA,CA,f){if(!CA)console.error("THREE.ExtrudeGeometry: vec does not exist");return EA.clone().addScaledVector(CA,f)}let g=w.length,P=z.length;function V(EA,CA,f){let NA,YA,FA,ZA=EA.x-CA.x,jA=EA.y-CA.y,wA=f.x-EA.x,VA=f.y-EA.y,d=ZA*ZA+jA*jA,u=ZA*VA-jA*wA;if(Math.abs(u)>Number.EPSILON){let QA=Math.sqrt(d),t=Math.sqrt(wA*wA+VA*VA),KA=CA.x-jA/QA,HA=CA.y+ZA/QA,fA=f.x-VA/t,zA=f.y+wA/t,yA=((fA-KA)*VA-(zA-HA)*wA)/(ZA*VA-jA*wA);NA=KA+ZA*yA-EA.x,YA=HA+jA*yA-EA.y;let qA=NA*NA+YA*YA;if(qA<=2)return new AA(NA,YA);else FA=Math.sqrt(qA/2)}else{let QA=!1;if(ZA>Number.EPSILON){if(wA>Number.EPSILON)QA=!0}else if(ZA<-Number.EPSILON){if(wA<-Number.EPSILON)QA=!0}else if(Math.sign(jA)===Math.sign(VA))QA=!0;if(QA)NA=-jA,YA=ZA,FA=Math.sqrt(d);else NA=ZA,YA=jA,FA=Math.sqrt(d/2)}return new AA(NA/FA,YA/FA)}let S=[];for(let EA=0,CA=j.length,f=CA-1,NA=EA+1;EA<CA;EA++,f++,NA++){if(f===CA)f=0;if(NA===CA)NA=0;S[EA]=V(j[EA],j[f],j[NA])}let h=[],x,b=S.concat();for(let EA=0,CA=k.length;EA<CA;EA++){let f=k[EA];x=[];for(let NA=0,YA=f.length,FA=YA-1,ZA=NA+1;NA<YA;NA++,FA++,ZA++){if(FA===YA)FA=0;if(ZA===YA)ZA=0;x[NA]=V(f[NA],f[FA],f[ZA])}h.push(x),b=b.concat(x)}for(let EA=0;EA<L;EA++){let CA=EA/L,f=O*Math.cos(CA*Math.PI/2),NA=N*Math.sin(CA*Math.PI/2)+$;for(let YA=0,FA=j.length;YA<FA;YA++){let ZA=v(j[YA],S[YA],NA);l(ZA.x,ZA.y,-f)}for(let YA=0,FA=k.length;YA<FA;YA++){let ZA=k[YA];x=h[YA];for(let jA=0,wA=ZA.length;jA<wA;jA++){let VA=v(ZA[jA],x[jA],NA);l(VA.x,VA.y,-f)}}}let m=N+$;for(let EA=0;EA<g;EA++){let CA=R?v(w[EA],b[EA],m):w[EA];if(!X)l(CA.x,CA.y,0);else F.copy(q.normals[0]).multiplyScalar(CA.x),M.copy(q.binormals[0]).multiplyScalar(CA.y),D.copy(G[0]).add(F).add(M),l(D.x,D.y,D.z)}for(let EA=1;EA<=Y;EA++)for(let CA=0;CA<g;CA++){let f=R?v(w[CA],b[CA],m):w[CA];if(!X)l(f.x,f.y,H/Y*EA);else F.copy(q.normals[EA]).multiplyScalar(f.x),M.copy(q.binormals[EA]).multiplyScalar(f.y),D.copy(G[EA]).add(F).add(M),l(D.x,D.y,D.z)}for(let EA=L-1;EA>=0;EA--){let CA=EA/L,f=O*Math.cos(CA*Math.PI/2),NA=N*Math.sin(CA*Math.PI/2)+$;for(let YA=0,FA=j.length;YA<FA;YA++){let ZA=v(j[YA],S[YA],NA);l(ZA.x,ZA.y,H+f)}for(let YA=0,FA=k.length;YA<FA;YA++){let ZA=k[YA];x=h[YA];for(let jA=0,wA=ZA.length;jA<wA;jA++){let VA=v(ZA[jA],x[jA],NA);if(!X)l(VA.x,VA.y,H+f);else l(VA.x,VA.y+G[Y-1].y,G[Y-1].x+f)}}}s(),i();function s(){let EA=B.length/3;if(R){let CA=0,f=g*CA;for(let NA=0;NA<P;NA++){let YA=z[NA];c(YA[2]+f,YA[1]+f,YA[0]+f)}CA=Y+L*2,f=g*CA;for(let NA=0;NA<P;NA++){let YA=z[NA];c(YA[0]+f,YA[1]+f,YA[2]+f)}}else{for(let CA=0;CA<P;CA++){let f=z[CA];c(f[2],f[1],f[0])}for(let CA=0;CA<P;CA++){let f=z[CA];c(f[0]+g*Y,f[1]+g*Y,f[2]+g*Y)}}E.addGroup(EA,B.length/3-EA,0)}function i(){let EA=B.length/3,CA=0;n(j,CA),CA+=j.length;for(let f=0,NA=k.length;f<NA;f++){let YA=k[f];n(YA,CA),CA+=YA.length}E.addGroup(EA,B.length/3-EA,1)}function n(EA,CA){let f=EA.length;while(--f>=0){let NA=f,YA=f-1;if(YA<0)YA=EA.length-1;for(let FA=0,ZA=Y+L*2;FA<ZA;FA++){let jA=g*FA,wA=g*(FA+1),VA=CA+NA+jA,d=CA+YA+jA,u=CA+YA+wA,QA=CA+NA+wA;o(VA,d,u,QA)}}}function l(EA,CA,f){J.push(EA),J.push(CA),J.push(f)}function c(EA,CA,f){e(EA),e(CA),e(f);let NA=B.length/3,YA=Z.generateTopUV(E,B,NA-3,NA-2,NA-1);BA(YA[0]),BA(YA[1]),BA(YA[2])}function o(EA,CA,f,NA){e(EA),e(CA),e(NA),e(CA),e(f),e(NA);let YA=B.length/3,FA=Z.generateSideWallUV(E,B,YA-6,YA-3,YA-2,YA-1);BA(FA[0]),BA(FA[1]),BA(FA[3]),BA(FA[1]),BA(FA[2]),BA(FA[3])}function e(EA){B.push(J[EA*3+0]),B.push(J[EA*3+1]),B.push(J[EA*3+2])}function BA(EA){I.push(EA.x),I.push(EA.y)}}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}toJSON(){let A=super.toJSON(),Q=this.parameters.shapes,E=this.parameters.options;return oL(Q,E,A)}static fromJSON(A,Q){let E=[];for(let I=0,C=A.shapes.length;I<C;I++){let K=Q[A.shapes[I]];E.push(K)}let B=A.options.extrudePath;if(B!==void 0)A.options.extrudePath=new xJ[B.type]().fromJSON(B);return new i8(E,A.options)}}var iL={generateTopUV:function(A,Q,E,B,I){let C=Q[E*3],K=Q[E*3+1],J=Q[B*3],U=Q[B*3+1],Y=Q[I*3],H=Q[I*3+1];return[new AA(C,K),new AA(J,U),new AA(Y,H)]},generateSideWallUV:function(A,Q,E,B,I,C){let K=Q[E*3],J=Q[E*3+1],U=Q[E*3+2],Y=Q[B*3],H=Q[B*3+1],R=Q[B*3+2],O=Q[I*3],N=Q[I*3+1],$=Q[I*3+2],L=Q[C*3],W=Q[C*3+1],Z=Q[C*3+2];if(Math.abs(J-H)<Math.abs(K-Y))return[new AA(K,1-U),new AA(Y,1-R),new AA(O,1-$),new AA(L,1-Z)];else return[new AA(J,1-U),new AA(H,1-R),new AA(N,1-$),new AA(W,1-Z)]}};function oL(A,Q,E){if(E.shapes=[],Array.isArray(A))for(let B=0,I=A.length;B<I;B++){let C=A[B];E.shapes.push(C.uuid)}else E.shapes.push(A.uuid);if(E.options=Object.assign({},Q),Q.extrudePath!==void 0)E.options.extrudePath=Q.extrudePath.toJSON();return E}class yC extends BI{constructor(A=1,Q=0){let E=(1+Math.sqrt(5))/2,B=[-1,E,0,1,E,0,-1,-E,0,1,-E,0,0,-1,E,0,1,E,0,-1,-E,0,1,-E,E,0,-1,E,0,1,-E,0,-1,-E,0,1],I=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(B,I,A,Q);this.type="IcosahedronGeometry",this.parameters={radius:A,detail:Q}}static fromJSON(A){return new yC(A.radius,A.detail)}}class x1 extends BI{constructor(A=1,Q=0){let E=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],B=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(E,B,A,Q);this.type="OctahedronGeometry",this.parameters={radius:A,detail:Q}}static fromJSON(A){return new x1(A.radius,A.detail)}}class dQ extends hA{constructor(A=1,Q=1,E=1,B=1){super();this.type="PlaneGeometry",this.parameters={width:A,height:Q,widthSegments:E,heightSegments:B};let I=A/2,C=Q/2,K=Math.floor(E),J=Math.floor(B),U=K+1,Y=J+1,H=A/K,R=Q/J,O=[],N=[],$=[],L=[];for(let W=0;W<Y;W++){let Z=W*R-C;for(let G=0;G<U;G++){let X=G*H-I;N.push(X,-Z,0),$.push(0,0,1),L.push(G/K),L.push(1-W/J)}}for(let W=0;W<J;W++)for(let Z=0;Z<K;Z++){let G=Z+U*W,X=Z+U*(W+1),q=Z+1+U*(W+1),M=Z+1+U*W;O.push(G,X,M),O.push(X,q,M)}this.setIndex(O),this.setAttribute("position",new PA(N,3)),this.setAttribute("normal",new PA($,3)),this.setAttribute("uv",new PA(L,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new dQ(A.width,A.height,A.widthSegments,A.heightSegments)}}class gC extends hA{constructor(A=0.5,Q=1,E=32,B=1,I=0,C=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:A,outerRadius:Q,thetaSegments:E,phiSegments:B,thetaStart:I,thetaLength:C},E=Math.max(3,E),B=Math.max(1,B);let K=[],J=[],U=[],Y=[],H=A,R=(Q-A)/B,O=new y,N=new AA;for(let $=0;$<=B;$++){for(let L=0;L<=E;L++){let W=I+L/E*C;O.x=H*Math.cos(W),O.y=H*Math.sin(W),J.push(O.x,O.y,O.z),U.push(0,0,1),N.x=(O.x/Q+1)/2,N.y=(O.y/Q+1)/2,Y.push(N.x,N.y)}H+=R}for(let $=0;$<B;$++){let L=$*(E+1);for(let W=0;W<E;W++){let Z=W+L,G=Z,X=Z+E+1,q=Z+E+2,M=Z+1;K.push(G,X,M),K.push(X,q,M)}}this.setIndex(K),this.setAttribute("position",new PA(J,3)),this.setAttribute("normal",new PA(U,3)),this.setAttribute("uv",new PA(Y,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new gC(A.innerRadius,A.outerRadius,A.thetaSegments,A.phiSegments,A.thetaStart,A.thetaLength)}}class xC extends hA{constructor(A=new TB([new AA(0,0.5),new AA(-0.5,-0.5),new AA(0.5,-0.5)]),Q=12){super();this.type="ShapeGeometry",this.parameters={shapes:A,curveSegments:Q};let E=[],B=[],I=[],C=[],K=0,J=0;if(Array.isArray(A)===!1)U(A);else for(let Y=0;Y<A.length;Y++)U(A[Y]),this.addGroup(K,J,Y),K+=J,J=0;this.setIndex(E),this.setAttribute("position",new PA(B,3)),this.setAttribute("normal",new PA(I,3)),this.setAttribute("uv",new PA(C,2));function U(Y){let H=B.length/3,R=Y.extractPoints(Q),O=R.shape,N=R.holes;if(WE.isClockWise(O)===!1)O=O.reverse();for(let L=0,W=N.length;L<W;L++){let Z=N[L];if(WE.isClockWise(Z)===!0)N[L]=Z.reverse()}let $=WE.triangulateShape(O,N);for(let L=0,W=N.length;L<W;L++){let Z=N[L];O=O.concat(Z)}for(let L=0,W=O.length;L<W;L++){let Z=O[L];B.push(Z.x,Z.y,0),I.push(0,0,1),C.push(Z.x,Z.y)}for(let L=0,W=$.length;L<W;L++){let Z=$[L],G=Z[0]+H,X=Z[1]+H,q=Z[2]+H;E.push(G,X,q),J+=3}}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}toJSON(){let A=super.toJSON(),Q=this.parameters.shapes;return rL(Q,A)}static fromJSON(A,Q){let E=[];for(let B=0,I=A.shapes.length;B<I;B++){let C=Q[A.shapes[B]];E.push(C)}return new xC(E,A.curveSegments)}}function rL(A,Q){if(Q.shapes=[],Array.isArray(A))for(let E=0,B=A.length;E<B;E++){let I=A[E];Q.shapes.push(I.uuid)}else Q.shapes.push(A.uuid);return Q}class FE extends hA{constructor(A=1,Q=32,E=16,B=0,I=Math.PI*2,C=0,K=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:A,widthSegments:Q,heightSegments:E,phiStart:B,phiLength:I,thetaStart:C,thetaLength:K},Q=Math.max(3,Math.floor(Q)),E=Math.max(2,Math.floor(E));let J=Math.min(C+K,Math.PI),U=0,Y=[],H=new y,R=new y,O=[],N=[],$=[],L=[];for(let W=0;W<=E;W++){let Z=[],G=W/E,X=0;if(W===0&&C===0)X=0.5/Q;else if(W===E&&J===Math.PI)X=-0.5/Q;for(let q=0;q<=Q;q++){let M=q/Q;H.x=-A*Math.cos(B+M*I)*Math.sin(C+G*K),H.y=A*Math.cos(C+G*K),H.z=A*Math.sin(B+M*I)*Math.sin(C+G*K),N.push(H.x,H.y,H.z),R.copy(H).normalize(),$.push(R.x,R.y,R.z),L.push(M+X,1-G),Z.push(U++)}Y.push(Z)}for(let W=0;W<E;W++)for(let Z=0;Z<Q;Z++){let G=Y[W][Z+1],X=Y[W][Z],q=Y[W+1][Z],M=Y[W+1][Z+1];if(W!==0||C>0)O.push(G,X,M);if(W!==E-1||J<Math.PI)O.push(X,q,M)}this.setIndex(O),this.setAttribute("position",new PA(N,3)),this.setAttribute("normal",new PA($,3)),this.setAttribute("uv",new PA(L,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new FE(A.radius,A.widthSegments,A.heightSegments,A.phiStart,A.phiLength,A.thetaStart,A.thetaLength)}}class bC extends BI{constructor(A=1,Q=0){let E=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],B=[2,1,0,0,3,2,1,3,0,2,3,1];super(E,B,A,Q);this.type="TetrahedronGeometry",this.parameters={radius:A,detail:Q}}static fromJSON(A){return new bC(A.radius,A.detail)}}class o8 extends hA{constructor(A=1,Q=0.4,E=12,B=48,I=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:A,tube:Q,radialSegments:E,tubularSegments:B,arc:I},E=Math.floor(E),B=Math.floor(B);let C=[],K=[],J=[],U=[],Y=new y,H=new y,R=new y;for(let O=0;O<=E;O++)for(let N=0;N<=B;N++){let $=N/B*I,L=O/E*Math.PI*2;H.x=(A+Q*Math.cos(L))*Math.cos($),H.y=(A+Q*Math.cos(L))*Math.sin($),H.z=Q*Math.sin(L),K.push(H.x,H.y,H.z),Y.x=A*Math.cos($),Y.y=A*Math.sin($),R.subVectors(H,Y).normalize(),J.push(R.x,R.y,R.z),U.push(N/B),U.push(O/E)}for(let O=1;O<=E;O++)for(let N=1;N<=B;N++){let $=(B+1)*O+N-1,L=(B+1)*(O-1)+N-1,W=(B+1)*(O-1)+N,Z=(B+1)*O+N;C.push($,L,Z),C.push(L,W,Z)}this.setIndex(C),this.setAttribute("position",new PA(K,3)),this.setAttribute("normal",new PA(J,3)),this.setAttribute("uv",new PA(U,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new o8(A.radius,A.tube,A.radialSegments,A.tubularSegments,A.arc)}}class fC extends hA{constructor(A=1,Q=0.4,E=64,B=8,I=2,C=3){super();this.type="TorusKnotGeometry",this.parameters={radius:A,tube:Q,tubularSegments:E,radialSegments:B,p:I,q:C},E=Math.floor(E),B=Math.floor(B);let K=[],J=[],U=[],Y=[],H=new y,R=new y,O=new y,N=new y,$=new y,L=new y,W=new y;for(let G=0;G<=E;++G){let X=G/E*I*Math.PI*2;Z(X,I,C,A,O),Z(X+0.01,I,C,A,N),L.subVectors(N,O),W.addVectors(N,O),$.crossVectors(L,W),W.crossVectors($,L),$.normalize(),W.normalize();for(let q=0;q<=B;++q){let M=q/B*Math.PI*2,F=-Q*Math.cos(M),D=Q*Math.sin(M);H.x=O.x+(F*W.x+D*$.x),H.y=O.y+(F*W.y+D*$.y),H.z=O.z+(F*W.z+D*$.z),J.push(H.x,H.y,H.z),R.subVectors(H,O).normalize(),U.push(R.x,R.y,R.z),Y.push(G/E),Y.push(q/B)}}for(let G=1;G<=E;G++)for(let X=1;X<=B;X++){let q=(B+1)*(G-1)+(X-1),M=(B+1)*G+(X-1),F=(B+1)*G+X,D=(B+1)*(G-1)+X;K.push(q,M,D),K.push(M,F,D)}this.setIndex(K),this.setAttribute("position",new PA(J,3)),this.setAttribute("normal",new PA(U,3)),this.setAttribute("uv",new PA(Y,2));function Z(G,X,q,M,F){let D=Math.cos(G),_=Math.sin(G),w=q/X*G,k=Math.cos(w);F.x=M*(2+k)*0.5*D,F.y=M*(2+k)*_*0.5,F.z=M*Math.sin(w)*0.5}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new fC(A.radius,A.tube,A.tubularSegments,A.radialSegments,A.p,A.q)}}class uC extends hA{constructor(A=new PC(new y(-1,-1,0),new y(-1,1,0),new y(1,1,0)),Q=64,E=1,B=8,I=!1){super();this.type="TubeGeometry",this.parameters={path:A,tubularSegments:Q,radius:E,radialSegments:B,closed:I};let C=A.computeFrenetFrames(Q,I);this.tangents=C.tangents,this.normals=C.normals,this.binormals=C.binormals;let K=new y,J=new y,U=new AA,Y=new y,H=[],R=[],O=[],N=[];$(),this.setIndex(N),this.setAttribute("position",new PA(H,3)),this.setAttribute("normal",new PA(R,3)),this.setAttribute("uv",new PA(O,2));function $(){for(let G=0;G<Q;G++)L(G);L(I===!1?Q:0),Z(),W()}function L(G){Y=A.getPointAt(G/Q,Y);let X=C.normals[G],q=C.binormals[G];for(let M=0;M<=B;M++){let F=M/B*Math.PI*2,D=Math.sin(F),_=-Math.cos(F);J.x=_*X.x+D*q.x,J.y=_*X.y+D*q.y,J.z=_*X.z+D*q.z,J.normalize(),R.push(J.x,J.y,J.z),K.x=Y.x+E*J.x,K.y=Y.y+E*J.y,K.z=Y.z+E*J.z,H.push(K.x,K.y,K.z)}}function W(){for(let G=1;G<=Q;G++)for(let X=1;X<=B;X++){let q=(B+1)*(G-1)+(X-1),M=(B+1)*G+(X-1),F=(B+1)*G+X,D=(B+1)*(G-1)+X;N.push(q,M,D),N.push(M,F,D)}}function Z(){for(let G=0;G<=Q;G++)for(let X=0;X<=B;X++)U.x=G/Q,U.y=X/B,O.push(U.x,U.y)}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}toJSON(){let A=super.toJSON();return A.path=this.parameters.path.toJSON(),A}static fromJSON(A){return new uC(new xJ[A.path.type]().fromJSON(A.path),A.tubularSegments,A.radius,A.radialSegments,A.closed)}}class r8 extends hA{constructor(A=null){super();if(this.type="WireframeGeometry",this.parameters={geometry:A},A!==null){let Q=[],E=/*@__PURE__*/new Set,B=new y,I=new y;if(A.index!==null){let C=A.attributes.position,K=A.index,J=A.groups;if(J.length===0)J=[{start:0,count:K.count,materialIndex:0}];for(let U=0,Y=J.length;U<Y;++U){let H=J[U],R=H.start,O=H.count;for(let N=R,$=R+O;N<$;N+=3)for(let L=0;L<3;L++){let W=K.getX(N+L),Z=K.getX(N+(L+1)%3);if(B.fromBufferAttribute(C,W),I.fromBufferAttribute(C,Z),kZ(B,I,E)===!0)Q.push(B.x,B.y,B.z),Q.push(I.x,I.y,I.z)}}}else{let C=A.attributes.position;for(let K=0,J=C.count/3;K<J;K++)for(let U=0;U<3;U++){let Y=3*K+U,H=3*K+(U+1)%3;if(B.fromBufferAttribute(C,Y),I.fromBufferAttribute(C,H),kZ(B,I,E)===!0)Q.push(B.x,B.y,B.z),Q.push(I.x,I.y,I.z)}}this.setAttribute("position",new PA(Q,3))}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}}function kZ(A,Q,E){let B=`${A.x},${A.y},${A.z}-${Q.x},${Q.y},${Q.z}`,I=`${Q.x},${Q.y},${Q.z}-${A.x},${A.y},${A.z}`;if(E.has(B)===!0||E.has(I)===!0)return!1;else return E.add(B),E.add(I),!0}var SZ=/*@__PURE__*/Object.freeze({__proto__:null,BoxGeometry:bQ,CapsuleGeometry:jC,CircleGeometry:vC,ConeGeometry:s8,CylinderGeometry:bB,DodecahedronGeometry:hC,EdgesGeometry:V9,ExtrudeGeometry:i8,IcosahedronGeometry:yC,LatheGeometry:n8,OctahedronGeometry:x1,PlaneGeometry:dQ,PolyhedronGeometry:BI,RingGeometry:gC,ShapeGeometry:xC,SphereGeometry:FE,TetrahedronGeometry:bC,TorusGeometry:o8,TorusKnotGeometry:fC,TubeGeometry:uC,WireframeGeometry:r8});class v9 extends $Q{constructor(A){super();this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new a(0),this.transparent=!0,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.fog=A.fog,this}}class II extends bA{constructor(A){super(A);this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class aQ extends $Q{constructor(A){super();this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new a(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new AA(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new DQ,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.defines={STANDARD:""},this.color.copy(A.color),this.roughness=A.roughness,this.metalness=A.metalness,this.map=A.map,this.lightMap=A.lightMap,this.lightMapIntensity=A.lightMapIntensity,this.aoMap=A.aoMap,this.aoMapIntensity=A.aoMapIntensity,this.emissive.copy(A.emissive),this.emissiveMap=A.emissiveMap,this.emissiveIntensity=A.emissiveIntensity,this.bumpMap=A.bumpMap,this.bumpScale=A.bumpScale,this.normalMap=A.normalMap,this.normalMapType=A.normalMapType,this.normalScale.copy(A.normalScale),this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.roughnessMap=A.roughnessMap,this.metalnessMap=A.metalnessMap,this.alphaMap=A.alphaMap,this.envMap=A.envMap,this.envMapRotation.copy(A.envMapRotation),this.envMapIntensity=A.envMapIntensity,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.wireframeLinecap=A.wireframeLinecap,this.wireframeLinejoin=A.wireframeLinejoin,this.flatShading=A.flatShading,this.fog=A.fog,this}}class fQ extends aQ{constructor(A){super();this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new AA(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return w0(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(Q){this.ior=(1+0.4*Q)/(1-0.4*Q)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new a(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new a(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new a(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(A)}get anisotropy(){return this._anisotropy}set anisotropy(A){if(this._anisotropy>0!==A>0)this.version++;this._anisotropy=A}get clearcoat(){return this._clearcoat}set clearcoat(A){if(this._clearcoat>0!==A>0)this.version++;this._clearcoat=A}get iridescence(){return this._iridescence}set iridescence(A){if(this._iridescence>0!==A>0)this.version++;this._iridescence=A}get dispersion(){return this._dispersion}set dispersion(A){if(this._dispersion>0!==A>0)this.version++;this._dispersion=A}get sheen(){return this._sheen}set sheen(A){if(this._sheen>0!==A>0)this.version++;this._sheen=A}get transmission(){return this._transmission}set transmission(A){if(this._transmission>0!==A>0)this.version++;this._transmission=A}copy(A){return super.copy(A),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=A.anisotropy,this.anisotropyRotation=A.anisotropyRotation,this.anisotropyMap=A.anisotropyMap,this.clearcoat=A.clearcoat,this.clearcoatMap=A.clearcoatMap,this.clearcoatRoughness=A.clearcoatRoughness,this.clearcoatRoughnessMap=A.clearcoatRoughnessMap,this.clearcoatNormalMap=A.clearcoatNormalMap,this.clearcoatNormalScale.copy(A.clearcoatNormalScale),this.dispersion=A.dispersion,this.ior=A.ior,this.iridescence=A.iridescence,this.iridescenceMap=A.iridescenceMap,this.iridescenceIOR=A.iridescenceIOR,this.iridescenceThicknessRange=[...A.iridescenceThicknessRange],this.iridescenceThicknessMap=A.iridescenceThicknessMap,this.sheen=A.sheen,this.sheenColor.copy(A.sheenColor),this.sheenColorMap=A.sheenColorMap,this.sheenRoughness=A.sheenRoughness,this.sheenRoughnessMap=A.sheenRoughnessMap,this.transmission=A.transmission,this.transmissionMap=A.transmissionMap,this.thickness=A.thickness,this.thicknessMap=A.thicknessMap,this.attenuationDistance=A.attenuationDistance,this.attenuationColor.copy(A.attenuationColor),this.specularIntensity=A.specularIntensity,this.specularIntensityMap=A.specularIntensityMap,this.specularColor.copy(A.specularColor),this.specularColorMap=A.specularColorMap,this}}class DE extends $Q{constructor(A){super();this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new a(16777215),this.specular=new a(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new AA(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new DQ,this.combine=0,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.specular.copy(A.specular),this.shininess=A.shininess,this.map=A.map,this.lightMap=A.lightMap,this.lightMapIntensity=A.lightMapIntensity,this.aoMap=A.aoMap,this.aoMapIntensity=A.aoMapIntensity,this.emissive.copy(A.emissive),this.emissiveMap=A.emissiveMap,this.emissiveIntensity=A.emissiveIntensity,this.bumpMap=A.bumpMap,this.bumpScale=A.bumpScale,this.normalMap=A.normalMap,this.normalMapType=A.normalMapType,this.normalScale.copy(A.normalScale),this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.specularMap=A.specularMap,this.alphaMap=A.alphaMap,this.envMap=A.envMap,this.envMapRotation.copy(A.envMapRotation),this.combine=A.combine,this.reflectivity=A.reflectivity,this.refractionRatio=A.refractionRatio,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.wireframeLinecap=A.wireframeLinecap,this.wireframeLinejoin=A.wireframeLinejoin,this.flatShading=A.flatShading,this.fog=A.fog,this}}class h9 extends $Q{constructor(A){super();this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new a(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new AA(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.gradientMap=A.gradientMap,this.lightMap=A.lightMap,this.lightMapIntensity=A.lightMapIntensity,this.aoMap=A.aoMap,this.aoMapIntensity=A.aoMapIntensity,this.emissive.copy(A.emissive),this.emissiveMap=A.emissiveMap,this.emissiveIntensity=A.emissiveIntensity,this.bumpMap=A.bumpMap,this.bumpScale=A.bumpScale,this.normalMap=A.normalMap,this.normalMapType=A.normalMapType,this.normalScale.copy(A.normalScale),this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.alphaMap=A.alphaMap,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.wireframeLinecap=A.wireframeLinecap,this.wireframeLinejoin=A.wireframeLinejoin,this.fog=A.fog,this}}class gE extends $Q{constructor(A){super();this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new AA(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(A)}copy(A){return super.copy(A),this.bumpMap=A.bumpMap,this.bumpScale=A.bumpScale,this.normalMap=A.normalMap,this.normalMapType=A.normalMapType,this.normalScale.copy(A.normalScale),this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.flatShading=A.flatShading,this}}class CI extends $Q{constructor(A){super();this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new a(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new AA(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new DQ,this.combine=0,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.lightMap=A.lightMap,this.lightMapIntensity=A.lightMapIntensity,this.aoMap=A.aoMap,this.aoMapIntensity=A.aoMapIntensity,this.emissive.copy(A.emissive),this.emissiveMap=A.emissiveMap,this.emissiveIntensity=A.emissiveIntensity,this.bumpMap=A.bumpMap,this.bumpScale=A.bumpScale,this.normalMap=A.normalMap,this.normalMapType=A.normalMapType,this.normalScale.copy(A.normalScale),this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.specularMap=A.specularMap,this.alphaMap=A.alphaMap,this.envMap=A.envMap,this.envMapRotation.copy(A.envMapRotation),this.combine=A.combine,this.reflectivity=A.reflectivity,this.refractionRatio=A.refractionRatio,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.wireframeLinecap=A.wireframeLinecap,this.wireframeLinejoin=A.wireframeLinejoin,this.flatShading=A.flatShading,this.fog=A.fog,this}}class hI extends $Q{constructor(A){super();this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(A)}copy(A){return super.copy(A),this.depthPacking=A.depthPacking,this.map=A.map,this.alphaMap=A.alphaMap,this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this}}class pC extends $Q{constructor(A){super();this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(A)}copy(A){return super.copy(A),this.map=A.map,this.alphaMap=A.alphaMap,this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this}}class y9 extends $Q{constructor(A){super();this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new a(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new AA(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.defines={MATCAP:""},this.color.copy(A.color),this.matcap=A.matcap,this.map=A.map,this.bumpMap=A.bumpMap,this.bumpScale=A.bumpScale,this.normalMap=A.normalMap,this.normalMapType=A.normalMapType,this.normalScale.copy(A.normalScale),this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.alphaMap=A.alphaMap,this.flatShading=A.flatShading,this.fog=A.fog,this}}class g9 extends p0{constructor(A){super();this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(A)}copy(A){return super.copy(A),this.scale=A.scale,this.dashSize=A.dashSize,this.gapSize=A.gapSize,this}}function Y1(A,Q,E){if(!A||!E&&A.constructor===Q)return A;if(typeof Q.BYTES_PER_ELEMENT==="number")return new Q(A);return Array.prototype.slice.call(A)}function iR(A){return ArrayBuffer.isView(A)&&!(A instanceof DataView)}function oR(A){function Q(I,C){return A[I]-A[C]}let E=A.length,B=new Array(E);for(let I=0;I!==E;++I)B[I]=I;return B.sort(Q),B}function yY(A,Q,E){let B=A.length,I=new A.constructor(B);for(let C=0,K=0;K!==B;++C){let J=E[C]*Q;for(let U=0;U!==Q;++U)I[K++]=A[J+U]}return I}function TO(A,Q,E,B){let I=1,C=A[0];while(C!==void 0&&C[B]===void 0)C=A[I++];if(C===void 0)return;let K=C[B];if(K===void 0)return;if(Array.isArray(K))do{if(K=C[B],K!==void 0)Q.push(C.time),E.push.apply(E,K);C=A[I++]}while(C!==void 0);else if(K.toArray!==void 0)do{if(K=C[B],K!==void 0)Q.push(C.time),K.toArray(E,E.length);C=A[I++]}while(C!==void 0);else do{if(K=C[B],K!==void 0)Q.push(C.time),E.push(K);C=A[I++]}while(C!==void 0)}function aL(A,Q,E,B,I=30){let C=A.clone();C.name=Q;let K=[];for(let U=0;U<C.tracks.length;++U){let Y=C.tracks[U],H=Y.getValueSize(),R=[],O=[];for(let N=0;N<Y.times.length;++N){let $=Y.times[N]*I;if($<E||$>=B)continue;R.push(Y.times[N]);for(let L=0;L<H;++L)O.push(Y.values[N*H+L])}if(R.length===0)continue;Y.times=Y1(R,Y.times.constructor),Y.values=Y1(O,Y.values.constructor),K.push(Y)}C.tracks=K;let J=1/0;for(let U=0;U<C.tracks.length;++U)if(J>C.tracks[U].times[0])J=C.tracks[U].times[0];for(let U=0;U<C.tracks.length;++U)C.tracks[U].shift(-1*J);return C.resetDuration(),C}function tL(A,Q=0,E=A,B=30){if(B<=0)B=30;let I=E.tracks.length,C=Q/B;for(let K=0;K<I;++K){let J=E.tracks[K],U=J.ValueTypeName;if(U==="bool"||U==="string")continue;let Y=A.tracks.find(function(Z){return Z.name===J.name&&Z.ValueTypeName===U});if(Y===void 0)continue;let H=0,R=J.getValueSize();if(J.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)H=R/3;let O=0,N=Y.getValueSize();if(Y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)O=N/3;let $=J.times.length-1,L;if(C<=J.times[0]){let Z=H,G=R-H;L=J.values.slice(Z,G)}else if(C>=J.times[$]){let Z=$*R+H,G=Z+R-H;L=J.values.slice(Z,G)}else{let Z=J.createInterpolant(),G=H,X=R-H;Z.evaluate(C),L=Z.resultBuffer.slice(G,X)}if(U==="quaternion")new J0().fromArray(L).normalize().conjugate().toArray(L);let W=Y.times.length;for(let Z=0;Z<W;++Z){let G=Z*N+O;if(U==="quaternion")J0.multiplyQuaternionsFlat(Y.values,G,L,0,Y.values,G);else{let X=N-O*2;for(let q=0;q<X;++q)Y.values[G+q]-=L[q]}}}return A.blendMode=2501,A}var rR={convertArray:Y1,isTypedArray:iR,getKeyframeOrder:oR,sortedArray:yY,flattenJSON:TO,subclip:aL,makeClipAdditive:tL};class KI{constructor(A,Q,E,B){this.parameterPositions=A,this._cachedIndex=0,this.resultBuffer=B!==void 0?B:new Q.constructor(E),this.sampleValues=Q,this.valueSize=E,this.settings=null,this.DefaultSettings_={}}evaluate(A){let Q=this.parameterPositions,E=this._cachedIndex,B=Q[E],I=Q[E-1];A:{Q:{let C;E:{B:if(!(A<B)){for(let K=E+2;;){if(B===void 0){if(A<I)break B;return E=Q.length,this._cachedIndex=E,this.copySampleValue_(E-1)}if(E===K)break;if(I=B,B=Q[++E],A<B)break Q}C=Q.length;break E}if(!(A>=I)){let K=Q[1];if(A<K)E=2,I=K;for(let J=E-2;;){if(I===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(E===J)break;if(B=I,I=Q[--E-1],A>=I)break Q}C=E,E=0;break E}break A}while(E<C){let K=E+C>>>1;if(A<Q[K])C=K;else E=K+1}if(B=Q[E],I=Q[E-1],I===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(B===void 0)return E=Q.length,this._cachedIndex=E,this.copySampleValue_(E-1)}this._cachedIndex=E,this.intervalChanged_(E,I,B)}return this.interpolate_(E,I,A,B)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(A){let Q=this.resultBuffer,E=this.sampleValues,B=this.valueSize,I=A*B;for(let C=0;C!==B;++C)Q[C]=E[I+C];return Q}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class x9 extends KI{constructor(A,Q,E,B){super(A,Q,E,B);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(A,Q,E){let B=this.parameterPositions,I=A-2,C=A+1,K=B[I],J=B[C];if(K===void 0)switch(this.getSettings_().endingStart){case 2401:I=A,K=2*Q-E;break;case 2402:I=B.length-2,K=Q+B[I]-B[I+1];break;default:I=A,K=E}if(J===void 0)switch(this.getSettings_().endingEnd){case 2401:C=A,J=2*E-Q;break;case 2402:C=1,J=E+B[1]-B[0];break;default:C=A-1,J=Q}let U=(E-Q)*0.5,Y=this.valueSize;this._weightPrev=U/(Q-K),this._weightNext=U/(J-E),this._offsetPrev=I*Y,this._offsetNext=C*Y}interpolate_(A,Q,E,B){let I=this.resultBuffer,C=this.sampleValues,K=this.valueSize,J=A*K,U=J-K,Y=this._offsetPrev,H=this._offsetNext,R=this._weightPrev,O=this._weightNext,N=(E-Q)/(B-Q),$=N*N,L=$*N,W=-R*L+2*R*$-R*N,Z=(1+R)*L+(-1.5-2*R)*$+(-0.5+R)*N+1,G=(-1-O)*L+(1.5+O)*$+0.5*N,X=O*L-O*$;for(let q=0;q!==K;++q)I[q]=W*C[Y+q]+Z*C[U+q]+G*C[J+q]+X*C[H+q];return I}}class mC extends KI{constructor(A,Q,E,B){super(A,Q,E,B)}interpolate_(A,Q,E,B){let I=this.resultBuffer,C=this.sampleValues,K=this.valueSize,J=A*K,U=J-K,Y=(E-Q)/(B-Q),H=1-Y;for(let R=0;R!==K;++R)I[R]=C[U+R]*H+C[J+R]*Y;return I}}class b9 extends KI{constructor(A,Q,E,B){super(A,Q,E,B)}interpolate_(A){return this.copySampleValue_(A-1)}}class xE{constructor(A,Q,E,B){if(A===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(Q===void 0||Q.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+A);this.name=A,this.times=Y1(Q,this.TimeBufferType),this.values=Y1(E,this.ValueBufferType),this.setInterpolation(B||this.DefaultInterpolation)}static toJSON(A){let Q=A.constructor,E;if(Q.toJSON!==this.toJSON)E=Q.toJSON(A);else{E={name:A.name,times:Y1(A.times,Array),values:Y1(A.values,Array)};let B=A.getInterpolation();if(B!==A.DefaultInterpolation)E.interpolation=B}return E.type=A.ValueTypeName,E}InterpolantFactoryMethodDiscrete(A){return new b9(this.times,this.values,this.getValueSize(),A)}InterpolantFactoryMethodLinear(A){return new mC(this.times,this.values,this.getValueSize(),A)}InterpolantFactoryMethodSmooth(A){return new x9(this.times,this.values,this.getValueSize(),A)}setInterpolation(A){let Q;switch(A){case 2300:Q=this.InterpolantFactoryMethodDiscrete;break;case 2301:Q=this.InterpolantFactoryMethodLinear;break;case 2302:Q=this.InterpolantFactoryMethodSmooth;break}if(Q===void 0){let E="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(A!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(E);return console.warn("THREE.KeyframeTrack:",E),this}return this.createInterpolant=Q,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(A){if(A!==0){let Q=this.times;for(let E=0,B=Q.length;E!==B;++E)Q[E]+=A}return this}scale(A){if(A!==1){let Q=this.times;for(let E=0,B=Q.length;E!==B;++E)Q[E]*=A}return this}trim(A,Q){let E=this.times,B=E.length,I=0,C=B-1;while(I!==B&&E[I]<A)++I;while(C!==-1&&E[C]>Q)--C;if(++C,I!==0||C!==B){if(I>=C)C=Math.max(C,1),I=C-1;let K=this.getValueSize();this.times=E.slice(I,C),this.values=this.values.slice(I*K,C*K)}return this}validate(){let A=!0,Q=this.getValueSize();if(Q-Math.floor(Q)!==0)console.error("THREE.KeyframeTrack: Invalid value size in track.",this),A=!1;let E=this.times,B=this.values,I=E.length;if(I===0)console.error("THREE.KeyframeTrack: Track is empty.",this),A=!1;let C=null;for(let K=0;K!==I;K++){let J=E[K];if(typeof J==="number"&&isNaN(J)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,K,J),A=!1;break}if(C!==null&&C>J){console.error("THREE.KeyframeTrack: Out of order keys.",this,K,J,C),A=!1;break}C=J}if(B!==void 0){if(iR(B))for(let K=0,J=B.length;K!==J;++K){let U=B[K];if(isNaN(U)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,K,U),A=!1;break}}}return A}optimize(){let A=this.times.slice(),Q=this.values.slice(),E=this.getValueSize(),B=this.getInterpolation()===2302,I=A.length-1,C=1;for(let K=1;K<I;++K){let J=!1,U=A[K],Y=A[K+1];if(U!==Y&&(K!==1||U!==A[0]))if(!B){let H=K*E,R=H-E,O=H+E;for(let N=0;N!==E;++N){let $=Q[H+N];if($!==Q[R+N]||$!==Q[O+N]){J=!0;break}}}else J=!0;if(J){if(K!==C){A[C]=A[K];let H=K*E,R=C*E;for(let O=0;O!==E;++O)Q[R+O]=Q[H+O]}++C}}if(I>0){A[C]=A[I];for(let K=I*E,J=C*E,U=0;U!==E;++U)Q[J+U]=Q[K+U];++C}if(C!==A.length)this.times=A.slice(0,C),this.values=Q.slice(0,C*E);else this.times=A,this.values=Q;return this}clone(){let A=this.times.slice(),Q=this.values.slice(),B=new this.constructor(this.name,A,Q);return B.createInterpolant=this.createInterpolant,B}}xE.prototype.TimeBufferType=Float32Array;xE.prototype.ValueBufferType=Float32Array;xE.prototype.DefaultInterpolation=2301;class fB extends xE{constructor(A,Q,E){super(A,Q,E)}}fB.prototype.ValueTypeName="bool";fB.prototype.ValueBufferType=Array;fB.prototype.DefaultInterpolation=2300;fB.prototype.InterpolantFactoryMethodLinear=void 0;fB.prototype.InterpolantFactoryMethodSmooth=void 0;class a8 extends xE{}a8.prototype.ValueTypeName="color";class zE extends xE{}zE.prototype.ValueTypeName="number";class f9 extends KI{constructor(A,Q,E,B){super(A,Q,E,B)}interpolate_(A,Q,E,B){let I=this.resultBuffer,C=this.sampleValues,K=this.valueSize,J=(E-Q)/(B-Q),U=A*K;for(let Y=U+K;U!==Y;U+=4)J0.slerpFlat(I,0,C,U-K,C,U,J);return I}}class ME extends xE{InterpolantFactoryMethodLinear(A){return new f9(this.times,this.values,this.getValueSize(),A)}}ME.prototype.ValueTypeName="quaternion";ME.prototype.InterpolantFactoryMethodSmooth=void 0;class JI extends xE{constructor(A,Q,E){super(A,Q,E)}}JI.prototype.ValueTypeName="string";JI.prototype.ValueBufferType=Array;JI.prototype.DefaultInterpolation=2300;JI.prototype.InterpolantFactoryMethodLinear=void 0;JI.prototype.InterpolantFactoryMethodSmooth=void 0;class YE extends xE{}YE.prototype.ValueTypeName="vector";class oQ{constructor(A="",Q=-1,E=[],B=2500){if(this.name=A,this.tracks=E,this.duration=Q,this.blendMode=B,this.uuid=TE(),this.duration<0)this.resetDuration()}static parse(A){let Q=[],E=A.tracks,B=1/(A.fps||1);for(let C=0,K=E.length;C!==K;++C)Q.push(A5(E[C]).scale(B));let I=new this(A.name,A.duration,Q,A.blendMode);return I.uuid=A.uuid,I}static toJSON(A){let Q=[],E=A.tracks,B={name:A.name,duration:A.duration,tracks:Q,uuid:A.uuid,blendMode:A.blendMode};for(let I=0,C=E.length;I!==C;++I)Q.push(xE.toJSON(E[I]));return B}static CreateFromMorphTargetSequence(A,Q,E,B){let I=Q.length,C=[];for(let K=0;K<I;K++){let J=[],U=[];J.push((K+I-1)%I,K,(K+1)%I),U.push(0,1,0);let Y=oR(J);if(J=yY(J,1,Y),U=yY(U,1,Y),!B&&J[0]===0)J.push(I),U.push(U[0]);C.push(new zE(".morphTargetInfluences["+Q[K].name+"]",J,U).scale(1/E))}return new this(A,-1,C)}static findByName(A,Q){let E=A;if(!Array.isArray(A)){let B=A;E=B.geometry&&B.geometry.animations||B.animations}for(let B=0;B<E.length;B++)if(E[B].name===Q)return E[B];return null}static CreateClipsFromMorphTargetSequences(A,Q,E){let B={},I=/^([\w-]*?)([\d]+)$/;for(let K=0,J=A.length;K<J;K++){let U=A[K],Y=U.name.match(I);if(Y&&Y.length>1){let H=Y[1],R=B[H];if(!R)B[H]=R=[];R.push(U)}}let C=[];for(let K in B)C.push(this.CreateFromMorphTargetSequence(K,B[K],Q,E));return C}static parseAnimation(A,Q){if(!A)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let E=function(H,R,O,N,$){if(O.length!==0){let L=[],W=[];if(TO(O,L,W,N),L.length!==0)$.push(new H(R,L,W))}},B=[],I=A.name||"default",C=A.fps||30,K=A.blendMode,J=A.length||-1,U=A.hierarchy||[];for(let H=0;H<U.length;H++){let R=U[H].keys;if(!R||R.length===0)continue;if(R[0].morphTargets){let O={},N;for(N=0;N<R.length;N++)if(R[N].morphTargets)for(let $=0;$<R[N].morphTargets.length;$++)O[R[N].morphTargets[$]]=-1;for(let $ in O){let L=[],W=[];for(let Z=0;Z!==R[N].morphTargets.length;++Z){let G=R[N];L.push(G.time),W.push(G.morphTarget===$?1:0)}B.push(new zE(".morphTargetInfluence["+$+"]",L,W))}J=O.length*C}else{let O=".bones["+Q[H].name+"]";E(YE,O+".position",R,"pos",B),E(ME,O+".quaternion",R,"rot",B),E(YE,O+".scale",R,"scl",B)}}if(B.length===0)return null;return new this(I,J,B,K)}resetDuration(){let A=this.tracks,Q=0;for(let E=0,B=A.length;E!==B;++E){let I=this.tracks[E];Q=Math.max(Q,I.times[I.times.length-1])}return this.duration=Q,this}trim(){for(let A=0;A<this.tracks.length;A++)this.tracks[A].trim(0,this.duration);return this}validate(){let A=!0;for(let Q=0;Q<this.tracks.length;Q++)A=A&&this.tracks[Q].validate();return A}optimize(){for(let A=0;A<this.tracks.length;A++)this.tracks[A].optimize();return this}clone(){let A=[];for(let Q=0;Q<this.tracks.length;Q++)A.push(this.tracks[Q].clone());return new this.constructor(this.name,this.duration,A,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function eL(A){switch(A.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zE;case"vector":case"vector2":case"vector3":case"vector4":return YE;case"color":return a8;case"quaternion":return ME;case"bool":case"boolean":return fB;case"string":return JI}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+A)}function A5(A){if(A.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let Q=eL(A.type);if(A.times===void 0){let E=[],B=[];TO(A.keys,E,B,"value"),A.times=E,A.values=B}if(Q.parse!==void 0)return Q.parse(A);else return new Q(A.name,A.times,A.values,A.interpolation)}var SB={enabled:!1,files:{},add:function(A,Q){if(this.enabled===!1)return;this.files[A]=Q},get:function(A){if(this.enabled===!1)return;return this.files[A]},remove:function(A){delete this.files[A]},clear:function(){this.files={}}};class t8{constructor(A,Q,E){let B=this,I=!1,C=0,K=0,J=void 0,U=[];this.onStart=void 0,this.onLoad=A,this.onProgress=Q,this.onError=E,this.itemStart=function(Y){if(K++,I===!1){if(B.onStart!==void 0)B.onStart(Y,C,K)}I=!0},this.itemEnd=function(Y){if(C++,B.onProgress!==void 0)B.onProgress(Y,C,K);if(C===K){if(I=!1,B.onLoad!==void 0)B.onLoad()}},this.itemError=function(Y){if(B.onError!==void 0)B.onError(Y)},this.resolveURL=function(Y){if(J)return J(Y);return Y},this.setURLModifier=function(Y){return J=Y,this},this.addHandler=function(Y,H){return U.push(Y,H),this},this.removeHandler=function(Y){let H=U.indexOf(Y);if(H!==-1)U.splice(H,2);return this},this.getHandler=function(Y){for(let H=0,R=U.length;H<R;H+=2){let O=U[H],N=U[H+1];if(O.global)O.lastIndex=0;if(O.test(Y))return N}return null}}}var u9=/*@__PURE__*/new t8;class C0{constructor(A){this.manager=A!==void 0?A:u9,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(A,Q){let E=this;return new Promise(function(B,I){E.load(A,B,Q,I)})}parse(){}setCrossOrigin(A){return this.crossOrigin=A,this}setWithCredentials(A){return this.withCredentials=A,this}setPath(A){return this.path=A,this}setResourcePath(A){return this.resourcePath=A,this}setRequestHeader(A){return this.requestHeader=A,this}}C0.DEFAULT_MATERIAL_NAME="__DEFAULT";var aB={};class aR extends Error{constructor(A,Q){super(A);this.response=Q}}class U0 extends C0{constructor(A){super(A)}load(A,Q,E,B){if(A===void 0)A="";if(this.path!==void 0)A=this.path+A;A=this.manager.resolveURL(A);let I=SB.get(A);if(I!==void 0)return this.manager.itemStart(A),setTimeout(()=>{if(Q)Q(I);this.manager.itemEnd(A)},0),I;if(aB[A]!==void 0){aB[A].push({onLoad:Q,onProgress:E,onError:B});return}aB[A]=[],aB[A].push({onLoad:Q,onProgress:E,onError:B});let C=new Request(A,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),K=this.mimeType,J=this.responseType;fetch(C).then((U)=>{if(U.status===200||U.status===0){if(U.status===0)console.warn("THREE.FileLoader: HTTP Status 0 received.");if(typeof ReadableStream==="undefined"||U.body===void 0||U.body.getReader===void 0)return U;let Y=aB[A],H=U.body.getReader(),R=U.headers.get("X-File-Size")||U.headers.get("Content-Length"),O=R?parseInt(R):0,N=O!==0,$=0,L=new ReadableStream({start(W){Z();function Z(){H.read().then(({done:G,value:X})=>{if(G)W.close();else{$+=X.byteLength;let q=new ProgressEvent("progress",{lengthComputable:N,loaded:$,total:O});for(let M=0,F=Y.length;M<F;M++){let D=Y[M];if(D.onProgress)D.onProgress(q)}W.enqueue(X),Z()}},(G)=>{W.error(G)})}}});return new Response(L)}else throw new aR(`fetch for "${U.url}" responded with ${U.status}: ${U.statusText}`,U)}).then((U)=>{switch(J){case"arraybuffer":return U.arrayBuffer();case"blob":return U.blob();case"document":return U.text().then((Y)=>{return new DOMParser().parseFromString(Y,K)});case"json":return U.json();default:if(K===void 0)return U.text();else{let H=/charset="?([^;"\s]*)"?/i.exec(K),R=H&&H[1]?H[1].toLowerCase():void 0,O=new TextDecoder(R);return U.arrayBuffer().then((N)=>O.decode(N))}}}).then((U)=>{SB.add(A,U);let Y=aB[A];delete aB[A];for(let H=0,R=Y.length;H<R;H++){let O=Y[H];if(O.onLoad)O.onLoad(U)}}).catch((U)=>{let Y=aB[A];if(Y===void 0)throw this.manager.itemError(A),U;delete aB[A];for(let H=0,R=Y.length;H<R;H++){let O=Y[H];if(O.onError)O.onError(U)}this.manager.itemError(A)}).finally(()=>{this.manager.itemEnd(A)}),this.manager.itemStart(A)}setResponseType(A){return this.responseType=A,this}setMimeType(A){return this.mimeType=A,this}}class zO extends C0{constructor(A){super(A)}load(A,Q,E,B){let I=this,C=new U0(this.manager);C.setPath(this.path),C.setRequestHeader(this.requestHeader),C.setWithCredentials(this.withCredentials),C.load(A,function(K){try{Q(I.parse(JSON.parse(K)))}catch(J){if(B)B(J);else console.error(J);I.manager.itemError(A)}},E,B)}parse(A){let Q=[];for(let E=0;E<A.length;E++){let B=oQ.parse(A[E]);Q.push(B)}return Q}}class e8 extends C0{constructor(A){super(A)}load(A,Q,E,B){let I=this,C=[],K=new yE,J=new U0(this.manager);J.setPath(this.path),J.setResponseType("arraybuffer"),J.setRequestHeader(this.requestHeader),J.setWithCredentials(I.withCredentials);let U=0;function Y(H){J.load(A[H],function(R){let O=I.parse(R,!0);if(C[H]={width:O.width,height:O.height,format:O.format,mipmaps:O.mipmaps},U+=1,U===6){if(O.mipmapCount===1)K.minFilter=1006;if(K.image=C,K.format=O.format,K.needsUpdate=!0,Q)Q(K)}},E,B)}if(Array.isArray(A))for(let H=0,R=A.length;H<R;++H)Y(H);else J.load(A,function(H){let R=I.parse(H,!0);if(R.isCubemap){let O=R.mipmaps.length/R.mipmapCount;for(let N=0;N<O;N++){C[N]={mipmaps:[]};for(let $=0;$<R.mipmapCount;$++)C[N].mipmaps.push(R.mipmaps[N*R.mipmapCount+$]),C[N].format=R.format,C[N].width=R.width,C[N].height=R.height}K.image=C}else K.image.width=R.width,K.image.height=R.height,K.mipmaps=R.mipmaps;if(R.mipmapCount===1)K.minFilter=1006;if(K.format=R.format,K.needsUpdate=!0,Q)Q(K)},E,B);return K}}class R1 extends C0{constructor(A){super(A)}load(A,Q,E,B){if(this.path!==void 0)A=this.path+A;A=this.manager.resolveURL(A);let I=this,C=SB.get(A);if(C!==void 0)return I.manager.itemStart(A),setTimeout(function(){if(Q)Q(C);I.manager.itemEnd(A)},0),C;let K=S8("img");function J(){if(Y(),SB.add(A,this),Q)Q(this);I.manager.itemEnd(A)}function U(H){if(Y(),B)B(H);I.manager.itemError(A),I.manager.itemEnd(A)}function Y(){K.removeEventListener("load",J,!1),K.removeEventListener("error",U,!1)}if(K.addEventListener("load",J,!1),K.addEventListener("error",U,!1),A.slice(0,5)!=="data:"){if(this.crossOrigin!==void 0)K.crossOrigin=this.crossOrigin}return I.manager.itemStart(A),K.src=A,K}}class PO extends C0{constructor(A){super(A)}load(A,Q,E,B){let I=new QI;I.colorSpace="srgb";let C=new R1(this.manager);C.setCrossOrigin(this.crossOrigin),C.setPath(this.path);let K=0;function J(U){C.load(A[U],function(Y){if(I.images[U]=Y,K++,K===6){if(I.needsUpdate=!0,Q)Q(I)}},void 0,B)}for(let U=0;U<A.length;++U)J(U);return I}}class yI extends C0{constructor(A){super(A)}load(A,Q,E,B){let I=this,C=new h0,K=new U0(this.manager);return K.setResponseType("arraybuffer"),K.setRequestHeader(this.requestHeader),K.setPath(this.path),K.setWithCredentials(I.withCredentials),K.load(A,function(J){let U;try{U=I.parse(J)}catch(Y){if(B!==void 0)B(Y);else{console.error(Y);return}}if(U.image!==void 0)C.image=U.image;else if(U.data!==void 0)C.image.width=U.width,C.image.height=U.height,C.image.data=U.data;if(C.wrapS=U.wrapS!==void 0?U.wrapS:1001,C.wrapT=U.wrapT!==void 0?U.wrapT:1001,C.magFilter=U.magFilter!==void 0?U.magFilter:1006,C.minFilter=U.minFilter!==void 0?U.minFilter:1006,C.anisotropy=U.anisotropy!==void 0?U.anisotropy:1,U.colorSpace!==void 0)C.colorSpace=U.colorSpace;if(U.flipY!==void 0)C.flipY=U.flipY;if(U.format!==void 0)C.format=U.format;if(U.type!==void 0)C.type=U.type;if(U.mipmaps!==void 0)C.mipmaps=U.mipmaps,C.minFilter=1008;if(U.mipmapCount===1)C.minFilter=1006;if(U.generateMipmaps!==void 0)C.generateMipmaps=U.generateMipmaps;if(C.needsUpdate=!0,Q)Q(C,U)},E,B),C}}class nQ extends C0{constructor(A){super(A)}load(A,Q,E,B){let I=new EQ,C=new R1(this.manager);return C.setCrossOrigin(this.crossOrigin),C.setPath(this.path),C.load(A,function(K){if(I.image=K,I.needsUpdate=!0,Q!==void 0)Q(I)},E,B),I}}class uB extends I0{constructor(A,Q=1){super();this.isLight=!0,this.type="Light",this.color=new a(A),this.intensity=Q}dispose(){}copy(A,Q){return super.copy(A,Q),this.color.copy(A.color),this.intensity=A.intensity,this}toJSON(A){let Q=super.toJSON(A);if(Q.object.color=this.color.getHex(),Q.object.intensity=this.intensity,this.groundColor!==void 0)Q.object.groundColor=this.groundColor.getHex();if(this.distance!==void 0)Q.object.distance=this.distance;if(this.angle!==void 0)Q.object.angle=this.angle;if(this.decay!==void 0)Q.object.decay=this.decay;if(this.penumbra!==void 0)Q.object.penumbra=this.penumbra;if(this.shadow!==void 0)Q.object.shadow=this.shadow.toJSON();if(this.target!==void 0)Q.object.target=this.target.uuid;return Q}}class p9 extends uB{constructor(A,Q,E){super(A,E);this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(I0.DEFAULT_UP),this.updateMatrix(),this.groundColor=new a(Q)}copy(A,Q){return super.copy(A,Q),this.groundColor.copy(A.groundColor),this}}var TY=/*@__PURE__*/new RA,TZ=/*@__PURE__*/new y,zZ=/*@__PURE__*/new y;class m9{constructor(A){this.camera=A,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new AA(512,512),this.map=null,this.mapPass=null,this.matrix=new RA,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xB,this._frameExtents=new AA(1,1),this._viewportCount=1,this._viewports=[new MA(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(A){let Q=this.camera,E=this.matrix;TZ.setFromMatrixPosition(A.matrixWorld),Q.position.copy(TZ),zZ.setFromMatrixPosition(A.target.matrixWorld),Q.lookAt(zZ),Q.updateMatrixWorld(),TY.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TY),E.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),E.multiply(TY)}getViewport(A){return this._viewports[A]}getFrameExtents(){return this._frameExtents}dispose(){if(this.map)this.map.dispose();if(this.mapPass)this.mapPass.dispose()}copy(A){return this.camera=A.camera.clone(),this.intensity=A.intensity,this.bias=A.bias,this.radius=A.radius,this.mapSize.copy(A.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let A={};if(this.intensity!==1)A.intensity=this.intensity;if(this.bias!==0)A.bias=this.bias;if(this.normalBias!==0)A.normalBias=this.normalBias;if(this.radius!==1)A.radius=this.radius;if(this.mapSize.x!==512||this.mapSize.y!==512)A.mapSize=this.mapSize.toArray();return A.camera=this.camera.toJSON(!1).object,delete A.camera.matrix,A}}class tR extends m9{constructor(){super(new v0(50,1,0.5,500));this.isSpotLightShadow=!0,this.focus=1}updateMatrices(A){let Q=this.camera,E=H1*2*A.angle*this.focus,B=this.mapSize.width/this.mapSize.height,I=A.distance||Q.far;if(E!==Q.fov||B!==Q.aspect||I!==Q.far)Q.fov=E,Q.aspect=B,Q.far=I,Q.updateProjectionMatrix();super.updateMatrices(A)}copy(A){return super.copy(A),this.focus=A.focus,this}}class UI extends uB{constructor(A,Q,E=0,B=Math.PI/3,I=0,C=2){super(A,Q);this.isSpotLight=!0,this.type="SpotLight",this.position.copy(I0.DEFAULT_UP),this.updateMatrix(),this.target=new I0,this.distance=E,this.angle=B,this.penumbra=I,this.decay=C,this.map=null,this.shadow=new tR}get power(){return this.intensity*Math.PI}set power(A){this.intensity=A/Math.PI}dispose(){this.shadow.dispose()}copy(A,Q){return super.copy(A,Q),this.distance=A.distance,this.angle=A.angle,this.penumbra=A.penumbra,this.decay=A.decay,this.target=A.target.clone(),this.shadow=A.shadow.clone(),this}}var PZ=/*@__PURE__*/new RA,r6=/*@__PURE__*/new y,zY=/*@__PURE__*/new y;class eR extends m9{constructor(){super(new v0(90,1,0.5,500));this.isPointLightShadow=!0,this._frameExtents=new AA(4,2),this._viewportCount=6,this._viewports=[new MA(2,1,1,1),new MA(0,1,1,1),new MA(3,1,1,1),new MA(1,1,1,1),new MA(3,0,1,1),new MA(1,0,1,1)],this._cubeDirections=[new y(1,0,0),new y(-1,0,0),new y(0,0,1),new y(0,0,-1),new y(0,1,0),new y(0,-1,0)],this._cubeUps=[new y(0,1,0),new y(0,1,0),new y(0,1,0),new y(0,1,0),new y(0,0,1),new y(0,0,-1)]}updateMatrices(A,Q=0){let E=this.camera,B=this.matrix,I=A.distance||E.far;if(I!==E.far)E.far=I,E.updateProjectionMatrix();r6.setFromMatrixPosition(A.matrixWorld),E.position.copy(r6),zY.copy(E.position),zY.add(this._cubeDirections[Q]),E.up.copy(this._cubeUps[Q]),E.lookAt(zY),E.updateMatrixWorld(),B.makeTranslation(-r6.x,-r6.y,-r6.z),PZ.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PZ)}}class WB extends uB{constructor(A,Q,E=0,B=2){super(A,Q);this.isPointLight=!0,this.type="PointLight",this.distance=E,this.decay=B,this.shadow=new eR}get power(){return this.intensity*4*Math.PI}set power(A){this.intensity=A/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(A,Q){return super.copy(A,Q),this.distance=A.distance,this.decay=A.decay,this.shadow=A.shadow.clone(),this}}class HE extends h1{constructor(A=-1,Q=1,E=1,B=-1,I=0.1,C=2000){super();this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=A,this.right=Q,this.top=E,this.bottom=B,this.near=I,this.far=C,this.updateProjectionMatrix()}copy(A,Q){return super.copy(A,Q),this.left=A.left,this.right=A.right,this.top=A.top,this.bottom=A.bottom,this.near=A.near,this.far=A.far,this.zoom=A.zoom,this.view=A.view===null?null:Object.assign({},A.view),this}setViewOffset(A,Q,E,B,I,C){if(this.view===null)this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=!0,this.view.fullWidth=A,this.view.fullHeight=Q,this.view.offsetX=E,this.view.offsetY=B,this.view.width=I,this.view.height=C,this.updateProjectionMatrix()}clearViewOffset(){if(this.view!==null)this.view.enabled=!1;this.updateProjectionMatrix()}updateProjectionMatrix(){let A=(this.right-this.left)/(2*this.zoom),Q=(this.top-this.bottom)/(2*this.zoom),E=(this.right+this.left)/2,B=(this.top+this.bottom)/2,I=E-A,C=E+A,K=B+Q,J=B-Q;if(this.view!==null&&this.view.enabled){let U=(this.right-this.left)/this.view.fullWidth/this.zoom,Y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;I+=U*this.view.offsetX,C=I+U*this.view.width,K-=Y*this.view.offsetY,J=K-Y*this.view.height}this.projectionMatrix.makeOrthographic(I,C,K,J,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(A){let Q=super.toJSON(A);if(Q.object.zoom=this.zoom,Q.object.left=this.left,Q.object.right=this.right,Q.object.top=this.top,Q.object.bottom=this.bottom,Q.object.near=this.near,Q.object.far=this.far,this.view!==null)Q.object.view=Object.assign({},this.view);return Q}}class AN extends m9{constructor(){super(new HE(-5,5,5,-5,0.5,500));this.isDirectionalLightShadow=!0}}class XB extends uB{constructor(A,Q){super(A,Q);this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(I0.DEFAULT_UP),this.updateMatrix(),this.target=new I0,this.shadow=new AN}dispose(){this.shadow.dispose()}copy(A){return super.copy(A),this.target=A.target.clone(),this.shadow=A.shadow.clone(),this}}class A6 extends uB{constructor(A,Q){super(A,Q);this.isAmbientLight=!0,this.type="AmbientLight"}}class cC extends uB{constructor(A,Q,E=10,B=10){super(A,Q);this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=E,this.height=B}get power(){return this.intensity*this.width*this.height*Math.PI}set power(A){this.intensity=A/(this.width*this.height*Math.PI)}copy(A){return super.copy(A),this.width=A.width,this.height=A.height,this}toJSON(A){let Q=super.toJSON(A);return Q.object.width=this.width,Q.object.height=this.height,Q}}class lC{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let A=0;A<9;A++)this.coefficients.push(new y)}set(A){for(let Q=0;Q<9;Q++)this.coefficients[Q].copy(A[Q]);return this}zero(){for(let A=0;A<9;A++)this.coefficients[A].set(0,0,0);return this}getAt(A,Q){let{x:E,y:B,z:I}=A,C=this.coefficients;return Q.copy(C[0]).multiplyScalar(0.282095),Q.addScaledVector(C[1],0.488603*B),Q.addScaledVector(C[2],0.488603*I),Q.addScaledVector(C[3],0.488603*E),Q.addScaledVector(C[4],1.092548*(E*B)),Q.addScaledVector(C[5],1.092548*(B*I)),Q.addScaledVector(C[6],0.315392*(3*I*I-1)),Q.addScaledVector(C[7],1.092548*(E*I)),Q.addScaledVector(C[8],0.546274*(E*E-B*B)),Q}getIrradianceAt(A,Q){let{x:E,y:B,z:I}=A,C=this.coefficients;return Q.copy(C[0]).multiplyScalar(0.886227),Q.addScaledVector(C[1],1.023328*B),Q.addScaledVector(C[2],1.023328*I),Q.addScaledVector(C[3],1.023328*E),Q.addScaledVector(C[4],0.858086*E*B),Q.addScaledVector(C[5],0.858086*B*I),Q.addScaledVector(C[6],0.743125*I*I-0.247708),Q.addScaledVector(C[7],0.858086*E*I),Q.addScaledVector(C[8],0.429043*(E*E-B*B)),Q}add(A){for(let Q=0;Q<9;Q++)this.coefficients[Q].add(A.coefficients[Q]);return this}addScaledSH(A,Q){for(let E=0;E<9;E++)this.coefficients[E].addScaledVector(A.coefficients[E],Q);return this}scale(A){for(let Q=0;Q<9;Q++)this.coefficients[Q].multiplyScalar(A);return this}lerp(A,Q){for(let E=0;E<9;E++)this.coefficients[E].lerp(A.coefficients[E],Q);return this}equals(A){for(let Q=0;Q<9;Q++)if(!this.coefficients[Q].equals(A.coefficients[Q]))return!1;return!0}copy(A){return this.set(A.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(A,Q=0){let E=this.coefficients;for(let B=0;B<9;B++)E[B].fromArray(A,Q+B*3);return this}toArray(A=[],Q=0){let E=this.coefficients;for(let B=0;B<9;B++)E[B].toArray(A,Q+B*3);return A}static getBasisAt(A,Q){let{x:E,y:B,z:I}=A;Q[0]=0.282095,Q[1]=0.488603*B,Q[2]=0.488603*I,Q[3]=0.488603*E,Q[4]=1.092548*E*B,Q[5]=1.092548*B*I,Q[6]=0.315392*(3*I*I-1),Q[7]=1.092548*E*I,Q[8]=0.546274*(E*E-B*B)}}class Q6 extends uB{constructor(A=new lC,Q=1){super(void 0,Q);this.isLightProbe=!0,this.sh=A}copy(A){return super.copy(A),this.sh.copy(A.sh),this}fromJSON(A){return this.intensity=A.intensity,this.sh.fromArray(A.sh),this}toJSON(A){let Q=super.toJSON(A);return Q.object.sh=this.sh.toArray(),Q}}class dC extends C0{constructor(A){super(A);this.textures={}}load(A,Q,E,B){let I=this,C=new U0(I.manager);C.setPath(I.path),C.setRequestHeader(I.requestHeader),C.setWithCredentials(I.withCredentials),C.load(A,function(K){try{Q(I.parse(JSON.parse(K)))}catch(J){if(B)B(J);else console.error(J);I.manager.itemError(A)}},E,B)}parse(A){let Q=this.textures;function E(I){if(Q[I]===void 0)console.warn("THREE.MaterialLoader: Undefined texture",I);return Q[I]}let B=this.createMaterialFromType(A.type);if(A.uuid!==void 0)B.uuid=A.uuid;if(A.name!==void 0)B.name=A.name;if(A.color!==void 0&&B.color!==void 0)B.color.setHex(A.color);if(A.roughness!==void 0)B.roughness=A.roughness;if(A.metalness!==void 0)B.metalness=A.metalness;if(A.sheen!==void 0)B.sheen=A.sheen;if(A.sheenColor!==void 0)B.sheenColor=new a().setHex(A.sheenColor);if(A.sheenRoughness!==void 0)B.sheenRoughness=A.sheenRoughness;if(A.emissive!==void 0&&B.emissive!==void 0)B.emissive.setHex(A.emissive);if(A.specular!==void 0&&B.specular!==void 0)B.specular.setHex(A.specular);if(A.specularIntensity!==void 0)B.specularIntensity=A.specularIntensity;if(A.specularColor!==void 0&&B.specularColor!==void 0)B.specularColor.setHex(A.specularColor);if(A.shininess!==void 0)B.shininess=A.shininess;if(A.clearcoat!==void 0)B.clearcoat=A.clearcoat;if(A.clearcoatRoughness!==void 0)B.clearcoatRoughness=A.clearcoatRoughness;if(A.dispersion!==void 0)B.dispersion=A.dispersion;if(A.iridescence!==void 0)B.iridescence=A.iridescence;if(A.iridescenceIOR!==void 0)B.iridescenceIOR=A.iridescenceIOR;if(A.iridescenceThicknessRange!==void 0)B.iridescenceThicknessRange=A.iridescenceThicknessRange;if(A.transmission!==void 0)B.transmission=A.transmission;if(A.thickness!==void 0)B.thickness=A.thickness;if(A.attenuationDistance!==void 0)B.attenuationDistance=A.attenuationDistance;if(A.attenuationColor!==void 0&&B.attenuationColor!==void 0)B.attenuationColor.setHex(A.attenuationColor);if(A.anisotropy!==void 0)B.anisotropy=A.anisotropy;if(A.anisotropyRotation!==void 0)B.anisotropyRotation=A.anisotropyRotation;if(A.fog!==void 0)B.fog=A.fog;if(A.flatShading!==void 0)B.flatShading=A.flatShading;if(A.blending!==void 0)B.blending=A.blending;if(A.combine!==void 0)B.combine=A.combine;if(A.side!==void 0)B.side=A.side;if(A.shadowSide!==void 0)B.shadowSide=A.shadowSide;if(A.opacity!==void 0)B.opacity=A.opacity;if(A.transparent!==void 0)B.transparent=A.transparent;if(A.alphaTest!==void 0)B.alphaTest=A.alphaTest;if(A.alphaHash!==void 0)B.alphaHash=A.alphaHash;if(A.depthFunc!==void 0)B.depthFunc=A.depthFunc;if(A.depthTest!==void 0)B.depthTest=A.depthTest;if(A.depthWrite!==void 0)B.depthWrite=A.depthWrite;if(A.colorWrite!==void 0)B.colorWrite=A.colorWrite;if(A.blendSrc!==void 0)B.blendSrc=A.blendSrc;if(A.blendDst!==void 0)B.blendDst=A.blendDst;if(A.blendEquation!==void 0)B.blendEquation=A.blendEquation;if(A.blendSrcAlpha!==void 0)B.blendSrcAlpha=A.blendSrcAlpha;if(A.blendDstAlpha!==void 0)B.blendDstAlpha=A.blendDstAlpha;if(A.blendEquationAlpha!==void 0)B.blendEquationAlpha=A.blendEquationAlpha;if(A.blendColor!==void 0&&B.blendColor!==void 0)B.blendColor.setHex(A.blendColor);if(A.blendAlpha!==void 0)B.blendAlpha=A.blendAlpha;if(A.stencilWriteMask!==void 0)B.stencilWriteMask=A.stencilWriteMask;if(A.stencilFunc!==void 0)B.stencilFunc=A.stencilFunc;if(A.stencilRef!==void 0)B.stencilRef=A.stencilRef;if(A.stencilFuncMask!==void 0)B.stencilFuncMask=A.stencilFuncMask;if(A.stencilFail!==void 0)B.stencilFail=A.stencilFail;if(A.stencilZFail!==void 0)B.stencilZFail=A.stencilZFail;if(A.stencilZPass!==void 0)B.stencilZPass=A.stencilZPass;if(A.stencilWrite!==void 0)B.stencilWrite=A.stencilWrite;if(A.wireframe!==void 0)B.wireframe=A.wireframe;if(A.wireframeLinewidth!==void 0)B.wireframeLinewidth=A.wireframeLinewidth;if(A.wireframeLinecap!==void 0)B.wireframeLinecap=A.wireframeLinecap;if(A.wireframeLinejoin!==void 0)B.wireframeLinejoin=A.wireframeLinejoin;if(A.rotation!==void 0)B.rotation=A.rotation;if(A.linewidth!==void 0)B.linewidth=A.linewidth;if(A.dashSize!==void 0)B.dashSize=A.dashSize;if(A.gapSize!==void 0)B.gapSize=A.gapSize;if(A.scale!==void 0)B.scale=A.scale;if(A.polygonOffset!==void 0)B.polygonOffset=A.polygonOffset;if(A.polygonOffsetFactor!==void 0)B.polygonOffsetFactor=A.polygonOffsetFactor;if(A.polygonOffsetUnits!==void 0)B.polygonOffsetUnits=A.polygonOffsetUnits;if(A.dithering!==void 0)B.dithering=A.dithering;if(A.alphaToCoverage!==void 0)B.alphaToCoverage=A.alphaToCoverage;if(A.premultipliedAlpha!==void 0)B.premultipliedAlpha=A.premultipliedAlpha;if(A.forceSinglePass!==void 0)B.forceSinglePass=A.forceSinglePass;if(A.visible!==void 0)B.visible=A.visible;if(A.toneMapped!==void 0)B.toneMapped=A.toneMapped;if(A.userData!==void 0)B.userData=A.userData;if(A.vertexColors!==void 0)if(typeof A.vertexColors==="number")B.vertexColors=A.vertexColors>0?!0:!1;else B.vertexColors=A.vertexColors;if(A.uniforms!==void 0)for(let I in A.uniforms){let C=A.uniforms[I];switch(B.uniforms[I]={},C.type){case"t":B.uniforms[I].value=E(C.value);break;case"c":B.uniforms[I].value=new a().setHex(C.value);break;case"v2":B.uniforms[I].value=new AA().fromArray(C.value);break;case"v3":B.uniforms[I].value=new y().fromArray(C.value);break;case"v4":B.uniforms[I].value=new MA().fromArray(C.value);break;case"m3":B.uniforms[I].value=new E0().fromArray(C.value);break;case"m4":B.uniforms[I].value=new RA().fromArray(C.value);break;default:B.uniforms[I].value=C.value}}if(A.defines!==void 0)B.defines=A.defines;if(A.vertexShader!==void 0)B.vertexShader=A.vertexShader;if(A.fragmentShader!==void 0)B.fragmentShader=A.fragmentShader;if(A.glslVersion!==void 0)B.glslVersion=A.glslVersion;if(A.extensions!==void 0)for(let I in A.extensions)B.extensions[I]=A.extensions[I];if(A.lights!==void 0)B.lights=A.lights;if(A.clipping!==void 0)B.clipping=A.clipping;if(A.size!==void 0)B.size=A.size;if(A.sizeAttenuation!==void 0)B.sizeAttenuation=A.sizeAttenuation;if(A.map!==void 0)B.map=E(A.map);if(A.matcap!==void 0)B.matcap=E(A.matcap);if(A.alphaMap!==void 0)B.alphaMap=E(A.alphaMap);if(A.bumpMap!==void 0)B.bumpMap=E(A.bumpMap);if(A.bumpScale!==void 0)B.bumpScale=A.bumpScale;if(A.normalMap!==void 0)B.normalMap=E(A.normalMap);if(A.normalMapType!==void 0)B.normalMapType=A.normalMapType;if(A.normalScale!==void 0){let I=A.normalScale;if(Array.isArray(I)===!1)I=[I,I];B.normalScale=new AA().fromArray(I)}if(A.displacementMap!==void 0)B.displacementMap=E(A.displacementMap);if(A.displacementScale!==void 0)B.displacementScale=A.displacementScale;if(A.displacementBias!==void 0)B.displacementBias=A.displacementBias;if(A.roughnessMap!==void 0)B.roughnessMap=E(A.roughnessMap);if(A.metalnessMap!==void 0)B.metalnessMap=E(A.metalnessMap);if(A.emissiveMap!==void 0)B.emissiveMap=E(A.emissiveMap);if(A.emissiveIntensity!==void 0)B.emissiveIntensity=A.emissiveIntensity;if(A.specularMap!==void 0)B.specularMap=E(A.specularMap);if(A.specularIntensityMap!==void 0)B.specularIntensityMap=E(A.specularIntensityMap);if(A.specularColorMap!==void 0)B.specularColorMap=E(A.specularColorMap);if(A.envMap!==void 0)B.envMap=E(A.envMap);if(A.envMapRotation!==void 0)B.envMapRotation.fromArray(A.envMapRotation);if(A.envMapIntensity!==void 0)B.envMapIntensity=A.envMapIntensity;if(A.reflectivity!==void 0)B.reflectivity=A.reflectivity;if(A.refractionRatio!==void 0)B.refractionRatio=A.refractionRatio;if(A.lightMap!==void 0)B.lightMap=E(A.lightMap);if(A.lightMapIntensity!==void 0)B.lightMapIntensity=A.lightMapIntensity;if(A.aoMap!==void 0)B.aoMap=E(A.aoMap);if(A.aoMapIntensity!==void 0)B.aoMapIntensity=A.aoMapIntensity;if(A.gradientMap!==void 0)B.gradientMap=E(A.gradientMap);if(A.clearcoatMap!==void 0)B.clearcoatMap=E(A.clearcoatMap);if(A.clearcoatRoughnessMap!==void 0)B.clearcoatRoughnessMap=E(A.clearcoatRoughnessMap);if(A.clearcoatNormalMap!==void 0)B.clearcoatNormalMap=E(A.clearcoatNormalMap);if(A.clearcoatNormalScale!==void 0)B.clearcoatNormalScale=new AA().fromArray(A.clearcoatNormalScale);if(A.iridescenceMap!==void 0)B.iridescenceMap=E(A.iridescenceMap);if(A.iridescenceThicknessMap!==void 0)B.iridescenceThicknessMap=E(A.iridescenceThicknessMap);if(A.transmissionMap!==void 0)B.transmissionMap=E(A.transmissionMap);if(A.thicknessMap!==void 0)B.thicknessMap=E(A.thicknessMap);if(A.anisotropyMap!==void 0)B.anisotropyMap=E(A.anisotropyMap);if(A.sheenColorMap!==void 0)B.sheenColorMap=E(A.sheenColorMap);if(A.sheenRoughnessMap!==void 0)B.sheenRoughnessMap=E(A.sheenRoughnessMap);return B}setTextures(A){return this.textures=A,this}createMaterialFromType(A){return dC.createMaterialFromType(A)}static createMaterialFromType(A){return new{ShadowMaterial:v9,SpriteMaterial:y1,RawShaderMaterial:II,ShaderMaterial:bA,PointsMaterial:aE,MeshPhysicalMaterial:fQ,MeshStandardMaterial:aQ,MeshPhongMaterial:DE,MeshToonMaterial:h9,MeshNormalMaterial:gE,MeshLambertMaterial:CI,MeshDepthMaterial:hI,MeshDistanceMaterial:pC,MeshBasicMaterial:_0,MeshMatcapMaterial:y9,LineDashedMaterial:g9,LineBasicMaterial:p0,Material:$Q}[A]}}class QE{static decodeText(A){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder!=="undefined")return(/*@__PURE__*/new TextDecoder()).decode(A);let Q="";for(let E=0,B=A.length;E<B;E++)Q+=String.fromCharCode(A[E]);try{return decodeURIComponent(escape(Q))}catch(E){return Q}}static extractUrlBase(A){let Q=A.lastIndexOf("/");if(Q===-1)return"./";return A.slice(0,Q+1)}static resolveURL(A,Q){if(typeof A!=="string"||A==="")return"";if(/^https?:\/\//i.test(Q)&&/^\//.test(A))Q=Q.replace(/(^https?:\/\/[^\/]+).*/i,"$1");if(/^(https?:)?\/\//i.test(A))return A;if(/^data:.*,.*$/i.test(A))return A;if(/^blob:.*$/i.test(A))return A;return Q+A}}class nC extends hA{constructor(){super();this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(A){return super.copy(A),this.instanceCount=A.instanceCount,this}toJSON(){let A=super.toJSON();return A.instanceCount=this.instanceCount,A.isInstancedBufferGeometry=!0,A}}class sC extends C0{constructor(A){super(A)}load(A,Q,E,B){let I=this,C=new U0(I.manager);C.setPath(I.path),C.setRequestHeader(I.requestHeader),C.setWithCredentials(I.withCredentials),C.load(A,function(K){try{Q(I.parse(JSON.parse(K)))}catch(J){if(B)B(J);else console.error(J);I.manager.itemError(A)}},E,B)}parse(A){let Q={},E={};function B(O,N){if(Q[N]!==void 0)return Q[N];let L=O.interleavedBuffers[N],W=I(O,L.buffer),Z=w8(L.type,W),G=new hE(Z,L.stride);return G.uuid=L.uuid,Q[N]=G,G}function I(O,N){if(E[N]!==void 0)return E[N];let L=O.arrayBuffers[N],W=new Uint32Array(L).buffer;return E[N]=W,W}let C=A.isInstancedBufferGeometry?new nC:new hA,K=A.data.index;if(K!==void 0){let O=w8(K.type,K.array);C.setIndex(new tA(O,1))}let J=A.data.attributes;for(let O in J){let N=J[O],$;if(N.isInterleavedBufferAttribute){let L=B(A.data,N.data);$=new xQ(L,N.itemSize,N.offset,N.normalized)}else{let L=w8(N.type,N.array);$=new(N.isInstancedBufferAttribute?HB:tA)(L,N.itemSize,N.normalized)}if(N.name!==void 0)$.name=N.name;if(N.usage!==void 0)$.setUsage(N.usage);C.setAttribute(O,$)}let U=A.data.morphAttributes;if(U)for(let O in U){let N=U[O],$=[];for(let L=0,W=N.length;L<W;L++){let Z=N[L],G;if(Z.isInterleavedBufferAttribute){let X=B(A.data,Z.data);G=new xQ(X,Z.itemSize,Z.offset,Z.normalized)}else{let X=w8(Z.type,Z.array);G=new tA(X,Z.itemSize,Z.normalized)}if(Z.name!==void 0)G.name=Z.name;$.push(G)}C.morphAttributes[O]=$}if(A.data.morphTargetsRelative)C.morphTargetsRelative=!0;let H=A.data.groups||A.data.drawcalls||A.data.offsets;if(H!==void 0)for(let O=0,N=H.length;O!==N;++O){let $=H[O];C.addGroup($.start,$.count,$.materialIndex)}let R=A.data.boundingSphere;if(R!==void 0){let O=new y;if(R.center!==void 0)O.fromArray(R.center);C.boundingSphere=new KQ(O,R.radius)}if(A.name)C.name=A.name;if(A.userData)C.userData=A.userData;return C}}class VO extends C0{constructor(A){super(A)}load(A,Q,E,B){let I=this,C=this.path===""?QE.extractUrlBase(A):this.path;this.resourcePath=this.resourcePath||C;let K=new U0(this.manager);K.setPath(this.path),K.setRequestHeader(this.requestHeader),K.setWithCredentials(this.withCredentials),K.load(A,function(J){let U=null;try{U=JSON.parse(J)}catch(H){if(B!==void 0)B(H);console.error("THREE:ObjectLoader: Can't parse "+A+".",H.message);return}let Y=U.metadata;if(Y===void 0||Y.type===void 0||Y.type.toLowerCase()==="geometry"){if(B!==void 0)B(new Error("THREE.ObjectLoader: Can't load "+A));console.error("THREE.ObjectLoader: Can't load "+A);return}I.parse(U,Q)},E,B)}async loadAsync(A,Q){let E=this,B=this.path===""?QE.extractUrlBase(A):this.path;this.resourcePath=this.resourcePath||B;let I=new U0(this.manager);I.setPath(this.path),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials);let C=await I.loadAsync(A,Q),K=JSON.parse(C),J=K.metadata;if(J===void 0||J.type===void 0||J.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+A);return await E.parseAsync(K)}parse(A,Q){let E=this.parseAnimations(A.animations),B=this.parseShapes(A.shapes),I=this.parseGeometries(A.geometries,B),C=this.parseImages(A.images,function(){if(Q!==void 0)Q(U)}),K=this.parseTextures(A.textures,C),J=this.parseMaterials(A.materials,K),U=this.parseObject(A.object,I,J,K,E),Y=this.parseSkeletons(A.skeletons,U);if(this.bindSkeletons(U,Y),this.bindLightTargets(U),Q!==void 0){let H=!1;for(let R in C)if(C[R].data instanceof HTMLImageElement){H=!0;break}if(H===!1)Q(U)}return U}async parseAsync(A){let Q=this.parseAnimations(A.animations),E=this.parseShapes(A.shapes),B=this.parseGeometries(A.geometries,E),I=await this.parseImagesAsync(A.images),C=this.parseTextures(A.textures,I),K=this.parseMaterials(A.materials,C),J=this.parseObject(A.object,B,K,C,Q),U=this.parseSkeletons(A.skeletons,J);return this.bindSkeletons(J,U),this.bindLightTargets(J),J}parseShapes(A){let Q={};if(A!==void 0)for(let E=0,B=A.length;E<B;E++){let I=new TB().fromJSON(A[E]);Q[I.uuid]=I}return Q}parseSkeletons(A,Q){let E={},B={};if(Q.traverse(function(I){if(I.isBone)B[I.uuid]=I}),A!==void 0)for(let I=0,C=A.length;I<C;I++){let K=new gB().fromJSON(A[I],B);E[K.uuid]=K}return E}parseGeometries(A,Q){let E={};if(A!==void 0){let B=new sC;for(let I=0,C=A.length;I<C;I++){let K,J=A[I];switch(J.type){case"BufferGeometry":case"InstancedBufferGeometry":K=B.parse(J);break;default:if(J.type in SZ)K=SZ[J.type].fromJSON(J,Q);else console.warn(`THREE.ObjectLoader: Unsupported geometry type "${J.type}"`)}if(K.uuid=J.uuid,J.name!==void 0)K.name=J.name;if(J.userData!==void 0)K.userData=J.userData;E[J.uuid]=K}}return E}parseMaterials(A,Q){let E={},B={};if(A!==void 0){let I=new dC;I.setTextures(Q);for(let C=0,K=A.length;C<K;C++){let J=A[C];if(E[J.uuid]===void 0)E[J.uuid]=I.parse(J);B[J.uuid]=E[J.uuid]}}return B}parseAnimations(A){let Q={};if(A!==void 0)for(let E=0;E<A.length;E++){let B=A[E],I=oQ.parse(B);Q[I.uuid]=I}return Q}parseImages(A,Q){let E=this,B={},I;function C(J){return E.manager.itemStart(J),I.load(J,function(){E.manager.itemEnd(J)},void 0,function(){E.manager.itemError(J),E.manager.itemEnd(J)})}function K(J){if(typeof J==="string"){let U=J,Y=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(U)?U:E.resourcePath+U;return C(Y)}else if(J.data)return{data:w8(J.type,J.data),width:J.width,height:J.height};else return null}if(A!==void 0&&A.length>0){let J=new t8(Q);I=new R1(J),I.setCrossOrigin(this.crossOrigin);for(let U=0,Y=A.length;U<Y;U++){let H=A[U],R=H.url;if(Array.isArray(R)){let O=[];for(let N=0,$=R.length;N<$;N++){let L=R[N],W=K(L);if(W!==null)if(W instanceof HTMLImageElement)O.push(W);else O.push(new h0(W.data,W.width,W.height))}B[H.uuid]=new OB(O)}else{let O=K(H.url);B[H.uuid]=new OB(O)}}}return B}async parseImagesAsync(A){let Q=this,E={},B;async function I(C){if(typeof C==="string"){let K=C,J=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(K)?K:Q.resourcePath+K;return await B.loadAsync(J)}else if(C.data)return{data:w8(C.type,C.data),width:C.width,height:C.height};else return null}if(A!==void 0&&A.length>0){B=new R1(this.manager),B.setCrossOrigin(this.crossOrigin);for(let C=0,K=A.length;C<K;C++){let J=A[C],U=J.url;if(Array.isArray(U)){let Y=[];for(let H=0,R=U.length;H<R;H++){let O=U[H],N=await I(O);if(N!==null)if(N instanceof HTMLImageElement)Y.push(N);else Y.push(new h0(N.data,N.width,N.height))}E[J.uuid]=new OB(Y)}else{let Y=await I(J.url);E[J.uuid]=new OB(Y)}}}return E}parseTextures(A,Q){function E(I,C){if(typeof I==="number")return I;return console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",I),C[I]}let B={};if(A!==void 0)for(let I=0,C=A.length;I<C;I++){let K=A[I];if(K.image===void 0)console.warn('THREE.ObjectLoader: No "image" specified for',K.uuid);if(Q[K.image]===void 0)console.warn("THREE.ObjectLoader: Undefined image",K.image);let J=Q[K.image],U=J.data,Y;if(Array.isArray(U)){if(Y=new QI,U.length===6)Y.needsUpdate=!0}else{if(U&&U.data)Y=new h0;else Y=new EQ;if(U)Y.needsUpdate=!0}if(Y.source=J,Y.uuid=K.uuid,K.name!==void 0)Y.name=K.name;if(K.mapping!==void 0)Y.mapping=E(K.mapping,Q5);if(K.channel!==void 0)Y.channel=K.channel;if(K.offset!==void 0)Y.offset.fromArray(K.offset);if(K.repeat!==void 0)Y.repeat.fromArray(K.repeat);if(K.center!==void 0)Y.center.fromArray(K.center);if(K.rotation!==void 0)Y.rotation=K.rotation;if(K.wrap!==void 0)Y.wrapS=E(K.wrap[0],VZ),Y.wrapT=E(K.wrap[1],VZ);if(K.format!==void 0)Y.format=K.format;if(K.internalFormat!==void 0)Y.internalFormat=K.internalFormat;if(K.type!==void 0)Y.type=K.type;if(K.colorSpace!==void 0)Y.colorSpace=K.colorSpace;if(K.minFilter!==void 0)Y.minFilter=E(K.minFilter,jZ);if(K.magFilter!==void 0)Y.magFilter=E(K.magFilter,jZ);if(K.anisotropy!==void 0)Y.anisotropy=K.anisotropy;if(K.flipY!==void 0)Y.flipY=K.flipY;if(K.generateMipmaps!==void 0)Y.generateMipmaps=K.generateMipmaps;if(K.premultiplyAlpha!==void 0)Y.premultiplyAlpha=K.premultiplyAlpha;if(K.unpackAlignment!==void 0)Y.unpackAlignment=K.unpackAlignment;if(K.compareFunction!==void 0)Y.compareFunction=K.compareFunction;if(K.userData!==void 0)Y.userData=K.userData;B[K.uuid]=Y}return B}parseObject(A,Q,E,B,I){let C;function K(R){if(Q[R]===void 0)console.warn("THREE.ObjectLoader: Undefined geometry",R);return Q[R]}function J(R){if(R===void 0)return;if(Array.isArray(R)){let O=[];for(let N=0,$=R.length;N<$;N++){let L=R[N];if(E[L]===void 0)console.warn("THREE.ObjectLoader: Undefined material",L);O.push(E[L])}return O}if(E[R]===void 0)console.warn("THREE.ObjectLoader: Undefined material",R);return E[R]}function U(R){if(B[R]===void 0)console.warn("THREE.ObjectLoader: Undefined texture",R);return B[R]}let Y,H;switch(A.type){case"Scene":if(C=new yQ,A.background!==void 0)if(Number.isInteger(A.background))C.background=new a(A.background);else C.background=U(A.background);if(A.environment!==void 0)C.environment=U(A.environment);if(A.fog!==void 0){if(A.fog.type==="Fog")C.fog=new wC(A.fog.color,A.fog.near,A.fog.far);else if(A.fog.type==="FogExp2")C.fog=new MC(A.fog.color,A.fog.density);if(A.fog.name!=="")C.fog.name=A.fog.name}if(A.backgroundBlurriness!==void 0)C.backgroundBlurriness=A.backgroundBlurriness;if(A.backgroundIntensity!==void 0)C.backgroundIntensity=A.backgroundIntensity;if(A.backgroundRotation!==void 0)C.backgroundRotation.fromArray(A.backgroundRotation);if(A.environmentIntensity!==void 0)C.environmentIntensity=A.environmentIntensity;if(A.environmentRotation!==void 0)C.environmentRotation.fromArray(A.environmentRotation);break;case"PerspectiveCamera":if(C=new v0(A.fov,A.aspect,A.near,A.far),A.focus!==void 0)C.focus=A.focus;if(A.zoom!==void 0)C.zoom=A.zoom;if(A.filmGauge!==void 0)C.filmGauge=A.filmGauge;if(A.filmOffset!==void 0)C.filmOffset=A.filmOffset;if(A.view!==void 0)C.view=Object.assign({},A.view);break;case"OrthographicCamera":if(C=new HE(A.left,A.right,A.top,A.bottom,A.near,A.far),A.zoom!==void 0)C.zoom=A.zoom;if(A.view!==void 0)C.view=Object.assign({},A.view);break;case"AmbientLight":C=new A6(A.color,A.intensity);break;case"DirectionalLight":C=new XB(A.color,A.intensity),C.target=A.target||"";break;case"PointLight":C=new WB(A.color,A.intensity,A.distance,A.decay);break;case"RectAreaLight":C=new cC(A.color,A.intensity,A.width,A.height);break;case"SpotLight":C=new UI(A.color,A.intensity,A.distance,A.angle,A.penumbra,A.decay),C.target=A.target||"";break;case"HemisphereLight":C=new p9(A.color,A.groundColor,A.intensity);break;case"LightProbe":C=new Q6().fromJSON(A);break;case"SkinnedMesh":if(Y=K(A.geometry),H=J(A.material),C=new jI(Y,H),A.bindMode!==void 0)C.bindMode=A.bindMode;if(A.bindMatrix!==void 0)C.bindMatrix.fromArray(A.bindMatrix);if(A.skeleton!==void 0)C.skeleton=A.skeleton;break;case"Mesh":Y=K(A.geometry),H=J(A.material),C=new xA(Y,H);break;case"InstancedMesh":Y=K(A.geometry),H=J(A.material);let{count:R,instanceMatrix:O,instanceColor:N}=A;if(C=new vI(Y,H,R),C.instanceMatrix=new HB(new Float32Array(O.array),16),N!==void 0)C.instanceColor=new HB(new Float32Array(N.array),N.itemSize);break;case"BatchedMesh":if(Y=K(A.geometry),H=J(A.material),C=new w9(A.maxInstanceCount,A.maxVertexCount,A.maxIndexCount,H),C.geometry=Y,C.perObjectFrustumCulled=A.perObjectFrustumCulled,C.sortObjects=A.sortObjects,C._drawRanges=A.drawRanges,C._reservedRanges=A.reservedRanges,C._visibility=A.visibility,C._active=A.active,C._bounds=A.bounds.map(($)=>{let L=new g0;L.min.fromArray($.boxMin),L.max.fromArray($.boxMax);let W=new KQ;return W.radius=$.sphereRadius,W.center.fromArray($.sphereCenter),{boxInitialized:$.boxInitialized,box:L,sphereInitialized:$.sphereInitialized,sphere:W}}),C._maxInstanceCount=A.maxInstanceCount,C._maxVertexCount=A.maxVertexCount,C._maxIndexCount=A.maxIndexCount,C._geometryInitialized=A.geometryInitialized,C._geometryCount=A.geometryCount,C._matricesTexture=U(A.matricesTexture.uuid),A.colorsTexture!==void 0)C._colorsTexture=U(A.colorsTexture.uuid);break;case"LOD":C=new M9;break;case"Line":C=new VQ(K(A.geometry),J(A.material));break;case"LineLoop":C=new l8(K(A.geometry),J(A.material));break;case"LineSegments":C=new RQ(K(A.geometry),J(A.material));break;case"PointCloud":case"Points":C=new GB(K(A.geometry),J(A.material));break;case"Sprite":C=new c8(J(A.material));break;case"Group":C=new i0;break;case"Bone":C=new yB;break;default:C=new I0}if(C.uuid=A.uuid,A.name!==void 0)C.name=A.name;if(A.matrix!==void 0){if(C.matrix.fromArray(A.matrix),A.matrixAutoUpdate!==void 0)C.matrixAutoUpdate=A.matrixAutoUpdate;if(C.matrixAutoUpdate)C.matrix.decompose(C.position,C.quaternion,C.scale)}else{if(A.position!==void 0)C.position.fromArray(A.position);if(A.rotation!==void 0)C.rotation.fromArray(A.rotation);if(A.quaternion!==void 0)C.quaternion.fromArray(A.quaternion);if(A.scale!==void 0)C.scale.fromArray(A.scale)}if(A.up!==void 0)C.up.fromArray(A.up);if(A.castShadow!==void 0)C.castShadow=A.castShadow;if(A.receiveShadow!==void 0)C.receiveShadow=A.receiveShadow;if(A.shadow){if(A.shadow.intensity!==void 0)C.shadow.intensity=A.shadow.intensity;if(A.shadow.bias!==void 0)C.shadow.bias=A.shadow.bias;if(A.shadow.normalBias!==void 0)C.shadow.normalBias=A.shadow.normalBias;if(A.shadow.radius!==void 0)C.shadow.radius=A.shadow.radius;if(A.shadow.mapSize!==void 0)C.shadow.mapSize.fromArray(A.shadow.mapSize);if(A.shadow.camera!==void 0)C.shadow.camera=this.parseObject(A.shadow.camera)}if(A.visible!==void 0)C.visible=A.visible;if(A.frustumCulled!==void 0)C.frustumCulled=A.frustumCulled;if(A.renderOrder!==void 0)C.renderOrder=A.renderOrder;if(A.userData!==void 0)C.userData=A.userData;if(A.layers!==void 0)C.layers.mask=A.layers;if(A.children!==void 0){let R=A.children;for(let O=0;O<R.length;O++)C.add(this.parseObject(R[O],Q,E,B,I))}if(A.animations!==void 0){let R=A.animations;for(let O=0;O<R.length;O++){let N=R[O];C.animations.push(I[N])}}if(A.type==="LOD"){if(A.autoUpdate!==void 0)C.autoUpdate=A.autoUpdate;let R=A.levels;for(let O=0;O<R.length;O++){let N=R[O],$=C.getObjectByProperty("uuid",N.object);if($!==void 0)C.addLevel($,N.distance,N.hysteresis)}}return C}bindSkeletons(A,Q){if(Object.keys(Q).length===0)return;A.traverse(function(E){if(E.isSkinnedMesh===!0&&E.skeleton!==void 0){let B=Q[E.skeleton];if(B===void 0)console.warn("THREE.ObjectLoader: No skeleton found with UUID:",E.skeleton);else E.bind(B,E.bindMatrix)}})}bindLightTargets(A){A.traverse(function(Q){if(Q.isDirectionalLight||Q.isSpotLight){let E=Q.target,B=A.getObjectByProperty("uuid",E);if(B!==void 0)Q.target=B;else Q.target=new I0}})}}var Q5={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306},VZ={RepeatWrapping:1000,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},jZ={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};class iC extends C0{constructor(A){super(A);if(this.isImageBitmapLoader=!0,typeof createImageBitmap==="undefined")console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");if(typeof fetch==="undefined")console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.options={premultiplyAlpha:"none"}}setOptions(A){return this.options=A,this}load(A,Q,E,B){if(A===void 0)A="";if(this.path!==void 0)A=this.path+A;A=this.manager.resolveURL(A);let I=this,C=SB.get(A);if(C!==void 0){if(I.manager.itemStart(A),C.then){C.then((U)=>{if(Q)Q(U);I.manager.itemEnd(A)}).catch((U)=>{if(B)B(U)});return}return setTimeout(function(){if(Q)Q(C);I.manager.itemEnd(A)},0),C}let K={};K.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",K.headers=this.requestHeader;let J=fetch(A,K).then(function(U){return U.blob()}).then(function(U){return createImageBitmap(U,Object.assign(I.options,{colorSpaceConversion:"none"}))}).then(function(U){if(SB.add(A,U),Q)Q(U);return I.manager.itemEnd(A),U}).catch(function(U){if(B)B(U);SB.remove(A),I.manager.itemError(A),I.manager.itemEnd(A)});SB.add(A,J),I.manager.itemStart(A)}}var TJ;class oC{static getContext(){if(TJ===void 0)TJ=new(window.AudioContext||window.webkitAudioContext);return TJ}static setContext(A){TJ=A}}class jO extends C0{constructor(A){super(A)}load(A,Q,E,B){let I=this,C=new U0(this.manager);C.setResponseType("arraybuffer"),C.setPath(this.path),C.setRequestHeader(this.requestHeader),C.setWithCredentials(this.withCredentials),C.load(A,function(J){try{let U=J.slice(0);oC.getContext().decodeAudioData(U,function(H){Q(H)}).catch(K)}catch(U){K(U)}},E,B);function K(J){if(B)B(J);else console.error(J);I.manager.itemError(A)}}}var vZ=/*@__PURE__*/new RA,hZ=/*@__PURE__*/new RA,I1=/*@__PURE__*/new RA;class E6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=0.064,this.cameraL=new v0,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new v0,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(A){let Q=this._cache;if(Q.focus!==A.focus||Q.fov!==A.fov||Q.aspect!==A.aspect*this.aspect||Q.near!==A.near||Q.far!==A.far||Q.zoom!==A.zoom||Q.eyeSep!==this.eyeSep){Q.focus=A.focus,Q.fov=A.fov,Q.aspect=A.aspect*this.aspect,Q.near=A.near,Q.far=A.far,Q.zoom=A.zoom,Q.eyeSep=this.eyeSep,I1.copy(A.projectionMatrix);let B=Q.eyeSep/2,I=B*Q.near/Q.focus,C=Q.near*Math.tan(O1*Q.fov*0.5)/Q.zoom,K,J;hZ.elements[12]=-B,vZ.elements[12]=B,K=-C*Q.aspect+I,J=C*Q.aspect+I,I1.elements[0]=2*Q.near/(J-K),I1.elements[8]=(J+K)/(J-K),this.cameraL.projectionMatrix.copy(I1),K=-C*Q.aspect-I,J=C*Q.aspect-I,I1.elements[0]=2*Q.near/(J-K),I1.elements[8]=(J+K)/(J-K),this.cameraR.projectionMatrix.copy(I1)}this.cameraL.matrixWorld.copy(A.matrixWorld).multiply(hZ),this.cameraR.matrixWorld.copy(A.matrixWorld).multiply(vZ)}}class c9 extends v0{constructor(A=[]){super();this.isArrayCamera=!0,this.cameras=A,this.index=0}}class gI{constructor(A=!0){this.autoStart=A,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=yZ(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let A=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let Q=yZ();A=(Q-this.oldTime)/1000,this.oldTime=Q,this.elapsedTime+=A}return A}}function yZ(){return performance.now()}var C1=/*@__PURE__*/new y,gZ=/*@__PURE__*/new J0,E5=/*@__PURE__*/new y,K1=/*@__PURE__*/new y;class vO extends I0{constructor(){super();this.type="AudioListener",this.context=oC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new gI}getInput(){return this.gain}removeFilter(){if(this.filter!==null)this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null;return this}getFilter(){return this.filter}setFilter(A){if(this.filter!==null)this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination);else this.gain.disconnect(this.context.destination);return this.filter=A,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(A){return this.gain.gain.setTargetAtTime(A,this.context.currentTime,0.01),this}updateMatrixWorld(A){super.updateMatrixWorld(A);let Q=this.context.listener,E=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(C1,gZ,E5),K1.set(0,0,-1).applyQuaternion(gZ),Q.positionX){let B=this.context.currentTime+this.timeDelta;Q.positionX.linearRampToValueAtTime(C1.x,B),Q.positionY.linearRampToValueAtTime(C1.y,B),Q.positionZ.linearRampToValueAtTime(C1.z,B),Q.forwardX.linearRampToValueAtTime(K1.x,B),Q.forwardY.linearRampToValueAtTime(K1.y,B),Q.forwardZ.linearRampToValueAtTime(K1.z,B),Q.upX.linearRampToValueAtTime(E.x,B),Q.upY.linearRampToValueAtTime(E.y,B),Q.upZ.linearRampToValueAtTime(E.z,B)}else Q.setPosition(C1.x,C1.y,C1.z),Q.setOrientation(K1.x,K1.y,K1.z,E.x,E.y,E.z)}}class l9 extends I0{constructor(A){super();this.type="Audio",this.listener=A,this.context=A.context,this.gain=this.context.createGain(),this.gain.connect(A.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(A){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=A,this.connect(),this}setMediaElementSource(A){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(A),this.connect(),this}setMediaStreamSource(A){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(A),this.connect(),this}setBuffer(A){if(this.buffer=A,this.sourceType="buffer",this.autoplay)this.play();return this}play(A=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+A;let Q=this.context.createBufferSource();return Q.buffer=this.buffer,Q.loop=this.loop,Q.loopStart=this.loopStart,Q.loopEnd=this.loopEnd,Q.onended=this.onEnded.bind(this),Q.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=Q,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}if(this.isPlaying===!0){if(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0)this._progress=this._progress%(this.duration||this.buffer.duration);this.source.stop(),this.source.onended=null,this.isPlaying=!1}return this}stop(A=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}if(this._progress=0,this.source!==null)this.source.stop(this.context.currentTime+A),this.source.onended=null;return this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let A=1,Q=this.filters.length;A<Q;A++)this.filters[A-1].connect(this.filters[A]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected===!1)return;if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let A=1,Q=this.filters.length;A<Q;A++)this.filters[A-1].disconnect(this.filters[A]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(A){if(!A)A=[];if(this._connected===!0)this.disconnect(),this.filters=A.slice(),this.connect();else this.filters=A.slice();return this}setDetune(A){if(this.detune=A,this.isPlaying===!0&&this.source.detune!==void 0)this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,0.01);return this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(A){return this.setFilters(A?[A]:[])}setPlaybackRate(A){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}if(this.playbackRate=A,this.isPlaying===!0)this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,0.01);return this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){if(this.hasPlaybackControl===!1)return console.warn("THREE.Audio: this Audio has no playback control."),!1;return this.loop}setLoop(A){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}if(this.loop=A,this.isPlaying===!0)this.source.loop=this.loop;return this}setLoopStart(A){return this.loopStart=A,this}setLoopEnd(A){return this.loopEnd=A,this}getVolume(){return this.gain.gain.value}setVolume(A){return this.gain.gain.setTargetAtTime(A,this.context.currentTime,0.01),this}copy(A,Q){if(super.copy(A,Q),A.sourceType!=="buffer")return console.warn("THREE.Audio: Audio source type cannot be copied."),this;return this.autoplay=A.autoplay,this.buffer=A.buffer,this.detune=A.detune,this.loop=A.loop,this.loopStart=A.loopStart,this.loopEnd=A.loopEnd,this.offset=A.offset,this.duration=A.duration,this.playbackRate=A.playbackRate,this.hasPlaybackControl=A.hasPlaybackControl,this.sourceType=A.sourceType,this.filters=A.filters.slice(),this}clone(A){return new this.constructor(this.listener).copy(this,A)}}var J1=/*@__PURE__*/new y,xZ=/*@__PURE__*/new J0,B5=/*@__PURE__*/new y,U1=/*@__PURE__*/new y;class hO extends l9{constructor(A){super(A);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(A){return this.panner.refDistance=A,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(A){return this.panner.rolloffFactor=A,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(A){return this.panner.distanceModel=A,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(A){return this.panner.maxDistance=A,this}setDirectionalCone(A,Q,E){return this.panner.coneInnerAngle=A,this.panner.coneOuterAngle=Q,this.panner.coneOuterGain=E,this}updateMatrixWorld(A){if(super.updateMatrixWorld(A),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(J1,xZ,B5),U1.set(0,0,1).applyQuaternion(xZ);let Q=this.panner;if(Q.positionX){let E=this.context.currentTime+this.listener.timeDelta;Q.positionX.linearRampToValueAtTime(J1.x,E),Q.positionY.linearRampToValueAtTime(J1.y,E),Q.positionZ.linearRampToValueAtTime(J1.z,E),Q.orientationX.linearRampToValueAtTime(U1.x,E),Q.orientationY.linearRampToValueAtTime(U1.y,E),Q.orientationZ.linearRampToValueAtTime(U1.z,E)}else Q.setPosition(J1.x,J1.y,J1.z),Q.setOrientation(U1.x,U1.y,U1.z)}}class yO{constructor(A,Q=2048){this.analyser=A.context.createAnalyser(),this.analyser.fftSize=Q,this.data=new Uint8Array(this.analyser.frequencyBinCount),A.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let A=0,Q=this.getFrequencyData();for(let E=0;E<Q.length;E++)A+=Q[E];return A/Q.length}}class d9{constructor(A,Q,E){this.binding=A,this.valueSize=E;let B,I,C;switch(Q){case"quaternion":B=this._slerp,I=this._slerpAdditive,C=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(E*6),this._workIndex=5;break;case"string":case"bool":B=this._select,I=this._select,C=this._setAdditiveIdentityOther,this.buffer=new Array(E*5);break;default:B=this._lerp,I=this._lerpAdditive,C=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(E*5)}this._mixBufferRegion=B,this._mixBufferRegionAdditive=I,this._setIdentity=C,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(A,Q){let E=this.buffer,B=this.valueSize,I=A*B+B,C=this.cumulativeWeight;if(C===0){for(let K=0;K!==B;++K)E[I+K]=E[K];C=Q}else{C+=Q;let K=Q/C;this._mixBufferRegion(E,I,0,K,B)}this.cumulativeWeight=C}accumulateAdditive(A){let Q=this.buffer,E=this.valueSize,B=E*this._addIndex;if(this.cumulativeWeightAdditive===0)this._setIdentity();this._mixBufferRegionAdditive(Q,B,0,A,E),this.cumulativeWeightAdditive+=A}apply(A){let Q=this.valueSize,E=this.buffer,B=A*Q+Q,I=this.cumulativeWeight,C=this.cumulativeWeightAdditive,K=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,I<1){let J=Q*this._origIndex;this._mixBufferRegion(E,B,J,1-I,Q)}if(C>0)this._mixBufferRegionAdditive(E,B,this._addIndex*Q,1,Q);for(let J=Q,U=Q+Q;J!==U;++J)if(E[J]!==E[J+Q]){K.setValue(E,B);break}}saveOriginalState(){let A=this.binding,Q=this.buffer,E=this.valueSize,B=E*this._origIndex;A.getValue(Q,B);for(let I=E,C=B;I!==C;++I)Q[I]=Q[B+I%E];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let A=this.valueSize*3;this.binding.setValue(this.buffer,A)}_setAdditiveIdentityNumeric(){let A=this._addIndex*this.valueSize,Q=A+this.valueSize;for(let E=A;E<Q;E++)this.buffer[E]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let A=this._origIndex*this.valueSize,Q=this._addIndex*this.valueSize;for(let E=0;E<this.valueSize;E++)this.buffer[Q+E]=this.buffer[A+E]}_select(A,Q,E,B,I){if(B>=0.5)for(let C=0;C!==I;++C)A[Q+C]=A[E+C]}_slerp(A,Q,E,B){J0.slerpFlat(A,Q,A,Q,A,E,B)}_slerpAdditive(A,Q,E,B,I){let C=this._workIndex*I;J0.multiplyQuaternionsFlat(A,C,A,Q,A,E),J0.slerpFlat(A,Q,A,Q,A,C,B)}_lerp(A,Q,E,B,I){let C=1-B;for(let K=0;K!==I;++K){let J=Q+K;A[J]=A[J]*C+A[E+K]*B}}_lerpAdditive(A,Q,E,B,I){for(let C=0;C!==I;++C){let K=Q+C;A[K]=A[K]+A[E+C]*B}}}var gO="\\[\\]\\.:\\/",I5=new RegExp("["+gO+"]","g"),xO="[^"+gO+"]",C5="[^"+gO.replace("\\.","")+"]",K5=/*@__PURE__*/ /((?:WC+[\/:])*)/.source.replace("WC",xO),J5=/*@__PURE__*/ /(WCOD+)?/.source.replace("WCOD",C5),U5=/*@__PURE__*/ /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xO),Y5=/*@__PURE__*/ /\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xO),O5=new RegExp("^"+K5+J5+U5+Y5+"$"),H5=["material","materials","bones","map"];class QN{constructor(A,Q,E){let B=E||T0.parseTrackName(Q);this._targetGroup=A,this._bindings=A.subscribe_(Q,B)}getValue(A,Q){this.bind();let E=this._targetGroup.nCachedObjects_,B=this._bindings[E];if(B!==void 0)B.getValue(A,Q)}setValue(A,Q){let E=this._bindings;for(let B=this._targetGroup.nCachedObjects_,I=E.length;B!==I;++B)E[B].setValue(A,Q)}bind(){let A=this._bindings;for(let Q=this._targetGroup.nCachedObjects_,E=A.length;Q!==E;++Q)A[Q].bind()}unbind(){let A=this._bindings;for(let Q=this._targetGroup.nCachedObjects_,E=A.length;Q!==E;++Q)A[Q].unbind()}}class T0{constructor(A,Q,E){this.path=Q,this.parsedPath=E||T0.parseTrackName(Q),this.node=T0.findNode(A,this.parsedPath.nodeName),this.rootNode=A,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(A,Q,E){if(!(A&&A.isAnimationObjectGroup))return new T0(A,Q,E);else return new T0.Composite(A,Q,E)}static sanitizeNodeName(A){return A.replace(/\s/g,"_").replace(I5,"")}static parseTrackName(A){let Q=O5.exec(A);if(Q===null)throw new Error("PropertyBinding: Cannot parse trackName: "+A);let E={nodeName:Q[2],objectName:Q[3],objectIndex:Q[4],propertyName:Q[5],propertyIndex:Q[6]},B=E.nodeName&&E.nodeName.lastIndexOf(".");if(B!==void 0&&B!==-1){let I=E.nodeName.substring(B+1);if(H5.indexOf(I)!==-1)E.nodeName=E.nodeName.substring(0,B),E.objectName=I}if(E.propertyName===null||E.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+A);return E}static findNode(A,Q){if(Q===void 0||Q===""||Q==="."||Q===-1||Q===A.name||Q===A.uuid)return A;if(A.skeleton){let E=A.skeleton.getBoneByName(Q);if(E!==void 0)return E}if(A.children){let E=function(I){for(let C=0;C<I.length;C++){let K=I[C];if(K.name===Q||K.uuid===Q)return K;let J=E(K.children);if(J)return J}return null},B=E(A.children);if(B)return B}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(A,Q){A[Q]=this.targetObject[this.propertyName]}_getValue_array(A,Q){let E=this.resolvedProperty;for(let B=0,I=E.length;B!==I;++B)A[Q++]=E[B]}_getValue_arrayElement(A,Q){A[Q]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(A,Q){this.resolvedProperty.toArray(A,Q)}_setValue_direct(A,Q){this.targetObject[this.propertyName]=A[Q]}_setValue_direct_setNeedsUpdate(A,Q){this.targetObject[this.propertyName]=A[Q],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(A,Q){this.targetObject[this.propertyName]=A[Q],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(A,Q){let E=this.resolvedProperty;for(let B=0,I=E.length;B!==I;++B)E[B]=A[Q++]}_setValue_array_setNeedsUpdate(A,Q){let E=this.resolvedProperty;for(let B=0,I=E.length;B!==I;++B)E[B]=A[Q++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(A,Q){let E=this.resolvedProperty;for(let B=0,I=E.length;B!==I;++B)E[B]=A[Q++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(A,Q){this.resolvedProperty[this.propertyIndex]=A[Q]}_setValue_arrayElement_setNeedsUpdate(A,Q){this.resolvedProperty[this.propertyIndex]=A[Q],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(A,Q){this.resolvedProperty[this.propertyIndex]=A[Q],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(A,Q){this.resolvedProperty.fromArray(A,Q)}_setValue_fromArray_setNeedsUpdate(A,Q){this.resolvedProperty.fromArray(A,Q),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(A,Q){this.resolvedProperty.fromArray(A,Q),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(A,Q){this.bind(),this.getValue(A,Q)}_setValue_unbound(A,Q){this.bind(),this.setValue(A,Q)}bind(){let A=this.node,Q=this.parsedPath,E=Q.objectName,B=Q.propertyName,I=Q.propertyIndex;if(!A)A=T0.findNode(this.rootNode,Q.nodeName),this.node=A;if(this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!A){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(E){let U=Q.objectIndex;switch(E){case"materials":if(!A.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!A.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}A=A.material.materials;break;case"bones":if(!A.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}A=A.skeleton.bones;for(let Y=0;Y<A.length;Y++)if(A[Y].name===U){U=Y;break}break;case"map":if("map"in A){A=A.map;break}if(!A.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!A.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}A=A.material.map;break;default:if(A[E]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}A=A[E]}if(U!==void 0){if(A[U]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,A);return}A=A[U]}}let C=A[B];if(C===void 0){let U=Q.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+U+"."+B+" but it wasn't found.",A);return}let K=this.Versioning.None;if(this.targetObject=A,A.isMaterial===!0)K=this.Versioning.NeedsUpdate;else if(A.isObject3D===!0)K=this.Versioning.MatrixWorldNeedsUpdate;let J=this.BindingType.Direct;if(I!==void 0){if(B==="morphTargetInfluences"){if(!A.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!A.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}if(A.morphTargetDictionary[I]!==void 0)I=A.morphTargetDictionary[I]}J=this.BindingType.ArrayElement,this.resolvedProperty=C,this.propertyIndex=I}else if(C.fromArray!==void 0&&C.toArray!==void 0)J=this.BindingType.HasFromToArray,this.resolvedProperty=C;else if(Array.isArray(C))J=this.BindingType.EntireArray,this.resolvedProperty=C;else this.propertyName=B;this.getValue=this.GetterByBindingType[J],this.setValue=this.SetterByBindingTypeAndVersioning[J][K]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}T0.Composite=QN;T0.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};T0.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};T0.prototype.GetterByBindingType=[T0.prototype._getValue_direct,T0.prototype._getValue_array,T0.prototype._getValue_arrayElement,T0.prototype._getValue_toArray];T0.prototype.SetterByBindingTypeAndVersioning=[[T0.prototype._setValue_direct,T0.prototype._setValue_direct_setNeedsUpdate,T0.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[T0.prototype._setValue_array,T0.prototype._setValue_array_setNeedsUpdate,T0.prototype._setValue_array_setMatrixWorldNeedsUpdate],[T0.prototype._setValue_arrayElement,T0.prototype._setValue_arrayElement_setNeedsUpdate,T0.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[T0.prototype._setValue_fromArray,T0.prototype._setValue_fromArray_setNeedsUpdate,T0.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class bO{constructor(){this.isAnimationObjectGroup=!0,this.uuid=TE(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let A={};this._indicesByUUID=A;for(let E=0,B=arguments.length;E!==B;++E)A[arguments[E].uuid]=E;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let Q=this;this.stats={objects:{get total(){return Q._objects.length},get inUse(){return this.total-Q.nCachedObjects_}},get bindingsPerObject(){return Q._bindings.length}}}add(){let A=this._objects,Q=this._indicesByUUID,E=this._paths,B=this._parsedPaths,I=this._bindings,C=I.length,K=void 0,J=A.length,U=this.nCachedObjects_;for(let Y=0,H=arguments.length;Y!==H;++Y){let R=arguments[Y],O=R.uuid,N=Q[O];if(N===void 0){N=J++,Q[O]=N,A.push(R);for(let $=0,L=C;$!==L;++$)I[$].push(new T0(R,E[$],B[$]))}else if(N<U){K=A[N];let $=--U,L=A[$];Q[L.uuid]=N,A[N]=L,Q[O]=$,A[$]=R;for(let W=0,Z=C;W!==Z;++W){let G=I[W],X=G[$],q=G[N];if(G[N]=X,q===void 0)q=new T0(R,E[W],B[W]);G[$]=q}}else if(A[N]!==K)console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=U}remove(){let A=this._objects,Q=this._indicesByUUID,E=this._bindings,B=E.length,I=this.nCachedObjects_;for(let C=0,K=arguments.length;C!==K;++C){let J=arguments[C],U=J.uuid,Y=Q[U];if(Y!==void 0&&Y>=I){let H=I++,R=A[H];Q[R.uuid]=Y,A[Y]=R,Q[U]=H,A[H]=J;for(let O=0,N=B;O!==N;++O){let $=E[O],L=$[H],W=$[Y];$[Y]=L,$[H]=W}}}this.nCachedObjects_=I}uncache(){let A=this._objects,Q=this._indicesByUUID,E=this._bindings,B=E.length,I=this.nCachedObjects_,C=A.length;for(let K=0,J=arguments.length;K!==J;++K){let U=arguments[K],Y=U.uuid,H=Q[Y];if(H!==void 0)if(delete Q[Y],H<I){let R=--I,O=A[R],N=--C,$=A[N];Q[O.uuid]=H,A[H]=O,Q[$.uuid]=R,A[R]=$,A.pop();for(let L=0,W=B;L!==W;++L){let Z=E[L],G=Z[R],X=Z[N];Z[H]=G,Z[R]=X,Z.pop()}}else{let R=--C,O=A[R];if(R>0)Q[O.uuid]=H;A[H]=O,A.pop();for(let N=0,$=B;N!==$;++N){let L=E[N];L[H]=L[R],L.pop()}}}this.nCachedObjects_=I}subscribe_(A,Q){let E=this._bindingsIndicesByPath,B=E[A],I=this._bindings;if(B!==void 0)return I[B];let C=this._paths,K=this._parsedPaths,J=this._objects,U=J.length,Y=this.nCachedObjects_,H=new Array(U);B=I.length,E[A]=B,C.push(A),K.push(Q),I.push(H);for(let R=Y,O=J.length;R!==O;++R){let N=J[R];H[R]=new T0(N,A,Q)}return H}unsubscribe_(A){let Q=this._bindingsIndicesByPath,E=Q[A];if(E!==void 0){let B=this._paths,I=this._parsedPaths,C=this._bindings,K=C.length-1,J=C[K],U=A[K];Q[U]=E,C[E]=J,C.pop(),I[E]=I[K],I.pop(),B[E]=B[K],B.pop()}}}class n9{constructor(A,Q,E=null,B=Q.blendMode){this._mixer=A,this._clip=Q,this._localRoot=E,this.blendMode=B;let I=Q.tracks,C=I.length,K=new Array(C),J={endingStart:2400,endingEnd:2400};for(let U=0;U!==C;++U){let Y=I[U].createInterpolant(null);K[U]=Y,Y.settings=J}this._interpolantSettings=J,this._interpolants=K,this._propertyBindings=new Array(C),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(A){return this._startTime=A,this}setLoop(A,Q){return this.loop=A,this.repetitions=Q,this}setEffectiveWeight(A){return this.weight=A,this._effectiveWeight=this.enabled?A:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(A){return this._scheduleFading(A,0,1)}fadeOut(A){return this._scheduleFading(A,1,0)}crossFadeFrom(A,Q,E){if(A.fadeOut(Q),this.fadeIn(Q),E){let B=this._clip.duration,I=A._clip.duration,C=I/B,K=B/I;A.warp(1,C,Q),this.warp(K,1,Q)}return this}crossFadeTo(A,Q,E){return A.crossFadeFrom(this,Q,E)}stopFading(){let A=this._weightInterpolant;if(A!==null)this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(A);return this}setEffectiveTimeScale(A){return this.timeScale=A,this._effectiveTimeScale=this.paused?0:A,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(A){return this.timeScale=this._clip.duration/A,this.stopWarping()}syncWith(A){return this.time=A.time,this.timeScale=A.timeScale,this.stopWarping()}halt(A){return this.warp(this._effectiveTimeScale,0,A)}warp(A,Q,E){let B=this._mixer,I=B.time,C=this.timeScale,K=this._timeScaleInterpolant;if(K===null)K=B._lendControlInterpolant(),this._timeScaleInterpolant=K;let{parameterPositions:J,sampleValues:U}=K;return J[0]=I,J[1]=I+E,U[0]=A/C,U[1]=Q/C,this}stopWarping(){let A=this._timeScaleInterpolant;if(A!==null)this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(A);return this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(A,Q,E,B){if(!this.enabled){this._updateWeight(A);return}let I=this._startTime;if(I!==null){let J=(A-I)*E;if(J<0||E===0)Q=0;else this._startTime=null,Q=E*J}Q*=this._updateTimeScale(A);let C=this._updateTime(Q),K=this._updateWeight(A);if(K>0){let J=this._interpolants,U=this._propertyBindings;switch(this.blendMode){case 2501:for(let Y=0,H=J.length;Y!==H;++Y)J[Y].evaluate(C),U[Y].accumulateAdditive(K);break;case 2500:default:for(let Y=0,H=J.length;Y!==H;++Y)J[Y].evaluate(C),U[Y].accumulate(B,K)}}}_updateWeight(A){let Q=0;if(this.enabled){Q=this.weight;let E=this._weightInterpolant;if(E!==null){let B=E.evaluate(A)[0];if(Q*=B,A>E.parameterPositions[1]){if(this.stopFading(),B===0)this.enabled=!1}}}return this._effectiveWeight=Q,Q}_updateTimeScale(A){let Q=0;if(!this.paused){Q=this.timeScale;let E=this._timeScaleInterpolant;if(E!==null){let B=E.evaluate(A)[0];if(Q*=B,A>E.parameterPositions[1])if(this.stopWarping(),Q===0)this.paused=!0;else this.timeScale=Q}}return this._effectiveTimeScale=Q,Q}_updateTime(A){let Q=this._clip.duration,E=this.loop,B=this.time+A,I=this._loopCount,C=E===2202;if(A===0){if(I===-1)return B;return C&&(I&1)===1?Q-B:B}if(E===2200){if(I===-1)this._loopCount=0,this._setEndings(!0,!0,!1);A:{if(B>=Q)B=Q;else if(B<0)B=0;else{this.time=B;break A}if(this.clampWhenFinished)this.paused=!0;else this.enabled=!1;this.time=B,this._mixer.dispatchEvent({type:"finished",action:this,direction:A<0?-1:1})}}else{if(I===-1)if(A>=0)I=0,this._setEndings(!0,this.repetitions===0,C);else this._setEndings(this.repetitions===0,!0,C);if(B>=Q||B<0){let K=Math.floor(B/Q);B-=Q*K,I+=Math.abs(K);let J=this.repetitions-I;if(J<=0){if(this.clampWhenFinished)this.paused=!0;else this.enabled=!1;B=A>0?Q:0,this.time=B,this._mixer.dispatchEvent({type:"finished",action:this,direction:A>0?1:-1})}else{if(J===1){let U=A<0;this._setEndings(U,!U,C)}else this._setEndings(!1,!1,C);this._loopCount=I,this.time=B,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:K})}}else this.time=B;if(C&&(I&1)===1)return Q-B}return B}_setEndings(A,Q,E){let B=this._interpolantSettings;if(E)B.endingStart=2401,B.endingEnd=2401;else{if(A)B.endingStart=this.zeroSlopeAtStart?2401:2400;else B.endingStart=2402;if(Q)B.endingEnd=this.zeroSlopeAtEnd?2401:2400;else B.endingEnd=2402}}_scheduleFading(A,Q,E){let B=this._mixer,I=B.time,C=this._weightInterpolant;if(C===null)C=B._lendControlInterpolant(),this._weightInterpolant=C;let{parameterPositions:K,sampleValues:J}=C;return K[0]=I,J[0]=Q,K[1]=I+A,J[1]=E,this}}var Z5=new Float32Array(1);class xI extends rE{constructor(A){super();this._root=A,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(A,Q){let E=A._localRoot||this._root,B=A._clip.tracks,I=B.length,C=A._propertyBindings,K=A._interpolants,J=E.uuid,U=this._bindingsByRootAndName,Y=U[J];if(Y===void 0)Y={},U[J]=Y;for(let H=0;H!==I;++H){let R=B[H],O=R.name,N=Y[O];if(N!==void 0)++N.referenceCount,C[H]=N;else{if(N=C[H],N!==void 0){if(N._cacheIndex===null)++N.referenceCount,this._addInactiveBinding(N,J,O);continue}let $=Q&&Q._propertyBindings[H].binding.parsedPath;N=new d9(T0.create(E,O,$),R.ValueTypeName,R.getValueSize()),++N.referenceCount,this._addInactiveBinding(N,J,O),C[H]=N}K[H].resultBuffer=N.buffer}}_activateAction(A){if(!this._isActiveAction(A)){if(A._cacheIndex===null){let E=(A._localRoot||this._root).uuid,B=A._clip.uuid,I=this._actionsByClip[B];this._bindAction(A,I&&I.knownActions[0]),this._addInactiveAction(A,B,E)}let Q=A._propertyBindings;for(let E=0,B=Q.length;E!==B;++E){let I=Q[E];if(I.useCount++===0)this._lendBinding(I),I.saveOriginalState()}this._lendAction(A)}}_deactivateAction(A){if(this._isActiveAction(A)){let Q=A._propertyBindings;for(let E=0,B=Q.length;E!==B;++E){let I=Q[E];if(--I.useCount===0)I.restoreOriginalState(),this._takeBackBinding(I)}this._takeBackAction(A)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let A=this;this.stats={actions:{get total(){return A._actions.length},get inUse(){return A._nActiveActions}},bindings:{get total(){return A._bindings.length},get inUse(){return A._nActiveBindings}},controlInterpolants:{get total(){return A._controlInterpolants.length},get inUse(){return A._nActiveControlInterpolants}}}}_isActiveAction(A){let Q=A._cacheIndex;return Q!==null&&Q<this._nActiveActions}_addInactiveAction(A,Q,E){let B=this._actions,I=this._actionsByClip,C=I[Q];if(C===void 0)C={knownActions:[A],actionByRoot:{}},A._byClipCacheIndex=0,I[Q]=C;else{let K=C.knownActions;A._byClipCacheIndex=K.length,K.push(A)}A._cacheIndex=B.length,B.push(A),C.actionByRoot[E]=A}_removeInactiveAction(A){let Q=this._actions,E=Q[Q.length-1],B=A._cacheIndex;E._cacheIndex=B,Q[B]=E,Q.pop(),A._cacheIndex=null;let I=A._clip.uuid,C=this._actionsByClip,K=C[I],J=K.knownActions,U=J[J.length-1],Y=A._byClipCacheIndex;U._byClipCacheIndex=Y,J[Y]=U,J.pop(),A._byClipCacheIndex=null;let H=K.actionByRoot,R=(A._localRoot||this._root).uuid;if(delete H[R],J.length===0)delete C[I];this._removeInactiveBindingsForAction(A)}_removeInactiveBindingsForAction(A){let Q=A._propertyBindings;for(let E=0,B=Q.length;E!==B;++E){let I=Q[E];if(--I.referenceCount===0)this._removeInactiveBinding(I)}}_lendAction(A){let Q=this._actions,E=A._cacheIndex,B=this._nActiveActions++,I=Q[B];A._cacheIndex=B,Q[B]=A,I._cacheIndex=E,Q[E]=I}_takeBackAction(A){let Q=this._actions,E=A._cacheIndex,B=--this._nActiveActions,I=Q[B];A._cacheIndex=B,Q[B]=A,I._cacheIndex=E,Q[E]=I}_addInactiveBinding(A,Q,E){let B=this._bindingsByRootAndName,I=this._bindings,C=B[Q];if(C===void 0)C={},B[Q]=C;C[E]=A,A._cacheIndex=I.length,I.push(A)}_removeInactiveBinding(A){let Q=this._bindings,E=A.binding,B=E.rootNode.uuid,I=E.path,C=this._bindingsByRootAndName,K=C[B],J=Q[Q.length-1],U=A._cacheIndex;if(J._cacheIndex=U,Q[U]=J,Q.pop(),delete K[I],Object.keys(K).length===0)delete C[B]}_lendBinding(A){let Q=this._bindings,E=A._cacheIndex,B=this._nActiveBindings++,I=Q[B];A._cacheIndex=B,Q[B]=A,I._cacheIndex=E,Q[E]=I}_takeBackBinding(A){let Q=this._bindings,E=A._cacheIndex,B=--this._nActiveBindings,I=Q[B];A._cacheIndex=B,Q[B]=A,I._cacheIndex=E,Q[E]=I}_lendControlInterpolant(){let A=this._controlInterpolants,Q=this._nActiveControlInterpolants++,E=A[Q];if(E===void 0)E=new mC(new Float32Array(2),new Float32Array(2),1,Z5),E.__cacheIndex=Q,A[Q]=E;return E}_takeBackControlInterpolant(A){let Q=this._controlInterpolants,E=A.__cacheIndex,B=--this._nActiveControlInterpolants,I=Q[B];A.__cacheIndex=B,Q[B]=A,I.__cacheIndex=E,Q[E]=I}clipAction(A,Q,E){let B=Q||this._root,I=B.uuid,C=typeof A==="string"?oQ.findByName(B,A):A,K=C!==null?C.uuid:A,J=this._actionsByClip[K],U=null;if(E===void 0)if(C!==null)E=C.blendMode;else E=2500;if(J!==void 0){let H=J.actionByRoot[I];if(H!==void 0&&H.blendMode===E)return H;if(U=J.knownActions[0],C===null)C=U._clip}if(C===null)return null;let Y=new n9(this,C,Q,E);return this._bindAction(Y,U),this._addInactiveAction(Y,K,I),Y}existingAction(A,Q){let E=Q||this._root,B=E.uuid,I=typeof A==="string"?oQ.findByName(E,A):A,C=I?I.uuid:A,K=this._actionsByClip[C];if(K!==void 0)return K.actionByRoot[B]||null;return null}stopAllAction(){let A=this._actions,Q=this._nActiveActions;for(let E=Q-1;E>=0;--E)A[E].stop();return this}update(A){A*=this.timeScale;let Q=this._actions,E=this._nActiveActions,B=this.time+=A,I=Math.sign(A),C=this._accuIndex^=1;for(let U=0;U!==E;++U)Q[U]._update(B,A,I,C);let K=this._bindings,J=this._nActiveBindings;for(let U=0;U!==J;++U)K[U].apply(C);return this}setTime(A){this.time=0;for(let Q=0;Q<this._actions.length;Q++)this._actions[Q].time=0;return this.update(A)}getRoot(){return this._root}uncacheClip(A){let Q=this._actions,E=A.uuid,B=this._actionsByClip,I=B[E];if(I!==void 0){let C=I.knownActions;for(let K=0,J=C.length;K!==J;++K){let U=C[K];this._deactivateAction(U);let Y=U._cacheIndex,H=Q[Q.length-1];U._cacheIndex=null,U._byClipCacheIndex=null,H._cacheIndex=Y,Q[Y]=H,Q.pop(),this._removeInactiveBindingsForAction(U)}delete B[E]}}uncacheRoot(A){let Q=A.uuid,E=this._actionsByClip;for(let C in E){let K=E[C].actionByRoot,J=K[Q];if(J!==void 0)this._deactivateAction(J),this._removeInactiveAction(J)}let B=this._bindingsByRootAndName,I=B[Q];if(I!==void 0)for(let C in I){let K=I[C];K.restoreOriginalState(),this._removeInactiveBinding(K)}}uncacheAction(A,Q){let E=this.existingAction(A,Q);if(E!==null)this._deactivateAction(E),this._removeInactiveAction(E)}}class fO extends u8{constructor(A=1,Q=1,E=1,B={}){super(A,Q,B);this.isRenderTarget3D=!0,this.depth=E,this.texture=new NB(null,A,Q,E),this.texture.isRenderTargetTexture=!0}}class uO extends u8{constructor(A=1,Q=1,E=1,B={}){super(A,Q,B);this.isRenderTargetArray=!0,this.depth=E,this.texture=new V1(null,A,Q,E),this.texture.isRenderTargetTexture=!0}}class rC{constructor(A){this.value=A}clone(){return new rC(this.value.clone===void 0?this.value:this.value.clone())}}var R5=0;class pO extends rE{constructor(){super();this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:R5++}),this.name="",this.usage=35044,this.uniforms=[]}add(A){return this.uniforms.push(A),this}remove(A){let Q=this.uniforms.indexOf(A);if(Q!==-1)this.uniforms.splice(Q,1);return this}setName(A){return this.name=A,this}setUsage(A){return this.usage=A,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(A){this.name=A.name,this.usage=A.usage;let Q=A.uniforms;this.uniforms.length=0;for(let E=0,B=Q.length;E<B;E++){let I=Array.isArray(Q[E])?Q[E]:[Q[E]];for(let C=0;C<I.length;C++)this.uniforms.push(I[C].clone())}return this}clone(){return new this.constructor().copy(this)}}class B6 extends hE{constructor(A,Q,E=1){super(A,Q);this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=E}copy(A){return super.copy(A),this.meshPerAttribute=A.meshPerAttribute,this}clone(A){let Q=super.clone(A);return Q.meshPerAttribute=this.meshPerAttribute,Q}toJSON(A){let Q=super.toJSON(A);return Q.isInstancedInterleavedBuffer=!0,Q.meshPerAttribute=this.meshPerAttribute,Q}}class mO{constructor(A,Q,E,B,I){this.isGLBufferAttribute=!0,this.name="",this.buffer=A,this.type=Q,this.itemSize=E,this.elementSize=B,this.count=I,this.version=0}set needsUpdate(A){if(A===!0)this.version++}setBuffer(A){return this.buffer=A,this}setType(A,Q){return this.type=A,this.elementSize=Q,this}setItemSize(A){return this.itemSize=A,this}setCount(A){return this.count=A,this}}var bZ=/*@__PURE__*/new RA;class bE{constructor(A,Q,E=0,B=1/0){this.ray=new qE(A,Q),this.near=E,this.far=B,this.camera=null,this.layers=new j1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(A,Q){this.ray.set(A,Q)}setFromCamera(A,Q){if(Q.isPerspectiveCamera)this.ray.origin.setFromMatrixPosition(Q.matrixWorld),this.ray.direction.set(A.x,A.y,0.5).unproject(Q).sub(this.ray.origin).normalize(),this.camera=Q;else if(Q.isOrthographicCamera)this.ray.origin.set(A.x,A.y,(Q.near+Q.far)/(Q.near-Q.far)).unproject(Q),this.ray.direction.set(0,0,-1).transformDirection(Q.matrixWorld),this.camera=Q;else console.error("THREE.Raycaster: Unsupported camera type: "+Q.type)}setFromXRController(A){return bZ.identity().extractRotation(A.matrixWorld),this.ray.origin.setFromMatrixPosition(A.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(bZ),this}intersectObject(A,Q=!0,E=[]){return gY(A,this,E,Q),E.sort(fZ),E}intersectObjects(A,Q=!0,E=[]){for(let B=0,I=A.length;B<I;B++)gY(A[B],this,E,Q);return E.sort(fZ),E}}function fZ(A,Q){return A.distance-Q.distance}function gY(A,Q,E,B){let I=!0;if(A.layers.test(Q.layers)){if(A.raycast(Q,E)===!1)I=!1}if(I===!0&&B===!0){let C=A.children;for(let K=0,J=C.length;K<J;K++)gY(C[K],Q,E,!0)}}class I6{constructor(A=1,Q=0,E=0){return this.radius=A,this.phi=Q,this.theta=E,this}set(A,Q,E){return this.radius=A,this.phi=Q,this.theta=E,this}copy(A){return this.radius=A.radius,this.phi=A.phi,this.theta=A.theta,this}makeSafe(){return this.phi=w0(this.phi,0.000001,Math.PI-0.000001),this}setFromVector3(A){return this.setFromCartesianCoords(A.x,A.y,A.z)}setFromCartesianCoords(A,Q,E){if(this.radius=Math.sqrt(A*A+Q*Q+E*E),this.radius===0)this.theta=0,this.phi=0;else this.theta=Math.atan2(A,E),this.phi=Math.acos(w0(Q/this.radius,-1,1));return this}clone(){return new this.constructor().copy(this)}}class cO{constructor(A=1,Q=0,E=0){return this.radius=A,this.theta=Q,this.y=E,this}set(A,Q,E){return this.radius=A,this.theta=Q,this.y=E,this}copy(A){return this.radius=A.radius,this.theta=A.theta,this.y=A.y,this}setFromVector3(A){return this.setFromCartesianCoords(A.x,A.y,A.z)}setFromCartesianCoords(A,Q,E){return this.radius=Math.sqrt(A*A+E*E),this.theta=Math.atan2(A,E),this.y=Q,this}clone(){return new this.constructor().copy(this)}}class s9{constructor(A,Q,E,B){if(s9.prototype.isMatrix2=!0,this.elements=[1,0,0,1],A!==void 0)this.set(A,Q,E,B)}identity(){return this.set(1,0,0,1),this}fromArray(A,Q=0){for(let E=0;E<4;E++)this.elements[E]=A[E+Q];return this}set(A,Q,E,B){let I=this.elements;return I[0]=A,I[2]=Q,I[1]=E,I[3]=B,this}}var uZ=/*@__PURE__*/new AA;class b1{constructor(A=new AA(1/0,1/0),Q=new AA(-1/0,-1/0)){this.isBox2=!0,this.min=A,this.max=Q}set(A,Q){return this.min.copy(A),this.max.copy(Q),this}setFromPoints(A){this.makeEmpty();for(let Q=0,E=A.length;Q<E;Q++)this.expandByPoint(A[Q]);return this}setFromCenterAndSize(A,Q){let E=uZ.copy(Q).multiplyScalar(0.5);return this.min.copy(A).sub(E),this.max.copy(A).add(E),this}clone(){return new this.constructor().copy(this)}copy(A){return this.min.copy(A.min),this.max.copy(A.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(A){return this.isEmpty()?A.set(0,0):A.addVectors(this.min,this.max).multiplyScalar(0.5)}getSize(A){return this.isEmpty()?A.set(0,0):A.subVectors(this.max,this.min)}expandByPoint(A){return this.min.min(A),this.max.max(A),this}expandByVector(A){return this.min.sub(A),this.max.add(A),this}expandByScalar(A){return this.min.addScalar(-A),this.max.addScalar(A),this}containsPoint(A){return A.x>=this.min.x&&A.x<=this.max.x&&A.y>=this.min.y&&A.y<=this.max.y}containsBox(A){return this.min.x<=A.min.x&&A.max.x<=this.max.x&&this.min.y<=A.min.y&&A.max.y<=this.max.y}getParameter(A,Q){return Q.set((A.x-this.min.x)/(this.max.x-this.min.x),(A.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(A){return A.max.x>=this.min.x&&A.min.x<=this.max.x&&A.max.y>=this.min.y&&A.min.y<=this.max.y}clampPoint(A,Q){return Q.copy(A).clamp(this.min,this.max)}distanceToPoint(A){return this.clampPoint(A,uZ).distanceTo(A)}intersect(A){if(this.min.max(A.min),this.max.min(A.max),this.isEmpty())this.makeEmpty();return this}union(A){return this.min.min(A.min),this.max.max(A.max),this}translate(A){return this.min.add(A),this.max.add(A),this}equals(A){return A.min.equals(this.min)&&A.max.equals(this.max)}}var pZ=/*@__PURE__*/new y,zJ=/*@__PURE__*/new y;class $B{constructor(A=new y,Q=new y){this.start=A,this.end=Q}set(A,Q){return this.start.copy(A),this.end.copy(Q),this}copy(A){return this.start.copy(A.start),this.end.copy(A.end),this}getCenter(A){return A.addVectors(this.start,this.end).multiplyScalar(0.5)}delta(A){return A.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(A,Q){return this.delta(Q).multiplyScalar(A).add(this.start)}closestPointToPointParameter(A,Q){pZ.subVectors(A,this.start),zJ.subVectors(this.end,this.start);let E=zJ.dot(zJ),I=zJ.dot(pZ)/E;if(Q)I=w0(I,0,1);return I}closestPointToPoint(A,Q,E){let B=this.closestPointToPointParameter(A,Q);return this.delta(E).multiplyScalar(B).add(this.start)}applyMatrix4(A){return this.start.applyMatrix4(A),this.end.applyMatrix4(A),this}equals(A){return A.start.equals(this.start)&&A.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}var mZ=/*@__PURE__*/new y;class lO extends I0{constructor(A,Q){super();this.light=A,this.matrixAutoUpdate=!1,this.color=Q,this.type="SpotLightHelper";let E=new hA,B=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let C=0,K=1,J=32;C<J;C++,K++){let U=C/J*Math.PI*2,Y=K/J*Math.PI*2;B.push(Math.cos(U),Math.sin(U),1,Math.cos(Y),Math.sin(Y),1)}E.setAttribute("position",new PA(B,3));let I=new p0({fog:!1,toneMapped:!1});this.cone=new RQ(E,I),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){if(this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent)this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld);else this.matrix.copy(this.light.matrixWorld);this.matrixWorld.copy(this.light.matrixWorld);let A=this.light.distance?this.light.distance:1000,Q=A*Math.tan(this.light.angle);if(this.cone.scale.set(Q,Q,A),mZ.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(mZ),this.color!==void 0)this.cone.material.color.set(this.color);else this.cone.material.color.copy(this.light.color)}}var SI=/*@__PURE__*/new y,PJ=/*@__PURE__*/new RA,PY=/*@__PURE__*/new RA;class i9 extends RQ{constructor(A){let Q=EN(A),E=new hA,B=[],I=[],C=new a(0,0,1),K=new a(0,1,0);for(let U=0;U<Q.length;U++){let Y=Q[U];if(Y.parent&&Y.parent.isBone)B.push(0,0,0),B.push(0,0,0),I.push(C.r,C.g,C.b),I.push(K.r,K.g,K.b)}E.setAttribute("position",new PA(B,3)),E.setAttribute("color",new PA(I,3));let J=new p0({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(E,J);this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=A,this.bones=Q,this.matrix=A.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(A){let Q=this.bones,E=this.geometry,B=E.getAttribute("position");PY.copy(this.root.matrixWorld).invert();for(let I=0,C=0;I<Q.length;I++){let K=Q[I];if(K.parent&&K.parent.isBone)PJ.multiplyMatrices(PY,K.matrixWorld),SI.setFromMatrixPosition(PJ),B.setXYZ(C,SI.x,SI.y,SI.z),PJ.multiplyMatrices(PY,K.parent.matrixWorld),SI.setFromMatrixPosition(PJ),B.setXYZ(C+1,SI.x,SI.y,SI.z),C+=2}E.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(A)}dispose(){this.geometry.dispose(),this.material.dispose()}}function EN(A){let Q=[];if(A.isBone===!0)Q.push(A);for(let E=0;E<A.children.length;E++)Q.push.apply(Q,EN(A.children[E]));return Q}class dO extends xA{constructor(A,Q,E){let B=new FE(Q,4,2),I=new _0({wireframe:!0,fog:!1,toneMapped:!1});super(B,I);this.light=A,this.color=E,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){if(this.light.updateWorldMatrix(!0,!1),this.color!==void 0)this.material.color.set(this.color);else this.material.color.copy(this.light.color)}}var N5=/*@__PURE__*/new y,cZ=/*@__PURE__*/new a,lZ=/*@__PURE__*/new a;class nO extends I0{constructor(A,Q,E){super();this.light=A,this.matrix=A.matrixWorld,this.matrixAutoUpdate=!1,this.color=E,this.type="HemisphereLightHelper";let B=new x1(Q);if(B.rotateY(Math.PI*0.5),this.material=new _0({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0)this.material.vertexColors=!0;let I=B.getAttribute("position"),C=new Float32Array(I.count*3);B.setAttribute("color",new tA(C,3)),this.add(new xA(B,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let A=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let Q=A.geometry.getAttribute("color");cZ.copy(this.light.color),lZ.copy(this.light.groundColor);for(let E=0,B=Q.count;E<B;E++){let I=E<B/2?cZ:lZ;Q.setXYZ(E,I.r,I.g,I.b)}Q.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),A.lookAt(N5.setFromMatrixPosition(this.light.matrixWorld).negate())}}class o9 extends RQ{constructor(A=10,Q=10,E=4473924,B=8947848){E=new a(E),B=new a(B);let I=Q/2,C=A/Q,K=A/2,J=[],U=[];for(let R=0,O=0,N=-K;R<=Q;R++,N+=C){J.push(-K,0,N,K,0,N),J.push(N,0,-K,N,0,K);let $=R===I?E:B;$.toArray(U,O),O+=3,$.toArray(U,O),O+=3,$.toArray(U,O),O+=3,$.toArray(U,O),O+=3}let Y=new hA;Y.setAttribute("position",new PA(J,3)),Y.setAttribute("color",new PA(U,3));let H=new p0({vertexColors:!0,toneMapped:!1});super(Y,H);this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class sO extends RQ{constructor(A=10,Q=16,E=8,B=64,I=4473924,C=8947848){I=new a(I),C=new a(C);let K=[],J=[];if(Q>1)for(let H=0;H<Q;H++){let R=H/Q*(Math.PI*2),O=Math.sin(R)*A,N=Math.cos(R)*A;K.push(0,0,0),K.push(O,0,N);let $=H&1?I:C;J.push($.r,$.g,$.b),J.push($.r,$.g,$.b)}for(let H=0;H<E;H++){let R=H&1?I:C,O=A-A/E*H;for(let N=0;N<B;N++){let $=N/B*(Math.PI*2),L=Math.sin($)*O,W=Math.cos($)*O;K.push(L,0,W),J.push(R.r,R.g,R.b),$=(N+1)/B*(Math.PI*2),L=Math.sin($)*O,W=Math.cos($)*O,K.push(L,0,W),J.push(R.r,R.g,R.b)}}let U=new hA;U.setAttribute("position",new PA(K,3)),U.setAttribute("color",new PA(J,3));let Y=new p0({vertexColors:!0,toneMapped:!1});super(U,Y);this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}var dZ=/*@__PURE__*/new y,VJ=/*@__PURE__*/new y,nZ=/*@__PURE__*/new y;class iO extends I0{constructor(A,Q,E){super();if(this.light=A,this.matrix=A.matrixWorld,this.matrixAutoUpdate=!1,this.color=E,this.type="DirectionalLightHelper",Q===void 0)Q=1;let B=new hA;B.setAttribute("position",new PA([-Q,Q,0,Q,Q,0,Q,-Q,0,-Q,-Q,0,-Q,Q,0],3));let I=new p0({fog:!1,toneMapped:!1});this.lightPlane=new VQ(B,I),this.add(this.lightPlane),B=new hA,B.setAttribute("position",new PA([0,0,0,0,0,1],3)),this.targetLine=new VQ(B,I),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){if(this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),dZ.setFromMatrixPosition(this.light.matrixWorld),VJ.setFromMatrixPosition(this.light.target.matrixWorld),nZ.subVectors(VJ,dZ),this.lightPlane.lookAt(VJ),this.color!==void 0)this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color);else this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color);this.targetLine.lookAt(VJ),this.targetLine.scale.z=nZ.length()}}var jJ=/*@__PURE__*/new y,FQ=/*@__PURE__*/new h1;class oO extends RQ{constructor(A){let Q=new hA,E=new p0({color:16777215,vertexColors:!0,toneMapped:!1}),B=[],I=[],C={};K("n1","n2"),K("n2","n4"),K("n4","n3"),K("n3","n1"),K("f1","f2"),K("f2","f4"),K("f4","f3"),K("f3","f1"),K("n1","f1"),K("n2","f2"),K("n3","f3"),K("n4","f4"),K("p","n1"),K("p","n2"),K("p","n3"),K("p","n4"),K("u1","u2"),K("u2","u3"),K("u3","u1"),K("c","t"),K("p","c"),K("cn1","cn2"),K("cn3","cn4"),K("cf1","cf2"),K("cf3","cf4");function K(N,$){J(N),J($)}function J(N){if(B.push(0,0,0),I.push(0,0,0),C[N]===void 0)C[N]=[];C[N].push(B.length/3-1)}Q.setAttribute("position",new PA(B,3)),Q.setAttribute("color",new PA(I,3));super(Q,E);if(this.type="CameraHelper",this.camera=A,this.camera.updateProjectionMatrix)this.camera.updateProjectionMatrix();this.matrix=A.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=C,this.update();let U=new a(16755200),Y=new a(16711680),H=new a(43775),R=new a(16777215),O=new a(3355443);this.setColors(U,Y,H,R,O)}setColors(A,Q,E,B,I){let K=this.geometry.getAttribute("color");K.setXYZ(0,A.r,A.g,A.b),K.setXYZ(1,A.r,A.g,A.b),K.setXYZ(2,A.r,A.g,A.b),K.setXYZ(3,A.r,A.g,A.b),K.setXYZ(4,A.r,A.g,A.b),K.setXYZ(5,A.r,A.g,A.b),K.setXYZ(6,A.r,A.g,A.b),K.setXYZ(7,A.r,A.g,A.b),K.setXYZ(8,A.r,A.g,A.b),K.setXYZ(9,A.r,A.g,A.b),K.setXYZ(10,A.r,A.g,A.b),K.setXYZ(11,A.r,A.g,A.b),K.setXYZ(12,A.r,A.g,A.b),K.setXYZ(13,A.r,A.g,A.b),K.setXYZ(14,A.r,A.g,A.b),K.setXYZ(15,A.r,A.g,A.b),K.setXYZ(16,A.r,A.g,A.b),K.setXYZ(17,A.r,A.g,A.b),K.setXYZ(18,A.r,A.g,A.b),K.setXYZ(19,A.r,A.g,A.b),K.setXYZ(20,A.r,A.g,A.b),K.setXYZ(21,A.r,A.g,A.b),K.setXYZ(22,A.r,A.g,A.b),K.setXYZ(23,A.r,A.g,A.b),K.setXYZ(24,Q.r,Q.g,Q.b),K.setXYZ(25,Q.r,Q.g,Q.b),K.setXYZ(26,Q.r,Q.g,Q.b),K.setXYZ(27,Q.r,Q.g,Q.b),K.setXYZ(28,Q.r,Q.g,Q.b),K.setXYZ(29,Q.r,Q.g,Q.b),K.setXYZ(30,Q.r,Q.g,Q.b),K.setXYZ(31,Q.r,Q.g,Q.b),K.setXYZ(32,E.r,E.g,E.b),K.setXYZ(33,E.r,E.g,E.b),K.setXYZ(34,E.r,E.g,E.b),K.setXYZ(35,E.r,E.g,E.b),K.setXYZ(36,E.r,E.g,E.b),K.setXYZ(37,E.r,E.g,E.b),K.setXYZ(38,B.r,B.g,B.b),K.setXYZ(39,B.r,B.g,B.b),K.setXYZ(40,I.r,I.g,I.b),K.setXYZ(41,I.r,I.g,I.b),K.setXYZ(42,I.r,I.g,I.b),K.setXYZ(43,I.r,I.g,I.b),K.setXYZ(44,I.r,I.g,I.b),K.setXYZ(45,I.r,I.g,I.b),K.setXYZ(46,I.r,I.g,I.b),K.setXYZ(47,I.r,I.g,I.b),K.setXYZ(48,I.r,I.g,I.b),K.setXYZ(49,I.r,I.g,I.b),K.needsUpdate=!0}update(){let A=this.geometry,Q=this.pointMap,E=1,B=1;FQ.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);let I=this.camera.coordinateSystem===2000?-1:0;_Q("c",Q,A,FQ,0,0,I),_Q("t",Q,A,FQ,0,0,1),_Q("n1",Q,A,FQ,-1,-1,I),_Q("n2",Q,A,FQ,1,-1,I),_Q("n3",Q,A,FQ,-1,1,I),_Q("n4",Q,A,FQ,1,1,I),_Q("f1",Q,A,FQ,-1,-1,1),_Q("f2",Q,A,FQ,1,-1,1),_Q("f3",Q,A,FQ,-1,1,1),_Q("f4",Q,A,FQ,1,1,1),_Q("u1",Q,A,FQ,0.7,1.1,I),_Q("u2",Q,A,FQ,-0.7,1.1,I),_Q("u3",Q,A,FQ,0,2,I),_Q("cf1",Q,A,FQ,-1,0,1),_Q("cf2",Q,A,FQ,1,0,1),_Q("cf3",Q,A,FQ,0,-1,1),_Q("cf4",Q,A,FQ,0,1,1),_Q("cn1",Q,A,FQ,-1,0,I),_Q("cn2",Q,A,FQ,1,0,I),_Q("cn3",Q,A,FQ,0,-1,I),_Q("cn4",Q,A,FQ,0,1,I),A.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function _Q(A,Q,E,B,I,C,K){jJ.set(I,C,K).unproject(B);let J=Q[A];if(J!==void 0){let U=E.getAttribute("position");for(let Y=0,H=J.length;Y<H;Y++)U.setXYZ(J[Y],jJ.x,jJ.y,jJ.z)}}var vJ=/*@__PURE__*/new g0;class rO extends RQ{constructor(A,Q=16776960){let E=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),B=new Float32Array(24),I=new hA;I.setIndex(new tA(E,1)),I.setAttribute("position",new tA(B,3));super(I,new p0({color:Q,toneMapped:!1}));this.object=A,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(A){if(A!==void 0)console.warn("THREE.BoxHelper: .update() has no longer arguments.");if(this.object!==void 0)vJ.setFromObject(this.object);if(vJ.isEmpty())return;let{min:Q,max:E}=vJ,B=this.geometry.attributes.position,I=B.array;I[0]=E.x,I[1]=E.y,I[2]=E.z,I[3]=Q.x,I[4]=E.y,I[5]=E.z,I[6]=Q.x,I[7]=Q.y,I[8]=E.z,I[9]=E.x,I[10]=Q.y,I[11]=E.z,I[12]=E.x,I[13]=E.y,I[14]=Q.z,I[15]=Q.x,I[16]=E.y,I[17]=Q.z,I[18]=Q.x,I[19]=Q.y,I[20]=Q.z,I[21]=E.x,I[22]=Q.y,I[23]=Q.z,B.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(A){return this.object=A,this.update(),this}copy(A,Q){return super.copy(A,Q),this.object=A.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class r9 extends RQ{constructor(A,Q=16776960){let E=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),B=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],I=new hA;I.setIndex(new tA(E,1)),I.setAttribute("position",new PA(B,3));super(I,new p0({color:Q,toneMapped:!1}));this.box=A,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(A){let Q=this.box;if(Q.isEmpty())return;Q.getCenter(this.position),Q.getSize(this.scale),this.scale.multiplyScalar(0.5),super.updateMatrixWorld(A)}dispose(){this.geometry.dispose(),this.material.dispose()}}class aO extends VQ{constructor(A,Q=1,E=16776960){let B=E,I=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],C=new hA;C.setAttribute("position",new PA(I,3)),C.computeBoundingSphere();super(C,new p0({color:B,toneMapped:!1}));this.type="PlaneHelper",this.plane=A,this.size=Q;let K=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],J=new hA;J.setAttribute("position",new PA(K,3)),J.computeBoundingSphere(),this.add(new xA(J,new _0({color:B,opacity:0.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(A){this.position.set(0,0,0),this.scale.set(0.5*this.size,0.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(A)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}var sZ=/*@__PURE__*/new y,hJ,VY;class tO extends I0{constructor(A=new y(0,0,1),Q=new y(0,0,0),E=1,B=16776960,I=E*0.2,C=I*0.2){super();if(this.type="ArrowHelper",hJ===void 0)hJ=new hA,hJ.setAttribute("position",new PA([0,0,0,0,1,0],3)),VY=new bB(0,0.5,1,5,1),VY.translate(0,-0.5,0);this.position.copy(Q),this.line=new VQ(hJ,new p0({color:B,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new xA(VY,new _0({color:B,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(A),this.setLength(E,I,C)}setDirection(A){if(A.y>0.99999)this.quaternion.set(0,0,0,1);else if(A.y<-0.99999)this.quaternion.set(1,0,0,0);else{sZ.set(A.z,0,-A.x).normalize();let Q=Math.acos(A.y);this.quaternion.setFromAxisAngle(sZ,Q)}}setLength(A,Q=A*0.2,E=Q*0.2){this.line.scale.set(1,Math.max(0.0001,A-Q),1),this.line.updateMatrix(),this.cone.scale.set(E,Q,E),this.cone.position.y=A,this.cone.updateMatrix()}setColor(A){this.line.material.color.set(A),this.cone.material.color.set(A)}copy(A){return super.copy(A,!1),this.line.copy(A.line),this.cone.copy(A.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class eO extends RQ{constructor(A=1){let Q=[0,0,0,A,0,0,0,0,0,0,A,0,0,0,0,0,0,A],E=[1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1],B=new hA;B.setAttribute("position",new PA(Q,3)),B.setAttribute("color",new PA(E,3));let I=new p0({vertexColors:!0,toneMapped:!1});super(B,I);this.type="AxesHelper"}setColors(A,Q,E){let B=new a,I=this.geometry.attributes.color.array;return B.set(A),B.toArray(I,0),B.toArray(I,3),B.set(Q),B.toArray(I,6),B.toArray(I,9),B.set(E),B.toArray(I,12),B.toArray(I,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aC{constructor(){this.type="ShapePath",this.color=new a,this.subPaths=[],this.currentPath=null}moveTo(A,Q){return this.currentPath=new TI,this.subPaths.push(this.currentPath),this.currentPath.moveTo(A,Q),this}lineTo(A,Q){return this.currentPath.lineTo(A,Q),this}quadraticCurveTo(A,Q,E,B){return this.currentPath.quadraticCurveTo(A,Q,E,B),this}bezierCurveTo(A,Q,E,B,I,C){return this.currentPath.bezierCurveTo(A,Q,E,B,I,C),this}splineThru(A){return this.currentPath.splineThru(A),this}toShapes(A){function Q(W){let Z=[];for(let G=0,X=W.length;G<X;G++){let q=W[G],M=new TB;M.curves=q.curves,Z.push(M)}return Z}function E(W,Z){let G=Z.length,X=!1;for(let q=G-1,M=0;M<G;q=M++){let F=Z[q],D=Z[M],_=D.x-F.x,w=D.y-F.y;if(Math.abs(w)>Number.EPSILON){if(w<0)F=Z[M],_=-_,D=Z[q],w=-w;if(W.y<F.y||W.y>D.y)continue;if(W.y===F.y){if(W.x===F.x)return!0}else{let k=w*(W.x-F.x)-_*(W.y-F.y);if(k===0)return!0;if(k<0)continue;X=!X}}else{if(W.y!==F.y)continue;if(D.x<=W.x&&W.x<=F.x||F.x<=W.x&&W.x<=D.x)return!0}}return X}let B=WE.isClockWise,I=this.subPaths;if(I.length===0)return[];let C,K,J,U=[];if(I.length===1)return K=I[0],J=new TB,J.curves=K.curves,U.push(J),U;let Y=!B(I[0].getPoints());Y=A?!Y:Y;let H=[],R=[],O=[],N=0,$;R[N]=void 0,O[N]=[];for(let W=0,Z=I.length;W<Z;W++)if(K=I[W],$=K.getPoints(),C=B($),C=A?!C:C,C){if(!Y&&R[N])N++;if(R[N]={s:new TB,p:$},R[N].s.curves=K.curves,Y)N++;O[N]=[]}else O[N].push({h:K,p:$[0]});if(!R[0])return Q(I);if(R.length>1){let W=!1,Z=0;for(let G=0,X=R.length;G<X;G++)H[G]=[];for(let G=0,X=R.length;G<X;G++){let q=O[G];for(let M=0;M<q.length;M++){let F=q[M],D=!0;for(let _=0;_<R.length;_++)if(E(F.p,R[_].p)){if(G!==_)Z++;if(D)D=!1,H[_].push(F);else W=!0}if(D)H[G].push(F)}}if(Z>0&&W===!1)O=H}let L;for(let W=0,Z=R.length;W<Z;W++){J=R[W].s,U.push(J),L=O[W];for(let G=0,X=L.length;G<X;G++)J.holes.push(L[G].h)}return U}}class LB extends rE{constructor(A,Q=null){super();this.object=A,this.domElement=Q,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function G5(A,Q){let E=A.image&&A.image.width?A.image.width/A.image.height:1;if(E>Q)A.repeat.x=1,A.repeat.y=E/Q,A.offset.x=0,A.offset.y=(1-A.repeat.y)/2;else A.repeat.x=Q/E,A.repeat.y=1,A.offset.x=(1-A.repeat.x)/2,A.offset.y=0;return A}function W5(A,Q){let E=A.image&&A.image.width?A.image.width/A.image.height:1;if(E>Q)A.repeat.x=Q/E,A.repeat.y=1,A.offset.x=(1-A.repeat.x)/2,A.offset.y=0;else A.repeat.x=1,A.repeat.y=E/Q,A.offset.x=0,A.offset.y=(1-A.repeat.y)/2;return A}function X5(A){return A.repeat.x=1,A.repeat.y=1,A.offset.x=0,A.offset.y=0,A}function a9(A,Q,E,B){let I=$5(B);switch(E){case 1021:return A*Q;case 1024:return A*Q;case 1025:return A*Q*2;case 1028:return A*Q/I.components*I.byteLength;case 1029:return A*Q/I.components*I.byteLength;case 1030:return A*Q*2/I.components*I.byteLength;case 1031:return A*Q*2/I.components*I.byteLength;case 1022:return A*Q*3/I.components*I.byteLength;case 1023:return A*Q*4/I.components*I.byteLength;case 1033:return A*Q*4/I.components*I.byteLength;case 33776:case 33777:return Math.floor((A+3)/4)*Math.floor((Q+3)/4)*8;case 33778:case 33779:return Math.floor((A+3)/4)*Math.floor((Q+3)/4)*16;case 35841:case 35843:return Math.max(A,16)*Math.max(Q,8)/4;case 35840:case 35842:return Math.max(A,8)*Math.max(Q,8)/2;case 36196:case 37492:return Math.floor((A+3)/4)*Math.floor((Q+3)/4)*8;case 37496:return Math.floor((A+3)/4)*Math.floor((Q+3)/4)*16;case 37808:return Math.floor((A+3)/4)*Math.floor((Q+3)/4)*16;case 37809:return Math.floor((A+4)/5)*Math.floor((Q+3)/4)*16;case 37810:return Math.floor((A+4)/5)*Math.floor((Q+4)/5)*16;case 37811:return Math.floor((A+5)/6)*Math.floor((Q+4)/5)*16;case 37812:return Math.floor((A+5)/6)*Math.floor((Q+5)/6)*16;case 37813:return Math.floor((A+7)/8)*Math.floor((Q+4)/5)*16;case 37814:return Math.floor((A+7)/8)*Math.floor((Q+5)/6)*16;case 37815:return Math.floor((A+7)/8)*Math.floor((Q+7)/8)*16;case 37816:return Math.floor((A+9)/10)*Math.floor((Q+4)/5)*16;case 37817:return Math.floor((A+9)/10)*Math.floor((Q+5)/6)*16;case 37818:return Math.floor((A+9)/10)*Math.floor((Q+7)/8)*16;case 37819:return Math.floor((A+9)/10)*Math.floor((Q+9)/10)*16;case 37820:return Math.floor((A+11)/12)*Math.floor((Q+9)/10)*16;case 37821:return Math.floor((A+11)/12)*Math.floor((Q+11)/12)*16;case 36492:case 36494:case 36495:return Math.ceil(A/4)*Math.ceil(Q/4)*16;case 36283:case 36284:return Math.ceil(A/4)*Math.ceil(Q/4)*8;case 36285:case 36286:return Math.ceil(A/4)*Math.ceil(Q/4)*16}throw new Error(`Unable to determine texture byte length for ${E} format.`)}function $5(A){switch(A){case 1009:case 1010:return{byteLength:1,components:1};case 1012:case 1011:case 1016:return{byteLength:2,components:1};case 1017:case 1018:return{byteLength:2,components:4};case 1014:case 1013:case 1015:return{byteLength:4,components:1};case 35902:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${A}.`)}var BN={contain:G5,cover:W5,fill:X5,getByteLength:a9};if(typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"173"}}));if(typeof window!=="undefined")if(window.__THREE__)console.warn("WARNING: Multiple instances of Three.js being imported.");else window.__THREE__="173";function SN(){let A=null,Q=!1,E=null,B=null;function I(C,K){E(C,K),B=A.requestAnimationFrame(I)}return{start:function(){if(Q===!0)return;if(E===null)return;B=A.requestAnimationFrame(I),Q=!0},stop:function(){A.cancelAnimationFrame(B),Q=!1},setAnimationLoop:function(C){E=C},setContext:function(C){A=C}}}function L5(A){let Q=/*@__PURE__*/new WeakMap;function E(J,U){let{array:Y,usage:H}=J,R=Y.byteLength,O=A.createBuffer();A.bindBuffer(U,O),A.bufferData(U,Y,H),J.onUploadCallback();let N;if(Y instanceof Float32Array)N=A.FLOAT;else if(Y instanceof Uint16Array)if(J.isFloat16BufferAttribute)N=A.HALF_FLOAT;else N=A.UNSIGNED_SHORT;else if(Y instanceof Int16Array)N=A.SHORT;else if(Y instanceof Uint32Array)N=A.UNSIGNED_INT;else if(Y instanceof Int32Array)N=A.INT;else if(Y instanceof Int8Array)N=A.BYTE;else if(Y instanceof Uint8Array)N=A.UNSIGNED_BYTE;else if(Y instanceof Uint8ClampedArray)N=A.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Y);return{buffer:O,type:N,bytesPerElement:Y.BYTES_PER_ELEMENT,version:J.version,size:R}}function B(J,U,Y){let{array:H,updateRanges:R}=U;if(A.bindBuffer(Y,J),R.length===0)A.bufferSubData(Y,0,H);else{R.sort((N,$)=>N.start-$.start);let O=0;for(let N=1;N<R.length;N++){let $=R[O],L=R[N];if(L.start<=$.start+$.count+1)$.count=Math.max($.count,L.start+L.count-$.start);else++O,R[O]=L}R.length=O+1;for(let N=0,$=R.length;N<$;N++){let L=R[N];A.bufferSubData(Y,L.start*H.BYTES_PER_ELEMENT,H,L.start,L.count)}U.clearUpdateRanges()}U.onUploadCallback()}function I(J){if(J.isInterleavedBufferAttribute)J=J.data;return Q.get(J)}function C(J){if(J.isInterleavedBufferAttribute)J=J.data;let U=Q.get(J);if(U)A.deleteBuffer(U.buffer),Q.delete(J)}function K(J,U){if(J.isInterleavedBufferAttribute)J=J.data;if(J.isGLBufferAttribute){let H=Q.get(J);if(!H||H.version<J.version)Q.set(J,{buffer:J.buffer,type:J.type,bytesPerElement:J.elementSize,version:J.version});return}let Y=Q.get(J);if(Y===void 0)Q.set(J,E(J,U));else if(Y.version<J.version){if(Y.size!==J.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");B(Y.buffer,J,U),Y.version=J.version}}return{get:I,remove:C,update:K}}var q5=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,F5=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,D5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,M5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,w5=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,_5=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,k5=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,S5=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,T5=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,z5=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,P5=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,V5=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,j5=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,v5=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,h5=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,y5=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,g5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,x5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,b5=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,f5=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,u5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,p5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,m5=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,c5=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,l5=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,d5=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,n5=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,s5=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,i5=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,o5=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,r5="gl_FragColor = linearToOutputTexel( gl_FragColor );",a5=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,t5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,e5=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Aq=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Qq=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Eq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Bq=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Iq=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Cq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Kq=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Jq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Uq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Yq=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Oq=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Hq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Zq=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Rq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Nq=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Gq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Wq=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Xq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,$q=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Lq=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,qq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Fq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Dq=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Mq=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wq=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_q=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,kq=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Sq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Tq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,zq=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Pq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Vq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jq=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,vq=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,yq=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,gq=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,xq=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,bq=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,fq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pq=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,mq=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,cq=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,lq=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,dq=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,nq=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sq=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,iq=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,oq=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,rq=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,aq=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tq=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,eq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,AF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,QF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,EF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,BF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,IF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,CF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,KF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,JF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,UF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,YF=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,OF=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,HF=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ZF=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,RF=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,NF=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,GF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,WF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,XF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$F=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,LF=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qF=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,FF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,DF=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,MF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wF=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_F=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,kF=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,SF=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,TF=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,zF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,PF=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,VF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jF=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hF=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yF=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gF=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xF=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,bF=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fF=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,uF=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,pF=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mF=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cF=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,lF=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dF=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nF=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sF=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,iF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oF=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rF=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,aF=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,G0={alphahash_fragment:q5,alphahash_pars_fragment:F5,alphamap_fragment:D5,alphamap_pars_fragment:M5,alphatest_fragment:w5,alphatest_pars_fragment:_5,aomap_fragment:k5,aomap_pars_fragment:S5,batching_pars_vertex:T5,batching_vertex:z5,begin_vertex:P5,beginnormal_vertex:V5,bsdfs:j5,iridescence_fragment:v5,bumpmap_pars_fragment:h5,clipping_planes_fragment:y5,clipping_planes_pars_fragment:g5,clipping_planes_pars_vertex:x5,clipping_planes_vertex:b5,color_fragment:f5,color_pars_fragment:u5,color_pars_vertex:p5,color_vertex:m5,common:c5,cube_uv_reflection_fragment:l5,defaultnormal_vertex:d5,displacementmap_pars_vertex:n5,displacementmap_vertex:s5,emissivemap_fragment:i5,emissivemap_pars_fragment:o5,colorspace_fragment:r5,colorspace_pars_fragment:a5,envmap_fragment:t5,envmap_common_pars_fragment:e5,envmap_pars_fragment:Aq,envmap_pars_vertex:Qq,envmap_physical_pars_fragment:Zq,envmap_vertex:Eq,fog_vertex:Bq,fog_pars_vertex:Iq,fog_fragment:Cq,fog_pars_fragment:Kq,gradientmap_pars_fragment:Jq,lightmap_pars_fragment:Uq,lights_lambert_fragment:Yq,lights_lambert_pars_fragment:Oq,lights_pars_begin:Hq,lights_toon_fragment:Rq,lights_toon_pars_fragment:Nq,lights_phong_fragment:Gq,lights_phong_pars_fragment:Wq,lights_physical_fragment:Xq,lights_physical_pars_fragment:$q,lights_fragment_begin:Lq,lights_fragment_maps:qq,lights_fragment_end:Fq,logdepthbuf_fragment:Dq,logdepthbuf_pars_fragment:Mq,logdepthbuf_pars_vertex:wq,logdepthbuf_vertex:_q,map_fragment:kq,map_pars_fragment:Sq,map_particle_fragment:Tq,map_particle_pars_fragment:zq,metalnessmap_fragment:Pq,metalnessmap_pars_fragment:Vq,morphinstance_vertex:jq,morphcolor_vertex:vq,morphnormal_vertex:hq,morphtarget_pars_vertex:yq,morphtarget_vertex:gq,normal_fragment_begin:xq,normal_fragment_maps:bq,normal_pars_fragment:fq,normal_pars_vertex:uq,normal_vertex:pq,normalmap_pars_fragment:mq,clearcoat_normal_fragment_begin:cq,clearcoat_normal_fragment_maps:lq,clearcoat_pars_fragment:dq,iridescence_pars_fragment:nq,opaque_fragment:sq,packing:iq,premultiplied_alpha_fragment:oq,project_vertex:rq,dithering_fragment:aq,dithering_pars_fragment:tq,roughnessmap_fragment:eq,roughnessmap_pars_fragment:AF,shadowmap_pars_fragment:QF,shadowmap_pars_vertex:EF,shadowmap_vertex:BF,shadowmask_pars_fragment:IF,skinbase_vertex:CF,skinning_pars_vertex:KF,skinning_vertex:JF,skinnormal_vertex:UF,specularmap_fragment:YF,specularmap_pars_fragment:OF,tonemapping_fragment:HF,tonemapping_pars_fragment:ZF,transmission_fragment:RF,transmission_pars_fragment:NF,uv_pars_fragment:GF,uv_pars_vertex:WF,uv_vertex:XF,worldpos_vertex:$F,background_vert:LF,background_frag:qF,backgroundCube_vert:FF,backgroundCube_frag:DF,cube_vert:MF,cube_frag:wF,depth_vert:_F,depth_frag:kF,distanceRGBA_vert:SF,distanceRGBA_frag:TF,equirect_vert:zF,equirect_frag:PF,linedashed_vert:VF,linedashed_frag:jF,meshbasic_vert:vF,meshbasic_frag:hF,meshlambert_vert:yF,meshlambert_frag:gF,meshmatcap_vert:xF,meshmatcap_frag:bF,meshnormal_vert:fF,meshnormal_frag:uF,meshphong_vert:pF,meshphong_frag:mF,meshphysical_vert:cF,meshphysical_frag:lF,meshtoon_vert:dF,meshtoon_frag:nF,points_vert:sF,points_frag:iF,shadow_vert:oF,shadow_frag:rF,sprite_vert:aF,sprite_frag:tF},vA={common:{diffuse:{value:/*@__PURE__*/new a(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:/*@__PURE__*/new E0},alphaMap:{value:null},alphaMapTransform:{value:/*@__PURE__*/new E0},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:/*@__PURE__*/new E0}},envmap:{envMap:{value:null},envMapRotation:{value:/*@__PURE__*/new E0},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:0.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:/*@__PURE__*/new E0}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:/*@__PURE__*/new E0}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:/*@__PURE__*/new E0},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:/*@__PURE__*/new E0},normalScale:{value:/*@__PURE__*/new AA(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:/*@__PURE__*/new E0},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:/*@__PURE__*/new E0}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:/*@__PURE__*/new E0}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:/*@__PURE__*/new E0}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:0.00025},fogNear:{value:1},fogFar:{value:2000},fogColor:{value:/*@__PURE__*/new a(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:/*@__PURE__*/new a(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:/*@__PURE__*/new E0},alphaTest:{value:0},uvTransform:{value:/*@__PURE__*/new E0}},sprite:{diffuse:{value:/*@__PURE__*/new a(16777215)},opacity:{value:1},center:{value:/*@__PURE__*/new AA(0.5,0.5)},rotation:{value:0},map:{value:null},mapTransform:{value:/*@__PURE__*/new E0},alphaMap:{value:null},alphaMapTransform:{value:/*@__PURE__*/new E0},alphaTest:{value:0}}},CE={basic:{uniforms:/*@__PURE__*/BE([vA.common,vA.specularmap,vA.envmap,vA.aomap,vA.lightmap,vA.fog]),vertexShader:G0.meshbasic_vert,fragmentShader:G0.meshbasic_frag},lambert:{uniforms:/*@__PURE__*/BE([vA.common,vA.specularmap,vA.envmap,vA.aomap,vA.lightmap,vA.emissivemap,vA.bumpmap,vA.normalmap,vA.displacementmap,vA.fog,vA.lights,{emissive:{value:/*@__PURE__*/new a(0)}}]),vertexShader:G0.meshlambert_vert,fragmentShader:G0.meshlambert_frag},phong:{uniforms:/*@__PURE__*/BE([vA.common,vA.specularmap,vA.envmap,vA.aomap,vA.lightmap,vA.emissivemap,vA.bumpmap,vA.normalmap,vA.displacementmap,vA.fog,vA.lights,{emissive:{value:/*@__PURE__*/new a(0)},specular:{value:/*@__PURE__*/new a(1118481)},shininess:{value:30}}]),vertexShader:G0.meshphong_vert,fragmentShader:G0.meshphong_frag},standard:{uniforms:/*@__PURE__*/BE([vA.common,vA.envmap,vA.aomap,vA.lightmap,vA.emissivemap,vA.bumpmap,vA.normalmap,vA.displacementmap,vA.roughnessmap,vA.metalnessmap,vA.fog,vA.lights,{emissive:{value:/*@__PURE__*/new a(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:G0.meshphysical_vert,fragmentShader:G0.meshphysical_frag},toon:{uniforms:/*@__PURE__*/BE([vA.common,vA.aomap,vA.lightmap,vA.emissivemap,vA.bumpmap,vA.normalmap,vA.displacementmap,vA.gradientmap,vA.fog,vA.lights,{emissive:{value:/*@__PURE__*/new a(0)}}]),vertexShader:G0.meshtoon_vert,fragmentShader:G0.meshtoon_frag},matcap:{uniforms:/*@__PURE__*/BE([vA.common,vA.bumpmap,vA.normalmap,vA.displacementmap,vA.fog,{matcap:{value:null}}]),vertexShader:G0.meshmatcap_vert,fragmentShader:G0.meshmatcap_frag},points:{uniforms:/*@__PURE__*/BE([vA.points,vA.fog]),vertexShader:G0.points_vert,fragmentShader:G0.points_frag},dashed:{uniforms:/*@__PURE__*/BE([vA.common,vA.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:G0.linedashed_vert,fragmentShader:G0.linedashed_frag},depth:{uniforms:/*@__PURE__*/BE([vA.common,vA.displacementmap]),vertexShader:G0.depth_vert,fragmentShader:G0.depth_frag},normal:{uniforms:/*@__PURE__*/BE([vA.common,vA.bumpmap,vA.normalmap,vA.displacementmap,{opacity:{value:1}}]),vertexShader:G0.meshnormal_vert,fragmentShader:G0.meshnormal_frag},sprite:{uniforms:/*@__PURE__*/BE([vA.sprite,vA.fog]),vertexShader:G0.sprite_vert,fragmentShader:G0.sprite_frag},background:{uniforms:{uvTransform:{value:/*@__PURE__*/new E0},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:G0.background_vert,fragmentShader:G0.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:/*@__PURE__*/new E0}},vertexShader:G0.backgroundCube_vert,fragmentShader:G0.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:G0.cube_vert,fragmentShader:G0.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:G0.equirect_vert,fragmentShader:G0.equirect_frag},distanceRGBA:{uniforms:/*@__PURE__*/BE([vA.common,vA.displacementmap,{referencePosition:{value:/*@__PURE__*/new y},nearDistance:{value:1},farDistance:{value:1000}}]),vertexShader:G0.distanceRGBA_vert,fragmentShader:G0.distanceRGBA_frag},shadow:{uniforms:/*@__PURE__*/BE([vA.lights,vA.fog,{color:{value:/*@__PURE__*/new a(0)},opacity:{value:1}}]),vertexShader:G0.shadow_vert,fragmentShader:G0.shadow_frag}};CE.physical={uniforms:/*@__PURE__*/BE([CE.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:/*@__PURE__*/new E0},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:/*@__PURE__*/new E0},clearcoatNormalScale:{value:/*@__PURE__*/new AA(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:/*@__PURE__*/new E0},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:/*@__PURE__*/new E0},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:/*@__PURE__*/new E0},sheen:{value:0},sheenColor:{value:/*@__PURE__*/new a(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:/*@__PURE__*/new E0},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:/*@__PURE__*/new E0},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:/*@__PURE__*/new E0},transmissionSamplerSize:{value:/*@__PURE__*/new AA},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:/*@__PURE__*/new E0},attenuationDistance:{value:0},attenuationColor:{value:/*@__PURE__*/new a(0)},specularColor:{value:/*@__PURE__*/new a(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:/*@__PURE__*/new E0},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:/*@__PURE__*/new E0},anisotropyVector:{value:/*@__PURE__*/new AA},anisotropyMap:{value:null},anisotropyMapTransform:{value:/*@__PURE__*/new E0}}]),vertexShader:G0.meshphysical_vert,fragmentShader:G0.meshphysical_frag};var t9={r:0,b:0,g:0},f1=/*@__PURE__*/new DQ,eF=/*@__PURE__*/new RA;function AD(A,Q,E,B,I,C,K){let J=new a(0),U=C===!0?0:1,Y,H,R=null,O=0,N=null;function $(X){let q=X.isScene===!0?X.background:null;if(q&&q.isTexture)q=(X.backgroundBlurriness>0?E:Q).get(q);return q}function L(X){let q=!1,M=$(X);if(M===null)Z(J,U);else if(M&&M.isColor)Z(M,1),q=!0;let F=A.xr.getEnvironmentBlendMode();if(F==="additive")B.buffers.color.setClear(0,0,0,1,K);else if(F==="alpha-blend")B.buffers.color.setClear(0,0,0,0,K);if(A.autoClear||q)B.buffers.depth.setTest(!0),B.buffers.depth.setMask(!0),B.buffers.color.setMask(!0),A.clear(A.autoClearColor,A.autoClearDepth,A.autoClearStencil)}function W(X,q){let M=$(q);if(M&&(M.isCubeTexture||M.mapping===V8)){if(H===void 0)H=new xA(new bQ(1,1,1),new bA({name:"BackgroundCubeMaterial",uniforms:v1(CE.backgroundCube.uniforms),vertexShader:CE.backgroundCube.vertexShader,fragmentShader:CE.backgroundCube.fragmentShader,side:ZQ,depthTest:!1,depthWrite:!1,fog:!1})),H.geometry.deleteAttribute("normal"),H.geometry.deleteAttribute("uv"),H.onBeforeRender=function(F,D,_){this.matrixWorld.copyPosition(_.matrixWorld)},Object.defineProperty(H.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),I.update(H);if(f1.copy(q.backgroundRotation),f1.x*=-1,f1.y*=-1,f1.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1)f1.y*=-1,f1.z*=-1;if(H.material.uniforms.envMap.value=M,H.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,H.material.uniforms.backgroundBlurriness.value=q.backgroundBlurriness,H.material.uniforms.backgroundIntensity.value=q.backgroundIntensity,H.material.uniforms.backgroundRotation.value.setFromMatrix4(eF.makeRotationFromEuler(f1)),H.material.toneMapped=O0.getTransfer(M.colorSpace)!==IQ,R!==M||O!==M.version||N!==A.toneMapping)H.material.needsUpdate=!0,R=M,O=M.version,N=A.toneMapping;H.layers.enableAll(),X.unshift(H,H.geometry,H.material,0,0,null)}else if(M&&M.isTexture){if(Y===void 0)Y=new xA(new dQ(2,2),new bA({name:"BackgroundMaterial",uniforms:v1(CE.background.uniforms),vertexShader:CE.background.vertexShader,fragmentShader:CE.background.fragmentShader,side:jQ,depthTest:!1,depthWrite:!1,fog:!1})),Y.geometry.deleteAttribute("normal"),Object.defineProperty(Y.material,"map",{get:function(){return this.uniforms.t2D.value}}),I.update(Y);if(Y.material.uniforms.t2D.value=M,Y.material.uniforms.backgroundIntensity.value=q.backgroundIntensity,Y.material.toneMapped=O0.getTransfer(M.colorSpace)!==IQ,M.matrixAutoUpdate===!0)M.updateMatrix();if(Y.material.uniforms.uvTransform.value.copy(M.matrix),R!==M||O!==M.version||N!==A.toneMapping)Y.material.needsUpdate=!0,R=M,O=M.version,N=A.toneMapping;Y.layers.enableAll(),X.unshift(Y,Y.geometry,Y.material,0,0,null)}}function Z(X,q){X.getRGB(t9,_O(A)),B.buffers.color.setClear(t9.r,t9.g,t9.b,q,K)}function G(){if(H!==void 0)H.geometry.dispose(),H.material.dispose(),H=void 0;if(Y!==void 0)Y.geometry.dispose(),Y.material.dispose(),Y=void 0}return{getClearColor:function(){return J},setClearColor:function(X,q=1){J.set(X),U=q,Z(J,U)},getClearAlpha:function(){return U},setClearAlpha:function(X){U=X,Z(J,U)},render:L,addToRenderList:W,dispose:G}}function QD(A,Q){let E=A.getParameter(A.MAX_VERTEX_ATTRIBS),B={},I=O(null),C=I,K=!1;function J(k,T,z,j,v){let g=!1,P=R(j,z,T);if(C!==P)C=P,Y(C.object);if(g=N(k,j,z,v),g)$(k,j,z,v);if(v!==null)Q.update(v,A.ELEMENT_ARRAY_BUFFER);if(g||K){if(K=!1,q(k,T,z,j),v!==null)A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,Q.get(v).buffer)}}function U(){return A.createVertexArray()}function Y(k){return A.bindVertexArray(k)}function H(k){return A.deleteVertexArray(k)}function R(k,T,z){let j=z.wireframe===!0,v=B[k.id];if(v===void 0)v={},B[k.id]=v;let g=v[T.id];if(g===void 0)g={},v[T.id]=g;let P=g[j];if(P===void 0)P=O(U()),g[j]=P;return P}function O(k){let T=[],z=[],j=[];for(let v=0;v<E;v++)T[v]=0,z[v]=0,j[v]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:T,enabledAttributes:z,attributeDivisors:j,object:k,attributes:{},index:null}}function N(k,T,z,j){let v=C.attributes,g=T.attributes,P=0,V=z.getAttributes();for(let S in V)if(V[S].location>=0){let x=v[S],b=g[S];if(b===void 0){if(S==="instanceMatrix"&&k.instanceMatrix)b=k.instanceMatrix;if(S==="instanceColor"&&k.instanceColor)b=k.instanceColor}if(x===void 0)return!0;if(x.attribute!==b)return!0;if(b&&x.data!==b.data)return!0;P++}if(C.attributesNum!==P)return!0;if(C.index!==j)return!0;return!1}function $(k,T,z,j){let v={},g=T.attributes,P=0,V=z.getAttributes();for(let S in V)if(V[S].location>=0){let x=g[S];if(x===void 0){if(S==="instanceMatrix"&&k.instanceMatrix)x=k.instanceMatrix;if(S==="instanceColor"&&k.instanceColor)x=k.instanceColor}let b={};if(b.attribute=x,x&&x.data)b.data=x.data;v[S]=b,P++}C.attributes=v,C.attributesNum=P,C.index=j}function L(){let k=C.newAttributes;for(let T=0,z=k.length;T<z;T++)k[T]=0}function W(k){Z(k,0)}function Z(k,T){let{newAttributes:z,enabledAttributes:j,attributeDivisors:v}=C;if(z[k]=1,j[k]===0)A.enableVertexAttribArray(k),j[k]=1;if(v[k]!==T)A.vertexAttribDivisor(k,T),v[k]=T}function G(){let{newAttributes:k,enabledAttributes:T}=C;for(let z=0,j=T.length;z<j;z++)if(T[z]!==k[z])A.disableVertexAttribArray(z),T[z]=0}function X(k,T,z,j,v,g,P){if(P===!0)A.vertexAttribIPointer(k,T,z,v,g);else A.vertexAttribPointer(k,T,z,j,v,g)}function q(k,T,z,j){L();let v=j.attributes,g=z.getAttributes(),P=T.defaultAttributeValues;for(let V in g){let S=g[V];if(S.location>=0){let h=v[V];if(h===void 0){if(V==="instanceMatrix"&&k.instanceMatrix)h=k.instanceMatrix;if(V==="instanceColor"&&k.instanceColor)h=k.instanceColor}if(h!==void 0){let{normalized:x,itemSize:b}=h,m=Q.get(h);if(m===void 0)continue;let{buffer:s,type:i,bytesPerElement:n}=m,l=i===A.INT||i===A.UNSIGNED_INT||h.gpuType===aJ;if(h.isInterleavedBufferAttribute){let c=h.data,o=c.stride,e=h.offset;if(c.isInstancedInterleavedBuffer){for(let BA=0;BA<S.locationSize;BA++)Z(S.location+BA,c.meshPerAttribute);if(k.isInstancedMesh!==!0&&j._maxInstanceCount===void 0)j._maxInstanceCount=c.meshPerAttribute*c.count}else for(let BA=0;BA<S.locationSize;BA++)W(S.location+BA);A.bindBuffer(A.ARRAY_BUFFER,s);for(let BA=0;BA<S.locationSize;BA++)X(S.location+BA,b/S.locationSize,i,x,o*n,(e+b/S.locationSize*BA)*n,l)}else{if(h.isInstancedBufferAttribute){for(let c=0;c<S.locationSize;c++)Z(S.location+c,h.meshPerAttribute);if(k.isInstancedMesh!==!0&&j._maxInstanceCount===void 0)j._maxInstanceCount=h.meshPerAttribute*h.count}else for(let c=0;c<S.locationSize;c++)W(S.location+c);A.bindBuffer(A.ARRAY_BUFFER,s);for(let c=0;c<S.locationSize;c++)X(S.location+c,b/S.locationSize,i,x,b*n,b/S.locationSize*c*n,l)}}else if(P!==void 0){let x=P[V];if(x!==void 0)switch(x.length){case 2:A.vertexAttrib2fv(S.location,x);break;case 3:A.vertexAttrib3fv(S.location,x);break;case 4:A.vertexAttrib4fv(S.location,x);break;default:A.vertexAttrib1fv(S.location,x)}}}}G()}function M(){_();for(let k in B){let T=B[k];for(let z in T){let j=T[z];for(let v in j)H(j[v].object),delete j[v];delete T[z]}delete B[k]}}function F(k){if(B[k.id]===void 0)return;let T=B[k.id];for(let z in T){let j=T[z];for(let v in j)H(j[v].object),delete j[v];delete T[z]}delete B[k.id]}function D(k){for(let T in B){let z=B[T];if(z[k.id]===void 0)continue;let j=z[k.id];for(let v in j)H(j[v].object),delete j[v];delete z[k.id]}}function _(){if(w(),K=!0,C===I)return;C=I,Y(C.object)}function w(){I.geometry=null,I.program=null,I.wireframe=!1}return{setup:J,reset:_,resetDefaultState:w,dispose:M,releaseStatesOfGeometry:F,releaseStatesOfProgram:D,initAttributes:L,enableAttribute:W,disableUnusedAttributes:G}}function ED(A,Q,E){let B;function I(Y){B=Y}function C(Y,H){A.drawArrays(B,Y,H),E.update(H,B,1)}function K(Y,H,R){if(R===0)return;A.drawArraysInstanced(B,Y,H,R),E.update(H,B,R)}function J(Y,H,R){if(R===0)return;Q.get("WEBGL_multi_draw").multiDrawArraysWEBGL(B,Y,0,H,0,R);let N=0;for(let $=0;$<R;$++)N+=H[$];E.update(N,B,1)}function U(Y,H,R,O){if(R===0)return;let N=Q.get("WEBGL_multi_draw");if(N===null)for(let $=0;$<Y.length;$++)K(Y[$],H[$],O[$]);else{N.multiDrawArraysInstancedWEBGL(B,Y,0,H,0,O,0,R);let $=0;for(let L=0;L<R;L++)$+=H[L]*O[L];E.update($,B,1)}}this.setMode=I,this.render=C,this.renderInstances=K,this.renderMultiDraw=J,this.renderMultiDrawInstances=U}function BD(A,Q,E,B){let I;function C(){if(I!==void 0)return I;if(Q.has("EXT_texture_filter_anisotropic")===!0){let D=Q.get("EXT_texture_filter_anisotropic");I=A.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else I=0;return I}function K(D){if(D!==V0&&B.convert(D)!==A.getParameter(A.IMPLEMENTATION_COLOR_READ_FORMAT))return!1;return!0}function J(D){let _=D===sA&&(Q.has("EXT_color_buffer_half_float")||Q.has("EXT_color_buffer_float"));if(D!==x0&&B.convert(D)!==A.getParameter(A.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==m0&&!_)return!1;return!0}function U(D){if(D==="highp"){if(A.getShaderPrecisionFormat(A.VERTEX_SHADER,A.HIGH_FLOAT).precision>0&&A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.HIGH_FLOAT).precision>0)return"highp";D="mediump"}if(D==="mediump"){if(A.getShaderPrecisionFormat(A.VERTEX_SHADER,A.MEDIUM_FLOAT).precision>0&&A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.MEDIUM_FLOAT).precision>0)return"mediump"}return"lowp"}let Y=E.precision!==void 0?E.precision:"highp",H=U(Y);if(H!==Y)console.warn("THREE.WebGLRenderer:",Y,"not supported, using",H,"instead."),Y=H;let R=E.logarithmicDepthBuffer===!0,O=E.reverseDepthBuffer===!0&&Q.has("EXT_clip_control"),N=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS),$=A.getParameter(A.MAX_VERTEX_TEXTURE_IMAGE_UNITS),L=A.getParameter(A.MAX_TEXTURE_SIZE),W=A.getParameter(A.MAX_CUBE_MAP_TEXTURE_SIZE),Z=A.getParameter(A.MAX_VERTEX_ATTRIBS),G=A.getParameter(A.MAX_VERTEX_UNIFORM_VECTORS),X=A.getParameter(A.MAX_VARYING_VECTORS),q=A.getParameter(A.MAX_FRAGMENT_UNIFORM_VECTORS),M=$>0,F=A.getParameter(A.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:C,getMaxPrecision:U,textureFormatReadable:K,textureTypeReadable:J,precision:Y,logarithmicDepthBuffer:R,reverseDepthBuffer:O,maxTextures:N,maxVertexTextures:$,maxTextureSize:L,maxCubemapSize:W,maxAttributes:Z,maxVertexUniforms:G,maxVaryings:X,maxFragmentUniforms:q,vertexTextures:M,maxSamples:F}}function ID(A){let Q=this,E=null,B=0,I=!1,C=!1,K=new UQ,J=new E0,U={value:null,needsUpdate:!1};this.uniform=U,this.numPlanes=0,this.numIntersection=0,this.init=function(R,O){let N=R.length!==0||O||B!==0||I;return I=O,B=R.length,N},this.beginShadows=function(){C=!0,H(null)},this.endShadows=function(){C=!1},this.setGlobalState=function(R,O){E=H(R,O,0)},this.setState=function(R,O,N){let{clippingPlanes:$,clipIntersection:L,clipShadows:W}=R,Z=A.get(R);if(!I||$===null||$.length===0||C&&!W)if(C)H(null);else Y();else{let G=C?0:B,X=G*4,q=Z.clippingState||null;U.value=q,q=H($,O,X,N);for(let M=0;M!==X;++M)q[M]=E[M];Z.clippingState=q,this.numIntersection=L?this.numPlanes:0,this.numPlanes+=G}};function Y(){if(U.value!==E)U.value=E,U.needsUpdate=B>0;Q.numPlanes=B,Q.numIntersection=0}function H(R,O,N,$){let L=R!==null?R.length:0,W=null;if(L!==0){if(W=U.value,$!==!0||W===null){let Z=N+L*4,G=O.matrixWorldInverse;if(J.getNormalMatrix(G),W===null||W.length<Z)W=new Float32Array(Z);for(let X=0,q=N;X!==L;++X,q+=4)K.copy(R[X]).applyMatrix4(G,J),K.normal.toArray(W,q),W[q+3]=K.constant}U.value=W,U.needsUpdate=!0}return Q.numPlanes=L,Q.numIntersection=0,W}}function CD(A){let Q=/*@__PURE__*/new WeakMap;function E(K,J){if(J===W1)K.mapping=G1;else if(J===P8)K.mapping=zI;return K}function B(K){if(K&&K.isTexture){let J=K.mapping;if(J===W1||J===P8)if(Q.has(K)){let U=Q.get(K).texture;return E(U,K.mapping)}else{let U=K.image;if(U&&U.height>0){let Y=new DC(U.height);return Y.fromEquirectangularTexture(A,K),Q.set(K,Y),K.addEventListener("dispose",I),E(Y.texture,K.mapping)}else return null}}return K}function I(K){let J=K.target;J.removeEventListener("dispose",I);let U=Q.get(J);if(U!==void 0)Q.delete(J),U.dispose()}function C(){Q=/*@__PURE__*/new WeakMap}return{get:B,dispose:C}}var K6=4,IN=[0.125,0.215,0.35,0.446,0.526,0.582],m1=20,AH=/*@__PURE__*/new HE,CN=/*@__PURE__*/new a,QH=null,EH=0,BH=0,IH=!1,p1=(1+Math.sqrt(5))/2,C6=1/p1,KN=[/*@__PURE__*/new y(-p1,C6,0),/*@__PURE__*/new y(p1,C6,0),/*@__PURE__*/new y(-C6,0,p1),/*@__PURE__*/new y(C6,0,p1),/*@__PURE__*/new y(0,p1,-C6),/*@__PURE__*/new y(0,p1,C6),/*@__PURE__*/new y(-1,1,-1),/*@__PURE__*/new y(1,1,-1),/*@__PURE__*/new y(-1,1,1),/*@__PURE__*/new y(1,1,1)];class QU{constructor(A){this._renderer=A,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(A,Q=0,E=0.1,B=100){QH=this._renderer.getRenderTarget(),EH=this._renderer.getActiveCubeFace(),BH=this._renderer.getActiveMipmapLevel(),IH=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let I=this._allocateTargets();if(I.depthBuffer=!0,this._sceneToCubeUV(A,E,B,I),Q>0)this._blur(I,0,0,Q);return this._applyPMREM(I),this._cleanup(I),I}fromEquirectangular(A,Q=null){return this._fromTexture(A,Q)}fromCubemap(A,Q=null){return this._fromTexture(A,Q)}compileCubemapShader(){if(this._cubemapMaterial===null)this._cubemapMaterial=YN(),this._compileMaterial(this._cubemapMaterial)}compileEquirectangularShader(){if(this._equirectMaterial===null)this._equirectMaterial=UN(),this._compileMaterial(this._equirectMaterial)}dispose(){if(this._dispose(),this._cubemapMaterial!==null)this._cubemapMaterial.dispose();if(this._equirectMaterial!==null)this._equirectMaterial.dispose()}_setSize(A){this._lodMax=Math.floor(Math.log2(A)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){if(this._blurMaterial!==null)this._blurMaterial.dispose();if(this._pingPongRenderTarget!==null)this._pingPongRenderTarget.dispose();for(let A=0;A<this._lodPlanes.length;A++)this._lodPlanes[A].dispose()}_cleanup(A){this._renderer.setRenderTarget(QH,EH,BH),this._renderer.xr.enabled=IH,A.scissorTest=!1,e9(A,0,0,A.width,A.height)}_fromTexture(A,Q){if(A.mapping===G1||A.mapping===zI)this._setSize(A.image.length===0?16:A.image[0].width||A.image[0].image.width);else this._setSize(A.image.width/4);QH=this._renderer.getRenderTarget(),EH=this._renderer.getActiveCubeFace(),BH=this._renderer.getActiveMipmapLevel(),IH=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let E=Q||this._allocateTargets();return this._textureToCubeUV(A,E),this._applyPMREM(E),this._cleanup(E),E}_allocateTargets(){let A=3*Math.max(this._cubeSize,112),Q=4*this._cubeSize,E={magFilter:L0,minFilter:L0,generateMipmaps:!1,type:sA,format:V0,colorSpace:b0,depthBuffer:!1},B=JN(A,Q,E);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==A||this._pingPongRenderTarget.height!==Q){if(this._pingPongRenderTarget!==null)this._dispose();this._pingPongRenderTarget=JN(A,Q,E);let{_lodMax:I}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=KD(I)),this._blurMaterial=JD(I,A,Q)}return B}_compileMaterial(A){let Q=new xA(this._lodPlanes[0],A);this._renderer.compile(Q,AH)}_sceneToCubeUV(A,Q,E,B){let K=new v0(90,1,Q,E),J=[1,-1,1,1,1,1],U=[1,1,1,-1,-1,-1],Y=this._renderer,H=Y.autoClear,R=Y.toneMapping;Y.getClearColor(CN),Y.toneMapping=VB,Y.autoClear=!1;let O=new _0({name:"PMREM.Background",side:ZQ,depthWrite:!1,depthTest:!1}),N=new xA(new bQ,O),$=!1,L=A.background;if(L){if(L.isColor)O.color.copy(L),A.background=null,$=!0}else O.color.copy(CN),$=!0;for(let W=0;W<6;W++){let Z=W%3;if(Z===0)K.up.set(0,J[W],0),K.lookAt(U[W],0,0);else if(Z===1)K.up.set(0,0,J[W]),K.lookAt(0,U[W],0);else K.up.set(0,J[W],0),K.lookAt(0,0,U[W]);let G=this._cubeSize;if(e9(B,Z*G,W>2?G:0,G,G),Y.setRenderTarget(B),$)Y.render(N,K);Y.render(A,K)}N.geometry.dispose(),N.material.dispose(),Y.toneMapping=R,Y.autoClear=H,A.background=L}_textureToCubeUV(A,Q){let E=this._renderer,B=A.mapping===G1||A.mapping===zI;if(B){if(this._cubemapMaterial===null)this._cubemapMaterial=YN();this._cubemapMaterial.uniforms.flipEnvMap.value=A.isRenderTargetTexture===!1?-1:1}else if(this._equirectMaterial===null)this._equirectMaterial=UN();let I=B?this._cubemapMaterial:this._equirectMaterial,C=new xA(this._lodPlanes[0],I),K=I.uniforms;K.envMap.value=A;let J=this._cubeSize;e9(Q,0,0,3*J,2*J),E.setRenderTarget(Q),E.render(C,AH)}_applyPMREM(A){let Q=this._renderer,E=Q.autoClear;Q.autoClear=!1;let B=this._lodPlanes.length;for(let I=1;I<B;I++){let C=Math.sqrt(this._sigmas[I]*this._sigmas[I]-this._sigmas[I-1]*this._sigmas[I-1]),K=KN[(B-I-1)%KN.length];this._blur(A,I-1,I,C,K)}Q.autoClear=E}_blur(A,Q,E,B,I){let C=this._pingPongRenderTarget;this._halfBlur(A,C,Q,E,B,"latitudinal",I),this._halfBlur(C,A,E,E,B,"longitudinal",I)}_halfBlur(A,Q,E,B,I,C,K){let J=this._renderer,U=this._blurMaterial;if(C!=="latitudinal"&&C!=="longitudinal")console.error("blur direction must be either latitudinal or longitudinal!");let Y=3,H=new xA(this._lodPlanes[B],U),R=U.uniforms,O=this._sizeLods[E]-1,N=isFinite(I)?Math.PI/(2*O):2*Math.PI/(2*m1-1),$=I/N,L=isFinite(I)?1+Math.floor(Y*$):m1;if(L>m1)console.warn(`sigmaRadians, ${I}, is too large and will clip, as it requested ${L} samples when the maximum is set to ${m1}`);let W=[],Z=0;for(let F=0;F<m1;++F){let D=F/$,_=Math.exp(-D*D/2);if(W.push(_),F===0)Z+=_;else if(F<L)Z+=2*_}for(let F=0;F<W.length;F++)W[F]=W[F]/Z;if(R.envMap.value=A.texture,R.samples.value=L,R.weights.value=W,R.latitudinal.value=C==="latitudinal",K)R.poleAxis.value=K;let{_lodMax:G}=this;R.dTheta.value=N,R.mipInt.value=G-E;let X=this._sizeLods[B],q=3*X*(B>G-K6?B-G+K6:0),M=4*(this._cubeSize-X);e9(Q,q,M,3*X,2*X),J.setRenderTarget(Q),J.render(H,AH)}}function KD(A){let Q=[],E=[],B=[],I=A,C=A-K6+1+IN.length;for(let K=0;K<C;K++){let J=Math.pow(2,I);E.push(J);let U=1/J;if(K>A-K6)U=IN[K-A+K6-1];else if(K===0)U=0;B.push(U);let Y=1/(J-2),H=-Y,R=1+Y,O=[H,H,R,H,R,R,H,H,R,R,H,R],N=6,$=6,L=3,W=2,Z=1,G=new Float32Array(L*$*N),X=new Float32Array(W*$*N),q=new Float32Array(Z*$*N);for(let F=0;F<N;F++){let D=F%3*2/3-1,_=F>2?0:-1,w=[D,_,0,D+0.6666666666666666,_,0,D+0.6666666666666666,_+1,0,D,_,0,D+0.6666666666666666,_+1,0,D,_+1,0];G.set(w,L*$*F),X.set(O,W*$*F);let k=[F,F,F,F,F,F];q.set(k,Z*$*F)}let M=new hA;if(M.setAttribute("position",new tA(G,L)),M.setAttribute("uv",new tA(X,W)),M.setAttribute("faceIndex",new tA(q,Z)),Q.push(M),I>K6)I--}return{lodPlanes:Q,sizeLods:E,sigmas:B}}function JN(A,Q,E){let B=new Q0(A,Q,E);return B.texture.mapping=V8,B.texture.name="PMREM.cubeUv",B.scissorTest=!0,B}function e9(A,Q,E,B,I){A.viewport.set(Q,E,B,I),A.scissor.set(Q,E,B,I)}function JD(A,Q,E){let B=new Float32Array(m1),I=new y(0,1,0);return new bA({name:"SphericalGaussianBlur",defines:{n:m1,CUBEUV_TEXEL_WIDTH:1/Q,CUBEUV_TEXEL_HEIGHT:1/E,CUBEUV_MAX_MIP:`${A}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:B},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:I}},vertexShader:JH(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:H0,depthTest:!1,depthWrite:!1})}function UN(){return new bA({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:JH(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:H0,depthTest:!1,depthWrite:!1})}function YN(){return new bA({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:JH(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:H0,depthTest:!1,depthWrite:!1})}function JH(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function UD(A){let Q=/*@__PURE__*/new WeakMap,E=null;function B(J){if(J&&J.isTexture){let U=J.mapping,Y=U===W1||U===P8,H=U===G1||U===zI;if(Y||H){let R=Q.get(J),O=R!==void 0?R.texture.pmremVersion:0;if(J.isRenderTargetTexture&&J.pmremVersion!==O){if(E===null)E=new QU(A);return R=Y?E.fromEquirectangular(J,R):E.fromCubemap(J,R),R.texture.pmremVersion=J.pmremVersion,Q.set(J,R),R.texture}else if(R!==void 0)return R.texture;else{let N=J.image;if(Y&&N&&N.height>0||H&&N&&I(N)){if(E===null)E=new QU(A);return R=Y?E.fromEquirectangular(J):E.fromCubemap(J),R.texture.pmremVersion=J.pmremVersion,Q.set(J,R),J.addEventListener("dispose",C),R.texture}else return null}}}return J}function I(J){let U=0,Y=6;for(let H=0;H<Y;H++)if(J[H]!==void 0)U++;return U===Y}function C(J){let U=J.target;U.removeEventListener("dispose",C);let Y=Q.get(U);if(Y!==void 0)Q.delete(U),Y.dispose()}function K(){if(Q=/*@__PURE__*/new WeakMap,E!==null)E.dispose(),E=null}return{get:B,dispose:K}}function YD(A){let Q={};function E(B){if(Q[B]!==void 0)return Q[B];let I;switch(B){case"WEBGL_depth_texture":I=A.getExtension("WEBGL_depth_texture")||A.getExtension("MOZ_WEBGL_depth_texture")||A.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":I=A.getExtension("EXT_texture_filter_anisotropic")||A.getExtension("MOZ_EXT_texture_filter_anisotropic")||A.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":I=A.getExtension("WEBGL_compressed_texture_s3tc")||A.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||A.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":I=A.getExtension("WEBGL_compressed_texture_pvrtc")||A.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:I=A.getExtension(B)}return Q[B]=I,I}return{has:function(B){return E(B)!==null},init:function(){E("EXT_color_buffer_float"),E("WEBGL_clip_cull_distance"),E("OES_texture_float_linear"),E("EXT_color_buffer_half_float"),E("WEBGL_multisampled_render_to_texture"),E("WEBGL_render_shared_exponent")},get:function(B){let I=E(B);if(I===null)P1("THREE.WebGLRenderer: "+B+" extension not supported.");return I}}}function OD(A,Q,E,B){let I={},C=/*@__PURE__*/new WeakMap;function K(R){let O=R.target;if(O.index!==null)Q.remove(O.index);for(let $ in O.attributes)Q.remove(O.attributes[$]);O.removeEventListener("dispose",K),delete I[O.id];let N=C.get(O);if(N)Q.remove(N),C.delete(O);if(B.releaseStatesOfGeometry(O),O.isInstancedBufferGeometry===!0)delete O._maxInstanceCount;E.memory.geometries--}function J(R,O){if(I[O.id]===!0)return O;return O.addEventListener("dispose",K),I[O.id]=!0,E.memory.geometries++,O}function U(R){let O=R.attributes;for(let N in O)Q.update(O[N],A.ARRAY_BUFFER)}function Y(R){let O=[],N=R.index,$=R.attributes.position,L=0;if(N!==null){let G=N.array;L=N.version;for(let X=0,q=G.length;X<q;X+=3){let M=G[X+0],F=G[X+1],D=G[X+2];O.push(M,F,F,D,D,M)}}else if($!==void 0){let G=$.array;L=$.version;for(let X=0,q=G.length/3-1;X<q;X+=3){let M=X+0,F=X+1,D=X+2;O.push(M,F,F,D,D,M)}}else return;let W=new(($O(O))?FC:VI)(O,1);W.version=L;let Z=C.get(R);if(Z)Q.remove(Z);C.set(R,W)}function H(R){let O=C.get(R);if(O){let N=R.index;if(N!==null){if(O.version<N.version)Y(R)}}else Y(R);return C.get(R)}return{get:J,update:U,getWireframeAttribute:H}}function HD(A,Q,E){let B;function I(O){B=O}let C,K;function J(O){C=O.type,K=O.bytesPerElement}function U(O,N){A.drawElements(B,N,C,O*K),E.update(N,B,1)}function Y(O,N,$){if($===0)return;A.drawElementsInstanced(B,N,C,O*K,$),E.update(N,B,$)}function H(O,N,$){if($===0)return;Q.get("WEBGL_multi_draw").multiDrawElementsWEBGL(B,N,0,C,O,0,$);let W=0;for(let Z=0;Z<$;Z++)W+=N[Z];E.update(W,B,1)}function R(O,N,$,L){if($===0)return;let W=Q.get("WEBGL_multi_draw");if(W===null)for(let Z=0;Z<O.length;Z++)Y(O[Z]/K,N[Z],L[Z]);else{W.multiDrawElementsInstancedWEBGL(B,N,0,C,O,0,L,0,$);let Z=0;for(let G=0;G<$;G++)Z+=N[G]*L[G];E.update(Z,B,1)}}this.setMode=I,this.setIndex=J,this.render=U,this.renderInstances=Y,this.renderMultiDraw=H,this.renderMultiDrawInstances=R}function ZD(A){let Q={geometries:0,textures:0},E={frame:0,calls:0,triangles:0,points:0,lines:0};function B(C,K,J){switch(E.calls++,K){case A.TRIANGLES:E.triangles+=J*(C/3);break;case A.LINES:E.lines+=J*(C/2);break;case A.LINE_STRIP:E.lines+=J*(C-1);break;case A.LINE_LOOP:E.lines+=J*C;break;case A.POINTS:E.points+=J*C;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",K);break}}function I(){E.calls=0,E.triangles=0,E.points=0,E.lines=0}return{memory:Q,render:E,programs:null,autoReset:!0,reset:I,update:B}}function RD(A,Q,E){let B=/*@__PURE__*/new WeakMap,I=new MA;function C(K,J,U){let Y=K.morphTargetInfluences,H=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,R=H!==void 0?H.length:0,O=B.get(J);if(O===void 0||O.count!==R){let w=function(){D.dispose(),B.delete(J),J.removeEventListener("dispose",w)};if(O!==void 0)O.texture.dispose();let N=J.morphAttributes.position!==void 0,$=J.morphAttributes.normal!==void 0,L=J.morphAttributes.color!==void 0,W=J.morphAttributes.position||[],Z=J.morphAttributes.normal||[],G=J.morphAttributes.color||[],X=0;if(N===!0)X=1;if($===!0)X=2;if(L===!0)X=3;let q=J.attributes.position.count*X,M=1;if(q>Q.maxTextureSize)M=Math.ceil(q/Q.maxTextureSize),q=Q.maxTextureSize;let F=new Float32Array(q*M*4*R),D=new V1(F,q,M,R);D.type=m0,D.needsUpdate=!0;let _=X*4;for(let k=0;k<R;k++){let T=W[k],z=Z[k],j=G[k],v=q*M*4*k;for(let g=0;g<T.count;g++){let P=g*_;if(N===!0)I.fromBufferAttribute(T,g),F[v+P+0]=I.x,F[v+P+1]=I.y,F[v+P+2]=I.z,F[v+P+3]=0;if($===!0)I.fromBufferAttribute(z,g),F[v+P+4]=I.x,F[v+P+5]=I.y,F[v+P+6]=I.z,F[v+P+7]=0;if(L===!0)I.fromBufferAttribute(j,g),F[v+P+8]=I.x,F[v+P+9]=I.y,F[v+P+10]=I.z,F[v+P+11]=j.itemSize===4?I.w:1}}O={count:R,texture:D,size:new AA(q,M)},B.set(J,O),J.addEventListener("dispose",w)}if(K.isInstancedMesh===!0&&K.morphTexture!==null)U.getUniforms().setValue(A,"morphTexture",K.morphTexture,E);else{let N=0;for(let L=0;L<Y.length;L++)N+=Y[L];let $=J.morphTargetsRelative?1:1-N;U.getUniforms().setValue(A,"morphTargetBaseInfluence",$),U.getUniforms().setValue(A,"morphTargetInfluences",Y)}U.getUniforms().setValue(A,"morphTargetsTexture",O.texture,E),U.getUniforms().setValue(A,"morphTargetsTextureSize",O.size)}return{update:C}}function ND(A,Q,E,B){let I=/*@__PURE__*/new WeakMap;function C(U){let Y=B.render.frame,H=U.geometry,R=Q.get(U,H);if(I.get(R)!==Y)Q.update(R),I.set(R,Y);if(U.isInstancedMesh){if(U.hasEventListener("dispose",J)===!1)U.addEventListener("dispose",J);if(I.get(U)!==Y){if(E.update(U.instanceMatrix,A.ARRAY_BUFFER),U.instanceColor!==null)E.update(U.instanceColor,A.ARRAY_BUFFER);I.set(U,Y)}}if(U.isSkinnedMesh){let O=U.skeleton;if(I.get(O)!==Y)O.update(),I.set(O,Y)}return R}function K(){I=/*@__PURE__*/new WeakMap}function J(U){let Y=U.target;if(Y.removeEventListener("dispose",J),E.remove(Y.instanceMatrix),Y.instanceColor!==null)E.remove(Y.instanceColor)}return{update:C,dispose:K}}var TN=/*@__PURE__*/new EQ,ON=/*@__PURE__*/new IE(1,1),zN=/*@__PURE__*/new V1,PN=/*@__PURE__*/new NB,VN=/*@__PURE__*/new QI,HN=[],ZN=[],RN=new Float32Array(16),NN=new Float32Array(9),GN=new Float32Array(4);function J6(A,Q,E){let B=A[0];if(B<=0||B>0)return A;let I=Q*E,C=HN[I];if(C===void 0)C=new Float32Array(I),HN[I]=C;if(Q!==0){B.toArray(C,0);for(let K=1,J=0;K!==Q;++K)J+=E,A[K].toArray(C,J)}return C}function uQ(A,Q){if(A.length!==Q.length)return!1;for(let E=0,B=A.length;E<B;E++)if(A[E]!==Q[E])return!1;return!0}function pQ(A,Q){for(let E=0,B=Q.length;E<B;E++)A[E]=Q[E]}function EU(A,Q){let E=ZN[Q];if(E===void 0)E=new Int32Array(Q),ZN[Q]=E;for(let B=0;B!==Q;++B)E[B]=A.allocateTextureUnit();return E}function GD(A,Q){let E=this.cache;if(E[0]===Q)return;A.uniform1f(this.addr,Q),E[0]=Q}function WD(A,Q){let E=this.cache;if(Q.x!==void 0){if(E[0]!==Q.x||E[1]!==Q.y)A.uniform2f(this.addr,Q.x,Q.y),E[0]=Q.x,E[1]=Q.y}else{if(uQ(E,Q))return;A.uniform2fv(this.addr,Q),pQ(E,Q)}}function XD(A,Q){let E=this.cache;if(Q.x!==void 0){if(E[0]!==Q.x||E[1]!==Q.y||E[2]!==Q.z)A.uniform3f(this.addr,Q.x,Q.y,Q.z),E[0]=Q.x,E[1]=Q.y,E[2]=Q.z}else if(Q.r!==void 0){if(E[0]!==Q.r||E[1]!==Q.g||E[2]!==Q.b)A.uniform3f(this.addr,Q.r,Q.g,Q.b),E[0]=Q.r,E[1]=Q.g,E[2]=Q.b}else{if(uQ(E,Q))return;A.uniform3fv(this.addr,Q),pQ(E,Q)}}function $D(A,Q){let E=this.cache;if(Q.x!==void 0){if(E[0]!==Q.x||E[1]!==Q.y||E[2]!==Q.z||E[3]!==Q.w)A.uniform4f(this.addr,Q.x,Q.y,Q.z,Q.w),E[0]=Q.x,E[1]=Q.y,E[2]=Q.z,E[3]=Q.w}else{if(uQ(E,Q))return;A.uniform4fv(this.addr,Q),pQ(E,Q)}}function LD(A,Q){let E=this.cache,B=Q.elements;if(B===void 0){if(uQ(E,Q))return;A.uniformMatrix2fv(this.addr,!1,Q),pQ(E,Q)}else{if(uQ(E,B))return;GN.set(B),A.uniformMatrix2fv(this.addr,!1,GN),pQ(E,B)}}function qD(A,Q){let E=this.cache,B=Q.elements;if(B===void 0){if(uQ(E,Q))return;A.uniformMatrix3fv(this.addr,!1,Q),pQ(E,Q)}else{if(uQ(E,B))return;NN.set(B),A.uniformMatrix3fv(this.addr,!1,NN),pQ(E,B)}}function FD(A,Q){let E=this.cache,B=Q.elements;if(B===void 0){if(uQ(E,Q))return;A.uniformMatrix4fv(this.addr,!1,Q),pQ(E,Q)}else{if(uQ(E,B))return;RN.set(B),A.uniformMatrix4fv(this.addr,!1,RN),pQ(E,B)}}function DD(A,Q){let E=this.cache;if(E[0]===Q)return;A.uniform1i(this.addr,Q),E[0]=Q}function MD(A,Q){let E=this.cache;if(Q.x!==void 0){if(E[0]!==Q.x||E[1]!==Q.y)A.uniform2i(this.addr,Q.x,Q.y),E[0]=Q.x,E[1]=Q.y}else{if(uQ(E,Q))return;A.uniform2iv(this.addr,Q),pQ(E,Q)}}function wD(A,Q){let E=this.cache;if(Q.x!==void 0){if(E[0]!==Q.x||E[1]!==Q.y||E[2]!==Q.z)A.uniform3i(this.addr,Q.x,Q.y,Q.z),E[0]=Q.x,E[1]=Q.y,E[2]=Q.z}else{if(uQ(E,Q))return;A.uniform3iv(this.addr,Q),pQ(E,Q)}}function _D(A,Q){let E=this.cache;if(Q.x!==void 0){if(E[0]!==Q.x||E[1]!==Q.y||E[2]!==Q.z||E[3]!==Q.w)A.uniform4i(this.addr,Q.x,Q.y,Q.z,Q.w),E[0]=Q.x,E[1]=Q.y,E[2]=Q.z,E[3]=Q.w}else{if(uQ(E,Q))return;A.uniform4iv(this.addr,Q),pQ(E,Q)}}function kD(A,Q){let E=this.cache;if(E[0]===Q)return;A.uniform1ui(this.addr,Q),E[0]=Q}function SD(A,Q){let E=this.cache;if(Q.x!==void 0){if(E[0]!==Q.x||E[1]!==Q.y)A.uniform2ui(this.addr,Q.x,Q.y),E[0]=Q.x,E[1]=Q.y}else{if(uQ(E,Q))return;A.uniform2uiv(this.addr,Q),pQ(E,Q)}}function TD(A,Q){let E=this.cache;if(Q.x!==void 0){if(E[0]!==Q.x||E[1]!==Q.y||E[2]!==Q.z)A.uniform3ui(this.addr,Q.x,Q.y,Q.z),E[0]=Q.x,E[1]=Q.y,E[2]=Q.z}else{if(uQ(E,Q))return;A.uniform3uiv(this.addr,Q),pQ(E,Q)}}function zD(A,Q){let E=this.cache;if(Q.x!==void 0){if(E[0]!==Q.x||E[1]!==Q.y||E[2]!==Q.z||E[3]!==Q.w)A.uniform4ui(this.addr,Q.x,Q.y,Q.z,Q.w),E[0]=Q.x,E[1]=Q.y,E[2]=Q.z,E[3]=Q.w}else{if(uQ(E,Q))return;A.uniform4uiv(this.addr,Q),pQ(E,Q)}}function PD(A,Q,E){let B=this.cache,I=E.allocateTextureUnit();if(B[0]!==I)A.uniform1i(this.addr,I),B[0]=I;let C;if(this.type===A.SAMPLER_2D_SHADOW)ON.compareFunction=X9,C=ON;else C=TN;E.setTexture2D(Q||C,I)}function VD(A,Q,E){let B=this.cache,I=E.allocateTextureUnit();if(B[0]!==I)A.uniform1i(this.addr,I),B[0]=I;E.setTexture3D(Q||PN,I)}function jD(A,Q,E){let B=this.cache,I=E.allocateTextureUnit();if(B[0]!==I)A.uniform1i(this.addr,I),B[0]=I;E.setTextureCube(Q||VN,I)}function vD(A,Q,E){let B=this.cache,I=E.allocateTextureUnit();if(B[0]!==I)A.uniform1i(this.addr,I),B[0]=I;E.setTexture2DArray(Q||zN,I)}function hD(A){switch(A){case 5126:return GD;case 35664:return WD;case 35665:return XD;case 35666:return $D;case 35674:return LD;case 35675:return qD;case 35676:return FD;case 5124:case 35670:return DD;case 35667:case 35671:return MD;case 35668:case 35672:return wD;case 35669:case 35673:return _D;case 5125:return kD;case 36294:return SD;case 36295:return TD;case 36296:return zD;case 35678:case 36198:case 36298:case 36306:case 35682:return PD;case 35679:case 36299:case 36307:return VD;case 35680:case 36300:case 36308:case 36293:return jD;case 36289:case 36303:case 36311:case 36292:return vD}}function yD(A,Q){A.uniform1fv(this.addr,Q)}function gD(A,Q){let E=J6(Q,this.size,2);A.uniform2fv(this.addr,E)}function xD(A,Q){let E=J6(Q,this.size,3);A.uniform3fv(this.addr,E)}function bD(A,Q){let E=J6(Q,this.size,4);A.uniform4fv(this.addr,E)}function fD(A,Q){let E=J6(Q,this.size,4);A.uniformMatrix2fv(this.addr,!1,E)}function uD(A,Q){let E=J6(Q,this.size,9);A.uniformMatrix3fv(this.addr,!1,E)}function pD(A,Q){let E=J6(Q,this.size,16);A.uniformMatrix4fv(this.addr,!1,E)}function mD(A,Q){A.uniform1iv(this.addr,Q)}function cD(A,Q){A.uniform2iv(this.addr,Q)}function lD(A,Q){A.uniform3iv(this.addr,Q)}function dD(A,Q){A.uniform4iv(this.addr,Q)}function nD(A,Q){A.uniform1uiv(this.addr,Q)}function sD(A,Q){A.uniform2uiv(this.addr,Q)}function iD(A,Q){A.uniform3uiv(this.addr,Q)}function oD(A,Q){A.uniform4uiv(this.addr,Q)}function rD(A,Q,E){let B=this.cache,I=Q.length,C=EU(E,I);if(!uQ(B,C))A.uniform1iv(this.addr,C),pQ(B,C);for(let K=0;K!==I;++K)E.setTexture2D(Q[K]||TN,C[K])}function aD(A,Q,E){let B=this.cache,I=Q.length,C=EU(E,I);if(!uQ(B,C))A.uniform1iv(this.addr,C),pQ(B,C);for(let K=0;K!==I;++K)E.setTexture3D(Q[K]||PN,C[K])}function tD(A,Q,E){let B=this.cache,I=Q.length,C=EU(E,I);if(!uQ(B,C))A.uniform1iv(this.addr,C),pQ(B,C);for(let K=0;K!==I;++K)E.setTextureCube(Q[K]||VN,C[K])}function eD(A,Q,E){let B=this.cache,I=Q.length,C=EU(E,I);if(!uQ(B,C))A.uniform1iv(this.addr,C),pQ(B,C);for(let K=0;K!==I;++K)E.setTexture2DArray(Q[K]||zN,C[K])}function AM(A){switch(A){case 5126:return yD;case 35664:return gD;case 35665:return xD;case 35666:return bD;case 35674:return fD;case 35675:return uD;case 35676:return pD;case 5124:case 35670:return mD;case 35667:case 35671:return cD;case 35668:case 35672:return lD;case 35669:case 35673:return dD;case 5125:return nD;case 36294:return sD;case 36295:return iD;case 36296:return oD;case 35678:case 36198:case 36298:case 36306:case 35682:return rD;case 35679:case 36299:case 36307:return aD;case 35680:case 36300:case 36308:case 36293:return tD;case 36289:case 36303:case 36311:case 36292:return eD}}class jN{constructor(A,Q,E){this.id=A,this.addr=E,this.cache=[],this.type=Q.type,this.setValue=hD(Q.type)}}class vN{constructor(A,Q,E){this.id=A,this.addr=E,this.cache=[],this.type=Q.type,this.size=Q.size,this.setValue=AM(Q.type)}}class hN{constructor(A){this.id=A,this.seq=[],this.map={}}setValue(A,Q,E){let B=this.seq;for(let I=0,C=B.length;I!==C;++I){let K=B[I];K.setValue(A,Q[K.id],E)}}}var CH=/(\w+)(\])?(\[|\.)?/g;function WN(A,Q){A.seq.push(Q),A.map[Q.id]=Q}function QM(A,Q,E){let B=A.name,I=B.length;CH.lastIndex=0;while(!0){let C=CH.exec(B),K=CH.lastIndex,J=C[1],U=C[2]==="]",Y=C[3];if(U)J=J|0;if(Y===void 0||Y==="["&&K+2===I){WN(E,Y===void 0?new jN(J,A,Q):new vN(J,A,Q));break}else{let R=E.map[J];if(R===void 0)R=new hN(J),WN(E,R);E=R}}}class eC{constructor(A,Q){this.seq=[],this.map={};let E=A.getProgramParameter(Q,A.ACTIVE_UNIFORMS);for(let B=0;B<E;++B){let I=A.getActiveUniform(Q,B),C=A.getUniformLocation(Q,I.name);QM(I,C,this)}}setValue(A,Q,E,B){let I=this.map[Q];if(I!==void 0)I.setValue(A,E,B)}setOptional(A,Q,E){let B=Q[E];if(B!==void 0)this.setValue(A,E,B)}static upload(A,Q,E,B){for(let I=0,C=Q.length;I!==C;++I){let K=Q[I],J=E[K.id];if(J.needsUpdate!==!1)K.setValue(A,J.value,B)}}static seqWithValue(A,Q){let E=[];for(let B=0,I=A.length;B!==I;++B){let C=A[B];if(C.id in Q)E.push(C)}return E}}function XN(A,Q,E){let B=A.createShader(Q);return A.shaderSource(B,E),A.compileShader(B),B}var EM=37297,BM=0;function IM(A,Q){let E=A.split(`
`),B=[],I=Math.max(Q-6,0),C=Math.min(Q+6,E.length);for(let K=I;K<C;K++){let J=K+1;B.push(`${J===Q?">":" "} ${J}: ${E[K]}`)}return B.join(`
`)}var $N=/*@__PURE__*/new E0;function CM(A){O0._getMatrix($N,O0.workingColorSpace,A);let Q=`mat3( ${$N.elements.map((E)=>E.toFixed(4))} )`;switch(O0.getTransfer(A)){case LC:return[Q,"LinearTransferOETF"];case IQ:return[Q,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",A),[Q,"LinearTransferOETF"]}}function LN(A,Q,E){let B=A.getShaderParameter(Q,A.COMPILE_STATUS),I=A.getShaderInfoLog(Q).trim();if(B&&I==="")return"";let C=/ERROR: 0:(\d+)/.exec(I);if(C){let K=parseInt(C[1]);return E.toUpperCase()+`

`+I+`

`+IM(A.getShaderSource(Q),K)}else return I}function KM(A,Q){let E=CM(Q);return[`vec4 ${A}( vec4 value ) {`,`	return ${E[1]}( vec4( value.rgb * ${E[0]}, value.a ) );`,"}"].join(`
`)}function JM(A,Q){let E;switch(Q){case lJ:E="Linear";break;case dJ:E="Reinhard";break;case nJ:E="Cineon";break;case sJ:E="ACESFilmic";break;case oJ:E="AgX";break;case rJ:E="Neutral";break;case iJ:E="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",Q),E="Linear"}return"vec3 "+A+"( vec3 color ) { return "+E+"ToneMapping( color ); }"}var AU=/*@__PURE__*/new y;function UM(){O0.getLuminanceCoefficients(AU);let A=AU.x.toFixed(4),Q=AU.y.toFixed(4),E=AU.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${A}, ${Q}, ${E} );`,"\treturn dot( weights, rgb );","}"].join(`
`)}function YM(A){return[A.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",A.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(tC).join(`
`)}function OM(A){let Q=[];for(let E in A){let B=A[E];if(B===!1)continue;Q.push("#define "+E+" "+B)}return Q.join(`
`)}function HM(A,Q){let E={},B=A.getProgramParameter(Q,A.ACTIVE_ATTRIBUTES);for(let I=0;I<B;I++){let C=A.getActiveAttrib(Q,I),K=C.name,J=1;if(C.type===A.FLOAT_MAT2)J=2;if(C.type===A.FLOAT_MAT3)J=3;if(C.type===A.FLOAT_MAT4)J=4;E[K]={type:C.type,location:A.getAttribLocation(Q,K),locationSize:J}}return E}function tC(A){return A!==""}function qN(A,Q){let E=Q.numSpotLightShadows+Q.numSpotLightMaps-Q.numSpotLightShadowsWithMaps;return A.replace(/NUM_DIR_LIGHTS/g,Q.numDirLights).replace(/NUM_SPOT_LIGHTS/g,Q.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,Q.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,E).replace(/NUM_RECT_AREA_LIGHTS/g,Q.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,Q.numPointLights).replace(/NUM_HEMI_LIGHTS/g,Q.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,Q.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,Q.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,Q.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,Q.numPointLightShadows)}function FN(A,Q){return A.replace(/NUM_CLIPPING_PLANES/g,Q.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,Q.numClippingPlanes-Q.numClipIntersection)}var ZM=/^[ \t]*#include +<([\w\d./]+)>/gm;function KH(A){return A.replace(ZM,NM)}var RM=/*@__PURE__*/new Map;function NM(A,Q){let E=G0[Q];if(E===void 0){let B=RM.get(Q);if(B!==void 0)E=G0[B],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',Q,B);else throw new Error("Can not resolve #include <"+Q+">")}return KH(E)}var GM=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DN(A){return A.replace(GM,WM)}function WM(A,Q,E,B){let I="";for(let C=parseInt(Q);C<parseInt(E);C++)I+=B.replace(/\[\s*i\s*\]/g,"[ "+C+" ]").replace(/UNROLLED_LOOP_INDEX/g,C);return I}function MN(A){let Q=`precision ${A.precision} float;
	precision ${A.precision} int;
	precision ${A.precision} sampler2D;
	precision ${A.precision} samplerCube;
	precision ${A.precision} sampler3D;
	precision ${A.precision} sampler2DArray;
	precision ${A.precision} sampler2DShadow;
	precision ${A.precision} samplerCubeShadow;
	precision ${A.precision} sampler2DArrayShadow;
	precision ${A.precision} isampler2D;
	precision ${A.precision} isampler3D;
	precision ${A.precision} isamplerCube;
	precision ${A.precision} isampler2DArray;
	precision ${A.precision} usampler2D;
	precision ${A.precision} usampler3D;
	precision ${A.precision} usamplerCube;
	precision ${A.precision} usampler2DArray;
	`;if(A.precision==="highp")Q+=`
#define HIGH_PRECISION`;else if(A.precision==="mediump")Q+=`
#define MEDIUM_PRECISION`;else if(A.precision==="lowp")Q+=`
#define LOW_PRECISION`;return Q}function XM(A){let Q="SHADOWMAP_TYPE_BASIC";if(A.shadowMapType===fJ)Q="SHADOWMAP_TYPE_PCF";else if(A.shadowMapType===fY)Q="SHADOWMAP_TYPE_PCF_SOFT";else if(A.shadowMapType===RB)Q="SHADOWMAP_TYPE_VSM";return Q}function $M(A){let Q="ENVMAP_TYPE_CUBE";if(A.envMap)switch(A.envMapMode){case G1:case zI:Q="ENVMAP_TYPE_CUBE";break;case V8:Q="ENVMAP_TYPE_CUBE_UV";break}return Q}function LM(A){let Q="ENVMAP_MODE_REFLECTION";if(A.envMap)switch(A.envMapMode){case zI:Q="ENVMAP_MODE_REFRACTION";break}return Q}function qM(A){let Q="ENVMAP_BLENDING_NONE";if(A.envMap)switch(A.combine){case mJ:Q="ENVMAP_BLENDING_MULTIPLY";break;case tY:Q="ENVMAP_BLENDING_MIX";break;case cJ:Q="ENVMAP_BLENDING_ADD";break}return Q}function FM(A){let Q=A.envMapCubeUVHeight;if(Q===null)return null;let E=Math.log2(Q)-2,B=1/Q;return{texelWidth:1/(3*Math.max(Math.pow(2,E),112)),texelHeight:B,maxMip:E}}function DM(A,Q,E,B){let I=A.getContext(),C=E.defines,K=E.vertexShader,J=E.fragmentShader,U=XM(E),Y=$M(E),H=LM(E),R=qM(E),O=FM(E),N=YM(E),$=OM(C),L=I.createProgram(),W,Z,G=E.glslVersion?"#version "+E.glslVersion+`
`:"";if(E.isRawShaderMaterial){if(W=["#define SHADER_TYPE "+E.shaderType,"#define SHADER_NAME "+E.shaderName,$].filter(tC).join(`
`),W.length>0)W+=`
`;if(Z=["#define SHADER_TYPE "+E.shaderType,"#define SHADER_NAME "+E.shaderName,$].filter(tC).join(`
`),Z.length>0)Z+=`
`}else W=[MN(E),"#define SHADER_TYPE "+E.shaderType,"#define SHADER_NAME "+E.shaderName,$,E.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",E.batching?"#define USE_BATCHING":"",E.batchingColor?"#define USE_BATCHING_COLOR":"",E.instancing?"#define USE_INSTANCING":"",E.instancingColor?"#define USE_INSTANCING_COLOR":"",E.instancingMorph?"#define USE_INSTANCING_MORPH":"",E.useFog&&E.fog?"#define USE_FOG":"",E.useFog&&E.fogExp2?"#define FOG_EXP2":"",E.map?"#define USE_MAP":"",E.envMap?"#define USE_ENVMAP":"",E.envMap?"#define "+H:"",E.lightMap?"#define USE_LIGHTMAP":"",E.aoMap?"#define USE_AOMAP":"",E.bumpMap?"#define USE_BUMPMAP":"",E.normalMap?"#define USE_NORMALMAP":"",E.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",E.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",E.displacementMap?"#define USE_DISPLACEMENTMAP":"",E.emissiveMap?"#define USE_EMISSIVEMAP":"",E.anisotropy?"#define USE_ANISOTROPY":"",E.anisotropyMap?"#define USE_ANISOTROPYMAP":"",E.clearcoatMap?"#define USE_CLEARCOATMAP":"",E.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",E.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",E.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",E.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",E.specularMap?"#define USE_SPECULARMAP":"",E.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",E.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",E.roughnessMap?"#define USE_ROUGHNESSMAP":"",E.metalnessMap?"#define USE_METALNESSMAP":"",E.alphaMap?"#define USE_ALPHAMAP":"",E.alphaHash?"#define USE_ALPHAHASH":"",E.transmission?"#define USE_TRANSMISSION":"",E.transmissionMap?"#define USE_TRANSMISSIONMAP":"",E.thicknessMap?"#define USE_THICKNESSMAP":"",E.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",E.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",E.mapUv?"#define MAP_UV "+E.mapUv:"",E.alphaMapUv?"#define ALPHAMAP_UV "+E.alphaMapUv:"",E.lightMapUv?"#define LIGHTMAP_UV "+E.lightMapUv:"",E.aoMapUv?"#define AOMAP_UV "+E.aoMapUv:"",E.emissiveMapUv?"#define EMISSIVEMAP_UV "+E.emissiveMapUv:"",E.bumpMapUv?"#define BUMPMAP_UV "+E.bumpMapUv:"",E.normalMapUv?"#define NORMALMAP_UV "+E.normalMapUv:"",E.displacementMapUv?"#define DISPLACEMENTMAP_UV "+E.displacementMapUv:"",E.metalnessMapUv?"#define METALNESSMAP_UV "+E.metalnessMapUv:"",E.roughnessMapUv?"#define ROUGHNESSMAP_UV "+E.roughnessMapUv:"",E.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+E.anisotropyMapUv:"",E.clearcoatMapUv?"#define CLEARCOATMAP_UV "+E.clearcoatMapUv:"",E.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+E.clearcoatNormalMapUv:"",E.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+E.clearcoatRoughnessMapUv:"",E.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+E.iridescenceMapUv:"",E.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+E.iridescenceThicknessMapUv:"",E.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+E.sheenColorMapUv:"",E.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+E.sheenRoughnessMapUv:"",E.specularMapUv?"#define SPECULARMAP_UV "+E.specularMapUv:"",E.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+E.specularColorMapUv:"",E.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+E.specularIntensityMapUv:"",E.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+E.transmissionMapUv:"",E.thicknessMapUv?"#define THICKNESSMAP_UV "+E.thicknessMapUv:"",E.vertexTangents&&E.flatShading===!1?"#define USE_TANGENT":"",E.vertexColors?"#define USE_COLOR":"",E.vertexAlphas?"#define USE_COLOR_ALPHA":"",E.vertexUv1s?"#define USE_UV1":"",E.vertexUv2s?"#define USE_UV2":"",E.vertexUv3s?"#define USE_UV3":"",E.pointsUvs?"#define USE_POINTS_UV":"",E.flatShading?"#define FLAT_SHADED":"",E.skinning?"#define USE_SKINNING":"",E.morphTargets?"#define USE_MORPHTARGETS":"",E.morphNormals&&E.flatShading===!1?"#define USE_MORPHNORMALS":"",E.morphColors?"#define USE_MORPHCOLORS":"",E.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+E.morphTextureStride:"",E.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+E.morphTargetsCount:"",E.doubleSided?"#define DOUBLE_SIDED":"",E.flipSided?"#define FLIP_SIDED":"",E.shadowMapEnabled?"#define USE_SHADOWMAP":"",E.shadowMapEnabled?"#define "+U:"",E.sizeAttenuation?"#define USE_SIZEATTENUATION":"",E.numLightProbes>0?"#define USE_LIGHT_PROBES":"",E.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",E.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif",`
`].filter(tC).join(`
`),Z=[MN(E),"#define SHADER_TYPE "+E.shaderType,"#define SHADER_NAME "+E.shaderName,$,E.useFog&&E.fog?"#define USE_FOG":"",E.useFog&&E.fogExp2?"#define FOG_EXP2":"",E.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",E.map?"#define USE_MAP":"",E.matcap?"#define USE_MATCAP":"",E.envMap?"#define USE_ENVMAP":"",E.envMap?"#define "+Y:"",E.envMap?"#define "+H:"",E.envMap?"#define "+R:"",O?"#define CUBEUV_TEXEL_WIDTH "+O.texelWidth:"",O?"#define CUBEUV_TEXEL_HEIGHT "+O.texelHeight:"",O?"#define CUBEUV_MAX_MIP "+O.maxMip+".0":"",E.lightMap?"#define USE_LIGHTMAP":"",E.aoMap?"#define USE_AOMAP":"",E.bumpMap?"#define USE_BUMPMAP":"",E.normalMap?"#define USE_NORMALMAP":"",E.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",E.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",E.emissiveMap?"#define USE_EMISSIVEMAP":"",E.anisotropy?"#define USE_ANISOTROPY":"",E.anisotropyMap?"#define USE_ANISOTROPYMAP":"",E.clearcoat?"#define USE_CLEARCOAT":"",E.clearcoatMap?"#define USE_CLEARCOATMAP":"",E.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",E.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",E.dispersion?"#define USE_DISPERSION":"",E.iridescence?"#define USE_IRIDESCENCE":"",E.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",E.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",E.specularMap?"#define USE_SPECULARMAP":"",E.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",E.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",E.roughnessMap?"#define USE_ROUGHNESSMAP":"",E.metalnessMap?"#define USE_METALNESSMAP":"",E.alphaMap?"#define USE_ALPHAMAP":"",E.alphaTest?"#define USE_ALPHATEST":"",E.alphaHash?"#define USE_ALPHAHASH":"",E.sheen?"#define USE_SHEEN":"",E.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",E.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",E.transmission?"#define USE_TRANSMISSION":"",E.transmissionMap?"#define USE_TRANSMISSIONMAP":"",E.thicknessMap?"#define USE_THICKNESSMAP":"",E.vertexTangents&&E.flatShading===!1?"#define USE_TANGENT":"",E.vertexColors||E.instancingColor||E.batchingColor?"#define USE_COLOR":"",E.vertexAlphas?"#define USE_COLOR_ALPHA":"",E.vertexUv1s?"#define USE_UV1":"",E.vertexUv2s?"#define USE_UV2":"",E.vertexUv3s?"#define USE_UV3":"",E.pointsUvs?"#define USE_POINTS_UV":"",E.gradientMap?"#define USE_GRADIENTMAP":"",E.flatShading?"#define FLAT_SHADED":"",E.doubleSided?"#define DOUBLE_SIDED":"",E.flipSided?"#define FLIP_SIDED":"",E.shadowMapEnabled?"#define USE_SHADOWMAP":"",E.shadowMapEnabled?"#define "+U:"",E.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",E.numLightProbes>0?"#define USE_LIGHT_PROBES":"",E.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",E.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",E.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",E.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",E.toneMapping!==VB?"#define TONE_MAPPING":"",E.toneMapping!==VB?G0.tonemapping_pars_fragment:"",E.toneMapping!==VB?JM("toneMapping",E.toneMapping):"",E.dithering?"#define DITHERING":"",E.opaque?"#define OPAQUE":"",G0.colorspace_pars_fragment,KM("linearToOutputTexel",E.outputColorSpace),UM(),E.useDepthPacking?"#define DEPTH_PACKING "+E.depthPacking:"",`
`].filter(tC).join(`
`);if(K=KH(K),K=qN(K,E),K=FN(K,E),J=KH(J),J=qN(J,E),J=FN(J,E),K=DN(K),J=DN(J),E.isRawShaderMaterial!==!0)G=`#version 300 es
`,W=[N,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+W,Z=["#define varying in",E.glslVersion===$9?"":"layout(location = 0) out highp vec4 pc_fragColor;",E.glslVersion===$9?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Z;let X=G+W+K,q=G+Z+J,M=XN(I,I.VERTEX_SHADER,X),F=XN(I,I.FRAGMENT_SHADER,q);if(I.attachShader(L,M),I.attachShader(L,F),E.index0AttributeName!==void 0)I.bindAttribLocation(L,0,E.index0AttributeName);else if(E.morphTargets===!0)I.bindAttribLocation(L,0,"position");I.linkProgram(L);function D(T){if(A.debug.checkShaderErrors){let z=I.getProgramInfoLog(L).trim(),j=I.getShaderInfoLog(M).trim(),v=I.getShaderInfoLog(F).trim(),g=!0,P=!0;if(I.getProgramParameter(L,I.LINK_STATUS)===!1)if(g=!1,typeof A.debug.onShaderError==="function")A.debug.onShaderError(I,L,M,F);else{let V=LN(I,M,"vertex"),S=LN(I,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+I.getError()+" - VALIDATE_STATUS "+I.getProgramParameter(L,I.VALIDATE_STATUS)+`

Material Name: `+T.name+`
Material Type: `+T.type+`

Program Info Log: `+z+`
`+V+`
`+S)}else if(z!=="")console.warn("THREE.WebGLProgram: Program Info Log:",z);else if(j===""||v==="")P=!1;if(P)T.diagnostics={runnable:g,programLog:z,vertexShader:{log:j,prefix:W},fragmentShader:{log:v,prefix:Z}}}I.deleteShader(M),I.deleteShader(F),_=new eC(I,L),w=HM(I,L)}let _;this.getUniforms=function(){if(_===void 0)D(this);return _};let w;this.getAttributes=function(){if(w===void 0)D(this);return w};let k=E.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){if(k===!1)k=I.getProgramParameter(L,EM);return k},this.destroy=function(){B.releaseStatesOfProgram(this),I.deleteProgram(L),this.program=void 0},this.type=E.shaderType,this.name=E.shaderName,this.id=BM++,this.cacheKey=Q,this.usedTimes=1,this.program=L,this.vertexShader=M,this.fragmentShader=F,this}var MM=0;class yN{constructor(){this.shaderCache=/*@__PURE__*/new Map,this.materialCache=/*@__PURE__*/new Map}update(A){let{vertexShader:Q,fragmentShader:E}=A,B=this._getShaderStage(Q),I=this._getShaderStage(E),C=this._getShaderCacheForMaterial(A);if(C.has(B)===!1)C.add(B),B.usedTimes++;if(C.has(I)===!1)C.add(I),I.usedTimes++;return this}remove(A){let Q=this.materialCache.get(A);for(let E of Q)if(E.usedTimes--,E.usedTimes===0)this.shaderCache.delete(E.code);return this.materialCache.delete(A),this}getVertexShaderID(A){return this._getShaderStage(A.vertexShader).id}getFragmentShaderID(A){return this._getShaderStage(A.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(A){let Q=this.materialCache,E=Q.get(A);if(E===void 0)E=/*@__PURE__*/new Set,Q.set(A,E);return E}_getShaderStage(A){let Q=this.shaderCache,E=Q.get(A);if(E===void 0)E=new gN(A),Q.set(A,E);return E}}class gN{constructor(A){this.id=MM++,this.code=A,this.usedTimes=0}}function wM(A,Q,E,B,I,C,K){let J=new j1,U=new yN,Y=/*@__PURE__*/new Set,H=[],R=I.logarithmicDepthBuffer,O=I.vertexTextures,N=I.precision,$={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function L(w){if(Y.add(w),w===0)return"uv";return`uv${w}`}function W(w,k,T,z,j){let v=z.fog,g=j.geometry,P=w.isMeshStandardMaterial?z.environment:null,V=(w.isMeshStandardMaterial?E:Q).get(w.envMap||P),S=!!V&&V.mapping===V8?V.image.height:null,h=$[w.type];if(w.precision!==null){if(N=I.getMaxPrecision(w.precision),N!==w.precision)console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",N,"instead.")}let x=g.morphAttributes.position||g.morphAttributes.normal||g.morphAttributes.color,b=x!==void 0?x.length:0,m=0;if(g.morphAttributes.position!==void 0)m=1;if(g.morphAttributes.normal!==void 0)m=2;if(g.morphAttributes.color!==void 0)m=3;let s,i,n,l;if(h){let d0=CE[h];s=d0.vertexShader,i=d0.fragmentShader}else s=w.vertexShader,i=w.fragmentShader,U.update(w),n=U.getVertexShaderID(w),l=U.getFragmentShaderID(w);let c=A.getRenderTarget(),o=A.state.buffers.depth.getReversed(),e=j.isInstancedMesh===!0,BA=j.isBatchedMesh===!0,EA=!!w.map,CA=!!w.matcap,f=!!V,NA=!!w.aoMap,YA=!!w.lightMap,FA=!!w.bumpMap,ZA=!!w.normalMap,jA=!!w.displacementMap,wA=!!w.emissiveMap,VA=!!w.metalnessMap,d=!!w.roughnessMap,u=w.anisotropy>0,QA=w.clearcoat>0,t=w.dispersion>0,KA=w.iridescence>0,HA=w.sheen>0,fA=w.transmission>0,zA=u&&!!w.anisotropyMap,yA=QA&&!!w.clearcoatMap,qA=QA&&!!w.clearcoatNormalMap,LA=QA&&!!w.clearcoatRoughnessMap,_A=KA&&!!w.iridescenceMap,B0=KA&&!!w.iridescenceThicknessMap,cA=HA&&!!w.sheenColorMap,uA=HA&&!!w.sheenRoughnessMap,pA=!!w.specularMap,iA=!!w.specularColorMap,$0=!!w.specularIntensityMap,IA=fA&&!!w.transmissionMap,TA=fA&&!!w.thicknessMap,DA=!!w.gradientMap,kA=!!w.alphaMap,lA=w.alphaTest>0,dA=!!w.alphaHash,F0=!!w.extensions,HQ=VB;if(w.toneMapped){if(c===null||c.isXRRenderTarget===!0)HQ=A.toneMapping}let gQ={shaderID:h,shaderType:w.type,shaderName:w.name,vertexShader:s,fragmentShader:i,defines:w.defines,customVertexShaderID:n,customFragmentShaderID:l,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:N,batching:BA,batchingColor:BA&&j._colorsTexture!==null,instancing:e,instancingColor:e&&j.instanceColor!==null,instancingMorph:e&&j.morphTexture!==null,supportsVertexTextures:O,outputColorSpace:c===null?A.outputColorSpace:c.isXRRenderTarget===!0?c.texture.colorSpace:b0,alphaToCoverage:!!w.alphaToCoverage,map:EA,matcap:CA,envMap:f,envMapMode:f&&V.mapping,envMapCubeUVHeight:S,aoMap:NA,lightMap:YA,bumpMap:FA,normalMap:ZA,displacementMap:O&&jA,emissiveMap:wA,normalMapObjectSpace:ZA&&w.normalMapType===JO,normalMapTangentSpace:ZA&&w.normalMapType===KO,metalnessMap:VA,roughnessMap:d,anisotropy:u,anisotropyMap:zA,clearcoat:QA,clearcoatMap:yA,clearcoatNormalMap:qA,clearcoatRoughnessMap:LA,dispersion:t,iridescence:KA,iridescenceMap:_A,iridescenceThicknessMap:B0,sheen:HA,sheenColorMap:cA,sheenRoughnessMap:uA,specularMap:pA,specularColorMap:iA,specularIntensityMap:$0,transmission:fA,transmissionMap:IA,thicknessMap:TA,gradientMap:DA,opaque:w.transparent===!1&&w.blending===zB&&w.alphaToCoverage===!1,alphaMap:kA,alphaTest:lA,alphaHash:dA,combine:w.combine,mapUv:EA&&L(w.map.channel),aoMapUv:NA&&L(w.aoMap.channel),lightMapUv:YA&&L(w.lightMap.channel),bumpMapUv:FA&&L(w.bumpMap.channel),normalMapUv:ZA&&L(w.normalMap.channel),displacementMapUv:jA&&L(w.displacementMap.channel),emissiveMapUv:wA&&L(w.emissiveMap.channel),metalnessMapUv:VA&&L(w.metalnessMap.channel),roughnessMapUv:d&&L(w.roughnessMap.channel),anisotropyMapUv:zA&&L(w.anisotropyMap.channel),clearcoatMapUv:yA&&L(w.clearcoatMap.channel),clearcoatNormalMapUv:qA&&L(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:LA&&L(w.clearcoatRoughnessMap.channel),iridescenceMapUv:_A&&L(w.iridescenceMap.channel),iridescenceThicknessMapUv:B0&&L(w.iridescenceThicknessMap.channel),sheenColorMapUv:cA&&L(w.sheenColorMap.channel),sheenRoughnessMapUv:uA&&L(w.sheenRoughnessMap.channel),specularMapUv:pA&&L(w.specularMap.channel),specularColorMapUv:iA&&L(w.specularColorMap.channel),specularIntensityMapUv:$0&&L(w.specularIntensityMap.channel),transmissionMapUv:IA&&L(w.transmissionMap.channel),thicknessMapUv:TA&&L(w.thicknessMap.channel),alphaMapUv:kA&&L(w.alphaMap.channel),vertexTangents:!!g.attributes.tangent&&(ZA||u),vertexColors:w.vertexColors,vertexAlphas:w.vertexColors===!0&&!!g.attributes.color&&g.attributes.color.itemSize===4,pointsUvs:j.isPoints===!0&&!!g.attributes.uv&&(EA||kA),fog:!!v,useFog:w.fog===!0,fogExp2:!!v&&v.isFogExp2,flatShading:w.flatShading===!0,sizeAttenuation:w.sizeAttenuation===!0,logarithmicDepthBuffer:R,reverseDepthBuffer:o,skinning:j.isSkinnedMesh===!0,morphTargets:g.morphAttributes.position!==void 0,morphNormals:g.morphAttributes.normal!==void 0,morphColors:g.morphAttributes.color!==void 0,morphTargetsCount:b,morphTextureStride:m,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:K.numPlanes,numClipIntersection:K.numIntersection,dithering:w.dithering,shadowMapEnabled:A.shadowMap.enabled&&T.length>0,shadowMapType:A.shadowMap.type,toneMapping:HQ,decodeVideoTexture:EA&&w.map.isVideoTexture===!0&&O0.getTransfer(w.map.colorSpace)===IQ,decodeVideoTextureEmissive:wA&&w.emissiveMap.isVideoTexture===!0&&O0.getTransfer(w.emissiveMap.colorSpace)===IQ,premultipliedAlpha:w.premultipliedAlpha,doubleSided:w.side===y0,flipSided:w.side===ZQ,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionClipCullDistance:F0&&w.extensions.clipCullDistance===!0&&B.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(F0&&w.extensions.multiDraw===!0||BA)&&B.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:B.has("KHR_parallel_shader_compile"),customProgramCacheKey:w.customProgramCacheKey()};return gQ.vertexUv1s=Y.has(1),gQ.vertexUv2s=Y.has(2),gQ.vertexUv3s=Y.has(3),Y.clear(),gQ}function Z(w){let k=[];if(w.shaderID)k.push(w.shaderID);else k.push(w.customVertexShaderID),k.push(w.customFragmentShaderID);if(w.defines!==void 0)for(let T in w.defines)k.push(T),k.push(w.defines[T]);if(w.isRawShaderMaterial===!1)G(k,w),X(k,w),k.push(A.outputColorSpace);return k.push(w.customProgramCacheKey),k.join()}function G(w,k){w.push(k.precision),w.push(k.outputColorSpace),w.push(k.envMapMode),w.push(k.envMapCubeUVHeight),w.push(k.mapUv),w.push(k.alphaMapUv),w.push(k.lightMapUv),w.push(k.aoMapUv),w.push(k.bumpMapUv),w.push(k.normalMapUv),w.push(k.displacementMapUv),w.push(k.emissiveMapUv),w.push(k.metalnessMapUv),w.push(k.roughnessMapUv),w.push(k.anisotropyMapUv),w.push(k.clearcoatMapUv),w.push(k.clearcoatNormalMapUv),w.push(k.clearcoatRoughnessMapUv),w.push(k.iridescenceMapUv),w.push(k.iridescenceThicknessMapUv),w.push(k.sheenColorMapUv),w.push(k.sheenRoughnessMapUv),w.push(k.specularMapUv),w.push(k.specularColorMapUv),w.push(k.specularIntensityMapUv),w.push(k.transmissionMapUv),w.push(k.thicknessMapUv),w.push(k.combine),w.push(k.fogExp2),w.push(k.sizeAttenuation),w.push(k.morphTargetsCount),w.push(k.morphAttributeCount),w.push(k.numDirLights),w.push(k.numPointLights),w.push(k.numSpotLights),w.push(k.numSpotLightMaps),w.push(k.numHemiLights),w.push(k.numRectAreaLights),w.push(k.numDirLightShadows),w.push(k.numPointLightShadows),w.push(k.numSpotLightShadows),w.push(k.numSpotLightShadowsWithMaps),w.push(k.numLightProbes),w.push(k.shadowMapType),w.push(k.toneMapping),w.push(k.numClippingPlanes),w.push(k.numClipIntersection),w.push(k.depthPacking)}function X(w,k){if(J.disableAll(),k.supportsVertexTextures)J.enable(0);if(k.instancing)J.enable(1);if(k.instancingColor)J.enable(2);if(k.instancingMorph)J.enable(3);if(k.matcap)J.enable(4);if(k.envMap)J.enable(5);if(k.normalMapObjectSpace)J.enable(6);if(k.normalMapTangentSpace)J.enable(7);if(k.clearcoat)J.enable(8);if(k.iridescence)J.enable(9);if(k.alphaTest)J.enable(10);if(k.vertexColors)J.enable(11);if(k.vertexAlphas)J.enable(12);if(k.vertexUv1s)J.enable(13);if(k.vertexUv2s)J.enable(14);if(k.vertexUv3s)J.enable(15);if(k.vertexTangents)J.enable(16);if(k.anisotropy)J.enable(17);if(k.alphaHash)J.enable(18);if(k.batching)J.enable(19);if(k.dispersion)J.enable(20);if(k.batchingColor)J.enable(21);if(w.push(J.mask),J.disableAll(),k.fog)J.enable(0);if(k.useFog)J.enable(1);if(k.flatShading)J.enable(2);if(k.logarithmicDepthBuffer)J.enable(3);if(k.reverseDepthBuffer)J.enable(4);if(k.skinning)J.enable(5);if(k.morphTargets)J.enable(6);if(k.morphNormals)J.enable(7);if(k.morphColors)J.enable(8);if(k.premultipliedAlpha)J.enable(9);if(k.shadowMapEnabled)J.enable(10);if(k.doubleSided)J.enable(11);if(k.flipSided)J.enable(12);if(k.useDepthPacking)J.enable(13);if(k.dithering)J.enable(14);if(k.transmission)J.enable(15);if(k.sheen)J.enable(16);if(k.opaque)J.enable(17);if(k.pointsUvs)J.enable(18);if(k.decodeVideoTexture)J.enable(19);if(k.decodeVideoTextureEmissive)J.enable(20);if(k.alphaToCoverage)J.enable(21);w.push(J.mask)}function q(w){let k=$[w.type],T;if(k){let z=CE[k];T=oA.clone(z.uniforms)}else T=w.uniforms;return T}function M(w,k){let T;for(let z=0,j=H.length;z<j;z++){let v=H[z];if(v.cacheKey===k){T=v,++T.usedTimes;break}}if(T===void 0)T=new DM(A,k,w,C),H.push(T);return T}function F(w){if(--w.usedTimes===0){let k=H.indexOf(w);H[k]=H[H.length-1],H.pop(),w.destroy()}}function D(w){U.remove(w)}function _(){U.dispose()}return{getParameters:W,getProgramCacheKey:Z,getUniforms:q,acquireProgram:M,releaseProgram:F,releaseShaderCache:D,programs:H,dispose:_}}function _M(){let A=/*@__PURE__*/new WeakMap;function Q(K){return A.has(K)}function E(K){let J=A.get(K);if(J===void 0)J={},A.set(K,J);return J}function B(K){A.delete(K)}function I(K,J,U){A.get(K)[J]=U}function C(){A=/*@__PURE__*/new WeakMap}return{has:Q,get:E,remove:B,update:I,dispose:C}}function kM(A,Q){if(A.groupOrder!==Q.groupOrder)return A.groupOrder-Q.groupOrder;else if(A.renderOrder!==Q.renderOrder)return A.renderOrder-Q.renderOrder;else if(A.material.id!==Q.material.id)return A.material.id-Q.material.id;else if(A.z!==Q.z)return A.z-Q.z;else return A.id-Q.id}function wN(A,Q){if(A.groupOrder!==Q.groupOrder)return A.groupOrder-Q.groupOrder;else if(A.renderOrder!==Q.renderOrder)return A.renderOrder-Q.renderOrder;else if(A.z!==Q.z)return Q.z-A.z;else return A.id-Q.id}function _N(){let A=[],Q=0,E=[],B=[],I=[];function C(){Q=0,E.length=0,B.length=0,I.length=0}function K(R,O,N,$,L,W){let Z=A[Q];if(Z===void 0)Z={id:R.id,object:R,geometry:O,material:N,groupOrder:$,renderOrder:R.renderOrder,z:L,group:W},A[Q]=Z;else Z.id=R.id,Z.object=R,Z.geometry=O,Z.material=N,Z.groupOrder=$,Z.renderOrder=R.renderOrder,Z.z=L,Z.group=W;return Q++,Z}function J(R,O,N,$,L,W){let Z=K(R,O,N,$,L,W);if(N.transmission>0)B.push(Z);else if(N.transparent===!0)I.push(Z);else E.push(Z)}function U(R,O,N,$,L,W){let Z=K(R,O,N,$,L,W);if(N.transmission>0)B.unshift(Z);else if(N.transparent===!0)I.unshift(Z);else E.unshift(Z)}function Y(R,O){if(E.length>1)E.sort(R||kM);if(B.length>1)B.sort(O||wN);if(I.length>1)I.sort(O||wN)}function H(){for(let R=Q,O=A.length;R<O;R++){let N=A[R];if(N.id===null)break;N.id=null,N.object=null,N.geometry=null,N.material=null,N.group=null}}return{opaque:E,transmissive:B,transparent:I,init:C,push:J,unshift:U,finish:H,sort:Y}}function SM(){let A=/*@__PURE__*/new WeakMap;function Q(B,I){let C=A.get(B),K;if(C===void 0)K=new _N,A.set(B,[K]);else if(I>=C.length)K=new _N,C.push(K);else K=C[I];return K}function E(){A=/*@__PURE__*/new WeakMap}return{get:Q,dispose:E}}function TM(){let A={};return{get:function(Q){if(A[Q.id]!==void 0)return A[Q.id];let E;switch(Q.type){case"DirectionalLight":E={direction:new y,color:new a};break;case"SpotLight":E={position:new y,direction:new y,color:new a,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":E={position:new y,color:new a,distance:0,decay:0};break;case"HemisphereLight":E={direction:new y,skyColor:new a,groundColor:new a};break;case"RectAreaLight":E={color:new a,position:new y,halfWidth:new y,halfHeight:new y};break}return A[Q.id]=E,E}}}function zM(){let A={};return{get:function(Q){if(A[Q.id]!==void 0)return A[Q.id];let E;switch(Q.type){case"DirectionalLight":E={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new AA};break;case"SpotLight":E={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new AA};break;case"PointLight":E={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new AA,shadowCameraNear:1,shadowCameraFar:1000};break}return A[Q.id]=E,E}}}var PM=0;function VM(A,Q){return(Q.castShadow?2:0)-(A.castShadow?2:0)+(Q.map?1:0)-(A.map?1:0)}function jM(A){let Q=new TM,E=zM(),B={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let Y=0;Y<9;Y++)B.probe.push(new y);let I=new y,C=new RA,K=new RA;function J(Y){let H=0,R=0,O=0;for(let w=0;w<9;w++)B.probe[w].set(0,0,0);let N=0,$=0,L=0,W=0,Z=0,G=0,X=0,q=0,M=0,F=0,D=0;Y.sort(VM);for(let w=0,k=Y.length;w<k;w++){let T=Y[w],z=T.color,j=T.intensity,v=T.distance,g=T.shadow&&T.shadow.map?T.shadow.map.texture:null;if(T.isAmbientLight)H+=z.r*j,R+=z.g*j,O+=z.b*j;else if(T.isLightProbe){for(let P=0;P<9;P++)B.probe[P].addScaledVector(T.sh.coefficients[P],j);D++}else if(T.isDirectionalLight){let P=Q.get(T);if(P.color.copy(T.color).multiplyScalar(T.intensity),T.castShadow){let V=T.shadow,S=E.get(T);S.shadowIntensity=V.intensity,S.shadowBias=V.bias,S.shadowNormalBias=V.normalBias,S.shadowRadius=V.radius,S.shadowMapSize=V.mapSize,B.directionalShadow[N]=S,B.directionalShadowMap[N]=g,B.directionalShadowMatrix[N]=T.shadow.matrix,G++}B.directional[N]=P,N++}else if(T.isSpotLight){let P=Q.get(T);P.position.setFromMatrixPosition(T.matrixWorld),P.color.copy(z).multiplyScalar(j),P.distance=v,P.coneCos=Math.cos(T.angle),P.penumbraCos=Math.cos(T.angle*(1-T.penumbra)),P.decay=T.decay,B.spot[L]=P;let V=T.shadow;if(T.map){if(B.spotLightMap[M]=T.map,M++,V.updateMatrices(T),T.castShadow)F++}if(B.spotLightMatrix[L]=V.matrix,T.castShadow){let S=E.get(T);S.shadowIntensity=V.intensity,S.shadowBias=V.bias,S.shadowNormalBias=V.normalBias,S.shadowRadius=V.radius,S.shadowMapSize=V.mapSize,B.spotShadow[L]=S,B.spotShadowMap[L]=g,q++}L++}else if(T.isRectAreaLight){let P=Q.get(T);P.color.copy(z).multiplyScalar(j),P.halfWidth.set(T.width*0.5,0,0),P.halfHeight.set(0,T.height*0.5,0),B.rectArea[W]=P,W++}else if(T.isPointLight){let P=Q.get(T);if(P.color.copy(T.color).multiplyScalar(T.intensity),P.distance=T.distance,P.decay=T.decay,T.castShadow){let V=T.shadow,S=E.get(T);S.shadowIntensity=V.intensity,S.shadowBias=V.bias,S.shadowNormalBias=V.normalBias,S.shadowRadius=V.radius,S.shadowMapSize=V.mapSize,S.shadowCameraNear=V.camera.near,S.shadowCameraFar=V.camera.far,B.pointShadow[$]=S,B.pointShadowMap[$]=g,B.pointShadowMatrix[$]=T.shadow.matrix,X++}B.point[$]=P,$++}else if(T.isHemisphereLight){let P=Q.get(T);P.skyColor.copy(T.color).multiplyScalar(j),P.groundColor.copy(T.groundColor).multiplyScalar(j),B.hemi[Z]=P,Z++}}if(W>0)if(A.has("OES_texture_float_linear")===!0)B.rectAreaLTC1=vA.LTC_FLOAT_1,B.rectAreaLTC2=vA.LTC_FLOAT_2;else B.rectAreaLTC1=vA.LTC_HALF_1,B.rectAreaLTC2=vA.LTC_HALF_2;B.ambient[0]=H,B.ambient[1]=R,B.ambient[2]=O;let _=B.hash;if(_.directionalLength!==N||_.pointLength!==$||_.spotLength!==L||_.rectAreaLength!==W||_.hemiLength!==Z||_.numDirectionalShadows!==G||_.numPointShadows!==X||_.numSpotShadows!==q||_.numSpotMaps!==M||_.numLightProbes!==D)B.directional.length=N,B.spot.length=L,B.rectArea.length=W,B.point.length=$,B.hemi.length=Z,B.directionalShadow.length=G,B.directionalShadowMap.length=G,B.pointShadow.length=X,B.pointShadowMap.length=X,B.spotShadow.length=q,B.spotShadowMap.length=q,B.directionalShadowMatrix.length=G,B.pointShadowMatrix.length=X,B.spotLightMatrix.length=q+M-F,B.spotLightMap.length=M,B.numSpotLightShadowsWithMaps=F,B.numLightProbes=D,_.directionalLength=N,_.pointLength=$,_.spotLength=L,_.rectAreaLength=W,_.hemiLength=Z,_.numDirectionalShadows=G,_.numPointShadows=X,_.numSpotShadows=q,_.numSpotMaps=M,_.numLightProbes=D,B.version=PM++}function U(Y,H){let R=0,O=0,N=0,$=0,L=0,W=H.matrixWorldInverse;for(let Z=0,G=Y.length;Z<G;Z++){let X=Y[Z];if(X.isDirectionalLight){let q=B.directional[R];q.direction.setFromMatrixPosition(X.matrixWorld),I.setFromMatrixPosition(X.target.matrixWorld),q.direction.sub(I),q.direction.transformDirection(W),R++}else if(X.isSpotLight){let q=B.spot[N];q.position.setFromMatrixPosition(X.matrixWorld),q.position.applyMatrix4(W),q.direction.setFromMatrixPosition(X.matrixWorld),I.setFromMatrixPosition(X.target.matrixWorld),q.direction.sub(I),q.direction.transformDirection(W),N++}else if(X.isRectAreaLight){let q=B.rectArea[$];q.position.setFromMatrixPosition(X.matrixWorld),q.position.applyMatrix4(W),K.identity(),C.copy(X.matrixWorld),C.premultiply(W),K.extractRotation(C),q.halfWidth.set(X.width*0.5,0,0),q.halfHeight.set(0,X.height*0.5,0),q.halfWidth.applyMatrix4(K),q.halfHeight.applyMatrix4(K),$++}else if(X.isPointLight){let q=B.point[O];q.position.setFromMatrixPosition(X.matrixWorld),q.position.applyMatrix4(W),O++}else if(X.isHemisphereLight){let q=B.hemi[L];q.direction.setFromMatrixPosition(X.matrixWorld),q.direction.transformDirection(W),L++}}}return{setup:J,setupView:U,state:B}}function kN(A){let Q=new jM(A),E=[],B=[];function I(H){Y.camera=H,E.length=0,B.length=0}function C(H){E.push(H)}function K(H){B.push(H)}function J(){Q.setup(E)}function U(H){Q.setupView(E,H)}let Y={lightsArray:E,shadowsArray:B,camera:null,lights:Q,transmissionRenderTarget:{}};return{init:I,state:Y,setupLights:J,setupLightsView:U,pushLight:C,pushShadow:K}}function vM(A){let Q=/*@__PURE__*/new WeakMap;function E(I,C=0){let K=Q.get(I),J;if(K===void 0)J=new kN(A),Q.set(I,[J]);else if(C>=K.length)J=new kN(A),K.push(J);else J=K[C];return J}function B(){Q=/*@__PURE__*/new WeakMap}return{get:E,dispose:B}}var hM=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yM=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function gM(A,Q,E){let B=new xB,I=new AA,C=new AA,K=new MA,J=new hI({depthPacking:b8}),U=new pC,Y={},H=E.maxTextureSize,R={[jQ]:ZQ,[ZQ]:jQ,[y0]:y0},O=new bA({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new AA},radius:{value:4}},vertexShader:hM,fragmentShader:yM}),N=O.clone();N.defines.HORIZONTAL_PASS=1;let $=new hA;$.setAttribute("position",new tA(new Float32Array([-1,-1,0.5,3,-1,0.5,-1,3,0.5]),3));let L=new xA($,O),W=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fJ;let Z=this.type;this.render=function(F,D,_){if(W.enabled===!1)return;if(W.autoUpdate===!1&&W.needsUpdate===!1)return;if(F.length===0)return;let w=A.getRenderTarget(),k=A.getActiveCubeFace(),T=A.getActiveMipmapLevel(),z=A.state;z.setBlending(H0),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);let j=Z!==RB&&this.type===RB,v=Z===RB&&this.type!==RB;for(let g=0,P=F.length;g<P;g++){let V=F[g],S=V.shadow;if(S===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(S.autoUpdate===!1&&S.needsUpdate===!1)continue;I.copy(S.mapSize);let h=S.getFrameExtents();if(I.multiply(h),C.copy(S.mapSize),I.x>H||I.y>H){if(I.x>H)C.x=Math.floor(H/h.x),I.x=C.x*h.x,S.mapSize.x=C.x;if(I.y>H)C.y=Math.floor(H/h.y),I.y=C.y*h.y,S.mapSize.y=C.y}if(S.map===null||j===!0||v===!0){let b=this.type!==RB?{minFilter:Z0,magFilter:Z0}:{};if(S.map!==null)S.map.dispose();S.map=new Q0(I.x,I.y,b),S.map.texture.name=V.name+".shadowMap",S.camera.updateProjectionMatrix()}A.setRenderTarget(S.map),A.clear();let x=S.getViewportCount();for(let b=0;b<x;b++){let m=S.getViewport(b);K.set(C.x*m.x,C.y*m.y,C.x*m.z,C.y*m.w),z.viewport(K),S.updateMatrices(V,b),B=S.getFrustum(),q(D,_,S.camera,V,this.type)}if(S.isPointLightShadow!==!0&&this.type===RB)G(S,_);S.needsUpdate=!1}Z=this.type,W.needsUpdate=!1,A.setRenderTarget(w,k,T)};function G(F,D){let _=Q.update(L);if(O.defines.VSM_SAMPLES!==F.blurSamples)O.defines.VSM_SAMPLES=F.blurSamples,N.defines.VSM_SAMPLES=F.blurSamples,O.needsUpdate=!0,N.needsUpdate=!0;if(F.mapPass===null)F.mapPass=new Q0(I.x,I.y);O.uniforms.shadow_pass.value=F.map.texture,O.uniforms.resolution.value=F.mapSize,O.uniforms.radius.value=F.radius,A.setRenderTarget(F.mapPass),A.clear(),A.renderBufferDirect(D,null,_,O,L,null),N.uniforms.shadow_pass.value=F.mapPass.texture,N.uniforms.resolution.value=F.mapSize,N.uniforms.radius.value=F.radius,A.setRenderTarget(F.map),A.clear(),A.renderBufferDirect(D,null,_,N,L,null)}function X(F,D,_,w){let k=null,T=_.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(T!==void 0)k=T;else if(k=_.isPointLight===!0?U:J,A.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){let z=k.uuid,j=D.uuid,v=Y[z];if(v===void 0)v={},Y[z]=v;let g=v[j];if(g===void 0)g=k.clone(),v[j]=g,D.addEventListener("dispose",M);k=g}if(k.visible=D.visible,k.wireframe=D.wireframe,w===RB)k.side=D.shadowSide!==null?D.shadowSide:D.side;else k.side=D.shadowSide!==null?D.shadowSide:R[D.side];if(k.alphaMap=D.alphaMap,k.alphaTest=D.alphaTest,k.map=D.map,k.clipShadows=D.clipShadows,k.clippingPlanes=D.clippingPlanes,k.clipIntersection=D.clipIntersection,k.displacementMap=D.displacementMap,k.displacementScale=D.displacementScale,k.displacementBias=D.displacementBias,k.wireframeLinewidth=D.wireframeLinewidth,k.linewidth=D.linewidth,_.isPointLight===!0&&k.isMeshDistanceMaterial===!0){let z=A.properties.get(k);z.light=_}return k}function q(F,D,_,w,k){if(F.visible===!1)return;if(F.layers.test(D.layers)&&(F.isMesh||F.isLine||F.isPoints)){if((F.castShadow||F.receiveShadow&&k===RB)&&(!F.frustumCulled||B.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(_.matrixWorldInverse,F.matrixWorld);let j=Q.update(F),v=F.material;if(Array.isArray(v)){let g=j.groups;for(let P=0,V=g.length;P<V;P++){let S=g[P],h=v[S.materialIndex];if(h&&h.visible){let x=X(F,h,w,k);F.onBeforeShadow(A,F,D,_,j,x,S),A.renderBufferDirect(_,null,j,x,F,S),F.onAfterShadow(A,F,D,_,j,x,S)}}}else if(v.visible){let g=X(F,v,w,k);F.onBeforeShadow(A,F,D,_,j,g,null),A.renderBufferDirect(_,null,j,g,F,null),F.onAfterShadow(A,F,D,_,j,g,null)}}}let z=F.children;for(let j=0,v=z.length;j<v;j++)q(z[j],D,_,w,k)}function M(F){F.target.removeEventListener("dispose",M);for(let _ in Y){let w=Y[_],k=F.target.uuid;if(k in w)w[k].dispose(),delete w[k]}}}var xM={[CC]:KC,[JC]:OC,[UC]:HC,[z8]:YC,[KC]:CC,[OC]:JC,[HC]:UC,[YC]:z8};function bM(A,Q){function E(){let IA=!1,TA=new MA,DA=null,kA=new MA(0,0,0,0);return{setMask:function(lA){if(DA!==lA&&!IA)A.colorMask(lA,lA,lA,lA),DA=lA},setLocked:function(lA){IA=lA},setClear:function(lA,dA,F0,HQ,gQ){if(gQ===!0)lA*=HQ,dA*=HQ,F0*=HQ;if(TA.set(lA,dA,F0,HQ),kA.equals(TA)===!1)A.clearColor(lA,dA,F0,HQ),kA.copy(TA)},reset:function(){IA=!1,DA=null,kA.set(-1,0,0,0)}}}function B(){let IA=!1,TA=!1,DA=null,kA=null,lA=null;return{setReversed:function(dA){if(TA!==dA){let F0=Q.get("EXT_clip_control");if(TA)F0.clipControlEXT(F0.LOWER_LEFT_EXT,F0.ZERO_TO_ONE_EXT);else F0.clipControlEXT(F0.LOWER_LEFT_EXT,F0.NEGATIVE_ONE_TO_ONE_EXT);let HQ=lA;lA=null,this.setClear(HQ)}TA=dA},getReversed:function(){return TA},setTest:function(dA){if(dA)c(A.DEPTH_TEST);else o(A.DEPTH_TEST)},setMask:function(dA){if(DA!==dA&&!IA)A.depthMask(dA),DA=dA},setFunc:function(dA){if(TA)dA=xM[dA];if(kA!==dA){switch(dA){case CC:A.depthFunc(A.NEVER);break;case KC:A.depthFunc(A.ALWAYS);break;case JC:A.depthFunc(A.LESS);break;case z8:A.depthFunc(A.LEQUAL);break;case UC:A.depthFunc(A.EQUAL);break;case YC:A.depthFunc(A.GEQUAL);break;case OC:A.depthFunc(A.GREATER);break;case HC:A.depthFunc(A.NOTEQUAL);break;default:A.depthFunc(A.LEQUAL)}kA=dA}},setLocked:function(dA){IA=dA},setClear:function(dA){if(lA!==dA){if(TA)dA=1-dA;A.clearDepth(dA),lA=dA}},reset:function(){IA=!1,DA=null,kA=null,lA=null,TA=!1}}}function I(){let IA=!1,TA=null,DA=null,kA=null,lA=null,dA=null,F0=null,HQ=null,gQ=null;return{setTest:function(d0){if(!IA)if(d0)c(A.STENCIL_TEST);else o(A.STENCIL_TEST)},setMask:function(d0){if(TA!==d0&&!IA)A.stencilMask(d0),TA=d0},setFunc:function(d0,IB,cE){if(DA!==d0||kA!==IB||lA!==cE)A.stencilFunc(d0,IB,cE),DA=d0,kA=IB,lA=cE},setOp:function(d0,IB,cE){if(dA!==d0||F0!==IB||HQ!==cE)A.stencilOp(d0,IB,cE),dA=d0,F0=IB,HQ=cE},setLocked:function(d0){IA=d0},setClear:function(d0){if(gQ!==d0)A.clearStencil(d0),gQ=d0},reset:function(){IA=!1,TA=null,DA=null,kA=null,lA=null,dA=null,F0=null,HQ=null,gQ=null}}}let C=new E,K=new B,J=new I,U=/*@__PURE__*/new WeakMap,Y=/*@__PURE__*/new WeakMap,H={},R={},O=/*@__PURE__*/new WeakMap,N=[],$=null,L=!1,W=null,Z=null,G=null,X=null,q=null,M=null,F=null,D=new a(0,0,0),_=0,w=!1,k=null,T=null,z=null,j=null,v=null,g=A.getParameter(A.MAX_COMBINED_TEXTURE_IMAGE_UNITS),P=!1,V=0,S=A.getParameter(A.VERSION);if(S.indexOf("WebGL")!==-1)V=parseFloat(/^WebGL (\d)/.exec(S)[1]),P=V>=1;else if(S.indexOf("OpenGL ES")!==-1)V=parseFloat(/^OpenGL ES (\d)/.exec(S)[1]),P=V>=2;let h=null,x={},b=A.getParameter(A.SCISSOR_BOX),m=A.getParameter(A.VIEWPORT),s=new MA().fromArray(b),i=new MA().fromArray(m);function n(IA,TA,DA,kA){let lA=new Uint8Array(4),dA=A.createTexture();A.bindTexture(IA,dA),A.texParameteri(IA,A.TEXTURE_MIN_FILTER,A.NEAREST),A.texParameteri(IA,A.TEXTURE_MAG_FILTER,A.NEAREST);for(let F0=0;F0<DA;F0++)if(IA===A.TEXTURE_3D||IA===A.TEXTURE_2D_ARRAY)A.texImage3D(TA,0,A.RGBA,1,1,kA,0,A.RGBA,A.UNSIGNED_BYTE,lA);else A.texImage2D(TA+F0,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,lA);return dA}let l={};l[A.TEXTURE_2D]=n(A.TEXTURE_2D,A.TEXTURE_2D,1),l[A.TEXTURE_CUBE_MAP]=n(A.TEXTURE_CUBE_MAP,A.TEXTURE_CUBE_MAP_POSITIVE_X,6),l[A.TEXTURE_2D_ARRAY]=n(A.TEXTURE_2D_ARRAY,A.TEXTURE_2D_ARRAY,1,1),l[A.TEXTURE_3D]=n(A.TEXTURE_3D,A.TEXTURE_3D,1,1),C.setClear(0,0,0,1),K.setClear(1),J.setClear(0),c(A.DEPTH_TEST),K.setFunc(z8),FA(!1),ZA(bJ),c(A.CULL_FACE),NA(H0);function c(IA){if(H[IA]!==!0)A.enable(IA),H[IA]=!0}function o(IA){if(H[IA]!==!1)A.disable(IA),H[IA]=!1}function e(IA,TA){if(R[IA]!==TA){if(A.bindFramebuffer(IA,TA),R[IA]=TA,IA===A.DRAW_FRAMEBUFFER)R[A.FRAMEBUFFER]=TA;if(IA===A.FRAMEBUFFER)R[A.DRAW_FRAMEBUFFER]=TA;return!0}return!1}function BA(IA,TA){let DA=N,kA=!1;if(IA){if(DA=O.get(TA),DA===void 0)DA=[],O.set(TA,DA);let lA=IA.textures;if(DA.length!==lA.length||DA[0]!==A.COLOR_ATTACHMENT0){for(let dA=0,F0=lA.length;dA<F0;dA++)DA[dA]=A.COLOR_ATTACHMENT0+dA;DA.length=lA.length,kA=!0}}else if(DA[0]!==A.BACK)DA[0]=A.BACK,kA=!0;if(kA)A.drawBuffers(DA)}function EA(IA){if($!==IA)return A.useProgram(IA),$=IA,!0;return!1}let CA={[kQ]:A.FUNC_ADD,[uY]:A.FUNC_SUBTRACT,[pY]:A.FUNC_REVERSE_SUBTRACT};CA[mY]=A.MIN,CA[cY]=A.MAX;let f={[$E]:A.ZERO,[PE]:A.ONE,[lY]:A.SRC_COLOR,[EE]:A.SRC_ALPHA,[sY]:A.SRC_ALPHA_SATURATE,[PB]:A.DST_COLOR,[LE]:A.DST_ALPHA,[dY]:A.ONE_MINUS_SRC_COLOR,[iE]:A.ONE_MINUS_SRC_ALPHA,[nY]:A.ONE_MINUS_DST_COLOR,[N1]:A.ONE_MINUS_DST_ALPHA,[iY]:A.CONSTANT_COLOR,[oY]:A.ONE_MINUS_CONSTANT_COLOR,[rY]:A.CONSTANT_ALPHA,[aY]:A.ONE_MINUS_CONSTANT_ALPHA};function NA(IA,TA,DA,kA,lA,dA,F0,HQ,gQ,d0){if(IA===H0){if(L===!0)o(A.BLEND),L=!1;return}if(L===!1)c(A.BLEND),L=!0;if(IA!==vQ){if(IA!==W||d0!==w){if(Z!==kQ||q!==kQ)A.blendEquation(A.FUNC_ADD),Z=kQ,q=kQ;if(d0)switch(IA){case zB:A.blendFuncSeparate(A.ONE,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA);break;case XE:A.blendFunc(A.ONE,A.ONE);break;case uJ:A.blendFuncSeparate(A.ZERO,A.ONE_MINUS_SRC_COLOR,A.ZERO,A.ONE);break;case pJ:A.blendFuncSeparate(A.ZERO,A.SRC_COLOR,A.ZERO,A.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",IA);break}else switch(IA){case zB:A.blendFuncSeparate(A.SRC_ALPHA,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA);break;case XE:A.blendFunc(A.SRC_ALPHA,A.ONE);break;case uJ:A.blendFuncSeparate(A.ZERO,A.ONE_MINUS_SRC_COLOR,A.ZERO,A.ONE);break;case pJ:A.blendFunc(A.ZERO,A.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",IA);break}G=null,X=null,M=null,F=null,D.set(0,0,0),_=0,W=IA,w=d0}return}if(lA=lA||TA,dA=dA||DA,F0=F0||kA,TA!==Z||lA!==q)A.blendEquationSeparate(CA[TA],CA[lA]),Z=TA,q=lA;if(DA!==G||kA!==X||dA!==M||F0!==F)A.blendFuncSeparate(f[DA],f[kA],f[dA],f[F0]),G=DA,X=kA,M=dA,F=F0;if(HQ.equals(D)===!1||gQ!==_)A.blendColor(HQ.r,HQ.g,HQ.b,gQ),D.copy(HQ),_=gQ;W=IA,w=!1}function YA(IA,TA){IA.side===y0?o(A.CULL_FACE):c(A.CULL_FACE);let DA=IA.side===ZQ;if(TA)DA=!DA;FA(DA),IA.blending===zB&&IA.transparent===!1?NA(H0):NA(IA.blending,IA.blendEquation,IA.blendSrc,IA.blendDst,IA.blendEquationAlpha,IA.blendSrcAlpha,IA.blendDstAlpha,IA.blendColor,IA.blendAlpha,IA.premultipliedAlpha),K.setFunc(IA.depthFunc),K.setTest(IA.depthTest),K.setMask(IA.depthWrite),C.setMask(IA.colorWrite);let kA=IA.stencilWrite;if(J.setTest(kA),kA)J.setMask(IA.stencilWriteMask),J.setFunc(IA.stencilFunc,IA.stencilRef,IA.stencilFuncMask),J.setOp(IA.stencilFail,IA.stencilZFail,IA.stencilZPass);wA(IA.polygonOffset,IA.polygonOffsetFactor,IA.polygonOffsetUnits),IA.alphaToCoverage===!0?c(A.SAMPLE_ALPHA_TO_COVERAGE):o(A.SAMPLE_ALPHA_TO_COVERAGE)}function FA(IA){if(k!==IA){if(IA)A.frontFace(A.CW);else A.frontFace(A.CCW);k=IA}}function ZA(IA){if(IA!==xY){if(c(A.CULL_FACE),IA!==T)if(IA===bJ)A.cullFace(A.BACK);else if(IA===bY)A.cullFace(A.FRONT);else A.cullFace(A.FRONT_AND_BACK)}else o(A.CULL_FACE);T=IA}function jA(IA){if(IA!==z){if(P)A.lineWidth(IA);z=IA}}function wA(IA,TA,DA){if(IA){if(c(A.POLYGON_OFFSET_FILL),j!==TA||v!==DA)A.polygonOffset(TA,DA),j=TA,v=DA}else o(A.POLYGON_OFFSET_FILL)}function VA(IA){if(IA)c(A.SCISSOR_TEST);else o(A.SCISSOR_TEST)}function d(IA){if(IA===void 0)IA=A.TEXTURE0+g-1;if(h!==IA)A.activeTexture(IA),h=IA}function u(IA,TA,DA){if(DA===void 0)if(h===null)DA=A.TEXTURE0+g-1;else DA=h;let kA=x[DA];if(kA===void 0)kA={type:void 0,texture:void 0},x[DA]=kA;if(kA.type!==IA||kA.texture!==TA){if(h!==DA)A.activeTexture(DA),h=DA;A.bindTexture(IA,TA||l[IA]),kA.type=IA,kA.texture=TA}}function QA(){let IA=x[h];if(IA!==void 0&&IA.type!==void 0)A.bindTexture(IA.type,null),IA.type=void 0,IA.texture=void 0}function t(){try{A.compressedTexImage2D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function KA(){try{A.compressedTexImage3D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function HA(){try{A.texSubImage2D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function fA(){try{A.texSubImage3D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function zA(){try{A.compressedTexSubImage2D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function yA(){try{A.compressedTexSubImage3D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function qA(){try{A.texStorage2D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function LA(){try{A.texStorage3D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function _A(){try{A.texImage2D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function B0(){try{A.texImage3D.apply(A,arguments)}catch(IA){console.error("THREE.WebGLState:",IA)}}function cA(IA){if(s.equals(IA)===!1)A.scissor(IA.x,IA.y,IA.z,IA.w),s.copy(IA)}function uA(IA){if(i.equals(IA)===!1)A.viewport(IA.x,IA.y,IA.z,IA.w),i.copy(IA)}function pA(IA,TA){let DA=Y.get(TA);if(DA===void 0)DA=/*@__PURE__*/new WeakMap,Y.set(TA,DA);let kA=DA.get(IA);if(kA===void 0)kA=A.getUniformBlockIndex(TA,IA.name),DA.set(IA,kA)}function iA(IA,TA){let kA=Y.get(TA).get(IA);if(U.get(TA)!==kA)A.uniformBlockBinding(TA,kA,IA.__bindingPointIndex),U.set(TA,kA)}function $0(){A.disable(A.BLEND),A.disable(A.CULL_FACE),A.disable(A.DEPTH_TEST),A.disable(A.POLYGON_OFFSET_FILL),A.disable(A.SCISSOR_TEST),A.disable(A.STENCIL_TEST),A.disable(A.SAMPLE_ALPHA_TO_COVERAGE),A.blendEquation(A.FUNC_ADD),A.blendFunc(A.ONE,A.ZERO),A.blendFuncSeparate(A.ONE,A.ZERO,A.ONE,A.ZERO),A.blendColor(0,0,0,0),A.colorMask(!0,!0,!0,!0),A.clearColor(0,0,0,0),A.depthMask(!0),A.depthFunc(A.LESS),K.setReversed(!1),A.clearDepth(1),A.stencilMask(4294967295),A.stencilFunc(A.ALWAYS,0,4294967295),A.stencilOp(A.KEEP,A.KEEP,A.KEEP),A.clearStencil(0),A.cullFace(A.BACK),A.frontFace(A.CCW),A.polygonOffset(0,0),A.activeTexture(A.TEXTURE0),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindFramebuffer(A.DRAW_FRAMEBUFFER,null),A.bindFramebuffer(A.READ_FRAMEBUFFER,null),A.useProgram(null),A.lineWidth(1),A.scissor(0,0,A.canvas.width,A.canvas.height),A.viewport(0,0,A.canvas.width,A.canvas.height),H={},h=null,x={},R={},O=/*@__PURE__*/new WeakMap,N=[],$=null,L=!1,W=null,Z=null,G=null,X=null,q=null,M=null,F=null,D=new a(0,0,0),_=0,w=!1,k=null,T=null,z=null,j=null,v=null,s.set(0,0,A.canvas.width,A.canvas.height),i.set(0,0,A.canvas.width,A.canvas.height),C.reset(),K.reset(),J.reset()}return{buffers:{color:C,depth:K,stencil:J},enable:c,disable:o,bindFramebuffer:e,drawBuffers:BA,useProgram:EA,setBlending:NA,setMaterial:YA,setFlipSided:FA,setCullFace:ZA,setLineWidth:jA,setPolygonOffset:wA,setScissorTest:VA,activeTexture:d,bindTexture:u,unbindTexture:QA,compressedTexImage2D:t,compressedTexImage3D:KA,texImage2D:_A,texImage3D:B0,updateUBOMapping:pA,uniformBlockBinding:iA,texStorage2D:qA,texStorage3D:LA,texSubImage2D:HA,texSubImage3D:fA,compressedTexSubImage2D:zA,compressedTexSubImage3D:yA,scissor:cA,viewport:uA,reset:$0}}function fM(A,Q,E,B,I,C,K){let J=Q.has("WEBGL_multisampled_render_to_texture")?Q.get("WEBGL_multisampled_render_to_texture"):null,U=typeof navigator==="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),Y=new AA,H=/*@__PURE__*/new WeakMap,R,O=/*@__PURE__*/new WeakMap,N=!1;try{N=typeof OffscreenCanvas!=="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(d){}function $(d,u){return N?new OffscreenCanvas(d,u):S8("canvas")}function L(d,u,QA){let t=1,KA=VA(d);if(KA.width>QA||KA.height>QA)t=QA/Math.max(KA.width,KA.height);if(t<1)if(typeof HTMLImageElement!=="undefined"&&d instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&d instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&d instanceof ImageBitmap||typeof VideoFrame!=="undefined"&&d instanceof VideoFrame){let HA=Math.floor(t*KA.width),fA=Math.floor(t*KA.height);if(R===void 0)R=$(HA,fA);let zA=u?$(HA,fA):R;return zA.width=HA,zA.height=fA,zA.getContext("2d").drawImage(d,0,0,HA,fA),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+KA.width+"x"+KA.height+") to ("+HA+"x"+fA+")."),zA}else{if("data"in d)console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+KA.width+"x"+KA.height+").");return d}return d}function W(d){return d.generateMipmaps}function Z(d){A.generateMipmap(d)}function G(d){if(d.isWebGLCubeRenderTarget)return A.TEXTURE_CUBE_MAP;if(d.isWebGL3DRenderTarget)return A.TEXTURE_3D;if(d.isWebGLArrayRenderTarget||d.isCompressedArrayTexture)return A.TEXTURE_2D_ARRAY;return A.TEXTURE_2D}function X(d,u,QA,t,KA=!1){if(d!==null){if(A[d]!==void 0)return A[d];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+d+"'")}let HA=u;if(u===A.RED){if(QA===A.FLOAT)HA=A.R32F;if(QA===A.HALF_FLOAT)HA=A.R16F;if(QA===A.UNSIGNED_BYTE)HA=A.R8}if(u===A.RED_INTEGER){if(QA===A.UNSIGNED_BYTE)HA=A.R8UI;if(QA===A.UNSIGNED_SHORT)HA=A.R16UI;if(QA===A.UNSIGNED_INT)HA=A.R32UI;if(QA===A.BYTE)HA=A.R8I;if(QA===A.SHORT)HA=A.R16I;if(QA===A.INT)HA=A.R32I}if(u===A.RG){if(QA===A.FLOAT)HA=A.RG32F;if(QA===A.HALF_FLOAT)HA=A.RG16F;if(QA===A.UNSIGNED_BYTE)HA=A.RG8}if(u===A.RG_INTEGER){if(QA===A.UNSIGNED_BYTE)HA=A.RG8UI;if(QA===A.UNSIGNED_SHORT)HA=A.RG16UI;if(QA===A.UNSIGNED_INT)HA=A.RG32UI;if(QA===A.BYTE)HA=A.RG8I;if(QA===A.SHORT)HA=A.RG16I;if(QA===A.INT)HA=A.RG32I}if(u===A.RGB_INTEGER){if(QA===A.UNSIGNED_BYTE)HA=A.RGB8UI;if(QA===A.UNSIGNED_SHORT)HA=A.RGB16UI;if(QA===A.UNSIGNED_INT)HA=A.RGB32UI;if(QA===A.BYTE)HA=A.RGB8I;if(QA===A.SHORT)HA=A.RGB16I;if(QA===A.INT)HA=A.RGB32I}if(u===A.RGBA_INTEGER){if(QA===A.UNSIGNED_BYTE)HA=A.RGBA8UI;if(QA===A.UNSIGNED_SHORT)HA=A.RGBA16UI;if(QA===A.UNSIGNED_INT)HA=A.RGBA32UI;if(QA===A.BYTE)HA=A.RGBA8I;if(QA===A.SHORT)HA=A.RGBA16I;if(QA===A.INT)HA=A.RGBA32I}if(u===A.RGB){if(QA===A.UNSIGNED_INT_5_9_9_9_REV)HA=A.RGB9_E5}if(u===A.RGBA){let fA=KA?LC:O0.getTransfer(t);if(QA===A.FLOAT)HA=A.RGBA32F;if(QA===A.HALF_FLOAT)HA=A.RGBA16F;if(QA===A.UNSIGNED_BYTE)HA=fA===IQ?A.SRGB8_ALPHA8:A.RGBA8;if(QA===A.UNSIGNED_SHORT_4_4_4_4)HA=A.RGBA4;if(QA===A.UNSIGNED_SHORT_5_5_5_1)HA=A.RGB5_A1}if(HA===A.R16F||HA===A.R32F||HA===A.RG16F||HA===A.RG32F||HA===A.RGBA16F||HA===A.RGBA32F)Q.get("EXT_color_buffer_float");return HA}function q(d,u){let QA;if(d){if(u===null||u===$1||u===VE)QA=A.DEPTH24_STENCIL8;else if(u===m0)QA=A.DEPTH32F_STENCIL8;else if(u===hB)QA=A.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")}else if(u===null||u===$1||u===VE)QA=A.DEPTH_COMPONENT24;else if(u===m0)QA=A.DEPTH_COMPONENT32F;else if(u===hB)QA=A.DEPTH_COMPONENT16;return QA}function M(d,u){if(W(d)===!0||d.isFramebufferTexture&&d.minFilter!==Z0&&d.minFilter!==L0)return Math.log2(Math.max(u.width,u.height))+1;else if(d.mipmaps!==void 0&&d.mipmaps.length>0)return d.mipmaps.length;else if(d.isCompressedTexture&&Array.isArray(d.image))return u.mipmaps.length;else return 1}function F(d){let u=d.target;if(u.removeEventListener("dispose",F),_(u),u.isVideoTexture)H.delete(u)}function D(d){let u=d.target;u.removeEventListener("dispose",D),k(u)}function _(d){let u=B.get(d);if(u.__webglInit===void 0)return;let QA=d.source,t=O.get(QA);if(t){let KA=t[u.__cacheKey];if(KA.usedTimes--,KA.usedTimes===0)w(d);if(Object.keys(t).length===0)O.delete(QA)}B.remove(d)}function w(d){let u=B.get(d);A.deleteTexture(u.__webglTexture);let QA=d.source,t=O.get(QA);delete t[u.__cacheKey],K.memory.textures--}function k(d){let u=B.get(d);if(d.depthTexture)d.depthTexture.dispose(),B.remove(d.depthTexture);if(d.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(u.__webglFramebuffer[t]))for(let KA=0;KA<u.__webglFramebuffer[t].length;KA++)A.deleteFramebuffer(u.__webglFramebuffer[t][KA]);else A.deleteFramebuffer(u.__webglFramebuffer[t]);if(u.__webglDepthbuffer)A.deleteRenderbuffer(u.__webglDepthbuffer[t])}else{if(Array.isArray(u.__webglFramebuffer))for(let t=0;t<u.__webglFramebuffer.length;t++)A.deleteFramebuffer(u.__webglFramebuffer[t]);else A.deleteFramebuffer(u.__webglFramebuffer);if(u.__webglDepthbuffer)A.deleteRenderbuffer(u.__webglDepthbuffer);if(u.__webglMultisampledFramebuffer)A.deleteFramebuffer(u.__webglMultisampledFramebuffer);if(u.__webglColorRenderbuffer){for(let t=0;t<u.__webglColorRenderbuffer.length;t++)if(u.__webglColorRenderbuffer[t])A.deleteRenderbuffer(u.__webglColorRenderbuffer[t])}if(u.__webglDepthRenderbuffer)A.deleteRenderbuffer(u.__webglDepthRenderbuffer)}let QA=d.textures;for(let t=0,KA=QA.length;t<KA;t++){let HA=B.get(QA[t]);if(HA.__webglTexture)A.deleteTexture(HA.__webglTexture),K.memory.textures--;B.remove(QA[t])}B.remove(d)}let T=0;function z(){T=0}function j(){let d=T;if(d>=I.maxTextures)console.warn("THREE.WebGLTextures: Trying to use "+d+" texture units while this GPU supports only "+I.maxTextures);return T+=1,d}function v(d){let u=[];return u.push(d.wrapS),u.push(d.wrapT),u.push(d.wrapR||0),u.push(d.magFilter),u.push(d.minFilter),u.push(d.anisotropy),u.push(d.internalFormat),u.push(d.format),u.push(d.type),u.push(d.generateMipmaps),u.push(d.premultiplyAlpha),u.push(d.flipY),u.push(d.unpackAlignment),u.push(d.colorSpace),u.join()}function g(d,u){let QA=B.get(d);if(d.isVideoTexture)jA(d);if(d.isRenderTargetTexture===!1&&d.version>0&&QA.__version!==d.version){let t=d.image;if(t===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(t.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{i(QA,d,u);return}}E.bindTexture(A.TEXTURE_2D,QA.__webglTexture,A.TEXTURE0+u)}function P(d,u){let QA=B.get(d);if(d.version>0&&QA.__version!==d.version){i(QA,d,u);return}E.bindTexture(A.TEXTURE_2D_ARRAY,QA.__webglTexture,A.TEXTURE0+u)}function V(d,u){let QA=B.get(d);if(d.version>0&&QA.__version!==d.version){i(QA,d,u);return}E.bindTexture(A.TEXTURE_3D,QA.__webglTexture,A.TEXTURE0+u)}function S(d,u){let QA=B.get(d);if(d.version>0&&QA.__version!==d.version){n(QA,d,u);return}E.bindTexture(A.TEXTURE_CUBE_MAP,QA.__webglTexture,A.TEXTURE0+u)}let h={[BQ]:A.REPEAT,[JQ]:A.CLAMP_TO_EDGE,[OE]:A.MIRRORED_REPEAT},x={[Z0]:A.NEAREST,[X1]:A.NEAREST_MIPMAP_NEAREST,[vB]:A.NEAREST_MIPMAP_LINEAR,[L0]:A.LINEAR,[AI]:A.LINEAR_MIPMAP_NEAREST,[hQ]:A.LINEAR_MIPMAP_LINEAR},b={[OO]:A.NEVER,[WO]:A.ALWAYS,[HO]:A.LESS,[X9]:A.LEQUAL,[ZO]:A.EQUAL,[GO]:A.GEQUAL,[RO]:A.GREATER,[NO]:A.NOTEQUAL};function m(d,u){if(u.type===m0&&Q.has("OES_texture_float_linear")===!1&&(u.magFilter===L0||u.magFilter===AI||u.magFilter===vB||u.magFilter===hQ||u.minFilter===L0||u.minFilter===AI||u.minFilter===vB||u.minFilter===hQ))console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.");if(A.texParameteri(d,A.TEXTURE_WRAP_S,h[u.wrapS]),A.texParameteri(d,A.TEXTURE_WRAP_T,h[u.wrapT]),d===A.TEXTURE_3D||d===A.TEXTURE_2D_ARRAY)A.texParameteri(d,A.TEXTURE_WRAP_R,h[u.wrapR]);if(A.texParameteri(d,A.TEXTURE_MAG_FILTER,x[u.magFilter]),A.texParameteri(d,A.TEXTURE_MIN_FILTER,x[u.minFilter]),u.compareFunction)A.texParameteri(d,A.TEXTURE_COMPARE_MODE,A.COMPARE_REF_TO_TEXTURE),A.texParameteri(d,A.TEXTURE_COMPARE_FUNC,b[u.compareFunction]);if(Q.has("EXT_texture_filter_anisotropic")===!0){if(u.magFilter===Z0)return;if(u.minFilter!==vB&&u.minFilter!==hQ)return;if(u.type===m0&&Q.has("OES_texture_float_linear")===!1)return;if(u.anisotropy>1||B.get(u).__currentAnisotropy){let QA=Q.get("EXT_texture_filter_anisotropic");A.texParameterf(d,QA.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(u.anisotropy,I.getMaxAnisotropy())),B.get(u).__currentAnisotropy=u.anisotropy}}}function s(d,u){let QA=!1;if(d.__webglInit===void 0)d.__webglInit=!0,u.addEventListener("dispose",F);let t=u.source,KA=O.get(t);if(KA===void 0)KA={},O.set(t,KA);let HA=v(u);if(HA!==d.__cacheKey){if(KA[HA]===void 0)KA[HA]={texture:A.createTexture(),usedTimes:0},K.memory.textures++,QA=!0;KA[HA].usedTimes++;let fA=KA[d.__cacheKey];if(fA!==void 0){if(KA[d.__cacheKey].usedTimes--,fA.usedTimes===0)w(u)}d.__cacheKey=HA,d.__webglTexture=KA[HA].texture}return QA}function i(d,u,QA){let t=A.TEXTURE_2D;if(u.isDataArrayTexture||u.isCompressedArrayTexture)t=A.TEXTURE_2D_ARRAY;if(u.isData3DTexture)t=A.TEXTURE_3D;let KA=s(d,u),HA=u.source;E.bindTexture(t,d.__webglTexture,A.TEXTURE0+QA);let fA=B.get(HA);if(HA.version!==fA.__version||KA===!0){E.activeTexture(A.TEXTURE0+QA);let zA=O0.getPrimaries(O0.workingColorSpace),yA=u.colorSpace===YQ?null:O0.getPrimaries(u.colorSpace),qA=u.colorSpace===YQ||zA===yA?A.NONE:A.BROWSER_DEFAULT_WEBGL;A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,u.flipY),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u.premultiplyAlpha),A.pixelStorei(A.UNPACK_ALIGNMENT,u.unpackAlignment),A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,qA);let LA=L(u.image,!1,I.maxTextureSize);LA=wA(u,LA);let _A=C.convert(u.format,u.colorSpace),B0=C.convert(u.type),cA=X(u.internalFormat,_A,B0,u.colorSpace,u.isVideoTexture);m(t,u);let uA,pA=u.mipmaps,iA=u.isVideoTexture!==!0,$0=fA.__version===void 0||KA===!0,IA=HA.dataReady,TA=M(u,LA);if(u.isDepthTexture){if(cA=q(u.format===oE,u.type),$0)if(iA)E.texStorage2D(A.TEXTURE_2D,1,cA,LA.width,LA.height);else E.texImage2D(A.TEXTURE_2D,0,cA,LA.width,LA.height,0,_A,B0,null)}else if(u.isDataTexture)if(pA.length>0){if(iA&&$0)E.texStorage2D(A.TEXTURE_2D,TA,cA,pA[0].width,pA[0].height);for(let DA=0,kA=pA.length;DA<kA;DA++)if(uA=pA[DA],iA){if(IA)E.texSubImage2D(A.TEXTURE_2D,DA,0,0,uA.width,uA.height,_A,B0,uA.data)}else E.texImage2D(A.TEXTURE_2D,DA,cA,uA.width,uA.height,0,_A,B0,uA.data);u.generateMipmaps=!1}else if(iA){if($0)E.texStorage2D(A.TEXTURE_2D,TA,cA,LA.width,LA.height);if(IA)E.texSubImage2D(A.TEXTURE_2D,0,0,0,LA.width,LA.height,_A,B0,LA.data)}else E.texImage2D(A.TEXTURE_2D,0,cA,LA.width,LA.height,0,_A,B0,LA.data);else if(u.isCompressedTexture)if(u.isCompressedArrayTexture){if(iA&&$0)E.texStorage3D(A.TEXTURE_2D_ARRAY,TA,cA,pA[0].width,pA[0].height,LA.depth);for(let DA=0,kA=pA.length;DA<kA;DA++)if(uA=pA[DA],u.format!==V0)if(_A!==null)if(iA){if(IA)if(u.layerUpdates.size>0){let lA=a9(uA.width,uA.height,u.format,u.type);for(let dA of u.layerUpdates){let F0=uA.data.subarray(dA*lA/uA.data.BYTES_PER_ELEMENT,(dA+1)*lA/uA.data.BYTES_PER_ELEMENT);E.compressedTexSubImage3D(A.TEXTURE_2D_ARRAY,DA,0,0,dA,uA.width,uA.height,1,_A,F0)}u.clearLayerUpdates()}else E.compressedTexSubImage3D(A.TEXTURE_2D_ARRAY,DA,0,0,0,uA.width,uA.height,LA.depth,_A,uA.data)}else E.compressedTexImage3D(A.TEXTURE_2D_ARRAY,DA,cA,uA.width,uA.height,LA.depth,0,uA.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else if(iA){if(IA)E.texSubImage3D(A.TEXTURE_2D_ARRAY,DA,0,0,0,uA.width,uA.height,LA.depth,_A,B0,uA.data)}else E.texImage3D(A.TEXTURE_2D_ARRAY,DA,cA,uA.width,uA.height,LA.depth,0,_A,B0,uA.data)}else{if(iA&&$0)E.texStorage2D(A.TEXTURE_2D,TA,cA,pA[0].width,pA[0].height);for(let DA=0,kA=pA.length;DA<kA;DA++)if(uA=pA[DA],u.format!==V0)if(_A!==null)if(iA){if(IA)E.compressedTexSubImage2D(A.TEXTURE_2D,DA,0,0,uA.width,uA.height,_A,uA.data)}else E.compressedTexImage2D(A.TEXTURE_2D,DA,cA,uA.width,uA.height,0,uA.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else if(iA){if(IA)E.texSubImage2D(A.TEXTURE_2D,DA,0,0,uA.width,uA.height,_A,B0,uA.data)}else E.texImage2D(A.TEXTURE_2D,DA,cA,uA.width,uA.height,0,_A,B0,uA.data)}else if(u.isDataArrayTexture)if(iA){if($0)E.texStorage3D(A.TEXTURE_2D_ARRAY,TA,cA,LA.width,LA.height,LA.depth);if(IA)if(u.layerUpdates.size>0){let DA=a9(LA.width,LA.height,u.format,u.type);for(let kA of u.layerUpdates){let lA=LA.data.subarray(kA*DA/LA.data.BYTES_PER_ELEMENT,(kA+1)*DA/LA.data.BYTES_PER_ELEMENT);E.texSubImage3D(A.TEXTURE_2D_ARRAY,0,0,0,kA,LA.width,LA.height,1,_A,B0,lA)}u.clearLayerUpdates()}else E.texSubImage3D(A.TEXTURE_2D_ARRAY,0,0,0,0,LA.width,LA.height,LA.depth,_A,B0,LA.data)}else E.texImage3D(A.TEXTURE_2D_ARRAY,0,cA,LA.width,LA.height,LA.depth,0,_A,B0,LA.data);else if(u.isData3DTexture)if(iA){if($0)E.texStorage3D(A.TEXTURE_3D,TA,cA,LA.width,LA.height,LA.depth);if(IA)E.texSubImage3D(A.TEXTURE_3D,0,0,0,0,LA.width,LA.height,LA.depth,_A,B0,LA.data)}else E.texImage3D(A.TEXTURE_3D,0,cA,LA.width,LA.height,LA.depth,0,_A,B0,LA.data);else if(u.isFramebufferTexture){if($0)if(iA)E.texStorage2D(A.TEXTURE_2D,TA,cA,LA.width,LA.height);else{let{width:DA,height:kA}=LA;for(let lA=0;lA<TA;lA++)E.texImage2D(A.TEXTURE_2D,lA,cA,DA,kA,0,_A,B0,null),DA>>=1,kA>>=1}}else if(pA.length>0){if(iA&&$0){let DA=VA(pA[0]);E.texStorage2D(A.TEXTURE_2D,TA,cA,DA.width,DA.height)}for(let DA=0,kA=pA.length;DA<kA;DA++)if(uA=pA[DA],iA){if(IA)E.texSubImage2D(A.TEXTURE_2D,DA,0,0,_A,B0,uA)}else E.texImage2D(A.TEXTURE_2D,DA,cA,_A,B0,uA);u.generateMipmaps=!1}else if(iA){if($0){let DA=VA(LA);E.texStorage2D(A.TEXTURE_2D,TA,cA,DA.width,DA.height)}if(IA)E.texSubImage2D(A.TEXTURE_2D,0,0,0,_A,B0,LA)}else E.texImage2D(A.TEXTURE_2D,0,cA,_A,B0,LA);if(W(u))Z(t);if(fA.__version=HA.version,u.onUpdate)u.onUpdate(u)}d.__version=u.version}function n(d,u,QA){if(u.image.length!==6)return;let t=s(d,u),KA=u.source;E.bindTexture(A.TEXTURE_CUBE_MAP,d.__webglTexture,A.TEXTURE0+QA);let HA=B.get(KA);if(KA.version!==HA.__version||t===!0){E.activeTexture(A.TEXTURE0+QA);let fA=O0.getPrimaries(O0.workingColorSpace),zA=u.colorSpace===YQ?null:O0.getPrimaries(u.colorSpace),yA=u.colorSpace===YQ||fA===zA?A.NONE:A.BROWSER_DEFAULT_WEBGL;A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,u.flipY),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u.premultiplyAlpha),A.pixelStorei(A.UNPACK_ALIGNMENT,u.unpackAlignment),A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,yA);let qA=u.isCompressedTexture||u.image[0].isCompressedTexture,LA=u.image[0]&&u.image[0].isDataTexture,_A=[];for(let kA=0;kA<6;kA++){if(!qA&&!LA)_A[kA]=L(u.image[kA],!0,I.maxCubemapSize);else _A[kA]=LA?u.image[kA].image:u.image[kA];_A[kA]=wA(u,_A[kA])}let B0=_A[0],cA=C.convert(u.format,u.colorSpace),uA=C.convert(u.type),pA=X(u.internalFormat,cA,uA,u.colorSpace),iA=u.isVideoTexture!==!0,$0=HA.__version===void 0||t===!0,IA=KA.dataReady,TA=M(u,B0);m(A.TEXTURE_CUBE_MAP,u);let DA;if(qA){if(iA&&$0)E.texStorage2D(A.TEXTURE_CUBE_MAP,TA,pA,B0.width,B0.height);for(let kA=0;kA<6;kA++){DA=_A[kA].mipmaps;for(let lA=0;lA<DA.length;lA++){let dA=DA[lA];if(u.format!==V0)if(cA!==null)if(iA){if(IA)E.compressedTexSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,lA,0,0,dA.width,dA.height,cA,dA.data)}else E.compressedTexImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,lA,pA,dA.width,dA.height,0,dA.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()");else if(iA){if(IA)E.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,lA,0,0,dA.width,dA.height,cA,uA,dA.data)}else E.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,lA,pA,dA.width,dA.height,0,cA,uA,dA.data)}}}else{if(DA=u.mipmaps,iA&&$0){if(DA.length>0)TA++;let kA=VA(_A[0]);E.texStorage2D(A.TEXTURE_CUBE_MAP,TA,pA,kA.width,kA.height)}for(let kA=0;kA<6;kA++)if(LA){if(iA){if(IA)E.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,0,0,0,_A[kA].width,_A[kA].height,cA,uA,_A[kA].data)}else E.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,0,pA,_A[kA].width,_A[kA].height,0,cA,uA,_A[kA].data);for(let lA=0;lA<DA.length;lA++){let F0=DA[lA].image[kA].image;if(iA){if(IA)E.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,lA+1,0,0,F0.width,F0.height,cA,uA,F0.data)}else E.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,lA+1,pA,F0.width,F0.height,0,cA,uA,F0.data)}}else{if(iA){if(IA)E.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,0,0,0,cA,uA,_A[kA])}else E.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,0,pA,cA,uA,_A[kA]);for(let lA=0;lA<DA.length;lA++){let dA=DA[lA];if(iA){if(IA)E.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,lA+1,0,0,cA,uA,dA.image[kA])}else E.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+kA,lA+1,pA,cA,uA,dA.image[kA])}}}if(W(u))Z(A.TEXTURE_CUBE_MAP);if(HA.__version=KA.version,u.onUpdate)u.onUpdate(u)}d.__version=u.version}function l(d,u,QA,t,KA,HA){let fA=C.convert(QA.format,QA.colorSpace),zA=C.convert(QA.type),yA=X(QA.internalFormat,fA,zA,QA.colorSpace),qA=B.get(u),LA=B.get(QA);if(LA.__renderTarget=u,!qA.__hasExternalTextures){let _A=Math.max(1,u.width>>HA),B0=Math.max(1,u.height>>HA);if(KA===A.TEXTURE_3D||KA===A.TEXTURE_2D_ARRAY)E.texImage3D(KA,HA,yA,_A,B0,u.depth,0,fA,zA,null);else E.texImage2D(KA,HA,yA,_A,B0,0,fA,zA,null)}if(E.bindFramebuffer(A.FRAMEBUFFER,d),ZA(u))J.framebufferTexture2DMultisampleEXT(A.FRAMEBUFFER,t,KA,LA.__webglTexture,0,FA(u));else if(KA===A.TEXTURE_2D||KA>=A.TEXTURE_CUBE_MAP_POSITIVE_X&&KA<=A.TEXTURE_CUBE_MAP_NEGATIVE_Z)A.framebufferTexture2D(A.FRAMEBUFFER,t,KA,LA.__webglTexture,HA);E.bindFramebuffer(A.FRAMEBUFFER,null)}function c(d,u,QA){if(A.bindRenderbuffer(A.RENDERBUFFER,d),u.depthBuffer){let t=u.depthTexture,KA=t&&t.isDepthTexture?t.type:null,HA=q(u.stencilBuffer,KA),fA=u.stencilBuffer?A.DEPTH_STENCIL_ATTACHMENT:A.DEPTH_ATTACHMENT,zA=FA(u);if(ZA(u))J.renderbufferStorageMultisampleEXT(A.RENDERBUFFER,zA,HA,u.width,u.height);else if(QA)A.renderbufferStorageMultisample(A.RENDERBUFFER,zA,HA,u.width,u.height);else A.renderbufferStorage(A.RENDERBUFFER,HA,u.width,u.height);A.framebufferRenderbuffer(A.FRAMEBUFFER,fA,A.RENDERBUFFER,d)}else{let t=u.textures;for(let KA=0;KA<t.length;KA++){let HA=t[KA],fA=C.convert(HA.format,HA.colorSpace),zA=C.convert(HA.type),yA=X(HA.internalFormat,fA,zA,HA.colorSpace),qA=FA(u);if(QA&&ZA(u)===!1)A.renderbufferStorageMultisample(A.RENDERBUFFER,qA,yA,u.width,u.height);else if(ZA(u))J.renderbufferStorageMultisampleEXT(A.RENDERBUFFER,qA,yA,u.width,u.height);else A.renderbufferStorage(A.RENDERBUFFER,yA,u.width,u.height)}}A.bindRenderbuffer(A.RENDERBUFFER,null)}function o(d,u){if(u&&u.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(E.bindFramebuffer(A.FRAMEBUFFER,d),!(u.depthTexture&&u.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let t=B.get(u.depthTexture);if(t.__renderTarget=u,!t.__webglTexture||u.depthTexture.image.width!==u.width||u.depthTexture.image.height!==u.height)u.depthTexture.image.width=u.width,u.depthTexture.image.height=u.height,u.depthTexture.needsUpdate=!0;g(u.depthTexture,0);let KA=t.__webglTexture,HA=FA(u);if(u.depthTexture.format===RC)if(ZA(u))J.framebufferTexture2DMultisampleEXT(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,KA,0,HA);else A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,KA,0);else if(u.depthTexture.format===oE)if(ZA(u))J.framebufferTexture2DMultisampleEXT(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.TEXTURE_2D,KA,0,HA);else A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.TEXTURE_2D,KA,0);else throw new Error("Unknown depthTexture format")}function e(d){let u=B.get(d),QA=d.isWebGLCubeRenderTarget===!0;if(u.__boundDepthTexture!==d.depthTexture){let t=d.depthTexture;if(u.__depthDisposeCallback)u.__depthDisposeCallback();if(t){let KA=()=>{delete u.__boundDepthTexture,delete u.__depthDisposeCallback,t.removeEventListener("dispose",KA)};t.addEventListener("dispose",KA),u.__depthDisposeCallback=KA}u.__boundDepthTexture=t}if(d.depthTexture&&!u.__autoAllocateDepthBuffer){if(QA)throw new Error("target.depthTexture not supported in Cube render targets");o(u.__webglFramebuffer,d)}else if(QA){u.__webglDepthbuffer=[];for(let t=0;t<6;t++)if(E.bindFramebuffer(A.FRAMEBUFFER,u.__webglFramebuffer[t]),u.__webglDepthbuffer[t]===void 0)u.__webglDepthbuffer[t]=A.createRenderbuffer(),c(u.__webglDepthbuffer[t],d,!1);else{let KA=d.stencilBuffer?A.DEPTH_STENCIL_ATTACHMENT:A.DEPTH_ATTACHMENT,HA=u.__webglDepthbuffer[t];A.bindRenderbuffer(A.RENDERBUFFER,HA),A.framebufferRenderbuffer(A.FRAMEBUFFER,KA,A.RENDERBUFFER,HA)}}else if(E.bindFramebuffer(A.FRAMEBUFFER,u.__webglFramebuffer),u.__webglDepthbuffer===void 0)u.__webglDepthbuffer=A.createRenderbuffer(),c(u.__webglDepthbuffer,d,!1);else{let t=d.stencilBuffer?A.DEPTH_STENCIL_ATTACHMENT:A.DEPTH_ATTACHMENT,KA=u.__webglDepthbuffer;A.bindRenderbuffer(A.RENDERBUFFER,KA),A.framebufferRenderbuffer(A.FRAMEBUFFER,t,A.RENDERBUFFER,KA)}E.bindFramebuffer(A.FRAMEBUFFER,null)}function BA(d,u,QA){let t=B.get(d);if(u!==void 0)l(t.__webglFramebuffer,d,d.texture,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,0);if(QA!==void 0)e(d)}function EA(d){let u=d.texture,QA=B.get(d),t=B.get(u);d.addEventListener("dispose",D);let KA=d.textures,HA=d.isWebGLCubeRenderTarget===!0,fA=KA.length>1;if(!fA){if(t.__webglTexture===void 0)t.__webglTexture=A.createTexture();t.__version=u.version,K.memory.textures++}if(HA){QA.__webglFramebuffer=[];for(let zA=0;zA<6;zA++)if(u.mipmaps&&u.mipmaps.length>0){QA.__webglFramebuffer[zA]=[];for(let yA=0;yA<u.mipmaps.length;yA++)QA.__webglFramebuffer[zA][yA]=A.createFramebuffer()}else QA.__webglFramebuffer[zA]=A.createFramebuffer()}else{if(u.mipmaps&&u.mipmaps.length>0){QA.__webglFramebuffer=[];for(let zA=0;zA<u.mipmaps.length;zA++)QA.__webglFramebuffer[zA]=A.createFramebuffer()}else QA.__webglFramebuffer=A.createFramebuffer();if(fA)for(let zA=0,yA=KA.length;zA<yA;zA++){let qA=B.get(KA[zA]);if(qA.__webglTexture===void 0)qA.__webglTexture=A.createTexture(),K.memory.textures++}if(d.samples>0&&ZA(d)===!1){QA.__webglMultisampledFramebuffer=A.createFramebuffer(),QA.__webglColorRenderbuffer=[],E.bindFramebuffer(A.FRAMEBUFFER,QA.__webglMultisampledFramebuffer);for(let zA=0;zA<KA.length;zA++){let yA=KA[zA];QA.__webglColorRenderbuffer[zA]=A.createRenderbuffer(),A.bindRenderbuffer(A.RENDERBUFFER,QA.__webglColorRenderbuffer[zA]);let qA=C.convert(yA.format,yA.colorSpace),LA=C.convert(yA.type),_A=X(yA.internalFormat,qA,LA,yA.colorSpace,d.isXRRenderTarget===!0),B0=FA(d);A.renderbufferStorageMultisample(A.RENDERBUFFER,B0,_A,d.width,d.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+zA,A.RENDERBUFFER,QA.__webglColorRenderbuffer[zA])}if(A.bindRenderbuffer(A.RENDERBUFFER,null),d.depthBuffer)QA.__webglDepthRenderbuffer=A.createRenderbuffer(),c(QA.__webglDepthRenderbuffer,d,!0);E.bindFramebuffer(A.FRAMEBUFFER,null)}}if(HA){E.bindTexture(A.TEXTURE_CUBE_MAP,t.__webglTexture),m(A.TEXTURE_CUBE_MAP,u);for(let zA=0;zA<6;zA++)if(u.mipmaps&&u.mipmaps.length>0)for(let yA=0;yA<u.mipmaps.length;yA++)l(QA.__webglFramebuffer[zA][yA],d,u,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+zA,yA);else l(QA.__webglFramebuffer[zA],d,u,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+zA,0);if(W(u))Z(A.TEXTURE_CUBE_MAP);E.unbindTexture()}else if(fA){for(let zA=0,yA=KA.length;zA<yA;zA++){let qA=KA[zA],LA=B.get(qA);if(E.bindTexture(A.TEXTURE_2D,LA.__webglTexture),m(A.TEXTURE_2D,qA),l(QA.__webglFramebuffer,d,qA,A.COLOR_ATTACHMENT0+zA,A.TEXTURE_2D,0),W(qA))Z(A.TEXTURE_2D)}E.unbindTexture()}else{let zA=A.TEXTURE_2D;if(d.isWebGL3DRenderTarget||d.isWebGLArrayRenderTarget)zA=d.isWebGL3DRenderTarget?A.TEXTURE_3D:A.TEXTURE_2D_ARRAY;if(E.bindTexture(zA,t.__webglTexture),m(zA,u),u.mipmaps&&u.mipmaps.length>0)for(let yA=0;yA<u.mipmaps.length;yA++)l(QA.__webglFramebuffer[yA],d,u,A.COLOR_ATTACHMENT0,zA,yA);else l(QA.__webglFramebuffer,d,u,A.COLOR_ATTACHMENT0,zA,0);if(W(u))Z(zA);E.unbindTexture()}if(d.depthBuffer)e(d)}function CA(d){let u=d.textures;for(let QA=0,t=u.length;QA<t;QA++){let KA=u[QA];if(W(KA)){let HA=G(d),fA=B.get(KA).__webglTexture;E.bindTexture(HA,fA),Z(HA),E.unbindTexture()}}}let f=[],NA=[];function YA(d){if(d.samples>0){if(ZA(d)===!1){let{textures:u,width:QA,height:t}=d,KA=A.COLOR_BUFFER_BIT,HA=d.stencilBuffer?A.DEPTH_STENCIL_ATTACHMENT:A.DEPTH_ATTACHMENT,fA=B.get(d),zA=u.length>1;if(zA)for(let yA=0;yA<u.length;yA++)E.bindFramebuffer(A.FRAMEBUFFER,fA.__webglMultisampledFramebuffer),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+yA,A.RENDERBUFFER,null),E.bindFramebuffer(A.FRAMEBUFFER,fA.__webglFramebuffer),A.framebufferTexture2D(A.DRAW_FRAMEBUFFER,A.COLOR_ATTACHMENT0+yA,A.TEXTURE_2D,null,0);E.bindFramebuffer(A.READ_FRAMEBUFFER,fA.__webglMultisampledFramebuffer),E.bindFramebuffer(A.DRAW_FRAMEBUFFER,fA.__webglFramebuffer);for(let yA=0;yA<u.length;yA++){if(d.resolveDepthBuffer){if(d.depthBuffer)KA|=A.DEPTH_BUFFER_BIT;if(d.stencilBuffer&&d.resolveStencilBuffer)KA|=A.STENCIL_BUFFER_BIT}if(zA){A.framebufferRenderbuffer(A.READ_FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.RENDERBUFFER,fA.__webglColorRenderbuffer[yA]);let qA=B.get(u[yA]).__webglTexture;A.framebufferTexture2D(A.DRAW_FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,qA,0)}if(A.blitFramebuffer(0,0,QA,t,0,0,QA,t,KA,A.NEAREST),U===!0){if(f.length=0,NA.length=0,f.push(A.COLOR_ATTACHMENT0+yA),d.depthBuffer&&d.resolveDepthBuffer===!1)f.push(HA),NA.push(HA),A.invalidateFramebuffer(A.DRAW_FRAMEBUFFER,NA);A.invalidateFramebuffer(A.READ_FRAMEBUFFER,f)}}if(E.bindFramebuffer(A.READ_FRAMEBUFFER,null),E.bindFramebuffer(A.DRAW_FRAMEBUFFER,null),zA)for(let yA=0;yA<u.length;yA++){E.bindFramebuffer(A.FRAMEBUFFER,fA.__webglMultisampledFramebuffer),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+yA,A.RENDERBUFFER,fA.__webglColorRenderbuffer[yA]);let qA=B.get(u[yA]).__webglTexture;E.bindFramebuffer(A.FRAMEBUFFER,fA.__webglFramebuffer),A.framebufferTexture2D(A.DRAW_FRAMEBUFFER,A.COLOR_ATTACHMENT0+yA,A.TEXTURE_2D,qA,0)}E.bindFramebuffer(A.DRAW_FRAMEBUFFER,fA.__webglMultisampledFramebuffer)}else if(d.depthBuffer&&d.resolveDepthBuffer===!1&&U){let u=d.stencilBuffer?A.DEPTH_STENCIL_ATTACHMENT:A.DEPTH_ATTACHMENT;A.invalidateFramebuffer(A.DRAW_FRAMEBUFFER,[u])}}}function FA(d){return Math.min(I.maxSamples,d.samples)}function ZA(d){let u=B.get(d);return d.samples>0&&Q.has("WEBGL_multisampled_render_to_texture")===!0&&u.__useRenderToTexture!==!1}function jA(d){let u=K.render.frame;if(H.get(d)!==u)H.set(d,u),d.update()}function wA(d,u){let{colorSpace:QA,format:t,type:KA}=d;if(d.isCompressedTexture===!0||d.isVideoTexture===!0)return u;if(QA!==b0&&QA!==YQ)if(O0.getTransfer(QA)===IQ){if(t!==V0||KA!==x0)console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.")}else console.error("THREE.WebGLTextures: Unsupported texture color space:",QA);return u}function VA(d){if(typeof HTMLImageElement!=="undefined"&&d instanceof HTMLImageElement)Y.width=d.naturalWidth||d.width,Y.height=d.naturalHeight||d.height;else if(typeof VideoFrame!=="undefined"&&d instanceof VideoFrame)Y.width=d.displayWidth,Y.height=d.displayHeight;else Y.width=d.width,Y.height=d.height;return Y}this.allocateTextureUnit=j,this.resetTextureUnits=z,this.setTexture2D=g,this.setTexture2DArray=P,this.setTexture3D=V,this.setTextureCube=S,this.rebindTextures=BA,this.setupRenderTarget=EA,this.updateRenderTargetMipmap=CA,this.updateMultisampleRenderTarget=YA,this.setupDepthRenderbuffer=e,this.setupFrameBufferTexture=l,this.useMultisampledRTT=ZA}function xN(A,Q){function E(B,I=YQ){let C,K=O0.getTransfer(I);if(B===x0)return A.UNSIGNED_BYTE;if(B===tJ)return A.UNSIGNED_SHORT_4_4_4_4;if(B===eJ)return A.UNSIGNED_SHORT_5_5_5_1;if(B===EO)return A.UNSIGNED_INT_5_9_9_9_REV;if(B===AO)return A.BYTE;if(B===QO)return A.SHORT;if(B===hB)return A.UNSIGNED_SHORT;if(B===aJ)return A.INT;if(B===$1)return A.UNSIGNED_INT;if(B===m0)return A.FLOAT;if(B===sA)return A.HALF_FLOAT;if(B===BO)return A.ALPHA;if(B===IO)return A.RGB;if(B===V0)return A.RGBA;if(B===L1)return A.LUMINANCE;if(B===ZC)return A.LUMINANCE_ALPHA;if(B===RC)return A.DEPTH_COMPONENT;if(B===oE)return A.DEPTH_STENCIL;if(B===SQ)return A.RED;if(B===NC)return A.RED_INTEGER;if(B===jE)return A.RG;if(B===GC)return A.RG_INTEGER;if(B===A9)return A.RGBA_INTEGER;if(B===j8||B===q1||B===v8||B===PI)if(K===IQ)if(C=Q.get("WEBGL_compressed_texture_s3tc_srgb"),C!==null){if(B===j8)return C.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(B===q1)return C.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(B===v8)return C.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(B===PI)return C.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(C=Q.get("WEBGL_compressed_texture_s3tc"),C!==null){if(B===j8)return C.COMPRESSED_RGB_S3TC_DXT1_EXT;if(B===q1)return C.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(B===v8)return C.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(B===PI)return C.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(B===F1||B===WC||B===D1||B===XC)if(C=Q.get("WEBGL_compressed_texture_pvrtc"),C!==null){if(B===F1)return C.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(B===WC)return C.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(B===D1)return C.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(B===XC)return C.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(B===M1||B===h8||B===y8)if(C=Q.get("WEBGL_compressed_texture_etc"),C!==null){if(B===M1||B===h8)return K===IQ?C.COMPRESSED_SRGB8_ETC2:C.COMPRESSED_RGB8_ETC2;if(B===y8)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:C.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(B===w1||B===Q9||B===E9||B===B9||B===_1||B===I9||B===C9||B===K9||B===J9||B===U9||B===Y9||B===O9||B===H9||B===Z9)if(C=Q.get("WEBGL_compressed_texture_astc"),C!==null){if(B===w1)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:C.COMPRESSED_RGBA_ASTC_4x4_KHR;if(B===Q9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:C.COMPRESSED_RGBA_ASTC_5x4_KHR;if(B===E9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:C.COMPRESSED_RGBA_ASTC_5x5_KHR;if(B===B9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:C.COMPRESSED_RGBA_ASTC_6x5_KHR;if(B===_1)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:C.COMPRESSED_RGBA_ASTC_6x6_KHR;if(B===I9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:C.COMPRESSED_RGBA_ASTC_8x5_KHR;if(B===C9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:C.COMPRESSED_RGBA_ASTC_8x6_KHR;if(B===K9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:C.COMPRESSED_RGBA_ASTC_8x8_KHR;if(B===J9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:C.COMPRESSED_RGBA_ASTC_10x5_KHR;if(B===U9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:C.COMPRESSED_RGBA_ASTC_10x6_KHR;if(B===Y9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:C.COMPRESSED_RGBA_ASTC_10x8_KHR;if(B===O9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:C.COMPRESSED_RGBA_ASTC_10x10_KHR;if(B===H9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:C.COMPRESSED_RGBA_ASTC_12x10_KHR;if(B===Z9)return K===IQ?C.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:C.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(B===k1||B===$C||B===S1)if(C=Q.get("EXT_texture_compression_bptc"),C!==null){if(B===k1)return K===IQ?C.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:C.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(B===$C)return C.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(B===S1)return C.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(B===CO||B===R9||B===N9||B===G9)if(C=Q.get("EXT_texture_compression_rgtc"),C!==null){if(B===k1)return C.COMPRESSED_RED_RGTC1_EXT;if(B===R9)return C.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(B===N9)return C.COMPRESSED_RED_GREEN_RGTC2_EXT;if(B===G9)return C.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;if(B===VE)return A.UNSIGNED_INT_24_8;return A[B]!==void 0?A[B]:null}return{convert:E}}var uM=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,pM=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class bN{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(A,Q,E){if(this.texture===null){let B=new EQ,I=A.properties.get(B);if(I.__webglTexture=Q.texture,Q.depthNear!==E.depthNear||Q.depthFar!==E.depthFar)this.depthNear=Q.depthNear,this.depthFar=Q.depthFar;this.texture=B}}getMesh(A){if(this.texture!==null){if(this.mesh===null){let Q=A.cameras[0].viewport,E=new bA({vertexShader:uM,fragmentShader:pM,uniforms:{depthColor:{value:this.texture},depthWidth:{value:Q.z},depthHeight:{value:Q.w}}});this.mesh=new xA(new dQ(20,20),E)}}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class fN extends rE{constructor(A,Q){super();let E=this,B=null,I=1,C=null,K="local-floor",J=1,U=null,Y=null,H=null,R=null,O=null,N=null,$=new bN,L=Q.getContextAttributes(),W=null,Z=null,G=[],X=[],q=new AA,M=null,F=new v0;F.viewport=new MA;let D=new v0;D.viewport=new MA;let _=[F,D],w=new c9,k=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(s){let i=G[s];if(i===void 0)i=new m8,G[s]=i;return i.getTargetRaySpace()},this.getControllerGrip=function(s){let i=G[s];if(i===void 0)i=new m8,G[s]=i;return i.getGripSpace()},this.getHand=function(s){let i=G[s];if(i===void 0)i=new m8,G[s]=i;return i.getHandSpace()};function z(s){let i=X.indexOf(s.inputSource);if(i===-1)return;let n=G[i];if(n!==void 0)n.update(s.inputSource,s.frame,U||C),n.dispatchEvent({type:s.type,data:s.inputSource})}function j(){B.removeEventListener("select",z),B.removeEventListener("selectstart",z),B.removeEventListener("selectend",z),B.removeEventListener("squeeze",z),B.removeEventListener("squeezestart",z),B.removeEventListener("squeezeend",z),B.removeEventListener("end",j),B.removeEventListener("inputsourceschange",v);for(let s=0;s<G.length;s++){let i=X[s];if(i===null)continue;X[s]=null,G[s].disconnect(i)}k=null,T=null,$.reset(),A.setRenderTarget(W),O=null,R=null,H=null,B=null,Z=null,m.stop(),E.isPresenting=!1,A.setPixelRatio(M),A.setSize(q.width,q.height,!1),E.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(s){if(I=s,E.isPresenting===!0)console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(s){if(K=s,E.isPresenting===!0)console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return U||C},this.setReferenceSpace=function(s){U=s},this.getBaseLayer=function(){return R!==null?R:O},this.getBinding=function(){return H},this.getFrame=function(){return N},this.getSession=function(){return B},this.setSession=async function(s){if(B=s,B!==null){if(W=A.getRenderTarget(),B.addEventListener("select",z),B.addEventListener("selectstart",z),B.addEventListener("selectend",z),B.addEventListener("squeeze",z),B.addEventListener("squeezestart",z),B.addEventListener("squeezeend",z),B.addEventListener("end",j),B.addEventListener("inputsourceschange",v),L.xrCompatible!==!0)await Q.makeXRCompatible();if(M=A.getPixelRatio(),A.getSize(q),!(typeof XRWebGLBinding!=="undefined"&&("createProjectionLayer"in XRWebGLBinding.prototype))){let n={antialias:L.antialias,alpha:!0,depth:L.depth,stencil:L.stencil,framebufferScaleFactor:I};O=new XRWebGLLayer(B,Q,n),B.updateRenderState({baseLayer:O}),A.setPixelRatio(1),A.setSize(O.framebufferWidth,O.framebufferHeight,!1),Z=new Q0(O.framebufferWidth,O.framebufferHeight,{format:V0,type:x0,colorSpace:A.outputColorSpace,stencilBuffer:L.stencil})}else{let n=null,l=null,c=null;if(L.depth)c=L.stencil?Q.DEPTH24_STENCIL8:Q.DEPTH_COMPONENT24,n=L.stencil?oE:RC,l=L.stencil?VE:$1;let o={colorFormat:Q.RGBA8,depthFormat:c,scaleFactor:I};H=new XRWebGLBinding(B,Q),R=H.createProjectionLayer(o),B.updateRenderState({layers:[R]}),A.setPixelRatio(1),A.setSize(R.textureWidth,R.textureHeight,!1),Z=new Q0(R.textureWidth,R.textureHeight,{format:V0,type:x0,depthTexture:new IE(R.textureWidth,R.textureHeight,l,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:L.stencil,colorSpace:A.outputColorSpace,samples:L.antialias?4:0,resolveDepthBuffer:R.ignoreDepthValues===!1})}Z.isXRRenderTarget=!0,this.setFoveation(J),U=null,C=await B.requestReferenceSpace(K),m.setContext(B),m.start(),E.isPresenting=!0,E.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(B!==null)return B.environmentBlendMode},this.getDepthTexture=function(){return $.getDepthTexture()};function v(s){for(let i=0;i<s.removed.length;i++){let n=s.removed[i],l=X.indexOf(n);if(l>=0)X[l]=null,G[l].disconnect(n)}for(let i=0;i<s.added.length;i++){let n=s.added[i],l=X.indexOf(n);if(l===-1){for(let o=0;o<G.length;o++)if(o>=X.length){X.push(n),l=o;break}else if(X[o]===null){X[o]=n,l=o;break}if(l===-1)break}let c=G[l];if(c)c.connect(n)}}let g=new y,P=new y;function V(s,i,n){g.setFromMatrixPosition(i.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);let l=g.distanceTo(P),c=i.projectionMatrix.elements,o=n.projectionMatrix.elements,e=c[14]/(c[10]-1),BA=c[14]/(c[10]+1),EA=(c[9]+1)/c[5],CA=(c[9]-1)/c[5],f=(c[8]-1)/c[0],NA=(o[8]+1)/o[0],YA=e*f,FA=e*NA,ZA=l/(-f+NA),jA=ZA*-f;if(i.matrixWorld.decompose(s.position,s.quaternion,s.scale),s.translateX(jA),s.translateZ(ZA),s.matrixWorld.compose(s.position,s.quaternion,s.scale),s.matrixWorldInverse.copy(s.matrixWorld).invert(),c[10]===-1)s.projectionMatrix.copy(i.projectionMatrix),s.projectionMatrixInverse.copy(i.projectionMatrixInverse);else{let wA=e+ZA,VA=BA+ZA,d=YA-jA,u=FA+(l-jA),QA=EA*BA/VA*wA,t=CA*BA/VA*wA;s.projectionMatrix.makePerspective(d,u,QA,t,wA,VA),s.projectionMatrixInverse.copy(s.projectionMatrix).invert()}}function S(s,i){if(i===null)s.matrixWorld.copy(s.matrix);else s.matrixWorld.multiplyMatrices(i.matrixWorld,s.matrix);s.matrixWorldInverse.copy(s.matrixWorld).invert()}this.updateCamera=function(s){if(B===null)return;let{near:i,far:n}=s;if($.texture!==null){if($.depthNear>0)i=$.depthNear;if($.depthFar>0)n=$.depthFar}if(w.near=D.near=F.near=i,w.far=D.far=F.far=n,k!==w.near||T!==w.far)B.updateRenderState({depthNear:w.near,depthFar:w.far}),k=w.near,T=w.far;F.layers.mask=s.layers.mask|2,D.layers.mask=s.layers.mask|4,w.layers.mask=F.layers.mask|D.layers.mask;let l=s.parent,c=w.cameras;S(w,l);for(let o=0;o<c.length;o++)S(c[o],l);if(c.length===2)V(w,F,D);else w.projectionMatrix.copy(F.projectionMatrix);h(s,w,l)};function h(s,i,n){if(n===null)s.matrix.copy(i.matrixWorld);else s.matrix.copy(n.matrixWorld),s.matrix.invert(),s.matrix.multiply(i.matrixWorld);if(s.matrix.decompose(s.position,s.quaternion,s.scale),s.updateMatrixWorld(!0),s.projectionMatrix.copy(i.projectionMatrix),s.projectionMatrixInverse.copy(i.projectionMatrixInverse),s.isPerspectiveCamera)s.fov=H1*2*Math.atan(1/s.projectionMatrix.elements[5]),s.zoom=1}this.getCamera=function(){return w},this.getFoveation=function(){if(R===null&&O===null)return;return J},this.setFoveation=function(s){if(J=s,R!==null)R.fixedFoveation=s;if(O!==null&&O.fixedFoveation!==void 0)O.fixedFoveation=s},this.hasDepthSensing=function(){return $.texture!==null},this.getDepthSensingMesh=function(){return $.getMesh(w)};let x=null;function b(s,i){if(Y=i.getViewerPose(U||C),N=i,Y!==null){let n=Y.views;if(O!==null)A.setRenderTargetFramebuffer(Z,O.framebuffer),A.setRenderTarget(Z);let l=!1;if(n.length!==w.cameras.length)w.cameras.length=0,l=!0;for(let e=0;e<n.length;e++){let BA=n[e],EA=null;if(O!==null)EA=O.getViewport(BA);else{let f=H.getViewSubImage(R,BA);if(EA=f.viewport,e===0)A.setRenderTargetTextures(Z,f.colorTexture,R.ignoreDepthValues?void 0:f.depthStencilTexture),A.setRenderTarget(Z)}let CA=_[e];if(CA===void 0)CA=new v0,CA.layers.enable(e),CA.viewport=new MA,_[e]=CA;if(CA.matrix.fromArray(BA.transform.matrix),CA.matrix.decompose(CA.position,CA.quaternion,CA.scale),CA.projectionMatrix.fromArray(BA.projectionMatrix),CA.projectionMatrixInverse.copy(CA.projectionMatrix).invert(),CA.viewport.set(EA.x,EA.y,EA.width,EA.height),e===0)w.matrix.copy(CA.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale);if(l===!0)w.cameras.push(CA)}let c=B.enabledFeatures;if(c&&c.includes("depth-sensing")&&B.depthUsage=="gpu-optimized"&&H){let e=H.getDepthInformation(n[0]);if(e&&e.isValid&&e.texture)$.init(A,e,B.renderState)}}for(let n=0;n<G.length;n++){let l=X[n],c=G[n];if(l!==null&&c!==void 0)c.update(l,i,U||C)}if(x)x(s,i);if(i.detectedPlanes)E.dispatchEvent({type:"planesdetected",data:i});N=null}let m=new SN;m.setAnimationLoop(b),this.setAnimationLoop=function(s){x=s},this.dispose=function(){}}}var u1=/*@__PURE__*/new DQ,mM=/*@__PURE__*/new RA;function cM(A,Q){function E(W,Z){if(W.matrixAutoUpdate===!0)W.updateMatrix();Z.value.copy(W.matrix)}function B(W,Z){if(Z.color.getRGB(W.fogColor.value,_O(A)),Z.isFog)W.fogNear.value=Z.near,W.fogFar.value=Z.far;else if(Z.isFogExp2)W.fogDensity.value=Z.density}function I(W,Z,G,X,q){if(Z.isMeshBasicMaterial)C(W,Z);else if(Z.isMeshLambertMaterial)C(W,Z);else if(Z.isMeshToonMaterial)C(W,Z),R(W,Z);else if(Z.isMeshPhongMaterial)C(W,Z),H(W,Z);else if(Z.isMeshStandardMaterial){if(C(W,Z),O(W,Z),Z.isMeshPhysicalMaterial)N(W,Z,q)}else if(Z.isMeshMatcapMaterial)C(W,Z),$(W,Z);else if(Z.isMeshDepthMaterial)C(W,Z);else if(Z.isMeshDistanceMaterial)C(W,Z),L(W,Z);else if(Z.isMeshNormalMaterial)C(W,Z);else if(Z.isLineBasicMaterial){if(K(W,Z),Z.isLineDashedMaterial)J(W,Z)}else if(Z.isPointsMaterial)U(W,Z,G,X);else if(Z.isSpriteMaterial)Y(W,Z);else if(Z.isShadowMaterial)W.color.value.copy(Z.color),W.opacity.value=Z.opacity;else if(Z.isShaderMaterial)Z.uniformsNeedUpdate=!1}function C(W,Z){if(W.opacity.value=Z.opacity,Z.color)W.diffuse.value.copy(Z.color);if(Z.emissive)W.emissive.value.copy(Z.emissive).multiplyScalar(Z.emissiveIntensity);if(Z.map)W.map.value=Z.map,E(Z.map,W.mapTransform);if(Z.alphaMap)W.alphaMap.value=Z.alphaMap,E(Z.alphaMap,W.alphaMapTransform);if(Z.bumpMap){if(W.bumpMap.value=Z.bumpMap,E(Z.bumpMap,W.bumpMapTransform),W.bumpScale.value=Z.bumpScale,Z.side===ZQ)W.bumpScale.value*=-1}if(Z.normalMap){if(W.normalMap.value=Z.normalMap,E(Z.normalMap,W.normalMapTransform),W.normalScale.value.copy(Z.normalScale),Z.side===ZQ)W.normalScale.value.negate()}if(Z.displacementMap)W.displacementMap.value=Z.displacementMap,E(Z.displacementMap,W.displacementMapTransform),W.displacementScale.value=Z.displacementScale,W.displacementBias.value=Z.displacementBias;if(Z.emissiveMap)W.emissiveMap.value=Z.emissiveMap,E(Z.emissiveMap,W.emissiveMapTransform);if(Z.specularMap)W.specularMap.value=Z.specularMap,E(Z.specularMap,W.specularMapTransform);if(Z.alphaTest>0)W.alphaTest.value=Z.alphaTest;let G=Q.get(Z),X=G.envMap,q=G.envMapRotation;if(X){if(W.envMap.value=X,u1.copy(q),u1.x*=-1,u1.y*=-1,u1.z*=-1,X.isCubeTexture&&X.isRenderTargetTexture===!1)u1.y*=-1,u1.z*=-1;W.envMapRotation.value.setFromMatrix4(mM.makeRotationFromEuler(u1)),W.flipEnvMap.value=X.isCubeTexture&&X.isRenderTargetTexture===!1?-1:1,W.reflectivity.value=Z.reflectivity,W.ior.value=Z.ior,W.refractionRatio.value=Z.refractionRatio}if(Z.lightMap)W.lightMap.value=Z.lightMap,W.lightMapIntensity.value=Z.lightMapIntensity,E(Z.lightMap,W.lightMapTransform);if(Z.aoMap)W.aoMap.value=Z.aoMap,W.aoMapIntensity.value=Z.aoMapIntensity,E(Z.aoMap,W.aoMapTransform)}function K(W,Z){if(W.diffuse.value.copy(Z.color),W.opacity.value=Z.opacity,Z.map)W.map.value=Z.map,E(Z.map,W.mapTransform)}function J(W,Z){W.dashSize.value=Z.dashSize,W.totalSize.value=Z.dashSize+Z.gapSize,W.scale.value=Z.scale}function U(W,Z,G,X){if(W.diffuse.value.copy(Z.color),W.opacity.value=Z.opacity,W.size.value=Z.size*G,W.scale.value=X*0.5,Z.map)W.map.value=Z.map,E(Z.map,W.uvTransform);if(Z.alphaMap)W.alphaMap.value=Z.alphaMap,E(Z.alphaMap,W.alphaMapTransform);if(Z.alphaTest>0)W.alphaTest.value=Z.alphaTest}function Y(W,Z){if(W.diffuse.value.copy(Z.color),W.opacity.value=Z.opacity,W.rotation.value=Z.rotation,Z.map)W.map.value=Z.map,E(Z.map,W.mapTransform);if(Z.alphaMap)W.alphaMap.value=Z.alphaMap,E(Z.alphaMap,W.alphaMapTransform);if(Z.alphaTest>0)W.alphaTest.value=Z.alphaTest}function H(W,Z){W.specular.value.copy(Z.specular),W.shininess.value=Math.max(Z.shininess,0.0001)}function R(W,Z){if(Z.gradientMap)W.gradientMap.value=Z.gradientMap}function O(W,Z){if(W.metalness.value=Z.metalness,Z.metalnessMap)W.metalnessMap.value=Z.metalnessMap,E(Z.metalnessMap,W.metalnessMapTransform);if(W.roughness.value=Z.roughness,Z.roughnessMap)W.roughnessMap.value=Z.roughnessMap,E(Z.roughnessMap,W.roughnessMapTransform);if(Z.envMap)W.envMapIntensity.value=Z.envMapIntensity}function N(W,Z,G){if(W.ior.value=Z.ior,Z.sheen>0){if(W.sheenColor.value.copy(Z.sheenColor).multiplyScalar(Z.sheen),W.sheenRoughness.value=Z.sheenRoughness,Z.sheenColorMap)W.sheenColorMap.value=Z.sheenColorMap,E(Z.sheenColorMap,W.sheenColorMapTransform);if(Z.sheenRoughnessMap)W.sheenRoughnessMap.value=Z.sheenRoughnessMap,E(Z.sheenRoughnessMap,W.sheenRoughnessMapTransform)}if(Z.clearcoat>0){if(W.clearcoat.value=Z.clearcoat,W.clearcoatRoughness.value=Z.clearcoatRoughness,Z.clearcoatMap)W.clearcoatMap.value=Z.clearcoatMap,E(Z.clearcoatMap,W.clearcoatMapTransform);if(Z.clearcoatRoughnessMap)W.clearcoatRoughnessMap.value=Z.clearcoatRoughnessMap,E(Z.clearcoatRoughnessMap,W.clearcoatRoughnessMapTransform);if(Z.clearcoatNormalMap){if(W.clearcoatNormalMap.value=Z.clearcoatNormalMap,E(Z.clearcoatNormalMap,W.clearcoatNormalMapTransform),W.clearcoatNormalScale.value.copy(Z.clearcoatNormalScale),Z.side===ZQ)W.clearcoatNormalScale.value.negate()}}if(Z.dispersion>0)W.dispersion.value=Z.dispersion;if(Z.iridescence>0){if(W.iridescence.value=Z.iridescence,W.iridescenceIOR.value=Z.iridescenceIOR,W.iridescenceThicknessMinimum.value=Z.iridescenceThicknessRange[0],W.iridescenceThicknessMaximum.value=Z.iridescenceThicknessRange[1],Z.iridescenceMap)W.iridescenceMap.value=Z.iridescenceMap,E(Z.iridescenceMap,W.iridescenceMapTransform);if(Z.iridescenceThicknessMap)W.iridescenceThicknessMap.value=Z.iridescenceThicknessMap,E(Z.iridescenceThicknessMap,W.iridescenceThicknessMapTransform)}if(Z.transmission>0){if(W.transmission.value=Z.transmission,W.transmissionSamplerMap.value=G.texture,W.transmissionSamplerSize.value.set(G.width,G.height),Z.transmissionMap)W.transmissionMap.value=Z.transmissionMap,E(Z.transmissionMap,W.transmissionMapTransform);if(W.thickness.value=Z.thickness,Z.thicknessMap)W.thicknessMap.value=Z.thicknessMap,E(Z.thicknessMap,W.thicknessMapTransform);W.attenuationDistance.value=Z.attenuationDistance,W.attenuationColor.value.copy(Z.attenuationColor)}if(Z.anisotropy>0){if(W.anisotropyVector.value.set(Z.anisotropy*Math.cos(Z.anisotropyRotation),Z.anisotropy*Math.sin(Z.anisotropyRotation)),Z.anisotropyMap)W.anisotropyMap.value=Z.anisotropyMap,E(Z.anisotropyMap,W.anisotropyMapTransform)}if(W.specularIntensity.value=Z.specularIntensity,W.specularColor.value.copy(Z.specularColor),Z.specularColorMap)W.specularColorMap.value=Z.specularColorMap,E(Z.specularColorMap,W.specularColorMapTransform);if(Z.specularIntensityMap)W.specularIntensityMap.value=Z.specularIntensityMap,E(Z.specularIntensityMap,W.specularIntensityMapTransform)}function $(W,Z){if(Z.matcap)W.matcap.value=Z.matcap}function L(W,Z){let G=Q.get(Z).light;W.referencePosition.value.setFromMatrixPosition(G.matrixWorld),W.nearDistance.value=G.shadow.camera.near,W.farDistance.value=G.shadow.camera.far}return{refreshFogUniforms:B,refreshMaterialUniforms:I}}function lM(A,Q,E,B){let I={},C={},K=[],J=A.getParameter(A.MAX_UNIFORM_BUFFER_BINDINGS);function U(G,X){let q=X.program;B.uniformBlockBinding(G,q)}function Y(G,X){let q=I[G.id];if(q===void 0)$(G),q=H(G),I[G.id]=q,G.addEventListener("dispose",W);let M=X.program;B.updateUBOMapping(G,M);let F=Q.render.frame;if(C[G.id]!==F)O(G),C[G.id]=F}function H(G){let X=R();G.__bindingPointIndex=X;let q=A.createBuffer(),M=G.__size,F=G.usage;return A.bindBuffer(A.UNIFORM_BUFFER,q),A.bufferData(A.UNIFORM_BUFFER,M,F),A.bindBuffer(A.UNIFORM_BUFFER,null),A.bindBufferBase(A.UNIFORM_BUFFER,X,q),q}function R(){for(let G=0;G<J;G++)if(K.indexOf(G)===-1)return K.push(G),G;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function O(G){let X=I[G.id],q=G.uniforms,M=G.__cache;A.bindBuffer(A.UNIFORM_BUFFER,X);for(let F=0,D=q.length;F<D;F++){let _=Array.isArray(q[F])?q[F]:[q[F]];for(let w=0,k=_.length;w<k;w++){let T=_[w];if(N(T,F,w,M)===!0){let z=T.__offset,j=Array.isArray(T.value)?T.value:[T.value],v=0;for(let g=0;g<j.length;g++){let P=j[g],V=L(P);if(typeof P==="number"||typeof P==="boolean")T.__data[0]=P,A.bufferSubData(A.UNIFORM_BUFFER,z+v,T.__data);else if(P.isMatrix3)T.__data[0]=P.elements[0],T.__data[1]=P.elements[1],T.__data[2]=P.elements[2],T.__data[3]=0,T.__data[4]=P.elements[3],T.__data[5]=P.elements[4],T.__data[6]=P.elements[5],T.__data[7]=0,T.__data[8]=P.elements[6],T.__data[9]=P.elements[7],T.__data[10]=P.elements[8],T.__data[11]=0;else P.toArray(T.__data,v),v+=V.storage/Float32Array.BYTES_PER_ELEMENT}A.bufferSubData(A.UNIFORM_BUFFER,z,T.__data)}}}A.bindBuffer(A.UNIFORM_BUFFER,null)}function N(G,X,q,M){let F=G.value,D=X+"_"+q;if(M[D]===void 0){if(typeof F==="number"||typeof F==="boolean")M[D]=F;else M[D]=F.clone();return!0}else{let _=M[D];if(typeof F==="number"||typeof F==="boolean"){if(_!==F)return M[D]=F,!0}else if(_.equals(F)===!1)return _.copy(F),!0}return!1}function $(G){let X=G.uniforms,q=0,M=16;for(let D=0,_=X.length;D<_;D++){let w=Array.isArray(X[D])?X[D]:[X[D]];for(let k=0,T=w.length;k<T;k++){let z=w[k],j=Array.isArray(z.value)?z.value:[z.value];for(let v=0,g=j.length;v<g;v++){let P=j[v],V=L(P),S=q%M,h=S%V.boundary,x=S+h;if(q+=h,x!==0&&M-x<V.storage)q+=M-x;z.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=q,q+=V.storage}}}let F=q%M;if(F>0)q+=M-F;return G.__size=q,G.__cache={},this}function L(G){let X={boundary:0,storage:0};if(typeof G==="number"||typeof G==="boolean")X.boundary=4,X.storage=4;else if(G.isVector2)X.boundary=8,X.storage=8;else if(G.isVector3||G.isColor)X.boundary=16,X.storage=12;else if(G.isVector4)X.boundary=16,X.storage=16;else if(G.isMatrix3)X.boundary=48,X.storage=48;else if(G.isMatrix4)X.boundary=64,X.storage=64;else if(G.isTexture)console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.");else console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",G);return X}function W(G){let X=G.target;X.removeEventListener("dispose",W);let q=K.indexOf(X.__bindingPointIndex);K.splice(q,1),A.deleteBuffer(I[X.id]),delete I[X.id],delete C[X.id]}function Z(){for(let G in I)A.deleteBuffer(I[G]);K=[],I={},C={}}return{bind:U,update:Y,dispose:Z}}class AK{constructor(A={}){let{canvas:Q=LO(),context:E=null,depth:B=!0,stencil:I=!1,alpha:C=!1,antialias:K=!1,premultipliedAlpha:J=!0,preserveDrawingBuffer:U=!1,powerPreference:Y="default",failIfMajorPerformanceCaveat:H=!1,reverseDepthBuffer:R=!1}=A;this.isWebGLRenderer=!0;let O;if(E!==null){if(typeof WebGLRenderingContext!=="undefined"&&E instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");O=E.getContextAttributes().alpha}else O=C;let N=new Uint32Array(4),$=new Int32Array(4),L=null,W=null,Z=[],G=[];this.domElement=Q,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=N0,this.toneMapping=VB,this.toneMappingExposure=1;let X=this,q=!1,M=0,F=0,D=null,_=-1,w=null,k=new MA,T=new MA,z=null,j=new a(0),v=0,g=Q.width,P=Q.height,V=1,S=null,h=null,x=new MA(0,0,g,P),b=new MA(0,0,g,P),m=!1,s=new xB,i=!1,n=!1;this.transmissionResolutionScale=1;let l=new RA,c=new RA,o=new y,e=new MA,BA={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},EA=!1;function CA(){return D===null?V:1}let f=E;function NA(p,JA){return Q.getContext(p,JA)}try{let p={alpha:!0,depth:B,stencil:I,antialias:K,premultipliedAlpha:J,preserveDrawingBuffer:U,powerPreference:Y,failIfMajorPerformanceCaveat:H};if("setAttribute"in Q)Q.setAttribute("data-engine",`three.js r${ZB}`);if(Q.addEventListener("webglcontextlost",DA,!1),Q.addEventListener("webglcontextrestored",kA,!1),Q.addEventListener("webglcontextcreationerror",lA,!1),f===null){if(f=NA("webgl2",p),f===null)if(NA("webgl2"))throw new Error("Error creating WebGL context with your selected attributes.");else throw new Error("Error creating WebGL context.")}}catch(p){throw console.error("THREE.WebGLRenderer: "+p.message),p}let YA,FA,ZA,jA,wA,VA,d,u,QA,t,KA,HA,fA,zA,yA,qA,LA,_A,B0,cA,uA,pA,iA,$0;function IA(){if(YA=new YD(f),YA.init(),pA=new xN(f,YA),FA=new BD(f,YA,A,pA),ZA=new bM(f,YA),FA.reverseDepthBuffer&&R)ZA.buffers.depth.setReversed(!0);jA=new ZD(f),wA=new _M,VA=new fM(f,YA,ZA,wA,FA,pA,jA),d=new CD(X),u=new UD(X),QA=new L5(f),iA=new QD(f,QA),t=new OD(f,QA,jA,iA),KA=new ND(f,t,QA,jA),B0=new RD(f,FA,VA),qA=new ID(wA),HA=new wM(X,d,u,YA,FA,iA,qA),fA=new cM(X,wA),zA=new SM,yA=new vM(YA),_A=new AD(X,d,u,ZA,KA,O,J),LA=new gM(X,KA,FA),$0=new lM(f,jA,FA,ZA),cA=new ED(f,YA,jA),uA=new HD(f,YA,jA),jA.programs=HA.programs,X.capabilities=FA,X.extensions=YA,X.properties=wA,X.renderLists=zA,X.shadowMap=LA,X.state=ZA,X.info=jA}IA();let TA=new fN(X,f);this.xr=TA,this.getContext=function(){return f},this.getContextAttributes=function(){return f.getContextAttributes()},this.forceContextLoss=function(){let p=YA.get("WEBGL_lose_context");if(p)p.loseContext()},this.forceContextRestore=function(){let p=YA.get("WEBGL_lose_context");if(p)p.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(p){if(p===void 0)return;V=p,this.setSize(g,P,!1)},this.getSize=function(p){return p.set(g,P)},this.setSize=function(p,JA,WA=!0){if(TA.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}if(g=p,P=JA,Q.width=Math.floor(p*V),Q.height=Math.floor(JA*V),WA===!0)Q.style.width=p+"px",Q.style.height=JA+"px";this.setViewport(0,0,p,JA)},this.getDrawingBufferSize=function(p){return p.set(g*V,P*V).floor()},this.setDrawingBufferSize=function(p,JA,WA){g=p,P=JA,V=WA,Q.width=Math.floor(p*WA),Q.height=Math.floor(JA*WA),this.setViewport(0,0,p,JA)},this.getCurrentViewport=function(p){return p.copy(k)},this.getViewport=function(p){return p.copy(x)},this.setViewport=function(p,JA,WA,XA){if(p.isVector4)x.set(p.x,p.y,p.z,p.w);else x.set(p,JA,WA,XA);ZA.viewport(k.copy(x).multiplyScalar(V).round())},this.getScissor=function(p){return p.copy(b)},this.setScissor=function(p,JA,WA,XA){if(p.isVector4)b.set(p.x,p.y,p.z,p.w);else b.set(p,JA,WA,XA);ZA.scissor(T.copy(b).multiplyScalar(V).round())},this.getScissorTest=function(){return m},this.setScissorTest=function(p){ZA.setScissorTest(m=p)},this.setOpaqueSort=function(p){S=p},this.setTransparentSort=function(p){h=p},this.getClearColor=function(p){return p.copy(_A.getClearColor())},this.setClearColor=function(){_A.setClearColor.apply(_A,arguments)},this.getClearAlpha=function(){return _A.getClearAlpha()},this.setClearAlpha=function(){_A.setClearAlpha.apply(_A,arguments)},this.clear=function(p=!0,JA=!0,WA=!0){let XA=0;if(p){let UA=!1;if(D!==null){let gA=D.texture.format;UA=gA===A9||gA===GC||gA===NC}if(UA){let gA=D.texture.type,nA=gA===x0||gA===$1||gA===hB||gA===VE||gA===tJ||gA===eJ,rA=_A.getClearColor(),A0=_A.getClearAlpha(),D0=rA.r,M0=rA.g,Y0=rA.b;if(nA)N[0]=D0,N[1]=M0,N[2]=Y0,N[3]=A0,f.clearBufferuiv(f.COLOR,0,N);else $[0]=D0,$[1]=M0,$[2]=Y0,$[3]=A0,f.clearBufferiv(f.COLOR,0,$)}else XA|=f.COLOR_BUFFER_BIT}if(JA)XA|=f.DEPTH_BUFFER_BIT;if(WA)XA|=f.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295);f.clear(XA)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){Q.removeEventListener("webglcontextlost",DA,!1),Q.removeEventListener("webglcontextrestored",kA,!1),Q.removeEventListener("webglcontextcreationerror",lA,!1),_A.dispose(),zA.dispose(),yA.dispose(),wA.dispose(),d.dispose(),u.dispose(),KA.dispose(),iA.dispose(),$0.dispose(),HA.dispose(),TA.dispose(),TA.removeEventListener("sessionstart",cE),TA.removeEventListener("sessionend",CB),lE.stop()};function DA(p){p.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),q=!0}function kA(){console.log("THREE.WebGLRenderer: Context Restored."),q=!1;let p=jA.autoReset,JA=LA.enabled,WA=LA.autoUpdate,XA=LA.needsUpdate,UA=LA.type;IA(),jA.autoReset=p,LA.enabled=JA,LA.autoUpdate=WA,LA.needsUpdate=XA,LA.type=UA}function lA(p){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",p.statusMessage)}function dA(p){let JA=p.target;JA.removeEventListener("dispose",dA),F0(JA)}function F0(p){HQ(p),wA.remove(p)}function HQ(p){let JA=wA.get(p).programs;if(JA!==void 0){if(JA.forEach(function(WA){HA.releaseProgram(WA)}),p.isShaderMaterial)HA.releaseShaderCache(p)}}this.renderBufferDirect=function(p,JA,WA,XA,UA,gA){if(JA===null)JA=BA;let nA=UA.isMesh&&UA.matrixWorld.determinant()<0,rA=q$(p,JA,WA,XA,UA);ZA.setMaterial(XA,nA);let A0=WA.index,D0=1;if(XA.wireframe===!0){if(A0=t.getWireframeAttribute(WA),A0===void 0)return;D0=2}let M0=WA.drawRange,Y0=WA.attributes.position,l0=M0.start*D0,AQ=(M0.start+M0.count)*D0;if(gA!==null)l0=Math.max(l0,gA.start*D0),AQ=Math.min(AQ,(gA.start+gA.count)*D0);if(A0!==null)l0=Math.max(l0,0),AQ=Math.min(AQ,A0.count);else if(Y0!==void 0&&Y0!==null)l0=Math.max(l0,0),AQ=Math.min(AQ,Y0.count);let TQ=AQ-l0;if(TQ<0||TQ===1/0)return;iA.setup(UA,XA,rA,WA,A0);let qQ,n0=cA;if(A0!==null)qQ=QA.get(A0),n0=uA,n0.setIndex(qQ);if(UA.isMesh)if(XA.wireframe===!0)ZA.setLineWidth(XA.wireframeLinewidth*CA()),n0.setMode(f.LINES);else n0.setMode(f.TRIANGLES);else if(UA.isLine){let R0=XA.linewidth;if(R0===void 0)R0=1;if(ZA.setLineWidth(R0*CA()),UA.isLineSegments)n0.setMode(f.LINES);else if(UA.isLineLoop)n0.setMode(f.LINE_LOOP);else n0.setMode(f.LINE_STRIP)}else if(UA.isPoints)n0.setMode(f.POINTS);else if(UA.isSprite)n0.setMode(f.TRIANGLES);if(UA.isBatchedMesh)if(UA._multiDrawInstances!==null)n0.renderMultiDrawInstances(UA._multiDrawStarts,UA._multiDrawCounts,UA._multiDrawCount,UA._multiDrawInstances);else if(!YA.get("WEBGL_multi_draw")){let{_multiDrawStarts:R0,_multiDrawCounts:iQ,_multiDrawCount:QQ}=UA,KB=A0?QA.get(A0).bytesPerElement:1,K8=wA.get(XA).currentProgram.getUniforms();for(let _E=0;_E<QQ;_E++)K8.setValue(f,"_gl_DrawID",_E),n0.render(R0[_E]/KB,iQ[_E])}else n0.renderMultiDraw(UA._multiDrawStarts,UA._multiDrawCounts,UA._multiDrawCount);else if(UA.isInstancedMesh)n0.renderInstances(l0,TQ,UA.count);else if(WA.isInstancedBufferGeometry){let R0=WA._maxInstanceCount!==void 0?WA._maxInstanceCount:1/0,iQ=Math.min(WA.instanceCount,R0);n0.renderInstances(l0,TQ,iQ)}else n0.render(l0,TQ)};function gQ(p,JA,WA){if(p.transparent===!0&&p.side===y0&&p.forceSinglePass===!1)p.side=ZQ,p.needsUpdate=!0,rI(p,JA,WA),p.side=jQ,p.needsUpdate=!0,rI(p,JA,WA),p.side=y0;else rI(p,JA,WA)}this.compile=function(p,JA,WA=null){if(WA===null)WA=p;if(W=yA.get(WA),W.init(JA),G.push(W),WA.traverseVisible(function(UA){if(UA.isLight&&UA.layers.test(JA.layers)){if(W.pushLight(UA),UA.castShadow)W.pushShadow(UA)}}),p!==WA)p.traverseVisible(function(UA){if(UA.isLight&&UA.layers.test(JA.layers)){if(W.pushLight(UA),UA.castShadow)W.pushShadow(UA)}});W.setupLights();let XA=/*@__PURE__*/new Set;return p.traverse(function(UA){if(!(UA.isMesh||UA.isPoints||UA.isLine||UA.isSprite))return;let gA=UA.material;if(gA)if(Array.isArray(gA))for(let nA=0;nA<gA.length;nA++){let rA=gA[nA];gQ(rA,WA,UA),XA.add(rA)}else gQ(gA,WA,UA),XA.add(gA)}),G.pop(),W=null,XA},this.compileAsync=function(p,JA,WA=null){let XA=this.compile(p,JA,WA);return new Promise((UA)=>{function gA(){if(XA.forEach(function(nA){if(wA.get(nA).currentProgram.isReady())XA.delete(nA)}),XA.size===0){UA(p);return}setTimeout(gA,10)}if(YA.get("KHR_parallel_shader_compile")!==null)gA();else setTimeout(gA,10)})};let d0=null;function IB(p){if(d0)d0(p)}function cE(){lE.stop()}function CB(){lE.start()}let lE=new SN;if(lE.setAnimationLoop(IB),typeof self!=="undefined")lE.setContext(self);this.setAnimationLoop=function(p){d0=p,TA.setAnimationLoop(p),p===null?lE.stop():lE.start()},TA.addEventListener("sessionstart",cE),TA.addEventListener("sessionend",CB),this.render=function(p,JA){if(JA!==void 0&&JA.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(q===!0)return;if(p.matrixWorldAutoUpdate===!0)p.updateMatrixWorld();if(JA.parent===null&&JA.matrixWorldAutoUpdate===!0)JA.updateMatrixWorld();if(TA.enabled===!0&&TA.isPresenting===!0){if(TA.cameraAutoUpdate===!0)TA.updateCamera(JA);JA=TA.getCamera()}if(p.isScene===!0)p.onBeforeRender(X,p,JA,D);if(W=yA.get(p,G.length),W.init(JA),G.push(W),c.multiplyMatrices(JA.projectionMatrix,JA.matrixWorldInverse),s.setFromProjectionMatrix(c),n=this.localClippingEnabled,i=qA.init(this.clippingPlanes,n),L=zA.get(p,Z.length),L.init(),Z.push(L),TA.enabled===!0&&TA.isPresenting===!0){let gA=X.xr.getDepthSensingMesh();if(gA!==null)v6(gA,JA,-1/0,X.sortObjects)}if(v6(p,JA,0,X.sortObjects),L.finish(),X.sortObjects===!0)L.sort(S,h);if(EA=TA.enabled===!1||TA.isPresenting===!1||TA.hasDepthSensing()===!1,EA)_A.addToRenderList(L,p);if(this.info.render.frame++,i===!0)qA.beginShadows();let WA=W.state.shadowsArray;if(LA.render(WA,p,JA),i===!0)qA.endShadows();if(this.info.autoReset===!0)this.info.reset();let{opaque:XA,transmissive:UA}=L;if(W.setupLights(),JA.isArrayCamera){let gA=JA.cameras;if(UA.length>0)for(let nA=0,rA=gA.length;nA<rA;nA++){let A0=gA[nA];h6(XA,UA,p,A0)}if(EA)_A.render(p);for(let nA=0,rA=gA.length;nA<rA;nA++){let A0=gA[nA];nK(L,p,A0,A0.viewport)}}else{if(UA.length>0)h6(XA,UA,p,JA);if(EA)_A.render(p);nK(L,p,JA)}if(D!==null&&F===0)VA.updateMultisampleRenderTarget(D),VA.updateRenderTargetMipmap(D);if(p.isScene===!0)p.onAfterRender(X,p,JA);if(iA.resetDefaultState(),_=-1,w=null,G.pop(),G.length>0){if(W=G[G.length-1],i===!0)qA.setGlobalState(X.clippingPlanes,W.state.camera)}else W=null;if(Z.pop(),Z.length>0)L=Z[Z.length-1];else L=null};function v6(p,JA,WA,XA){if(p.visible===!1)return;if(p.layers.test(JA.layers)){if(p.isGroup)WA=p.renderOrder;else if(p.isLOD){if(p.autoUpdate===!0)p.update(JA)}else if(p.isLight){if(W.pushLight(p),p.castShadow)W.pushShadow(p)}else if(p.isSprite){if(!p.frustumCulled||s.intersectsSprite(p)){if(XA)e.setFromMatrixPosition(p.matrixWorld).applyMatrix4(c);let nA=KA.update(p),rA=p.material;if(rA.visible)L.push(p,nA,rA,WA,e.z,null)}}else if(p.isMesh||p.isLine||p.isPoints){if(!p.frustumCulled||s.intersectsObject(p)){let nA=KA.update(p),rA=p.material;if(XA){if(p.boundingSphere!==void 0){if(p.boundingSphere===null)p.computeBoundingSphere();e.copy(p.boundingSphere.center)}else{if(nA.boundingSphere===null)nA.computeBoundingSphere();e.copy(nA.boundingSphere.center)}e.applyMatrix4(p.matrixWorld).applyMatrix4(c)}if(Array.isArray(rA)){let A0=nA.groups;for(let D0=0,M0=A0.length;D0<M0;D0++){let Y0=A0[D0],l0=rA[Y0.materialIndex];if(l0&&l0.visible)L.push(p,nA,l0,WA,e.z,Y0)}}else if(rA.visible)L.push(p,nA,rA,WA,e.z,null)}}}let gA=p.children;for(let nA=0,rA=gA.length;nA<rA;nA++)v6(gA[nA],JA,WA,XA)}function nK(p,JA,WA,XA){let{opaque:UA,transmissive:gA,transparent:nA}=p;if(W.setupLightsView(WA),i===!0)qA.setGlobalState(X.clippingPlanes,WA);if(XA)ZA.viewport(k.copy(XA));if(UA.length>0)oI(UA,JA,WA);if(gA.length>0)oI(gA,JA,WA);if(nA.length>0)oI(nA,JA,WA);ZA.buffers.depth.setTest(!0),ZA.buffers.depth.setMask(!0),ZA.buffers.color.setMask(!0),ZA.setPolygonOffset(!1)}function h6(p,JA,WA,XA){if((WA.isScene===!0?WA.overrideMaterial:null)!==null)return;if(W.state.transmissionRenderTarget[XA.id]===void 0)W.state.transmissionRenderTarget[XA.id]=new Q0(1,1,{generateMipmaps:!0,type:YA.has("EXT_color_buffer_half_float")||YA.has("EXT_color_buffer_float")?sA:x0,minFilter:hQ,samples:4,stencilBuffer:I,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:O0.workingColorSpace});let gA=W.state.transmissionRenderTarget[XA.id],nA=XA.viewport||k;gA.setSize(nA.z*X.transmissionResolutionScale,nA.w*X.transmissionResolutionScale);let rA=X.getRenderTarget();if(X.setRenderTarget(gA),X.getClearColor(j),v=X.getClearAlpha(),v<1)X.setClearColor(16777215,0.5);if(X.clear(),EA)_A.render(WA);let A0=X.toneMapping;X.toneMapping=VB;let D0=XA.viewport;if(XA.viewport!==void 0)XA.viewport=void 0;if(W.setupLightsView(XA),i===!0)qA.setGlobalState(X.clippingPlanes,XA);if(oI(p,WA,XA),VA.updateMultisampleRenderTarget(gA),VA.updateRenderTargetMipmap(gA),YA.has("WEBGL_multisampled_render_to_texture")===!1){let M0=!1;for(let Y0=0,l0=JA.length;Y0<l0;Y0++){let AQ=JA[Y0],TQ=AQ.object,qQ=AQ.geometry,n0=AQ.material,R0=AQ.group;if(n0.side===y0&&TQ.layers.test(XA.layers)){let iQ=n0.side;n0.side=ZQ,n0.needsUpdate=!0,y6(TQ,WA,XA,qQ,n0,R0),n0.side=iQ,n0.needsUpdate=!0,M0=!0}}if(M0===!0)VA.updateMultisampleRenderTarget(gA),VA.updateRenderTargetMipmap(gA)}if(X.setRenderTarget(rA),X.setClearColor(j,v),D0!==void 0)XA.viewport=D0;X.toneMapping=A0}function oI(p,JA,WA){let XA=JA.isScene===!0?JA.overrideMaterial:null;for(let UA=0,gA=p.length;UA<gA;UA++){let nA=p[UA],rA=nA.object,A0=nA.geometry,D0=XA===null?nA.material:XA,M0=nA.group;if(rA.layers.test(WA.layers))y6(rA,JA,WA,A0,D0,M0)}}function y6(p,JA,WA,XA,UA,gA){if(p.onBeforeRender(X,JA,WA,XA,UA,gA),p.modelViewMatrix.multiplyMatrices(WA.matrixWorldInverse,p.matrixWorld),p.normalMatrix.getNormalMatrix(p.modelViewMatrix),UA.onBeforeRender(X,JA,WA,XA,p,gA),UA.transparent===!0&&UA.side===y0&&UA.forceSinglePass===!1)UA.side=ZQ,UA.needsUpdate=!0,X.renderBufferDirect(WA,JA,XA,UA,p,gA),UA.side=jQ,UA.needsUpdate=!0,X.renderBufferDirect(WA,JA,XA,UA,p,gA),UA.side=y0;else X.renderBufferDirect(WA,JA,XA,UA,p,gA);p.onAfterRender(X,JA,WA,XA,UA,gA)}function rI(p,JA,WA){if(JA.isScene!==!0)JA=BA;let XA=wA.get(p),UA=W.state.lights,gA=W.state.shadowsArray,nA=UA.state.version,rA=HA.getParameters(p,UA.state,gA,JA,WA),A0=HA.getProgramCacheKey(rA),D0=XA.programs;if(XA.environment=p.isMeshStandardMaterial?JA.environment:null,XA.fog=JA.fog,XA.envMap=(p.isMeshStandardMaterial?u:d).get(p.envMap||XA.environment),XA.envMapRotation=XA.environment!==null&&p.envMap===null?JA.environmentRotation:p.envMapRotation,D0===void 0)p.addEventListener("dispose",dA),D0=/*@__PURE__*/new Map,XA.programs=D0;let M0=D0.get(A0);if(M0!==void 0){if(XA.currentProgram===M0&&XA.lightsStateVersion===nA)return g7(p,rA),M0}else rA.uniforms=HA.getUniforms(p),p.onBeforeCompile(rA,X),M0=HA.acquireProgram(rA,A0),D0.set(A0,M0),XA.uniforms=rA.uniforms;let Y0=XA.uniforms;if(!p.isShaderMaterial&&!p.isRawShaderMaterial||p.clipping===!0)Y0.clippingPlanes=qA.uniform;if(g7(p,rA),XA.needsLights=D$(p),XA.lightsStateVersion=nA,XA.needsLights)Y0.ambientLightColor.value=UA.state.ambient,Y0.lightProbe.value=UA.state.probe,Y0.directionalLights.value=UA.state.directional,Y0.directionalLightShadows.value=UA.state.directionalShadow,Y0.spotLights.value=UA.state.spot,Y0.spotLightShadows.value=UA.state.spotShadow,Y0.rectAreaLights.value=UA.state.rectArea,Y0.ltc_1.value=UA.state.rectAreaLTC1,Y0.ltc_2.value=UA.state.rectAreaLTC2,Y0.pointLights.value=UA.state.point,Y0.pointLightShadows.value=UA.state.pointShadow,Y0.hemisphereLights.value=UA.state.hemi,Y0.directionalShadowMap.value=UA.state.directionalShadowMap,Y0.directionalShadowMatrix.value=UA.state.directionalShadowMatrix,Y0.spotShadowMap.value=UA.state.spotShadowMap,Y0.spotLightMatrix.value=UA.state.spotLightMatrix,Y0.spotLightMap.value=UA.state.spotLightMap,Y0.pointShadowMap.value=UA.state.pointShadowMap,Y0.pointShadowMatrix.value=UA.state.pointShadowMatrix;return XA.currentProgram=M0,XA.uniformsList=null,M0}function g6(p){if(p.uniformsList===null){let JA=p.currentProgram.getUniforms();p.uniformsList=eC.seqWithValue(JA.seq,p.uniforms)}return p.uniformsList}function g7(p,JA){let WA=wA.get(p);WA.outputColorSpace=JA.outputColorSpace,WA.batching=JA.batching,WA.batchingColor=JA.batchingColor,WA.instancing=JA.instancing,WA.instancingColor=JA.instancingColor,WA.instancingMorph=JA.instancingMorph,WA.skinning=JA.skinning,WA.morphTargets=JA.morphTargets,WA.morphNormals=JA.morphNormals,WA.morphColors=JA.morphColors,WA.morphTargetsCount=JA.morphTargetsCount,WA.numClippingPlanes=JA.numClippingPlanes,WA.numIntersection=JA.numClipIntersection,WA.vertexAlphas=JA.vertexAlphas,WA.vertexTangents=JA.vertexTangents,WA.toneMapping=JA.toneMapping}function q$(p,JA,WA,XA,UA){if(JA.isScene!==!0)JA=BA;VA.resetTextureUnits();let gA=JA.fog,nA=XA.isMeshStandardMaterial?JA.environment:null,rA=D===null?X.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:b0,A0=(XA.isMeshStandardMaterial?u:d).get(XA.envMap||nA),D0=XA.vertexColors===!0&&!!WA.attributes.color&&WA.attributes.color.itemSize===4,M0=!!WA.attributes.tangent&&(!!XA.normalMap||XA.anisotropy>0),Y0=!!WA.morphAttributes.position,l0=!!WA.morphAttributes.normal,AQ=!!WA.morphAttributes.color,TQ=VB;if(XA.toneMapped){if(D===null||D.isXRRenderTarget===!0)TQ=X.toneMapping}let qQ=WA.morphAttributes.position||WA.morphAttributes.normal||WA.morphAttributes.color,n0=qQ!==void 0?qQ.length:0,R0=wA.get(XA),iQ=W.state.lights;if(i===!0){if(n===!0||p!==w){let KE=p===w&&XA.id===_;qA.setState(XA,p,KE)}}let QQ=!1;if(XA.version===R0.__version){if(R0.needsLights&&R0.lightsStateVersion!==iQ.state.version)QQ=!0;else if(R0.outputColorSpace!==rA)QQ=!0;else if(UA.isBatchedMesh&&R0.batching===!1)QQ=!0;else if(!UA.isBatchedMesh&&R0.batching===!0)QQ=!0;else if(UA.isBatchedMesh&&R0.batchingColor===!0&&UA.colorTexture===null)QQ=!0;else if(UA.isBatchedMesh&&R0.batchingColor===!1&&UA.colorTexture!==null)QQ=!0;else if(UA.isInstancedMesh&&R0.instancing===!1)QQ=!0;else if(!UA.isInstancedMesh&&R0.instancing===!0)QQ=!0;else if(UA.isSkinnedMesh&&R0.skinning===!1)QQ=!0;else if(!UA.isSkinnedMesh&&R0.skinning===!0)QQ=!0;else if(UA.isInstancedMesh&&R0.instancingColor===!0&&UA.instanceColor===null)QQ=!0;else if(UA.isInstancedMesh&&R0.instancingColor===!1&&UA.instanceColor!==null)QQ=!0;else if(UA.isInstancedMesh&&R0.instancingMorph===!0&&UA.morphTexture===null)QQ=!0;else if(UA.isInstancedMesh&&R0.instancingMorph===!1&&UA.morphTexture!==null)QQ=!0;else if(R0.envMap!==A0)QQ=!0;else if(XA.fog===!0&&R0.fog!==gA)QQ=!0;else if(R0.numClippingPlanes!==void 0&&(R0.numClippingPlanes!==qA.numPlanes||R0.numIntersection!==qA.numIntersection))QQ=!0;else if(R0.vertexAlphas!==D0)QQ=!0;else if(R0.vertexTangents!==M0)QQ=!0;else if(R0.morphTargets!==Y0)QQ=!0;else if(R0.morphNormals!==l0)QQ=!0;else if(R0.morphColors!==AQ)QQ=!0;else if(R0.toneMapping!==TQ)QQ=!0;else if(R0.morphTargetsCount!==n0)QQ=!0}else QQ=!0,R0.__version=XA.version;let KB=R0.currentProgram;if(QQ===!0)KB=rI(XA,JA,UA);let K8=!1,_E=!1,x6=!1,WQ=KB.getUniforms(),dE=R0.uniforms;if(ZA.useProgram(KB.program))K8=!0,_E=!0,x6=!0;if(XA.id!==_)_=XA.id,_E=!0;if(K8||w!==p){if(ZA.buffers.depth.getReversed())l.copy(p.projectionMatrix),uR(l),pR(l),WQ.setValue(f,"projectionMatrix",l);else WQ.setValue(f,"projectionMatrix",p.projectionMatrix);WQ.setValue(f,"viewMatrix",p.matrixWorldInverse);let RE=WQ.map.cameraPosition;if(RE!==void 0)RE.setValue(f,o.setFromMatrixPosition(p.matrixWorld));if(FA.logarithmicDepthBuffer)WQ.setValue(f,"logDepthBufFC",2/(Math.log(p.far+1)/Math.LN2));if(XA.isMeshPhongMaterial||XA.isMeshToonMaterial||XA.isMeshLambertMaterial||XA.isMeshBasicMaterial||XA.isMeshStandardMaterial||XA.isShaderMaterial)WQ.setValue(f,"isOrthographic",p.isOrthographicCamera===!0);if(w!==p)w=p,_E=!0,x6=!0}if(UA.isSkinnedMesh){WQ.setOptional(f,UA,"bindMatrix"),WQ.setOptional(f,UA,"bindMatrixInverse");let KE=UA.skeleton;if(KE){if(KE.boneTexture===null)KE.computeBoneTexture();WQ.setValue(f,"boneTexture",KE.boneTexture,VA)}}if(UA.isBatchedMesh){if(WQ.setOptional(f,UA,"batchingTexture"),WQ.setValue(f,"batchingTexture",UA._matricesTexture,VA),WQ.setOptional(f,UA,"batchingIdTexture"),WQ.setValue(f,"batchingIdTexture",UA._indirectTexture,VA),WQ.setOptional(f,UA,"batchingColorTexture"),UA._colorsTexture!==null)WQ.setValue(f,"batchingColorTexture",UA._colorsTexture,VA)}let nE=WA.morphAttributes;if(nE.position!==void 0||nE.normal!==void 0||nE.color!==void 0)B0.update(UA,WA,KB);if(_E||R0.receiveShadow!==UA.receiveShadow)R0.receiveShadow=UA.receiveShadow,WQ.setValue(f,"receiveShadow",UA.receiveShadow);if(XA.isMeshGouraudMaterial&&XA.envMap!==null)dE.envMap.value=A0,dE.flipEnvMap.value=A0.isCubeTexture&&A0.isRenderTargetTexture===!1?-1:1;if(XA.isMeshStandardMaterial&&XA.envMap===null&&JA.environment!==null)dE.envMapIntensity.value=JA.environmentIntensity;if(_E){if(WQ.setValue(f,"toneMappingExposure",X.toneMappingExposure),R0.needsLights)F$(dE,x6);if(gA&&XA.fog===!0)fA.refreshFogUniforms(dE,gA);fA.refreshMaterialUniforms(dE,XA,V,P,W.state.transmissionRenderTarget[p.id]),eC.upload(f,g6(R0),dE,VA)}if(XA.isShaderMaterial&&XA.uniformsNeedUpdate===!0)eC.upload(f,g6(R0),dE,VA),XA.uniformsNeedUpdate=!1;if(XA.isSpriteMaterial)WQ.setValue(f,"center",UA.center);if(WQ.setValue(f,"modelViewMatrix",UA.modelViewMatrix),WQ.setValue(f,"normalMatrix",UA.normalMatrix),WQ.setValue(f,"modelMatrix",UA.matrixWorld),XA.isShaderMaterial||XA.isRawShaderMaterial){let KE=XA.uniformsGroups;for(let RE=0,oU=KE.length;RE<oU;RE++){let aI=KE[RE];$0.update(aI,KB),$0.bind(aI,KB)}}return KB}function F$(p,JA){p.ambientLightColor.needsUpdate=JA,p.lightProbe.needsUpdate=JA,p.directionalLights.needsUpdate=JA,p.directionalLightShadows.needsUpdate=JA,p.pointLights.needsUpdate=JA,p.pointLightShadows.needsUpdate=JA,p.spotLights.needsUpdate=JA,p.spotLightShadows.needsUpdate=JA,p.rectAreaLights.needsUpdate=JA,p.hemisphereLights.needsUpdate=JA}function D$(p){return p.isMeshLambertMaterial||p.isMeshToonMaterial||p.isMeshPhongMaterial||p.isMeshStandardMaterial||p.isShadowMaterial||p.isShaderMaterial&&p.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(p,JA,WA){wA.get(p.texture).__webglTexture=JA,wA.get(p.depthTexture).__webglTexture=WA;let XA=wA.get(p);if(XA.__hasExternalTextures=!0,XA.__autoAllocateDepthBuffer=WA===void 0,!XA.__autoAllocateDepthBuffer){if(YA.has("WEBGL_multisampled_render_to_texture")===!0)console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),XA.__useRenderToTexture=!1}},this.setRenderTargetFramebuffer=function(p,JA){let WA=wA.get(p);WA.__webglFramebuffer=JA,WA.__useDefaultFramebuffer=JA===void 0};let M$=f.createFramebuffer();this.setRenderTarget=function(p,JA=0,WA=0){D=p,M=JA,F=WA;let XA=!0,UA=null,gA=!1,nA=!1;if(p){let A0=wA.get(p);if(A0.__useDefaultFramebuffer!==void 0)ZA.bindFramebuffer(f.FRAMEBUFFER,null),XA=!1;else if(A0.__webglFramebuffer===void 0)VA.setupRenderTarget(p);else if(A0.__hasExternalTextures)VA.rebindTextures(p,wA.get(p.texture).__webglTexture,wA.get(p.depthTexture).__webglTexture);else if(p.depthBuffer){let Y0=p.depthTexture;if(A0.__boundDepthTexture!==Y0){if(Y0!==null&&wA.has(Y0)&&(p.width!==Y0.image.width||p.height!==Y0.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");VA.setupDepthRenderbuffer(p)}}let D0=p.texture;if(D0.isData3DTexture||D0.isDataArrayTexture||D0.isCompressedArrayTexture)nA=!0;let M0=wA.get(p).__webglFramebuffer;if(p.isWebGLCubeRenderTarget){if(Array.isArray(M0[JA]))UA=M0[JA][WA];else UA=M0[JA];gA=!0}else if(p.samples>0&&VA.useMultisampledRTT(p)===!1)UA=wA.get(p).__webglMultisampledFramebuffer;else if(Array.isArray(M0))UA=M0[WA];else UA=M0;k.copy(p.viewport),T.copy(p.scissor),z=p.scissorTest}else k.copy(x).multiplyScalar(V).floor(),T.copy(b).multiplyScalar(V).floor(),z=m;if(WA!==0)UA=M$;if(ZA.bindFramebuffer(f.FRAMEBUFFER,UA)&&XA)ZA.drawBuffers(p,UA);if(ZA.viewport(k),ZA.scissor(T),ZA.setScissorTest(z),gA){let A0=wA.get(p.texture);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+JA,A0.__webglTexture,WA)}else if(nA){let A0=wA.get(p.texture),D0=JA;f.framebufferTextureLayer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,A0.__webglTexture,WA,D0)}else if(p!==null&&WA!==0){let A0=wA.get(p.texture);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,A0.__webglTexture,WA)}_=-1},this.readRenderTargetPixels=function(p,JA,WA,XA,UA,gA,nA){if(!(p&&p.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let rA=wA.get(p).__webglFramebuffer;if(p.isWebGLCubeRenderTarget&&nA!==void 0)rA=rA[nA];if(rA){ZA.bindFramebuffer(f.FRAMEBUFFER,rA);try{let A0=p.texture,D0=A0.format,M0=A0.type;if(!FA.textureFormatReadable(D0)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!FA.textureTypeReadable(M0)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(JA>=0&&JA<=p.width-XA&&(WA>=0&&WA<=p.height-UA))f.readPixels(JA,WA,XA,UA,pA.convert(D0),pA.convert(M0),gA)}finally{let A0=D!==null?wA.get(D).__webglFramebuffer:null;ZA.bindFramebuffer(f.FRAMEBUFFER,A0)}}},this.readRenderTargetPixelsAsync=async function(p,JA,WA,XA,UA,gA,nA){if(!(p&&p.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let rA=wA.get(p).__webglFramebuffer;if(p.isWebGLCubeRenderTarget&&nA!==void 0)rA=rA[nA];if(rA){let A0=p.texture,D0=A0.format,M0=A0.type;if(!FA.textureFormatReadable(D0))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!FA.textureTypeReadable(M0))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(JA>=0&&JA<=p.width-XA&&(WA>=0&&WA<=p.height-UA)){ZA.bindFramebuffer(f.FRAMEBUFFER,rA);let Y0=f.createBuffer();f.bindBuffer(f.PIXEL_PACK_BUFFER,Y0),f.bufferData(f.PIXEL_PACK_BUFFER,gA.byteLength,f.STREAM_READ),f.readPixels(JA,WA,XA,UA,pA.convert(D0),pA.convert(M0),0);let l0=D!==null?wA.get(D).__webglFramebuffer:null;ZA.bindFramebuffer(f.FRAMEBUFFER,l0);let AQ=f.fenceSync(f.SYNC_GPU_COMMANDS_COMPLETE,0);return f.flush(),await fR(f,AQ,4),f.bindBuffer(f.PIXEL_PACK_BUFFER,Y0),f.getBufferSubData(f.PIXEL_PACK_BUFFER,0,gA),f.deleteBuffer(Y0),f.deleteSync(AQ),gA}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(p,JA=null,WA=0){if(p.isTexture!==!0)P1("WebGLRenderer: copyFramebufferToTexture function signature has changed."),JA=arguments[0]||null,p=arguments[1];let XA=Math.pow(2,-WA),UA=Math.floor(p.image.width*XA),gA=Math.floor(p.image.height*XA),nA=JA!==null?JA.x:0,rA=JA!==null?JA.y:0;VA.setTexture2D(p,0),f.copyTexSubImage2D(f.TEXTURE_2D,WA,0,0,nA,rA,UA,gA),ZA.unbindTexture()};let w$=f.createFramebuffer(),_$=f.createFramebuffer();if(this.copyTextureToTexture=function(p,JA,WA=null,XA=null,UA=0,gA=null){if(p.isTexture!==!0)P1("WebGLRenderer: copyTextureToTexture function signature has changed."),XA=arguments[0]||null,p=arguments[1],JA=arguments[2],gA=arguments[3]||0,WA=null;if(gA===null)if(UA!==0)P1("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),gA=UA,UA=0;else gA=0;let nA,rA,A0,D0,M0,Y0,l0,AQ,TQ,qQ=p.isCompressedTexture?p.mipmaps[gA]:p.image;if(WA!==null)nA=WA.max.x-WA.min.x,rA=WA.max.y-WA.min.y,A0=WA.isBox3?WA.max.z-WA.min.z:1,D0=WA.min.x,M0=WA.min.y,Y0=WA.isBox3?WA.min.z:0;else{let nE=Math.pow(2,-UA);if(nA=Math.floor(qQ.width*nE),rA=Math.floor(qQ.height*nE),p.isDataArrayTexture)A0=qQ.depth;else if(p.isData3DTexture)A0=Math.floor(qQ.depth*nE);else A0=1;D0=0,M0=0,Y0=0}if(XA!==null)l0=XA.x,AQ=XA.y,TQ=XA.z;else l0=0,AQ=0,TQ=0;let n0=pA.convert(JA.format),R0=pA.convert(JA.type),iQ;if(JA.isData3DTexture)VA.setTexture3D(JA,0),iQ=f.TEXTURE_3D;else if(JA.isDataArrayTexture||JA.isCompressedArrayTexture)VA.setTexture2DArray(JA,0),iQ=f.TEXTURE_2D_ARRAY;else VA.setTexture2D(JA,0),iQ=f.TEXTURE_2D;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,JA.flipY),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,JA.premultiplyAlpha),f.pixelStorei(f.UNPACK_ALIGNMENT,JA.unpackAlignment);let QQ=f.getParameter(f.UNPACK_ROW_LENGTH),KB=f.getParameter(f.UNPACK_IMAGE_HEIGHT),K8=f.getParameter(f.UNPACK_SKIP_PIXELS),_E=f.getParameter(f.UNPACK_SKIP_ROWS),x6=f.getParameter(f.UNPACK_SKIP_IMAGES);f.pixelStorei(f.UNPACK_ROW_LENGTH,qQ.width),f.pixelStorei(f.UNPACK_IMAGE_HEIGHT,qQ.height),f.pixelStorei(f.UNPACK_SKIP_PIXELS,D0),f.pixelStorei(f.UNPACK_SKIP_ROWS,M0),f.pixelStorei(f.UNPACK_SKIP_IMAGES,Y0);let WQ=p.isDataArrayTexture||p.isData3DTexture,dE=JA.isDataArrayTexture||JA.isData3DTexture;if(p.isDepthTexture){let nE=wA.get(p),KE=wA.get(JA),RE=wA.get(nE.__renderTarget),oU=wA.get(KE.__renderTarget);ZA.bindFramebuffer(f.READ_FRAMEBUFFER,RE.__webglFramebuffer),ZA.bindFramebuffer(f.DRAW_FRAMEBUFFER,oU.__webglFramebuffer);for(let aI=0;aI<A0;aI++){if(WQ)f.framebufferTextureLayer(f.READ_FRAMEBUFFER,f.COLOR_ATTACHMENT0,wA.get(p).__webglTexture,UA,Y0+aI),f.framebufferTextureLayer(f.DRAW_FRAMEBUFFER,f.COLOR_ATTACHMENT0,wA.get(JA).__webglTexture,gA,TQ+aI);f.blitFramebuffer(D0,M0,nA,rA,l0,AQ,nA,rA,f.DEPTH_BUFFER_BIT,f.NEAREST)}ZA.bindFramebuffer(f.READ_FRAMEBUFFER,null),ZA.bindFramebuffer(f.DRAW_FRAMEBUFFER,null)}else if(UA!==0||p.isRenderTargetTexture||wA.has(p)){let nE=wA.get(p),KE=wA.get(JA);ZA.bindFramebuffer(f.READ_FRAMEBUFFER,w$),ZA.bindFramebuffer(f.DRAW_FRAMEBUFFER,_$);for(let RE=0;RE<A0;RE++){if(WQ)f.framebufferTextureLayer(f.READ_FRAMEBUFFER,f.COLOR_ATTACHMENT0,nE.__webglTexture,UA,Y0+RE);else f.framebufferTexture2D(f.READ_FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,nE.__webglTexture,UA);if(dE)f.framebufferTextureLayer(f.DRAW_FRAMEBUFFER,f.COLOR_ATTACHMENT0,KE.__webglTexture,gA,TQ+RE);else f.framebufferTexture2D(f.DRAW_FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,KE.__webglTexture,gA);if(UA!==0)f.blitFramebuffer(D0,M0,nA,rA,l0,AQ,nA,rA,f.COLOR_BUFFER_BIT,f.NEAREST);else if(dE)f.copyTexSubImage3D(iQ,gA,l0,AQ,TQ+RE,D0,M0,nA,rA);else f.copyTexSubImage2D(iQ,gA,l0,AQ,D0,M0,nA,rA)}ZA.bindFramebuffer(f.READ_FRAMEBUFFER,null),ZA.bindFramebuffer(f.DRAW_FRAMEBUFFER,null)}else if(dE)if(p.isDataTexture||p.isData3DTexture)f.texSubImage3D(iQ,gA,l0,AQ,TQ,nA,rA,A0,n0,R0,qQ.data);else if(JA.isCompressedArrayTexture)f.compressedTexSubImage3D(iQ,gA,l0,AQ,TQ,nA,rA,A0,n0,qQ.data);else f.texSubImage3D(iQ,gA,l0,AQ,TQ,nA,rA,A0,n0,R0,qQ);else if(p.isDataTexture)f.texSubImage2D(f.TEXTURE_2D,gA,l0,AQ,nA,rA,n0,R0,qQ.data);else if(p.isCompressedTexture)f.compressedTexSubImage2D(f.TEXTURE_2D,gA,l0,AQ,qQ.width,qQ.height,n0,qQ.data);else f.texSubImage2D(f.TEXTURE_2D,gA,l0,AQ,nA,rA,n0,R0,qQ);if(f.pixelStorei(f.UNPACK_ROW_LENGTH,QQ),f.pixelStorei(f.UNPACK_IMAGE_HEIGHT,KB),f.pixelStorei(f.UNPACK_SKIP_PIXELS,K8),f.pixelStorei(f.UNPACK_SKIP_ROWS,_E),f.pixelStorei(f.UNPACK_SKIP_IMAGES,x6),gA===0&&JA.generateMipmaps)f.generateMipmap(iQ);ZA.unbindTexture()},this.copyTextureToTexture3D=function(p,JA,WA=null,XA=null,UA=0){if(p.isTexture!==!0)P1("WebGLRenderer: copyTextureToTexture3D function signature has changed."),WA=arguments[0]||null,XA=arguments[1]||null,p=arguments[2],JA=arguments[3],UA=arguments[4]||0;return P1('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(p,JA,WA,XA,UA)},this.initRenderTarget=function(p){if(wA.get(p).__webglFramebuffer===void 0)VA.setupRenderTarget(p)},this.initTexture=function(p){if(p.isCubeTexture)VA.setTextureCube(p,0);else if(p.isData3DTexture)VA.setTexture3D(p,0);else if(p.isDataArrayTexture||p.isCompressedArrayTexture)VA.setTexture2DArray(p,0);else VA.setTexture2D(p,0);ZA.unbindTexture()},this.resetState=function(){M=0,F=0,D=null,ZA.reset(),iA.reset()},typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return L9}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(A){this._outputColorSpace=A;let Q=this.getContext();Q.drawingBufferColorspace=O0._getDrawingBufferColorSpace(A),Q.unpackColorSpace=O0._getUnpackColorSpace()}}var r=z$(uN(),1);var nz=new J0,sz=new y,iz=new y,oz=new y,rz=new y,az=new y,tz=new J0,ez=new y,A3=new y,Q3=new y,E3=new RA;var K3={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},J3={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()};var U3={camera:new RA,gizmos:new RA};var Y3=new bE,O3=new y,H3=new RA,Z3=new RA,R3=new y;var W3=new UQ,X3=new AA,$3=new y,L3=new AA,q3=new AA,F3=new y,D3=new y,M3=new RA,w3=new y,_3=new y;var T3=new y,z3=new I6,P3=new y,V3=new y;var h3=new J0;var x3=new qE,b3=new UQ,f3=Math.cos(70*o0.DEG2RAD),u3=new y,p3=2*Math.PI;var i3=new DQ(0,0,0,"YXZ"),o3=new y;var r3=Math.PI/2;var e3=new AA,AP=new AA,QP=new y,EP=new y,BP=new y,IP=new J0,CP=new y,KP=new y,JP=new y,UP=new y;var HP=new bE,ZP=new y,RP=new y,NP=new J0,GP={X:new y(1,0,0),Y:new y(0,1,0),Z:new y(0,0,1)};var WP=new DQ,XP=new y(0,1,0),$P=new y(0,0,0),LP=new RA,qP=new J0,FP=new J0,DP=new y,MP=new RA,wP=new y(1,0,0),_P=new y(0,1,0),kP=new y(0,0,1),SP=new y,TP=new y,zP=new y;var OH=new RA;class KU{constructor(A){if(A=A||{},this.zNear=A.webGL===!0?-1:0,this.vertices={near:[new y,new y,new y,new y],far:[new y,new y,new y,new y]},A.projectionMatrix!==void 0)this.setFromProjectionMatrix(A.projectionMatrix,A.maxFar||1e4)}setFromProjectionMatrix(A,Q){let E=this.zNear,B=A.elements[11]===0;return OH.copy(A).invert(),this.vertices.near[0].set(1,1,E),this.vertices.near[1].set(1,-1,E),this.vertices.near[2].set(-1,-1,E),this.vertices.near[3].set(-1,1,E),this.vertices.near.forEach(function(I){I.applyMatrix4(OH)}),this.vertices.far[0].set(1,1,1),this.vertices.far[1].set(1,-1,1),this.vertices.far[2].set(-1,-1,1),this.vertices.far[3].set(-1,1,1),this.vertices.far.forEach(function(I){I.applyMatrix4(OH);let C=Math.abs(I.z);if(B)I.z*=Math.min(Q/C,1);else I.multiplyScalar(Math.min(Q/C,1))}),this.vertices}split(A,Q){while(A.length>Q.length)Q.push(new KU);Q.length=A.length;for(let E=0;E<A.length;E++){let B=Q[E];if(E===0)for(let I=0;I<4;I++)B.vertices.near[I].copy(this.vertices.near[I]);else for(let I=0;I<4;I++)B.vertices.near[I].lerpVectors(this.vertices.near[I],this.vertices.far[I],A[E-1]);if(E===A.length-1)for(let I=0;I<4;I++)B.vertices.far[I].copy(this.vertices.far[I]);else for(let I=0;I<4;I++)B.vertices.far[I].lerpVectors(this.vertices.near[I],this.vertices.far[I],A[E])}}toSpace(A,Q){for(let E=0;E<4;E++)Q.vertices.near[E].copy(this.vertices.near[E]).applyMatrix4(A),Q.vertices.far[E].copy(this.vertices.far[E]).applyMatrix4(A)}}var dM={lights_fragment_begin:`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

vec3 geometryClearcoatNormal = vec3( 0.0 );

#ifdef USE_CLEARCOAT

	geometryClearcoatNormal = clearcoatNormal;

#endif

#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		// Iridescence F0 approximation
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif

IncidentLight directLight;

#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

		pointLight = pointLights[ i ];

		getPointLightInfo( pointLight, geometryPosition, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

	SpotLight spotLight;
 	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;

	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

		spotLight = spotLights[ i ];

		getSpotLightInfo( spotLight, geometryPosition, directLight );

  		// spot lights are ordered [shadows with maps, shadows without maps, maps without shadows, none]
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;

		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && defined( USE_CSM ) && defined( CSM_CASCADES )

	DirectionalLight directionalLight;
	float linearDepth = (vViewPosition.z) / (shadowFar - cameraNear);
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif

	#if defined( USE_SHADOWMAP ) && defined( CSM_FADE )
		vec2 cascade;
		float cascadeCenter;
		float closestEdge;
		float margin;
		float csmx;
		float csmy;

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];
			getDirectionalLightInfo( directionalLight, directLight );

			#if ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
				// NOTE: Depth gets larger away from the camera.
				// cascade.x is closer, cascade.y is further
				cascade = CSM_cascades[ i ];
				cascadeCenter = ( cascade.x + cascade.y ) / 2.0;
				closestEdge = linearDepth < cascadeCenter ? cascade.x : cascade.y;
				margin = 0.25 * pow( closestEdge, 2.0 );
				csmx = cascade.x - margin / 2.0;
				csmy = cascade.y + margin / 2.0;
				if( linearDepth >= csmx && ( linearDepth < csmy || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 ) ) {

					float dist = min( linearDepth - csmx, csmy - linearDepth );
					float ratio = clamp( dist / margin, 0.0, 1.0 );

					vec3 prevColor = directLight.color;
					directionalLightShadow = directionalLightShadows[ i ];
					directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;

					bool shouldFadeLastCascade = UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth > cascadeCenter;
					directLight.color = mix( prevColor, directLight.color, shouldFadeLastCascade ? ratio : 1.0 );

					ReflectedLight prevLight = reflectedLight;
					RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

					bool shouldBlend = UNROLLED_LOOP_INDEX != CSM_CASCADES - 1 || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth < cascadeCenter;
					float blendRatio = shouldBlend ? ratio : 1.0;

					reflectedLight.directDiffuse = mix( prevLight.directDiffuse, reflectedLight.directDiffuse, blendRatio );
					reflectedLight.directSpecular = mix( prevLight.directSpecular, reflectedLight.directSpecular, blendRatio );
					reflectedLight.indirectDiffuse = mix( prevLight.indirectDiffuse, reflectedLight.indirectDiffuse, blendRatio );
					reflectedLight.indirectSpecular = mix( prevLight.indirectSpecular, reflectedLight.indirectSpecular, blendRatio );

				}
			#endif

		}
		#pragma unroll_loop_end
	#elif defined (USE_SHADOWMAP)

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];
			getDirectionalLightInfo( directionalLight, directLight );

			#if ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )

				directionalLightShadow = directionalLightShadows[ i ];
				if(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y) directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;

				if(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && (linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1)) RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

			#endif

		}
		#pragma unroll_loop_end

	#elif ( NUM_DIR_LIGHT_SHADOWS > 0 )
		// note: no loop here - all CSM lights are in fact one light only
		getDirectionalLightInfo( directionalLights[0], directLight );
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	#endif

	#if ( NUM_DIR_LIGHTS > NUM_DIR_LIGHT_SHADOWS)
		// compute the lights not casting shadows (if any)

		#pragma unroll_loop_start
		for ( int i = NUM_DIR_LIGHT_SHADOWS; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];

			getDirectionalLightInfo( directionalLight, directLight );

			RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

		}
		#pragma unroll_loop_end

	#endif

#endif


#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && !defined( USE_CSM ) && !defined( CSM_CASCADES )

	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

		directionalLight = directionalLights[ i ];

		getDirectionalLightInfo( directionalLight, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

	RectAreaLight rectAreaLight;

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if defined( RE_IndirectDiffuse )

	vec3 iblIrradiance = vec3( 0.0 );

	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

	#if defined( USE_LIGHT_PROBES )

		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );

	#endif

	#if ( NUM_HEMI_LIGHTS > 0 )

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );

		}
		#pragma unroll_loop_end

	#endif

#endif

#if defined( RE_IndirectSpecular )

	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );

#endif
`,lights_pars_begin:`
#if defined( USE_CSM ) && defined( CSM_CASCADES )
uniform vec2 CSM_cascades[CSM_CASCADES];
uniform float cameraNear;
uniform float shadowFar;
#endif
	`+G0.lights_pars_begin};var bP=new RA,fP=new KU({webGL:!0}),uP=new y,pP=new g0;var mP=new RA,cP=new RA,lP=new y(0,1,0);class s0{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}var sM=new HE(-1,1,1,-1,0,1);class pN extends hA{constructor(){super();this.setAttribute("position",new PA([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new PA([0,2,0,0,2,0],2))}}var iM=new pN;class r0{constructor(A){this._mesh=new xA(iM,A)}dispose(){this._mesh.geometry.dispose()}render(A){A.render(this._mesh,sM)}get material(){return this._mesh.material}set material(A){this._mesh.material=A}}class eE{parse(A,Q={}){if(Q=Object.assign({decodeSpeed:5,encodeSpeed:5,encoderMethod:eE.MESH_EDGEBREAKER_ENCODING,quantization:[16,8,8,8,8],exportUvs:!0,exportNormals:!0,exportColor:!1},Q),DracoEncoderModule===void 0)throw new Error("THREE.DRACOExporter: required the draco_encoder to work.");let E=A.geometry,B=DracoEncoderModule(),I=new B.Encoder,C,K;if(A.isMesh===!0){C=new B.MeshBuilder,K=new B.Mesh;let O=E.getAttribute("position");C.AddFloatAttributeToMesh(K,B.POSITION,O.count,O.itemSize,O.array);let N=E.getIndex();if(N!==null)C.AddFacesToMesh(K,N.count/3,N.array);else{let $=new(O.count>65535?Uint32Array:Uint16Array)(O.count);for(let L=0;L<$.length;L++)$[L]=L;C.AddFacesToMesh(K,O.count,$)}if(Q.exportNormals===!0){let $=E.getAttribute("normal");if($!==void 0)C.AddFloatAttributeToMesh(K,B.NORMAL,$.count,$.itemSize,$.array)}if(Q.exportUvs===!0){let $=E.getAttribute("uv");if($!==void 0)C.AddFloatAttributeToMesh(K,B.TEX_COORD,$.count,$.itemSize,$.array)}if(Q.exportColor===!0){let $=E.getAttribute("color");if($!==void 0){let L=mN($);C.AddFloatAttributeToMesh(K,B.COLOR,$.count,$.itemSize,L)}}}else if(A.isPoints===!0){C=new B.PointCloudBuilder,K=new B.PointCloud;let O=E.getAttribute("position");if(C.AddFloatAttribute(K,B.POSITION,O.count,O.itemSize,O.array),Q.exportColor===!0){let N=E.getAttribute("color");if(N!==void 0){let $=mN(N);C.AddFloatAttribute(K,B.COLOR,N.count,N.itemSize,$)}}}else throw new Error("DRACOExporter: Unsupported object type.");let J=new B.DracoInt8Array,U=Q.encodeSpeed!==void 0?Q.encodeSpeed:5,Y=Q.decodeSpeed!==void 0?Q.decodeSpeed:5;if(I.SetSpeedOptions(U,Y),Q.encoderMethod!==void 0)I.SetEncodingMethod(Q.encoderMethod);if(Q.quantization!==void 0){for(let O=0;O<5;O++)if(Q.quantization[O]!==void 0)I.SetAttributeQuantization(O,Q.quantization[O])}let H;if(A.isMesh===!0)H=I.EncodeMeshToDracoBuffer(K,J);else H=I.EncodePointCloudToDracoBuffer(K,!0,J);if(B.destroy(K),H===0)throw new Error("THREE.DRACOExporter: Draco encoding failed.");let R=new Int8Array(new ArrayBuffer(H));for(let O=0;O<H;O++)R[O]=J.GetValue(O);return B.destroy(J),B.destroy(I),B.destroy(C),R}}function mN(A){let Q=new a,E=A.count,B=A.itemSize,I=new Float32Array(E*B);for(let C=0,K=E;C<K;C++)if(Q.fromBufferAttribute(A,C),O0.fromWorkingColorSpace(Q,N0),I[C*B]=Q.r,I[C*B+1]=Q.g,I[C*B+2]=Q.b,B===4)I[C*B+3]=A.getW(C);return I}eE.MESH_EDGEBREAKER_ENCODING=1;eE.MESH_SEQUENTIAL_ENCODING=0;eE.POINT_CLOUD=0;eE.TRIANGULAR_MESH=1;eE.INVALID=-1;eE.POSITION=0;eE.NORMAL=1;eE.COLOR=2;eE.TEX_COORD=3;eE.GENERIC=4;/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var U6=Uint8Array,cN=Uint16Array,oM=Int32Array,rM=new U6([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),aM=new U6([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),SV=new U6([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lN=function(A,Q){var E=new cN(31);for(var B=0;B<31;++B)E[B]=Q+=1<<A[B-1];var I=new oM(E[30]);for(var B=1;B<30;++B)for(var C=E[B];C<E[B+1];++C)I[C]=C-E[B]<<5|B;return{b:E,r:I}},dN=lN(rM,2),tM=dN.b,eM=dN.r;tM[28]=258,eM[258]=28;var nN=lN(aM,0),TV=nN.b,zV=nN.r,Aw=new cN(32768);for(a0=0;a0<32768;++a0)YI=(a0&43690)>>1|(a0&21845)<<1,YI=(YI&52428)>>2|(YI&13107)<<2,YI=(YI&61680)>>4|(YI&3855)<<4,Aw[a0]=((YI&65280)>>8|(YI&255)<<8)>>1;var YI,a0;var UU=new U6(288);for(a0=0;a0<144;++a0)UU[a0]=8;var a0;for(a0=144;a0<256;++a0)UU[a0]=9;var a0;for(a0=256;a0<280;++a0)UU[a0]=7;var a0;for(a0=280;a0<288;++a0)UU[a0]=8;var a0,Qw=new U6(32);for(a0=0;a0<32;++a0)Qw[a0]=5;var a0;var Ew=/*@__PURE__*/new U6(0);var Bw=typeof TextDecoder!="undefined"&&/*@__PURE__*/new TextDecoder,Iw=0;try{Bw.decode(Ew,{stream:!0}),Iw=1}catch(A){}var sN={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class YU{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register(function(A){return new QG(A)}),this.register(function(A){return new EG(A)}),this.register(function(A){return new KG(A)}),this.register(function(A){return new JG(A)}),this.register(function(A){return new UG(A)}),this.register(function(A){return new YG(A)}),this.register(function(A){return new BG(A)}),this.register(function(A){return new IG(A)}),this.register(function(A){return new CG(A)}),this.register(function(A){return new OG(A)}),this.register(function(A){return new HG(A)}),this.register(function(A){return new ZG(A)}),this.register(function(A){return new RG(A)}),this.register(function(A){return new NG(A)})}register(A){if(this.pluginCallbacks.indexOf(A)===-1)this.pluginCallbacks.push(A);return this}unregister(A){if(this.pluginCallbacks.indexOf(A)!==-1)this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(A),1);return this}setTextureUtils(A){return this.textureUtils=A,this}parse(A,Q,E,B){let I=new AG,C=[];for(let K=0,J=this.pluginCallbacks.length;K<J;K++)C.push(this.pluginCallbacks[K](I));I.setPlugins(C),I.setTextureUtils(this.textureUtils),I.writeAsync(A,Q,B).catch(E)}parseAsync(A,Q){let E=this;return new Promise(function(B,I){E.parse(A,B,I,Q)})}}var f0={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},HH="KHR_mesh_quantization",fE={};fE[Z0]=f0.NEAREST;fE[X1]=f0.NEAREST_MIPMAP_NEAREST;fE[vB]=f0.NEAREST_MIPMAP_LINEAR;fE[L0]=f0.LINEAR;fE[AI]=f0.LINEAR_MIPMAP_NEAREST;fE[hQ]=f0.LINEAR_MIPMAP_LINEAR;fE[JQ]=f0.CLAMP_TO_EDGE;fE[BQ]=f0.REPEAT;fE[OE]=f0.MIRRORED_REPEAT;var iN={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Cw=new a,oN=12,Kw=1179937895,Jw=2,rN=8,Uw=1313821514,Yw=5130562;function EK(A,Q){return A.length===Q.length&&A.every(function(E,B){return E===Q[B]})}function Ow(A){return(/*@__PURE__*/new TextEncoder()).encode(A).buffer}function Hw(A){return EK(A.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Zw(A,Q,E){let B={min:new Array(A.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(A.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let I=Q;I<Q+E;I++)for(let C=0;C<A.itemSize;C++){let K;if(A.itemSize>4)K=A.array[I*A.itemSize+C];else{if(C===0)K=A.getX(I);else if(C===1)K=A.getY(I);else if(C===2)K=A.getZ(I);else if(C===3)K=A.getW(I);if(A.normalized===!0)K=o0.normalize(K,A.array)}B.min[C]=Math.min(B.min[C],K),B.max[C]=Math.max(B.max[C],K)}return B}function eN(A){return Math.ceil(A/4)*4}function ZH(A,Q=0){let E=eN(A.byteLength);if(E!==A.byteLength){let B=new Uint8Array(E);if(B.set(new Uint8Array(A)),Q!==0)for(let I=A.byteLength;I<E;I++)B[I]=Q;return B.buffer}return A}function aN(){if(typeof document==="undefined"&&typeof OffscreenCanvas!=="undefined")return new OffscreenCanvas(1,1);return document.createElement("canvas")}function tN(A,Q){if(A.toBlob!==void 0)return new Promise((B)=>A.toBlob(B,Q));let E;if(Q==="image/jpeg")E=0.92;else if(Q==="image/webp")E=0.8;return A.convertToBlob({type:Q,quality:E})}class AG{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=/*@__PURE__*/new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=/*@__PURE__*/new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+ZB}},this.cache={meshes:/*@__PURE__*/new Map,attributes:/*@__PURE__*/new Map,attributesNormalized:/*@__PURE__*/new Map,materials:/*@__PURE__*/new Map,textures:/*@__PURE__*/new Map,images:/*@__PURE__*/new Map},this.textureUtils=null}setPlugins(A){this.plugins=A}setTextureUtils(A){this.textureUtils=A}async writeAsync(A,Q,E={}){if(this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},E),this.options.animations.length>0)this.options.trs=!0;await this.processInputAsync(A),await Promise.all(this.pending);let B=this,I=B.buffers,C=B.json;E=B.options;let{extensionsUsed:K,extensionsRequired:J}=B,U=new Blob(I,{type:"application/octet-stream"}),Y=Object.keys(K),H=Object.keys(J);if(Y.length>0)C.extensionsUsed=Y;if(H.length>0)C.extensionsRequired=H;if(C.buffers&&C.buffers.length>0)C.buffers[0].byteLength=U.size;if(E.binary===!0){let R=new FileReader;R.readAsArrayBuffer(U),R.onloadend=function(){let O=ZH(R.result),N=new DataView(new ArrayBuffer(rN));N.setUint32(0,O.byteLength,!0),N.setUint32(4,Yw,!0);let $=ZH(Ow(JSON.stringify(C)),32),L=new DataView(new ArrayBuffer(rN));L.setUint32(0,$.byteLength,!0),L.setUint32(4,Uw,!0);let W=new ArrayBuffer(oN),Z=new DataView(W);Z.setUint32(0,Kw,!0),Z.setUint32(4,Jw,!0);let G=oN+L.byteLength+$.byteLength+N.byteLength+O.byteLength;Z.setUint32(8,G,!0);let X=new Blob([W,L,$,N,O],{type:"application/octet-stream"}),q=new FileReader;q.readAsArrayBuffer(X),q.onloadend=function(){Q(q.result)}}}else if(C.buffers&&C.buffers.length>0){let R=new FileReader;R.readAsDataURL(U),R.onloadend=function(){let O=R.result;C.buffers[0].uri=O,Q(C)}}else Q(C)}serializeUserData(A,Q){if(Object.keys(A.userData).length===0)return;let E=this.options,B=this.extensionsUsed;try{let I=JSON.parse(JSON.stringify(A.userData));if(E.includeCustomExtensions&&I.gltfExtensions){if(Q.extensions===void 0)Q.extensions={};for(let C in I.gltfExtensions)Q.extensions[C]=I.gltfExtensions[C],B[C]=!0;delete I.gltfExtensions}if(Object.keys(I).length>0)Q.extras=I}catch(I){console.warn("THREE.GLTFExporter: userData of '"+A.name+"' won't be serialized because of JSON.stringify error - "+I.message)}}getUID(A,Q=!1){if(this.uids.has(A)===!1){let B=/*@__PURE__*/new Map;B.set(!0,this.uid++),B.set(!1,this.uid++),this.uids.set(A,B)}return this.uids.get(A).get(Q)}isNormalizedNormalAttribute(A){if(this.cache.attributesNormalized.has(A))return!1;let E=new y;for(let B=0,I=A.count;B<I;B++)if(Math.abs(E.fromBufferAttribute(A,B).length()-1)>0.0005)return!1;return!0}createNormalizedNormalAttribute(A){let Q=this.cache;if(Q.attributesNormalized.has(A))return Q.attributesNormalized.get(A);let E=A.clone(),B=new y;for(let I=0,C=E.count;I<C;I++){if(B.fromBufferAttribute(E,I),B.x===0&&B.y===0&&B.z===0)B.setX(1);else B.normalize();E.setXYZ(I,B.x,B.y,B.z)}return Q.attributesNormalized.set(A,E),E}applyTextureTransform(A,Q){let E=!1,B={};if(Q.offset.x!==0||Q.offset.y!==0)B.offset=Q.offset.toArray(),E=!0;if(Q.rotation!==0)B.rotation=Q.rotation,E=!0;if(Q.repeat.x!==1||Q.repeat.y!==1)B.scale=Q.repeat.toArray(),E=!0;if(E)A.extensions=A.extensions||{},A.extensions.KHR_texture_transform=B,this.extensionsUsed.KHR_texture_transform=!0}async buildMetalRoughTextureAsync(A,Q){if(A===Q)return A;function E(O){if(O.colorSpace===N0)return function N($){return $<0.04045?$*0.0773993808:Math.pow($*0.9478672986+0.0521327014,2.4)};return function N($){return $}}if(A instanceof yE)A=await this.decompressTextureAsync(A);if(Q instanceof yE)Q=await this.decompressTextureAsync(Q);let B=A?A.image:null,I=Q?Q.image:null,C=Math.max(B?B.width:0,I?I.width:0),K=Math.max(B?B.height:0,I?I.height:0),J=aN();J.width=C,J.height=K;let U=J.getContext("2d",{willReadFrequently:!0});U.fillStyle="#00ffff",U.fillRect(0,0,C,K);let Y=U.getImageData(0,0,C,K);if(B){U.drawImage(B,0,0,C,K);let O=E(A),N=U.getImageData(0,0,C,K).data;for(let $=2;$<N.length;$+=4)Y.data[$]=O(N[$]/256)*256}if(I){U.drawImage(I,0,0,C,K);let O=E(Q),N=U.getImageData(0,0,C,K).data;for(let $=1;$<N.length;$+=4)Y.data[$]=O(N[$]/256)*256}U.putImageData(Y,0,0);let R=(A||Q).clone();if(R.source=new OB(J),R.colorSpace=YQ,R.channel=(A||Q).channel,A&&Q&&A.channel!==Q.channel)console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match.");return console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),R}async decompressTextureAsync(A,Q=1/0){if(this.textureUtils===null)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return await this.textureUtils.decompress(A,Q)}processBuffer(A){let Q=this.json,E=this.buffers;if(!Q.buffers)Q.buffers=[{byteLength:0}];return E.push(A),0}processBufferView(A,Q,E,B,I){let C=this.json;if(!C.bufferViews)C.bufferViews=[];let K;switch(Q){case f0.BYTE:case f0.UNSIGNED_BYTE:K=1;break;case f0.SHORT:case f0.UNSIGNED_SHORT:K=2;break;default:K=4}let J=A.itemSize*K;if(I===f0.ARRAY_BUFFER)J=Math.ceil(J/4)*4;let U=eN(B*J),Y=new DataView(new ArrayBuffer(U)),H=0;for(let N=E;N<E+B;N++){for(let $=0;$<A.itemSize;$++){let L;if(A.itemSize>4)L=A.array[N*A.itemSize+$];else{if($===0)L=A.getX(N);else if($===1)L=A.getY(N);else if($===2)L=A.getZ(N);else if($===3)L=A.getW(N);if(A.normalized===!0)L=o0.normalize(L,A.array)}if(Q===f0.FLOAT)Y.setFloat32(H,L,!0);else if(Q===f0.INT)Y.setInt32(H,L,!0);else if(Q===f0.UNSIGNED_INT)Y.setUint32(H,L,!0);else if(Q===f0.SHORT)Y.setInt16(H,L,!0);else if(Q===f0.UNSIGNED_SHORT)Y.setUint16(H,L,!0);else if(Q===f0.BYTE)Y.setInt8(H,L);else if(Q===f0.UNSIGNED_BYTE)Y.setUint8(H,L);H+=K}if(H%J!==0)H+=J-H%J}let R={buffer:this.processBuffer(Y.buffer),byteOffset:this.byteOffset,byteLength:U};if(I!==void 0)R.target=I;if(I===f0.ARRAY_BUFFER)R.byteStride=J;return this.byteOffset+=U,C.bufferViews.push(R),{id:C.bufferViews.length-1,byteLength:0}}processBufferViewImage(A){let Q=this,E=Q.json;if(!E.bufferViews)E.bufferViews=[];return new Promise(function(B){let I=new FileReader;I.readAsArrayBuffer(A),I.onloadend=function(){let C=ZH(I.result),K={buffer:Q.processBuffer(C),byteOffset:Q.byteOffset,byteLength:C.byteLength};Q.byteOffset+=C.byteLength,B(E.bufferViews.push(K)-1)}})}processAccessor(A,Q,E,B){let I=this.json,C={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"},K;if(A.array.constructor===Float32Array)K=f0.FLOAT;else if(A.array.constructor===Int32Array)K=f0.INT;else if(A.array.constructor===Uint32Array)K=f0.UNSIGNED_INT;else if(A.array.constructor===Int16Array)K=f0.SHORT;else if(A.array.constructor===Uint16Array)K=f0.UNSIGNED_SHORT;else if(A.array.constructor===Int8Array)K=f0.BYTE;else if(A.array.constructor===Uint8Array)K=f0.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+A.array.constructor.name);if(E===void 0)E=0;if(B===void 0||B===1/0)B=A.count;if(B===0)return null;let J=Zw(A,E,B),U;if(Q!==void 0)U=A===Q.index?f0.ELEMENT_ARRAY_BUFFER:f0.ARRAY_BUFFER;let Y=this.processBufferView(A,K,E,B,U),H={bufferView:Y.id,byteOffset:Y.byteOffset,componentType:K,count:B,max:J.max,min:J.min,type:C[A.itemSize]};if(A.normalized===!0)H.normalized=!0;if(!I.accessors)I.accessors=[];return I.accessors.push(H)-1}processImage(A,Q,E,B="image/png"){if(A!==null){let I=this,C=I.cache,K=I.json,J=I.options,U=I.pending;if(!C.images.has(A))C.images.set(A,{});let Y=C.images.get(A),H=B+":flipY/"+E.toString();if(Y[H]!==void 0)return Y[H];if(!K.images)K.images=[];let R={mimeType:B},O=aN();O.width=Math.min(A.width,J.maxTextureSize),O.height=Math.min(A.height,J.maxTextureSize);let N=O.getContext("2d",{willReadFrequently:!0});if(E===!0)N.translate(0,O.height),N.scale(1,-1);if(A.data!==void 0){if(Q!==V0)console.error("GLTFExporter: Only RGBAFormat is supported.",Q);if(A.width>J.maxTextureSize||A.height>J.maxTextureSize)console.warn("GLTFExporter: Image size is bigger than maxTextureSize",A);let L=new Uint8ClampedArray(A.height*A.width*4);for(let W=0;W<L.length;W+=4)L[W+0]=A.data[W+0],L[W+1]=A.data[W+1],L[W+2]=A.data[W+2],L[W+3]=A.data[W+3];N.putImageData(new ImageData(L,A.width,A.height),0,0)}else if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap||typeof OffscreenCanvas!=="undefined"&&A instanceof OffscreenCanvas)N.drawImage(A,0,0,O.width,O.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");if(J.binary===!0)U.push(tN(O,B).then((L)=>I.processBufferViewImage(L)).then((L)=>{R.bufferView=L}));else if(O.toDataURL!==void 0)R.uri=O.toDataURL(B);else U.push(tN(O,B).then((L)=>new FileReader().readAsDataURL(L)).then((L)=>{R.uri=L}));let $=K.images.push(R)-1;return Y[H]=$,$}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(A){let Q=this.json;if(!Q.samplers)Q.samplers=[];let E={magFilter:fE[A.magFilter],minFilter:fE[A.minFilter],wrapS:fE[A.wrapS],wrapT:fE[A.wrapT]};return Q.samplers.push(E)-1}async processTextureAsync(A){let E=this.options,B=this.cache,I=this.json;if(B.textures.has(A))return B.textures.get(A);if(!I.textures)I.textures=[];if(A instanceof yE)A=await this.decompressTextureAsync(A,E.maxTextureSize);let C=A.userData.mimeType;if(C==="image/webp")C="image/png";let K={sampler:this.processSampler(A),source:this.processImage(A.image,A.format,A.flipY,C)};if(A.name)K.name=A.name;await this._invokeAllAsync(async function(U){U.writeTexture&&await U.writeTexture(A,K)});let J=I.textures.push(K)-1;return B.textures.set(A,J),J}async processMaterialAsync(A){let Q=this.cache,E=this.json;if(Q.materials.has(A))return Q.materials.get(A);if(A.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;if(!E.materials)E.materials=[];let B={pbrMetallicRoughness:{}};if(A.isMeshStandardMaterial!==!0&&A.isMeshBasicMaterial!==!0)console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let I=A.color.toArray().concat([A.opacity]);if(!EK(I,[1,1,1,1]))B.pbrMetallicRoughness.baseColorFactor=I;if(A.isMeshStandardMaterial)B.pbrMetallicRoughness.metallicFactor=A.metalness,B.pbrMetallicRoughness.roughnessFactor=A.roughness;else B.pbrMetallicRoughness.metallicFactor=0,B.pbrMetallicRoughness.roughnessFactor=1;if(A.metalnessMap||A.roughnessMap){let K=await this.buildMetalRoughTextureAsync(A.metalnessMap,A.roughnessMap),J={index:await this.processTextureAsync(K),texCoord:K.channel};this.applyTextureTransform(J,K),B.pbrMetallicRoughness.metallicRoughnessTexture=J}if(A.map){let K={index:await this.processTextureAsync(A.map),texCoord:A.map.channel};this.applyTextureTransform(K,A.map),B.pbrMetallicRoughness.baseColorTexture=K}if(A.emissive){let K=A.emissive;if(Math.max(K.r,K.g,K.b)>0)B.emissiveFactor=A.emissive.toArray();if(A.emissiveMap){let U={index:await this.processTextureAsync(A.emissiveMap),texCoord:A.emissiveMap.channel};this.applyTextureTransform(U,A.emissiveMap),B.emissiveTexture=U}}if(A.normalMap){let K={index:await this.processTextureAsync(A.normalMap),texCoord:A.normalMap.channel};if(A.normalScale&&A.normalScale.x!==1)K.scale=A.normalScale.x;this.applyTextureTransform(K,A.normalMap),B.normalTexture=K}if(A.aoMap){let K={index:await this.processTextureAsync(A.aoMap),texCoord:A.aoMap.channel};if(A.aoMapIntensity!==1)K.strength=A.aoMapIntensity;this.applyTextureTransform(K,A.aoMap),B.occlusionTexture=K}if(A.transparent)B.alphaMode="BLEND";else if(A.alphaTest>0)B.alphaMode="MASK",B.alphaCutoff=A.alphaTest;if(A.side===y0)B.doubleSided=!0;if(A.name!=="")B.name=A.name;this.serializeUserData(A,B),await this._invokeAllAsync(async function(K){K.writeMaterialAsync&&await K.writeMaterialAsync(A,B)});let C=E.materials.push(B)-1;return Q.materials.set(A,C),C}async processMeshAsync(A){let Q=this.cache,E=this.json,B=[A.geometry.uuid];if(Array.isArray(A.material))for(let X=0,q=A.material.length;X<q;X++)B.push(A.material[X].uuid);else B.push(A.material.uuid);let I=B.join(":");if(Q.meshes.has(I))return Q.meshes.get(I);let C=A.geometry,K;if(A.isLineSegments)K=f0.LINES;else if(A.isLineLoop)K=f0.LINE_LOOP;else if(A.isLine)K=f0.LINE_STRIP;else if(A.isPoints)K=f0.POINTS;else K=A.material.wireframe?f0.LINES:f0.TRIANGLES;let J={},U={},Y=[],H=[],R={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},O=C.getAttribute("normal");if(O!==void 0&&!this.isNormalizedNormalAttribute(O))console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),C.setAttribute("normal",this.createNormalizedNormalAttribute(O));let N=null;for(let X in C.attributes){if(X.slice(0,5)==="morph")continue;let q=C.attributes[X];if(X=R[X]||X.toUpperCase(),!/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(X))X="_"+X;if(Q.attributes.has(this.getUID(q))){U[X]=Q.attributes.get(this.getUID(q));continue}N=null;let F=q.array;if(X==="JOINTS_0"&&!(F instanceof Uint16Array)&&!(F instanceof Uint8Array))console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),N=new tA(new Uint16Array(F),q.itemSize,q.normalized);else if((F instanceof Uint32Array||F instanceof Int32Array)&&!X.startsWith("_"))console.warn(`GLTFExporter: Attribute "${X}" converted to type FLOAT.`),N=YU.Utils.toFloat32BufferAttribute(q);let D=this.processAccessor(N||q,C);if(D!==null){if(!X.startsWith("_"))this.detectMeshQuantization(X,q);U[X]=D,Q.attributes.set(this.getUID(q),D)}}if(O!==void 0)C.setAttribute("normal",O);if(Object.keys(U).length===0)return null;if(A.morphTargetInfluences!==void 0&&A.morphTargetInfluences.length>0){let X=[],q=[],M={};if(A.morphTargetDictionary!==void 0)for(let F in A.morphTargetDictionary)M[A.morphTargetDictionary[F]]=F;for(let F=0;F<A.morphTargetInfluences.length;++F){let D={},_=!1;for(let w in C.morphAttributes){if(w!=="position"&&w!=="normal"){if(!_)console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),_=!0;continue}let k=C.morphAttributes[w][F],T=w.toUpperCase(),z=C.attributes[w];if(Q.attributes.has(this.getUID(k,!0))){D[T]=Q.attributes.get(this.getUID(k,!0));continue}let j=k.clone();if(!C.morphTargetsRelative)for(let v=0,g=k.count;v<g;v++)for(let P=0;P<k.itemSize;P++){if(P===0)j.setX(v,k.getX(v)-z.getX(v));if(P===1)j.setY(v,k.getY(v)-z.getY(v));if(P===2)j.setZ(v,k.getZ(v)-z.getZ(v));if(P===3)j.setW(v,k.getW(v)-z.getW(v))}D[T]=this.processAccessor(j,C),Q.attributes.set(this.getUID(z,!0),D[T])}if(H.push(D),X.push(A.morphTargetInfluences[F]),A.morphTargetDictionary!==void 0)q.push(M[F])}if(J.weights=X,q.length>0)J.extras={},J.extras.targetNames=q}let $=Array.isArray(A.material);if($&&C.groups.length===0)return null;let L=!1;if($&&C.index===null){let X=[];for(let q=0,M=C.attributes.position.count;q<M;q++)X[q]=q;C.setIndex(X),L=!0}let W=$?A.material:[A.material],Z=$?C.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let X=0,q=Z.length;X<q;X++){let M={mode:K,attributes:U};if(this.serializeUserData(C,M),H.length>0)M.targets=H;if(C.index!==null){let D=this.getUID(C.index);if(Z[X].start!==void 0||Z[X].count!==void 0)D+=":"+Z[X].start+":"+Z[X].count;if(Q.attributes.has(D))M.indices=Q.attributes.get(D);else M.indices=this.processAccessor(C.index,C,Z[X].start,Z[X].count),Q.attributes.set(D,M.indices);if(M.indices===null)delete M.indices}let F=await this.processMaterialAsync(W[Z[X].materialIndex]);if(F!==null)M.material=F;Y.push(M)}if(L===!0)C.setIndex(null);if(J.primitives=Y,!E.meshes)E.meshes=[];await this._invokeAllAsync(function(X){X.writeMesh&&X.writeMesh(A,J)});let G=E.meshes.push(J)-1;return Q.meshes.set(I,G),G}detectMeshQuantization(A,Q){if(this.extensionsUsed[HH])return;let E=void 0;switch(Q.array.constructor){case Int8Array:E="byte";break;case Uint8Array:E="unsigned byte";break;case Int16Array:E="short";break;case Uint16Array:E="unsigned short";break;default:return}if(Q.normalized)E+=" normalized";let B=A.split("_",1)[0];if(sN[B]&&sN[B].includes(E))this.extensionsUsed[HH]=!0,this.extensionsRequired[HH]=!0}processCamera(A){let Q=this.json;if(!Q.cameras)Q.cameras=[];let E=A.isOrthographicCamera,B={type:E?"orthographic":"perspective"};if(E)B.orthographic={xmag:A.right*2,ymag:A.top*2,zfar:A.far<=0?0.001:A.far,znear:A.near<0?0:A.near};else B.perspective={aspectRatio:A.aspect,yfov:o0.degToRad(A.fov),zfar:A.far<=0?0.001:A.far,znear:A.near<0?0:A.near};if(A.name!=="")B.name=A.type;return Q.cameras.push(B)-1}processAnimation(A,Q){let E=this.json,B=this.nodeMap;if(!E.animations)E.animations=[];A=YU.Utils.mergeMorphTargetTracks(A.clone(),Q);let I=A.tracks,C=[],K=[];for(let J=0;J<I.length;++J){let U=I[J],Y=T0.parseTrackName(U.name),H=T0.findNode(Q,Y.nodeName),R=iN[Y.propertyName];if(Y.objectName==="bones")if(H.isSkinnedMesh===!0)H=H.skeleton.getBoneByName(Y.objectIndex);else H=void 0;if(!H||!R){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',U.name);continue}let O=1,N=U.values.length/U.times.length;if(R===iN.morphTargetInfluences)N/=H.morphTargetInfluences.length;let $;if(U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0)$="CUBICSPLINE",N/=3;else if(U.getInterpolation()===g8)$="STEP";else $="LINEAR";K.push({input:this.processAccessor(new tA(U.times,O)),output:this.processAccessor(new tA(U.values,N)),interpolation:$}),C.push({sampler:K.length-1,target:{node:B.get(H),path:R}})}return E.animations.push({name:A.name||"clip_"+E.animations.length,samplers:K,channels:C}),E.animations.length-1}processSkin(A){let Q=this.json,E=this.nodeMap,B=Q.nodes[E.get(A)],I=A.skeleton;if(I===void 0)return null;let C=A.skeleton.bones[0];if(C===void 0)return null;let K=[],J=new Float32Array(I.bones.length*16),U=new RA;for(let H=0;H<I.bones.length;++H)K.push(E.get(I.bones[H])),U.copy(I.boneInverses[H]),U.multiply(A.bindMatrix).toArray(J,H*16);if(Q.skins===void 0)Q.skins=[];return Q.skins.push({inverseBindMatrices:this.processAccessor(new tA(J,16)),joints:K,skeleton:E.get(C)}),B.skin=Q.skins.length-1}async processNodeAsync(A){let Q=this.json,E=this.options,B=this.nodeMap;if(!Q.nodes)Q.nodes=[];let I={};if(E.trs){let K=A.quaternion.toArray(),J=A.position.toArray(),U=A.scale.toArray();if(!EK(K,[0,0,0,1]))I.rotation=K;if(!EK(J,[0,0,0]))I.translation=J;if(!EK(U,[1,1,1]))I.scale=U}else{if(A.matrixAutoUpdate)A.updateMatrix();if(Hw(A.matrix)===!1)I.matrix=A.matrix.elements}if(A.name!=="")I.name=String(A.name);if(this.serializeUserData(A,I),A.isMesh||A.isLine||A.isPoints){let K=await this.processMeshAsync(A);if(K!==null)I.mesh=K}else if(A.isCamera)I.camera=this.processCamera(A);if(A.isSkinnedMesh)this.skins.push(A);if(A.children.length>0){let K=[];for(let J=0,U=A.children.length;J<U;J++){let Y=A.children[J];if(Y.visible||E.onlyVisible===!1){let H=await this.processNodeAsync(Y);if(H!==null)K.push(H)}}if(K.length>0)I.children=K}await this._invokeAllAsync(function(K){K.writeNode&&K.writeNode(A,I)});let C=Q.nodes.push(I)-1;return B.set(A,C),C}async processSceneAsync(A){let Q=this.json,E=this.options;if(!Q.scenes)Q.scenes=[],Q.scene=0;let B={};if(A.name!=="")B.name=A.name;Q.scenes.push(B);let I=[];for(let C=0,K=A.children.length;C<K;C++){let J=A.children[C];if(J.visible||E.onlyVisible===!1){let U=await this.processNodeAsync(J);if(U!==null)I.push(U)}}if(I.length>0)B.nodes=I;this.serializeUserData(A,B)}async processObjectsAsync(A){let Q=new yQ;Q.name="AuxScene";for(let E=0;E<A.length;E++)Q.children.push(A[E]);await this.processSceneAsync(Q)}async processInputAsync(A){let Q=this.options;A=A instanceof Array?A:[A],await this._invokeAllAsync(function(B){B.beforeParse&&B.beforeParse(A)});let E=[];for(let B=0;B<A.length;B++)if(A[B]instanceof yQ)await this.processSceneAsync(A[B]);else E.push(A[B]);if(E.length>0)await this.processObjectsAsync(E);for(let B=0;B<this.skins.length;++B)this.processSkin(this.skins[B]);for(let B=0;B<Q.animations.length;++B)this.processAnimation(Q.animations[B],A[0]);await this._invokeAllAsync(function(B){B.afterParse&&B.afterParse(A)})}async _invokeAllAsync(A){for(let Q=0,E=this.plugins.length;Q<E;Q++)await A(this.plugins[Q])}}class QG{constructor(A){this.writer=A,this.name="KHR_lights_punctual"}writeNode(A,Q){if(!A.isLight)return;if(!A.isDirectionalLight&&!A.isPointLight&&!A.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",A);return}let E=this.writer,B=E.json,I=E.extensionsUsed,C={};if(A.name)C.name=A.name;if(C.color=A.color.toArray(),C.intensity=A.intensity,A.isDirectionalLight)C.type="directional";else if(A.isPointLight){if(C.type="point",A.distance>0)C.range=A.distance}else if(A.isSpotLight){if(C.type="spot",A.distance>0)C.range=A.distance;C.spot={},C.spot.innerConeAngle=(1-A.penumbra)*A.angle,C.spot.outerConeAngle=A.angle}if(A.decay!==void 0&&A.decay!==2)console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2.");if(A.target&&(A.target.parent!==A||A.target.position.x!==0||A.target.position.y!==0||A.target.position.z!==-1))console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1.");if(!I[this.name])B.extensions=B.extensions||{},B.extensions[this.name]={lights:[]},I[this.name]=!0;let K=B.extensions[this.name].lights;K.push(C),Q.extensions=Q.extensions||{},Q.extensions[this.name]={light:K.length-1}}}class EG{constructor(A){this.writer=A,this.name="KHR_materials_unlit"}async writeMaterialAsync(A,Q){if(!A.isMeshBasicMaterial)return;let B=this.writer.extensionsUsed;Q.extensions=Q.extensions||{},Q.extensions[this.name]={},B[this.name]=!0,Q.pbrMetallicRoughness.metallicFactor=0,Q.pbrMetallicRoughness.roughnessFactor=0.9}}class BG{constructor(A){this.writer=A,this.name="KHR_materials_clearcoat"}async writeMaterialAsync(A,Q){if(!A.isMeshPhysicalMaterial||A.clearcoat===0)return;let E=this.writer,B=E.extensionsUsed,I={};if(I.clearcoatFactor=A.clearcoat,A.clearcoatMap){let C={index:await E.processTextureAsync(A.clearcoatMap),texCoord:A.clearcoatMap.channel};E.applyTextureTransform(C,A.clearcoatMap),I.clearcoatTexture=C}if(I.clearcoatRoughnessFactor=A.clearcoatRoughness,A.clearcoatRoughnessMap){let C={index:await E.processTextureAsync(A.clearcoatRoughnessMap),texCoord:A.clearcoatRoughnessMap.channel};E.applyTextureTransform(C,A.clearcoatRoughnessMap),I.clearcoatRoughnessTexture=C}if(A.clearcoatNormalMap){let C={index:await E.processTextureAsync(A.clearcoatNormalMap),texCoord:A.clearcoatNormalMap.channel};if(A.clearcoatNormalScale.x!==1)C.scale=A.clearcoatNormalScale.x;E.applyTextureTransform(C,A.clearcoatNormalMap),I.clearcoatNormalTexture=C}Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class IG{constructor(A){this.writer=A,this.name="KHR_materials_dispersion"}async writeMaterialAsync(A,Q){if(!A.isMeshPhysicalMaterial||A.dispersion===0)return;let B=this.writer.extensionsUsed,I={};I.dispersion=A.dispersion,Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class CG{constructor(A){this.writer=A,this.name="KHR_materials_iridescence"}async writeMaterialAsync(A,Q){if(!A.isMeshPhysicalMaterial||A.iridescence===0)return;let E=this.writer,B=E.extensionsUsed,I={};if(I.iridescenceFactor=A.iridescence,A.iridescenceMap){let C={index:await E.processTextureAsync(A.iridescenceMap),texCoord:A.iridescenceMap.channel};E.applyTextureTransform(C,A.iridescenceMap),I.iridescenceTexture=C}if(I.iridescenceIor=A.iridescenceIOR,I.iridescenceThicknessMinimum=A.iridescenceThicknessRange[0],I.iridescenceThicknessMaximum=A.iridescenceThicknessRange[1],A.iridescenceThicknessMap){let C={index:await E.processTextureAsync(A.iridescenceThicknessMap),texCoord:A.iridescenceThicknessMap.channel};E.applyTextureTransform(C,A.iridescenceThicknessMap),I.iridescenceThicknessTexture=C}Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class KG{constructor(A){this.writer=A,this.name="KHR_materials_transmission"}async writeMaterialAsync(A,Q){if(!A.isMeshPhysicalMaterial||A.transmission===0)return;let E=this.writer,B=E.extensionsUsed,I={};if(I.transmissionFactor=A.transmission,A.transmissionMap){let C={index:await E.processTextureAsync(A.transmissionMap),texCoord:A.transmissionMap.channel};E.applyTextureTransform(C,A.transmissionMap),I.transmissionTexture=C}Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class JG{constructor(A){this.writer=A,this.name="KHR_materials_volume"}async writeMaterialAsync(A,Q){if(!A.isMeshPhysicalMaterial||A.transmission===0)return;let E=this.writer,B=E.extensionsUsed,I={};if(I.thicknessFactor=A.thickness,A.thicknessMap){let C={index:await E.processTextureAsync(A.thicknessMap),texCoord:A.thicknessMap.channel};E.applyTextureTransform(C,A.thicknessMap),I.thicknessTexture=C}if(A.attenuationDistance!==1/0)I.attenuationDistance=A.attenuationDistance;I.attenuationColor=A.attenuationColor.toArray(),Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class UG{constructor(A){this.writer=A,this.name="KHR_materials_ior"}async writeMaterialAsync(A,Q){if(!A.isMeshPhysicalMaterial||A.ior===1.5)return;let B=this.writer.extensionsUsed,I={};I.ior=A.ior,Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class YG{constructor(A){this.writer=A,this.name="KHR_materials_specular"}async writeMaterialAsync(A,Q){if(!A.isMeshPhysicalMaterial||A.specularIntensity===1&&A.specularColor.equals(Cw)&&!A.specularIntensityMap&&!A.specularColorMap)return;let E=this.writer,B=E.extensionsUsed,I={};if(A.specularIntensityMap){let C={index:await E.processTextureAsync(A.specularIntensityMap),texCoord:A.specularIntensityMap.channel};E.applyTextureTransform(C,A.specularIntensityMap),I.specularTexture=C}if(A.specularColorMap){let C={index:await E.processTextureAsync(A.specularColorMap),texCoord:A.specularColorMap.channel};E.applyTextureTransform(C,A.specularColorMap),I.specularColorTexture=C}I.specularFactor=A.specularIntensity,I.specularColorFactor=A.specularColor.toArray(),Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class OG{constructor(A){this.writer=A,this.name="KHR_materials_sheen"}async writeMaterialAsync(A,Q){if(!A.isMeshPhysicalMaterial||A.sheen==0)return;let E=this.writer,B=E.extensionsUsed,I={};if(A.sheenRoughnessMap){let C={index:await E.processTextureAsync(A.sheenRoughnessMap),texCoord:A.sheenRoughnessMap.channel};E.applyTextureTransform(C,A.sheenRoughnessMap),I.sheenRoughnessTexture=C}if(A.sheenColorMap){let C={index:await E.processTextureAsync(A.sheenColorMap),texCoord:A.sheenColorMap.channel};E.applyTextureTransform(C,A.sheenColorMap),I.sheenColorTexture=C}I.sheenRoughnessFactor=A.sheenRoughness,I.sheenColorFactor=A.sheenColor.toArray(),Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class HG{constructor(A){this.writer=A,this.name="KHR_materials_anisotropy"}async writeMaterialAsync(A,Q){if(!A.isMeshPhysicalMaterial||A.anisotropy==0)return;let E=this.writer,B=E.extensionsUsed,I={};if(A.anisotropyMap){let C={index:await E.processTextureAsync(A.anisotropyMap)};E.applyTextureTransform(C,A.anisotropyMap),I.anisotropyTexture=C}I.anisotropyStrength=A.anisotropy,I.anisotropyRotation=A.anisotropyRotation,Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class ZG{constructor(A){this.writer=A,this.name="KHR_materials_emissive_strength"}async writeMaterialAsync(A,Q){if(!A.isMeshStandardMaterial||A.emissiveIntensity===1)return;let B=this.writer.extensionsUsed,I={};I.emissiveStrength=A.emissiveIntensity,Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class RG{constructor(A){this.writer=A,this.name="EXT_materials_bump"}async writeMaterialAsync(A,Q){if(!A.isMeshStandardMaterial||A.bumpScale===1&&!A.bumpMap)return;let E=this.writer,B=E.extensionsUsed,I={};if(A.bumpMap){let C={index:await E.processTextureAsync(A.bumpMap),texCoord:A.bumpMap.channel};E.applyTextureTransform(C,A.bumpMap),I.bumpTexture=C}I.bumpFactor=A.bumpScale,Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,B[this.name]=!0}}class NG{constructor(A){this.writer=A,this.name="EXT_mesh_gpu_instancing"}writeNode(A,Q){if(!A.isInstancedMesh)return;let E=this.writer,B=A,I=new Float32Array(B.count*3),C=new Float32Array(B.count*4),K=new Float32Array(B.count*3),J=new RA,U=new y,Y=new J0,H=new y;for(let O=0;O<B.count;O++)B.getMatrixAt(O,J),J.decompose(U,Y,H),U.toArray(I,O*3),Y.toArray(C,O*4),H.toArray(K,O*3);let R={TRANSLATION:E.processAccessor(new tA(I,3)),ROTATION:E.processAccessor(new tA(C,4)),SCALE:E.processAccessor(new tA(K,3))};if(B.instanceColor)R._COLOR_0=E.processAccessor(B.instanceColor);Q.extensions=Q.extensions||{},Q.extensions[this.name]={attributes:R},E.extensionsUsed[this.name]=!0,E.extensionsRequired[this.name]=!0}}YU.Utils={insertKeyframe:function(A,Q){let B=A.getValueSize(),I=new A.TimeBufferType(A.times.length+1),C=new A.ValueBufferType(A.values.length+B),K=A.createInterpolant(new A.ValueBufferType(B)),J;if(A.times.length===0){I[0]=Q;for(let U=0;U<B;U++)C[U]=0;J=0}else if(Q<A.times[0]){if(Math.abs(A.times[0]-Q)<0.001)return 0;I[0]=Q,I.set(A.times,1),C.set(K.evaluate(Q),0),C.set(A.values,B),J=0}else if(Q>A.times[A.times.length-1]){if(Math.abs(A.times[A.times.length-1]-Q)<0.001)return A.times.length-1;I[I.length-1]=Q,I.set(A.times,0),C.set(A.values,0),C.set(K.evaluate(Q),A.values.length),J=I.length-1}else for(let U=0;U<A.times.length;U++){if(Math.abs(A.times[U]-Q)<0.001)return U;if(A.times[U]<Q&&A.times[U+1]>Q){I.set(A.times.slice(0,U+1),0),I[U+1]=Q,I.set(A.times.slice(U+1),U+2),C.set(A.values.slice(0,(U+1)*B),0),C.set(K.evaluate(Q),(U+1)*B),C.set(A.values.slice((U+1)*B),(U+2)*B),J=U+1;break}}return A.times=I,A.values=C,J},mergeMorphTargetTracks:function(A,Q){let E=[],B={},I=A.tracks;for(let C=0;C<I.length;++C){let K=I[C],J=T0.parseTrackName(K.name),U=T0.findNode(Q,J.nodeName);if(J.propertyName!=="morphTargetInfluences"||J.propertyIndex===void 0){E.push(K);continue}if(K.createInterpolant!==K.InterpolantFactoryMethodDiscrete&&K.createInterpolant!==K.InterpolantFactoryMethodLinear){if(K.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),K=K.clone(),K.setInterpolation(T1)}let Y=U.morphTargetInfluences.length,H=U.morphTargetDictionary[J.propertyIndex];if(H===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+J.propertyIndex);let R;if(B[U.uuid]===void 0){R=K.clone();let N=new R.ValueBufferType(Y*R.times.length);for(let $=0;$<R.times.length;$++)N[$*Y+H]=R.values[$];R.name=(J.nodeName||"")+".morphTargetInfluences",R.values=N,B[U.uuid]=R,E.push(R);continue}let O=K.createInterpolant(new K.ValueBufferType(1));R=B[U.uuid];for(let N=0;N<R.times.length;N++)R.values[N*Y+H]=O.evaluate(R.times[N]);for(let N=0;N<K.times.length;N++){let $=this.insertKeyframe(R,K.times[N]);R.values[$*Y+H]=K.values[N]}}return A.tracks=E,A},toFloat32BufferAttribute:function(A){let Q=new tA(new Float32Array(A.count*A.itemSize),A.itemSize,!1);if(!A.normalized&&!A.isInterleavedBufferAttribute)return Q.array.set(A.array),Q;for(let E=0,B=A.count;E<B;E++)for(let I=0;I<A.itemSize;I++)Q.setComponent(E,I,A.getComponent(E,I));return Q}};var WG=0;var RH=2;var XG=1;var OU=2;var NH=0,GH=1;var $G=10;var LG=0;var O6=9;var BK=15,H6=16;var IK=22;var Z6=37;var CK=43;var R6=76;var N6=83;var G6=97;var W6=100;var X6=103;var $6=109;var WH=165,XH=166;var HU=1000066000;class $H{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Y6{constructor(A,Q,E,B){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(A.buffer,A.byteOffset+Q,E),this._littleEndian=B,this._offset=0}_nextUint8(){let A=this._dataView.getUint8(this._offset);return this._offset+=1,A}_nextUint16(){let A=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,A}_nextUint32(){let A=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,A}_nextUint64(){let A=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,A}_nextInt32(){let A=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,A}_nextUint8Array(A){let Q=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,A);return this._offset+=A,Q}_skip(A){return this._offset+=A,this}_scan(A,Q){Q===void 0&&(Q=0);let E=this._offset,B=0;for(;this._dataView.getUint8(this._offset)!==Q&&B<A;)B++,this._offset++;return B<A&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+E,B)}}var yV=new Uint8Array([0]),ZE=[171,75,84,88,32,50,48,187,13,10,26,10];function GG(A){return(/*@__PURE__*/new TextDecoder()).decode(A)}function qG(A){let Q=new Uint8Array(A.buffer,A.byteOffset,ZE.length);if(Q[0]!==ZE[0]||Q[1]!==ZE[1]||Q[2]!==ZE[2]||Q[3]!==ZE[3]||Q[4]!==ZE[4]||Q[5]!==ZE[5]||Q[6]!==ZE[6]||Q[7]!==ZE[7]||Q[8]!==ZE[8]||Q[9]!==ZE[9]||Q[10]!==ZE[10]||Q[11]!==ZE[11])throw new Error("Missing KTX 2.0 identifier.");let E=new $H,B=17*Uint32Array.BYTES_PER_ELEMENT,I=new Y6(A,ZE.length,B,!0);E.vkFormat=I._nextUint32(),E.typeSize=I._nextUint32(),E.pixelWidth=I._nextUint32(),E.pixelHeight=I._nextUint32(),E.pixelDepth=I._nextUint32(),E.layerCount=I._nextUint32(),E.faceCount=I._nextUint32();let C=I._nextUint32();E.supercompressionScheme=I._nextUint32();let K=I._nextUint32(),J=I._nextUint32(),U=I._nextUint32(),Y=I._nextUint32(),H=I._nextUint64(),R=I._nextUint64(),O=new Y6(A,ZE.length+B,3*C*8,!0);for(let V=0;V<C;V++)E.levels.push({levelData:new Uint8Array(A.buffer,A.byteOffset+O._nextUint64(),O._nextUint64()),uncompressedByteLength:O._nextUint64()});let N=new Y6(A,K,J,!0),$={vendorId:N._skip(4)._nextUint16(),descriptorType:N._nextUint16(),versionNumber:N._nextUint16(),descriptorBlockSize:N._nextUint16(),colorModel:N._nextUint8(),colorPrimaries:N._nextUint8(),transferFunction:N._nextUint8(),flags:N._nextUint8(),texelBlockDimension:[N._nextUint8(),N._nextUint8(),N._nextUint8(),N._nextUint8()],bytesPlane:[N._nextUint8(),N._nextUint8(),N._nextUint8(),N._nextUint8(),N._nextUint8(),N._nextUint8(),N._nextUint8(),N._nextUint8()],samples:[]},L=($.descriptorBlockSize/4-6)/4;for(let V=0;V<L;V++){let S={bitOffset:N._nextUint16(),bitLength:N._nextUint8(),channelType:N._nextUint8(),samplePosition:[N._nextUint8(),N._nextUint8(),N._nextUint8(),N._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&S.channelType?(S.sampleLower=N._nextInt32(),S.sampleUpper=N._nextInt32()):(S.sampleLower=N._nextUint32(),S.sampleUpper=N._nextUint32()),$.samples[V]=S}E.dataFormatDescriptor.length=0,E.dataFormatDescriptor.push($);let W=new Y6(A,U,Y,!0);for(;W._offset<Y;){let V=W._nextUint32(),S=W._scan(V),h=GG(S);if(E.keyValue[h]=W._nextUint8Array(V-S.byteLength-1),h.match(/^ktx/i)){let x=GG(E.keyValue[h]);E.keyValue[h]=x.substring(0,x.lastIndexOf("\x00"))}W._skip(V%4?4-V%4:0)}if(R<=0)return E;let Z=new Y6(A,H,R,!0),G=Z._nextUint16(),X=Z._nextUint16(),q=Z._nextUint32(),M=Z._nextUint32(),F=Z._nextUint32(),D=Z._nextUint32(),_=[];for(let V=0;V<C;V++)_.push({imageFlags:Z._nextUint32(),rgbSliceByteOffset:Z._nextUint32(),rgbSliceByteLength:Z._nextUint32(),alphaSliceByteOffset:Z._nextUint32(),alphaSliceByteLength:Z._nextUint32()});let w=H+Z._offset,k=w+q,T=k+M,z=T+F,j=new Uint8Array(A.buffer,A.byteOffset+w,q),v=new Uint8Array(A.buffer,A.byteOffset+k,M),g=new Uint8Array(A.buffer,A.byteOffset+T,F),P=new Uint8Array(A.buffer,A.byteOffset+z,D);return E.globalData={endpointCount:G,selectorCount:X,imageDescs:_,endpointsData:j,selectorsData:v,tablesData:g,extendedData:P},E}var oV={[V0]:{[m0]:{[YQ]:$6,[b0]:$6},[sA]:{[YQ]:G6,[b0]:G6},[x0]:{[YQ]:Z6,[b0]:Z6,[N0]:CK}},[jE]:{[m0]:{[YQ]:X6,[b0]:X6},[sA]:{[YQ]:N6,[b0]:N6},[x0]:{[YQ]:H6,[b0]:H6,[N0]:IK}},[SQ]:{[m0]:{[YQ]:W6,[b0]:W6},[sA]:{[YQ]:R6,[b0]:R6},[x0]:{[YQ]:O6,[b0]:O6,[N0]:BK}}};var rV={[m0]:[3212836864,1065353216],[sA]:[3212836864,1065353216],[x0]:[0,255]};var Zj=new y,Rj=new $B,Nj=new UQ,Gj=new y,Wj=new PQ;class KK extends hA{constructor(A=(B,I,C)=>C.set(B,I,Math.cos(B)*Math.sin(I)),Q=8,E=8){super();this.type="ParametricGeometry",this.parameters={func:A,slices:Q,stacks:E};let B=[],I=[],C=[],K=[],J=0.00001,U=new y,Y=new y,H=new y,R=new y,O=new y,N=Q+1;for(let $=0;$<=E;$++){let L=$/E;for(let W=0;W<=Q;W++){let Z=W/Q;if(A(Z,L,Y),I.push(Y.x,Y.y,Y.z),Z-J>=0)A(Z-J,L,H),R.subVectors(Y,H);else A(Z+J,L,H),R.subVectors(H,Y);if(L-J>=0)A(Z,L-J,H),O.subVectors(Y,H);else A(Z,L+J,H),O.subVectors(H,Y);U.crossVectors(R,O).normalize(),C.push(U.x,U.y,U.z),K.push(Z,L)}}for(let $=0;$<E;$++)for(let L=0;L<Q;L++){let W=$*N+L,Z=$*N+L+1,G=($+1)*N+L+1,X=($+1)*N+L;B.push(W,Z,X),B.push(Z,G,X)}this.setIndex(B),this.setAttribute("position",new PA(I,3)),this.setAttribute("normal",new PA(C,3)),this.setAttribute("uv",new PA(K,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}}var JK={klein:function(A,Q,E){Q*=Math.PI,A*=2*Math.PI,Q=Q*2;let B,I;if(Q<Math.PI)B=3*Math.cos(Q)*(1+Math.sin(Q))+2*(1-Math.cos(Q)/2)*Math.cos(Q)*Math.cos(A),I=-8*Math.sin(Q)-2*(1-Math.cos(Q)/2)*Math.sin(Q)*Math.cos(A);else B=3*Math.cos(Q)*(1+Math.sin(Q))+2*(1-Math.cos(Q)/2)*Math.cos(A+Math.PI),I=-8*Math.sin(Q);let C=-2*(1-Math.cos(Q)/2)*Math.sin(A);E.set(B,C,I)},plane:function(A,Q){return function(E,B,I){let C=E*A,K=0,J=B*Q;I.set(C,0,J)}},mobius:function(A,Q,E){A=A-0.5;let B=2*Math.PI*Q,I=2,C=Math.cos(B)*(I+A*Math.cos(B/2)),K=Math.sin(B)*(I+A*Math.cos(B/2)),J=A*Math.sin(B/2);E.set(C,K,J)},mobius3d:function(A,Q,E){A*=Math.PI,Q*=2*Math.PI,A=A*2;let B=A/2,I=2.25,C=0.125,K=0.65,J=C*Math.cos(Q)*Math.cos(B)-K*Math.sin(Q)*Math.sin(B),U=C*Math.cos(Q)*Math.sin(B)+K*Math.sin(Q)*Math.cos(B),Y=(I+J)*Math.sin(A);J=(I+J)*Math.cos(A),E.set(J,Y,U)}};JK.TubeGeometry=class A extends KK{constructor(Q,E=64,B=1,I=8,C=!1){let K=E+1,J=Q.computeFrenetFrames(E,C),U=J.tangents,Y=J.normals,H=J.binormals,R=new y;function O(N,$,L){$*=2*Math.PI;let W=Math.floor(N*(K-1));Q.getPointAt(N,R);let Z=Y[W],G=H[W],X=-B*Math.cos($),q=B*Math.sin($);R.x+=X*Z.x+q*G.x,R.y+=X*Z.y+q*G.y,R.z+=X*Z.z+q*G.z,L.copy(R)}super(O,E,I);this.tangents=U,this.normals=Y,this.binormals=H,this.path=Q,this.segments=E,this.radius=B,this.segmentsRadius=I,this.closed=C}};JK.TorusKnotGeometry=class A extends JK.TubeGeometry{constructor(Q=200,E=40,B=64,I=8,C=2,K=3){class J extends rQ{getPoint(R,O=new y){let N=O;R*=Math.PI*2;let $=0.5,L=(1+$*Math.cos(K*R))*Math.cos(C*R),W=(1+$*Math.cos(K*R))*Math.sin(C*R),Z=$*Math.sin(K*R);return N.set(L,W,Z).multiplyScalar(Q)}}let U=B,Y=I,H=new J;super(H,U,E,Y,!0,!1);this.radius=Q,this.tube=E,this.segmentsT=B,this.segmentsR=I,this.p=C,this.q=K}};JK.SphereGeometry=class A extends KK{constructor(Q,E,B){function I(C,K,J){C*=Math.PI,K*=2*Math.PI;let U=Q*Math.sin(C)*Math.cos(K),Y=Q*Math.sin(C)*Math.sin(K),H=Q*Math.cos(C);J.set(U,Y,H)}super(I,E,B)}};JK.PlaneGeometry=class A extends KK{constructor(Q,E,B,I){function C(K,J,U){let Y=K*Q,H=0,R=J*E;U.set(Y,0,R)}super(C,B,I)}};var Pj=new y;function LH(A,Q){if(Q===W9)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),A;if(Q===z1||Q===x8){let E=A.getIndex();if(E===null){let K=[],J=A.getAttribute("position");if(J!==void 0){for(let U=0;U<J.count;U++)K.push(U);A.setIndex(K),E=A.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),A}let B=E.count-2,I=[];if(Q===z1)for(let K=1;K<=B;K++)I.push(E.getX(0)),I.push(E.getX(K)),I.push(E.getX(K+1));else for(let K=0;K<B;K++)if(K%2===0)I.push(E.getX(K)),I.push(E.getX(K+1)),I.push(E.getX(K+2));else I.push(E.getX(K+2)),I.push(E.getX(K+1)),I.push(E.getX(K));if(I.length/3!==B)console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let C=A.clone();return C.setIndex(I),C.clearGroups(),C}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",Q),A}var oj=new y,rj=new y,aj=new E0;var Av=new y,Qv=new y;var Uv=new AA;var Yv=new bE;var Zv=new xB,Rv=new y,Nv=new y,Gv=new y,Wv=new y,Xv=new y,$v=new y,Lv=new y,qv=new y,Fv=new y,Dv=new y,Mv=new y,wv=new y,_v=new y,kv=new y,Sv=new RA,Tv=new J0,zv=new y;class L6{static init(){let A=[1,0,0,0.00002,1,0,0,0.000503905,1,0,0,0.00201562,1,0,0,0.00453516,1,0,0,0.00806253,1,0,0,0.0125978,1,0,0,0.018141,1,0,0,0.0246924,1,0,0,0.0322525,1,0,0,0.0408213,1,0,0,0.0503999,1,0,0,0.0609894,1,0,0,0.0725906,1,0,0,0.0852058,1,0,0,0.0988363,1,0,0,0.113484,1,0,0,0.129153,1,0,0,0.145839,1,0,0,0.163548,1,0,0,0.182266,1,0,0,0.201942,1,0,0,0.222314,1,0,0,0.241906,1,0,0,0.262314,1,0,0,0.285754,1,0,0,0.310159,1,0,0,0.335426,1,0,0,0.361341,1,0,0,0.387445,1,0,0,0.412784,1,0,0,0.438197,1,0,0,0.466966,1,0,0,0.49559,1,0,0,0.523448,1,0,0,0.549938,1,0,0,0.57979,1,0,0,0.608746,1,0,0,0.636185,1,0,0,0.664748,1,0,0,0.69313,1,0,0,0.71966,1,0,0,0.747662,1,0,0,0.774023,1,0,0,0.799775,1,0,0,0.825274,1,0,0,0.849156,1,0,0,0.873248,1,0,0,0.89532,1,0,0,0.917565,1,0,0,0.937863,1,0,0,0.958139,1,0,0,0.976563,1,0,0,0.994658,1,0,0,1.0112,1,0,0,1.02712,1,0,0,1.04189,1,0,0,1.05568,1,0,0,1.06877,1,0,0,1.08058,1,0,0,1.09194,1,0,0,1.10191,1,0,0,1.11161,1,0,0,1.1199,1,0,0,1.12813,0.999547,-0.000000448815,0.0224417,0.0000199902,0.999495,-0.0000113079,0.0224406,0.000503651,0.999496,-0.0000452317,0.0224406,0.00201461,0.999496,-0.000101772,0.0224406,0.00453287,0.999495,-0.000180928,0.0224406,0.00805845,0.999497,-0.000282702,0.0224406,0.0125914,0.999496,-0.000407096,0.0224406,0.0181319,0.999498,-0.000554114,0.0224406,0.02468,0.999499,-0.000723768,0.0224406,0.0322363,0.999495,-0.000916058,0.0224405,0.0408009,0.999499,-0.00113101,0.0224408,0.050375,0.999494,-0.00136863,0.0224405,0.0609586,0.999489,-0.00162896,0.0224401,0.0725537,0.999489,-0.00191201,0.0224414,0.0851619,0.999498,-0.00221787,0.0224413,0.0987867,0.999492,-0.00254642,0.0224409,0.113426,0.999507,-0.00289779,0.0224417,0.129088,0.999494,-0.0032716,0.0224386,0.145767,0.999546,-0.0036673,0.0224424,0.163472,0.999543,-0.00408166,0.0224387,0.182182,0.999499,-0.00450056,0.0224338,0.201843,0.999503,-0.00483661,0.0224203,0.222198,0.999546,-0.00452928,0.022315,0.241714,0.999508,-0.00587403,0.0224329,0.262184,0.999509,-0.00638806,0.0224271,0.285609,0.999501,-0.00691028,0.0224166,0.309998,0.999539,-0.00741979,0.0223989,0.335262,0.999454,-0.00786282,0.0223675,0.361154,0.999529,-0.00811928,0.0222828,0.387224,0.999503,-0.00799941,0.0221063,0.41252,0.999561,-0.00952753,0.0223057,0.438006,0.999557,-0.0099134,0.0222065,0.466735,0.999541,-0.0100935,0.0220402,0.495332,0.999562,-0.00996821,0.0218067,0.523197,0.999556,-0.0105031,0.0217096,0.550223,0.999561,-0.0114191,0.0217215,0.579498,0.999588,-0.0111818,0.0213357,0.608416,0.999633,-0.0107725,0.0208689,0.635965,0.999527,-0.0121671,0.0210149,0.664476,0.999508,-0.0116005,0.020431,0.692786,0.999568,-0.0115604,0.0199791,0.719709,0.999671,-0.0121117,0.0197415,0.74737,0.999688,-0.0110769,0.0188846,0.773692,0.99962,-0.0122368,0.0188452,0.799534,0.999823,-0.0110325,0.0178001,0.825046,0.999599,-0.0114923,0.0174221,0.849075,0.999619,-0.0105923,0.0164345,0.872999,0.999613,-0.0105988,0.0158227,0.895371,0.99964,-0.00979861,0.0148131,0.917364,0.99977,-0.00967238,0.0140721,0.938002,0.999726,-0.00869175,0.0129543,0.957917,0.99973,-0.00866872,0.0122329,0.976557,0.999773,-0.00731956,0.0108958,0.994459,0.999811,-0.00756027,0.0102715,1.01118,0.999862,-0.00583732,0.00878781,1.02701,0.999835,-0.00631438,0.00827529,1.04186,0.999871,-0.00450785,0.00674583,1.05569,0.999867,-0.00486079,0.00621041,1.06861,0.999939,-0.00322072,0.00478301,1.08064,0.999918,-0.00318199,0.00406395,1.09181,1.00003,-0.00193348,0.00280682,1.10207,0.999928,-0.00153729,0.00198741,1.11152,0.999933,-0.000623666,0.000917714,1.12009,1,-0.00000102387,0.000000907581,1.12813,0.997866,-0.000000896716,0.0448334,0.0000199584,0.997987,-0.0000225945,0.0448389,0.000502891,0.997987,-0.0000903781,0.0448388,0.00201156,0.997985,-0.000203351,0.0448388,0.00452602,0.997986,-0.000361514,0.0448388,0.00804629,0.997987,-0.00056487,0.0448389,0.0125724,0.997988,-0.000813423,0.0448389,0.0181045,0.997984,-0.00110718,0.0448387,0.0246427,0.997985,-0.00144616,0.0448388,0.0321875,0.997987,-0.00183038,0.044839,0.0407392,0.997983,-0.00225987,0.0448387,0.0502986,0.997991,-0.00273467,0.0448389,0.0608667,0.997984,-0.00325481,0.0448384,0.0724444,0.998002,-0.00382043,0.044839,0.0850348,0.997997,-0.00443145,0.0448396,0.0986372,0.998007,-0.00508796,0.0448397,0.113255,0.998008,-0.00578985,0.04484,0.128891,0.998003,-0.00653683,0.0448384,0.145548,0.997983,-0.00732713,0.0448358,0.163221,0.997985,-0.00815454,0.0448358,0.181899,0.998005,-0.00898985,0.0448286,0.201533,0.998026,-0.00964404,0.0447934,0.221821,0.998055,-0.00922677,0.044611,0.241282,0.99804,-0.0117361,0.0448245,0.261791,0.998048,-0.0127628,0.0448159,0.285181,0.998088,-0.0138055,0.0447996,0.30954,0.998058,-0.0148206,0.0447669,0.334751,0.998099,-0.0156998,0.044697,0.36061,0.998116,-0.0161976,0.0445122,0.386603,0.998195,-0.015945,0.0441711,0.411844,0.998168,-0.0183947,0.0444255,0.43773,0.998184,-0.0197913,0.0443809,0.466009,0.998251,-0.0201426,0.0440689,0.494574,0.998305,-0.0198847,0.0435632,0.522405,0.998273,-0.0210577,0.043414,0.549967,0.998254,-0.0227901,0.0433943,0.578655,0.998349,-0.0223108,0.0426529,0.60758,0.99843,-0.0223088,0.042,0.635524,0.998373,-0.0241141,0.0418987,0.663621,0.998425,-0.0231446,0.0408118,0.691906,0.998504,-0.0233684,0.0400565,0.719339,0.998443,-0.0241652,0.0394634,0.74643,0.99848,-0.0228715,0.0380002,0.773086,0.998569,-0.023519,0.0372322,0.798988,0.998619,-0.0223108,0.0356468,0.824249,0.998594,-0.0223105,0.034523,0.848808,0.998622,-0.0213426,0.0328887,0.87227,0.998669,-0.0207912,0.0314374,0.895157,0.998705,-0.0198416,0.0296925,0.916769,0.998786,-0.0189168,0.0279634,0.937773,0.998888,-0.0178811,0.0261597,0.957431,0.99906,-0.0166845,0.0242159,0.976495,0.999038,-0.0155464,0.0222638,0.994169,0.999237,-0.0141349,0.0201967,1.01112,0.999378,-0.0129324,0.0181744,1.02692,0.999433,-0.0113192,0.0159898,1.04174,0.999439,-0.0101244,0.0140385,1.05559,0.999614,-0.00837456,0.0117826,1.06852,0.999722,-0.00721769,0.00983745,1.08069,0.999817,-0.00554067,0.00769002,1.09176,0.99983,-0.00426961,0.005782,1.10211,0.999964,-0.00273904,0.00374503,1.11152,1.00001,-0.00136739,0.00187176,1.12031,0.999946,0.0000393227,-0.000028919,1.12804,0.995847,-0.0000013435,0.0671785,0.000019916,0.995464,-0.0000338387,0.0671527,0.000501622,0.99547,-0.000135355,0.0671531,0.00200649,0.995471,-0.00030455,0.0671532,0.00451461,0.99547,-0.000541423,0.0671531,0.008026,0.995471,-0.00084598,0.0671531,0.0125407,0.99547,-0.00121823,0.0671531,0.0180589,0.99547,-0.00165817,0.0671531,0.0245806,0.995463,-0.00216583,0.0671526,0.0321062,0.995468,-0.00274127,0.0671527,0.0406366,0.995474,-0.00338447,0.0671534,0.0501717,0.995473,-0.00409554,0.0671533,0.0607131,0.995478,-0.00487451,0.0671531,0.0722618,0.995476,-0.00572148,0.0671532,0.0848191,0.995477,-0.00663658,0.0671539,0.0983882,0.995498,-0.00761986,0.0671541,0.112972,0.995509,-0.00867094,0.0671542,0.128568,0.995509,-0.00978951,0.0671531,0.145183,0.995503,-0.0109725,0.0671491,0.162808,0.995501,-0.012211,0.0671465,0.181441,0.99553,-0.0134565,0.0671371,0.201015,0.99555,-0.014391,0.0670831,0.221206,0.99558,-0.014351,0.0668883,0.240813,0.995577,-0.0173997,0.0671055,0.261257,0.995602,-0.0191111,0.0671178,0.284467,0.995623,-0.0206705,0.0670946,0.308765,0.995658,-0.022184,0.0670472,0.333905,0.995705,-0.0234832,0.0669417,0.359677,0.995719,-0.0241933,0.0666714,0.385554,0.995786,-0.0243539,0.066266,0.410951,0.995887,-0.0271866,0.0664367,0.437163,0.995944,-0.0296012,0.0664931,0.464842,0.996004,-0.0301045,0.0660105,0.49332,0.996128,-0.0298311,0.0652694,0.521131,0.996253,-0.0316426,0.0650739,0.549167,0.996244,-0.0339043,0.0649433,0.57737,0.996309,-0.033329,0.0638926,0.606073,0.996417,-0.0338935,0.0630849,0.634527,0.996372,-0.0353104,0.0625083,0.66256,0.996542,-0.0348942,0.0611986,0.690516,0.996568,-0.0351614,0.060069,0.718317,0.996711,-0.0354317,0.0588522,0.74528,0.996671,-0.0349513,0.0571902,0.772061,0.996865,-0.0345622,0.0555321,0.798089,0.996802,-0.0342566,0.0537816,0.823178,0.996992,-0.0330862,0.0516095,0.847949,0.996944,-0.0324666,0.0495537,0.871431,0.997146,-0.0309544,0.0470302,0.894357,0.997189,-0.0299372,0.0446043,0.916142,0.997471,-0.0281389,0.0418812,0.937193,0.997515,-0.0268702,0.0391823,0.957,0.997812,-0.0247166,0.0361338,0.975936,0.998027,-0.0233525,0.0333945,0.99391,0.998233,-0.0209839,0.0301917,1.01075,0.998481,-0.0194309,0.027271,1.02669,0.998859,-0.0169728,0.0240162,1.04173,0.99894,-0.0152322,0.0210517,1.05551,0.999132,-0.0127497,0.0178632,1.06856,0.999369,-0.0108282,0.014787,1.08054,0.999549,-0.00845886,0.0116185,1.09185,0.999805,-0.0063937,0.00867209,1.10207,0.99985,-0.00414582,0.00566823,1.1117,0.999912,-0.00207443,0.00277562,1.12022,1.00001,0.0000870226,-0.000053766,1.12832,0.991943,-0.00000178672,0.0893382,0.0000198384,0.991952,-0.0000450183,0.089339,0.000499849,0.991956,-0.000180074,0.0893394,0.0019994,0.991955,-0.000405167,0.0893393,0.00449867,0.991953,-0.000720298,0.0893391,0.00799764,0.991955,-0.00112548,0.0893393,0.0124964,0.991957,-0.0016207,0.0893395,0.0179951,0.991958,-0.00220601,0.0893396,0.0244939,0.991947,-0.00288137,0.0893385,0.0319929,0.991962,-0.00364693,0.0893399,0.0404933,0.991965,-0.00450264,0.0893399,0.049995,0.99198,-0.00544862,0.0893411,0.0604995,0.99197,-0.00648491,0.0893397,0.0720074,0.991976,-0.00761164,0.089341,0.0845207,0.99198,-0.00882891,0.0893405,0.0980413,0.991982,-0.0101367,0.0893396,0.112571,0.992008,-0.011535,0.0893415,0.128115,0.992026,-0.0130228,0.0893414,0.144672,0.992064,-0.0145966,0.0893418,0.162241,0.992041,-0.0162421,0.0893359,0.180801,0.992086,-0.0178888,0.0893214,0.200302,0.992157,-0.0190368,0.0892401,0.220332,0.992181,-0.0195584,0.0890525,0.240144,0.992175,-0.0227257,0.0892153,0.260728,0.99221,-0.0254195,0.089304,0.283473,0.99222,-0.0274883,0.0892703,0.307673,0.992317,-0.0294905,0.0892027,0.332729,0.992374,-0.0311861,0.0890577,0.358387,0.992505,-0.0320656,0.0886994,0.384102,0.992568,-0.0329715,0.0883198,0.409767,0.992675,-0.036006,0.0883602,0.436145,0.992746,-0.0392897,0.0884591,0.463217,0.992873,-0.0399337,0.0878287,0.491557,0.992934,-0.040231,0.0870108,0.519516,0.993091,-0.0422013,0.0865857,0.547741,0.993259,-0.0443503,0.0861937,0.575792,0.993455,-0.0446368,0.0851187,0.604233,0.993497,-0.0454299,0.0840576,0.632925,0.993694,-0.0463296,0.0829671,0.660985,0.993718,-0.0470619,0.0817185,0.688714,0.993973,-0.0468838,0.0800294,0.716743,0.994207,-0.046705,0.0781286,0.74377,0.994168,-0.0469698,0.0763337,0.77042,0.9945,-0.0456816,0.0738184,0.796659,0.994356,-0.0455518,0.0715545,0.821868,0.994747,-0.0439488,0.0686085,0.846572,0.994937,-0.0430056,0.065869,0.870435,0.995142,-0.0413414,0.0626446,0.893272,0.995451,-0.0396521,0.05929,0.915376,0.995445,-0.0378453,0.0558503,0.936196,0.995967,-0.0355219,0.0520949,0.956376,0.996094,-0.0335146,0.048377,0.975327,0.996622,-0.030682,0.0442575,0.993471,0.996938,-0.0285504,0.0404693,1.01052,0.997383,-0.0253399,0.0360903,1.02637,0.997714,-0.0231651,0.0322176,1.04139,0.998249,-0.0198138,0.0278433,1.05542,0.998596,-0.0174337,0.0238759,1.06846,0.998946,-0.0141349,0.0195944,1.08056,0.99928,-0.0115603,0.0156279,1.09181,0.999507,-0.00839065,0.0114607,1.10213,0.999697,-0.005666,0.00763325,1.11169,0.999869,-0.00269902,0.00364946,1.12042,1.00001,0.0000623836,-0.0000319288,1.12832,0.987221,-0.00000222675,0.111332,0.0000197456,0.98739,-0.0000561116,0.111351,0.000497563,0.987448,-0.000224453,0.111357,0.00199031,0.987441,-0.000505019,0.111357,0.0044782,0.987442,-0.000897816,0.111357,0.00796129,0.987442,-0.00140284,0.111357,0.0124396,0.987444,-0.00202012,0.111357,0.0179132,0.987442,-0.00274964,0.111357,0.0243824,0.987446,-0.00359147,0.111357,0.0318474,0.987435,-0.00454562,0.111356,0.0403086,0.987461,-0.00561225,0.111358,0.0497678,0.987458,-0.00679125,0.111358,0.0602239,0.987443,-0.0080828,0.111356,0.0716792,0.987476,-0.0094872,0.111358,0.0841364,0.98749,-0.0110044,0.111361,0.097597,0.987508,-0.0126344,0.111362,0.112062,0.987494,-0.0143767,0.111357,0.127533,0.987526,-0.0162307,0.111359,0.144015,0.987558,-0.0181912,0.111361,0.161502,0.987602,-0.0202393,0.111355,0.179979,0.987692,-0.022273,0.111346,0.199386,0.987702,-0.0235306,0.111215,0.219183,0.987789,-0.0247628,0.111061,0.239202,0.987776,-0.0280668,0.111171,0.259957,0.987856,-0.0316751,0.111327,0.282198,0.987912,-0.0342468,0.111282,0.306294,0.988,-0.0367205,0.111198,0.331219,0.988055,-0.0387766,0.110994,0.356708,0.988241,-0.0397722,0.110547,0.382234,0.988399,-0.0416076,0.110198,0.408227,0.988539,-0.0448192,0.110137,0.434662,0.988661,-0.0483793,0.110143,0.461442,0.988967,-0.0495895,0.109453,0.489318,0.989073,-0.0506797,0.108628,0.517516,0.989274,-0.0526953,0.108003,0.545844,0.989528,-0.054578,0.107255,0.573823,0.989709,-0.0561503,0.106294,0.601944,0.989991,-0.056866,0.104896,0.630855,0.990392,-0.0572914,0.103336,0.658925,0.990374,-0.0586224,0.10189,0.686661,0.990747,-0.0584764,0.099783,0.714548,0.991041,-0.0582662,0.0974309,0.74186,0.991236,-0.0584118,0.0951678,0.768422,0.991585,-0.0573055,0.0921581,0.794817,0.991984,-0.0564241,0.0891167,0.820336,0.9921,-0.0553608,0.085805,0.84493,0.992749,-0.0533816,0.0820354,0.868961,0.99288,-0.0518661,0.0782181,0.891931,0.993511,-0.0492492,0.0738935,0.914186,0.993617,-0.0471956,0.0696402,0.93532,0.99411,-0.044216,0.0649659,0.95543,0.994595,-0.0416654,0.0603177,0.974685,0.994976,-0.0384314,0.0553493,0.992807,0.995579,-0.0353491,0.0503942,1.00996,0.996069,-0.0319787,0.0452123,1.02606,0.996718,-0.028472,0.0400112,1.04114,0.997173,-0.0250789,0.0349456,1.05517,0.997818,-0.0213326,0.029653,1.0683,0.998318,-0.0178509,0.024549,1.0805,0.998853,-0.0141118,0.0194197,1.09177,0.999218,-0.0105914,0.0143869,1.1022,0.999594,-0.00693474,0.00943517,1.11175,0.99975,-0.00340478,0.00464051,1.12056,1.00001,0.000109172,-0.000112821,1.12853,0.983383,-0.00000266524,0.133358,0.0000196534,0.981942,-0.0000671009,0.133162,0.000494804,0.981946,-0.000268405,0.133163,0.00197923,0.981944,-0.000603912,0.133163,0.00445326,0.981941,-0.00107362,0.133162,0.00791693,0.981946,-0.00167755,0.133163,0.0123703,0.981944,-0.00241569,0.133162,0.0178135,0.981945,-0.00328807,0.133163,0.0242466,0.981945,-0.00429472,0.133162,0.03167,0.981955,-0.00543573,0.133164,0.0400846,0.981951,-0.00671105,0.133163,0.0494901,0.981968,-0.00812092,0.133165,0.0598886,0.981979,-0.00966541,0.133166,0.0712811,0.981996,-0.0113446,0.133168,0.083669,0.982014,-0.0131585,0.133169,0.0970533,0.982011,-0.0151073,0.133167,0.111438,0.982062,-0.0171906,0.133172,0.126826,0.9821,-0.0194067,0.133175,0.143215,0.982149,-0.0217502,0.133176,0.160609,0.982163,-0.0241945,0.133173,0.178981,0.982247,-0.0265907,0.133148,0.198249,0.982291,-0.027916,0.132974,0.217795,0.982396,-0.0299663,0.132868,0.238042,0.982456,-0.0334544,0.132934,0.258901,0.982499,-0.0378636,0.133137,0.280639,0.982617,-0.0409274,0.133085,0.304604,0.98274,-0.0438523,0.132985,0.329376,0.982944,-0.0462288,0.132728,0.354697,0.98308,-0.0475995,0.132228,0.380102,0.983391,-0.0501901,0.131924,0.406256,0.983514,-0.0535899,0.131737,0.432735,0.98373,-0.0571858,0.131567,0.459359,0.984056,-0.0592353,0.130932,0.486637,0.984234,-0.0610488,0.130092,0.51509,0.984748,-0.0630758,0.12923,0.543461,0.985073,-0.0647398,0.128174,0.571376,0.985195,-0.0671941,0.127133,0.599414,0.985734,-0.0681345,0.125576,0.628134,0.986241,-0.0686089,0.123639,0.656399,0.986356,-0.0698511,0.121834,0.684258,0.986894,-0.0700931,0.119454,0.711818,0.987382,-0.0698321,0.116718,0.739511,0.988109,-0.0693975,0.113699,0.766267,0.988363,-0.0689584,0.110454,0.792456,0.989112,-0.0672353,0.106602,0.81813,0.989241,-0.0662034,0.10267,0.842889,0.990333,-0.0638938,0.0981381,0.867204,0.990591,-0.0618534,0.0935388,0.89038,0.991106,-0.0593117,0.088553,0.912576,0.991919,-0.0562676,0.0832187,0.934118,0.992111,-0.0534085,0.0778302,0.954254,0.992997,-0.0495459,0.0720453,0.973722,0.993317,-0.0463707,0.0663458,0.991949,0.994133,-0.0421245,0.0601883,1.00936,0.994705,-0.0384977,0.0542501,1.02559,0.995495,-0.0340956,0.0479862,1.04083,0.996206,-0.030105,0.041887,1.05497,0.996971,-0.0256095,0.0355355,1.06824,0.997796,-0.0213932,0.0293655,1.08056,0.998272,-0.0169612,0.0232926,1.09182,0.998857,-0.0126756,0.0172786,1.10219,0.99939,-0.00832486,0.0113156,1.11192,0.999752,-0.00410826,0.00557892,1.12075,1,0.000150957,-0.000119101,1.12885,0.975169,-0.00000309397,0.154669,0.0000195073,0.975439,-0.0000779608,0.154712,0.000491534,0.975464,-0.000311847,0.154716,0.00196617,0.975464,-0.000701656,0.154716,0.00442387,0.975462,-0.0012474,0.154715,0.0078647,0.975461,-0.00194906,0.154715,0.0122886,0.975464,-0.00280667,0.154715,0.0176959,0.975468,-0.00382025,0.154716,0.0240867,0.975471,-0.00498985,0.154716,0.0314612,0.975472,-0.00631541,0.154717,0.0398199,0.975486,-0.00779719,0.154718,0.0491639,0.975489,-0.00943505,0.154718,0.0594932,0.975509,-0.0112295,0.154721,0.0708113,0.97554,-0.0131802,0.154724,0.0831176,0.975557,-0.0152876,0.154726,0.096415,0.975585,-0.0175512,0.154728,0.110705,0.975605,-0.0199713,0.154729,0.125992,0.975645,-0.0225447,0.154729,0.142272,0.975711,-0.0252649,0.154735,0.159549,0.975788,-0.0280986,0.154736,0.177805,0.975872,-0.0308232,0.154704,0.196911,0.975968,-0.0324841,0.154525,0.216324,0.976063,-0.0351281,0.154432,0.236628,0.976157,-0.0388618,0.15446,0.257539,0.976204,-0.0437704,0.154665,0.278975,0.976358,-0.047514,0.154652,0.302606,0.976571,-0.0508638,0.154535,0.327204,0.976725,-0.0534995,0.154221,0.352276,0.977013,-0.0555547,0.153737,0.377696,0.977294,-0.0586728,0.153403,0.403855,0.977602,-0.0622715,0.15312,0.430333,0.977932,-0.0658166,0.152755,0.456855,0.978241,-0.0689877,0.152233,0.483668,0.978602,-0.0712805,0.15132,0.512097,0.979234,-0.0732775,0.150235,0.540455,0.97977,-0.075163,0.148978,0.568486,0.979995,-0.0778026,0.147755,0.596524,0.98078,-0.0791854,0.146019,0.624825,0.981628,-0.0799666,0.143906,0.653403,0.982067,-0.0808532,0.141561,0.681445,0.98271,-0.0816024,0.139025,0.708918,0.983734,-0.0812511,0.135764,0.736594,0.98431,-0.0806201,0.132152,0.763576,0.985071,-0.0801605,0.12846,0.789797,0.98618,-0.0784208,0.124084,0.815804,0.986886,-0.0766643,0.1193,0.840869,0.987485,-0.0747744,0.114236,0.864952,0.988431,-0.0716701,0.108654,0.888431,0.988886,-0.0691609,0.102994,0.910963,0.990024,-0.0654048,0.0967278,0.932629,0.990401,-0.0619765,0.090384,0.95313,0.991093,-0.0579296,0.0837885,0.972587,0.992018,-0.0536576,0.0770171,0.991184,0.992536,-0.0493719,0.0701486,1.00863,0.993421,-0.0444813,0.062953,1.02494,0.993928,-0.040008,0.0560455,1.04017,0.994994,-0.0347982,0.04856,1.05463,0.995866,-0.0301017,0.0416152,1.06807,0.996916,-0.0248225,0.0342597,1.08039,0.997766,-0.0199229,0.0271668,1.09177,0.998479,-0.0147422,0.0201387,1.10235,0.99921,-0.00980173,0.0131944,1.11206,0.999652,-0.0047426,0.00640712,1.12104,0.999998,0.0000891673,-0.00010379,1.12906,0.967868,-0.00000351885,0.175947,0.0000193569,0.968001,-0.0000886733,0.175972,0.000487782,0.96801,-0.000354697,0.175973,0.00195115,0.968012,-0.000798063,0.175974,0.00439006,0.968011,-0.00141879,0.175973,0.00780461,0.968011,-0.00221686,0.175973,0.0121948,0.968016,-0.00319231,0.175974,0.0175607,0.968019,-0.00434515,0.175974,0.0239027,0.968018,-0.00567538,0.175974,0.0312208,0.968033,-0.00718308,0.175977,0.0395158,0.968049,-0.00886836,0.175979,0.0487885,0.968047,-0.0107312,0.175978,0.0590394,0.968072,-0.0127719,0.175981,0.0702705,0.968108,-0.0149905,0.175986,0.0824836,0.968112,-0.0173866,0.175985,0.0956783,0.968173,-0.0199611,0.175993,0.109862,0.96827,-0.0227128,0.176008,0.125033,0.968292,-0.025639,0.17601,0.141193,0.968339,-0.0287299,0.176007,0.158336,0.968389,-0.0319399,0.176001,0.176441,0.968501,-0.034941,0.175962,0.195359,0.968646,-0.0370812,0.175793,0.214686,0.968789,-0.0402329,0.175708,0.234973,0.96886,-0.0442601,0.1757,0.255871,0.969013,-0.049398,0.175876,0.277238,0.969242,-0.0539932,0.17594,0.300326,0.969419,-0.0577299,0.175781,0.324702,0.969763,-0.0605643,0.175432,0.349527,0.970093,-0.0634488,0.174992,0.374976,0.970361,-0.0670589,0.174611,0.401097,0.970825,-0.0708246,0.174226,0.427496,0.971214,-0.0742871,0.173684,0.453858,0.971622,-0.0782608,0.173186,0.480637,0.972175,-0.0813151,0.172288,0.508655,0.972944,-0.0832678,0.170979,0.536973,0.973595,-0.0855964,0.169573,0.565138,0.974345,-0.0882163,0.168152,0.593222,0.975233,-0.0901671,0.166314,0.621201,0.976239,-0.0912111,0.163931,0.649919,0.977289,-0.0916959,0.161106,0.678011,0.978076,-0.0927061,0.158272,0.705717,0.979533,-0.0925562,0.15475,0.733228,0.980335,-0.0918159,0.150638,0.760454,0.981808,-0.0908508,0.146201,0.786918,0.983061,-0.0896172,0.141386,0.812953,0.984148,-0.0871588,0.135837,0.838281,0.985047,-0.0850624,0.130135,0.862594,0.986219,-0.0818541,0.123882,0.88633,0.987043,-0.0784523,0.117126,0.908952,0.988107,-0.0749601,0.110341,0.930744,0.988955,-0.0703548,0.102885,0.951728,0.989426,-0.0662798,0.0954167,0.971166,0.990421,-0.0610834,0.0876331,0.989984,0.991032,-0.0562936,0.0797785,1.00765,0.992041,-0.0508154,0.0718166,1.02434,0.992794,-0.0454045,0.0637125,1.03976,0.993691,-0.0398194,0.0555338,1.05418,0.994778,-0.0341482,0.0473388,1.06772,0.995915,-0.028428,0.0391016,1.08028,0.997109,-0.022642,0.0309953,1.09185,0.998095,-0.0168738,0.0230288,1.10247,0.998985,-0.0111274,0.0150722,1.11229,0.999581,-0.00543881,0.00740605,1.12131,1.00003,0.000162239,-0.000105549,1.12946,0.959505,-0.00000393734,0.196876,0.0000191893,0.959599,-0.0000992157,0.196895,0.000483544,0.959641,-0.000396868,0.196903,0.0019342,0.959599,-0.000892948,0.196895,0.00435193,0.959603,-0.00158747,0.196896,0.0077368,0.959604,-0.00248042,0.196896,0.0120888,0.959605,-0.00357184,0.196896,0.0174082,0.959605,-0.00486169,0.196896,0.0236949,0.959613,-0.00635008,0.196897,0.0309497,0.959619,-0.00803696,0.196898,0.0391725,0.959636,-0.00992255,0.196901,0.0483649,0.959634,-0.0120067,0.1969,0.0585266,0.959675,-0.0142898,0.196906,0.0696609,0.959712,-0.0167717,0.196911,0.0817678,0.959752,-0.0194524,0.196918,0.0948494,0.959807,-0.0223321,0.196925,0.10891,0.959828,-0.0254091,0.196924,0.123947,0.959906,-0.0286815,0.196934,0.139968,0.960005,-0.0321371,0.196944,0.156968,0.960071,-0.0357114,0.196936,0.17491,0.960237,-0.0389064,0.196882,0.193597,0.960367,-0.041623,0.196731,0.21285,0.960562,-0.0452655,0.196654,0.233075,0.960735,-0.0496207,0.196643,0.253941,0.960913,-0.0549379,0.196774,0.275278,0.961121,-0.0603414,0.196893,0.297733,0.96139,-0.0644244,0.196717,0.321877,0.961818,-0.067556,0.196314,0.346476,0.962175,-0.0712709,0.195917,0.371907,0.96255,-0.0752848,0.1955,0.397916,0.963164,-0.0792073,0.195026,0.424229,0.963782,-0.0828225,0.194424,0.450637,0.964306,-0.0873119,0.193831,0.477288,0.964923,-0.0911051,0.192973,0.504716,0.966048,-0.093251,0.19151,0.533053,0.967024,-0.0958983,0.190013,0.561366,0.968038,-0.09835,0.188253,0.589464,0.969152,-0.100754,0.186257,0.617433,0.970557,-0.102239,0.183775,0.645801,0.972104,-0.102767,0.180645,0.674278,0.973203,-0.103492,0.177242,0.702004,0.975123,-0.103793,0.17345,0.729529,0.97641,-0.102839,0.168886,0.756712,0.978313,-0.101687,0.163892,0.783801,0.980036,-0.100314,0.158439,0.809671,0.981339,-0.097836,0.152211,0.835402,0.982794,-0.0950006,0.145679,0.860081,0.984123,-0.0920994,0.138949,0.883757,0.984918,-0.0878641,0.131283,0.90685,0.985999,-0.083939,0.123464,0.928786,0.987151,-0.0791234,0.115324,0.94983,0.987827,-0.0739332,0.106854,0.96962,0.988806,-0.0688088,0.0982691,0.98861,0.989588,-0.0628962,0.0893456,1.00667,0.990438,-0.0573146,0.0805392,1.02344,0.991506,-0.0509433,0.0713725,1.03933,0.992492,-0.0448724,0.0623732,1.05378,0.993663,-0.0383497,0.0530838,1.06747,0.994956,-0.0319593,0.0439512,1.08007,0.99634,-0.025401,0.0347803,1.09182,0.99761,-0.0189687,0.0257954,1.1025,0.99863,-0.0124441,0.0169893,1.11247,0.99947,-0.00614003,0.00829498,1.12151,1.00008,0.000216624,-0.000146107,1.12993,0.950129,-0.00000434955,0.217413,0.0000190081,0.950264,-0.00010957,0.217444,0.00047884,0.9503,-0.000438299,0.217451,0.00191543,0.950246,-0.000986124,0.21744,0.00430951,0.950246,-0.00175311,0.21744,0.00766137,0.950245,-0.00273923,0.21744,0.011971,0.950253,-0.00394453,0.217441,0.0172385,0.950258,-0.00536897,0.217442,0.0234641,0.950267,-0.00701262,0.217444,0.030648,0.950277,-0.00887551,0.217446,0.038791,0.950284,-0.0109576,0.217446,0.0478931,0.950312,-0.0132591,0.217451,0.0579568,0.950334,-0.01578,0.217454,0.0689821,0.950378,-0.0185204,0.217462,0.0809714,0.950417,-0.0214803,0.217467,0.0939265,0.950488,-0.0246594,0.217479,0.10785,0.950534,-0.0280565,0.217483,0.122743,0.950633,-0.0316685,0.217498,0.138611,0.950698,-0.0354787,0.217499,0.155442,0.950844,-0.0394003,0.217507,0.173208,0.950999,-0.0426812,0.217419,0.191605,0.951221,-0.0461302,0.217317,0.21084,0.951412,-0.0502131,0.217238,0.230945,0.951623,-0.0549183,0.21722,0.251745,0.951867,-0.0604493,0.217306,0.273001,0.952069,-0.0665189,0.217466,0.294874,0.952459,-0.0709179,0.217266,0.318732,0.952996,-0.0746112,0.216891,0.34318,0.953425,-0.0789252,0.216503,0.36849,0.953885,-0.0833293,0.216042,0.394373,0.954617,-0.087371,0.215469,0.420505,0.955429,-0.0914054,0.214802,0.446907,0.956068,-0.0961671,0.214146,0.473522,0.957094,-0.10048,0.213286,0.50052,0.958372,-0.103248,0.211796,0.528715,0.959654,-0.106033,0.21016,0.557065,0.961305,-0.108384,0.208149,0.585286,0.962785,-0.111122,0.206024,0.613334,0.964848,-0.112981,0.203442,0.641334,0.966498,-0.113717,0.19996,0.669955,0.968678,-0.114121,0.196105,0.698094,0.970489,-0.114524,0.191906,0.725643,0.972903,-0.113792,0.186963,0.752856,0.974701,-0.112406,0.181343,0.780013,0.976718,-0.110685,0.175185,0.806268,0.978905,-0.108468,0.168535,0.832073,0.980267,-0.105061,0.161106,0.857149,0.981967,-0.101675,0.153387,0.881145,0.983063,-0.0974492,0.145199,0.904255,0.984432,-0.0925815,0.136527,0.926686,0.985734,-0.0877983,0.127584,0.947901,0.986228,-0.081884,0.118125,0.968111,0.98719,-0.0761208,0.108594,0.98719,0.988228,-0.0698196,0.0989996,1.00559,0.989046,-0.0632739,0.0890074,1.02246,0.990242,-0.056522,0.0790832,1.03841,0.991252,-0.0495272,0.0689182,1.05347,0.992542,-0.0425373,0.0588592,1.06724,0.994096,-0.0353198,0.0486833,1.08009,0.995593,-0.028235,0.0385977,1.09177,0.99711,-0.0209511,0.0286457,1.10274,0.998263,-0.0139289,0.0188497,1.11262,0.999254,-0.0067359,0.009208,1.12191,0.999967,0.000141846,-0.0000657764,1.13024,0.935608,-0.00000474692,0.236466,0.0000187817,0.93996,-0.00011971,0.237568,0.000473646,0.939959,-0.000478845,0.237567,0.0018946,0.939954,-0.0010774,0.237566,0.00426284,0.939956,-0.00191538,0.237566,0.00757842,0.939954,-0.00299277,0.237566,0.0118413,0.93996,-0.00430961,0.237567,0.0170518,0.939969,-0.00586589,0.237569,0.02321,0.939982,-0.00766166,0.237572,0.0303164,0.939987,-0.00969686,0.237572,0.0383711,0.939997,-0.0119715,0.237574,0.0473751,0.940031,-0.0144858,0.237581,0.0573298,0.940073,-0.0172399,0.237589,0.0682366,0.94012,-0.0202335,0.237598,0.080097,0.940162,-0.0234663,0.237604,0.0929116,0.940237,-0.0269387,0.237615,0.106686,0.940328,-0.0306489,0.237632,0.121421,0.940419,-0.0345917,0.237645,0.137115,0.940522,-0.0387481,0.237654,0.153766,0.940702,-0.0429906,0.237661,0.17133,0.940871,-0.0465089,0.237561,0.189502,0.941103,-0.050531,0.23748,0.208616,0.941369,-0.0550657,0.237423,0.228595,0.941641,-0.0601337,0.237399,0.249287,0.941903,-0.0658804,0.237443,0.270467,0.942224,-0.0722674,0.237597,0.292024,0.942633,-0.0771788,0.237419,0.315272,0.943172,-0.0815623,0.237068,0.339579,0.943691,-0.0863973,0.236682,0.364717,0.944382,-0.0911536,0.236213,0.390435,0.945392,-0.0952967,0.235562,0.416425,0.946185,-0.0998948,0.234832,0.442772,0.947212,-0.104796,0.234114,0.469347,0.948778,-0.10928,0.233222,0.496162,0.950149,-0.113081,0.231845,0.523978,0.951989,-0.115893,0.230005,0.552295,0.953921,-0.11846,0.227862,0.580569,0.955624,-0.12115,0.225439,0.608698,0.958234,-0.123373,0.222635,0.636696,0.960593,-0.124519,0.219093,0.665208,0.963201,-0.124736,0.214749,0.693557,0.965642,-0.125012,0.210059,0.721334,0.968765,-0.124661,0.204935,0.748613,0.971753,-0.122996,0.198661,0.776224,0.973751,-0.120998,0.191823,0.802461,0.976709,-0.118583,0.184359,0.828399,0.977956,-0.115102,0.176437,0.853693,0.979672,-0.111077,0.167681,0.877962,0.981816,-0.10688,0.158872,0.901564,0.98238,-0.101469,0.149398,0.924057,0.983964,-0.0960013,0.139436,0.945751,0.984933,-0.0899626,0.12943,0.966272,0.985694,-0.0832973,0.11894,0.985741,0.986822,-0.0767082,0.108349,1.00407,0.987725,-0.0693614,0.0976026,1.02154,0.98877,-0.06211,0.086652,1.03757,0.990129,-0.0544143,0.0756182,1.05296,0.991337,-0.046744,0.0645753,1.06683,0.992978,-0.0387931,0.0534683,1.0798,0.994676,-0.030973,0.0424137,1.09181,0.99645,-0.0230311,0.0314035,1.10286,0.997967,-0.0152065,0.0206869,1.11291,0.99922,-0.00744837,0.010155,1.12237,1.00002,0.000240209,-0.0000752767,1.13089,0.922948,-0.00000515351,0.255626,0.0000186069,0.928785,-0.000129623,0.257244,0.000468009,0.928761,-0.00051849,0.257237,0.00187202,0.928751,-0.0011666,0.257235,0.00421204,0.928751,-0.00207395,0.257234,0.0074881,0.928754,-0.00324055,0.257235,0.0117002,0.92876,-0.00466639,0.257236,0.0168486,0.928763,-0.00635149,0.257237,0.0229334,0.928774,-0.00829584,0.257239,0.029955,0.928791,-0.0104995,0.257243,0.0379139,0.928804,-0.0129623,0.257245,0.0468108,0.928847,-0.0156846,0.257255,0.0566473,0.92889,-0.0186661,0.257263,0.0674246,0.928924,-0.0219067,0.257268,0.0791433,0.928989,-0.0254066,0.257282,0.0918076,0.92909,-0.0291651,0.257301,0.105419,0.92918,-0.0331801,0.257316,0.119978,0.92929,-0.0374469,0.257332,0.135491,0.929453,-0.041939,0.257357,0.151948,0.929586,-0.0464612,0.257347,0.169275,0.929858,-0.0503426,0.257269,0.187257,0.930125,-0.0548409,0.257199,0.206204,0.930403,-0.0598063,0.257149,0.22601,0.930726,-0.0652437,0.257122,0.246561,0.931098,-0.0712376,0.257153,0.267618,0.931396,-0.0777506,0.257237,0.288993,0.931947,-0.0832374,0.257124,0.311527,0.932579,-0.0883955,0.25683,0.335697,0.933194,-0.0937037,0.256444,0.360634,0.934013,-0.0987292,0.255939,0.386126,0.935307,-0.103215,0.255282,0.412018,0.936374,-0.108234,0.254538,0.438292,0.93776,-0.113234,0.253728,0.464805,0.939599,-0.118013,0.25275,0.491464,0.941036,-0.122661,0.251404,0.518751,0.94337,-0.125477,0.249435,0.547133,0.945318,-0.128374,0.247113,0.575456,0.947995,-0.130996,0.244441,0.60372,0.950818,-0.133438,0.241352,0.63174,0.954378,-0.135004,0.237849,0.659971,0.957151,-0.135313,0.233188,0.688478,0.960743,-0.13521,0.228001,0.716767,0.964352,-0.135007,0.222249,0.744349,0.967273,-0.133523,0.21542,0.771786,0.969767,-0.131155,0.208039,0.798639,0.973195,-0.128492,0.200076,0.824774,0.975557,-0.125094,0.191451,0.850222,0.977692,-0.120578,0.18184,0.874761,0.98026,-0.115882,0.172102,0.898497,0.981394,-0.110372,0.161859,0.921636,0.982386,-0.10415,0.15108,0.943467,0.983783,-0.0978128,0.140407,0.964045,0.98422,-0.0906171,0.129058,0.98398,0.985447,-0.0832921,0.117614,1.00276,0.986682,-0.0754412,0.10585,1.02047,0.987326,-0.0673885,0.0940943,1.03678,0.988707,-0.0592565,0.0822093,1.05218,0.990185,-0.050717,0.070192,1.06652,0.991866,-0.0423486,0.0582081,1.07965,0.993897,-0.0336118,0.0460985,1.09188,0.995841,-0.0252178,0.0342737,1.10307,0.997605,-0.0164893,0.0224829,1.11324,0.999037,-0.00817112,0.0110647,1.12262,1.00003,0.000291686,-0.000168673,1.13139,0.915304,-0.00000552675,0.275999,0.0000183285,0.91668,-0.000139285,0.276414,0.000461914,0.916664,-0.00055713,0.276409,0.00184763,0.916653,-0.00125354,0.276406,0.00415715,0.916651,-0.00222851,0.276405,0.00739053,0.916655,-0.00348205,0.276406,0.0115478,0.916653,-0.00501414,0.276405,0.0166291,0.916667,-0.00682478,0.276409,0.0226346,0.91668,-0.00891398,0.276412,0.0295648,0.91669,-0.0112817,0.276413,0.0374199,0.916727,-0.013928,0.276422,0.0462016,0.916759,-0.0168528,0.276429,0.0559101,0.916793,-0.0200558,0.276436,0.0665466,0.916849,-0.0235373,0.276448,0.0781139,0.916964,-0.0272973,0.276474,0.0906156,0.917047,-0.0313344,0.276491,0.104051,0.917152,-0.0356465,0.276511,0.118424,0.917286,-0.0402271,0.276533,0.133736,0.917469,-0.0450408,0.276564,0.149978,0.917686,-0.0497872,0.276563,0.167057,0.917953,-0.0540937,0.276493,0.184846,0.918228,-0.0590709,0.276437,0.203614,0.918572,-0.0644277,0.276398,0.223212,0.918918,-0.0702326,0.276362,0.243584,0.919356,-0.076484,0.276383,0.264465,0.919842,-0.0830808,0.276434,0.285701,0.920451,-0.0892972,0.276407,0.307559,0.921113,-0.095016,0.276128,0.331501,0.921881,-0.100771,0.275754,0.356207,0.923027,-0.106029,0.275254,0.381477,0.924364,-0.111029,0.274595,0.40722,0.925818,-0.116345,0.273841,0.433385,0.92746,-0.121424,0.272913,0.459848,0.929167,-0.12657,0.271837,0.486493,0.931426,-0.131581,0.270575,0.513432,0.934001,-0.135038,0.268512,0.541502,0.936296,-0.138039,0.266135,0.569658,0.939985,-0.140687,0.263271,0.598375,0.943516,-0.143247,0.260058,0.626563,0.94782,-0.145135,0.256138,0.654711,0.951023,-0.145733,0.251154,0.683285,0.955338,-0.145554,0.245562,0.711831,0.959629,-0.145008,0.239265,0.739573,0.963123,-0.144003,0.232064,0.767027,0.966742,-0.141289,0.224036,0.794359,0.969991,-0.138247,0.215305,0.820361,0.973403,-0.134786,0.206051,0.846548,0.975317,-0.129966,0.195914,0.871541,0.977647,-0.12471,0.185184,0.895313,0.980137,-0.119086,0.174161,0.918398,0.981031,-0.112297,0.162792,0.940679,0.982037,-0.105372,0.150952,0.961991,0.983164,-0.097821,0.138921,0.981913,0.983757,-0.0897245,0.126611,1.00109,0.985036,-0.0815974,0.114228,1.01902,0.986289,-0.0727725,0.101389,1.03604,0.987329,-0.0639323,0.0886476,1.05149,0.989193,-0.0548109,0.0756837,1.06619,0.990716,-0.045687,0.0627581,1.07948,0.992769,-0.0364315,0.0498337,1.09172,0.99524,-0.0271761,0.0370305,1.1033,0.997154,-0.0179609,0.0243959,1.11353,0.998845,-0.00878063,0.0119567,1.12319,1.00002,0.000259038,-0.000108146,1.13177,0.903945,-0.00000591681,0.295126,0.0000181226,0.903668,-0.000148672,0.295037,0.000455367,0.903677,-0.000594683,0.29504,0.00182145,0.903673,-0.00133805,0.295039,0.00409831,0.903666,-0.00237872,0.295036,0.00728584,0.903668,-0.00371676,0.295037,0.0113842,0.903679,-0.00535212,0.29504,0.0163936,0.903684,-0.00728479,0.295041,0.0223141,0.903698,-0.00951473,0.295044,0.0291462,0.903718,-0.0120419,0.295049,0.0368904,0.903754,-0.0148664,0.295058,0.0455477,0.903801,-0.017988,0.29507,0.0551194,0.903851,-0.0214064,0.295082,0.0656058,0.903921,-0.0251219,0.295097,0.0770109,0.904002,-0.0291337,0.295116,0.0893354,0.904111,-0.033441,0.29514,0.102583,0.904246,-0.0380415,0.295169,0.116755,0.904408,-0.0429258,0.295202,0.131853,0.904637,-0.0480468,0.295245,0.147869,0.904821,-0.0529208,0.295214,0.164658,0.905163,-0.0577748,0.295185,0.182274,0.905469,-0.0631763,0.295143,0.200828,0.905851,-0.068917,0.295112,0.2202,0.906322,-0.0750861,0.295104,0.240372,0.906761,-0.0815855,0.295086,0.261082,0.90735,-0.0882138,0.295095,0.282123,0.908087,-0.095082,0.295139,0.303563,0.908826,-0.101488,0.29492,0.327028,0.909832,-0.107577,0.294577,0.351464,0.911393,-0.113033,0.294115,0.376497,0.912804,-0.118629,0.293446,0.402115,0.914081,-0.124232,0.292581,0.428111,0.91637,-0.129399,0.29166,0.454442,0.91814,-0.134892,0.290422,0.481024,0.921179,-0.140069,0.289194,0.507924,0.924544,-0.144431,0.287421,0.535557,0.927995,-0.147498,0.284867,0.563984,0.931556,-0.150197,0.281722,0.5923,0.935777,-0.152711,0.278207,0.620832,0.940869,-0.154836,0.274148,0.649069,0.945994,-0.155912,0.269057,0.677746,0.949634,-0.155641,0.262799,0.706293,0.955032,-0.154809,0.256097,0.734278,0.95917,-0.153678,0.248618,0.761751,0.962931,-0.151253,0.239794,0.789032,0.966045,-0.147625,0.230281,0.815422,0.96971,-0.143964,0.220382,0.841787,0.972747,-0.139464,0.209846,0.867446,0.975545,-0.133459,0.198189,0.892004,0.978381,-0.127424,0.186362,0.915458,0.979935,-0.120506,0.173964,0.937948,0.980948,-0.11282,0.161429,0.959732,0.982234,-0.104941,0.148557,0.980118,0.982767,-0.0962905,0.135508,0.999463,0.983544,-0.0873625,0.122338,1.01756,0.984965,-0.0783447,0.108669,1.03492,0.986233,-0.0684798,0.0949911,1.05087,0.987796,-0.0590867,0.0811386,1.0656,0.989885,-0.0489145,0.0673099,1.0794,0.991821,-0.0391,0.0535665,1.09174,0.99448,-0.029087,0.0397529,1.10341,0.996769,-0.019114,0.0261463,1.11383,0.998641,-0.00947007,0.0128731,1.1237,0.999978,0.000446316,-0.000169093,1.13253,0.888362,-0.00000627064,0.312578,0.0000178215,0.889988,-0.000157791,0.313148,0.000448451,0.889825,-0.000631076,0.313092,0.00179356,0.88984,-0.00141994,0.313097,0.00403554,0.889828,-0.0025243,0.313092,0.00717429,0.889831,-0.00394421,0.313093,0.0112099,0.889831,-0.00567962,0.313093,0.0161425,0.889844,-0.00773051,0.313096,0.0219724,0.889858,-0.0100968,0.3131,0.0286999,0.889882,-0.0127786,0.313106,0.0363256,0.889918,-0.0157757,0.313116,0.0448509,0.889967,-0.0190878,0.313129,0.0542758,0.89003,-0.022715,0.313145,0.0646032,0.890108,-0.0266566,0.313165,0.0758339,0.890218,-0.0309131,0.313193,0.0879729,0.890351,-0.0354819,0.313226,0.101019,0.89051,-0.0403613,0.313263,0.114979,0.890672,-0.0455385,0.313294,0.129848,0.890882,-0.0509444,0.313333,0.145616,0.891189,-0.0559657,0.313324,0.162122,0.891457,-0.0613123,0.313281,0.179524,0.891856,-0.0671488,0.313281,0.197855,0.892312,-0.0732732,0.313268,0.216991,0.892819,-0.0797865,0.313263,0.236924,0.893369,-0.0865269,0.313247,0.257433,0.894045,-0.0931592,0.313205,0.278215,0.894884,-0.100532,0.313276,0.299467,0.895832,-0.107716,0.313205,0.322276,0.897043,-0.114099,0.312873,0.34642,0.898515,-0.119941,0.312331,0.371187,0.900191,-0.126044,0.311731,0.396656,0.90188,-0.131808,0.310859,0.422488,0.904359,-0.137289,0.309857,0.448744,0.906923,-0.142991,0.308714,0.475239,0.910634,-0.148253,0.307465,0.501983,0.914502,-0.153332,0.305774,0.529254,0.919046,-0.156646,0.303156,0.557709,0.923194,-0.159612,0.299928,0.586267,0.928858,-0.162027,0.296245,0.614925,0.934464,-0.164203,0.291832,0.643187,0.939824,-0.165602,0.286565,0.671601,0.944582,-0.165383,0.280073,0.700213,0.949257,-0.164439,0.272891,0.728432,0.954389,-0.162953,0.264771,0.756082,0.958595,-0.161007,0.255927,0.78369,0.962138,-0.157243,0.245769,0.810769,0.966979,-0.152872,0.235127,0.836999,0.969566,-0.148209,0.22347,0.862684,0.972372,-0.142211,0.211147,0.887847,0.975916,-0.135458,0.198606,0.911843,0.978026,-0.128398,0.185498,0.934795,0.979686,-0.120313,0.17171,0.956787,0.980748,-0.11166,0.158159,0.978046,0.981622,-0.103035,0.144399,0.997693,0.982356,-0.0930328,0.13001,1.01642,0.983308,-0.0834627,0.115778,1.03366,0.985037,-0.0732249,0.101327,1.05014,0.986493,-0.0628145,0.086554,1.06507,0.988484,-0.0526556,0.0720413,1.07907,0.991051,-0.0415744,0.0571151,1.09189,0.993523,-0.0314275,0.0426643,1.10369,0.99628,-0.0203603,0.0279325,1.11423,0.998344,-0.0102446,0.0138182,1.12421,0.999997,0.00042612,-0.000193628,1.1333,0.871555,-0.00000660007,0.329176,0.0000174749,0.875255,-0.000166579,0.330571,0.000441051,0.875644,-0.000666394,0.330718,0.00176441,0.875159,-0.00149903,0.330536,0.00396899,0.87516,-0.00266493,0.330536,0.007056,0.875158,-0.00416393,0.330535,0.0110251,0.87516,-0.00599598,0.330535,0.0158764,0.875163,-0.00816108,0.330536,0.0216101,0.875174,-0.0106591,0.330538,0.0282266,0.875199,-0.0134899,0.330545,0.0357266,0.875257,-0.0166538,0.330563,0.0441117,0.875304,-0.0201501,0.330575,0.0533821,0.875373,-0.0239785,0.330595,0.0635395,0.875464,-0.0281389,0.330619,0.0745872,0.875565,-0.0326301,0.330645,0.0865255,0.875691,-0.0374516,0.330676,0.0993599,0.875897,-0.0425993,0.330733,0.113093,0.876091,-0.0480576,0.330776,0.127722,0.876353,-0.0537216,0.330826,0.143227,0.876649,-0.0589807,0.330809,0.159462,0.877034,-0.0647865,0.330819,0.176642,0.877443,-0.0709789,0.330817,0.194702,0.877956,-0.0774782,0.330832,0.213577,0.878499,-0.0843175,0.330822,0.233246,0.879144,-0.0912714,0.330804,0.253512,0.879982,-0.0980824,0.330766,0.274137,0.88097,-0.105823,0.330864,0.295209,0.882051,-0.113671,0.330896,0.317226,0.883397,-0.120303,0.330545,0.341068,0.884987,-0.12667,0.330068,0.365613,0.886789,-0.133118,0.329418,0.390807,0.889311,-0.139024,0.328683,0.416494,0.891995,-0.144971,0.327729,0.442618,0.895106,-0.150747,0.326521,0.469131,0.899527,-0.156283,0.325229,0.495921,0.90504,-0.161707,0.32378,0.523162,0.909875,-0.165661,0.32122,0.55092,0.91561,-0.168755,0.317942,0.579928,0.921225,-0.171193,0.313983,0.608539,0.927308,-0.17319,0.309636,0.636854,0.933077,-0.174819,0.304262,0.66523,0.938766,-0.175002,0.297563,0.693609,0.943667,-0.173946,0.289613,0.722157,0.949033,-0.172221,0.281227,0.750021,0.953765,-0.169869,0.271545,0.777466,0.95804,-0.166578,0.261034,0.804853,0.962302,-0.161761,0.249434,0.831569,0.966544,-0.156636,0.237484,0.857779,0.969372,-0.150784,0.224395,0.883051,0.972486,-0.143672,0.210786,0.907864,0.975853,-0.135772,0.196556,0.931223,0.977975,-0.127942,0.182307,0.954061,0.979122,-0.118347,0.167607,0.97531,0.980719,-0.109112,0.152739,0.995666,0.981223,-0.0991789,0.137932,1.01475,0.98216,-0.0883553,0.122692,1.03253,0.983379,-0.0780825,0.107493,1.04917,0.985434,-0.0665646,0.0917791,1.06464,0.987332,-0.0557714,0.0764949,1.07896,0.990004,-0.0442805,0.060721,1.09199,0.992975,-0.0331676,0.0452284,1.10393,0.995811,-0.0219547,0.0297934,1.11476,0.9982,-0.0107613,0.0146415,1.12484,1.00002,0.000248678,-0.00014555,1.13413,0.859519,-0.00000693595,0.347264,0.0000171673,0.859843,-0.00017503,0.347394,0.000433219,0.859656,-0.000700076,0.347319,0.00173277,0.859671,-0.00157517,0.347325,0.00389875,0.859669,-0.00280028,0.347324,0.00693112,0.85967,-0.0043754,0.347324,0.01083,0.859665,-0.00630049,0.347321,0.0155954,0.859685,-0.0085755,0.347328,0.0212278,0.859694,-0.0112003,0.347329,0.0277273,0.859718,-0.0141747,0.347336,0.0350946,0.85976,-0.0174988,0.347348,0.0433314,0.85982,-0.0211722,0.347366,0.0524384,0.859892,-0.0251941,0.347387,0.0624168,0.860006,-0.0295649,0.347422,0.0732708,0.860122,-0.0342825,0.347453,0.0849999,0.860282,-0.0393462,0.347499,0.0976102,0.860482,-0.0447513,0.347554,0.111104,0.860719,-0.0504775,0.347614,0.125479,0.860998,-0.0563577,0.347666,0.140703,0.861322,-0.0619473,0.347662,0.156681,0.861724,-0.0681277,0.347684,0.173597,0.862198,-0.0746567,0.347709,0.191371,0.862733,-0.0815234,0.347727,0.209976,0.863371,-0.0886643,0.347744,0.229351,0.86414,-0.0957908,0.347734,0.24934,0.865138,-0.102912,0.34772,0.269797,0.866182,-0.110924,0.3478,0.290654,0.867436,-0.119223,0.347911,0.312074,0.869087,-0.126197,0.347649,0.335438,0.870859,-0.133145,0.347222,0.359732,0.872997,-0.139869,0.346645,0.38467,0.875939,-0.146089,0.345935,0.41019,0.879012,-0.152334,0.345012,0.436218,0.883353,-0.15821,0.343924,0.462641,0.888362,-0.164097,0.342636,0.489449,0.895026,-0.169528,0.341351,0.516629,0.900753,-0.174408,0.339115,0.544109,0.906814,-0.17751,0.335809,0.572857,0.912855,-0.180101,0.331597,0.601554,0.919438,-0.182116,0.32698,0.630198,0.925962,-0.183494,0.321449,0.658404,0.931734,-0.184159,0.314595,0.686625,0.93762,-0.18304,0.306462,0.71531,0.943858,-0.181323,0.297514,0.744272,0.948662,-0.178683,0.287447,0.771462,0.953299,-0.175379,0.276166,0.798593,0.957346,-0.170395,0.263758,0.8256,0.962565,-0.165042,0.251019,0.852575,0.966075,-0.158655,0.237011,0.878316,0.969048,-0.151707,0.222518,0.90329,0.972423,-0.143271,0.207848,0.927745,0.975833,-0.134824,0.192463,0.950859,0.977629,-0.125444,0.1768,0.972947,0.978995,-0.114949,0.161033,0.993263,0.980533,-0.104936,0.145523,1.01337,0.980745,-0.0935577,0.129799,1.03128,0.981814,-0.0822956,0.113486,1.04825,0.983943,-0.0710082,0.0972925,1.06405,0.986141,-0.0587931,0.0808138,1.0785,0.988878,-0.0472755,0.0644915,1.09204,0.992132,-0.0349128,0.0478128,1.10413,0.9953,-0.0232407,0.031621,1.11527,0.998117,-0.0112713,0.0154935,1.12551,1.00003,0.000339743,-0.000195763,1.13504,0.845441,-0.00000729126,0.364305,0.0000169208,0.843588,-0.000183164,0.363506,0.000425067,0.843412,-0.00073253,0.36343,0.00169999,0.843401,-0.00164818,0.363426,0.00382495,0.843399,-0.00293008,0.363425,0.00679993,0.843401,-0.00457822,0.363425,0.010625,0.843394,-0.00659249,0.363421,0.0153002,0.843398,-0.00897282,0.363421,0.0208258,0.843415,-0.0117191,0.363426,0.0272024,0.843438,-0.0148312,0.363432,0.0344305,0.843483,-0.018309,0.363447,0.0425116,0.84356,-0.0221521,0.363472,0.0514471,0.843646,-0.0263597,0.363499,0.061238,0.843743,-0.0309315,0.363527,0.0718873,0.84388,-0.0358658,0.363569,0.0833969,0.844079,-0.0411624,0.363631,0.0957742,0.844279,-0.0468128,0.363688,0.109015,0.844549,-0.0527923,0.363761,0.123124,0.844858,-0.0588204,0.363817,0.138044,0.84522,-0.0647573,0.36383,0.153755,0.845669,-0.0713181,0.363879,0.170394,0.846155,-0.0781697,0.363908,0.187861,0.846789,-0.0853913,0.363969,0.206176,0.847502,-0.0928086,0.363999,0.225244,0.8484,-0.10005,0.363997,0.244926,0.849461,-0.107615,0.364008,0.265188,0.850562,-0.115814,0.364055,0.28587,0.851962,-0.124334,0.364179,0.306926,0.854326,-0.131995,0.364233,0.329605,0.856295,-0.139338,0.363856,0.35359,0.858857,-0.146346,0.363347,0.37831,0.862428,-0.152994,0.362807,0.403722,0.866203,-0.159463,0.361963,0.429537,0.871629,-0.165623,0.36112,0.456,0.877365,-0.171649,0.359917,0.482773,0.883744,-0.177151,0.35848,0.509705,0.890693,-0.182381,0.356523,0.537215,0.897278,-0.186076,0.3533,0.565493,0.903958,-0.188602,0.349095,0.594293,0.910908,-0.190755,0.344215,0.623165,0.918117,-0.192063,0.338606,0.651573,0.924644,-0.192758,0.331544,0.679869,0.931054,-0.192238,0.323163,0.708668,0.937303,-0.190035,0.313529,0.737201,0.943387,-0.187162,0.303152,0.764977,0.948494,-0.183876,0.29146,0.792683,0.952546,-0.178901,0.277917,0.819228,0.958077,-0.173173,0.264753,0.846559,0.962462,-0.16645,0.25002,0.872962,0.966569,-0.159452,0.234873,0.898729,0.969108,-0.15074,0.218752,0.923126,0.973072,-0.141523,0.202673,0.947278,0.975452,-0.132075,0.186326,0.969938,0.977784,-0.121257,0.169396,0.991325,0.97899,-0.110182,0.153044,1.01123,0.979777,-0.0989634,0.136485,1.0299,0.980865,-0.0865894,0.119343,1.04727,0.982432,-0.0746115,0.102452,1.06341,0.984935,-0.0621822,0.0852423,1.07834,0.987776,-0.0495694,0.0678546,1.092,0.99103,-0.0372386,0.0506917,1.1043,0.99474,-0.0244353,0.0333316,1.11576,0.997768,-0.0121448,0.0164348,1.12617,1.00003,0.00031774,-0.000169504,1.13598,0.825551,-0.00000756799,0.378425,0.0000165099,0.82664,-0.000190922,0.378923,0.000416504,0.826323,-0.000763495,0.378779,0.0016656,0.826359,-0.00171789,0.378795,0.00374768,0.82636,-0.00305402,0.378795,0.00666259,0.826368,-0.00477185,0.378798,0.0104104,0.826364,-0.00687131,0.378795,0.0149912,0.826368,-0.00935232,0.378795,0.0204054,0.826376,-0.0122146,0.378797,0.0266532,0.826399,-0.0154581,0.378803,0.0337355,0.82646,-0.0190825,0.378824,0.0416537,0.826525,-0.0230873,0.378846,0.0504091,0.826614,-0.0274719,0.378876,0.0600032,0.82674,-0.0322355,0.378917,0.0704393,0.826888,-0.0373766,0.378964,0.0817195,0.827078,-0.0428936,0.379024,0.0938492,0.827318,-0.0487778,0.379099,0.106828,0.82764,-0.0549935,0.379199,0.120659,0.827926,-0.0611058,0.379227,0.13526,0.828325,-0.0675054,0.379275,0.150713,0.828801,-0.0743455,0.379332,0.167034,0.8294,-0.0815523,0.379415,0.184209,0.830094,-0.0890779,0.379495,0.202203,0.8309,-0.096736,0.379555,0.220945,0.831943,-0.104135,0.379577,0.240306,0.833037,-0.112106,0.379604,0.260317,0.834278,-0.120554,0.379668,0.2808,0.836192,-0.129128,0.3799,0.301654,0.838671,-0.137541,0.380109,0.323502,0.840939,-0.14523,0.379809,0.347176,0.844575,-0.15248,0.379593,0.371706,0.848379,-0.159607,0.37909,0.39688,0.853616,-0.166267,0.378617,0.422702,0.858921,-0.172698,0.377746,0.448919,0.865324,-0.178823,0.376749,0.475661,0.872207,-0.184542,0.375363,0.502599,0.880018,-0.189836,0.373657,0.529914,0.88694,-0.194294,0.370673,0.557683,0.894779,-0.197022,0.36662,0.586848,0.902242,-0.199108,0.36138,0.615831,0.909914,-0.200398,0.355434,0.644478,0.917088,-0.20094,0.348173,0.672905,0.923888,-0.200671,0.339482,0.701327,0.930495,-0.198773,0.32956,0.730101,0.937247,-0.195394,0.318363,0.758383,0.943108,-0.191956,0.306323,0.786539,0.948296,-0.187227,0.292576,0.813637,0.953472,-0.181165,0.278234,0.840793,0.958485,-0.174119,0.263054,0.867712,0.962714,-0.166564,0.246756,0.893635,0.966185,-0.158181,0.229945,0.919028,0.970146,-0.148275,0.212633,0.943413,0.973491,-0.138157,0.195229,0.966627,0.975741,-0.127574,0.178048,0.988817,0.977238,-0.11554,0.160312,1.00924,0.978411,-0.10364,0.142857,1.02845,0.979811,-0.0913122,0.125317,1.04648,0.98116,-0.0782558,0.107627,1.06284,0.983543,-0.0655957,0.0895862,1.07798,0.986789,-0.0520411,0.0713756,1.092,0.990292,-0.0389727,0.053228,1.10484,0.994187,-0.025808,0.0351945,1.11642,0.997499,-0.0126071,0.0173198,1.12703,0.999999,0.000275604,-0.000148602,1.13674,0.81075,-0.0000078735,0.394456,0.0000161829,0.808692,-0.000198293,0.393453,0.000407564,0.80846,-0.000792877,0.39334,0.00162965,0.808595,-0.00178416,0.393407,0.00366711,0.808597,-0.00317182,0.393408,0.00651934,0.808598,-0.00495589,0.393408,0.0101866,0.808591,-0.00713627,0.393403,0.0146689,0.808592,-0.00971285,0.393402,0.0199667,0.80861,-0.0126855,0.393407,0.0260803,0.808633,-0.0160538,0.393413,0.0330107,0.80868,-0.0198175,0.393429,0.0407589,0.808748,-0.0239758,0.393453,0.0493264,0.808854,-0.0285286,0.39349,0.0587161,0.808992,-0.0334748,0.39354,0.0689304,0.809141,-0.0388116,0.393588,0.0799707,0.809352,-0.0445375,0.39366,0.0918432,0.809608,-0.0506427,0.393742,0.104549,0.809915,-0.0570708,0.393834,0.118085,0.810253,-0.0633526,0.393885,0.132377,0.810687,-0.0700966,0.393953,0.147537,0.811233,-0.0772274,0.394047,0.163543,0.811865,-0.0847629,0.394148,0.180394,0.812648,-0.0925663,0.394265,0.198051,0.813583,-0.100416,0.394363,0.216443,0.814683,-0.108119,0.394402,0.235502,0.815948,-0.11644,0.394489,0.255242,0.817278,-0.125036,0.394542,0.275441,0.819605,-0.133655,0.39486,0.296094,0.822256,-0.142682,0.395248,0.317309,0.825349,-0.150756,0.395241,0.340516,0.829605,-0.158392,0.395285,0.364819,0.83391,-0.165801,0.394922,0.389736,0.839808,-0.172677,0.394691,0.415409,0.845708,-0.179448,0.394006,0.441546,0.853025,-0.185746,0.393279,0.46832,0.859666,-0.191684,0.391655,0.495302,0.86789,-0.197146,0.390068,0.52262,0.875845,-0.201904,0.38727,0.550336,0.882634,-0.205023,0.382688,0.578825,0.891076,-0.207098,0.377543,0.608103,0.900589,-0.208474,0.371752,0.63723,0.90791,-0.209068,0.364016,0.665769,0.915971,-0.208655,0.355593,0.694428,0.923455,-0.20729,0.345439,0.723224,0.931514,-0.203821,0.334099,0.751925,0.937885,-0.19986,0.321069,0.780249,0.943136,-0.194993,0.306571,0.8077,0.948818,-0.189132,0.291556,0.83497,0.954433,-0.181617,0.275745,0.86188,0.959078,-0.173595,0.258695,0.888562,0.962705,-0.164855,0.240825,0.914008,0.966753,-0.155129,0.22268,0.939145,0.970704,-0.144241,0.204542,0.963393,0.973367,-0.133188,0.185927,0.985983,0.975984,-0.121146,0.167743,1.00704,0.976994,-0.108366,0.149218,1.02715,0.978485,-0.0956746,0.13131,1.0455,0.980074,-0.0820733,0.112513,1.06221,0.98225,-0.0684061,0.0938323,1.07782,0.98553,-0.0549503,0.0749508,1.09199,0.989529,-0.0407857,0.055848,1.10508,0.993536,-0.0271978,0.0368581,1.11684,0.997247,-0.0132716,0.0181845,1.12789,1,0.000431817,-0.000198809,1.13792,0.785886,-0.00000812608,0.405036,0.0000157669,0.790388,-0.000205278,0.407355,0.000398297,0.790145,-0.000820824,0.407231,0.00159263,0.790135,-0.00184681,0.407226,0.00358336,0.790119,-0.00328316,0.407218,0.00637039,0.790126,-0.00512988,0.40722,0.0099539,0.79013,-0.00738684,0.407221,0.0143339,0.790135,-0.0100538,0.407221,0.0195107,0.790134,-0.0131306,0.407217,0.0254848,0.79016,-0.0166169,0.407224,0.0322572,0.790197,-0.020512,0.407236,0.0398284,0.790273,-0.0248157,0.407263,0.0482014,0.790381,-0.029527,0.407304,0.0573777,0.790521,-0.0346446,0.407355,0.0673602,0.790704,-0.0401665,0.40742,0.0781522,0.790925,-0.0460896,0.407499,0.0897582,0.791195,-0.0524017,0.407589,0.10218,0.791522,-0.0590121,0.407691,0.11541,0.791878,-0.0654876,0.407748,0.12939,0.792361,-0.0725207,0.407849,0.144237,0.792942,-0.0799844,0.407963,0.159924,0.79362,-0.0877896,0.408087,0.176425,0.794529,-0.0958451,0.408259,0.193733,0.795521,-0.103827,0.408362,0.211756,0.796778,-0.111937,0.408482,0.230524,0.798027,-0.120521,0.408547,0.249967,0.799813,-0.129242,0.408721,0.269926,0.802387,-0.138048,0.409148,0.290338,0.805279,-0.147301,0.409641,0.311193,0.809251,-0.155895,0.410154,0.333611,0.813733,-0.163942,0.410297,0.357615,0.819081,-0.171666,0.410373,0.382339,0.825427,-0.178905,0.410348,0.407828,0.83172,-0.185812,0.409486,0.434034,0.83877,-0.192318,0.408776,0.460493,0.845817,-0.198249,0.407176,0.487346,0.854664,-0.204034,0.405719,0.514832,0.863495,-0.208908,0.403282,0.542401,0.871883,-0.212765,0.399293,0.570683,0.88065,-0.214911,0.393803,0.599947,0.89004,-0.216214,0.387536,0.62932,0.898476,-0.216745,0.379846,0.658319,0.906738,-0.216387,0.370625,0.687138,0.914844,-0.215053,0.360139,0.71601,0.923877,-0.212007,0.348849,0.745124,0.931925,-0.207481,0.335639,0.773366,0.938054,-0.202418,0.320798,0.801636,0.943895,-0.196507,0.304772,0.829055,0.949468,-0.189009,0.288033,0.856097,0.955152,-0.180539,0.270532,0.88301,0.959403,-0.171437,0.251639,0.909296,0.963309,-0.161661,0.232563,0.934868,0.967399,-0.150425,0.213231,0.959662,0.972009,-0.138659,0.194247,0.98302,0.97433,-0.126595,0.174718,1.00517,0.975823,-0.113205,0.155518,1.02566,0.976371,-0.0996096,0.136709,1.04418,0.978705,-0.0860754,0.117571,1.06146,0.981477,-0.0714438,0.0980046,1.07777,0.984263,-0.0572304,0.0782181,1.09214,0.988423,-0.0428875,0.0584052,1.10553,0.993,-0.0282442,0.038522,1.11758,0.99704,-0.0140183,0.0190148,1.12864,0.999913,0.000369494,-0.000145203,1.13901,0.777662,-0.0000084153,0.423844,0.0000154403,0.770458,-0.000211714,0.419915,0.00038845,0.770716,-0.000846888,0.420055,0.00155386,0.770982,-0.00190567,0.420202,0.00349653,0.770981,-0.00338782,0.420201,0.00621606,0.77098,-0.00529338,0.4202,0.00971274,0.770983,-0.00762223,0.4202,0.0139867,0.770985,-0.0103741,0.420198,0.0190381,0.770996,-0.0135489,0.4202,0.0248677,0.771029,-0.0171461,0.420212,0.0314764,0.771052,-0.0211647,0.420215,0.0388648,0.771131,-0.0256048,0.420245,0.047036,0.771235,-0.0304647,0.420284,0.0559911,0.771383,-0.0357436,0.420341,0.0657346,0.771591,-0.0414392,0.420423,0.0762694,0.771819,-0.0475462,0.420506,0.0875984,0.772123,-0.0540506,0.420617,0.099727,0.772464,-0.060797,0.42072,0.112637,0.772855,-0.0675393,0.420799,0.126313,0.773317,-0.0748323,0.420893,0.140824,0.773981,-0.0825681,0.421058,0.15617,0.774746,-0.0906307,0.421226,0.172322,0.77566,-0.0988982,0.421397,0.189253,0.776837,-0.106994,0.421569,0.206912,0.778097,-0.115528,0.421704,0.225359,0.779588,-0.124317,0.421849,0.24447,0.781574,-0.133139,0.422097,0.264156,0.784451,-0.142179,0.422615,0.284318,0.787682,-0.15165,0.423269,0.304902,0.792433,-0.160771,0.424396,0.3265,0.797359,-0.169166,0.424772,0.35014,0.803986,-0.177149,0.425475,0.374768,0.809504,-0.184745,0.424996,0.399928,0.815885,-0.19173,0.424247,0.425796,0.823513,-0.198525,0.423515,0.452287,0.832549,-0.204709,0.422787,0.479321,0.841653,-0.210447,0.421187,0.506718,0.850401,-0.215501,0.418519,0.53432,0.859854,-0.219752,0.414715,0.56242,0.869364,-0.222305,0.409462,0.591558,0.878837,-0.223744,0.402926,0.621074,0.888636,-0.224065,0.395043,0.650538,0.898132,-0.223742,0.38564,0.679538,0.907181,-0.222308,0.375378,0.708674,0.915621,-0.219837,0.363212,0.737714,0.9239,-0.215233,0.349313,0.767014,0.931644,-0.209592,0.334162,0.795133,0.938887,-0.203644,0.317943,0.823228,0.945282,-0.196349,0.300581,0.850822,0.950758,-0.18742,0.282195,0.877594,0.956146,-0.177879,0.262481,0.904564,0.960355,-0.167643,0.242487,0.930741,0.965256,-0.156671,0.222668,0.955868,0.968029,-0.144123,0.201907,0.979869,0.97251,-0.131305,0.18202,1.00291,0.974925,-0.118335,0.161909,1.02392,0.975402,-0.103714,0.142129,1.0433,0.976987,-0.089415,0.122447,1.06089,0.979677,-0.0748858,0.102248,1.07713,0.983184,-0.0596086,0.0814851,1.09218,0.987466,-0.0447671,0.0609484,1.10585,0.992348,-0.0295217,0.0401835,1.11829,0.996674,-0.0143917,0.0198163,1.12966,1.00003,0.000321364,-0.000149983,1.1402,0.757901,-0.00000869074,0.436176,0.0000151011,0.751195,-0.000217848,0.432317,0.000378533,0.751178,-0.000871373,0.432307,0.0015141,0.751195,-0.00196061,0.432317,0.0034068,0.751198,-0.00348552,0.432318,0.00605659,0.751195,-0.00544599,0.432315,0.00946353,0.751207,-0.00784203,0.43232,0.013628,0.751213,-0.0106732,0.43232,0.0185499,0.751221,-0.0139393,0.432319,0.0242302,0.751244,-0.0176398,0.432325,0.0306694,0.7513,-0.0217743,0.432348,0.0378698,0.751358,-0.0263412,0.432367,0.0458321,0.751458,-0.0313396,0.432404,0.0545587,0.751608,-0.0367682,0.432464,0.0640543,0.7518,-0.0426246,0.43254,0.0743222,0.752065,-0.0489031,0.432645,0.0853668,0.752376,-0.0555828,0.432762,0.0971911,0.752715,-0.0623861,0.432859,0.109768,0.753137,-0.069415,0.432958,0.123126,0.753676,-0.0770039,0.433099,0.137308,0.754345,-0.084971,0.433272,0.15229,0.755235,-0.0932681,0.433504,0.168075,0.756186,-0.10171,0.433693,0.184625,0.757363,-0.110019,0.433857,0.201897,0.75884,-0.11887,0.434102,0.220014,0.760467,-0.127881,0.434306,0.238778,0.762969,-0.136766,0.434751,0.258172,0.765823,-0.14612,0.43529,0.278062,0.769676,-0.15566,0.436236,0.298437,0.774909,-0.165177,0.437754,0.319532,0.77994,-0.17402,0.438343,0.342505,0.785757,-0.182201,0.438609,0.366693,0.792487,-0.190104,0.438762,0.391668,0.80038,-0.197438,0.438795,0.417494,0.808494,-0.204365,0.438226,0.443933,0.817695,-0.210714,0.437283,0.470929,0.828111,-0.216651,0.436087,0.498569,0.837901,-0.221804,0.433717,0.526165,0.847813,-0.226318,0.430133,0.554155,0.858314,-0.229297,0.425213,0.582822,0.868891,-0.230999,0.418576,0.612847,0.878941,-0.231155,0.410405,0.642445,0.888809,-0.230935,0.400544,0.672024,0.898089,-0.229343,0.389613,0.701366,0.908081,-0.226886,0.377197,0.730763,0.916819,-0.222676,0.363397,0.759642,0.924968,-0.216835,0.347437,0.788775,0.932906,-0.210245,0.32995,0.817135,0.940025,-0.202992,0.312262,0.844912,0.946101,-0.19436,0.293313,0.872164,0.952835,-0.184125,0.273638,0.899443,0.957347,-0.173657,0.252385,0.926389,0.961434,-0.162204,0.231038,0.951947,0.965522,-0.14979,0.209834,0.976751,0.969412,-0.136307,0.188821,1.00022,0.973902,-0.122527,0.168013,1.02229,0.974045,-0.108213,0.147634,1.04199,0.975775,-0.0927397,0.12705,1.06019,0.978383,-0.0778212,0.106309,1.07711,0.98211,-0.0621216,0.0849279,1.09245,0.986517,-0.0463847,0.0633519,1.10651,0.991696,-0.0309353,0.0419698,1.11903,0.996349,-0.0150914,0.0206272,1.13073,1.00003,0.000442449,-0.000231396,1.14146,0.727498,-0.00000885074,0.441528,0.0000145832,0.730897,-0.000223525,0.443589,0.000368298,0.730796,-0.000893996,0.443528,0.00147303,0.730805,-0.00201149,0.443533,0.00331433,0.730814,-0.00357596,0.443538,0.00589222,0.730815,-0.00558734,0.443538,0.00920678,0.730822,-0.00804544,0.44354,0.0132582,0.730836,-0.0109501,0.443545,0.0180468,0.730848,-0.0143008,0.443546,0.0235732,0.730871,-0.0180969,0.443552,0.0298382,0.730915,-0.022338,0.443567,0.0368438,0.730982,-0.0270225,0.443591,0.044591,0.731076,-0.0321491,0.443627,0.0530831,0.731245,-0.0377166,0.443699,0.0623243,0.73144,-0.0437216,0.443777,0.0723181,0.7317,-0.0501576,0.443881,0.0830691,0.732034,-0.0569942,0.444014,0.0945809,0.732388,-0.0638756,0.444113,0.106825,0.732853,-0.071203,0.444247,0.119859,0.733473,-0.0790076,0.444442,0.13369,0.734195,-0.0871937,0.444645,0.148304,0.735069,-0.095696,0.444877,0.163702,0.736169,-0.10426,0.445133,0.179861,0.73747,-0.112853,0.44537,0.196778,0.738991,-0.12199,0.445651,0.214496,0.740865,-0.131153,0.445958,0.232913,0.743637,-0.140245,0.446548,0.251977,0.746797,-0.149722,0.447246,0.271551,0.751517,-0.159341,0.448656,0.291774,0.756156,-0.169106,0.449866,0.312455,0.761519,-0.178436,0.450919,0.334552,0.768295,-0.186904,0.451776,0.358491,0.776613,-0.195117,0.452832,0.383446,0.783966,-0.202695,0.45249,0.408945,0.793542,-0.20985,0.452587,0.435364,0.803192,-0.216403,0.451852,0.462336,0.813892,-0.22251,0.450708,0.48987,0.824968,-0.227676,0.4486,0.517697,0.835859,-0.232443,0.445156,0.545975,0.846825,-0.235775,0.440351,0.574483,0.858085,-0.237897,0.433641,0.604246,0.868825,-0.238074,0.425354,0.634101,0.879638,-0.237661,0.415383,0.664201,0.889966,-0.236186,0.404136,0.693918,0.899479,-0.233599,0.390917,0.723481,0.908769,-0.229737,0.376352,0.75258,0.917966,-0.223836,0.360372,0.781764,0.926304,-0.217067,0.342551,0.811139,0.934626,-0.209309,0.324238,0.839585,0.941841,-0.20071,0.304484,0.867044,0.94789,-0.190602,0.283607,0.894579,0.954196,-0.179253,0.262205,0.921743,0.958383,-0.167646,0.239847,0.948026,0.963119,-0.155073,0.218078,0.973296,0.966941,-0.141426,0.195899,0.998135,0.970836,-0.126849,0.174121,1.02021,0.973301,-0.112296,0.153052,1.04085,0.97448,-0.0964965,0.131733,1.05946,0.977045,-0.080489,0.10997,1.07693,0.980751,-0.064844,0.0881657,1.09254,0.985475,-0.0481938,0.0657987,1.10697,0.991089,-0.0319185,0.0435215,1.12004,0.996122,-0.0158088,0.0214779,1.13173,1.00001,0.000372455,-0.000200295,1.14291,0.708622,-0.00000907597,0.45304,0.0000141962,0.711162,-0.000228911,0.454662,0.000358052,0.709812,-0.000914446,0.453797,0.00143034,0.709865,-0.00205819,0.453834,0.00321935,0.709864,-0.00365894,0.453833,0.00572331,0.709855,-0.00571692,0.453826,0.00894278,0.709862,-0.00823201,0.453828,0.012878,0.709875,-0.011204,0.453832,0.0175295,0.709896,-0.0146323,0.453839,0.0228978,0.709925,-0.0185163,0.453847,0.0289839,0.709974,-0.0228551,0.453866,0.0357894,0.710045,-0.0276473,0.453892,0.0433161,0.710133,-0.032891,0.453924,0.0515665,0.710292,-0.0385851,0.453992,0.0605458,0.710485,-0.0447254,0.45407,0.0702574,0.710769,-0.0513051,0.454192,0.0807077,0.711106,-0.0582733,0.454329,0.091896,0.711516,-0.0652866,0.45446,0.103814,0.712071,-0.0728426,0.454653,0.116508,0.712676,-0.0808307,0.45484,0.129968,0.713476,-0.0892216,0.455096,0.144206,0.714377,-0.0979047,0.455346,0.159212,0.715579,-0.106531,0.455647,0.174973,0.716977,-0.115492,0.455961,0.191504,0.71862,-0.124821,0.456315,0.208835,0.72084,-0.134079,0.4568,0.226869,0.723786,-0.143427,0.457521,0.245582,0.727464,-0.153061,0.458475,0.264957,0.732771,-0.162768,0.460239,0.284948,0.736515,-0.172627,0.460899,0.30522,0.743519,-0.182487,0.463225,0.326717,0.750041,-0.191295,0.464027,0.350113,0.758589,-0.199746,0.465227,0.374782,0.767703,-0.207584,0.465877,0.400226,0.777484,-0.214973,0.465996,0.426442,0.788792,-0.221796,0.466019,0.453688,0.800194,-0.228038,0.465083,0.481246,0.811234,-0.233346,0.462506,0.509086,0.822859,-0.238073,0.459257,0.537338,0.835082,-0.241764,0.454863,0.566108,0.846332,-0.244241,0.448163,0.595126,0.858355,-0.244736,0.439709,0.625574,0.87034,-0.244278,0.429837,0.65617,0.881027,-0.24255,0.418002,0.686029,0.891007,-0.239912,0.404325,0.716039,0.900874,-0.236133,0.389222,0.745518,0.911072,-0.230672,0.373269,0.775026,0.920359,-0.22356,0.355083,0.804521,0.928604,-0.215591,0.335533,0.834045,0.937175,-0.206503,0.315278,0.861612,0.942825,-0.196684,0.293653,0.889131,0.949805,-0.185116,0.271503,0.916853,0.955535,-0.172703,0.248821,0.943541,0.959843,-0.159978,0.225591,0.970132,0.964393,-0.146375,0.202719,0.994709,0.968008,-0.131269,0.179928,1.0186,0.971013,-0.11569,0.158007,1.03928,0.973334,-0.1003,0.13624,1.05887,0.975775,-0.0833352,0.1138,1.07652,0.979579,-0.0668981,0.0913141,1.09297,0.984323,-0.0500902,0.0683051,1.10734,0.990351,-0.0332377,0.0451771,1.12084,0.995823,-0.0161491,0.0221705,1.13296,1.0001,0.000234083,-0.000108712,1.14441,0.683895,-0.00000924677,0.46015,0.0000137429,0.68833,-0.000233383,0.463134,0.000346865,0.688368,-0.000933547,0.463159,0.00138748,0.688367,-0.00210049,0.463159,0.00312187,0.688369,-0.00373415,0.463159,0.00555004,0.688377,-0.00583449,0.463163,0.00867216,0.688386,-0.00840128,0.463166,0.0124884,0.688398,-0.0114343,0.463169,0.0169993,0.688418,-0.0149329,0.463175,0.0222054,0.688453,-0.0188964,0.463188,0.028108,0.688515,-0.0233239,0.463214,0.0347085,0.68857,-0.0282136,0.463231,0.0420091,0.688679,-0.033564,0.463276,0.0500132,0.688854,-0.0393733,0.463356,0.0587255,0.689038,-0.0456354,0.46343,0.0681476,0.689321,-0.0523433,0.463553,0.0782897,0.689662,-0.059412,0.463693,0.0891501,0.690188,-0.0665736,0.4639,0.100735,0.690755,-0.0743106,0.464107,0.113074,0.691405,-0.0824722,0.464329,0.126161,0.692198,-0.0910484,0.464585,0.140007,0.693196,-0.0998778,0.464893,0.154612,0.69454,-0.108651,0.465285,0.169984,0.695921,-0.117855,0.465596,0.186106,0.697749,-0.12734,0.466056,0.203034,0.700375,-0.136714,0.466771,0.220703,0.703395,-0.146386,0.467579,0.239062,0.707904,-0.156096,0.469067,0.258188,0.711673,-0.165904,0.469851,0.277759,0.717489,-0.175812,0.471815,0.297935,0.724051,-0.185931,0.47389,0.318916,0.731965,-0.195238,0.47587,0.341591,0.741151,-0.204021,0.477523,0.366062,0.751416,-0.212113,0.478881,0.391396,0.761848,-0.21979,0.479226,0.417599,0.771886,-0.2267,0.478495,0.444401,0.783998,-0.232991,0.477622,0.472084,0.796523,-0.238645,0.475833,0.500193,0.808851,-0.243396,0.472568,0.52865,0.821191,-0.247226,0.467857,0.557362,0.834261,-0.250102,0.461871,0.586768,0.846762,-0.251056,0.453543,0.617085,0.859867,-0.250604,0.443494,0.647659,0.871948,-0.248783,0.431711,0.678119,0.882967,-0.245855,0.417911,0.708399,0.892826,-0.242168,0.401993,0.738256,0.90332,-0.237062,0.385371,0.767999,0.913633,-0.22997,0.366837,0.798191,0.922774,-0.221687,0.346372,0.827756,0.931371,-0.212345,0.325682,0.856425,0.938929,-0.20206,0.303665,0.884299,0.944821,-0.190981,0.280786,0.912023,0.951792,-0.178065,0.2573,0.939669,0.957712,-0.164634,0.233448,0.96655,0.961912,-0.150863,0.209504,0.992366,0.966382,-0.13577,0.18597,1.01633,0.969588,-0.119593,0.162905,1.03843,0.971777,-0.103203,0.14053,1.05841,0.97433,-0.0865888,0.117909,1.07632,0.978686,-0.0690829,0.0944101,1.09326,0.983281,-0.0516568,0.0705671,1.10796,0.989562,-0.034558,0.0468592,1.12182,0.995465,-0.0167808,0.0229846,1.1342,0.999991,0.000373016,-0.000235606,1.1459,0.662251,-0.00000939016,0.468575,0.0000132714,0.666634,-0.000237624,0.471675,0.000335842,0.666411,-0.000950385,0.471516,0.00134321,0.666399,-0.00213833,0.471509,0.00302221,0.666386,-0.0038014,0.471499,0.00537283,0.666405,-0.00593958,0.471511,0.00839533,0.666406,-0.00855253,0.471508,0.0120898,0.666428,-0.0116401,0.471519,0.0164569,0.666444,-0.0152015,0.471522,0.0214971,0.66649,-0.0192362,0.471543,0.027212,0.666537,-0.0237428,0.471558,0.033603,0.666617,-0.0287198,0.471591,0.0406728,0.666718,-0.0341647,0.471631,0.0484238,0.666889,-0.0400759,0.47171,0.0568621,0.667104,-0.0464479,0.471805,0.0659915,0.667374,-0.0532677,0.471923,0.0758178,0.667772,-0.0603805,0.472098,0.0863425,0.668371,-0.0677392,0.472363,0.0975917,0.668971,-0.0756028,0.472596,0.109567,0.669696,-0.0839293,0.472869,0.122272,0.670481,-0.0926683,0.473126,0.135718,0.6715,-0.1016,0.473442,0.149914,0.672911,-0.110566,0.47389,0.164882,0.674512,-0.119984,0.474354,0.180602,0.67651,-0.129574,0.474922,0.19711,0.679292,-0.139106,0.475764,0.214371,0.682798,-0.148993,0.476886,0.232405,0.686955,-0.158737,0.478179,0.251153,0.691406,-0.168754,0.479432,0.270436,0.697438,-0.178703,0.481481,0.290374,0.704761,-0.188955,0.484143,0.311044,0.713599,-0.198814,0.487007,0.333003,0.723194,-0.207869,0.488962,0.357144,0.732601,-0.216189,0.489815,0.382169,0.744193,-0.22398,0.490888,0.408227,0.754907,-0.231156,0.490355,0.434928,0.767403,-0.23747,0.489548,0.462599,0.78107,-0.243503,0.488274,0.490908,0.793893,-0.248114,0.484843,0.519421,0.807296,-0.25222,0.4803,0.548561,0.820529,-0.255265,0.474097,0.577772,0.833716,-0.256741,0.466041,0.607782,0.848403,-0.25637,0.456547,0.638807,0.860755,-0.254804,0.443946,0.670058,0.874012,-0.251834,0.430852,0.700749,0.885619,-0.247867,0.414903,0.731446,0.896069,-0.242634,0.397276,0.761191,0.906266,-0.236093,0.378535,0.791053,0.916759,-0.227543,0.358038,0.821298,0.92523,-0.21783,0.335705,0.850747,0.93436,-0.207534,0.313797,0.879258,0.941631,-0.195983,0.289671,0.907734,0.947564,-0.183567,0.265319,0.935206,0.953681,-0.169345,0.240815,0.962739,0.960008,-0.154909,0.216119,0.989227,0.964145,-0.140161,0.192096,1.01465,0.968171,-0.123411,0.167855,1.03737,0.969859,-0.106525,0.144817,1.05767,0.972666,-0.0891023,0.12149,1.0761,0.977055,-0.0718094,0.0975306,1.09336,0.982527,-0.0534213,0.0730217,1.10878,0.989001,-0.0355579,0.0483366,1.12285,0.99512,-0.0176383,0.023938,1.13548,1.00007,0.000368831,-0.000211581,1.14744,0.651047,-0.00000960845,0.484101,0.000012922,0.644145,-0.000241347,0.478968,0.000324578,0.64396,-0.000965142,0.478831,0.00129798,0.64396,-0.00217154,0.47883,0.00292046,0.643968,-0.00386049,0.478835,0.00519202,0.643974,-0.00603186,0.478838,0.0081128,0.643977,-0.0086854,0.478836,0.011683,0.643982,-0.0118207,0.478834,0.0159031,0.644024,-0.0154374,0.478856,0.0207743,0.644059,-0.0195343,0.478868,0.0262975,0.644122,-0.0241103,0.478896,0.0324747,0.644207,-0.0291638,0.478933,0.039309,0.64432,-0.0346919,0.478981,0.0468029,0.644481,-0.0406919,0.479053,0.0549614,0.644722,-0.047159,0.479169,0.0637909,0.645013,-0.0540748,0.479302,0.0732974,0.645503,-0.0612001,0.479541,0.0834898,0.646117,-0.0687303,0.479829,0.0943873,0.646707,-0.0767846,0.480061,0.105991,0.647431,-0.0852465,0.480343,0.11831,0.64831,-0.0940719,0.48066,0.131348,0.649486,-0.103056,0.481083,0.14514,0.650864,-0.112261,0.481528,0.159676,0.652604,-0.121852,0.482102,0.174979,0.654825,-0.131505,0.482813,0.191079,0.657876,-0.141189,0.483876,0.207927,0.661339,-0.151239,0.48499,0.225586,0.665463,-0.161091,0.486279,0.243947,0.670542,-0.171235,0.487968,0.262957,0.677361,-0.181347,0.49053,0.282781,0.685672,-0.191679,0.493862,0.303311,0.694551,-0.201781,0.49699,0.324607,0.703753,-0.211164,0.498884,0.347916,0.713703,-0.219675,0.500086,0.372628,0.725911,-0.227836,0.501554,0.398694,0.73862,-0.23533,0.502193,0.425529,0.752118,-0.241786,0.501811,0.453209,0.76579,-0.247865,0.500185,0.481381,0.779568,-0.252696,0.497159,0.51011,0.793991,-0.256802,0.492765,0.539322,0.808182,-0.259942,0.486827,0.569078,0.821698,-0.261703,0.478386,0.598818,0.836009,-0.262006,0.468772,0.629762,0.849824,-0.260333,0.456352,0.661366,0.863888,-0.257398,0.442533,0.69295,0.876585,-0.253264,0.426573,0.723608,0.888665,-0.248026,0.408964,0.754378,0.899537,-0.241487,0.389677,0.784761,0.9094,-0.233463,0.368516,0.814688,0.920166,-0.223397,0.346624,0.845009,0.928899,-0.21255,0.322717,0.874431,0.937156,-0.200869,0.298698,0.902922,0.943861,-0.188387,0.273491,0.931356,0.949557,-0.174341,0.247866,0.958854,0.955862,-0.158994,0.222496,0.986098,0.961721,-0.143664,0.197522,1.01229,0.965976,-0.127412,0.17302,1.03571,0.968652,-0.109798,0.148954,1.05699,0.971084,-0.0916787,0.125044,1.07587,0.975584,-0.0739634,0.100577,1.09372,0.98122,-0.055322,0.0753666,1.10948,0.988253,-0.0366825,0.0498899,1.12394,0.99482,-0.0180389,0.024611,1.13694,1.00001,0.000229839,-0.000188283,1.14919,0.613867,-0.00000964198,0.479449,0.0000123452,0.621485,-0.000244534,0.485399,0.000313091,0.621429,-0.000978202,0.485353,0.00125245,0.62112,-0.00220004,0.485114,0.00281687,0.621119,-0.0039111,0.485112,0.00500783,0.621122,-0.00611091,0.485112,0.00782498,0.621133,-0.00879922,0.485117,0.0112687,0.621152,-0.0119756,0.485125,0.0153394,0.621183,-0.0156396,0.485139,0.0200382,0.621227,-0.0197898,0.485158,0.0253663,0.621298,-0.0244253,0.485192,0.0313261,0.621388,-0.0295441,0.485233,0.0379204,0.621507,-0.0351432,0.485286,0.0451523,0.621693,-0.0412198,0.485378,0.0530277,0.621933,-0.0477673,0.485495,0.0615522,0.622232,-0.0547574,0.485635,0.0707316,0.622809,-0.0619417,0.485943,0.0805883,0.623407,-0.069625,0.486232,0.0911267,0.62406,-0.077796,0.486516,0.102354,0.624835,-0.0863731,0.486838,0.114279,0.625758,-0.095251,0.487188,0.126902,0.627043,-0.104299,0.487695,0.140285,0.628438,-0.113724,0.488163,0.154397,0.630325,-0.123417,0.488858,0.169267,0.632801,-0.133137,0.489754,0.184941,0.635784,-0.143052,0.490815,0.20136,0.639406,-0.153132,0.492048,0.218643,0.643872,-0.163143,0.49363,0.236615,0.6499,-0.17333,0.496009,0.255449,0.657201,-0.183622,0.498994,0.275006,0.666221,-0.194019,0.502888,0.295354,0.674419,-0.204192,0.505459,0.316244,0.683729,-0.21406,0.507771,0.33849,0.695584,-0.222854,0.510245,0.363166,0.708583,-0.231315,0.512293,0.389071,0.721233,-0.238911,0.512747,0.415737,0.735134,-0.245657,0.512482,0.443331,0.750179,-0.251879,0.511526,0.471891,0.765073,-0.256911,0.508935,0.500892,0.779794,-0.261144,0.504341,0.530294,0.794801,-0.264316,0.498515,0.560144,0.810339,-0.266276,0.491015,0.590213,0.824818,-0.266981,0.481126,0.620865,0.839375,-0.265778,0.468685,0.652687,0.853043,-0.262748,0.453925,0.684759,0.867335,-0.258474,0.437912,0.716209,0.88037,-0.253187,0.419648,0.747508,0.891711,-0.246476,0.39982,0.77797,0.902896,-0.238735,0.37879,0.808586,0.913601,-0.22885,0.355891,0.838843,0.923019,-0.217656,0.331773,0.869014,0.933432,-0.205539,0.307356,0.898512,0.939691,-0.192595,0.281321,0.9269,0.946938,-0.178945,0.255441,0.955297,0.952372,-0.163587,0.229013,0.983231,0.95909,-0.147214,0.203179,1.00971,0.963675,-0.13064,0.17792,1.03438,0.968247,-0.113121,0.152898,1.05625,0.97001,-0.0945824,0.128712,1.07598,0.974458,-0.0755648,0.103349,1.094,0.980168,-0.0571998,0.0776731,1.1104,0.987295,-0.0377994,0.0514445,1.12491,0.994432,-0.0186417,0.025429,1.13851,0.999975,0.000542714,-0.000282356,1.15108,0.592656,-0.00000980249,0.486018,0.0000119532,0.598467,-0.000247275,0.490781,0.000301531,0.597934,-0.000988317,0.490343,0.00120517,0.597903,-0.00222366,0.490319,0.0027116,0.597913,-0.00395315,0.490327,0.00482077,0.597919,-0.00617653,0.490329,0.00753264,0.597936,-0.00889375,0.490339,0.0108478,0.597956,-0.0121043,0.490347,0.0147668,0.597992,-0.0158073,0.490365,0.0192905,0.598032,-0.0200017,0.490382,0.0244204,0.598109,-0.0246865,0.49042,0.0301593,0.598215,-0.0298594,0.490474,0.03651,0.59833,-0.0355167,0.490524,0.0434757,0.598525,-0.0416559,0.490624,0.0510629,0.598778,-0.0482692,0.490753,0.0592781,0.599135,-0.0553114,0.49094,0.0681304,0.599802,-0.062542,0.491328,0.0776467,0.600361,-0.0703638,0.491598,0.0878184,0.60101,-0.0786256,0.491882,0.0986573,0.601811,-0.0872962,0.492232,0.11018,0.602861,-0.0962284,0.492684,0.1224,0.604167,-0.10538,0.493213,0.135354,0.605693,-0.114896,0.493799,0.149034,0.607682,-0.124654,0.494576,0.163469,0.610672,-0.13456,0.4959,0.178747,0.613313,-0.144581,0.496713,0.194723,0.617603,-0.154703,0.498499,0.211617,0.622174,-0.16489,0.500188,0.229183,0.628855,-0.175164,0.503072,0.247786,0.636963,-0.185565,0.506798,0.267116,0.644866,-0.195911,0.509719,0.28702,0.653741,-0.206104,0.512776,0.307763,0.664942,-0.216447,0.516812,0.329631,0.67633,-0.22552,0.519181,0.353515,0.690012,-0.234316,0.521681,0.379226,0.704243,-0.242032,0.523129,0.405901,0.719396,-0.249172,0.523768,0.433585,0.734471,-0.255543,0.522541,0.462085,0.750539,-0.260697,0.520217,0.491233,0.766365,-0.26501,0.516293,0.521094,0.781677,-0.268409,0.509708,0.551014,0.797132,-0.270399,0.501944,0.581463,0.812655,-0.271247,0.492025,0.612402,0.828592,-0.270708,0.480424,0.643798,0.844044,-0.268085,0.465955,0.67682,0.857305,-0.263459,0.448425,0.708496,0.87114,-0.258151,0.430243,0.74046,0.884936,-0.251171,0.410578,0.771583,0.895772,-0.243305,0.38862,0.802234,0.906961,-0.234037,0.365214,0.833179,0.917775,-0.222714,0.34116,0.86353,0.927883,-0.210175,0.31572,0.893557,0.936617,-0.196925,0.289159,0.922976,0.943384,-0.182788,0.261996,0.951606,0.949713,-0.167965,0.235324,0.979958,0.955818,-0.151109,0.208408,1.00765,0.961344,-0.133834,0.182591,1.03329,0.965469,-0.115987,0.156958,1.0557,0.968693,-0.09746,0.132239,1.07583,0.973165,-0.0778514,0.106195,1.09451,0.979387,-0.0585067,0.0797669,1.11137,0.98671,-0.0390409,0.0530263,1.12643,0.994093,-0.019408,0.0263163,1.14016,1.00002,0.000540029,-0.000194487,1.15299,0.574483,-0.00000989066,0.494533,0.0000114896,0.574478,-0.000249127,0.494528,0.000289403,0.574607,-0.000996811,0.494637,0.00115797,0.574396,-0.00224241,0.494458,0.00260498,0.574377,-0.00398632,0.49444,0.00463102,0.574386,-0.00622836,0.494445,0.00723623,0.574401,-0.0089683,0.494453,0.010421,0.574419,-0.0122056,0.49446,0.0141859,0.574459,-0.0159396,0.494481,0.0185322,0.574525,-0.0201692,0.49452,0.0234617,0.574587,-0.0248924,0.494547,0.0289762,0.574697,-0.0301074,0.494604,0.0350797,0.574853,-0.0358114,0.494688,0.0417767,0.575027,-0.041999,0.494772,0.0490718,0.575294,-0.0486618,0.494915,0.0569728,0.575733,-0.0557148,0.495173,0.0654955,0.576356,-0.0630489,0.495537,0.0746612,0.576944,-0.0709285,0.495836,0.0844615,0.57765,-0.0792723,0.496177,0.0949142,0.578491,-0.0880167,0.496563,0.10603,0.579639,-0.0969462,0.497096,0.117841,0.580989,-0.10622,0.497684,0.130367,0.582587,-0.115861,0.498337,0.143609,0.584951,-0.125605,0.499414,0.157625,0.587602,-0.135608,0.500518,0.172413,0.59076,-0.145742,0.501767,0.187999,0.594992,-0.155934,0.503542,0.20445,0.600656,-0.166303,0.506135,0.221764,0.607816,-0.176681,0.509542,0.24002,0.61522,-0.187071,0.51263,0.258992,0.623702,-0.197465,0.516021,0.278773,0.634192,-0.207816,0.520422,0.299377,0.644936,-0.218183,0.524073,0.320802,0.657888,-0.2278,0.528049,0.34384,0.670666,-0.236747,0.52986,0.36916,0.685626,-0.24484,0.531892,0.395867,0.701304,-0.252071,0.532727,0.423488,0.717727,-0.258714,0.532146,0.452201,0.733914,-0.264211,0.529883,0.481579,0.750529,-0.26859,0.5259,0.511558,0.76747,-0.272046,0.51999,0.542042,0.785189,-0.274225,0.513083,0.572799,0.800954,-0.275189,0.502936,0.603816,0.816962,-0.274946,0.490921,0.635461,0.83336,-0.272695,0.47684,0.6676,0.848143,-0.268223,0.459405,0.70051,0.861818,-0.262768,0.440319,0.732902,0.876828,-0.255872,0.420123,0.765084,0.889312,-0.247703,0.398379,0.796391,0.900412,-0.238381,0.374496,0.827333,0.912251,-0.227783,0.349874,0.858385,0.921792,-0.214832,0.323181,0.888652,0.931273,-0.200949,0.296624,0.917763,0.940295,-0.186537,0.269211,0.947878,0.946812,-0.171538,0.241447,0.977016,0.953588,-0.155254,0.213829,1.00501,0.958841,-0.137156,0.186807,1.03179,0.963746,-0.118699,0.160706,1.05502,0.966468,-0.0998358,0.135504,1.07568,0.971178,-0.0805186,0.109131,1.09479,0.97831,-0.0599348,0.0818293,1.1123,0.985886,-0.0399661,0.0545872,1.12771,0.994021,-0.0198682,0.0269405,1.14186,1.00009,0.000271022,-0.00012989,1.15514,0.538716,-0.00000990918,0.486732,0.0000109675,0.550656,-0.000250642,0.497518,0.000277412,0.55057,-0.00100265,0.497441,0.00110974,0.550903,-0.00225672,0.497733,0.00249779,0.550568,-0.00401046,0.497438,0.00443906,0.550574,-0.00626613,0.49744,0.00693637,0.550591,-0.0090226,0.497449,0.00998921,0.550623,-0.0122795,0.497469,0.0135984,0.550667,-0.0160361,0.497495,0.0177654,0.550724,-0.0202908,0.497526,0.0224915,0.550792,-0.0250421,0.497557,0.0277795,0.550918,-0.0302878,0.49763,0.0336334,0.551058,-0.0360241,0.497701,0.0400573,0.551276,-0.0422473,0.497824,0.0470585,0.551551,-0.0489441,0.497977,0.0546433,0.552074,-0.0559596,0.498312,0.0628367,0.552681,-0.0633978,0.498679,0.071646,0.553324,-0.0713176,0.499031,0.0810746,0.554011,-0.0797268,0.499365,0.091129,0.55488,-0.0885238,0.499779,0.101837,0.556171,-0.0974417,0.500444,0.113239,0.557498,-0.106841,0.501025,0.125316,0.559299,-0.116533,0.501864,0.138128,0.561647,-0.126298,0.502967,0.151695,0.564347,-0.136388,0.504129,0.16604,0.567863,-0.146576,0.505713,0.181207,0.572569,-0.156832,0.507953,0.197259,0.578919,-0.167323,0.511186,0.214258,0.585387,-0.177712,0.514042,0.232038,0.593134,-0.188184,0.517484,0.250733,0.603295,-0.198717,0.522345,0.270454,0.613854,-0.209177,0.526751,0.290807,0.626092,-0.219644,0.531595,0.312202,0.637868,-0.229494,0.534721,0.334435,0.652458,-0.238718,0.538304,0.359184,0.666985,-0.247061,0.539875,0.385637,0.683301,-0.254652,0.541042,0.41328,0.69998,-0.261376,0.540735,0.441903,0.717824,-0.267085,0.539139,0.471609,0.734617,-0.271465,0.534958,0.501446,0.753663,-0.27528,0.53032,0.532571,0.770512,-0.277617,0.522134,0.563641,0.787356,-0.278525,0.51206,0.595067,0.806252,-0.278512,0.50119,0.627226,0.822061,-0.277023,0.486791,0.659402,0.838959,-0.273175,0.470467,0.692874,0.85379,-0.267238,0.450688,0.725702,0.868268,-0.260327,0.429741,0.75832,0.881994,-0.251946,0.407223,0.790189,0.893885,-0.242432,0.383214,0.821625,0.905118,-0.231904,0.357297,0.853011,0.916045,-0.219545,0.330733,0.883773,0.927614,-0.205378,0.303916,0.914435,0.936005,-0.190388,0.275941,0.944502,0.944533,-0.1749,0.247493,0.974439,0.950758,-0.158588,0.218996,1.00286,0.957078,-0.141027,0.191559,1.0304,0.962448,-0.121507,0.164457,1.05466,0.964993,-0.102068,0.138636,1.0761,0.970017,-0.0822598,0.111861,1.09541,0.97661,-0.062033,0.0843438,1.11317,0.985073,-0.0409832,0.0558496,1.12911,0.993515,-0.020146,0.0275331,1.1438,1.00006,0.00027329,-0.000107883,1.15736,0.525324,-0.00000999341,0.498153,0.0000105385,0.526513,-0.000251605,0.499277,0.000265329,0.526517,-0.00100641,0.499282,0.0010613,0.526588,-0.00226466,0.499337,0.00238823,0.526539,-0.0040255,0.499302,0.00424535,0.526547,-0.00628954,0.499306,0.00663364,0.526561,-0.00905628,0.499313,0.00955337,0.526593,-0.0123253,0.499334,0.0130054,0.526642,-0.0160957,0.499365,0.0169911,0.5267,-0.0203661,0.499396,0.0215122,0.526792,-0.0251347,0.499451,0.0265718,0.526904,-0.0303985,0.499511,0.0321732,0.527079,-0.0361554,0.499617,0.0383231,0.527285,-0.0423982,0.499731,0.045026,0.527602,-0.0491121,0.499924,0.0522936,0.528166,-0.0561127,0.500306,0.0601528,0.52879,-0.0635988,0.5007,0.0686059,0.529421,-0.071581,0.501048,0.0776518,0.530144,-0.0799854,0.501421,0.0873148,0.531062,-0.0888032,0.501884,0.0976084,0.532374,-0.0977643,0.50259,0.108588,0.533828,-0.107197,0.50329,0.120234,0.53581,-0.116887,0.504312,0.132602,0.538063,-0.126755,0.505365,0.145721,0.5409,-0.136819,0.506668,0.159617,0.544882,-0.147117,0.508731,0.174369,0.550238,-0.157446,0.511601,0.190028,0.556038,-0.167988,0.514431,0.206587,0.563031,-0.178364,0.517808,0.224046,0.571543,-0.189007,0.521937,0.242503,0.582255,-0.199546,0.527415,0.261977,0.59272,-0.210084,0.531682,0.282162,0.605648,-0.220448,0.537123,0.303426,0.61785,-0.230593,0.540664,0.325323,0.632223,-0.240238,0.544467,0.348993,0.648819,-0.24887,0.547594,0.375462,0.665825,-0.256657,0.54912,0.403024,0.683389,-0.263711,0.549294,0.431773,0.701495,-0.269666,0.547649,0.461494,0.719197,-0.274169,0.543786,0.491623,0.737906,-0.278124,0.538644,0.522994,0.756652,-0.280632,0.531057,0.554775,0.775279,-0.281741,0.521972,0.586441,0.792688,-0.281652,0.509613,0.618596,0.811894,-0.280345,0.496497,0.651462,0.827938,-0.277128,0.47968,0.684023,0.844837,-0.271646,0.460688,0.718024,0.859239,-0.264397,0.438872,0.751207,0.874088,-0.256144,0.41577,0.784232,0.887693,-0.246311,0.391369,0.816191,0.899402,-0.235497,0.365872,0.847828,0.910973,-0.223631,0.338618,0.87934,0.92204,-0.209874,0.310803,0.910325,0.930987,-0.194265,0.281802,0.940695,0.94,-0.178125,0.252836,0.970958,0.948018,-0.161479,0.224239,1.00078,0.955141,-0.144038,0.195857,1.0288,0.960513,-0.124915,0.168487,1.05371,0.963964,-0.104284,0.141495,1.07596,0.968713,-0.0838732,0.114437,1.09628,0.975524,-0.0635579,0.0863105,1.11448,0.98431,-0.042291,0.0574774,1.13069,0.992916,-0.0209131,0.0284343,1.14568,0.999926,0.000743097,-0.000379265,1.15955,0.501042,-0.00000998428,0.498726,0.0000100306,0.502992,-0.000252112,0.500665,0.000253283,0.502417,-0.00100791,0.500092,0.00101259,0.502965,-0.00226919,0.500621,0.00227978,0.502318,-0.00403109,0.499994,0.00405011,0.502333,-0.00629832,0.500005,0.00632868,0.502362,-0.00906907,0.500027,0.00911446,0.502369,-0.0123423,0.500023,0.0124078,0.50243,-0.0161178,0.500066,0.016211,0.502493,-0.0203937,0.500103,0.0205256,0.502592,-0.0251684,0.500166,0.0253548,0.502707,-0.0304389,0.50023,0.0307029,0.502881,-0.0362015,0.500335,0.0365753,0.503124,-0.0424507,0.500488,0.0429798,0.503443,-0.0491582,0.500686,0.0499268,0.504083,-0.0561476,0.501155,0.0574541,0.504668,-0.0636846,0.501524,0.0655408,0.505319,-0.0716834,0.501904,0.0742072,0.50609,-0.0800925,0.502321,0.0834699,0.507122,-0.0888425,0.502896,0.0933603,0.508414,-0.097855,0.503603,0.10391,0.509955,-0.107304,0.504416,0.115113,0.512061,-0.116921,0.505565,0.127054,0.514419,-0.12689,0.506732,0.139709,0.517529,-0.136934,0.508338,0.153173,0.522085,-0.147327,0.510987,0.167528,0.526986,-0.157612,0.513527,0.182708,0.533122,-0.168213,0.516717,0.198881,0.540807,-0.178688,0.520832,0.215986,0.550687,-0.189511,0.52632,0.234335,0.560567,-0.199998,0.531009,0.253375,0.571698,-0.210652,0.535839,0.273499,0.584364,-0.220917,0.541091,0.294355,0.599066,-0.23137,0.546875,0.316525,0.614148,-0.241206,0.551306,0.339671,0.631157,-0.250379,0.555187,0.36531,0.647919,-0.258397,0.556595,0.392767,0.666112,-0.265528,0.556949,0.421397,0.686158,-0.271827,0.556617,0.451433,0.704838,-0.27674,0.552975,0.482131,0.723957,-0.280733,0.547814,0.513458,0.74262,-0.283359,0.53997,0.545446,0.762009,-0.284541,0.530422,0.57775,0.781314,-0.284507,0.518546,0.610434,0.799116,-0.283309,0.504178,0.643178,0.817604,-0.280378,0.48843,0.676248,0.83459,-0.275619,0.469457,0.709698,0.850974,-0.26856,0.447698,0.744245,0.866747,-0.260094,0.424791,0.777695,0.881412,-0.249929,0.399913,0.810392,0.8936,-0.239137,0.37308,0.842872,0.905943,-0.226818,0.345705,0.874677,0.916408,-0.213699,0.31706,0.906257,0.927215,-0.198428,0.288444,0.936881,0.935625,-0.181643,0.258329,0.96795,0.944076,-0.164386,0.228488,0.998216,0.951229,-0.146339,0.199763,1.02689,0.958793,-0.127709,0.172153,1.0535,0.963219,-0.107244,0.144989,1.07646,0.967562,-0.0857764,0.11685,1.09675,0.974866,-0.0645377,0.0880571,1.11576,0.983353,-0.0431732,0.0587352,1.13227,0.992503,-0.0218356,0.0294181,1.1478,1.00003,0.000605203,-0.000231013,1.16207,0.482935,-0.0000101177,0.504695,0.00000968142,0.477554,-0.000251521,0.499071,0.000240676,0.477904,-0.00100683,0.499436,0.00096342,0.478368,-0.00226636,0.499899,0.0021687,0.477977,-0.00402719,0.499513,0.00385384,0.477993,-0.00629226,0.499525,0.0060221,0.478011,-0.00906011,0.499536,0.00867289,0.478051,-0.0123305,0.499566,0.0118074,0.478089,-0.016102,0.499587,0.0154269,0.478171,-0.0203736,0.499645,0.0195341,0.478254,-0.025143,0.499692,0.0241318,0.47839,-0.0304071,0.499779,0.0292247,0.478588,-0.0361631,0.499911,0.0348196,0.478812,-0.0424023,0.500046,0.0409231,0.479208,-0.0490724,0.500326,0.047552,0.479841,-0.0560722,0.500805,0.0547377,0.480392,-0.0636125,0.501152,0.0624607,0.481068,-0.0716134,0.501561,0.0707473,0.481898,-0.0800062,0.502054,0.0796118,0.483022,-0.0886568,0.502728,0.0890974,0.484332,-0.0977553,0.503479,0.0992099,0.486126,-0.107173,0.504546,0.10999,0.488066,-0.11677,0.50557,0.121476,0.490521,-0.126725,0.506849,0.133672,0.494232,-0.136793,0.50911,0.146731,0.498302,-0.147116,0.511345,0.160577,0.503565,-0.157446,0.514344,0.175335,0.510902,-0.168121,0.518824,0.191207,0.519263,-0.178799,0.523666,0.208058,0.528204,-0.189407,0.528296,0.225875,0.538854,-0.200145,0.533724,0.244782,0.551278,-0.210701,0.539833,0.264753,0.565222,-0.221303,0.546131,0.285745,0.579403,-0.231688,0.551496,0.307592,0.595469,-0.241718,0.556809,0.330582,0.610929,-0.250992,0.559641,0.354995,0.629433,-0.259602,0.562379,0.382471,0.648504,-0.267038,0.563676,0.411126,0.66756,-0.273388,0.562092,0.440924,0.689143,-0.278788,0.560807,0.472118,0.709056,-0.282783,0.555701,0.503774,0.729855,-0.285836,0.548698,0.536364,0.748954,-0.287078,0.538544,0.56895,0.768373,-0.287133,0.526711,0.601991,0.78827,-0.285839,0.512511,0.635403,0.807465,-0.283238,0.496323,0.668797,0.825194,-0.27906,0.477638,0.702584,0.842203,-0.272286,0.456253,0.736393,0.857749,-0.263854,0.432412,0.77096,0.874799,-0.253943,0.407806,0.80489,0.887497,-0.24237,0.38033,0.83771,0.89966,-0.230278,0.352446,0.870376,0.911753,-0.21646,0.323268,0.902256,0.923011,-0.202071,0.294314,0.933306,0.932375,-0.185519,0.264104,0.965177,0.940537,-0.167604,0.234035,0.996303,0.948904,-0.149068,0.20412,1.0261,0.955263,-0.129539,0.175431,1.05304,0.960303,-0.109932,0.148116,1.07617,0.965512,-0.0880572,0.119693,1.09742,0.973466,-0.0660548,0.0901619,1.11721,0.98284,-0.0439228,0.0599875,1.13436,0.992216,-0.0219588,0.0298975,1.15006,0.999946,0.000119402,-0.0000208547,1.16471,0.447827,-0.0000100414,0.491543,0.00000914833,0.454778,-0.000251257,0.499172,0.00022891,0.453519,-0.00100342,0.497787,0.000914184,0.45357,-0.00225776,0.497847,0.00205701,0.453578,-0.00401371,0.497855,0.00365705,0.45357,-0.00627107,0.497841,0.00571453,0.453598,-0.00902968,0.497864,0.00823019,0.453627,-0.0122888,0.497882,0.0112049,0.453684,-0.0160475,0.497923,0.0146405,0.453764,-0.0203044,0.49798,0.0185394,0.453866,-0.0250576,0.498049,0.0229054,0.453996,-0.0303028,0.49813,0.0277424,0.454196,-0.0360379,0.498267,0.0330587,0.454457,-0.0422521,0.498445,0.0388613,0.454926,-0.0488393,0.498812,0.0451767,0.455525,-0.0558653,0.499272,0.0520153,0.456074,-0.0633772,0.499625,0.0593754,0.456752,-0.0713606,0.500049,0.0672751,0.457648,-0.07971,0.500615,0.0757447,0.458849,-0.0883032,0.501399,0.0848231,0.46029,-0.0974095,0.502293,0.0945135,0.462,-0.106729,0.503301,0.104848,0.464121,-0.116354,0.504533,0.115884,0.466889,-0.126214,0.506172,0.127652,0.470744,-0.136324,0.508667,0.14024,0.47488,-0.146595,0.510995,0.153673,0.480845,-0.157027,0.514832,0.168053,0.488262,-0.167658,0.519506,0.183508,0.496547,-0.178343,0.524347,0.199948,0.506254,-0.188916,0.52983,0.217503,0.517961,-0.199975,0.536357,0.236272,0.531484,-0.210624,0.543641,0.256096,0.545496,-0.221227,0.550048,0.277085,0.559497,-0.231568,0.555076,0.298615,0.575752,-0.241698,0.560541,0.321547,0.591999,-0.251172,0.564156,0.345602,0.610654,-0.260178,0.567607,0.371851,0.630484,-0.268094,0.56923,0.40076,0.651807,-0.274661,0.569779,0.430801,0.67239,-0.280331,0.566791,0.461939,0.693024,-0.284501,0.562007,0.493854,0.715473,-0.287852,0.555791,0.526992,0.736323,-0.28929,0.546345,0.560102,0.755771,-0.289405,0.534,0.593543,0.775424,-0.2881,0.519114,0.627256,0.795447,-0.285562,0.502543,0.661464,0.815319,-0.281416,0.484773,0.695206,0.831769,-0.275523,0.463445,0.729044,0.849464,-0.267516,0.440269,0.764069,0.866775,-0.257584,0.415049,0.799089,0.881252,-0.245817,0.388049,0.831948,0.894209,-0.233127,0.35889,0.865526,0.906922,-0.219579,0.329915,0.89818,0.919686,-0.204491,0.300441,0.930013,0.929044,-0.188962,0.269445,0.962061,0.938393,-0.171079,0.238402,0.994214,0.94661,-0.15199,0.208204,1.02533,0.953095,-0.131953,0.178653,1.0529,0.958644,-0.111233,0.150684,1.0771,0.963925,-0.0903098,0.122359,1.09855,0.971995,-0.0680505,0.0923342,1.11874,0.981658,-0.0448512,0.0614195,1.13635,0.991649,-0.0221931,0.0303582,1.15238,0.999985,0.000393403,-0.000111086,1.16772,0.396806,-0.00000971563,0.457671,0.00000842355,0.429186,-0.000249421,0.495017,0.00021625,0.429324,-0.000998052,0.495173,0.000865322,0.429175,-0.00224487,0.494999,0.00194637,0.429129,-0.00399041,0.494952,0.00346004,0.429153,-0.00623476,0.494974,0.00540684,0.429168,-0.0089773,0.494983,0.00778714,0.429207,-0.0122175,0.495012,0.0106022,0.429257,-0.0159542,0.495047,0.0138535,0.429338,-0.0201864,0.495106,0.0175443,0.429431,-0.0249104,0.495165,0.0216774,0.429587,-0.0301252,0.495279,0.0262594,0.429796,-0.0358249,0.495432,0.0312968,0.430065,-0.0419972,0.495621,0.0367985,0.430588,-0.0485144,0.496061,0.042798,0.43113,-0.0555028,0.496472,0.0492914,0.431743,-0.0629852,0.496904,0.0562907,0.432448,-0.0709256,0.497369,0.0638056,0.433414,-0.0791942,0.498032,0.071885,0.434638,-0.0877346,0.498854,0.0805517,0.43611,-0.0968056,0.499812,0.0898047,0.437859,-0.106002,0.500891,0.0997142,0.440017,-0.115648,0.502198,0.110289,0.443236,-0.125427,0.504389,0.121644,0.44697,-0.135492,0.506809,0.133769,0.451689,-0.145746,0.509858,0.146787,0.45811,-0.156219,0.514247,0.160793,0.465305,-0.166834,0.518816,0.175791,0.474085,-0.177546,0.524331,0.191906,0.484808,-0.188262,0.53104,0.209199,0.49732,-0.199346,0.538511,0.227825,0.509693,-0.209951,0.544554,0.247269,0.524367,-0.220533,0.551616,0.267978,0.539228,-0.231082,0.557368,0.289672,0.55644,-0.241342,0.563782,0.31268,0.574204,-0.250964,0.568851,0.33651,0.593388,-0.260306,0.57312,0.362219,0.613358,-0.268667,0.574916,0.390322,0.634512,-0.275591,0.575053,0.420478,0.65563,-0.281328,0.572404,0.451614,0.678265,-0.285948,0.568893,0.484112,0.70011,-0.289408,0.561878,0.517348,0.723005,-0.291328,0.55359,0.551355,0.743744,-0.291418,0.541099,0.585109,0.763949,-0.290252,0.526489,0.619487,0.784186,-0.287648,0.509496,0.65404,0.804304,-0.283782,0.491484,0.688649,0.823629,-0.278067,0.470517,0.723133,0.84094,-0.270588,0.44705,0.757163,0.857852,-0.261188,0.421252,0.792816,0.874934,-0.249313,0.394191,0.827248,0.888709,-0.236492,0.365359,0.861074,0.902589,-0.222185,0.336016,0.894417,0.914201,-0.207314,0.30527,0.926825,0.925978,-0.191146,0.274532,0.9595,0.93512,-0.174135,0.243393,0.991583,0.943656,-0.155231,0.212414,1.02356,0.951719,-0.134403,0.182005,1.05239,0.957164,-0.113023,0.153043,1.07754,0.962656,-0.0914493,0.124186,1.09984,0.970695,-0.0694179,0.0941654,1.12,0.980749,-0.0466199,0.0629671,1.13849,0.991205,-0.0227032,0.0311146,1.15494,0.999884,0.000632388,-0.000254483,1.1706,0.379821,-0.00000957289,0.460637,0.00000789337,0.405188,-0.000247483,0.491396,0.000204064,0.404796,-0.000989434,0.490914,0.000815853,0.40483,-0.00222607,0.490949,0.00183559,0.40473,-0.00395723,0.49084,0.00326332,0.404731,-0.00618287,0.490836,0.00509945,0.404768,-0.00890258,0.490871,0.00734463,0.404791,-0.0121156,0.490883,0.00999992,0.404857,-0.0158214,0.490938,0.0130676,0.404943,-0.0200178,0.491004,0.0165503,0.405059,-0.0247027,0.491093,0.0204521,0.405213,-0.0298729,0.491205,0.0247788,0.405399,-0.0355226,0.491333,0.0295373,0.405731,-0.0416352,0.491604,0.034741,0.406303,-0.0480807,0.492116,0.0404255,0.406814,-0.0550458,0.492506,0.0465732,0.407404,-0.0624652,0.492926,0.0532058,0.408149,-0.0702958,0.493442,0.0603442,0.409128,-0.0784623,0.494136,0.0680297,0.410408,-0.087007,0.495054,0.0762786,0.411813,-0.0959639,0.495962,0.0851046,0.413735,-0.105075,0.497257,0.0945878,0.416137,-0.114646,0.498882,0.104725,0.41934,-0.124394,0.501132,0.11563,0.423326,-0.134328,0.503883,0.127325,0.428419,-0.14458,0.50747,0.139911,0.43484,-0.154979,0.511964,0.153481,0.442641,-0.165628,0.517328,0.168114,0.452511,-0.176365,0.524258,0.183995,0.463473,-0.187298,0.531248,0.200953,0.475564,-0.198244,0.538367,0.219176,0.488664,-0.208938,0.545175,0.238514,0.504073,-0.219599,0.553227,0.259129,0.520832,-0.230378,0.560653,0.280997,0.538455,-0.240703,0.567523,0.303821,0.55709,-0.250548,0.573287,0.327948,0.576646,-0.259964,0.577795,0.353362,0.596705,-0.268721,0.580077,0.380336,0.618053,-0.276054,0.58018,0.4101,0.640303,-0.282176,0.578747,0.44161,0.662365,-0.286931,0.574294,0.474106,0.684542,-0.290521,0.567035,0.507549,0.707984,-0.292672,0.558687,0.541853,0.730913,-0.293189,0.547606,0.576581,0.752948,-0.292199,0.533471,0.61172,0.773452,-0.289508,0.516395,0.646339,0.794715,-0.285716,0.497873,0.682131,0.814251,-0.280051,0.476845,0.716396,0.833057,-0.272873,0.453449,0.751503,0.84959,-0.263982,0.427857,0.786085,0.867022,-0.252745,0.400335,0.821355,0.882277,-0.239655,0.371304,0.85646,0.895375,-0.225386,0.340397,0.890828,0.909347,-0.209587,0.310005,0.923532,0.921885,-0.193433,0.2796,0.956419,0.932127,-0.176135,0.247276,0.989445,0.941869,-0.157872,0.216186,1.02221,0.949735,-0.137577,0.185602,1.05195,0.956617,-0.115285,0.155767,1.07822,0.961974,-0.0928418,0.126103,1.10149,0.96972,-0.0700592,0.0956758,1.12207,0.98012,-0.0474671,0.0643269,1.1408,0.990825,-0.0238113,0.0320863,1.1577,0.999876,0.000381574,-0.0000812203,1.17403,0.367636,-0.00000961342,0.469176,0.00000753287,0.380377,-0.000244772,0.485434,0.000191797,0.380416,-0.000978857,0.485475,0.000767015,0.380376,-0.00220165,0.485435,0.00172522,0.380419,-0.00391408,0.485487,0.00306734,0.380438,-0.00611549,0.485505,0.00479332,0.380462,-0.00880558,0.485525,0.00690391,0.380496,-0.0119837,0.485551,0.00940039,0.38056,-0.0156487,0.485605,0.0122848,0.38064,-0.0197988,0.485666,0.0155601,0.380767,-0.0244324,0.48577,0.0192313,0.380909,-0.0295444,0.485871,0.0233032,0.381142,-0.0351321,0.48606,0.0277861,0.381472,-0.0411535,0.486336,0.0326939,0.382015,-0.0475408,0.486833,0.0380565,0.382523,-0.0544395,0.487231,0.0438615,0.383129,-0.061784,0.487683,0.0501332,0.383952,-0.0695085,0.488313,0.0568996,0.38498,-0.0775819,0.489077,0.0641952,0.386331,-0.0860443,0.490113,0.0720324,0.387788,-0.0948406,0.491099,0.0804379,0.389808,-0.103899,0.492566,0.0894899,0.39252,-0.113313,0.494601,0.0992098,0.395493,-0.123007,0.496619,0.109641,0.399826,-0.132859,0.499912,0.120919,0.405341,-0.143077,0.504061,0.133107,0.411932,-0.153465,0.508905,0.146263,0.420591,-0.164108,0.515482,0.160544,0.43101,-0.174893,0.523191,0.176123,0.441881,-0.185839,0.53026,0.192757,0.453919,-0.196633,0.537295,0.210535,0.468715,-0.207611,0.546156,0.229886,0.485182,-0.218517,0.555173,0.250543,0.501926,-0.229249,0.562728,0.27221,0.51785,-0.239481,0.567494,0.294892,0.536947,-0.249395,0.573889,0.318987,0.557115,-0.259,0.578831,0.344348,0.577966,-0.268075,0.582055,0.371223,0.599489,-0.276115,0.583307,0.399834,0.62479,-0.282523,0.583902,0.431415,0.647504,-0.287663,0.57953,0.464301,0.670601,-0.291538,0.573103,0.498123,0.693539,-0.293842,0.563731,0.532662,0.717385,-0.294681,0.553169,0.567925,0.741533,-0.293717,0.539908,0.603502,0.762142,-0.291156,0.521902,0.639074,0.783014,-0.28719,0.502815,0.674439,0.805158,-0.281773,0.482598,0.710497,0.823646,-0.274682,0.458949,0.7456,0.841879,-0.266184,0.433129,0.781085,0.859515,-0.255682,0.406064,0.816,0.875335,-0.242849,0.376509,0.851074,0.890147,-0.228329,0.345502,0.886473,0.903144,-0.212491,0.31428,0.920751,0.916618,-0.195695,0.282994,0.954606,0.927953,-0.178267,0.251091,0.988402,0.937414,-0.159549,0.219107,1.02141,0.946823,-0.140022,0.18896,1.05167,0.954651,-0.118154,0.158667,1.07819,0.959955,-0.0946636,0.128808,1.1025,0.96858,-0.0711792,0.0973787,1.12391,0.97938,-0.0475046,0.0650965,1.14322,0.990498,-0.024059,0.0326267,1.16077,0.999844,-0.0000512408,0.000112444,1.17727,0.316912,-0.00000934977,0.425996,0.00000695559,0.356423,-0.000241372,0.479108,0.000179562,0.356272,-0.000965292,0.478897,0.00071811,0.356262,-0.00217182,0.478894,0.00161574,0.356265,-0.00386092,0.478895,0.00287261,0.356278,-0.0060324,0.478905,0.00448907,0.356293,-0.00868565,0.478914,0.00646572,0.356346,-0.0118207,0.478965,0.00880438,0.356395,-0.0154355,0.479001,0.0115066,0.356484,-0.019529,0.479075,0.0145762,0.356609,-0.0240991,0.47918,0.018018,0.356766,-0.0291413,0.479305,0.0218379,0.357009,-0.0346498,0.479512,0.0260454,0.357424,-0.0405462,0.479909,0.0306657,0.357899,-0.0468825,0.480337,0.0357054,0.358424,-0.0536887,0.480771,0.0411728,0.359041,-0.0609416,0.481242,0.0470841,0.359903,-0.0685239,0.481943,0.0534831,0.360932,-0.0764883,0.482741,0.0603795,0.362196,-0.0848364,0.483688,0.0678028,0.363847,-0.0935002,0.484947,0.0758086,0.365972,-0.102471,0.486588,0.0844173,0.368741,-0.111751,0.488787,0.0937199,0.372146,-0.121334,0.491405,0.103732,0.377114,-0.131147,0.495604,0.114608,0.38226,-0.141213,0.499436,0.126345,0.389609,-0.151632,0.505334,0.139116,0.397925,-0.162073,0.51168,0.152995,0.407824,-0.172819,0.518876,0.168071,0.420014,-0.183929,0.527639,0.184495,0.434266,-0.195032,0.537588,0.20232,0.447352,-0.205792,0.544379,0.221189,0.463726,-0.216704,0.553422,0.241616,0.481406,-0.227531,0.562074,0.263298,0.498707,-0.238017,0.568227,0.286116,0.518039,-0.247936,0.574473,0.3101,0.538277,-0.257437,0.579191,0.335401,0.561166,-0.266829,0.584807,0.362246,0.583189,-0.275329,0.586476,0.390609,0.606024,-0.28234,0.585578,0.420998,0.632419,-0.287924,0.584496,0.454357,0.656128,-0.291972,0.577766,0.488233,0.679953,-0.29456,0.56875,0.523248,0.704654,-0.295816,0.558388,0.559168,0.729016,-0.295157,0.544826,0.595326,0.752062,-0.292779,0.528273,0.631864,0.773138,-0.288681,0.508482,0.667793,0.794869,-0.283358,0.487341,0.704035,0.815101,-0.27608,0.46354,0.739925,0.834212,-0.26767,0.438672,0.775539,0.852368,-0.257397,0.411239,0.810895,0.870207,-0.245689,0.3829,0.846472,0.884063,-0.231452,0.351496,0.881788,0.898284,-0.215561,0.31895,0.917438,0.912964,-0.198208,0.287367,0.952422,0.924666,-0.180426,0.254487,0.987551,0.934429,-0.161525,0.222226,1.02142,0.943485,-0.141197,0.191143,1.05218,0.9521,-0.120085,0.161112,1.07937,0.957876,-0.0975881,0.130982,1.10403,0.966943,-0.0726842,0.0990553,1.12616,0.978313,-0.0483705,0.0662818,1.14619,0.990048,-0.0239072,0.0329243,1.16413,0.999984,0.000461885,-0.0000772859,1.18099,0.321287,-0.00000935049,0.455413,0.00000659662,0.332595,-0.000237513,0.471437,0.000167562,0.332729,-0.000949964,0.471618,0.000670192,0.332305,-0.00213618,0.471028,0.00150712,0.332326,-0.00379765,0.471055,0.00267959,0.332344,-0.00593353,0.471072,0.00418751,0.332356,-0.00854349,0.471077,0.00603172,0.332403,-0.0116268,0.471121,0.00821362,0.332461,-0.0151824,0.47117,0.0107357,0.332552,-0.0192088,0.471251,0.0136014,0.332657,-0.0237024,0.47133,0.0168152,0.332835,-0.0286615,0.471487,0.0203853,0.333083,-0.0340765,0.471708,0.0243212,0.333547,-0.0398563,0.47219,0.0286518,0.333989,-0.0460916,0.472587,0.0333763,0.334532,-0.0527897,0.473054,0.0385084,0.335167,-0.0599284,0.473568,0.0440638,0.33608,-0.0673514,0.474362,0.0500962,0.337146,-0.0752237,0.475231,0.0566022,0.338462,-0.083418,0.476282,0.0636272,0.34014,-0.0919382,0.477615,0.0712153,0.342341,-0.100741,0.479404,0.079417,0.345088,-0.109905,0.481618,0.0882631,0.349049,-0.119369,0.485081,0.0978851,0.353939,-0.129033,0.489317,0.108336,0.359893,-0.139038,0.494309,0.119698,0.366945,-0.149411,0.499983,0.132024,0.375814,-0.159843,0.507185,0.145558,0.387112,-0.170664,0.516392,0.160433,0.40023,-0.181897,0.526519,0.176648,0.412555,-0.192785,0.53423,0.193922,0.427023,-0.203663,0.542741,0.212662,0.443685,-0.214695,0.552066,0.232944,0.461499,-0.225561,0.560762,0.254495,0.480975,-0.236257,0.569421,0.277531,0.501,-0.24639,0.576101,0.301724,0.521691,-0.256101,0.581493,0.327112,0.543478,-0.265289,0.585221,0.353917,0.566094,-0.273938,0.587614,0.381941,0.589578,-0.281679,0.587991,0.41172,0.614583,-0.287655,0.585928,0.444148,0.641813,-0.292228,0.582092,0.478617,0.666189,-0.295172,0.57398,0.51397,0.690475,-0.29648,0.561676,0.550118,0.715543,-0.296203,0.548758,0.586933,0.740405,-0.293999,0.532792,0.62384,0.762183,-0.28998,0.512735,0.660723,0.786069,-0.28478,0.492402,0.69807,0.806812,-0.277568,0.469058,0.734422,0.826987,-0.268951,0.443017,0.770946,0.844588,-0.259049,0.415501,0.80699,0.863725,-0.2471,0.387328,0.842107,0.879137,-0.234157,0.356108,0.878078,0.894634,-0.218719,0.324315,0.914058,0.909162,-0.201293,0.291813,0.949922,0.92072,-0.18267,0.258474,0.985337,0.93158,-0.163212,0.225593,1.0205,0.941238,-0.142771,0.193986,1.05273,0.949293,-0.120956,0.163392,1.08075,0.956226,-0.0985743,0.132934,1.10559,0.96546,-0.075118,0.101255,1.12823,0.977403,-0.0497921,0.0675441,1.149,0.989648,-0.0241574,0.0334681,1.16765,1.00001,0.0005762,-0.000184807,1.18519,0.303474,-0.00000916603,0.4542,0.0000061243,0.308894,-0.000232869,0.462306,0.000155592,0.309426,-0.000931661,0.463093,0.000622499,0.308643,-0.0020949,0.461933,0.00139979,0.308651,-0.0037242,0.461941,0.00248874,0.308662,-0.00581873,0.46195,0.00388933,0.308687,-0.00837818,0.461974,0.00560247,0.308728,-0.0114016,0.462011,0.00762948,0.308789,-0.0148884,0.462067,0.00997326,0.308882,-0.0188369,0.462151,0.0126375,0.309007,-0.0232436,0.462263,0.0156271,0.30918,-0.0281054,0.462417,0.0189498,0.309442,-0.0334065,0.462667,0.0226167,0.309901,-0.0390589,0.463162,0.0266614,0.310331,-0.0452042,0.463555,0.0310715,0.310858,-0.0517735,0.464019,0.0358698,0.311576,-0.0587359,0.464669,0.0410848,0.312436,-0.0660383,0.465406,0.0467453,0.313526,-0.0737266,0.466339,0.0528718,0.314903,-0.0817574,0.467504,0.0595039,0.316814,-0.090167,0.469226,0.0666888,0.318965,-0.0987555,0.470981,0.0744658,0.322077,-0.107792,0.473814,0.082912,0.325947,-0.117098,0.477241,0.0920846,0.331008,-0.126602,0.48184,0.102137,0.337893,-0.136619,0.488334,0.113135,0.345106,-0.146838,0.494415,0.12511,0.355111,-0.157357,0.503275,0.138356,0.365095,-0.167955,0.510966,0.152686,0.378344,-0.179157,0.521508,0.16856,0.391599,-0.190143,0.530455,0.18561,0.407786,-0.20123,0.541275,0.204308,0.425294,-0.212456,0.551784,0.224623,0.444021,-0.223568,0.561493,0.246172,0.463418,-0.234154,0.569886,0.268979,0.484077,-0.244546,0.577116,0.293411,0.505513,-0.254301,0.582914,0.318936,0.527672,-0.263564,0.587208,0.345856,0.550565,-0.272332,0.589277,0.374054,0.573656,-0.280011,0.588426,0.403276,0.59827,-0.286924,0.587504,0.43474,0.624731,-0.291994,0.583401,0.468767,0.652396,-0.295159,0.576997,0.504411,0.67732,-0.296954,0.565863,0.54114,0.703147,-0.296877,0.552316,0.57816,0.728715,-0.295147,0.536773,0.616124,0.752448,-0.291275,0.51771,0.653885,0.775169,-0.285905,0.496087,0.691537,0.799307,-0.279064,0.474232,0.729251,0.819482,-0.270294,0.447676,0.766267,0.837659,-0.260032,0.419656,0.802616,0.856903,-0.248497,0.391328,0.838583,0.873325,-0.235252,0.360285,0.874711,0.889788,-0.221126,0.329215,0.91077,0.904486,-0.204304,0.296392,0.94653,0.917711,-0.185562,0.262159,0.983828,0.928969,-0.165635,0.229142,1.01955,0.939707,-0.14442,0.19673,1.05317,0.948167,-0.122147,0.165095,1.0823,0.955222,-0.099098,0.13451,1.10791,0.964401,-0.0755332,0.102476,1.1312,0.976605,-0.0513817,0.0689667,1.15218,0.989085,-0.0258499,0.034506,1.17129,0.999908,0.000617773,-0.000271268,1.18961,0.285803,-0.00000905752,0.452348,0.00000572272,0.284689,-0.00022732,0.450581,0.000143626,0.285263,-0.000910214,0.451482,0.000575099,0.285302,-0.00204784,0.451553,0.00129395,0.285318,-0.00364057,0.451574,0.0023006,0.28533,-0.00568813,0.451585,0.00359547,0.285361,-0.00819001,0.451618,0.00517934,0.285397,-0.0111458,0.45165,0.007054,0.285447,-0.0145536,0.451688,0.00922167,0.285527,-0.0184127,0.451758,0.0116869,0.285688,-0.0227207,0.451929,0.0144555,0.28584,-0.0274712,0.452055,0.0175341,0.286136,-0.0326278,0.452369,0.0209406,0.286574,-0.0381792,0.452853,0.0246965,0.287012,-0.0441879,0.453272,0.0287996,0.287542,-0.0506096,0.453752,0.033268,0.288299,-0.0573634,0.454488,0.0381504,0.289186,-0.0645458,0.455294,0.0434447,0.290302,-0.0720405,0.456301,0.0491973,0.291776,-0.0799046,0.457648,0.0554453,0.29372,-0.088117,0.459483,0.0622311,0.296052,-0.0965328,0.461571,0.0695992,0.299563,-0.105409,0.465085,0.077658,0.30335,-0.114553,0.468506,0.0864176,0.309167,-0.123917,0.474423,0.0961078,0.31529,-0.13381,0.47995,0.106643,0.324163,-0.144021,0.488592,0.118322,0.333272,-0.154382,0.496461,0.131133,0.344224,-0.165015,0.50562,0.145208,0.357733,-0.176168,0.516719,0.16073,0.373046,-0.187468,0.528513,0.177807,0.38788,-0.198488,0.537713,0.196072,0.405133,-0.209545,0.547999,0.21605,0.423845,-0.220724,0.55759,0.237484,0.443777,-0.231518,0.566246,0.26039,0.464824,-0.242035,0.574326,0.284835,0.486635,-0.251898,0.58037,0.310518,0.51012,-0.261304,0.58568,0.337678,0.535301,-0.270384,0.590197,0.366242,0.559193,-0.27841,0.590569,0.395873,0.583544,-0.285325,0.588161,0.426857,0.608834,-0.291113,0.584249,0.459477,0.635753,-0.294882,0.57763,0.494734,0.664367,-0.297088,0.569479,0.532023,0.689688,-0.297364,0.555064,0.569629,0.715732,-0.295949,0.539522,0.608124,0.741307,-0.292259,0.521613,0.646231,0.764949,-0.287063,0.49969,0.684938,0.788599,-0.28012,0.476747,0.723548,0.81048,-0.27153,0.45116,0.761135,0.831372,-0.261289,0.424101,0.798916,0.850092,-0.249559,0.39443,0.835952,0.867777,-0.236348,0.363849,0.871606,0.884632,-0.221569,0.332477,0.907843,0.90047,-0.20618,0.300667,0.944187,0.914524,-0.188771,0.266552,0.981371,0.926892,-0.168362,0.232349,1.01841,0.937951,-0.146761,0.199359,1.05308,0.947236,-0.123813,0.1675,1.0839,0.954367,-0.099984,0.136166,1.11047,0.963907,-0.0759278,0.103808,1.13414,0.976218,-0.0511367,0.0697061,1.15575,0.988772,-0.0267415,0.0352529,1.17531,0.999888,-0.000520778,0.000289926,1.19389,0.263546,-0.00000883274,0.441896,0.00000526783,0.262352,-0.000221849,0.439889,0.000132311,0.262325,-0.000886683,0.439848,0.000528824,0.26228,-0.00199476,0.439765,0.00118975,0.262372,-0.00354671,0.439922,0.00211568,0.26239,-0.00554141,0.439941,0.00330652,0.262412,-0.00797888,0.439961,0.00476346,0.262453,-0.0108584,0.440002,0.00648818,0.262528,-0.0141788,0.440085,0.0084835,0.262615,-0.017938,0.440166,0.0107533,0.262744,-0.0221346,0.440291,0.0133044,0.262939,-0.026762,0.440493,0.0161445,0.263277,-0.0317573,0.440889,0.0192974,0.26368,-0.0371832,0.441338,0.0227699,0.264106,-0.0430371,0.441753,0.0265698,0.264624,-0.0493035,0.442227,0.0307178,0.265378,-0.0558669,0.442985,0.0352616,0.266253,-0.0628718,0.443795,0.0401968,0.267478,-0.0701569,0.445008,0.04559,0.269062,-0.077845,0.446599,0.0514539,0.270926,-0.0857941,0.448349,0.0578382,0.273693,-0.0940773,0.451221,0.0648363,0.276746,-0.102704,0.454097,0.0724389,0.281693,-0.111735,0.459517,0.0808744,0.287335,-0.121004,0.46531,0.0901551,0.29448,-0.130734,0.472605,0.100371,0.30257,-0.140777,0.480251,0.111644,0.312465,-0.15111,0.489444,0.124111,0.324856,-0.16189,0.500919,0.137979,0.33774,-0.172946,0.511317,0.153163,0.35255,-0.184152,0.522684,0.169817,0.367786,-0.19522,0.53248,0.187886,0.385474,-0.20632,0.543326,0.207634,0.404976,-0.217744,0.554109,0.229165,0.425203,-0.228691,0.563395,0.252068,0.446704,-0.239299,0.571565,0.276471,0.468951,-0.249348,0.577935,0.302323,0.493487,-0.258933,0.584309,0.329882,0.517861,-0.268009,0.58773,0.358525,0.543309,-0.276238,0.589612,0.388585,0.569704,-0.28356,0.589294,0.419787,0.594871,-0.289497,0.585137,0.452114,0.622555,-0.294452,0.580356,0.486466,0.651167,-0.296918,0.57185,0.523079,0.677332,-0.297647,0.558428,0.5611,0.703718,-0.296321,0.542232,0.599592,0.730262,-0.293339,0.524541,0.639138,0.754304,-0.288036,0.502691,0.677978,0.778051,-0.281018,0.479212,0.716537,0.801557,-0.272414,0.454071,0.75586,0.822559,-0.262419,0.425952,0.794477,0.843051,-0.250702,0.397313,0.832664,0.86232,-0.237264,0.366534,0.869876,0.879044,-0.222716,0.334816,0.906973,0.896362,-0.206827,0.303143,0.943558,0.910342,-0.189659,0.269699,0.979759,0.924119,-0.171108,0.236411,1.01718,0.935374,-0.149579,0.202224,1.05289,0.944295,-0.126295,0.16989,1.08496,0.952227,-0.101511,0.138089,1.11256,0.962041,-0.0766392,0.105053,1.1375,0.97528,-0.0511967,0.070329,1.15983,0.988476,-0.025463,0.0351268,1.17987,0.999962,0.0000286808,0.0000145564,1.19901,0.227089,-0.00000841413,0.404216,0.00000472707,0.239725,-0.000215083,0.426708,0.000120833,0.239904,-0.000860718,0.427028,0.000483555,0.239911,-0.00193661,0.427039,0.00108806,0.239914,-0.00344276,0.42704,0.00193457,0.239933,-0.00537907,0.427064,0.00302363,0.239944,-0.00774482,0.427065,0.00435604,0.239993,-0.01054,0.427122,0.00593398,0.240052,-0.0137626,0.427179,0.00775987,0.240148,-0.0174115,0.427279,0.00983854,0.240278,-0.021484,0.42741,0.0121763,0.240472,-0.0259729,0.427618,0.0147827,0.240839,-0.0308131,0.428086,0.0176837,0.241201,-0.0360893,0.428482,0.0208775,0.241626,-0.0417723,0.428907,0.0243821,0.242207,-0.0478337,0.42952,0.0282228,0.24298,-0.0542199,0.430332,0.0324333,0.243881,-0.0610015,0.431222,0.0370252,0.245123,-0.0680874,0.432512,0.0420535,0.24667,-0.0755482,0.434088,0.0475414,0.248779,-0.0832873,0.436323,0.0535542,0.251665,-0.0913546,0.439509,0.0601716,0.255305,-0.0998489,0.443478,0.0674282,0.260049,-0.108576,0.448713,0.0754673,0.266192,-0.117754,0.455524,0.084339,0.273158,-0.127294,0.4627,0.0941683,0.282131,-0.137311,0.472068,0.10515,0.293332,-0.147736,0.483565,0.117402,0.304667,-0.158357,0.493702,0.130824,0.317785,-0.169274,0.504708,0.145724,0.333245,-0.180595,0.517107,0.16215,0.349843,-0.191892,0.528849,0.180149,0.367944,-0.203168,0.540301,0.199746,0.387579,-0.214443,0.551514,0.221047,0.408247,-0.225624,0.560906,0.243981,0.43014,-0.236422,0.56959,0.268513,0.452669,-0.24654,0.576098,0.294409,0.476196,-0.256157,0.580925,0.322002,0.501157,-0.265289,0.584839,0.351052,0.527632,-0.273671,0.587614,0.3812,0.555754,-0.281254,0.589119,0.412994,0.581682,-0.287448,0.585204,0.445498,0.608196,-0.292614,0.579006,0.479505,0.635661,-0.296068,0.571297,0.514643,0.664999,-0.297395,0.560855,0.552213,0.691039,-0.296645,0.544525,0.591365,0.7179,-0.293785,0.526535,0.630883,0.744059,-0.289089,0.50545,0.670932,0.76863,-0.282239,0.482514,0.710904,0.793273,-0.273688,0.457246,0.750259,0.814731,-0.26328,0.428872,0.78948,0.835603,-0.251526,0.399384,0.828597,0.85489,-0.238339,0.368811,0.866892,0.872828,-0.223607,0.336617,0.90563,0.889462,-0.207538,0.303997,0.943538,0.904929,-0.190297,0.270812,0.980591,0.919101,-0.172034,0.237453,1.01935,0.930536,-0.152058,0.204431,1.05498,0.941223,-0.129515,0.172495,1.08717,0.94982,-0.104263,0.140175,1.11551,0.960592,-0.0781944,0.106465,1.14098,0.974629,-0.051688,0.0711592,1.16418,0.98811,-0.0253929,0.0354432,1.18465,1.00004,0.000804378,-0.000330876,1.20462,0.214668,-0.00000821282,0.406619,0.00000433582,0.218053,-0.000208144,0.413025,0.000109887,0.217987,-0.000832212,0.412901,0.000439362,0.217971,-0.00187246,0.412876,0.000988623,0.217968,-0.00332855,0.41286,0.00175772,0.217985,-0.00520055,0.412882,0.00274729,0.218014,-0.00748814,0.412916,0.00395842,0.218054,-0.0101901,0.412957,0.00539274,0.218106,-0.0133057,0.413005,0.00705348,0.218217,-0.0168342,0.413139,0.00894581,0.218338,-0.0207707,0.413258,0.0110754,0.21855,-0.0251001,0.413509,0.0134551,0.218913,-0.0297861,0.413992,0.0161081,0.219265,-0.0348956,0.414383,0.0190307,0.219696,-0.0403909,0.414839,0.0222458,0.220329,-0.0462003,0.415567,0.025792,0.220989,-0.0524208,0.41621,0.0296637,0.222027,-0.058948,0.417385,0.0339323,0.223301,-0.0658208,0.418779,0.0386055,0.224988,-0.0730347,0.420665,0.0437355,0.227211,-0.0805274,0.423198,0.0493844,0.230131,-0.088395,0.426566,0.0556135,0.233908,-0.0966208,0.43091,0.0624829,0.239092,-0.105223,0.437148,0.0701636,0.245315,-0.11424,0.444302,0.0786949,0.253166,-0.12368,0.453262,0.0882382,0.262374,-0.133569,0.463211,0.0988682,0.273145,-0.143836,0.474271,0.110727,0.285512,-0.154577,0.4863,0.123945,0.299512,-0.165501,0.498817,0.138581,0.314287,-0.176698,0.510341,0.154676,0.331083,-0.188066,0.522583,0.172459,0.349615,-0.199597,0.534879,0.191979,0.369318,-0.210843,0.546083,0.21309,0.390377,-0.222068,0.5562,0.235998,0.412411,-0.233059,0.564704,0.260518,0.435715,-0.24357,0.572314,0.286795,0.461196,-0.253356,0.579395,0.314559,0.485587,-0.262362,0.581985,0.343581,0.511908,-0.270895,0.584347,0.374367,0.539798,-0.278452,0.58505,0.406015,0.567974,-0.284877,0.583344,0.439168,0.594303,-0.290124,0.577348,0.473005,0.622951,-0.294183,0.570751,0.508534,0.652404,-0.296389,0.561541,0.544764,0.679291,-0.296605,0.546426,0.582927,0.706437,-0.294095,0.528599,0.622681,0.734485,-0.28978,0.508676,0.663567,0.758841,-0.283363,0.484768,0.704092,0.78537,-0.275015,0.460434,0.745101,0.807315,-0.264689,0.432166,0.784712,0.8271,-0.252597,0.401807,0.824241,0.849191,-0.239154,0.371458,0.863803,0.867046,-0.224451,0.338873,0.903063,0.8852,-0.208342,0.306175,0.942763,0.901771,-0.190684,0.272759,0.981559,0.915958,-0.172105,0.239306,1.02048,0.928046,-0.152214,0.206071,1.05765,0.939961,-0.130247,0.17367,1.08999,0.948711,-0.10672,0.142201,1.11829,0.959305,-0.0808688,0.108454,1.14467,0.973009,-0.0539145,0.0728109,1.16839,0.987631,-0.0262947,0.0360625,1.19004,0.999978,0.00132758,-0.000559424,1.21058,0.193925,-0.00000793421,0.391974,0.00000392537,0.196746,-0.000200315,0.397675,0.0000991033,0.19667,-0.000801099,0.397521,0.000396342,0.196633,-0.00180246,0.397445,0.000891829,0.196654,-0.00320443,0.397482,0.00158582,0.196659,-0.00500647,0.39748,0.00247867,0.196683,-0.0072086,0.397506,0.00357167,0.196728,-0.00981001,0.397562,0.00486675,0.196792,-0.0128096,0.397633,0.00636707,0.19689,-0.0162055,0.397746,0.00807752,0.197017,-0.0199943,0.397884,0.0100052,0.19729,-0.024139,0.39827,0.0121691,0.197583,-0.0286671,0.398639,0.0145755,0.197927,-0.0335858,0.399034,0.0172355,0.198383,-0.0388806,0.399554,0.0201718,0.199002,-0.0444736,0.400289,0.0234194,0.199739,-0.0504583,0.401111,0.026984,0.200784,-0.056729,0.402349,0.0309217,0.202075,-0.0633643,0.403841,0.0352496,0.203898,-0.0703247,0.406076,0.0400313,0.206199,-0.0775565,0.408841,0.0453282,0.209252,-0.085184,0.41259,0.0511794,0.213638,-0.0931994,0.418288,0.0577459,0.21881,-0.101617,0.424681,0.0650508,0.225642,-0.11052,0.433429,0.0732759,0.233717,-0.119772,0.442897,0.0824683,0.242823,-0.129505,0.452888,0.0927484,0.254772,-0.139906,0.466407,0.104417,0.266603,-0.150402,0.477413,0.117211,0.28073,-0.161395,0.490519,0.131598,0.295399,-0.172465,0.50201,0.147407,0.312705,-0.183982,0.515311,0.165031,0.331335,-0.195532,0.52786,0.184336,0.351037,-0.206971,0.5392,0.205361,0.372175,-0.218117,0.54941,0.228043,0.394548,-0.229327,0.558642,0.25267,0.419598,-0.240052,0.567861,0.279071,0.443922,-0.249937,0.573332,0.306882,0.471495,-0.259407,0.58013,0.33661,0.496769,-0.267749,0.580564,0.367328,0.524951,-0.275524,0.581696,0.399753,0.55318,-0.282148,0.579885,0.433134,0.581577,-0.287533,0.575471,0.467534,0.609231,-0.291612,0.567445,0.502943,0.637478,-0.293911,0.557657,0.53871,0.667795,-0.295096,0.546535,0.576568,0.694272,-0.294073,0.529561,0.614929,0.722937,-0.290386,0.510561,0.655909,0.749682,-0.284481,0.487846,0.697663,0.774754,-0.276188,0.462487,0.738515,0.799301,-0.266215,0.43481,0.779802,0.820762,-0.254116,0.404879,0.820045,0.843231,-0.240393,0.374559,0.860294,0.861857,-0.225503,0.341582,0.900965,0.880815,-0.209382,0.308778,0.941727,0.89766,-0.19155,0.275232,0.980916,0.912926,-0.172346,0.240938,1.02162,0.926391,-0.151799,0.207223,1.0597,0.938429,-0.129968,0.17484,1.09291,0.947834,-0.10651,0.142984,1.12248,0.958432,-0.0824098,0.109902,1.149,0.972402,-0.0565242,0.0744454,1.1733,0.987191,-0.028427,0.0373794,1.19538,0.999975,0.0000385685,-0.00004203,1.21676,0.178114,-0.00000766075,0.385418,0.00000354027,0.176074,-0.000191966,0.381002,0.0000887135,0.17601,-0.000767549,0.380861,0.000354715,0.17598,-0.00172696,0.380798,0.000798168,0.175994,-0.00307012,0.380824,0.00141928,0.176017,-0.00479684,0.380858,0.00221859,0.176019,-0.00690648,0.380839,0.00319714,0.176072,-0.00939888,0.380913,0.0043572,0.176131,-0.0122726,0.380979,0.005702,0.176239,-0.0155264,0.38112,0.00723689,0.176371,-0.0191551,0.381272,0.00896907,0.176638,-0.023117,0.381669,0.0109194,0.176912,-0.0274633,0.382015,0.0130903,0.177279,-0.032173,0.382476,0.0154949,0.17774,-0.0372219,0.383041,0.0181669,0.178344,-0.0426132,0.38378,0.0211209,0.179153,-0.0483309,0.384773,0.0243899,0.180197,-0.0543447,0.386076,0.0280062,0.181581,-0.0607122,0.387809,0.032004,0.18344,-0.0673855,0.390205,0.036453,0.186139,-0.0743989,0.393944,0.0414162,0.189432,-0.0817731,0.39832,0.0469394,0.193795,-0.0895464,0.404188,0.0531442,0.199641,-0.0978264,0.4121,0.0601374,0.206679,-0.106499,0.421425,0.0680078,0.214865,-0.115654,0.431504,0.076919,0.224406,-0.125268,0.442526,0.0868835,0.235876,-0.135475,0.455465,0.0981875,0.248335,-0.146023,0.4681,0.110759,0.262868,-0.157016,0.482069,0.124885,0.278962,-0.168245,0.496182,0.140645,0.295082,-0.17958,0.507401,0.157838,0.313738,-0.191227,0.520252,0.17695,0.333573,-0.202718,0.531708,0.197817,0.356433,-0.214424,0.544509,0.220785,0.378853,-0.225492,0.55373,0.245306,0.402717,-0.236236,0.561348,0.271593,0.428375,-0.246568,0.568538,0.299776,0.454724,-0.255941,0.573462,0.329433,0.482291,-0.264511,0.576356,0.360598,0.509706,-0.272129,0.576446,0.393204,0.538805,-0.278979,0.575298,0.427227,0.568919,-0.284528,0.572154,0.462157,0.596804,-0.288801,0.564691,0.497997,0.625987,-0.291334,0.555134,0.534467,0.656414,-0.292722,0.545051,0.571736,0.683916,-0.292185,0.528813,0.610158,0.711809,-0.290043,0.51106,0.649061,0.739547,-0.285246,0.490103,0.690081,0.766914,-0.277647,0.465523,0.732554,0.791375,-0.267603,0.437718,0.773982,0.814772,-0.256109,0.40882,0.81609,0.836691,-0.242281,0.377823,0.856849,0.856984,-0.227155,0.34496,0.898363,0.876332,-0.210395,0.311335,0.939471,0.894988,-0.192612,0.277703,0.980799,0.911113,-0.173236,0.243019,1.02215,0.924092,-0.152258,0.209037,1.06139,0.936828,-0.129575,0.175909,1.09635,0.946869,-0.10594,0.143852,1.12707,0.958284,-0.081318,0.110289,1.15419,0.972325,-0.0556133,0.0747232,1.17909,0.986878,-0.0297899,0.0383149,1.20163,0.999936,-0.00197169,0.000912402,1.22338,0.151174,-0.00000720365,0.351531,0.00000309789,0.155594,-0.00018279,0.361806,0.000078608,0.156099,-0.000731569,0.362982,0.000314615,0.156053,-0.00164578,0.362869,0.000707845,0.156093,-0.0029261,0.362961,0.00125884,0.156099,-0.00457155,0.362959,0.00196783,0.15612,-0.00658224,0.362982,0.00283622,0.156168,-0.00895774,0.363048,0.00386625,0.156221,-0.0116962,0.363101,0.00506109,0.156324,-0.0147973,0.363241,0.00642675,0.156476,-0.0182503,0.363448,0.00797175,0.156731,-0.0220266,0.36384,0.00971484,0.156994,-0.026176,0.364179,0.0116575,0.157341,-0.0306701,0.36462,0.0138207,0.157867,-0.0354591,0.365364,0.0162356,0.15846,-0.0406141,0.366111,0.0189092,0.159308,-0.0460519,0.367248,0.021885,0.160426,-0.0518096,0.368767,0.0252004,0.161877,-0.0578906,0.370745,0.0288825,0.163995,-0.0642812,0.373831,0.0330139,0.16655,-0.0710067,0.377366,0.0376283,0.170237,-0.0781522,0.382799,0.0428493,0.175096,-0.0857172,0.389915,0.0487324,0.181069,-0.0938025,0.398487,0.0554214,0.188487,-0.102363,0.408799,0.0630189,0.197029,-0.111343,0.419991,0.071634,0.206684,-0.120812,0.431455,0.0812797,0.218698,-0.131033,0.445746,0.0923651,0.230726,-0.141373,0.457471,0.104545,0.245516,-0.152387,0.472388,0.118449,0.261551,-0.163628,0.486671,0.133923,0.277437,-0.174814,0.49762,0.150849,0.296662,-0.186713,0.51162,0.169924,0.31795,-0.198513,0.525435,0.190848,0.339422,-0.210119,0.536267,0.213504,0.362143,-0.221354,0.545982,0.237947,0.387198,-0.23224,0.555364,0.264427,0.412349,-0.24257,0.561489,0.292519,0.439274,-0.252284,0.566903,0.322561,0.466779,-0.261023,0.569614,0.353952,0.496011,-0.26899,0.571589,0.387278,0.524964,-0.275498,0.570325,0.421356,0.556518,-0.281449,0.568792,0.457314,0.584363,-0.285526,0.560268,0.493199,0.614214,-0.28844,0.55205,0.530276,0.645684,-0.289777,0.541906,0.56855,0.673446,-0.289722,0.526464,0.606927,0.701924,-0.287792,0.509872,0.645945,0.73037,-0.284315,0.490649,0.685564,0.757405,-0.278804,0.467964,0.726511,0.784025,-0.269543,0.441468,0.768601,0.808255,-0.258117,0.41216,0.811321,0.830739,-0.244728,0.380606,0.853496,0.851914,-0.229428,0.348111,0.895374,0.872586,-0.212508,0.314732,0.937674,0.891581,-0.194025,0.280338,0.979869,0.907641,-0.174711,0.245203,1.02253,0.922233,-0.153509,0.21077,1.06371,0.935878,-0.130418,0.177399,1.09972,0.946338,-0.105558,0.144507,1.13124,0.957265,-0.080059,0.110508,1.15973,0.971668,-0.0539766,0.0742311,1.18515,0.9866,-0.0277101,0.0375224,1.20858,1.00021,-0.000515531,0.000135226,1.23135,0.137468,-0.00000686011,0.345041,0.00000273315,0.13703,-0.000173378,0.343936,0.0000690761,0.136986,-0.000693048,0.34383,0.000276126,0.136964,-0.00155931,0.343761,0.000621337,0.137003,-0.00277211,0.343863,0.00110494,0.137012,-0.00433103,0.343868,0.00172744,0.137043,-0.00623606,0.343916,0.00249022,0.13709,-0.0084868,0.343986,0.00339559,0.137145,-0.0110814,0.344045,0.00444687,0.137242,-0.0140187,0.344177,0.00565007,0.137431,-0.0172713,0.344491,0.00701868,0.137644,-0.0208605,0.344805,0.00856042,0.13791,-0.024792,0.345172,0.0102863,0.138295,-0.0290461,0.345734,0.0122185,0.138764,-0.0335957,0.346371,0.0143771,0.139415,-0.038467,0.347298,0.0167894,0.140272,-0.0436176,0.348527,0.0194895,0.141457,-0.0491016,0.350276,0.0225043,0.14303,-0.0548764,0.352646,0.0258962,0.145289,-0.0610096,0.356206,0.0297168,0.148502,-0.0674777,0.361488,0.0340562,0.152188,-0.074345,0.367103,0.0389534,0.157359,-0.0817442,0.375247,0.0445541,0.16379,-0.0896334,0.385064,0.0509535,0.171376,-0.098005,0.396082,0.0582611,0.179901,-0.106817,0.407418,0.06654,0.189892,-0.116239,0.420031,0.075994,0.201838,-0.12627,0.434321,0.0867239,0.214311,-0.136701,0.447631,0.0987517,0.228902,-0.147616,0.462046,0.112353,0.245107,-0.158871,0.476942,0.127605,0.262292,-0.170261,0.490285,0.144469,0.281215,-0.182017,0.503783,0.163282,0.301058,-0.193729,0.515505,0.183873,0.322752,-0.205512,0.52682,0.206466,0.347547,-0.217214,0.539473,0.231194,0.370969,-0.227966,0.546625,0.257288,0.397533,-0.238555,0.55472,0.285789,0.42398,-0.248278,0.559468,0.315746,0.452928,-0.257422,0.564095,0.347724,0.482121,-0.265306,0.565426,0.380922,0.510438,-0.272043,0.563205,0.415639,0.541188,-0.277614,0.561087,0.451702,0.571667,-0.281927,0.554922,0.48845,0.602432,-0.285015,0.546838,0.526442,0.634126,-0.286512,0.537415,0.564896,0.662816,-0.286388,0.522906,0.604037,0.692411,-0.284734,0.507003,0.643795,0.720946,-0.281297,0.488398,0.68298,0.748293,-0.276262,0.466353,0.723466,0.776931,-0.269978,0.443573,0.764565,0.801065,-0.260305,0.415279,0.805838,0.825843,-0.247426,0.384773,0.849985,0.84807,-0.232437,0.352555,0.893174,0.869122,-0.215806,0.318642,0.936564,0.888963,-0.197307,0.28381,0.980253,0.905547,-0.177203,0.247888,1.02463,0.918554,-0.155542,0.212904,1.06714,0.931395,-0.131948,0.1787,1.10451,0.941749,-0.106723,0.145902,1.13694,0.954551,-0.0804939,0.111193,1.1666,0.970279,-0.0534239,0.0744697,1.19249,0.986117,-0.0257452,0.0368788,1.21665,0.999938,0.00190634,-0.0010291,1.23981,0.118493,-0.00000647439,0.32272,0.0000023772,0.118765,-0.000163023,0.323456,0.0000598573,0.118772,-0.00065212,0.323477,0.000239447,0.118843,-0.00146741,0.323657,0.000538881,0.118804,-0.00260846,0.323553,0.00095826,0.118826,-0.00407576,0.323595,0.00149845,0.118846,-0.00586826,0.323617,0.00216047,0.118886,-0.00798578,0.32367,0.00294679,0.118947,-0.0104273,0.323753,0.00386124,0.119055,-0.0131909,0.323922,0.00490999,0.119241,-0.0162444,0.324251,0.00610804,0.11944,-0.0196339,0.324544,0.00745805,0.119739,-0.0233378,0.325026,0.00897805,0.12011,-0.0273179,0.325586,0.0106895,0.120571,-0.0316143,0.326231,0.0126073,0.12124,-0.0361939,0.327264,0.0147654,0.122162,-0.0410511,0.328733,0.0172001,0.123378,-0.0462233,0.330659,0.0199375,0.125183,-0.0517109,0.333754,0.0230498,0.127832,-0.0575652,0.338507,0.026597,0.130909,-0.0637441,0.343666,0.0306345,0.135221,-0.0704302,0.351063,0.035273,0.14082,-0.0776364,0.360604,0.0406137,0.146781,-0.0852293,0.369638,0.0466788,0.155121,-0.0935351,0.3827,0.0537628,0.16398,-0.102234,0.39522,0.0617985,0.173926,-0.111465,0.40793,0.07097,0.185137,-0.121296,0.42105,0.0813426,0.19826,-0.13169,0.435735,0.0931596,0.212938,-0.142614,0.450932,0.106547,0.229046,-0.153884,0.465726,0.121575,0.246246,-0.165382,0.479461,0.138286,0.264637,-0.176806,0.492106,0.15666,0.284959,-0.188793,0.504774,0.17728,0.308157,-0.200763,0.518805,0.19988,0.330951,-0.21239,0.528231,0.224293,0.3549,-0.223521,0.536376,0.250541,0.381502,-0.234169,0.544846,0.278902,0.409529,-0.244077,0.551717,0.309227,0.437523,-0.253363,0.55517,0.341426,0.467624,-0.261659,0.557772,0.37518,0.497268,-0.268498,0.556442,0.41007,0.528294,-0.274018,0.553915,0.446445,0.559053,-0.278169,0.549153,0.483779,0.589329,-0.281229,0.539878,0.522249,0.622503,-0.282902,0.53162,0.561754,0.652382,-0.282815,0.518119,0.601544,0.681847,-0.281247,0.502187,0.641574,0.712285,-0.277986,0.484824,0.682633,0.740094,-0.273017,0.463483,0.723426,0.768478,-0.266692,0.441299,0.763747,0.794556,-0.258358,0.415238,0.805565,0.819408,-0.248807,0.386912,0.847254,0.843411,-0.236214,0.356165,0.891091,0.862397,-0.219794,0.320562,0.936174,0.883113,-0.201768,0.285322,0.982562,0.90023,-0.181672,0.249713,1.02862,0.915192,-0.159279,0.214546,1.07163,0.928458,-0.134725,0.180285,1.10995,0.94069,-0.10913,0.147119,1.14354,0.953409,-0.0821315,0.112492,1.17372,0.969537,-0.0542677,0.0752014,1.20043,0.985612,-0.0259096,0.0370361,1.22528,0.999835,0.00298198,-0.00151801,1.24959,0.10097,-0.00000602574,0.300277,0.00000202619,0.101577,-0.000152164,0.302077,0.0000511662,0.101572,-0.000608889,0.302066,0.000204751,0.101566,-0.00136997,0.302047,0.000460753,0.101592,-0.00243557,0.302114,0.000819497,0.101608,-0.0038053,0.30214,0.00128154,0.101627,-0.00547906,0.30216,0.0018483,0.101669,-0.00745647,0.302224,0.00252223,0.101732,-0.00973615,0.302318,0.00330716,0.101844,-0.0123097,0.302513,0.00421061,0.102025,-0.0151681,0.30285,0.00524481,0.102224,-0.0183334,0.303166,0.0064154,0.102515,-0.0217819,0.303654,0.00774063,0.102886,-0.0255067,0.304243,0.0092398,0.103395,-0.029514,0.305089,0.0109339,0.104109,-0.0337912,0.306301,0.0128561,0.105074,-0.0383565,0.30798,0.0150338,0.10654,-0.0432132,0.310726,0.0175228,0.108478,-0.0484244,0.314351,0.0203648,0.111015,-0.0539339,0.319032,0.0236325,0.114682,-0.0598885,0.32605,0.0274188,0.11911,-0.0663375,0.334109,0.0317905,0.124736,-0.0733011,0.344013,0.0368502,0.131479,-0.0807744,0.355358,0.0427104,0.139283,-0.0888204,0.367614,0.0494788,0.148054,-0.0973394,0.380072,0.0572367,0.159037,-0.10665,0.395678,0.0662704,0.169794,-0.116221,0.40795,0.0763192,0.18314,-0.126632,0.423546,0.087956,0.197515,-0.137383,0.438213,0.101042,0.213514,-0.148641,0.453248,0.115827,0.23065,-0.160117,0.46688,0.132283,0.249148,-0.171807,0.479962,0.150644,0.270219,-0.183695,0.494618,0.171073,0.292338,-0.195574,0.506937,0.193378,0.314999,-0.207205,0.516463,0.217585,0.340991,-0.218955,0.528123,0.24428,0.367982,-0.229917,0.537025,0.272784,0.39432,-0.239737,0.541627,0.302742,0.423364,-0.249048,0.546466,0.335112,0.453751,-0.257329,0.549466,0.369032,0.48416,-0.264623,0.549503,0.404577,0.515262,-0.270411,0.547008,0.441337,0.547036,-0.274581,0.542249,0.479162,0.576614,-0.277266,0.533015,0.517904,0.611143,-0.279144,0.525512,0.558508,0.640989,-0.279001,0.51154,0.598995,0.671182,-0.277324,0.495641,0.639935,0.700848,-0.273908,0.477526,0.681017,0.729862,-0.269063,0.457955,0.722764,0.758273,-0.262282,0.434846,0.764349,0.784121,-0.254281,0.409203,0.806206,0.809798,-0.24505,0.382694,0.848617,0.834953,-0.233861,0.354034,0.892445,0.856817,-0.221308,0.321764,0.936263,0.877609,-0.205996,0.288118,0.982401,0.897489,-0.186702,0.253277,1.02975,0.913792,-0.164618,0.217963,1.07488,0.92785,-0.140023,0.183221,1.11487,0.940378,-0.11328,0.149385,1.14947,0.95273,-0.0853958,0.114152,1.1807,0.969059,-0.0568698,0.0769845,1.20912,0.985574,-0.0276502,0.0381186,1.23498,0.999943,0.00239052,-0.00126861,1.25987,0.0852715,-0.00000560067,0.279021,0.00000171162,0.0854143,-0.000140871,0.279483,0.0000430516,0.0854191,-0.000563385,0.2795,0.000172184,0.0854188,-0.00126753,0.279493,0.000387464,0.0854229,-0.00225337,0.279501,0.00068918,0.0854443,-0.00352086,0.279549,0.00107803,0.0854697,-0.00506962,0.279591,0.00155536,0.0855093,-0.00689873,0.279652,0.00212354,0.0855724,-0.00900821,0.279752,0.00278703,0.0856991,-0.0113799,0.280011,0.0035551,0.085855,-0.0140314,0.280297,0.00443449,0.0860682,-0.016963,0.280682,0.00543636,0.086344,-0.0201438,0.281159,0.0065788,0.0867426,-0.0235999,0.281886,0.00787977,0.087239,-0.0273069,0.282745,0.0093606,0.0879815,-0.031269,0.284139,0.011056,0.0891258,-0.035531,0.28647,0.0130065,0.0906909,-0.0400947,0.289708,0.0152495,0.0927624,-0.0449638,0.293904,0.0178454,0.0958376,-0.0502427,0.300471,0.0208915,0.0995827,-0.0559514,0.30806,0.0244247,0.104526,-0.0622152,0.317874,0.0285721,0.110532,-0.0690046,0.329332,0.0334227,0.117385,-0.0763068,0.341217,0.0390466,0.12522,-0.084184,0.353968,0.0455786,0.134037,-0.0925248,0.366797,0.0530773,0.144014,-0.101487,0.380209,0.0617424,0.156013,-0.111273,0.395956,0.071777,0.168872,-0.121431,0.41053,0.0830905,0.183089,-0.132105,0.425073,0.0959341,0.198763,-0.143286,0.439833,0.110448,0.216159,-0.154841,0.454507,0.126769,0.234859,-0.166588,0.468368,0.14495,0.255879,-0.178626,0.482846,0.165233,0.27677,-0.190218,0.493489,0.187217,0.301184,-0.202227,0.506549,0.211659,0.325852,-0.213764,0.5158,0.237922,0.352824,-0.22487,0.525442,0.26632,0.380882,-0.235246,0.532487,0.296691,0.410137,-0.244847,0.537703,0.329179,0.439787,-0.253122,0.540361,0.363135,0.472291,-0.260517,0.542734,0.399222,0.501856,-0.266519,0.538826,0.436352,0.534816,-0.270905,0.535152,0.474505,0.565069,-0.273826,0.525979,0.513988,0.597154,-0.275333,0.516394,0.554852,0.630473,-0.275314,0.506206,0.596592,0.660574,-0.273323,0.489769,0.638117,0.692015,-0.270008,0.472578,0.680457,0.720647,-0.265001,0.452134,0.723008,0.750528,-0.258311,0.430344,0.765954,0.777568,-0.250046,0.405624,0.809012,0.80387,-0.240114,0.378339,0.852425,0.828439,-0.228737,0.349877,0.895346,0.851472,-0.216632,0.318968,0.940695,0.873906,-0.202782,0.287489,0.987235,0.89467,-0.187059,0.254394,1.03348,0.912281,-0.168818,0.221294,1.07812,0.927358,-0.146494,0.18675,1.11928,0.940385,-0.120009,0.152322,1.15609,0.952672,-0.0917183,0.117514,1.18875,0.968496,-0.0620321,0.0797405,1.21821,0.985236,-0.0314945,0.0402383,1.24523,0.99998,-0.000575153,0.000110644,1.27133,0.0702429,-0.00000512222,0.255273,0.00000140947,0.0702981,-0.000128826,0.255469,0.0000354488,0.0703691,-0.000515562,0.255727,0.000141874,0.0703805,-0.00116,0.255754,0.00031929,0.0703961,-0.00206224,0.255813,0.000567999,0.0704102,-0.00322223,0.255839,0.00088871,0.0704298,-0.00463928,0.255863,0.00128272,0.0704759,-0.00631375,0.255953,0.00175283,0.0705434,-0.00824317,0.256079,0.00230342,0.0706693,-0.010412,0.25636,0.0029443,0.0708189,-0.0128439,0.256647,0.00368031,0.0710364,-0.0155177,0.257084,0.00452614,0.0713223,-0.0184374,0.257637,0.00549706,0.0717182,-0.0216002,0.258416,0.00661246,0.072321,-0.0249966,0.259699,0.00790147,0.0731446,-0.0286566,0.261475,0.0093884,0.0743352,-0.0325888,0.264132,0.0111186,0.0760676,-0.036843,0.26815,0.013145,0.078454,-0.0414292,0.273636,0.0155251,0.0818618,-0.0464634,0.281653,0.0183525,0.0857382,-0.0519478,0.289992,0.0216642,0.0908131,-0.0579836,0.30066,0.0255956,0.0967512,-0.0645124,0.312204,0.0301954,0.103717,-0.0716505,0.325001,0.0356017,0.111596,-0.0793232,0.338129,0.041896,0.120933,-0.087645,0.352853,0.0492447,0.130787,-0.096492,0.366192,0.0576749,0.142311,-0.105973,0.380864,0.0673969,0.155344,-0.116182,0.396575,0.0785899,0.169535,-0.126815,0.411443,0.0912377,0.185173,-0.138015,0.426256,0.105607,0.201755,-0.149325,0.439607,0.121551,0.221334,-0.161207,0.455467,0.139608,0.241461,-0.173162,0.469096,0.159591,0.26294,-0.18504,0.481014,0.18156,0.286776,-0.196881,0.493291,0.205781,0.311596,-0.208311,0.503556,0.231819,0.338667,-0.219671,0.513268,0.260274,0.366021,-0.230451,0.519414,0.290862,0.395875,-0.240131,0.526766,0.323196,0.425564,-0.248566,0.52905,0.357071,0.457094,-0.256195,0.530796,0.393262,0.488286,-0.262331,0.528703,0.430797,0.522291,-0.267141,0.52727,0.470231,0.554172,-0.270411,0.519848,0.510477,0.586427,-0.271986,0.510307,0.551594,0.619638,-0.27192,0.499158,0.593849,0.650656,-0.269817,0.483852,0.636314,0.68284,-0.266267,0.467515,0.679679,0.714356,-0.26113,0.44931,0.723884,0.742717,-0.254067,0.425789,0.767245,0.770894,-0.245652,0.401144,0.811819,0.797358,-0.235554,0.374224,0.856315,0.823377,-0.223896,0.346167,0.901077,0.847456,-0.210865,0.316056,0.946502,0.870697,-0.196574,0.284503,0.993711,0.891068,-0.180814,0.251628,1.04134,0.909267,-0.163314,0.219065,1.08609,0.925653,-0.143304,0.186446,1.12702,0.940017,-0.121322,0.153416,1.16371,0.952398,-0.0973872,0.120334,1.19712,0.967568,-0.0698785,0.08352,1.22791,0.984772,-0.0390031,0.0439209,1.25672,1.00026,-0.0070087,0.00315668,1.28428,0.0556653,-0.00000459654,0.227325,0.00000112556,0.0565238,-0.000116382,0.230826,0.0000284985,0.0565717,-0.000465666,0.231026,0.000114036,0.0565859,-0.00104773,0.231079,0.000256656,0.0565761,-0.00186255,0.231025,0.00045663,0.0565913,-0.00291002,0.231058,0.000714664,0.0566108,-0.00418998,0.231085,0.00103224,0.0566532,-0.00570206,0.231169,0.00141202,0.0567473,-0.00743666,0.231417,0.00186018,0.0568567,-0.00940298,0.231661,0.00238264,0.0569859,-0.0115991,0.231895,0.00298699,0.0572221,-0.0140096,0.232456,0.00368957,0.057519,-0.0166508,0.233096,0.00450303,0.0579534,-0.01951,0.234094,0.00544945,0.0585922,-0.0225991,0.235629,0.00655564,0.0595647,-0.0259416,0.238106,0.00785724,0.0609109,-0.0295661,0.241557,0.00939127,0.0628751,-0.0335126,0.246652,0.0112198,0.0656908,-0.0378604,0.254091,0.0134168,0.0691347,-0.0426543,0.262666,0.0160374,0.0732165,-0.0478967,0.272029,0.0191514,0.0782863,-0.0536716,0.283007,0.0228597,0.0843973,-0.0600683,0.295732,0.0272829,0.0913598,-0.0670095,0.308779,0.032484,0.0994407,-0.0745516,0.322886,0.0385886,0.108189,-0.082712,0.336408,0.0457133,0.118574,-0.0914927,0.351692,0.0539832,0.129989,-0.100854,0.366502,0.0635162,0.142722,-0.110837,0.381675,0.0744386,0.156654,-0.121353,0.3963,0.0868483,0.172151,-0.132414,0.411477,0.100963,0.188712,-0.143809,0.42508,0.116795,0.208093,-0.155765,0.441328,0.134715,0.227936,-0.167608,0.454328,0.154396,0.249495,-0.179579,0.467235,0.176179,0.27362,-0.191488,0.480248,0.200193,0.296371,-0.202618,0.487886,0.225775,0.324234,-0.214133,0.499632,0.25441,0.353049,-0.225212,0.509532,0.285077,0.381785,-0.234875,0.514265,0.317047,0.414038,-0.244205,0.521282,0.351874,0.445251,-0.252145,0.522931,0.388279,0.476819,-0.258433,0.520947,0.425825,0.509209,-0.263411,0.517669,0.465104,0.542759,-0.266732,0.512841,0.505741,0.574822,-0.268263,0.503317,0.547611,0.609324,-0.268489,0.493035,0.590953,0.641772,-0.266941,0.478816,0.63488,0.674049,-0.263297,0.462863,0.679072,0.705071,-0.257618,0.442931,0.723487,0.734709,-0.250625,0.421299,0.768708,0.763704,-0.24179,0.397085,0.814375,0.791818,-0.231115,0.370577,0.859907,0.817439,-0.21922,0.34232,0.906715,0.843202,-0.205658,0.312627,0.953943,0.866639,-0.190563,0.280933,1.00185,0.888129,-0.173978,0.248393,1.05105,0.907239,-0.155485,0.216007,1.09704,0.923893,-0.134782,0.183233,1.13857,0.938882,-0.11249,0.150376,1.17539,0.952464,-0.0890706,0.117177,1.20924,0.968529,-0.0646523,0.0813095,1.24055,0.984763,-0.038606,0.0439378,1.27018,1.00053,-0.01238,0.00598668,1.29873,0.0437928,-0.00000409594,0.204012,0.000000879224,0.0440166,-0.000103395,0.205049,0.0000221946,0.0440529,-0.000413633,0.205225,0.0000887981,0.0440493,-0.000930594,0.2052,0.000199858,0.0439884,-0.00165352,0.204901,0.000355495,0.0440716,-0.0025849,0.205255,0.000556983,0.0440968,-0.00372222,0.205311,0.000805326,0.0441359,-0.00506478,0.205391,0.00110333,0.0442231,-0.00660384,0.205638,0.00145768,0.0443254,-0.00835246,0.205877,0.00187275,0.0444832,-0.0102992,0.20627,0.00235938,0.0447001,-0.0124449,0.206796,0.0029299,0.0450168,-0.0147935,0.207593,0.0036005,0.0454816,-0.017336,0.208819,0.00439246,0.0462446,-0.0201156,0.211036,0.00533864,0.0473694,-0.0231568,0.214388,0.00646984,0.0490191,-0.0264941,0.219357,0.00783856,0.0512776,-0.030184,0.226061,0.00950182,0.0541279,-0.0342661,0.234094,0.0115156,0.0578989,-0.0388539,0.244297,0.0139687,0.0620835,-0.0438735,0.254457,0.0169015,0.0673497,-0.04951,0.266706,0.0204554,0.0731759,-0.0556263,0.278753,0.0246606,0.0803937,-0.0624585,0.29309,0.0297126,0.0879287,-0.0697556,0.305856,0.0355868,0.0970669,-0.0778795,0.321059,0.0425768,0.106508,-0.0863541,0.333873,0.05056,0.11776,-0.0955935,0.349008,0.0598972,0.130081,-0.105438,0.363776,0.0706314,0.144454,-0.115899,0.380112,0.0828822,0.1596,-0.126827,0.394843,0.0967611,0.176097,-0.138161,0.409033,0.112381,0.194726,-0.149904,0.424257,0.129952,0.213944,-0.161675,0.436945,0.149333,0.235516,-0.173659,0.450176,0.170892,0.260564,-0.185963,0.466305,0.194984,0.285183,-0.197582,0.477328,0.220805,0.311095,-0.208697,0.486566,0.248694,0.338924,-0.219519,0.494811,0.279015,0.369757,-0.229766,0.504065,0.311725,0.3996,-0.238879,0.507909,0.345844,0.430484,-0.246802,0.509805,0.381749,0.46413,-0.253924,0.511436,0.420251,0.497077,-0.259319,0.508787,0.459957,0.530434,-0.263297,0.50394,0.501356,0.565725,-0.265619,0.49804,0.544252,0.599254,-0.265842,0.487346,0.587856,0.631251,-0.263978,0.472975,0.631969,0.663972,-0.26043,0.457135,0.677471,0.697724,-0.255358,0.439844,0.723744,0.727725,-0.248308,0.417872,0.770653,0.756417,-0.239181,0.39273,0.817357,0.785419,-0.22814,0.367839,0.864221,0.81266,-0.215681,0.339449,0.912701,0.839391,-0.201623,0.309279,0.962419,0.86366,-0.185624,0.278029,1.0122,0.885028,-0.16797,0.245294,1.06186,0.904639,-0.148336,0.212689,1.10934,0.922048,-0.12637,0.179616,1.15063,0.936952,-0.102928,0.146749,1.18885,0.951895,-0.0785268,0.112733,1.22352,0.967198,-0.0530153,0.0760056,1.25681,0.984405,-0.02649,0.0383183,1.28762,1.00021,0.00070019,-0.00020039,1.31656,0.0325964,-0.00000355447,0.176706,0.000000655682,0.0329333,-0.0000899174,0.178527,0.0000165869,0.0329181,-0.000359637,0.178453,0.0000663498,0.0329085,-0.000808991,0.178383,0.000149332,0.0329181,-0.00143826,0.178394,0.000265873,0.0329425,-0.00224678,0.178517,0.000416597,0.0329511,-0.00323575,0.17849,0.000603299,0.033011,-0.00439875,0.178695,0.000829422,0.0330733,-0.00574059,0.178843,0.00109908,0.0331857,-0.00725896,0.179176,0.00141933,0.0333445,-0.00895289,0.179618,0.0017999,0.0335674,-0.0108219,0.180238,0.00225316,0.033939,-0.0128687,0.181417,0.00279765,0.0345239,-0.015114,0.183395,0.0034564,0.0354458,-0.017596,0.186616,0.00425864,0.0368313,-0.0203524,0.191547,0.00524936,0.0386115,-0.0234105,0.197508,0.00647033,0.0410303,-0.0268509,0.205395,0.00798121,0.0442245,-0.0307481,0.215365,0.0098557,0.0478659,-0.0350863,0.225595,0.0121417,0.0522416,-0.0399506,0.236946,0.0149385,0.0574513,-0.045357,0.249442,0.0183189,0.0631208,-0.0512863,0.261222,0.0223644,0.0701124,-0.0579273,0.275418,0.0272418,0.0777331,-0.0650652,0.288989,0.0329458,0.0862709,-0.0728813,0.302546,0.0396819,0.096103,-0.081363,0.317164,0.04757,0.106976,-0.0904463,0.331733,0.0567012,0.119175,-0.100105,0.34661,0.067202,0.132919,-0.110375,0.362249,0.0792588,0.147727,-0.121115,0.376978,0.0928672,0.163618,-0.132299,0.390681,0.108228,0.182234,-0.143887,0.406571,0.125502,0.201809,-0.155827,0.42042,0.144836,0.225041,-0.168357,0.438411,0.166706,0.247621,-0.18004,0.450368,0.189909,0.27097,-0.191536,0.460083,0.215251,0.296658,-0.203024,0.469765,0.243164,0.325892,-0.214056,0.481837,0.273388,0.35406,-0.224104,0.487474,0.305344,0.384372,-0.233489,0.492773,0.339741,0.41749,-0.241874,0.498451,0.376287,0.45013,-0.248834,0.499632,0.414195,0.481285,-0.254658,0.495233,0.454077,0.519183,-0.259367,0.496401,0.496352,0.551544,-0.261818,0.487686,0.538798,0.587349,-0.262964,0.479453,0.583626,0.621679,-0.262128,0.467709,0.629451,0.654991,-0.258998,0.452123,0.67566,0.686873,-0.254119,0.433495,0.723248,0.719801,-0.246946,0.413657,0.771156,0.750355,-0.237709,0.390366,0.81989,0.780033,-0.226549,0.364947,0.868601,0.809254,-0.214186,0.337256,0.920034,0.836576,-0.199639,0.307395,0.971706,0.861774,-0.183169,0.275431,1.02479,0.885707,-0.165111,0.243431,1.07837,0.904742,-0.144363,0.210921,1.12783,0.915604,-0.121305,0.17647,1.17254,0.930959,-0.0962119,0.143106,1.21012,0.948404,-0.069969,0.108112,1.24474,0.967012,-0.0427586,0.0708478,1.27718,0.984183,-0.0147043,0.032335,1.3083,0.999577,0.0142165,-0.00726867,1.3382,0.0229227,-0.00000299799,0.148623,0.000000462391,0.0232194,-0.0000758796,0.15054,0.0000117033,0.0232315,-0.000303636,0.15063,0.0000468397,0.0232354,-0.000683189,0.150624,0.000105472,0.0232092,-0.0012136,0.150445,0.000187744,0.0232523,-0.00189765,0.150679,0.000294847,0.0232828,-0.00273247,0.150789,0.000428013,0.0233371,-0.00371287,0.150995,0.000591134,0.0234015,-0.00484794,0.15118,0.000787642,0.023514,-0.00612877,0.151562,0.00102547,0.023679,-0.00756125,0.152116,0.00131351,0.0239559,-0.00914651,0.153162,0.00166594,0.0244334,-0.010904,0.155133,0.00210182,0.025139,-0.0128615,0.158035,0.00264406,0.0262598,-0.0150628,0.162751,0.00332923,0.0277875,-0.0175532,0.168944,0.00419773,0.0298472,-0.0203981,0.176835,0.00530034,0.0325444,-0.023655,0.186686,0.00669777,0.0355581,-0.0272982,0.196248,0.00842661,0.0392841,-0.0314457,0.207352,0.0105854,0.0436815,-0.0361157,0.219279,0.0132458,0.0485272,-0.0412932,0.230728,0.0164736,0.0541574,-0.0470337,0.242994,0.0203715,0.0609479,-0.0535002,0.257042,0.0250953,0.0685228,-0.0605409,0.27102,0.0306856,0.0768042,-0.0680553,0.28406,0.037193,0.0864844,-0.0765011,0.299186,0.0449795,0.0969415,-0.0852674,0.3132,0.0538316,0.108478,-0.0947333,0.327138,0.0641149,0.121705,-0.10481,0.342345,0.0759185,0.136743,-0.115474,0.358472,0.0894116,0.152986,-0.126536,0.374067,0.104562,0.170397,-0.138061,0.388267,0.121632,0.191392,-0.150203,0.406467,0.140996,0.211566,-0.161751,0.418641,0.161696,0.233567,-0.173407,0.430418,0.184557,0.257769,-0.185397,0.44277,0.210092,0.28531,-0.197048,0.457191,0.237827,0.311726,-0.20784,0.464712,0.267253,0.340537,-0.218345,0.472539,0.299332,0.372921,-0.228306,0.482331,0.333988,0.402924,-0.236665,0.484378,0.369722,0.434475,-0.244097,0.484717,0.407836,0.469736,-0.250547,0.487093,0.448465,0.505045,-0.25511,0.485575,0.490263,0.540262,-0.258444,0.481225,0.534495,0.576347,-0.259903,0.473481,0.579451,0.608656,-0.259572,0.4603,0.625604,0.646679,-0.257908,0.450341,0.674511,0.679902,-0.253663,0.431561,0.723269,0.714159,-0.247419,0.412684,0.773263,0.745345,-0.239122,0.389388,0.824182,0.778248,-0.228837,0.365361,0.876634,0.807208,-0.216197,0.337667,0.92945,0.835019,-0.201772,0.307197,0.985261,0.860261,-0.185291,0.274205,1.04299,0.877601,-0.165809,0.240178,1.09816,0.898211,-0.143897,0.207571,1.14694,0.915789,-0.119513,0.174904,1.19008,0.931831,-0.0932919,0.141423,1.2297,0.949244,-0.0656528,0.105603,1.26553,0.967527,-0.0370262,0.0679551,1.29986,0.984139,-0.00730117,0.0283133,1.33252,0.999713,0.0234648,-0.0121785,1.36397,0.0152135,-0.00000245447,0.122795,0.000000304092,0.0151652,-0.0000615778,0.122399,0.0000076292,0.0151181,-0.000245948,0.122023,0.0000304802,0.0151203,-0.000553394,0.12203,0.0000686634,0.015125,-0.000983841,0.122037,0.000122463,0.0151427,-0.00153774,0.12214,0.000192706,0.0151708,-0.0022103,0.122237,0.000281219,0.0152115,-0.00300741,0.12238,0.000390804,0.0152877,-0.00392494,0.1227,0.000526317,0.015412,-0.00496597,0.123244,0.00069443,0.0156201,-0.00613314,0.124228,0.00090547,0.0159658,-0.00744113,0.125945,0.0011732,0.0165674,-0.00892546,0.129098,0.00151888,0.017487,-0.010627,0.133865,0.00197007,0.018839,-0.0126043,0.140682,0.0025637,0.020554,-0.0148814,0.148534,0.00333637,0.0226727,-0.0175123,0.157381,0.00433738,0.0251879,-0.0205266,0.166685,0.00561664,0.0283635,-0.0240319,0.177796,0.00725563,0.0318694,-0.0279432,0.188251,0.00928811,0.0361044,-0.0324313,0.200038,0.011835,0.0406656,-0.0373527,0.210685,0.0149146,0.0463846,-0.0430132,0.224182,0.0187254,0.0525696,-0.0491013,0.23634,0.0232283,0.0598083,-0.0559175,0.250013,0.0286521,0.0679437,-0.0633657,0.263981,0.0350634,0.0771181,-0.0714602,0.278072,0.0425882,0.0881273,-0.0803502,0.29511,0.0514487,0.0996628,-0.0896903,0.309976,0.0615766,0.112702,-0.099644,0.325611,0.0732139,0.126488,-0.109829,0.339321,0.0862324,0.142625,-0.120859,0.35574,0.101275,0.15953,-0.131956,0.369845,0.117892,0.176991,-0.143145,0.38146,0.136205,0.199715,-0.155292,0.40052,0.157252,0.220787,-0.167066,0.412055,0.179966,0.243697,-0.178396,0.423133,0.204418,0.272106,-0.190433,0.439524,0.232141,0.297637,-0.201265,0.447041,0.261109,0.325273,-0.211834,0.454488,0.292627,0.357219,-0.221889,0.465004,0.326669,0.387362,-0.230729,0.468527,0.362426,0.423131,-0.23924,0.475836,0.401533,0.45543,-0.246067,0.475017,0.441902,0.493393,-0.251557,0.478017,0.484239,0.526253,-0.255571,0.4709,0.528586,0.560554,-0.257752,0.463167,0.574346,0.599306,-0.258076,0.456452,0.621655,0.634541,-0.256471,0.443725,0.670492,0.668907,-0.253283,0.428719,0.721943,0.705619,-0.247562,0.411348,0.772477,0.739034,-0.240626,0.388939,0.8264,0.771408,-0.231493,0.36425,0.881702,0.803312,-0.220125,0.337321,0.9385,0.828457,-0.206645,0.305364,0.997437,0.854819,-0.190664,0.273715,1.05693,0.878666,-0.171429,0.242218,1.11251,0.898404,-0.149235,0.209556,1.16398,0.917416,-0.12435,0.176863,1.21014,0.933133,-0.0972703,0.142775,1.25178,0.95066,-0.0683607,0.106735,1.29028,0.968589,-0.0378724,0.0681609,1.32703,0.984776,-0.00605712,0.0273966,1.36158,0.99994,0.0263276,-0.0138124,1.3943,0.00867437,-0.00000186005,0.0928979,0.000000173682,0.00864003,-0.0000466389,0.0925237,0.00000435505,0.00864593,-0.000186594,0.0925806,0.0000174322,0.00864095,-0.000419639,0.0924903,0.0000392862,0.00863851,-0.000746272,0.0924589,0.0000702598,0.00868531,-0.00116456,0.0929,0.000111188,0.00869667,-0.00167711,0.0928529,0.000163867,0.00874332,-0.00228051,0.0930914,0.00023104,0.00882709,-0.00297864,0.0935679,0.00031741,0.00898874,-0.00377557,0.0946165,0.000430186,0.00929346,-0.00469247,0.0967406,0.000580383,0.00978271,-0.00575491,0.100084,0.000783529,0.0105746,-0.00701514,0.105447,0.00106304,0.0116949,-0.00851797,0.112494,0.00144685,0.0130419,-0.0102757,0.119876,0.00196439,0.0148375,-0.012381,0.129034,0.00266433,0.0168725,-0.01482,0.137812,0.00358364,0.0193689,-0.0176563,0.147696,0.00478132,0.0222691,-0.0209211,0.157795,0.00631721,0.0256891,-0.0246655,0.168431,0.00826346,0.0294686,-0.0288597,0.178587,0.0106714,0.0340412,-0.0336441,0.190251,0.0136629,0.0393918,-0.039033,0.202999,0.0173272,0.0453947,-0.0450087,0.215655,0.0217448,0.0521936,-0.0515461,0.228686,0.0269941,0.0600279,-0.058817,0.242838,0.033272,0.0692398,-0.0667228,0.258145,0.0406457,0.0793832,-0.0752401,0.273565,0.0492239,0.0902297,-0.0841851,0.287735,0.0590105,0.102014,-0.0936479,0.301161,0.0702021,0.116054,-0.103967,0.317438,0.0832001,0.13191,-0.114622,0.334166,0.0977951,0.148239,-0.125452,0.348192,0.113985,0.165809,-0.136453,0.361094,0.131928,0.184616,-0.147648,0.373534,0.151811,0.207491,-0.159607,0.39101,0.174476,0.230106,-0.171119,0.402504,0.198798,0.257036,-0.182906,0.418032,0.225796,0.281172,-0.193605,0.425468,0.254027,0.312034,-0.204771,0.440379,0.285713,0.340402,-0.214988,0.445406,0.319196,0.370231,-0.224711,0.44968,0.35537,0.407105,-0.233516,0.460747,0.393838,0.439037,-0.240801,0.460624,0.433747,0.47781,-0.24762,0.465957,0.477234,0.510655,-0.251823,0.460054,0.52044,0.550584,-0.255552,0.459172,0.567853,0.585872,-0.257036,0.450311,0.615943,0.620466,-0.257535,0.437763,0.667693,0.660496,-0.255248,0.426639,0.718988,0.695578,-0.251141,0.409185,0.772503,0.732176,-0.244718,0.39015,0.827023,0.760782,-0.236782,0.362594,0.885651,0.79422,-0.225923,0.33711,0.943756,0.824521,-0.213855,0.308272,1.00874,0.854964,-0.197723,0.278529,1.06764,0.878065,-0.179209,0.246208,1.12836,0.899834,-0.157569,0.21329,1.18318,0.918815,-0.133206,0.181038,1.23161,0.934934,-0.106545,0.146993,1.27644,0.952115,-0.0780574,0.111175,1.31842,0.96906,-0.0478279,0.0728553,1.35839,0.985178,-0.0160014,0.032579,1.39697,1.00039,0.0173126,-0.0095256,1.43312,0.00384146,-0.00000124311,0.0613583,0.0000000778271,0.00390023,-0.0000314043,0.0622919,0.00000196626,0.00389971,-0.000125622,0.0622632,0.00000787379,0.00389491,-0.000282352,0.0620659,0.00001778,0.00391618,-0.000502512,0.0624687,0.0000320918,0.00392662,-0.000784458,0.0625113,0.0000515573,0.00396053,-0.00112907,0.0628175,0.0000778668,0.00401911,-0.00153821,0.0633286,0.000113811,0.00414994,-0.0020208,0.0646443,0.00016445,0.00441223,-0.00260007,0.0673886,0.000237734,0.00484427,-0.0033097,0.0716528,0.000345929,0.00549109,-0.00418966,0.0774998,0.000505987,0.00636293,-0.00527331,0.0844758,0.000739208,0.00746566,-0.00660428,0.0921325,0.00107347,0.00876625,-0.00818826,0.0997067,0.00153691,0.0103125,-0.0100811,0.107433,0.00217153,0.0123309,-0.0123643,0.117088,0.00303427,0.0146274,-0.0150007,0.126438,0.00416018,0.0172295,-0.0180531,0.135672,0.00561513,0.0204248,-0.0215962,0.146244,0.007478,0.0241597,-0.0256234,0.157481,0.00981046,0.0284693,-0.0302209,0.169125,0.0127148,0.033445,-0.0353333,0.181659,0.0162453,0.0391251,-0.0410845,0.1944,0.0205417,0.0454721,-0.0473451,0.207082,0.0256333,0.0530983,-0.0542858,0.221656,0.0317036,0.0615356,-0.0618384,0.236036,0.0388319,0.0703363,-0.0697631,0.248398,0.046974,0.0810391,-0.0784757,0.263611,0.0565246,0.0920144,-0.0873488,0.275857,0.0671724,0.105584,-0.0973652,0.292555,0.0798105,0.119506,-0.107271,0.306333,0.0935945,0.134434,-0.117608,0.318888,0.109106,0.153399,-0.128938,0.337552,0.127074,0.171258,-0.139944,0.349955,0.14643,0.191059,-0.151288,0.361545,0.168,0.215069,-0.163018,0.378421,0.192082,0.237838,-0.174226,0.38879,0.217838,0.266965,-0.186063,0.405857,0.246931,0.292827,-0.196909,0.414146,0.277505,0.324352,-0.207473,0.426955,0.310711,0.354427,-0.217713,0.433429,0.346794,0.389854,-0.227183,0.443966,0.385237,0.420749,-0.235131,0.44471,0.424955,0.459597,-0.242786,0.451729,0.468446,0.495316,-0.248767,0.45072,0.513422,0.534903,-0.253351,0.450924,0.560618,0.572369,-0.256277,0.445266,0.609677,0.612383,-0.2576,0.438798,0.660995,0.644037,-0.256931,0.421693,0.713807,0.686749,-0.254036,0.4109,0.767616,0.719814,-0.249785,0.390151,0.82533,0.754719,-0.244283,0.367847,0.888311,0.792022,-0.235076,0.345013,0.948177,0.822404,-0.225061,0.316193,1.01661,0.853084,-0.211113,0.287013,1.08075,0.879871,-0.19449,0.255424,1.14501,0.901655,-0.174023,0.222879,1.20203,0.919957,-0.1509,0.18989,1.25698,0.938412,-0.124923,0.15606,1.30588,0.953471,-0.0968139,0.120512,1.3529,0.970451,-0.066734,0.0828515,1.3986,0.985522,-0.034734,0.0424458,1.44148,1.00099,-0.00102222,0.000678929,1.48398,0.000965494,-0.000000627338,0.0306409,0.0000000197672,0.00099168,-0.0000158573,0.0314638,0.000000499803,0.000991068,-0.0000634012,0.031363,0.00000200682,0.000974567,-0.00014144,0.03036,0.00000457312,0.000998079,-0.000252812,0.031496,0.00000860131,0.00102243,-0.000396506,0.0319955,0.0000148288,0.00107877,-0.000577593,0.0331376,0.0000249141,0.00121622,-0.000816816,0.0359396,0.0000423011,0.0014455,-0.00113761,0.0399652,0.0000724613,0.00178791,-0.00156959,0.0450556,0.000123929,0.00225668,-0.00214064,0.0508025,0.000208531,0.00285627,-0.00287655,0.0568443,0.000341969,0.0035991,-0.00380271,0.0630892,0.000544158,0.00455524,-0.00496264,0.0702204,0.000842423,0.00569143,-0.0063793,0.0773426,0.00126704,0.00716928,-0.00813531,0.0860839,0.00186642,0.00885307,-0.0101946,0.0944079,0.00267014,0.0109316,-0.0126386,0.103951,0.00374033,0.0133704,-0.0154876,0.113786,0.0051304,0.0161525,-0.0187317,0.123477,0.00688858,0.0194267,-0.0224652,0.133986,0.00910557,0.0230967,-0.0265976,0.143979,0.0118074,0.0273627,-0.0312848,0.154645,0.0151266,0.0323898,-0.0365949,0.166765,0.0191791,0.0379225,-0.0422914,0.177932,0.0239236,0.0447501,-0.0487469,0.19167,0.0296568,0.0519391,-0.0556398,0.203224,0.0362924,0.0599464,-0.0631646,0.215652,0.0440585,0.0702427,-0.0714308,0.232089,0.0531619,0.0806902,-0.0800605,0.245258,0.0634564,0.0923194,-0.0892815,0.258609,0.0752481,0.106938,-0.09931,0.276654,0.0888914,0.121238,-0.109575,0.289847,0.104055,0.138817,-0.120461,0.307566,0.121266,0.15595,-0.131209,0.320117,0.139944,0.178418,-0.143049,0.339677,0.161591,0.197875,-0.154074,0.349886,0.184303,0.224368,-0.166307,0.369352,0.210669,0.252213,-0.178051,0.386242,0.238895,0.277321,-0.189335,0.395294,0.269182,0.310332,-0.200683,0.412148,0.302508,0.338809,-0.210856,0.418266,0.337264,0.372678,-0.220655,0.428723,0.374881,0.405632,-0.230053,0.433887,0.415656,0.442293,-0.237993,0.439911,0.457982,0.477256,-0.244897,0.440175,0.502831,0.515592,-0.250657,0.441079,0.550277,0.550969,-0.255459,0.435219,0.601102,0.592883,-0.257696,0.432882,0.651785,0.629092,-0.259894,0.421054,0.708961,0.672033,-0.258592,0.41177,0.763806,0.709147,-0.256525,0.395267,0.824249,0.745367,-0.254677,0.375013,0.8951,0.784715,-0.247892,0.353906,0.959317,0.818107,-0.240162,0.327801,1.03153,0.847895,-0.229741,0.298821,1.10601,0.879603,-0.213084,0.269115,1.164,0.902605,-0.195242,0.236606,1.22854,0.922788,-0.174505,0.203442,1.29017,0.944831,-0.150169,0.169594,1.34157,0.959656,-0.124099,0.135909,1.3956,0.972399,-0.0960626,0.0990563,1.45128,0.986549,-0.0657097,0.0602348,1.50312,1.00013,-0.0333558,0.0186694,1.55364,0.00000619747,-0.0000001,0.00778326,0.0000000000796756,0.0000000237499,-0.0000000999999,0.0000282592,0.000000000114596,0.00000100292,-0.00000166369,0.000250354,0.00000000677492,0.00000350752,-0.00000637769,0.000357289,0.0000000631655,0.00000826445,-0.0000174689,0.000516179,0.00000031851,0.0000242481,-0.0000450868,0.0010223,0.00000130577,0.0000455631,-0.000089044,0.00144302,0.00000374587,0.0000971222,-0.000178311,0.00241912,0.0000102584,0.000171403,-0.000313976,0.00354938,0.0000236481,0.000292747,-0.000520026,0.00513765,0.0000496014,0.000789827,-0.00118187,0.0238621,0.000139056,0.00114093,-0.00171827,0.0286691,0.000244093,0.00176119,-0.00249667,0.0368565,0.000420623,0.0022233,-0.00333742,0.0400469,0.00065673,0.00343382,-0.00481976,0.0535751,0.00109323,0.00427602,-0.00600755,0.057099,0.00155268,0.00461435,-0.00737637,0.0551084,0.00215031,0.00695698,-0.00971401,0.0715767,0.00316529,0.00867619,-0.0120943,0.0793314,0.00436995,0.0106694,-0.0148202,0.0869391,0.0058959,0.0140351,-0.0183501,0.101572,0.00798757,0.0168939,-0.022006,0.11018,0.0104233,0.020197,-0.0261568,0.119041,0.0134167,0.0254702,-0.0312778,0.135404,0.0173009,0.0298384,-0.0362469,0.1437,0.0215428,0.035159,-0.042237,0.15512,0.0268882,0.0427685,-0.0488711,0.17128,0.033235,0.0494848,-0.0557997,0.181813,0.0404443,0.0592394,-0.0635578,0.198745,0.0490043,0.0681463,-0.071838,0.210497,0.0588239,0.0804753,-0.0809297,0.228864,0.0702835,0.0942205,-0.0906488,0.247008,0.0834012,0.106777,-0.100216,0.258812,0.0975952,0.124471,-0.110827,0.278617,0.114162,0.138389,-0.121193,0.287049,0.131983,0.159543,-0.13253,0.307151,0.152541,0.176432,-0.143611,0.31564,0.174673,0.201723,-0.15548,0.33538,0.199842,0.229721,-0.167166,0.355256,0.227097,0.250206,-0.178238,0.360047,0.256014,0.282118,-0.189905,0.378761,0.28855,0.312821,-0.201033,0.39181,0.323348,0.341482,-0.211584,0.397716,0.360564,0.377368,-0.221314,0.410141,0.400004,0.418229,-0.230474,0.423485,0.442371,0.444881,-0.239443,0.418874,0.488796,0.488899,-0.245987,0.427545,0.535012,0.520317,-0.253948,0.422147,0.589678,0.568566,-0.256616,0.42719,0.637683,0.599607,-0.26376,0.415114,0.703363,0.64222,-0.268687,0.408715,0.771363,0.685698,-0.2694,0.399722,0.83574,0.732327,-0.266642,0.388651,0.897764,0.769873,-0.267712,0.369198,0.983312,0.806733,-0.263479,0.346802,1.06222,0.843466,-0.254575,0.321368,1.13477,0.873008,-0.242749,0.29211,1.20712,0.908438,-0.22725,0.262143,1.27465,0.936321,-0.207621,0.228876,1.33203,0.950353,-0.187932,0.19484,1.40439,0.96442,-0.165154,0.163178,1.4732,0.979856,-0.139302,0.127531,1.53574,0.982561,-0.11134,0.0903457,1.59982,0.996389,-0.0808124,0.0489007,1.6577],Q=[1,0,0,0,1,0.000000000000000000000000000000791421,0,0,1,0.00000000000000000000000104392,0,0,1,0.00000000000000000000349405,0,0,1,0.00000000000000000109923,0,0,1,0.0000000000000000947414,0,0,1,0.00000000000000359627,0,0,1,0.0000000000000772053,0,0,1,0.00000000000108799,0,0,1,0.0000000000110655,0,0,1,0.0000000000865818,0,0,0.999998,0.000000000545037,0,0,0.999994,0.00000000285095,0,0,0.999989,0.0000000126931,0,0,0.999973,0.0000000489938,0,0,0.999947,0.000000166347,0,0,0.999894,0.000000502694,0,0,0.999798,0.00000136532,0,0,0.999617,0.00000335898,0,0,0.999234,0.00000752126,0,0,0.998258,0.0000152586,0,0,0.99504,0.0000266207,0,0,0.980816,0.0000236802,0,0,0.967553,0.00000207684,0,0,0.966877,0.00000403733,0,0,0.965752,0.00000741174,0,0,0.96382,0.0000127746,0,0,0.960306,0.0000202792,0,0,0.953619,0.0000280232,0,0,0.941103,0.0000278816,0,0,0.926619,0.0000160221,0,0,0.920983,0.0000235164,0,0,0.912293,0.0000311924,0,0.0158731,0.899277,0.0000348118,0,0.0476191,0.880884,0.000026041,0,0.0793651,0.870399,0.0000338726,0,0.111111,0.856138,0.0000392906,0,0.142857,0.837436,0.0000372874,0,0.174603,0.820973,0.0000392558,0,0.206349,0.803583,0.0000434658,0,0.238095,0.782168,0.000040256,0,0.269841,0.764107,0.0000448159,0,0.301587,0.743092,0.0000457627,0,0.333333,0.721626,0.0000455314,0,0.365079,0.700375,0.0000477335,0,0.396825,0.677334,0.0000461072,0,0.428571,0.655702,0.0000484393,0,0.460317,0.632059,0.0000464583,0,0.492064,0.610125,0.0000483923,0,0.52381,0.58653,0.0000464342,0,0.555556,0.564508,0.0000477033,0,0.587302,0.541405,0.0000459263,0,0.619048,0.519556,0.000046412,0,0.650794,0.497292,0.0000448913,0,0.68254,0.475898,0.0000445789,0,0.714286,0.454722,0.0000433496,0,0.746032,0.434042,0.0000423054,0,0.777778,0.414126,0.0000413737,0,0.809524,0.394387,0.0000397265,0,0.84127,0.375841,0.0000390709,0,0.873016,0.357219,0.0000369938,0,0.904762,0.340084,0.0000365618,0,0.936508,0.322714,0.0000342533,0,0.968254,0.306974,0.0000339596,0,1,1,0.00000000000000000101524,0,0,1,0.0000000000000000010292,0,0,1,0.00000000000000000130908,0,0,1,0.00000000000000000473331,0,0,1,0.0000000000000000625319,0,0,1,0.00000000000000107932,0,0,1,0.0000000000000163779,0,0,1,0.000000000000203198,0,0,1,0.00000000000204717,0,0,0.999999,0.0000000000168995,0,0,0.999998,0.000000000115855,0,0,0.999996,0.00000000066947,0,0,0.999991,0.00000000330863,0,0,0.999983,0.0000000141737,0,0,0.999968,0.0000000532626,0,0,0.99994,0.000000177431,0,0,0.999891,0.000000528835,0,0,0.999797,0.00000142169,0,0,0.999617,0.00000347057,0,0,0.999227,0.0000077231,0,0,0.998239,0.0000155753,0,0,0.994937,0.0000268495,0,0,0.980225,0.0000213742,0,0,0.967549,0.0000021631,0,0,0.966865,0.00000417989,0,0,0.965739,0.00000763341,0,0,0.963794,0.0000130892,0,0,0.960244,0.0000206456,0,0,0.953495,0.0000282016,0,0.000148105,0.940876,0.0000271581,0,0.002454,0.926569,0.0000164159,0,0.00867491,0.920905,0.0000239521,0,0.01956,0.912169,0.0000315127,0,0.035433,0.899095,0.0000346626,0,0.056294,0.882209,0.0000290223,0,0.0818191,0.870272,0.0000342992,0,0.111259,0.855977,0.0000394164,0,0.142857,0.837431,0.0000372343,0,0.174603,0.820826,0.0000396691,0,0.206349,0.803408,0.0000435395,0,0.238095,0.782838,0.0000419579,0,0.269841,0.763941,0.0000450953,0,0.301587,0.742904,0.0000455847,0,0.333333,0.721463,0.0000458833,0,0.365079,0.700197,0.0000477159,0,0.396825,0.677501,0.0000470641,0,0.428571,0.655527,0.0000484732,0,0.460317,0.6324,0.0000476834,0,0.492064,0.609964,0.0000484213,0,0.52381,0.586839,0.0000475541,0,0.555556,0.564353,0.0000476951,0,0.587302,0.541589,0.0000467611,0,0.619048,0.519413,0.0000463493,0,0.650794,0.497337,0.0000453994,0,0.68254,0.475797,0.0000445308,0,0.714286,0.454659,0.0000435787,0,0.746032,0.434065,0.0000424839,0,0.777778,0.414018,0.000041436,0,0.809524,0.39455,0.0000401902,0,0.84127,0.375742,0.0000390813,0,0.873016,0.357501,0.0000377116,0,0.904762,0.339996,0.000036535,0,0.936508,0.323069,0.0000351265,0,0.968254,0.306897,0.0000339112,0,1,1,0.0000000000000010396,0,0,1,0.00000000000000104326,0,0,1,0.00000000000000110153,0,0,1,0.00000000000000144668,0,0,1,0.0000000000000034528,0,0,1,0.0000000000000175958,0,0,1,0.00000000000012627,0,0,1,0.000000000000936074,0,0,1,0.00000000000645742,0,0,0.999998,0.0000000000401228,0,0,0.999997,0.000000000222338,0,0,0.999995,0.0000000010967,0,0,0.999991,0.00000000482132,0,0,0.999981,0.0000000189434,0,0,0.999967,0.0000000667716,0,0,0.999938,0.000000212066,0,0,0.999886,0.00000060977,0,0,0.999792,0.00000159504,0,0,0.999608,0.00000381191,0,0,0.999209,0.00000833727,0,0,0.998179,0.0000165288,0,0,0.994605,0.0000274387,0,0,0.979468,0.0000167316,0,0,0.967529,0.00000242877,0,0,0.966836,0.00000461696,0,0,0.96569,0.00000830977,0,0,0.963706,0.0000140427,0,0.00000244659,0.960063,0.0000217353,0,0.000760774,0.953113,0.0000286606,0,0.00367261,0.940192,0.0000247691,0,0.00940263,0.927731,0.0000195814,0,0.018333,0.920669,0.0000252531,0,0.0306825,0.911799,0.0000324277,0,0.0465556,0.89857,0.0000340982,0,0.0659521,0.883283,0.0000319622,0,0.0887677,0.86989,0.000035548,0,0.114784,0.855483,0.0000397143,0,0.143618,0.837987,0.0000391665,0,0.174606,0.820546,0.0000411306,0,0.206349,0.802878,0.0000436753,0,0.238095,0.783402,0.0000444,0,0.269841,0.763439,0.0000458726,0,0.301587,0.742925,0.0000467097,0,0.333333,0.721633,0.0000478887,0,0.365079,0.69985,0.0000481251,0,0.396825,0.67783,0.0000491811,0,0.428571,0.655126,0.0000488199,0,0.460318,0.632697,0.0000496025,0,0.492064,0.609613,0.000048829,0,0.52381,0.587098,0.0000492754,0,0.555556,0.564119,0.0000482625,0,0.587302,0.541813,0.0000482807,0,0.619048,0.519342,0.0000471552,0,0.650794,0.497514,0.0000466765,0,0.68254,0.475879,0.0000455582,0,0.714286,0.454789,0.0000446007,0,0.746032,0.434217,0.0000435382,0,0.777778,0.414086,0.0000421753,0,0.809524,0.394744,0.0000412093,0,0.84127,0.375782,0.0000396634,0,0.873016,0.357707,0.0000386419,0,0.904762,0.340038,0.0000370345,0,0.936508,0.323284,0.0000359725,0,0.968254,0.306954,0.00003436,0,1,1,0.0000000000000599567,0,0,1,0.0000000000000600497,0,0,1,0.0000000000000614839,0,0,1,0.0000000000000686641,0,0,1,0.0000000000000972658,0,0,1,0.000000000000221271,0,0,1,0.000000000000833195,0,0,1,0.00000000000403601,0,0,0.999999,0.0000000000206001,0,0,0.999998,0.000000000101739,0,0,0.999997,0.000000000470132,0,0,0.999993,0.00000000200436,0,0,0.999988,0.00000000783682,0,0,0.999979,0.0000000280338,0,0,0.999962,0.0000000917033,0,0,0.999933,0.000000274514,0,0,0.999881,0.000000753201,0,0,0.999783,0.00000189826,0,0,0.999594,0.00000440279,0,0,0.999178,0.0000093898,0,0,0.998073,0.0000181265,0,0,0.993993,0.0000280487,0,0,0.979982,0.0000149422,0,0,0.968145,0.00000378481,0,0,0.966786,0.0000053771,0,0,0.965611,0.00000947508,0,0.0000388934,0.963557,0.0000156616,0,0.0009693,0.959752,0.0000235144,0,0.00370329,0.952461,0.0000291568,0,0.00868428,0.940193,0.0000240102,0,0.0161889,0.929042,0.0000231235,0,0.0263948,0.920266,0.0000273968,0,0.0394088,0.911178,0.0000337915,0,0.0552818,0.897873,0.0000333629,0,0.0740138,0.884053,0.0000351405,0,0.0955539,0.869455,0.0000378034,0,0.119795,0.854655,0.0000399378,0,0.14656,0.838347,0.0000419108,0,0.175573,0.820693,0.0000440831,0,0.206388,0.802277,0.0000445599,0,0.238095,0.783634,0.0000472691,0,0.269841,0.763159,0.0000476984,0,0.301587,0.742914,0.0000491487,0,0.333333,0.721662,0.0000502312,0,0.365079,0.699668,0.0000502817,0,0.396825,0.677839,0.000051406,0,0.428571,0.655091,0.0000511095,0,0.460317,0.632665,0.0000516067,0,0.492064,0.609734,0.0000512255,0,0.52381,0.587043,0.0000510263,0,0.555556,0.564298,0.000050565,0,0.587302,0.541769,0.0000497951,0,0.619048,0.519529,0.0000492698,0,0.650794,0.497574,0.0000482066,0,0.68254,0.476028,0.0000473689,0,0.714286,0.454961,0.0000461941,0,0.746032,0.434341,0.0000450618,0,0.777778,0.414364,0.0000438355,0,0.809524,0.394832,0.0000424196,0,0.84127,0.376109,0.0000412563,0,0.873016,0.35779,0.0000396226,0,0.904762,0.340379,0.0000384886,0,0.936508,0.323385,0.0000368214,0,0.968254,0.307295,0.0000356636,0,1,1,0.00000000000106465,0,0,1,0.00000000000106555,0,0,1,0.00000000000107966,0,0,1,0.00000000000114601,0,0,1,0.00000000000137123,0,0,1,0.0000000000021243,0,0,0.999999,0.00000000000489653,0,0,0.999999,0.0000000000160283,0,0,0.999998,0.000000000062269,0,0,0.999997,0.000000000251859,0,0,0.999996,0.000000000996192,0,0,0.999992,0.00000000374531,0,0,0.999986,0.0000000132022,0,0,0.999975,0.0000000433315,0,0,0.999959,0.000000131956,0,0,0.999927,0.000000372249,0,0,0.999871,0.000000972461,0,0,0.999771,0.00000235343,0,0,0.999572,0.0000052768,0,0,0.999133,0.0000109237,0,0,0.997912,0.0000203675,0,0,0.993008,0.0000279396,0,0,0.980645,0.0000139604,0,0,0.970057,0.00000646596,0,0,0.966717,0.0000065089,0,0.0000474145,0.965497,0.0000111863,0,0.00089544,0.96334,0.0000179857,0,0.0032647,0.959294,0.0000259045,0,0.0075144,0.951519,0.0000292327,0,0.0138734,0.940517,0.0000249769,0,0.0224952,0.93014,0.000026803,0,0.0334828,0.91972,0.0000303656,0,0.0468973,0.910294,0.0000353323,0,0.0627703,0.897701,0.0000351002,0,0.0811019,0.884522,0.0000388104,0,0.10186,0.869489,0.0000412932,0,0.124985,0.853983,0.0000415781,0,0.150372,0.838425,0.0000454066,0,0.177868,0.820656,0.0000471624,0,0.207245,0.801875,0.0000475243,0,0.238143,0.783521,0.0000505621,0,0.269841,0.763131,0.000050721,0,0.301587,0.74261,0.0000523293,0,0.333333,0.72148,0.0000528699,0,0.365079,0.699696,0.0000538677,0,0.396825,0.677592,0.0000539255,0,0.428571,0.65525,0.0000546367,0,0.460317,0.632452,0.0000541348,0,0.492064,0.609903,0.0000544976,0,0.52381,0.586928,0.0000536201,0,0.555556,0.564464,0.0000535185,0,0.587302,0.541801,0.0000524949,0,0.619048,0.519681,0.000051812,0,0.650794,0.497685,0.0000507687,0,0.68254,0.47622,0.0000496243,0,0.714286,0.455135,0.0000485714,0,0.746032,0.4346,0.0000471847,0,0.777778,0.414564,0.0000459294,0,0.809524,0.395165,0.0000444705,0,0.84127,0.376333,0.0000430772,0,0.873016,0.358197,0.0000416229,0,0.904762,0.34064,0.0000401019,0,0.936508,0.323816,0.0000386623,0,0.968254,0.307581,0.0000370933,0,1,1,0.00000000000991541,0,0,1,0.00000000000992077,0,0,1,0.0000000000100041,0,0,1,0.000000000010385,0,0,1,0.0000000000115777,0,0,1,0.0000000000150215,0,0,0.999999,0.0000000000254738,0,0,0.999999,0.0000000000598822,0,0,0.999998,0.000000000179597,0,0,0.999997,0.000000000602367,0,0,0.999994,0.00000000206835,0,0,0.99999,0.00000000694952,0,0,0.999984,0.0000000223363,0,0,0.999972,0.0000000678578,0,0,0.999952,0.000000193571,0,0,0.999919,0.000000516594,0,0,0.99986,0.00000128739,0,0,0.999753,0.00000299298,0,0,0.999546,0.00000648258,0,0,0.999074,0.0000129985,0,0,0.997671,0.0000232176,0,0,0.991504,0.0000256701,0,0,0.981148,0.0000131141,0,0,0.971965,0.00000869048,0,0.0000280182,0.966624,0.00000808301,0,0.000695475,0.965344,0.0000135235,0,0.00265522,0.963048,0.0000210592,0,0.00622975,0.958673,0.0000287473,0,0.0116234,0.950262,0.0000281379,0,0.018976,0.940836,0.0000271089,0,0.0283844,0.930996,0.000030926,0,0.0399151,0.919848,0.0000348359,0,0.0536063,0.909136,0.0000366092,0,0.0694793,0.897554,0.0000384162,0,0.0875342,0.884691,0.0000430971,0,0.107749,0.869414,0.0000447803,0,0.130087,0.853462,0.0000452858,0,0.154481,0.838187,0.0000495769,0,0.180833,0.820381,0.0000502709,0,0.209005,0.801844,0.0000522713,0,0.238791,0.783061,0.0000541505,0,0.269869,0.763205,0.0000553712,0,0.301587,0.742362,0.0000564909,0,0.333333,0.721393,0.0000572646,0,0.365079,0.699676,0.0000581012,0,0.396825,0.677395,0.000058096,0,0.428571,0.655208,0.0000585766,0,0.460317,0.632451,0.0000583602,0,0.492064,0.609839,0.0000580234,0,0.52381,0.587093,0.0000577161,0,0.555556,0.564467,0.0000568447,0,0.587302,0.542043,0.0000563166,0,0.619048,0.519826,0.000055156,0,0.650794,0.497952,0.0000541682,0,0.68254,0.476477,0.0000528971,0,0.714286,0.455412,0.0000514952,0,0.746032,0.434926,0.0000502222,0,0.777778,0.4149,0.0000485779,0,0.809524,0.395552,0.0000472242,0,0.84127,0.376712,0.0000454891,0,0.873016,0.358622,0.0000440924,0,0.904762,0.341048,0.0000422984,0,0.936508,0.324262,0.0000408582,0,0.968254,0.308013,0.0000390839,0,1,1,0.0000000000613913,0,0,1,0.0000000000614145,0,0,1,0.0000000000617708,0,0,1,0.0000000000633717,0,0,1,0.0000000000681648,0,0,1,0.0000000000808291,0,0,1,0.000000000114608,0,0,0.999998,0.000000000210507,0,0,0.999997,0.000000000499595,0,0,0.999995,0.00000000139897,0,0,0.999994,0.00000000419818,0,0,0.999988,0.0000000127042,0,0,0.999979,0.0000000375153,0,0,0.999965,0.000000106206,0,0,0.999945,0.000000285381,0,0,0.999908,0.000000723611,0,0,0.999846,0.0000017255,0,0,0.999733,0.00000386104,0,0,0.999511,0.00000808493,0,0,0.998993,0.0000156884,0,0,0.997326,0.0000265538,0,0,0.989706,0.0000206466,0,0,0.981713,0.0000130756,0,0.0000070005,0.973636,0.0000106473,0,0.000464797,0.966509,0.000010194,0,0.00201743,0.965149,0.0000165881,0,0.00497549,0.962669,0.0000249147,0,0.00953262,0.95786,0.0000317449,0,0.0158211,0.949334,0.0000281045,0,0.0239343,0.941041,0.0000303263,0,0.0339372,0.931575,0.0000356754,0,0.0458738,0.920102,0.0000397075,0,0.059772,0.908002,0.0000384886,0,0.075645,0.897269,0.000043027,0,0.0934929,0.884559,0.0000479925,0,0.113302,0.869161,0.000048246,0,0.135045,0.853342,0.0000509505,0,0.158678,0.837633,0.0000542846,0,0.184136,0.820252,0.0000554139,0,0.211325,0.801872,0.0000581412,0,0.240113,0.782418,0.0000585535,0,0.270306,0.7631,0.0000610923,0,0.301594,0.742183,0.0000613678,0,0.333333,0.721098,0.0000627275,0,0.365079,0.699512,0.0000629413,0,0.396825,0.677372,0.0000636351,0,0.428571,0.655059,0.0000633555,0,0.460317,0.632567,0.0000636513,0,0.492064,0.609784,0.0000628965,0,0.52381,0.587237,0.0000625546,0,0.555556,0.564525,0.0000615825,0,0.587302,0.542181,0.0000605048,0,0.619048,0.520017,0.0000596329,0,0.650794,0.498204,0.0000581516,0,0.68254,0.476742,0.0000569186,0,0.714286,0.455803,0.0000553833,0,0.746032,0.435251,0.0000537807,0,0.777778,0.415374,0.0000522025,0,0.809524,0.395921,0.0000503421,0,0.84127,0.377253,0.0000488211,0,0.873016,0.359021,0.0000468234,0,0.904762,0.341637,0.0000453269,0,0.936508,0.3247,0.0000433014,0,0.968254,0.308625,0.0000418007,0,1,1,0.000000000286798,0,0,1,0.000000000286877,0,0,1,0.000000000288094,0,0,1,0.000000000293506,0,0,1,0.000000000309262,0,0,0.999999,0.000000000348593,0,0,0.999999,0.000000000444582,0,0,0.999998,0.000000000688591,0,0,0.999996,0.00000000134391,0,0,0.999993,0.00000000317438,0,0,0.999989,0.00000000835609,0,0,0.999983,0.0000000228677,0,0,0.999974,0.0000000623361,0,0,0.999959,0.000000165225,0,0,0.999936,0.000000419983,0,0,0.999896,0.00000101546,0,0,0.99983,0.00000232376,0,0,0.999709,0.0000050156,0,0,0.999469,0.000010167,0,0,0.998886,0.0000190775,0,0,0.996819,0.0000300511,0,0,0.988837,0.0000185092,0,0.000000168222,0.982178,0.0000134622,0,0.000259622,0.975017,0.0000125961,0,0.00142595,0.967101,0.000013507,0,0.00382273,0.964905,0.0000205003,0,0.00764164,0.96218,0.000029546,0,0.0130121,0.956821,0.0000343738,0,0.0200253,0.948829,0.0000305063,0,0.0287452,0.941092,0.0000346487,0,0.039218,0.931883,0.0000412061,0,0.0514748,0.920211,0.0000444651,0,0.0655351,0.907307,0.0000431252,0,0.0814082,0.89684,0.0000490382,0,0.0990939,0.884119,0.000053334,0,0.118583,0.869148,0.000054114,0,0.139856,0.853377,0.0000578536,0,0.162882,0.836753,0.0000592285,0,0.187615,0.820063,0.0000622787,0,0.213991,0.801694,0.0000645492,0,0.241918,0.782116,0.000065353,0,0.271267,0.762673,0.0000674344,0,0.301847,0.742133,0.0000682788,0,0.333333,0.720779,0.0000691959,0,0.365079,0.699386,0.0000696817,0,0.396826,0.67732,0.0000699583,0,0.428572,0.654888,0.0000698447,0,0.460318,0.632499,0.0000694063,0,0.492064,0.609825,0.0000691612,0,0.52381,0.587287,0.0000681576,0,0.555556,0.564743,0.0000674138,0,0.587302,0.542409,0.0000661617,0,0.619048,0.520282,0.0000647785,0,0.650794,0.498506,0.0000633836,0,0.68254,0.477102,0.0000615905,0,0.714286,0.456167,0.0000601013,0,0.746032,0.435728,0.0000581457,0,0.777778,0.415809,0.0000564215,0,0.809524,0.396517,0.0000544997,0,0.84127,0.377737,0.0000525061,0,0.873016,0.359698,0.0000506831,0,0.904762,0.342164,0.000048568,0,0.936508,0.325417,0.0000467826,0,0.968254,0.309186,0.0000446736,0,1,1,0.00000000109018,0,0,1,0.0000000010904,0,0,1,0.00000000109393,0,0,1,0.0000000011095,0,0,1,0.000000001154,0,0,1,0.00000000126089,0,0,0.999999,0.0000000015059,0,0,0.999997,0.00000000207899,0,0,0.999994,0.00000000348164,0,0,0.999993,0.00000000705728,0,0,0.999987,0.0000000163692,0,0,0.999981,0.0000000406033,0,0,0.999969,0.00000010245,0,0,0.999953,0.000000255023,0,0,0.999925,0.00000061511,0,0,0.999881,0.00000142218,0,0,0.99981,0.00000313086,0,0,0.99968,0.00000653119,0,0,0.999418,0.000012832,0,0,0.998748,0.0000232497,0,0,0.996066,0.0000329522,0,0,0.988379,0.0000179613,0,0.000108799,0.982567,0.0000143715,0,0.000921302,0.976097,0.0000148096,0,0.00280738,0.968475,0.0000178905,0,0.00596622,0.964606,0.0000253921,0,0.0105284,0.961564,0.0000348623,0,0.0165848,0.955517,0.0000357612,0,0.0242,0.948381,0.0000343493,0,0.03342,0.941095,0.0000405849,0,0.0442777,0.931923,0.0000475394,0,0.0567958,0.91996,0.0000484328,0,0.0709879,0.907419,0.0000502146,0,0.086861,0.89618,0.0000561654,0,0.104415,0.88337,0.0000587612,0,0.123643,0.869046,0.0000618057,0,0.144531,0.853278,0.0000657392,0,0.167057,0.836091,0.000066303,0,0.191188,0.819644,0.0000704445,0,0.216878,0.801246,0.0000714071,0,0.244062,0.782031,0.0000740093,0,0.272649,0.762066,0.000074685,0,0.302509,0.741964,0.0000766647,0,0.333442,0.720554,0.0000766328,0,0.365079,0.699098,0.0000777857,0,0.396826,0.677189,0.0000774633,0,0.428572,0.65484,0.0000776235,0,0.460318,0.632496,0.0000770316,0,0.492064,0.609908,0.0000762669,0,0.52381,0.587312,0.0000753972,0,0.555556,0.564938,0.0000739994,0,0.587302,0.542577,0.0000728382,0,0.619048,0.52062,0.000071112,0,0.650794,0.498819,0.0000694004,0,0.68254,0.477555,0.0000675575,0,0.714286,0.456568,0.0000653449,0,0.746032,0.436278,0.0000636068,0,0.777778,0.41637,0.0000613466,0,0.809524,0.397144,0.0000594177,0,0.84127,0.378412,0.0000570987,0,0.873016,0.360376,0.0000550419,0,0.904762,0.342906,0.0000527422,0,0.936508,0.326136,0.0000506544,0,0.968254,0.30997,0.0000484307,0,1,1,0.00000000354014,0,0,1,0.00000000354073,0,0,1,0.00000000354972,0,0,1,0.00000000358929,0,0,1,0.00000000370093,0,0,0.999999,0.00000000396194,0,0,0.999998,0.00000000453352,0,0,0.999997,0.00000000578828,0,0,0.999994,0.00000000863812,0,0,0.999991,0.0000000153622,0,0,0.999985,0.0000000316356,0,0,0.999977,0.0000000712781,0,0,0.999964,0.000000166725,0,0,0.999945,0.000000390501,0,0,0.999912,0.000000895622,0,0,0.999866,0.00000198428,0,0,0.999786,0.00000421038,0,0,0.999647,0.00000850239,0,0,0.999356,0.0000162059,0,0,0.998563,0.0000282652,0,0,0.994928,0.0000336309,0,0.0000244244,0.987999,0.0000178458,0,0.000523891,0.982893,0.0000159162,0,0.00194729,0.977044,0.0000178056,0,0.00451099,0.969972,0.0000230624,0,0.00835132,0.964237,0.0000313922,0,0.013561,0.960791,0.0000406145,0,0.0202056,0.954292,0.0000372796,0,0.0283321,0.948052,0.0000403199,0,0.0379739,0.940938,0.0000479537,0,0.0491551,0.931689,0.0000545292,0,0.0618918,0.91987,0.000054038,0,0.0761941,0.907665,0.0000589909,0,0.0920672,0.895281,0.0000642651,0,0.109511,0.882621,0.0000659707,0,0.12852,0.86873,0.0000709973,0,0.149085,0.853008,0.0000742221,0,0.171189,0.835944,0.0000761754,0,0.194809,0.818949,0.0000797052,0,0.21991,0.800951,0.0000812434,0,0.246447,0.781847,0.0000838075,0,0.274352,0.761649,0.000084501,0,0.303535,0.74152,0.0000860258,0,0.333857,0.720495,0.0000866233,0,0.365104,0.698742,0.0000868326,0,0.396826,0.677096,0.000087133,0,0.428572,0.654782,0.0000863497,0,0.460318,0.632335,0.0000860206,0,0.492064,0.610031,0.0000849337,0,0.52381,0.587457,0.0000838279,0,0.555556,0.56513,0.000082309,0,0.587302,0.542877,0.0000803542,0,0.619048,0.5209,0.0000786928,0,0.650794,0.499291,0.0000765171,0,0.68254,0.477971,0.0000744753,0,0.714286,0.457221,0.000072209,0,0.746032,0.436803,0.0000697448,0,0.777778,0.417083,0.0000675333,0,0.809524,0.397749,0.0000648058,0,0.84127,0.379177,0.0000625759,0,0.873016,0.361061,0.0000598584,0,0.904762,0.343713,0.0000575797,0,0.936508,0.326894,0.0000549999,0,0.968254,0.310816,0.0000527482,0,1,1,0.000000010153,0,0,1,0.0000000101544,0,0,1,0.0000000101751,0,0,1,0.0000000102662,0,0,1,0.000000010521,0,0,0.999999,0.0000000111049,0,0,0.999999,0.0000000123408,0,0,0.999996,0.000000014924,0,0,0.999992,0.0000000204471,0,0,0.999989,0.0000000326539,0,0,0.99998,0.0000000603559,0,0,0.999971,0.000000123936,0,0,0.999955,0.000000269058,0,0,0.999933,0.000000593604,0,0,0.999901,0.00000129633,0,0,0.999847,0.00000275621,0,0,0.999761,0.00000564494,0,0,0.999607,0.0000110485,0,0,0.999282,0.0000204388,0,0,0.99831,0.0000341084,0,0.00000022038,0.993288,0.0000294949,0,0.000242388,0.987855,0.0000192736,0,0.0012503,0.983167,0.0000182383,0,0.0032745,0.977908,0.0000218633,0,0.00646321,0.971194,0.0000290662,0,0.0109133,0.963867,0.0000386401,0,0.0166927,0.95982,0.0000462827,0,0.0238494,0.953497,0.0000420705,0,0.0324178,0.947621,0.0000477743,0,0.0424225,0.940611,0.0000568258,0,0.0538808,0.931174,0.0000618061,0,0.0668047,0.919919,0.0000627098,0,0.0812014,0.907856,0.0000694714,0,0.0970745,0.894509,0.0000735008,0,0.114424,0.881954,0.0000763369,0,0.133246,0.868309,0.0000821896,0,0.153534,0.852511,0.000083769,0,0.175275,0.835821,0.0000881615,0,0.198453,0.817981,0.0000896368,0,0.223042,0.800504,0.0000930906,0,0.249009,0.78141,0.0000945056,0,0.276304,0.761427,0.0000963605,0,0.304862,0.74094,0.0000968088,0,0.334584,0.720233,0.0000981481,0,0.365322,0.698592,0.0000979122,0,0.396826,0.676763,0.0000981057,0,0.428571,0.654808,0.0000973956,0,0.460318,0.632326,0.0000962619,0,0.492064,0.610049,0.0000952996,0,0.52381,0.58763,0.0000933334,0,0.555556,0.565261,0.0000917573,0,0.587302,0.543244,0.0000896636,0,0.619048,0.521273,0.0000873304,0,0.650794,0.499818,0.0000852648,0,0.68254,0.478536,0.0000823961,0,0.714286,0.457826,0.000079939,0,0.746032,0.437549,0.000077126,0,0.777778,0.41776,0.0000743043,0,0.809524,0.39863,0.0000716426,0,0.84127,0.379954,0.0000686456,0,0.873016,0.362025,0.0000660514,0,0.904762,0.344581,0.0000630755,0,0.936508,0.327909,0.0000605439,0,0.968254,0.311736,0.0000576345,0,1,1,0.0000000263344,0,0,1,0.0000000263373,0,0,1,0.0000000263815,0,0,1,0.0000000265753,0,0,1,0.0000000271132,0,0,0.999999,0.0000000283279,0,0,0.999997,0.000000030833,0,0,0.999995,0.0000000358711,0,0,0.999992,0.0000000461266,0,0,0.999985,0.000000067574,0,0,0.999977,0.00000011358,0,0,0.999966,0.000000213657,0,0,0.999948,0.000000431151,0,0,0.999923,0.000000896656,0,0,0.999884,0.00000186603,0,0,0.999826,0.00000381115,0,0,0.999732,0.00000754184,0,0,0.999561,0.0000143192,0,0,0.999191,0.0000257061,0,0,0.997955,0.0000405724,0,0.0000744132,0.992228,0.0000276537,0,0.000716477,0.987638,0.0000208885,0,0.0022524,0.983395,0.0000215226,0,0.00484816,0.978614,0.0000270795,0,0.00860962,0.972389,0.0000365282,0,0.0136083,0.964392,0.0000474747,0,0.0198941,0.95861,0.0000509141,0,0.0275023,0.952806,0.000048963,0,0.0364584,0.94712,0.0000571119,0,0.04678,0.940104,0.0000671704,0,0.0584799,0.930398,0.0000687586,0,0.0715665,0.919866,0.0000738161,0,0.086045,0.907853,0.0000813235,0,0.101918,0.894078,0.0000834582,0,0.119186,0.881177,0.0000892093,0,0.137845,0.867575,0.0000944548,0,0.157891,0.852107,0.0000969607,0,0.179316,0.835502,0.000101456,0,0.202106,0.81756,0.000103256,0,0.226243,0.79984,0.000106954,0,0.251704,0.780998,0.000108066,0,0.278451,0.761132,0.000110111,0,0.306436,0.740429,0.000110459,0,0.335586,0.719836,0.000111219,0,0.365796,0.698467,0.00011145,0,0.3969,0.676446,0.000110393,0,0.428571,0.654635,0.000110035,0,0.460318,0.632411,0.000108548,0,0.492064,0.609986,0.000106963,0,0.52381,0.587872,0.000105238,0,0.555556,0.565528,0.000102665,0,0.587302,0.543563,0.000100543,0,0.619048,0.52176,0.0000976182,0,0.650794,0.500188,0.0000947099,0,0.68254,0.479204,0.0000919929,0,0.714286,0.458413,0.0000886139,0,0.746032,0.438314,0.0000857839,0,0.777778,0.418573,0.000082411,0,0.809524,0.39947,0.0000792211,0,0.84127,0.380892,0.0000759546,0,0.873016,0.362953,0.0000727571,0,0.904762,0.345601,0.0000695738,0,0.936508,0.328895,0.0000664907,0,0.968254,0.312808,0.0000634277,0,1,1,0.0000000628647,0,0,1,0.0000000628705,0,0,1,0.0000000629587,0,0,1,0.0000000633441,0,0,0.999999,0.0000000644087,0,0,0.999998,0.0000000667856,0,0,0.999997,0.0000000715889,0,0,0.999995,0.0000000809577,0,0,0.999989,0.0000000992764,0,0,0.999983,0.000000135834,0,0,0.999974,0.000000210482,0,0,0.999959,0.000000365215,0,0,0.999939,0.000000686693,0,0,0.999911,0.0000013472,0,0,0.999868,0.0000026731,0,0,0.999804,0.00000524756,0,0,0.9997,0.0000100403,0,0,0.99951,0.0000185019,0,0,0.999078,0.0000322036,0,0.00000620676,0.997428,0.0000470002,0,0.000341552,0.99162,0.0000287123,0,0.00143727,0.987479,0.0000234706,0,0.00349201,0.983582,0.0000260083,0,0.0066242,0.979186,0.0000337927,0,0.0109113,0.97325,0.0000454689,0,0.0164064,0.965221,0.0000573759,0,0.0231463,0.957262,0.0000544114,0,0.0311571,0.952211,0.0000587006,0,0.0404572,0.946631,0.0000692256,0,0.0510592,0.939391,0.0000787819,0,0.0629723,0.929795,0.0000792368,0,0.0762025,0.91965,0.0000875075,0,0.090753,0.907737,0.0000950903,0,0.106626,0.893899,0.0000972963,0,0.123822,0.880239,0.00010459,0,0.142337,0.866562,0.000107689,0,0.16217,0.85164,0.000113081,0,0.183314,0.835021,0.000116636,0,0.20576,0.817311,0.000120074,0,0.229496,0.798845,0.000121921,0,0.254502,0.780479,0.00012475,0,0.280753,0.760694,0.000125255,0,0.308212,0.740142,0.000126719,0,0.336825,0.719248,0.00012636,0,0.366517,0.698209,0.000126712,0,0.397167,0.676398,0.000125769,0,0.428578,0.654378,0.000124432,0,0.460318,0.632484,0.000123272,0,0.492064,0.610113,0.00012085,0,0.52381,0.587931,0.000118411,0,0.555556,0.565872,0.00011569,0,0.587302,0.543814,0.000112521,0,0.619048,0.522265,0.000109737,0,0.650794,0.500835,0.000106228,0,0.68254,0.479818,0.000102591,0,0.714286,0.459258,0.0000991288,0,0.746032,0.439061,0.0000952325,0,0.777778,0.419552,0.000091895,0,0.809524,0.400399,0.0000879051,0,0.84127,0.381976,0.0000844775,0,0.873016,0.364009,0.0000806316,0,0.904762,0.346761,0.0000771848,0,0.936508,0.330049,0.0000735429,0,0.968254,0.314018,0.0000702103,0,1,1,0.000000139968,0,0,1,0.000000139979,0,0,1,0.000000140145,0,0,1,0.00000014087,0,0,0.999999,0.000000142865,0,0,0.999998,0.000000147279,0,0,0.999997,0.000000156057,0,0,0.999992,0.00000017276,0,0,0.999989,0.000000204352,0,0,0.99998,0.00000026494,0,0,0.999969,0.000000383435,0,0,0.999953,0.000000618641,0,0,0.999929,0.00000108755,0,0,0.999898,0.00000201497,0,0,0.999849,0.00000381346,0,0,0.999778,0.00000719815,0,0,0.999661,0.0000133215,0,0,0.999451,0.0000238313,0,0,0.998936,0.0000401343,0,0.000113724,0.99662,0.0000517346,0,0.000820171,0.991094,0.0000304323,0,0.00238143,0.987487,0.0000281757,0,0.00493527,0.983731,0.0000320048,0,0.00856859,0.979647,0.0000423905,0,0.0133393,0.973837,0.0000562935,0,0.0192863,0.96584,0.0000677442,0,0.0264369,0.956309,0.0000623073,0,0.03481,0.951523,0.0000704131,0,0.0444184,0.946003,0.0000836594,0,0.0552713,0.938454,0.0000911736,0,0.0673749,0.929279,0.0000938264,0,0.0807329,0.919239,0.000103754,0,0.0953479,0.907293,0.000109928,0,0.111221,0.893936,0.000115257,0,0.128352,0.879674,0.000122265,0,0.14674,0.865668,0.000125733,0,0.166382,0.850998,0.000132305,0,0.187276,0.834498,0.000134844,0,0.209413,0.816903,0.000139276,0,0.232786,0.798235,0.000140984,0,0.257382,0.779724,0.00014378,0,0.283181,0.760251,0.000144623,0,0.310156,0.739808,0.000145228,0,0.338269,0.718762,0.00014539,0,0.367461,0.697815,0.000144432,0,0.397646,0.67631,0.000143893,0,0.428685,0.654278,0.000141846,0,0.460318,0.632347,0.00013935,0,0.492064,0.610296,0.000137138,0,0.52381,0.588039,0.000133806,0,0.555556,0.566218,0.000130755,0,0.587302,0.544346,0.000127128,0,0.619048,0.522701,0.000123002,0,0.650794,0.501542,0.000119443,0,0.68254,0.480508,0.000115055,0,0.714286,0.460092,0.000111032,0,0.746032,0.440021,0.000106635,0,0.777778,0.420446,0.000102162,0,0.809524,0.401512,0.000098184,0,0.84127,0.38299,0.0000936497,0,0.873016,0.365232,0.000089813,0,0.904762,0.347865,0.0000853073,0,0.936508,0.331342,0.0000817068,0,0.968254,0.315202,0.0000773818,0,1,1,0.00000029368,0,0,1,0.0000002937,0,0,1,0.000000293998,0,0,1,0.000000295298,0,0,0.999999,0.000000298865,0,0,0.999998,0.0000003067,0,0,0.999995,0.000000322082,0,0,0.999992,0.000000350767,0,0,0.999986,0.000000403538,0,0,0.999976,0.000000501372,0,0,0.999964,0.00000068562,0,0,0.999945,0.0000010374,0,0,0.999919,0.00000171269,0,0,0.999882,0.00000300175,0,0,0.999829,0.00000542144,0,0,0.999749,0.00000984182,0,0,0.99962,0.0000176213,0,0,0.999382,0.0000305995,0,0.0000138418,0.998751,0.0000496686,0,0.000389844,0.995344,0.0000510733,0,0.00150343,0.990768,0.0000345829,0,0.00352451,0.987464,0.0000342841,0,0.00655379,0.983846,0.0000399072,0,0.0106554,0.980007,0.0000533219,0,0.0158723,0.974494,0.0000696992,0,0.0222333,0.96622,0.0000776754,0,0.029758,0.956273,0.0000747718,0,0.0384596,0.950952,0.0000864611,0,0.0483473,0.945215,0.000100464,0,0.0594266,0.937287,0.000103729,0,0.0717019,0.928649,0.000111665,0,0.0851752,0.918791,0.00012353,0,0.0998479,0.906685,0.000127115,0,0.115721,0.893706,0.00013628,0,0.132794,0.879248,0.000142427,0,0.151067,0.864685,0.000148091,0,0.170538,0.850032,0.000153517,0,0.191204,0.833853,0.000157322,0,0.213063,0.816353,0.000161086,0,0.236107,0.797834,0.000164111,0,0.260329,0.778831,0.000165446,0,0.285714,0.759756,0.000167492,0,0.312243,0.739419,0.000166928,0,0.339887,0.718491,0.000167,0,0.368604,0.697392,0.000165674,0,0.398329,0.676102,0.000163815,0,0.428961,0.654243,0.000162003,0,0.460331,0.632176,0.000158831,0,0.492064,0.610407,0.000155463,0,0.52381,0.588394,0.000152062,0,0.555556,0.56645,0.000147665,0,0.587302,0.5449,0.00014375,0,0.619048,0.523276,0.000138905,0,0.650794,0.502179,0.000134189,0,0.68254,0.481359,0.000129392,0,0.714286,0.46092,0.000124556,0,0.746032,0.441084,0.00011957,0,0.777778,0.421517,0.000114652,0,0.809524,0.402721,0.000109688,0,0.84127,0.384222,0.000104667,0,0.873016,0.366534,0.0000999633,0,0.904762,0.349205,0.0000950177,0,0.936508,0.332702,0.0000907301,0,0.968254,0.316599,0.0000859769,0,1,1,0.000000585473,0,0,1,0.000000585507,0,0,1,0.00000058602,0,0,0.999999,0.000000588259,0,0,0.999999,0.000000594381,0,0,0.999998,0.000000607754,0,0,0.999995,0.000000633729,0,0,0.99999,0.00000068137,0,0,0.999984,0.000000767003,0,0,0.999973,0.000000921212,0,0,0.999959,0.00000120218,0,0,0.999936,0.00000172024,0,0,0.999907,0.00000268088,0,0,0.999866,0.00000445512,0,0,0.999806,0.00000768481,0,0,0.999716,0.00001342,0,0,0.999576,0.0000232473,0,0,0.9993,0.0000391694,0,0.000129917,0.998498,0.0000608429,0,0.000845035,0.994132,0.0000489743,0,0.00237616,0.99031,0.0000384644,0,0.00484456,0.987409,0.0000421768,0,0.00832472,0.983981,0.0000504854,0,0.0128643,0.980268,0.0000671028,0,0.0184947,0.974875,0.0000852749,0,0.025237,0.966063,0.000085531,0,0.0331046,0.956779,0.0000900588,0,0.0421067,0.950259,0.00010577,0,0.0522487,0.944239,0.000119458,0,0.0635343,0.936341,0.000122164,0,0.0759654,0.928047,0.000134929,0,0.0895434,0.918065,0.000145544,0,0.104269,0.906267,0.000150531,0,0.120142,0.893419,0.000161652,0,0.137163,0.878758,0.00016593,0,0.15533,0.863699,0.000174014,0,0.174645,0.848876,0.000177877,0,0.195106,0.833032,0.000184049,0,0.21671,0.815557,0.000186088,0,0.239454,0.797323,0.00019054,0,0.263332,0.778124,0.000191765,0,0.288336,0.758929,0.000192535,0,0.314451,0.738979,0.000192688,0,0.341658,0.718213,0.000191522,0,0.369924,0.696947,0.000190491,0,0.399202,0.675807,0.000187913,0,0.429416,0.654147,0.000184451,0,0.460447,0.63229,0.000181442,0,0.492064,0.610499,0.000177139,0,0.523809,0.588747,0.000172596,0,0.555555,0.566783,0.000167457,0,0.587301,0.545359,0.000162518,0,0.619048,0.523984,0.000156818,0,0.650794,0.502917,0.000151884,0,0.68254,0.482294,0.000145514,0,0.714286,0.461945,0.000140199,0,0.746032,0.442133,0.000134101,0,0.777778,0.422705,0.000128374,0,0.809524,0.403916,0.000122996,0,0.84127,0.38554,0.000116808,0,0.873016,0.367909,0.000111973,0,0.904762,0.350651,0.000105938,0,0.936508,0.334208,0.000101355,0,0.968254,0.318123,0.0000957629,0,1,1,0.00000111633,0,0,1,0.00000111639,0,0,1,0.00000111725,0,0,1,0.00000112096,0,0,0.999999,0.0000011311,0,0,0.999997,0.00000115315,0,0,0.999995,0.0000011956,0,0,0.999989,0.00000127239,0,0,0.999981,0.00000140772,0,0,0.999969,0.00000164541,0,0,0.999952,0.00000206607,0,0,0.999928,0.00000281783,0,0,0.999895,0.00000416835,0,0,0.999848,0.00000658728,0,0,0.999781,0.0000108648,0,0,0.999682,0.0000182579,0,0,0.999523,0.0000306003,0,0.0000159122,0.999205,0.0000499862,0,0.000391184,0.998131,0.000073306,0,0.00147534,0.993334,0.0000513229,0,0.0034227,0.99016,0.0000467783,0,0.00632232,0.987321,0.0000523413,0,0.0102295,0.984099,0.000064267,0,0.0151794,0.980432,0.0000843042,0,0.0211947,0.974976,0.000102819,0,0.0282899,0.966429,0.0000996234,0,0.0364739,0.957633,0.000111074,0,0.0457522,0.949422,0.000128644,0,0.0561278,0.943045,0.000140076,0,0.0676023,0.935448,0.000146349,0,0.0801762,0.927225,0.000161854,0,0.0938499,0.917033,0.000169135,0,0.108623,0.905762,0.000179987,0,0.124496,0.892879,0.000189832,0,0.141469,0.878435,0.000195881,0,0.159541,0.863114,0.00020466,0,0.178713,0.84776,0.000209473,0,0.198985,0.832084,0.000214861,0,0.220355,0.814915,0.000217695,0,0.242823,0.796711,0.000220313,0,0.266385,0.777603,0.00022313,0,0.291036,0.757991,0.000222471,0,0.316767,0.738371,0.000222869,0,0.343563,0.717872,0.000221243,0,0.371402,0.696619,0.000218089,0,0.400248,0.675379,0.00021562,0,0.430047,0.65411,0.00021169,0,0.460709,0.63241,0.000206947,0,0.492079,0.61046,0.000201709,0,0.52381,0.58903,0.000196753,0,0.555556,0.567267,0.000189637,0,0.587302,0.545886,0.000184735,0,0.619048,0.524714,0.000177257,0,0.650794,0.503789,0.000171424,0,0.68254,0.483204,0.000164688,0,0.714286,0.462976,0.000157172,0,0.746032,0.443294,0.000151341,0,0.777778,0.423988,0.000143737,0,0.809524,0.405325,0.000138098,0,0.84127,0.386981,0.000130698,0,0.873016,0.369436,0.000125276,0,0.904762,0.35219,0.000118349,0,0.936508,0.335804,0.00011312,0,0.968254,0.319749,0.000106687,0,1,1,0.00000204685,0,0,1,0.00000204694,0,0,1,0.00000204831,0,0,0.999999,0.00000205428,0,0,0.999999,0.00000207056,0,0,0.999997,0.00000210581,0,0,0.999993,0.0000021732,0,0,0.999987,0.00000229365,0,0,0.999979,0.00000250243,0,0,0.999965,0.00000286127,0,0,0.999947,0.00000348028,0,0,0.999918,0.00000455588,0,0,0.999881,0.00000643303,0,0,0.999828,0.00000970064,0,0,0.999753,0.0000153233,0,0,0.999642,0.000024793,0,0,0.999464,0.0000402032,0,0.000122947,0.999089,0.0000635852,0,0.000807414,0.997567,0.0000857026,0,0.00227206,0.992903,0.0000594912,0,0.00462812,0.990011,0.0000578515,0,0.00794162,0.987192,0.000065399,0,0.0122534,0.98418,0.0000819675,0,0.0175888,0.980491,0.000105514,0,0.0239635,0.974779,0.000121532,0,0.031387,0.96675,0.000119144,0,0.0398644,0.958248,0.000136125,0,0.0493982,0.948884,0.000155408,0,0.0599896,0.941673,0.000162281,0,0.0716382,0.934521,0.000176754,0,0.0843437,0.926205,0.000192873,0,0.0981056,0.916089,0.000200038,0,0.112923,0.904963,0.000213624,0,0.128796,0.892089,0.000221834,0,0.145725,0.878028,0.000232619,0,0.163709,0.86249,0.000238632,0,0.182749,0.846587,0.000247002,0,0.202847,0.830988,0.000250702,0,0.224001,0.814165,0.000255562,0,0.246214,0.796135,0.000257505,0,0.269482,0.777052,0.000258625,0,0.293805,0.757201,0.000258398,0,0.319176,0.737655,0.000256714,0,0.345587,0.717477,0.000255187,0,0.373021,0.696433,0.000251792,0,0.401454,0.675084,0.000247223,0,0.430844,0.653907,0.000242213,0,0.461125,0.632561,0.000237397,0,0.492187,0.610658,0.000229313,0,0.52381,0.589322,0.000224402,0,0.555556,0.567857,0.000216116,0,0.587302,0.54652,0.000209124,0,0.619048,0.525433,0.000201601,0,0.650794,0.504679,0.000192957,0,0.68254,0.484203,0.000186052,0,0.714286,0.464203,0.000177672,0,0.746032,0.444549,0.000170005,0,0.777778,0.425346,0.000162401,0,0.809524,0.406706,0.0001544,0,0.84127,0.388576,0.000147437,0,0.873016,0.37094,0.000139493,0,0.904762,0.353996,0.000133219,0,0.936508,0.337391,0.000125573,0,0.968254,0.321648,0.000119867,0,1,1,0.00000362511,0,0,1,0.00000362525,0,0,1,0.00000362739,0,0,0.999999,0.00000363673,0,0,0.999998,0.00000366214,0,0,0.999996,0.00000371698,0,0,0.999992,0.00000382116,0,0,0.999986,0.00000400554,0,0,0.999976,0.00000432058,0,0,0.999961,0.00000485194,0,0,0.999938,0.00000574808,0,0,0.999908,0.00000726643,0,0,0.999865,0.00000984707,0,0,0.999807,0.0000142217,0,0,0.999723,0.0000215581,0,0,0.999602,0.0000336114,0,0.0000119113,0.999398,0.0000527353,0,0.000355813,0.998946,0.0000805809,0,0.00137768,0.996647,0.0000942908,0,0.00322469,0.992298,0.0000668733,0,0.00597897,0.989802,0.0000716564,0,0.00968903,0.987019,0.0000821355,0,0.0143845,0.984219,0.000104555,0,0.0200831,0.980425,0.000131245,0,0.0267948,0.974241,0.000139613,0,0.034525,0.967006,0.000145931,0,0.0432757,0.95893,0.000167153,0,0.0530471,0.949157,0.000188146,0,0.0638386,0.94062,0.000194625,0,0.0756487,0.933509,0.000213721,0,0.0884762,0.925088,0.000229616,0,0.10232,0.915178,0.000239638,0,0.117178,0.904093,0.000254814,0,0.133051,0.891337,0.000263685,0,0.149939,0.877326,0.000274789,0,0.167841,0.861794,0.000280534,0,0.18676,0.845758,0.000289534,0,0.206696,0.829792,0.000294446,0,0.22765,0.813037,0.000296877,0,0.249625,0.795285,0.000300217,0,0.27262,0.776323,0.000299826,0,0.296636,0.756673,0.000299787,0,0.321671,0.736856,0.000297867,0,0.347718,0.716883,0.000294052,0,0.374768,0.696089,0.000289462,0,0.402804,0.67505,0.000285212,0,0.431796,0.653509,0.00027653,0,0.461695,0.63258,0.000271759,0,0.49242,0.61104,0.000262811,0,0.523822,0.589567,0.000255151,0,0.555556,0.568322,0.000246434,0,0.587302,0.547235,0.000237061,0,0.619048,0.52616,0.000228343,0,0.650794,0.505716,0.000219236,0,0.68254,0.485274,0.000209595,0,0.714286,0.465411,0.000201011,0,0.746032,0.445854,0.00019109,0,0.777778,0.426911,0.000182897,0,0.809524,0.408222,0.000173569,0,0.84127,0.390307,0.000165496,0,0.873016,0.372624,0.000156799,0,0.904762,0.355804,0.00014917,0,0.936508,0.33924,0.000140907,0,0.968254,0.323534,0.000134062,0,1,1,0.00000622487,0,0,1,0.0000062251,0,0,1,0.00000622837,0,0,0.999999,0.00000624259,0,0,0.999998,0.00000628127,0,0,0.999996,0.00000636451,0,0,0.999991,0.0000065218,0,0,0.999984,0.00000679782,0,0,0.999973,0.00000726361,0,0,0.999955,0.00000803644,0,0,0.999931,0.00000931397,0,0,0.999896,0.0000114299,0,0,0.999847,0.0000149402,0,0,0.999784,0.0000207461,0,0,0.999692,0.0000302493,0,0,0.999554,0.0000454957,0,0.0000997275,0.999326,0.0000690762,0,0.000724813,0.998757,0.000101605,0,0.0020972,0.995367,0.0000958745,0,0.00432324,0.99209,0.0000832808,0,0.00746347,0.989517,0.0000887601,0,0.0115534,0.987008,0.00010564,0,0.0166134,0.98421,0.000133179,0,0.0226552,0.98021,0.000161746,0,0.0296838,0.973676,0.000161821,0,0.0377016,0.967052,0.000178635,0,0.0467079,0.959385,0.000206765,0,0.0567013,0.949461,0.00022476,0,0.0676796,0.939578,0.00023574,0,0.0796403,0.932416,0.00025893,0,0.0925812,0.923759,0.000271228,0,0.106501,0.914223,0.000289165,0,0.121397,0.902942,0.000301156,0,0.13727,0.890419,0.000313852,0,0.15412,0.876639,0.000324408,0,0.171946,0.861316,0.00033249,0,0.190751,0.84496,0.000338497,0,0.210537,0.828427,0.000345861,0,0.231305,0.811871,0.000347863,0,0.253057,0.794397,0.000350225,0,0.275797,0.775726,0.000349915,0,0.299525,0.75617,0.000347297,0,0.324242,0.736091,0.000344232,0,0.349947,0.716213,0.000340835,0,0.376633,0.695736,0.000332369,0,0.404289,0.674961,0.000327943,0,0.432895,0.653518,0.000318533,0,0.462415,0.632574,0.000310391,0,0.492788,0.61134,0.000300755,0,0.523909,0.590017,0.000290506,0,0.555556,0.568752,0.000280446,0,0.587302,0.548061,0.000269902,0,0.619048,0.52711,0.000258815,0,0.650794,0.506682,0.000248481,0,0.68254,0.486524,0.000237141,0,0.714286,0.466812,0.000226872,0,0.746032,0.44732,0.000216037,0,0.777778,0.428473,0.000205629,0,0.809524,0.409921,0.000195691,0,0.84127,0.392028,0.000185457,0,0.873016,0.374606,0.000176436,0,0.904762,0.357601,0.000166508,0,0.936508,0.341348,0.000158385,0,0.968254,0.32542,0.000149203,0,1,1,0.0000103967,0,0,1,0.000010397,0,0,1,0.0000104019,0,0,0.999999,0.0000104231,0,0,0.999998,0.0000104806,0,0,0.999995,0.0000106042,0,0,0.999991,0.0000108366,0,0,0.999982,0.0000112415,0,0,0.999968,0.0000119174,0,0,0.99995,0.0000130227,0,0,0.999922,0.0000148176,0,0,0.999884,0.0000177303,0,0,0.99983,0.0000224564,0,0,0.999758,0.0000300966,0,0,0.999654,0.0000423193,0,0.00000549083,0.999503,0.0000614848,0,0.000296087,0.999237,0.0000903576,0,0.00123144,0.998491,0.0001271,0,0.00295954,0.994594,0.000107754,0,0.00555829,0.99178,0.000103025,0,0.00907209,0.989265,0.00011154,0,0.0135257,0.986998,0.000136296,0,0.0189327,0.984137,0.000169154,0,0.0252993,0.979798,0.000196671,0,0.0326272,0.97337,0.000196678,0,0.0409157,0.967239,0.000223121,0,0.0501623,0.959543,0.000253809,0,0.0603638,0.949466,0.000265972,0,0.0715171,0.939074,0.000288372,0,0.0836187,0.931118,0.000310983,0,0.0966657,0.922525,0.000325561,0,0.110656,0.912983,0.000345725,0,0.125588,0.901617,0.0003556,0,0.141461,0.889487,0.000374012,0,0.158275,0.875787,0.000383445,0,0.176031,0.860654,0.000393972,0,0.19473,0.844417,0.000400311,0,0.214374,0.82741,0.000405004,0,0.234967,0.810545,0.000407378,0,0.256512,0.793312,0.000407351,0,0.279011,0.774847,0.000406563,0,0.302468,0.755621,0.000404903,0,0.326887,0.735511,0.000397486,0,0.352266,0.715435,0.00039357,0,0.378605,0.695403,0.000384739,0,0.405897,0.674681,0.000376108,0,0.43413,0.65359,0.000365997,0,0.463277,0.632471,0.000354957,0,0.493295,0.61151,0.000343593,0,0.524106,0.59064,0.000331841,0,0.555561,0.569386,0.000318891,0,0.587302,0.548785,0.0003072,0,0.619048,0.528146,0.00029361,0,0.650794,0.507872,0.000281709,0,0.68254,0.487805,0.000268627,0,0.714286,0.468196,0.000255887,0,0.746032,0.448922,0.000243997,0,0.777778,0.430093,0.000231662,0,0.809524,0.411845,0.000220339,0,0.84127,0.393808,0.000208694,0,0.873016,0.376615,0.000198045,0,0.904762,0.359655,0.000187375,0,0.936508,0.343452,0.000177371,0,0.968254,0.32765,0.000167525,0,1,1,0.0000169351,0,0,1,0.0000169356,0,0,1,0.0000169427,0,0,0.999999,0.0000169736,0,0,0.999998,0.0000170575,0,0,0.999995,0.0000172372,0,0,0.99999,0.0000175739,0,0,0.999979,0.0000181568,0,0,0.999966,0.0000191206,0,0,0.999944,0.000020677,0,0,0.999912,0.0000231644,0,0,0.999869,0.0000271268,0,0,0.999811,0.0000334272,0,0,0.99973,0.0000433979,0,0,0.999617,0.0000590083,0,0.0000680315,0.999445,0.0000829497,0,0.000612796,0.999138,0.000118019,0,0.00187408,0.998095,0.000156712,0,0.00395791,0.993919,0.000125054,0,0.00692144,0.991333,0.000126091,0,0.0107962,0.989226,0.000144912,0,0.0155986,0.986954,0.000175737,0,0.0213364,0.983982,0.000213883,0,0.0280114,0.979128,0.000234526,0,0.0356226,0.973327,0.000243725,0,0.0441668,0.967416,0.0002773,0,0.0536399,0.959729,0.000308799,0,0.0640376,0.949758,0.000322447,0,0.0753554,0.939173,0.000350021,0,0.0875893,0.9296,0.000370089,0,0.100736,0.921181,0.000391365,0,0.114793,0.91164,0.000413636,0,0.129759,0.900435,0.000427068,0,0.145632,0.888183,0.000441046,0,0.162412,0.874772,0.000454968,0,0.180101,0.859566,0.000461882,0,0.1987,0.843579,0.000471556,0,0.218213,0.826453,0.000474335,0,0.238641,0.809164,0.000477078,0,0.259989,0.792179,0.00047755,0,0.282262,0.773866,0.000472573,0,0.305464,0.754944,0.000469765,0,0.329599,0.735133,0.000462371,0,0.35467,0.714858,0.000453674,0,0.380678,0.694829,0.000443888,0,0.407622,0.674453,0.000432052,0,0.435493,0.653685,0.000420315,0,0.464275,0.632666,0.000406829,0,0.493938,0.611676,0.000392234,0,0.524422,0.591193,0.000379208,0,0.555624,0.570145,0.00036319,0,0.587302,0.549566,0.000349111,0,0.619048,0.529278,0.000334166,0,0.650794,0.509026,0.000318456,0,0.68254,0.489186,0.00030449,0,0.714286,0.469662,0.000289051,0,0.746032,0.450691,0.000275494,0,0.777778,0.431841,0.000261437,0,0.809524,0.413752,0.000247846,0,0.84127,0.395951,0.000235085,0,0.873016,0.378633,0.000222245,0,0.904762,0.36194,0.000210533,0,0.936508,0.345599,0.000198494,0,0.968254,0.329999,0.000188133,0,1,1,0.0000269663,0,0,1,0.000026967,0,0,1,0.0000269772,0,0,0.999999,0.0000270214,0,0,0.999998,0.0000271415,0,0,0.999994,0.000027398,0,0,0.999988,0.0000278771,0,0,0.999977,0.0000287019,0,0,0.999961,0.0000300544,0,0,0.999937,0.0000322138,0,0,0.999904,0.0000356163,0,0,0.999854,0.0000409465,0,0,0.99979,0.0000492651,0,0,0.999699,0.0000621722,0,0.00000088288,0.999572,0.0000819715,0,0.000223369,0.999381,0.000111689,0,0.00105414,0.999016,0.000153862,0,0.0026493,0.997437,0.000187667,0,0.00508608,0.993545,0.000155672,0,0.00840554,0.991135,0.000161455,0,0.012629,0.989157,0.000188241,0,0.0177661,0.986874,0.000226229,0,0.0238198,0.983714,0.000268668,0,0.0307887,0.978301,0.000277109,0,0.0386688,0.973227,0.000303446,0,0.0474554,0.967317,0.000341851,0,0.0571428,0.959477,0.000370885,0,0.0677256,0.950012,0.000392753,0,0.0791988,0.939484,0.00042781,0,0.0915576,0.928135,0.000443866,0,0.104798,0.919819,0.000472959,0,0.118918,0.910049,0.000491551,0,0.133915,0.899181,0.000512616,0,0.149788,0.886881,0.000523563,0,0.166537,0.87359,0.000540183,0,0.184164,0.858613,0.000547386,0,0.202669,0.842809,0.000554809,0,0.222056,0.825727,0.000558316,0,0.242329,0.808086,0.000557824,0,0.263492,0.790728,0.000556346,0,0.285551,0.772987,0.000552672,0,0.30851,0.7541,0.000543738,0,0.332376,0.734669,0.000536107,0,0.357153,0.714411,0.000523342,0,0.382845,0.694196,0.000512238,0,0.409454,0.674252,0.000497465,0,0.436977,0.65357,0.000481096,0,0.465404,0.632999,0.000467054,0,0.494713,0.611994,0.000448771,0,0.524864,0.591604,0.000431889,0,0.555779,0.571134,0.000415238,0,0.587302,0.550528,0.000396369,0,0.619048,0.530292,0.000379477,0,0.650794,0.510364,0.000361488,0,0.68254,0.490749,0.000343787,0,0.714286,0.471266,0.000327822,0,0.746032,0.452462,0.000310626,0,0.777778,0.433907,0.000295352,0,0.809524,0.415659,0.000279179,0,0.84127,0.398138,0.000264685,0,0.873016,0.380833,0.000249905,0,0.904762,0.364247,0.000236282,0,0.936508,0.348041,0.000222905,0,0.968254,0.332389,0.000210522,0,1,1,0.0000420604,0,0,1,0.0000420614,0,0,1,0.0000420757,0,0,0.999999,0.000042138,0,0,0.999997,0.0000423067,0,0,0.999993,0.0000426668,0,0,0.999986,0.0000433372,0,0,0.999974,0.0000444857,0,0,0.999956,0.0000463554,0,0,0.99993,0.0000493105,0,0,0.999892,0.0000539077,0,0,0.999838,0.0000610005,0,0,0.999767,0.0000718822,0,0,0.999666,0.0000884581,0,0.0000365471,0.999525,0.000113398,0,0.000485623,0.999311,0.000150043,0,0.00162096,0.998865,0.000200063,0,0.00355319,0.996278,0.000211014,0,0.00633818,0.992956,0.000189672,0,0.0100043,0.991017,0.000210262,0,0.0145648,0.989055,0.000244292,0,0.0200237,0.986741,0.000290481,0,0.0263798,0.983288,0.000334303,0,0.033629,0.977784,0.000340307,0,0.0417652,0.973037,0.000377864,0,0.0507821,0.967181,0.0004239,0,0.060673,0.958971,0.000443854,0,0.0714314,0.950093,0.000483039,0,0.0830518,0.939552,0.000517934,0,0.0955288,0.927678,0.000539449,0,0.108859,0.918278,0.000568604,0,0.123038,0.908449,0.000588505,0,0.138065,0.897713,0.000612473,0,0.153938,0.885533,0.000625575,0,0.170657,0.872131,0.00063854,0,0.188224,0.857517,0.000647034,0,0.20664,0.841796,0.00065209,0,0.225909,0.824726,0.0006544,0,0.246035,0.807297,0.000655744,0,0.267022,0.789058,0.000646716,0,0.288878,0.77189,0.000643898,0,0.311607,0.753082,0.000629973,0,0.335216,0.7341,0.000621564,0,0.359713,0.714094,0.000605171,0,0.385103,0.693839,0.000588752,0,0.41139,0.673891,0.000573294,0,0.438576,0.653565,0.000552682,0,0.466656,0.633326,0.000533446,0,0.495617,0.612582,0.000514635,0,0.525431,0.59205,0.00049303,0,0.556041,0.571918,0.000471842,0,0.587338,0.551572,0.000451713,0,0.619048,0.531553,0.000430049,0,0.650794,0.51175,0.000410445,0,0.68254,0.49238,0.000390098,0,0.714286,0.473143,0.000370033,0,0.746032,0.45423,0.000351205,0,0.777778,0.435963,0.000332049,0,0.809524,0.41787,0.000315021,0,0.84127,0.400387,0.000297315,0,0.873016,0.383332,0.000281385,0,0.904762,0.366665,0.000265397,0,0.936508,0.350633,0.000250601,0,0.968254,0.334964,0.00023589,0,1,1,0.0000643736,0,0,1,0.000064375,0,0,1,0.0000643947,0,0,0.999999,0.000064481,0,0,0.999997,0.0000647143,0,0,0.999994,0.0000652119,0,0,0.999985,0.0000661359,0,0,0.999972,0.0000677116,0,0,0.999952,0.0000702599,0,0,0.999922,0.0000742517,0,0,0.99988,0.0000803906,0,0,0.99982,0.0000897315,0,0,0.999741,0.000103838,0,0,0.999629,0.00012496,0,0.000149024,0.999474,0.000156161,0,0.000861027,0.999229,0.000201034,0,0.00231198,0.998662,0.000259069,0,0.00458147,0.995299,0.000245439,0,0.00770895,0.992732,0.00024498,0,0.0117126,0.990847,0.000273211,0,0.0165989,0.988911,0.000316492,0,0.0223674,0.98654,0.00037161,0,0.0290135,0.982636,0.000410352,0,0.0365309,0.977346,0.000421756,0,0.0449117,0.972909,0.000475578,0,0.0541481,0.966821,0.000522482,0,0.0642326,0.958686,0.000545008,0,0.075158,0.949754,0.000589286,0,0.0869181,0.939184,0.000619995,0,0.0995074,0.927505,0.000654266,0,0.112922,0.916606,0.000682362,0,0.127157,0.906707,0.000704286,0,0.142212,0.895937,0.000725909,0,0.158085,0.883913,0.000743939,0,0.174776,0.870642,0.000755157,0,0.192287,0.856241,0.000764387,0,0.210619,0.84069,0.000771032,0,0.229775,0.823728,0.000765906,0,0.249761,0.806481,0.000767604,0,0.270582,0.787924,0.000754385,0,0.292243,0.770588,0.000749668,0,0.314753,0.751991,0.000731613,0,0.338118,0.733407,0.000717655,0,0.362347,0.713688,0.000700604,0,0.387447,0.693595,0.000678765,0,0.413424,0.673426,0.000657042,0,0.440284,0.65359,0.000635892,0,0.468027,0.633576,0.000611569,0,0.496645,0.613144,0.000586011,0,0.526122,0.592711,0.000563111,0,0.556417,0.572722,0.000537699,0,0.587451,0.552762,0.000512556,0,0.619048,0.532985,0.000489757,0,0.650794,0.513219,0.000464139,0,0.68254,0.493992,0.000442193,0,0.714286,0.47509,0.000418629,0,0.746032,0.456287,0.000397045,0,0.777778,0.438152,0.000375504,0,0.809524,0.420294,0.00035492,0,0.84127,0.402749,0.000335327,0,0.873016,0.385879,0.000316422,0,0.904762,0.369352,0.000298333,0,0.936508,0.353301,0.000281417,0,0.968254,0.337781,0.000265203,0,1,1,0.0000968267,0,0,1,0.0000968284,0,0,1,0.0000968556,0,0,0.999999,0.0000969733,0,0,0.999997,0.0000972913,0,0,0.999993,0.0000979688,0,0,0.999984,0.0000992239,0,0,0.999969,0.000101356,0,0,0.999946,0.000104784,0,0,0.999913,0.000110111,0,0,0.999868,0.000118217,0,0,0.999801,0.000130396,0,0,0.999712,0.000148523,0,0.0000124907,0.999589,0.000175233,0,0.000355405,0.999416,0.000213999,0,0.0013528,0.999136,0.000268529,0,0.00312557,0.998367,0.000333088,0,0.00573045,0.994701,0.000304757,0,0.00919397,0.992497,0.000318031,0,0.0135261,0.990608,0.000353863,0,0.0187278,0.988715,0.000409044,0,0.0247947,0.986241,0.000472967,0,0.0317196,0.981696,0.000495104,0,0.039494,0.977097,0.000532873,0,0.0481087,0.972583,0.000594447,0,0.0575549,0.966142,0.000636867,0,0.0678242,0.95823,0.000669899,0,0.0789089,0.949677,0.000719499,0,0.0908023,0.939226,0.000750584,0,0.103499,0.927501,0.000793183,0,0.116993,0.915199,0.00081995,0,0.131282,0.90498,0.000847654,0,0.146364,0.894243,0.000868929,0,0.162237,0.882154,0.000884278,0,0.178902,0.869161,0.000898108,0,0.196358,0.854751,0.000901254,0,0.21461,0.839368,0.00090679,0,0.23366,0.822874,0.000901541,0,0.253512,0.805514,0.000897297,0,0.274174,0.78716,0.000881856,0,0.29565,0.769061,0.000870032,0,0.31795,0.751,0.000851719,0,0.341081,0.732614,0.000830671,0,0.365053,0.713171,0.000806569,0,0.389874,0.693472,0.00078338,0,0.415553,0.673528,0.000756404,0,0.442098,0.653397,0.000726872,0,0.469512,0.633781,0.000700494,0,0.497794,0.613877,0.00067105,0,0.526935,0.593506,0.000640361,0,0.556908,0.573667,0.000613502,0,0.587657,0.553932,0.000583177,0,0.61906,0.534345,0.000554375,0,0.650794,0.515042,0.000527811,0,0.68254,0.495674,0.000499367,0,0.714286,0.477132,0.00047429,0,0.746032,0.458609,0.000447726,0,0.777778,0.440354,0.000424205,0,0.809524,0.422765,0.000399549,0,0.84127,0.405472,0.000378315,0,0.873016,0.388482,0.000355327,0,0.904762,0.372191,0.000336122,0,0.936508,0.356099,0.000315247,0,0.968254,0.340737,0.00029794,0,1,1,0.000143327,0,0,1,0.00014333,0,0,1,0.000143366,0,0,0.999999,0.000143524,0,0,0.999996,0.000143952,0,0,0.999991,0.000144862,0,0,0.999981,0.000146544,0,0,0.999966,0.000149391,0,0,0.999941,0.000153946,0,0,0.999905,0.000160971,0,0,0.999852,0.000171562,0,0,0.99978,0.00018729,0,0,0.999681,0.000210386,0,0.0000826239,0.999546,0.000243906,0,0.000664807,0.999352,0.000291739,0,0.00196192,0.999027,0.000357419,0,0.00405941,0.997886,0.000422349,0,0.00699664,0.99419,0.000385008,0,0.0107896,0.99214,0.000409775,0,0.0154415,0.990274,0.000456418,0,0.0209488,0.988455,0.000527008,0,0.0273037,0.985804,0.000597685,0,0.0344969,0.98103,0.000613124,0,0.0425183,0.976674,0.000668321,0,0.0513575,0.972021,0.000736985,0,0.0610046,0.965274,0.000773789,0,0.0714508,0.958046,0.000830852,0,0.0826877,0.949333,0.000875766,0,0.0947085,0.939135,0.000917088,0,0.107507,0.927119,0.000952244,0,0.121078,0.91469,0.000990626,0,0.135419,0.903006,0.00101304,0,0.150526,0.892368,0.00103834,0,0.166399,0.880231,0.00105002,0,0.183038,0.867432,0.00106331,0,0.200443,0.853208,0.00106783,0,0.218618,0.837956,0.00106458,0,0.237566,0.821772,0.00105945,0,0.257291,0.804328,0.00104685,0,0.2778,0.786465,0.00103178,0,0.2991,0.768004,0.00101077,0,0.321199,0.74972,0.000985504,0,0.344106,0.731682,0.000962893,0,0.36783,0.712813,0.000932146,0,0.392383,0.693139,0.00089871,0,0.417774,0.673566,0.000869678,0,0.444013,0.653483,0.000835525,0,0.471107,0.633891,0.000799853,0,0.49906,0.614433,0.000766838,0,0.527869,0.594586,0.000732227,0,0.557517,0.574769,0.000696442,0,0.587966,0.555149,0.000663935,0,0.61913,0.535898,0.000629826,0,0.650794,0.516753,0.000596486,0,0.68254,0.497816,0.000567078,0,0.714286,0.479034,0.000534399,0,0.746032,0.460975,0.000507013,0,0.777778,0.442935,0.000477421,0,0.809524,0.425263,0.000451101,0,0.84127,0.408248,0.000424964,0,0.873016,0.391339,0.00039993,0,0.904762,0.37513,0.000377619,0,0.936508,0.359172,0.000354418,0,0.968254,0.343876,0.000334823,0,1,1,0.000209042,0,0,1,0.000209045,0,0,1,0.000209093,0,0,0.999999,0.000209304,0,0,0.999996,0.000209871,0,0,0.999991,0.000211078,0,0,0.999979,0.000213304,0,0,0.999963,0.000217061,0,0,0.999933,0.000223042,0,0,0.999894,0.000232206,0,0,0.999837,0.000245901,0,0,0.999756,0.000266023,0,0.00000102927,0.999648,0.000295204,0,0.000233468,0.999499,0.000336958,0,0.00108237,0.999283,0.000395563,0,0.00268832,0.998896,0.000473785,0,0.00511138,0.997006,0.000520008,0,0.00837705,0.993819,0.000497261,0,0.0124928,0.991632,0.000523722,0,0.0174561,0.989875,0.000587258,0,0.0232596,0.988109,0.000676329,0,0.0298932,0.985155,0.000747701,0,0.0373453,0.980479,0.000768803,0,0.0456045,0.976271,0.000841054,0,0.0546593,0.971347,0.000911469,0,0.0644994,0.964528,0.000953057,0,0.0751152,0.957632,0.00102221,0,0.0864981,0.948681,0.00106122,0,0.0986407,0.938716,0.00111857,0,0.111537,0.926629,0.00114762,0,0.125182,0.914025,0.00118995,0,0.139571,0.901026,0.00121228,0,0.154703,0.890358,0.00123946,0,0.170576,0.878283,0.0012527,0,0.18719,0.865459,0.00125536,0,0.204547,0.851407,0.00126134,0,0.222648,0.836276,0.00124759,0,0.241498,0.820436,0.00124443,0,0.261101,0.803253,0.00122071,0,0.281465,0.785562,0.00120107,0,0.302595,0.76718,0.00117762,0,0.324501,0.748551,0.00114289,0,0.347192,0.730564,0.00110872,0,0.370679,0.712253,0.00107636,0,0.394973,0.692867,0.00103646,0,0.420085,0.673695,0.000996793,0,0.446027,0.653912,0.00095675,0,0.47281,0.634129,0.000916739,0,0.500441,0.615004,0.000874401,0,0.528921,0.595587,0.000833411,0,0.558244,0.575965,0.000794556,0,0.588384,0.5566,0.00075196,0,0.619281,0.537428,0.000716381,0,0.650795,0.518623,0.000676558,0,0.68254,0.499964,0.00064074,0,0.714286,0.481356,0.000605984,0,0.746032,0.463279,0.000570256,0,0.777778,0.445673,0.000540138,0,0.809524,0.428032,0.000507299,0,0.84127,0.411112,0.000479553,0,0.873016,0.394444,0.000450737,0,0.904762,0.378247,0.000424269,0,0.936508,0.362415,0.000399111,0,0.968254,0.347103,0.000375274,0,1,1,0.000300729,0,0,1,0.000300733,0,0,1,0.000300797,0,0,0.999998,0.000301072,0,0,0.999996,0.000301817,0,0,0.999989,0.000303398,0,0,0.999977,0.000306309,0,0,0.999958,0.000311209,0,0,0.999927,0.000318975,0,0,0.999884,0.000330804,0,0,0.99982,0.00034834,0,0,0.999733,0.000373854,0,0.0000326995,0.999613,0.000410424,0,0.000477174,0.999447,0.000462047,0,0.00161099,0.999204,0.000533322,0,0.00353153,0.998725,0.000624964,0,0.00627965,0.995871,0.000631786,0,0.0098693,0.993194,0.000632017,0,0.0143011,0.991541,0.00068923,0,0.019568,0.989773,0.000766892,0,0.0256593,0.987647,0.000863668,0,0.0325625,0.984193,0.000922089,0,0.0402647,0.980016,0.000970749,0,0.0487532,0.975859,0.00106027,0,0.058016,0.970514,0.00112239,0,0.0680419,0.963625,0.00117212,0,0.0788208,0.956959,0.00125211,0,0.0903439,0.947956,0.00129411,0,0.102604,0.93809,0.00135879,0,0.115594,0.92659,0.00139309,0,0.129309,0.913829,0.00143253,0,0.143745,0.90005,0.00145809,0,0.158901,0.888129,0.0014748,0,0.174774,0.87607,0.00148756,0,0.191365,0.863461,0.00148714,0,0.208674,0.849594,0.00148892,0,0.226705,0.834531,0.00146496,0,0.245461,0.81903,0.0014579,0,0.264947,0.802122,0.00143039,0,0.28517,0.78445,0.00139717,0,0.306137,0.766434,0.00136312,0,0.327857,0.747816,0.00132597,0,0.350341,0.729519,0.00128323,0,0.373598,0.711454,0.00123803,0,0.397642,0.692699,0.00119097,0,0.422485,0.673723,0.00114565,0,0.448139,0.654386,0.00109552,0,0.474619,0.634673,0.00104553,0,0.501933,0.615554,0.00099985,0,0.530089,0.596462,0.000948207,0,0.559087,0.577385,0.000902299,0,0.588913,0.558257,0.000856448,0,0.619525,0.5392,0.000810395,0,0.650826,0.520543,0.000768558,0,0.68254,0.502206,0.0007239,0,0.714286,0.48402,0.000685794,0,0.746032,0.465779,0.00064471,0,0.777778,0.448455,0.000609583,0,0.809524,0.431091,0.00057227,0,0.84127,0.414147,0.00054042,0,0.873016,0.39765,0.000506545,0,0.904762,0.381576,0.000477635,0,0.936508,0.365881,0.000448446,0,0.968254,0.350582,0.000421424,0,1,1,0.000427144,0,0,1,0.000427151,0,0,1,0.000427232,0,0,0.999998,0.00042759,0,0,0.999995,0.000428555,0,0,0.999988,0.000430603,0,0,0.999976,0.000434368,0,0,0.999952,0.000440688,0,0,0.999919,0.000450667,0,0,0.999871,0.00046578,0,0,0.999801,0.000488024,0,0,0.999704,0.000520092,0,0.000129791,0.999572,0.000565553,0,0.000821056,0.999389,0.000628906,0,0.00225241,0.999114,0.000714911,0,0.00449109,0.998488,0.000819218,0,0.00756249,0.995234,0.00080415,0,0.0114716,0.993021,0.000830181,0,0.0162131,0.991407,0.000902645,0,0.021776,0.989625,0.000996934,0,0.0281471,0.987064,0.00109707,0,0.0353118,0.983265,0.00114353,0,0.0432562,0.979535,0.0012272,0,0.0519665,0.975224,0.00132642,0,0.0614298,0.969574,0.00138092,0,0.0716348,0.963021,0.00145896,0,0.0825709,0.956046,0.00152834,0,0.094229,0.947136,0.00158217,0,0.106602,0.937313,0.0016347,0,0.119682,0.926073,0.00168383,0,0.133465,0.913121,0.00171627,0,0.147947,0.899165,0.00174229,0,0.163125,0.885891,0.00176137,0,0.178998,0.873783,0.00176406,0,0.195566,0.861331,0.00176156,0,0.21283,0.847569,0.00175346,0,0.230793,0.832785,0.00172753,0,0.249459,0.817442,0.00170204,0,0.268832,0.800613,0.00166576,0,0.28892,0.783597,0.00162909,0,0.30973,0.76571,0.0015826,0,0.331271,0.747021,0.00153106,0,0.353554,0.728593,0.00148036,0,0.37659,0.710661,0.00142808,0,0.400391,0.692426,0.00136906,0,0.424973,0.673623,0.00131066,0,0.450347,0.65494,0.00125569,0,0.476531,0.635448,0.00119517,0,0.503535,0.616221,0.00113828,0,0.531372,0.597531,0.0010816,0,0.560047,0.578795,0.00102673,0,0.589554,0.559892,0.000970985,0,0.619869,0.541307,0.000919773,0,0.650923,0.522608,0.000868479,0,0.68254,0.504484,0.00082137,0,0.714286,0.486603,0.000772916,0,0.746032,0.468802,0.000730353,0,0.777778,0.451172,0.000684955,0,0.809524,0.434348,0.000647565,0,0.84127,0.417445,0.000605863,0,0.873016,0.401077,0.000571885,0,0.904762,0.385039,0.000536034,0,0.936508,0.369483,0.000504227,0,0.968254,0.354272,0.000473165,0,1,1,0.000599525,0,0,1,0.000599533,0,0,1,0.000599639,0,0,0.999998,0.000600097,0,0,0.999994,0.000601336,0,0,0.999987,0.000603958,0,0,0.999972,0.000608775,0,0,0.999949,0.000616842,0,0,0.999912,0.000629534,0,0,0.999857,0.000648658,0,0,0.999781,0.000676615,0,0.00000538873,0.999674,0.000716574,0,0.000308602,0.999528,0.000772641,0,0.00127003,0.999326,0.000849806,0,0.00300783,0.999009,0.000952682,0,0.00556637,0.998112,0.00106394,0,0.00895889,0.994496,0.00102228,0,0.0131827,0.992806,0.00108586,0,0.0182277,0.991211,0.0011759,0,0.0240795,0.989415,0.00128955,0,0.030723,0.986499,0.00139038,0,0.0381418,0.982679,0.00144539,0,0.046321,0.978839,0.00153954,0,0.0552459,0.974295,0.00164417,0,0.0649034,0.968784,0.00171517,0,0.0752814,0.962324,0.00180282,0,0.0863693,0.954956,0.00186387,0,0.0981578,0.94624,0.00193817,0,0.110639,0.936517,0.00198156,0,0.123806,0.925186,0.00203042,0,0.137655,0.91252,0.0020664,0,0.15218,0.898441,0.00207822,0,0.16738,0.884394,0.0020992,0,0.183253,0.871273,0.00208748,0,0.199799,0.859057,0.00208686,0,0.21702,0.845243,0.00205519,0,0.234918,0.830723,0.00202868,0,0.253496,0.815801,0.00199501,0,0.272761,0.79914,0.00194193,0,0.292719,0.782372,0.00188824,0,0.313377,0.76482,0.00183695,0,0.334745,0.746586,0.00177418,0,0.356833,0.7281,0.00170628,0,0.379654,0.709842,0.00164063,0,0.403221,0.692019,0.00157355,0,0.427548,0.67364,0.00150262,0,0.452651,0.655277,0.00143473,0,0.478545,0.636438,0.00136371,0,0.505246,0.617364,0.00129911,0,0.532768,0.598603,0.00123014,0,0.561122,0.580195,0.00116587,0,0.590309,0.561786,0.00110398,0,0.620318,0.543377,0.00104148,0,0.651102,0.525093,0.000983984,0,0.682545,0.506791,0.00092667,0,0.714286,0.489291,0.000874326,0,0.746032,0.471811,0.000821734,0,0.777778,0.454435,0.000774698,0,0.809524,0.437493,0.000727302,0,0.84127,0.420977,0.000684039,0,0.873016,0.404729,0.00064373,0,0.904762,0.388756,0.00060285,0,0.936508,0.373344,0.00056765,0,0.968254,0.358191,0.000531929,0,1,1,0.000832169,0,0,1,0.000832178,0,0,1,0.00083231,0,0,0.999998,0.000832893,0,0,0.999995,0.000834465,0,0,0.999985,0.000837791,0,0,0.999969,0.000843893,0,0,0.999944,0.000854086,0,0,0.999903,0.000870071,0,0,0.999843,0.000894042,0,0,0.999759,0.000928865,0,0.0000531805,0.999643,0.000978242,0,0.000579365,0.99948,0.00104684,0,0.00182774,0.999255,0.00114012,0,0.00387804,0.998885,0.00126188,0,0.00675709,0.997405,0.00135888,0,0.010468,0.99424,0.00133626,0,0.0150018,0.992458,0.00140905,0,0.0203443,0.990929,0.00152305,0,0.0264786,0.989116,0.00165882,0,0.0333875,0.985624,0.00174128,0,0.0410536,0.982003,0.00182108,0,0.0494609,0.978336,0.00194498,0,0.0585941,0.973184,0.00202708,0,0.0684396,0.9678,0.00212166,0,0.0789851,0.961348,0.00221366,0,0.0902199,0.953841,0.00228219,0,0.102134,0.94534,0.00235662,0,0.114721,0.935552,0.00240572,0,0.127972,0.924064,0.00244405,0,0.141884,0.911827,0.00247557,0,0.156451,0.897731,0.00248374,0,0.171672,0.883409,0.00249863,0,0.187545,0.868625,0.00246688,0,0.20407,0.856529,0.00246523,0,0.221249,0.842999,0.00242368,0,0.239083,0.828505,0.00237354,0,0.257578,0.813825,0.00232588,0,0.276738,0.797813,0.00226731,0,0.296569,0.781097,0.00219704,0,0.31708,0.764038,0.00212394,0,0.338281,0.746067,0.00204786,0,0.360181,0.727687,0.00196728,0,0.382794,0.709571,0.00188779,0,0.406133,0.691503,0.00180532,0,0.430213,0.673673,0.00171849,0,0.45505,0.655732,0.00164147,0,0.480662,0.637399,0.00155858,0,0.507065,0.618616,0.00147641,0,0.534278,0.60005,0.00140125,0,0.562313,0.581713,0.00132441,0,0.59118,0.563546,0.00125014,0,0.620875,0.545605,0.00118249,0,0.651373,0.527559,0.0011116,0,0.682593,0.509764,0.00104979,0,0.714286,0.49193,0.000985977,0,0.746032,0.475011,0.000928592,0,0.777778,0.457878,0.000873466,0,0.809524,0.440979,0.000819585,0,0.84127,0.424613,0.000772365,0,0.873016,0.408549,0.000722195,0,0.904762,0.392771,0.000680014,0,0.936508,0.377317,0.000636797,0,0.968254,0.362352,0.000598318,0,1,1,0.00114313,0,0,1,0.00114314,0,0,0.999999,0.00114331,0,0,0.999998,0.00114404,0,0,0.999994,0.00114601,0,0,0.999984,0.00115019,0,0,0.999967,0.00115784,0,0,0.999937,0.0011706,0,0,0.999894,0.00119054,0,0,0.999828,0.00122031,0,0,0.999735,0.00126331,0,0.000169263,0.999606,0.00132382,0,0.000949167,0.999426,0.0014071,0,0.00249668,0.999173,0.00151895,0,0.00486392,0.99873,0.00166102,0,0.00806323,0.996243,0.0017023,0,0.0120895,0.993779,0.00172782,0,0.0169288,0.9919,0.0018108,0,0.0225633,0.990524,0.00196028,0,0.028974,0.98868,0.00212014,0,0.036142,0.984663,0.00217598,0,0.044049,0.981457,0.00230563,0,0.0526781,0.977608,0.00243966,0,0.0620137,0.972215,0.00251336,0,0.0720418,0.966798,0.0026285,0,0.0827499,0.960241,0.00271409,0,0.0941271,0.952489,0.00278381,0,0.106164,0.944127,0.00285399,0,0.118852,0.934282,0.00290994,0,0.132185,0.923271,0.00294558,0,0.146157,0.910803,0.00296269,0,0.160766,0.896705,0.00296803,0,0.176007,0.88238,0.00296637,0,0.19188,0.867116,0.00293163,0,0.208385,0.853636,0.00289418,0,0.225523,0.840469,0.00284663,0,0.243296,0.82639,0.00278594,0,0.261709,0.811759,0.00271618,0,0.280767,0.796113,0.00263187,0,0.300476,0.779518,0.00254589,0,0.320845,0.763142,0.00246003,0,0.341883,0.745464,0.00236529,0,0.363601,0.727491,0.00226536,0,0.386011,0.709414,0.00216375,0,0.409128,0.691396,0.00207127,0,0.432967,0.67368,0.00197106,0,0.457545,0.656049,0.00187022,0,0.482881,0.638188,0.00177605,0,0.508992,0.620177,0.00168482,0,0.535899,0.601506,0.00158909,0,0.563619,0.58362,0.00150583,0,0.592165,0.565496,0.00141791,0,0.621544,0.54789,0.00133693,0,0.651743,0.530323,0.00126038,0,0.682709,0.512795,0.00118556,0,0.714286,0.495199,0.00111527,0,0.746032,0.478101,0.0010489,0,0.777778,0.461511,0.000984264,0,0.809524,0.444879,0.00092591,0,0.84127,0.428424,0.000866582,0,0.873016,0.412495,0.000814463,0,0.904762,0.396975,0.000764498,0,0.936508,0.381614,0.000715967,0,0.968254,0.366732,0.000672483,0,1,1,0.00155501,0,0,1,0.00155503,0,0,1,0.00155524,0,0,0.999998,0.00155615,0,0,0.999994,0.0015586,0,0,0.999983,0.00156379,0,0,0.999963,0.0015733,0,0,0.999932,0.00158911,0,0,0.999882,0.00161376,0,0,0.99981,0.00165041,0,0.0000100875,0.999708,0.00170304,0,0.000367658,0.999565,0.00177658,0,0.0014234,0.999368,0.00187688,0,0.00327939,0.999081,0.00200989,0,0.00596629,0.99852,0.00217177,0,0.0094852,0.99549,0.0021745,0,0.013824,0.993252,0.00222357,0,0.0189642,0.991727,0.00235022,0,0.0248856,0.989951,0.00250561,0,0.0315669,0.988029,0.00268829,0,0.0389882,0.984029,0.0027496,0,0.0471302,0.980683,0.00289793,0,0.0559754,0.976554,0.00303315,0,0.0655081,0.97139,0.00313257,0,0.0757138,0.965544,0.00323656,0,0.08658,0.95912,0.00333432,0,0.0980954,0.951183,0.0034039,0,0.110251,0.942974,0.00347515,0,0.123038,0.932642,0.00350381,0,0.13645,0.922158,0.00354519,0,0.150482,0.909404,0.00353851,0,0.165129,0.896071,0.0035435,0,0.18039,0.881206,0.00349936,0,0.196263,0.866077,0.00347256,0,0.212748,0.85093,0.003415,0,0.229847,0.837703,0.00333367,0,0.247561,0.823878,0.003249,0,0.265895,0.809449,0.00316347,0,0.284854,0.794379,0.00306351,0,0.304445,0.778138,0.0029499,0,0.324675,0.761997,0.00284099,0,0.345555,0.744938,0.00272104,0,0.367095,0.727212,0.00260715,0,0.389309,0.709549,0.00248855,0,0.41221,0.691704,0.00236783,0,0.435814,0.673689,0.00225178,0,0.460138,0.656453,0.00213765,0,0.485203,0.639128,0.00202178,0,0.511028,0.621512,0.00191443,0,0.537634,0.603598,0.00180977,0,0.565041,0.58559,0.00170456,0,0.593268,0.567852,0.00160927,0,0.622327,0.5503,0.00151395,0,0.652217,0.533033,0.00142499,0,0.682907,0.515942,0.00133955,0,0.714296,0.498814,0.0012602,0,0.746032,0.481595,0.00118188,0,0.777778,0.465117,0.00111171,0,0.809524,0.448865,0.00104091,0,0.84127,0.432711,0.000976618,0,0.873016,0.416822,0.00091859,0,0.904762,0.401272,0.000857704,0,0.936508,0.386226,0.000807172,0,0.968254,0.371321,0.00075464,0,1,1,0.00209596,0,0,1,0.00209598,0,0,1,0.00209624,0,0,0.999997,0.00209736,0,0,0.999991,0.00210039,0,0,0.999979,0.00210678,0,0,0.999959,0.00211847,0,0,0.999925,0.0021379,0,0,0.99987,0.00216809,0,0,0.999791,0.00221281,0,0.0000681487,0.999677,0.00227669,0,0.000658161,0.999521,0.00236533,0,0.00200635,0.999301,0.00248514,0,0.0041779,0.998977,0.00264185,0,0.00718648,0.998191,0.00281695,0,0.0110239,0.994801,0.00278518,0,0.015672,0.993091,0.00288774,0,0.0211091,0.991571,0.00303931,0,0.0273123,0.9897,0.00321643,0,0.034259,0.987023,0.00337332,0,0.0419282,0.983289,0.00346146,0,0.0502998,0.979892,0.00363704,0,0.0593562,0.975111,0.00373601,0,0.069081,0.970351,0.0038842,0,0.0794598,0.964131,0.00397053,0,0.0904798,0.957747,0.00408078,0,0.10213,0.949536,0.00413533,0,0.1144,0.941372,0.00420305,0,0.127284,0.931049,0.00422815,0,0.140772,0.920647,0.00425048,0,0.154862,0.908033,0.0042281,0,0.169548,0.895028,0.00422026,0,0.184828,0.879968,0.00415042,0,0.200701,0.864875,0.00408821,0,0.217167,0.84918,0.00400909,0,0.234227,0.834934,0.00391178,0,0.251884,0.821397,0.00380066,0,0.270141,0.807135,0.00367974,0,0.289004,0.792363,0.00355172,0,0.308479,0.776661,0.003411,0,0.328575,0.760705,0.00328123,0,0.349301,0.744408,0.00314003,0,0.370668,0.726994,0.0029906,0,0.392689,0.709598,0.00285034,0,0.415379,0.692112,0.00271179,0,0.438754,0.674435,0.00257185,0,0.46283,0.65676,0.00243425,0,0.48763,0.639982,0.00230351,0,0.513173,0.622983,0.0021777,0,0.539482,0.605471,0.00204991,0,0.566579,0.58796,0.00193759,0,0.594488,0.570463,0.00181976,0,0.623226,0.553058,0.00171497,0,0.6528,0.535894,0.00161109,0,0.683198,0.519089,0.00151394,0,0.714354,0.502454,0.00142122,0,0.746032,0.485681,0.00133488,0,0.777778,0.468935,0.00124975,0,0.809524,0.452951,0.00117309,0,0.84127,0.437139,0.00110155,0,0.873016,0.421446,0.00103124,0,0.904762,0.405951,0.000966387,0,0.936508,0.391003,0.000908119,0,0.968254,0.376198,0.000848057,0,1,1,0.00280076,0,0,1,0.00280078,0,0,0.999999,0.00280109,0,0,0.999997,0.00280246,0,0,0.999992,0.00280616,0,0,0.999979,0.00281396,0,0,0.999956,0.00282822,0,0,0.999916,0.00285186,0,0,0.999857,0.0028885,0,0,0.999768,0.00294259,0,0.000196026,0.999645,0.00301946,0,0.00104842,0.99947,0.00312541,0,0.00270199,0.999229,0.00326733,0,0.00519449,0.998852,0.00344992,0,0.00852602,0.997558,0.00361052,0,0.0126804,0.994417,0.0035898,0,0.017635,0.992824,0.00372393,0,0.023365,0.991344,0.00390695,0,0.0298456,0.989337,0.00410392,0,0.0370529,0.985811,0.00420987,0,0.0449651,0.982772,0.00437488,0,0.0535615,0.979001,0.00455069,0,0.0628243,0.974102,0.00464462,0,0.0727368,0.969197,0.00480577,0,0.0832844,0.962759,0.00487818,0,0.0944545,0.956207,0.00498176,0,0.106236,0.947909,0.00503392,0,0.118619,0.939596,0.00507474,0,0.131595,0.929642,0.00509798,0,0.145159,0.918807,0.00508476,0,0.159305,0.906921,0.00505634,0,0.174028,0.893312,0.00498845,0,0.189327,0.878933,0.0049133,0,0.2052,0.863986,0.0048259,0,0.221647,0.847936,0.00470848,0,0.23867,0.832253,0.00456889,0,0.25627,0.818619,0.00442726,0,0.274453,0.804788,0.00427677,0,0.293222,0.790241,0.00411906,0,0.312585,0.775162,0.00394833,0,0.33255,0.759463,0.00377366,0,0.353126,0.743598,0.00361026,0,0.374324,0.72697,0.00343627,0,0.396158,0.709646,0.00326422,0,0.418641,0.69277,0.00309717,0,0.44179,0.675371,0.0029356,0,0.465624,0.657863,0.00277712,0,0.490163,0.640772,0.00261738,0,0.515429,0.624441,0.0024737,0,0.541445,0.607497,0.00233125,0,0.568236,0.590438,0.00218994,0,0.595828,0.573224,0.0020664,0,0.624242,0.556168,0.00193526,0,0.653496,0.539232,0.00182463,0,0.683588,0.522352,0.00170735,0,0.714482,0.506172,0.00160555,0,0.746032,0.489842,0.00150451,0,0.777778,0.473463,0.00140938,0,0.809524,0.457266,0.00132568,0,0.84127,0.441609,0.0012376,0,0.873016,0.426348,0.00116265,0,0.904762,0.411002,0.00108935,0,0.936508,0.396045,0.00101946,0,0.968254,0.381448,0.000955665,0,1,1,0.0037121,0,0,1,0.00371213,0,0,1,0.00371251,0,0,0.999997,0.00371417,0,0,0.99999,0.00371863,0,0,0.999977,0.00372807,0,0,0.99995,0.00374529,0,0,0.999908,0.0037738,0,0,0.999843,0.00381789,0,0.0000123596,0.999745,0.00388273,0,0.000407442,0.999608,0.00397443,0,0.0015447,0.999415,0.00409998,0,0.00351385,0.999143,0.00426662,0,0.0063316,0.9987,0.00447625,0,0.00998679,0.996363,0.00455323,0,0.0144569,0.994021,0.00461052,0,0.0197151,0.992372,0.00476359,0,0.0257344,0.991007,0.00499101,0,0.0324882,0.988767,0.0051972,0,0.0399517,0.984872,0.00528407,0,0.0481022,0.982004,0.00548926,0,0.0569191,0.977714,0.00564385,0,0.0663839,0.973076,0.0057693,0,0.0764801,0.967565,0.0058924,0,0.0871928,0.961384,0.00599629,0,0.0985095,0.954435,0.00605998,0,0.110419,0.946303,0.0061133,0,0.122912,0.937662,0.00612028,0,0.13598,0.927867,0.00612209,0,0.149617,0.916475,0.00604813,0,0.163817,0.90541,0.00603088,0,0.178577,0.891591,0.00592218,0,0.193894,0.877573,0.00578854,0,0.209767,0.862511,0.00566648,0,0.226196,0.846861,0.00551481,0,0.243182,0.83068,0.00533754,0,0.260728,0.815725,0.00515487,0,0.278837,0.802321,0.0049655,0,0.297515,0.787826,0.00475421,0,0.316768,0.773454,0.00456002,0,0.336605,0.758224,0.00434727,0,0.357034,0.74265,0.00414444,0,0.378067,0.726729,0.00393738,0,0.399717,0.710155,0.00373575,0,0.421998,0.693312,0.00353736,0,0.444928,0.67653,0.00334368,0,0.468523,0.659444,0.00315981,0,0.492806,0.642051,0.00297809,0,0.517798,0.625758,0.00280592,0,0.543525,0.609615,0.00264254,0,0.570012,0.592919,0.00248459,0,0.597288,0.576298,0.00233327,0,0.625379,0.559489,0.00219519,0,0.654307,0.542891,0.00205441,0,0.684084,0.526255,0.00193385,0,0.714693,0.509853,0.00180745,0,0.746044,0.494131,0.00169817,0,0.777778,0.478114,0.0015913,0,0.809524,0.462274,0.00148981,0,0.84127,0.446412,0.00139537,0,0.873016,0.431274,0.00130984,0,0.904762,0.41635,0.00122403,0,0.936508,0.401476,0.00114809,0,0.968254,0.386993,0.00107563,0,1,1,0.00488216,0,0,1,0.0048822,0,0,1,0.00488265,0,0,0.999997,0.00488463,0,0,0.999988,0.00488999,0,0,0.999974,0.00490129,0,0,0.999946,0.00492191,0,0,0.999897,0.00495598,0,0,0.999825,0.00500855,0,0.0000744791,0.999718,0.00508559,0,0.000712744,0.999565,0.005194,0,0.00215249,0.999352,0.00534147,0,0.00444576,0.999046,0.00553523,0,0.00759218,0.998492,0.00577016,0,0.0115714,0.995564,0.00578487,0,0.0163557,0.993339,0.00586414,0,0.021915,0.991834,0.00606002,0,0.0282201,0.990496,0.00633312,0,0.0352433,0.987826,0.00651941,0,0.042959,0.98383,0.00660842,0,0.0513439,0.98109,0.00685523,0,0.0603772,0.976131,0.00695778,0,0.0700402,0.971922,0.00714236,0,0.0803163,0.965901,0.00721437,0,0.0911908,0.959606,0.00732017,0,0.102651,0.952504,0.00735788,0,0.114686,0.944365,0.00738493,0,0.127286,0.935652,0.00737969,0,0.140443,0.925813,0.00733612,0,0.154151,0.914397,0.00723094,0,0.168405,0.903257,0.00714002,0,0.183201,0.890015,0.00700149,0,0.198536,0.876014,0.00682813,0,0.214409,0.861436,0.00665567,0,0.23082,0.845752,0.00644526,0,0.24777,0.829169,0.00621635,0,0.265263,0.813435,0.00597789,0,0.283301,0.799701,0.00575694,0,0.301889,0.785726,0.00549866,0,0.321035,0.77152,0.0052503,0,0.340746,0.75683,0.00499619,0,0.361032,0.741951,0.0047543,0,0.381904,0.726367,0.0045084,0,0.403374,0.710537,0.00426784,0,0.425457,0.693965,0.00403487,0,0.448169,0.677724,0.0038075,0,0.47153,0.66117,0.00359431,0,0.495561,0.644274,0.00338354,0,0.520284,0.627449,0.00318163,0,0.545725,0.611645,0.00299672,0,0.571911,0.595614,0.00281016,0,0.598873,0.579426,0.00264252,0,0.62664,0.563016,0.00247509,0,0.655239,0.546728,0.00232647,0,0.684692,0.530539,0.00217803,0,0.714999,0.514164,0.00204216,0,0.746106,0.498344,0.00191403,0,0.777778,0.482957,0.00179203,0,0.809524,0.467336,0.00167695,0,0.84127,0.451994,0.00157567,0,0.873016,0.436514,0.00147113,0,0.904762,0.42178,0.00138034,0,0.936508,0.407271,0.00129219,0,0.968254,0.392822,0.0012098,0,1,1,0.00637427,0,0,1,0.00637431,0,0,0.999999,0.00637485,0,0,0.999996,0.00637721,0,0,0.999987,0.00638357,0,0,0.999971,0.006397,0,0,0.999939,0.00642142,0,0,0.999888,0.00646177,0,0,0.999807,0.00652387,0,0.000207916,0.999689,0.00661454,0,0.00112051,0.99952,0.00674155,0,0.00287719,0.999283,0.00691313,0,0.00550145,0.998936,0.00713598,0,0.00897928,0.998165,0.00738501,0,0.0132829,0.994847,0.00734388,0,0.01838,0.993182,0.00749991,0,0.0242381,0.991665,0.0077246,0,0.030826,0.989708,0.00797579,0,0.0381152,0.986663,0.00813011,0,0.0460794,0.983288,0.00830365,0,0.0546951,0.980104,0.00853496,0,0.0639411,0.974855,0.00861045,0,0.0737988,0.97045,0.00879133,0,0.0842516,0.964509,0.00886377,0,0.0952848,0.957594,0.00890346,0,0.106886,0.950546,0.00893289,0,0.119044,0.942225,0.00890074,0,0.131749,0.933365,0.00886826,0,0.144994,0.923202,0.0087316,0,0.158772,0.912605,0.00863082,0,0.173078,0.901099,0.00847403,0,0.187908,0.888177,0.00825838,0,0.203261,0.873955,0.00801834,0,0.219134,0.860091,0.00779026,0,0.235527,0.84434,0.00752478,0,0.252443,0.828517,0.00724074,0,0.269883,0.81239,0.00693769,0,0.287851,0.79721,0.00664817,0,0.306352,0.783489,0.00634763,0,0.325393,0.769514,0.00604221,0,0.344981,0.755419,0.00573568,0,0.365126,0.741083,0.00544359,0,0.385839,0.726059,0.00515515,0,0.407132,0.710809,0.00487139,0,0.42902,0.695052,0.00459846,0,0.45152,0.678886,0.00433412,0,0.474651,0.663042,0.00407981,0,0.498433,0.646634,0.00384264,0,0.52289,0.630117,0.00360897,0,0.548048,0.613804,0.00338863,0,0.573936,0.598338,0.00318486,0,0.600584,0.582687,0.00298377,0,0.628027,0.566809,0.00280082,0,0.656295,0.550817,0.00262255,0,0.685417,0.534937,0.00245835,0,0.715406,0.519151,0.00230574,0,0.74624,0.503118,0.0021549,0,0.777778,0.487723,0.00202008,0,0.809524,0.472725,0.00189355,0,0.84127,0.457599,0.00177108,0,0.873016,0.442558,0.00165843,0,0.904762,0.427624,0.00155494,0,0.936508,0.413171,0.00145273,0,0.968254,0.399122,0.00136454,0,1,1,0.00826496,0,0,1,0.00826499,0,0,1,0.00826564,0,0,0.999996,0.00826842,0,0,0.999987,0.00827589,0,0,0.999967,0.00829167,0,0,0.999933,0.00832037,0,0,0.999876,0.00836768,0,0.0000109338,0.999786,0.00844031,0,0.000427145,0.999655,0.00854603,0,0.0016384,0.999468,0.00869337,0,0.00372392,0.999203,0.008891,0,0.00668513,0.998803,0.00914387,0,0.0104968,0.99748,0.00935838,0,0.015125,0.994446,0.00933309,0,0.0205338,0.99292,0.00953084,0,0.0266884,0.991414,0.0097893,0,0.0335565,0.989049,0.0100228,0,0.0411086,0.98582,0.0101664,0,0.0493181,0.982441,0.0103582,0,0.0581613,0.978595,0.0105292,0,0.0676169,0.973495,0.0106274,0,0.0776661,0.968405,0.0107261,0,0.0882926,0.962717,0.0108234,0,0.0994817,0.955478,0.0108102,0,0.111221,0.948275,0.0107914,0,0.123499,0.940006,0.0107161,0,0.136308,0.930831,0.0106309,0,0.149639,0.920648,0.0104083,0,0.163485,0.910205,0.0102312,0,0.177843,0.898445,0.0100051,0,0.192707,0.885986,0.00971928,0,0.208077,0.872204,0.00940747,0,0.22395,0.858436,0.0091085,0,0.240326,0.843454,0.00876595,0,0.257208,0.827437,0.00839794,0,0.274596,0.811488,0.00803692,0,0.292496,0.796039,0.00767352,0,0.310911,0.781083,0.0073097,0,0.329849,0.767642,0.00694032,0,0.349316,0.753901,0.00657476,0,0.369323,0.740131,0.00622699,0,0.38988,0.725845,0.0058838,0,0.410999,0.710991,0.00555586,0,0.432696,0.696002,0.00523089,0,0.454987,0.680461,0.00492494,0,0.47789,0.664875,0.00463464,0,0.501426,0.649273,0.00435422,0,0.52562,0.63302,0.0040875,0,0.550498,0.61705,0.00384075,0,0.576089,0.601154,0.00359557,0,0.602427,0.586008,0.00337636,0,0.629544,0.570699,0.00316019,0,0.657479,0.555166,0.00296033,0,0.686264,0.539645,0.00277552,0,0.715924,0.524159,0.00259499,0,0.746459,0.508682,0.00243257,0,0.777789,0.493163,0.00227851,0,0.809524,0.478004,0.00213083,0,0.84127,0.46347,0.00199502,0,0.873016,0.448778,0.00186967,0,0.904762,0.434105,0.00174732,0,0.936508,0.419576,0.00163861,0,0.968254,0.405541,0.00153341,0,1,1,0.0106462,0,0,1,0.0106462,0,0,0.999999,0.010647,0,0,0.999995,0.0106502,0,0,0.999985,0.0106589,0,0,0.999964,0.0106773,0,0,0.999925,0.0107106,0,0,0.999861,0.0107655,0,0.0000712986,0.999763,0.0108497,0,0.000743959,0.999616,0.0109716,0,0.00227361,0.999408,0.0111408,0,0.0046983,0.999112,0.0113659,0,0.00800158,0.998637,0.0116475,0,0.0121493,0.996223,0.0117231,0,0.0171023,0.994006,0.0118064,0,0.0228218,0.992444,0.0120254,0,0.0292711,0.991028,0.0123314,0,0.036417,0.98803,0.0124954,0,0.0442295,0.984816,0.0126538,0,0.0526815,0.981399,0.0128537,0,0.0617492,0.977085,0.0129694,0,0.0714114,0.972154,0.013091,0,0.0816495,0.966617,0.0131166,0,0.0924472,0.960628,0.0131583,0,0.10379,0.953295,0.0131094,0,0.115665,0.94575,0.0129966,0,0.128062,0.937654,0.0128796,0,0.140972,0.927716,0.0126477,0,0.154387,0.917932,0.0123889,0,0.168301,0.907719,0.012131,0,0.182709,0.89584,0.0118013,0,0.197608,0.883526,0.0114145,0,0.212994,0.870301,0.0110075,0,0.228867,0.856272,0.0106019,0,0.245227,0.842251,0.0101938,0,0.262074,0.826466,0.00973254,0,0.279412,0.810859,0.0092846,0,0.297244,0.795051,0.00883304,0,0.315575,0.780053,0.00840272,0,0.334412,0.76575,0.00796438,0,0.35376,0.752298,0.00752526,0,0.373631,0.739153,0.00711486,0,0.394034,0.725514,0.00670361,0,0.414983,0.711473,0.00632656,0,0.436491,0.696936,0.00595206,0,0.458575,0.682126,0.00559191,0,0.481253,0.667027,0.00525362,0,0.504547,0.651875,0.00493805,0,0.528481,0.636463,0.00462848,0,0.553081,0.620641,0.00433936,0,0.578377,0.604931,0.00407,0,0.604404,0.589549,0.00380864,0,0.631197,0.574712,0.00357049,0,0.658795,0.559775,0.00334466,0,0.687238,0.544514,0.00312505,0,0.716559,0.529555,0.00293199,0,0.746776,0.514402,0.00274204,0,0.777849,0.499302,0.00256647,0,0.809524,0.484114,0.00239901,0,0.84127,0.469308,0.00225148,0,0.873016,0.455133,0.00210178,0,0.904762,0.440939,0.0019727,0,0.936508,0.426627,0.00184382,0,0.968254,0.412509,0.00172548,0,1,1,0.013628,0,0,1,0.0136281,0,0,0.999999,0.0136289,0,0,0.999995,0.0136327,0,0,0.999983,0.0136427,0,0,0.99996,0.0136638,0,0,0.999917,0.0137022,0,0,0.999846,0.0137652,0,0.000204597,0.999736,0.0138615,0,0.00116837,0.999573,0.0140007,0,0.00303325,0.99934,0.0141927,0,0.00580613,0.999004,0.0144457,0,0.00945626,0.998407,0.0147489,0,0.0139421,0.995464,0.014731,0,0.0192202,0.993328,0.0148283,0,0.0252495,0.991799,0.0150797,0,0.0319921,0.990397,0.0154316,0,0.0394138,0.986835,0.0155005,0,0.0474843,0.983938,0.0157308,0,0.0561763,0.980154,0.0158753,0,0.0654661,0.975659,0.0159581,0,0.0753326,0.970171,0.0159832,0,0.0857571,0.964803,0.0160084,0,0.0967236,0.958366,0.0159484,0,0.108218,0.950613,0.0158001,0,0.120227,0.942874,0.0155845,0,0.132741,0.935005,0.0154292,0,0.145751,0.924991,0.0150742,0,0.159249,0.914814,0.0146757,0,0.17323,0.904743,0.0143097,0,0.187687,0.893216,0.0138695,0,0.202619,0.880769,0.0133706,0,0.218021,0.868136,0.0128606,0,0.233894,0.85469,0.0123403,0,0.250238,0.840593,0.0118091,0,0.267052,0.825808,0.011253,0,0.284341,0.81009,0.0107099,0,0.302106,0.79504,0.0101636,0,0.320354,0.779757,0.00964041,0,0.33909,0.764697,0.00911896,0,0.358322,0.750913,0.00859533,0,0.378059,0.738175,0.00811592,0,0.398311,0.725242,0.00764504,0,0.41909,0.711864,0.00718885,0,0.440412,0.698009,0.00675843,0,0.462292,0.683841,0.00634984,0,0.484748,0.669391,0.00595502,0,0.507802,0.654731,0.00558671,0,0.531477,0.639805,0.00523578,0,0.555802,0.624789,0.00490834,0,0.580805,0.609325,0.00459448,0,0.606522,0.593975,0.00430342,0,0.63299,0.578983,0.00403019,0,0.66025,0.564442,0.0037707,0,0.688346,0.549835,0.0035316,0,0.717319,0.535039,0.00330255,0,0.7472,0.520403,0.00308932,0,0.777982,0.505687,0.00289335,0,0.809524,0.490939,0.00270818,0,0.84127,0.476233,0.0025343,0,0.873016,0.461624,0.00237097,0,0.904762,0.447833,0.00222065,0,0.936508,0.433992,0.00207561,0,0.968254,0.420147,0.00194955,0,1,1,0.0173415,0,0,1,0.0173416,0,0,0.999999,0.0173426,0,0,0.999995,0.0173468,0,0,0.999983,0.0173582,0,0,0.999954,0.0173822,0,0,0.999908,0.0174258,0,0.00000669501,0.999828,0.0174973,0,0.000427399,0.999705,0.0176063,0,0.00171019,0.999524,0.0177631,0,0.0039248,0.999263,0.0179781,0,0.00705382,0.998878,0.018258,0,0.0110552,0.998012,0.0185551,0,0.0158812,0.994614,0.0184264,0,0.0214852,0.993132,0.0186385,0,0.0278239,0.991563,0.0189067,0,0.0348585,0.989298,0.0191577,0,0.0425544,0.986036,0.0192522,0,0.050881,0.982558,0.0194063,0,0.059811,0.978531,0.019486,0,0.0693209,0.974198,0.0195847,0,0.0793895,0.968148,0.0194749,0,0.0899984,0.962565,0.0194277,0,0.101132,0.956041,0.0192991,0,0.112775,0.947749,0.0189893,0,0.124917,0.94018,0.018704,0,0.137547,0.93165,0.0183458,0,0.150655,0.921798,0.0178775,0,0.164236,0.911573,0.0173618,0,0.178281,0.901569,0.0168482,0,0.192788,0.890341,0.016265,0,0.207752,0.877835,0.0156199,0,0.223171,0.865472,0.0149516,0,0.239044,0.852905,0.0143274,0,0.255371,0.838906,0.0136643,0,0.272153,0.824888,0.0129903,0,0.289393,0.809977,0.0123218,0,0.307093,0.794697,0.0116572,0,0.325259,0.780028,0.0110307,0,0.343896,0.765124,0.0104236,0,0.363012,0.750411,0.0098219,0,0.382617,0.737264,0.00924397,0,0.402719,0.724799,0.00868719,0,0.423332,0.712253,0.00816476,0,0.444469,0.699267,0.00767262,0,0.466146,0.685618,0.00719746,0,0.488383,0.671736,0.00673916,0,0.511199,0.657777,0.00631937,0,0.534618,0.643497,0.00592411,0,0.558668,0.62889,0.00553928,0,0.58338,0.614299,0.0051934,0,0.608787,0.599197,0.00485985,0,0.634929,0.584175,0.00454357,0,0.661849,0.569541,0.00425787,0,0.689594,0.555193,0.00397905,0,0.718211,0.540947,0.00372364,0,0.747742,0.526593,0.00348599,0,0.778205,0.512335,0.00326103,0,0.80953,0.498017,0.00305137,0,0.84127,0.483609,0.00285485,0,0.873016,0.469368,0.00267472,0,0.904762,0.455037,0.00249945,0,0.936508,0.441493,0.00234792,0,0.968254,0.428147,0.00219936,0,1,1,0.0219422,0,0,1,0.0219423,0,0,0.999998,0.0219434,0,0,0.999993,0.0219481,0,0,0.999981,0.021961,0,0,0.999949,0.0219879,0,0,0.999896,0.0220367,0,0.0000593194,0.999808,0.0221167,0,0.00075364,0.99967,0.0222383,0,0.00237884,0.999466,0.0224125,0,0.00495612,0.999174,0.0226495,0,0.00844887,0.998725,0.0229525,0,0.0128058,0.996979,0.0231123,0,0.0179742,0.994317,0.0230742,0,0.0239047,0.992781,0.0232895,0,0.0305526,0.991191,0.0235734,0,0.0378786,0.987787,0.0236152,0,0.0458475,0.985092,0.0237994,0,0.0544287,0.981121,0.0238553,0,0.0635952,0.976924,0.0238706,0,0.0733233,0.97218,0.0238704,0,0.0835922,0.965956,0.0236598,0,0.0943839,0.959998,0.0234735,0,0.105682,0.953245,0.0232277,0,0.117474,0.944445,0.0226973,0,0.129747,0.937087,0.0223527,0,0.142491,0.928341,0.0218144,0,0.155697,0.9184,0.0211516,0,0.169358,0.907959,0.0204553,0,0.183469,0.89808,0.0197673,0,0.198024,0.887047,0.0189915,0,0.21302,0.875221,0.0182082,0,0.228455,0.86269,0.0173584,0,0.244329,0.850735,0.0165718,0,0.260639,0.837545,0.0157524,0,0.277389,0.823639,0.0149482,0,0.29458,0.809699,0.0141431,0,0.312216,0.794797,0.0133527,0,0.3303,0.780578,0.0126193,0,0.34884,0.766019,0.0118914,0,0.367842,0.751447,0.0111839,0,0.387315,0.737275,0.010514,0,0.40727,0.724545,0.00987277,0,0.427717,0.712644,0.00926569,0,0.448671,0.700432,0.00869029,0,0.470149,0.687664,0.00814691,0,0.492167,0.674288,0.00763012,0,0.514746,0.660966,0.00714437,0,0.537911,0.647264,0.00668457,0,0.561688,0.633431,0.00626581,0,0.586108,0.619133,0.00585593,0,0.611206,0.604935,0.00548188,0,0.637022,0.590236,0.00513288,0,0.663599,0.575473,0.0047906,0,0.690989,0.561228,0.00448895,0,0.719242,0.547054,0.00420233,0,0.748411,0.533175,0.00392869,0,0.778531,0.519163,0.00367445,0,0.809583,0.505328,0.00344097,0,0.84127,0.491446,0.00322003,0,0.873016,0.477356,0.00301283,0,0.904762,0.46356,0.00282592,0,0.936508,0.449623,0.00264956,0,0.968254,0.436068,0.00246956,0,1,1,0.0276135,0,0,1,0.0276136,0,0,0.999998,0.0276148,0,0,0.999993,0.0276201,0,0,0.999976,0.0276342,0,0,0.999945,0.027664,0,0,0.999884,0.0277179,0,0.00018679,0.999784,0.027806,0,0.00119607,0.99963,0.0279394,0,0.00318407,0.999401,0.0281295,0,0.00613601,0.999066,0.0283858,0,0.00999963,0.998524,0.0287027,0,0.0147164,0.995702,0.0286256,0,0.0202295,0.993593,0.0286733,0,0.0264876,0.992067,0.0288989,0,0.0334452,0.990548,0.0292135,0,0.0410621,0.986775,0.0291296,0,0.0493032,0.984054,0.0293099,0,0.0581381,0.979481,0.0291881,0,0.0675397,0.975297,0.0291598,0,0.0774848,0.96981,0.028954,0,0.0879528,0.963524,0.028628,0,0.0989258,0.957398,0.0283135,0,0.110388,0.950088,0.0278469,0,0.122327,0.941538,0.0271798,0,0.134729,0.933332,0.0265388,0,0.147587,0.924392,0.0257776,0,0.160889,0.914581,0.024916,0,0.174631,0.904347,0.0240242,0,0.188806,0.894324,0.0231229,0,0.203409,0.883724,0.022153,0,0.218437,0.872207,0.0211355,0,0.233888,0.859927,0.0201048,0,0.249761,0.848373,0.0191263,0,0.266056,0.836023,0.0181306,0,0.282774,0.82289,0.0171718,0,0.299917,0.809324,0.0162196,0,0.317488,0.795361,0.0152622,0,0.335493,0.781253,0.01439,0,0.353936,0.767338,0.013533,0,0.372825,0.753156,0.0127244,0,0.392168,0.739122,0.0119454,0,0.411976,0.725358,0.0112054,0,0.432259,0.712949,0.010487,0,0.453032,0.701621,0.00984032,0,0.47431,0.689703,0.00921495,0,0.496111,0.677216,0.00862492,0,0.518456,0.664217,0.00806882,0,0.541367,0.65137,0.00755922,0,0.564872,0.638,0.00705705,0,0.589001,0.62453,0.00661266,0,0.613789,0.610601,0.00618432,0,0.639277,0.59676,0.00578033,0,0.66551,0.582433,0.00540927,0,0.692539,0.568026,0.00506104,0,0.720422,0.55414,0.0047353,0,0.749216,0.540178,0.00442889,0,0.778974,0.526513,0.00414363,0,0.809711,0.512954,0.00388237,0,0.84127,0.499403,0.00362875,0,0.873016,0.486026,0.00340827,0,0.904762,0.472345,0.00318598,0,0.936508,0.458828,0.00297635,0,0.968254,0.445379,0.00279447,0,1,1,0.0345716,0,0,1,0.0345717,0,0,0.999999,0.034573,0,0,0.999991,0.0345787,0,0,0.999974,0.0345941,0,0,0.999937,0.0346263,0,0.00000188589,0.999869,0.0346847,0,0.000409238,0.999757,0.0347798,0,0.0017674,0.999582,0.0349233,0,0.00413658,0.999322,0.0351265,0,0.00747408,0.998939,0.0353967,0,0.0117157,0.998219,0.0357018,0,0.0167966,0.994974,0.0354726,0,0.0226572,0.993201,0.0355621,0,0.0292445,0.991573,0.0357641,0,0.0365123,0.989301,0.0359252,0,0.0444203,0.985712,0.0358017,0,0.0529334,0.982411,0.0358353,0,0.0620214,0.977827,0.035617,0,0.0716574,0.973278,0.0354398,0,0.0818186,0.967397,0.0350483,0,0.0924846,0.960696,0.0344795,0,0.103638,0.954349,0.0339861,0,0.115263,0.946066,0.0331323,0,0.127348,0.938012,0.032359,0,0.13988,0.929413,0.0314413,0,0.152849,0.920355,0.0304103,0,0.166248,0.910586,0.0292785,0,0.18007,0.900609,0.0281391,0,0.194308,0.890093,0.0269103,0,0.208958,0.880013,0.0257269,0,0.224018,0.869001,0.0244671,0,0.239485,0.85751,0.0232252,0,0.255359,0.84582,0.0220117,0,0.271638,0.834383,0.0208274,0,0.288324,0.822158,0.0196628,0,0.305419,0.809056,0.0185306,0,0.322927,0.795832,0.0174174,0,0.340851,0.782547,0.0163758,0,0.359199,0.7689,0.015391,0,0.377975,0.755526,0.0144488,0,0.397189,0.741681,0.0135372,0,0.416851,0.728178,0.0126957,0,0.436971,0.714642,0.0118812,0,0.457564,0.702756,0.0111165,0,0.478644,0.69175,0.0104145,0,0.500229,0.680159,0.00974439,0,0.522339,0.668073,0.00911926,0,0.544997,0.655405,0.00851393,0,0.56823,0.642921,0.00797637,0,0.592068,0.629993,0.00745119,0,0.616546,0.616828,0.00696972,0,0.641705,0.603305,0.00652425,0,0.66759,0.589833,0.00610188,0,0.694255,0.575945,0.00570834,0,0.72176,0.561745,0.00533384,0,0.750168,0.548277,0.00500001,0,0.779545,0.534467,0.00467582,0,0.809933,0.521032,0.00438092,0,0.841272,0.507877,0.00410348,0,0.873016,0.494654,0.00383618,0,0.904762,0.481592,0.00358699,0,0.936508,0.468509,0.00337281,0,0.968254,0.455293,0.00316196,0,1,1,0.0430698,0,0,1,0.0430699,0,0,0.999998,0.0430713,0,0,0.999991,0.0430773,0,0,0.99997,0.0430936,0,0,0.999928,0.0431277,0,0.0000406396,0.999852,0.0431893,0,0.000744376,0.999724,0.0432895,0,0.0024806,0.999527,0.0434397,0,0.00524779,0.99923,0.0436507,0,0.00898164,0.998783,0.0439255,0,0.0136083,0.997507,0.0441104,0,0.0190582,0.994418,0.0438225,0,0.0252694,0.992864,0.0439396,0,0.0321879,0.991127,0.0440962,0,0.039767,0.987331,0.0438408,0,0.0479667,0.984819,0.0438991,0,0.056752,0.980384,0.0435906,0,0.0660929,0.975846,0.0432543,0,0.075963,0.970748,0.0428293,0,0.0863398,0.964303,0.042153,0,0.0972035,0.95772,0.0414111,0,0.108537,0.950747,0.0405893,0,0.120325,0.942533,0.0394887,0,0.132554,0.934045,0.0383544,0,0.145215,0.924942,0.037057,0,0.158296,0.915811,0.0356993,0,0.17179,0.90612,0.0342401,0,0.185691,0.896434,0.0328078,0,0.199993,0.886021,0.031288,0,0.214691,0.876081,0.0297776,0,0.229782,0.865608,0.0282334,0,0.245265,0.854924,0.026749,0,0.261138,0.843607,0.02526,0,0.277401,0.832456,0.0238214,0,0.294056,0.821342,0.0224682,0,0.311104,0.809303,0.0211297,0,0.328548,0.796468,0.0198387,0,0.346394,0.784046,0.0186227,0,0.364645,0.771262,0.0174561,0,0.38331,0.758118,0.0163806,0,0.402396,0.745075,0.0153287,0,0.421912,0.731926,0.0143647,0,0.44187,0.71863,0.0134363,0,0.462283,0.705414,0.0125603,0,0.483165,0.693792,0.0117508,0,0.504535,0.683108,0.0110016,0,0.52641,0.67183,0.0102757,0,0.548816,0.66015,0.00962044,0,0.571776,0.647907,0.00898031,0,0.595323,0.635734,0.00840811,0,0.619489,0.623208,0.00786211,0,0.644317,0.610438,0.00734953,0,0.669852,0.597345,0.00687688,0,0.696148,0.584138,0.00643469,0,0.723267,0.5707,0.00602236,0,0.75128,0.556966,0.0056324,0,0.780258,0.543607,0.00528277,0,0.810268,0.530213,0.00493999,0,0.841311,0.516912,0.00462265,0,0.873016,0.503916,0.0043307,0,0.904762,0.491146,0.00406858,0,0.936508,0.478439,0.00381436,0,0.968254,0.465834,0.00358003,0,1,1,0.0534039,0,0,1,0.053404,0,0,0.999998,0.0534055,0,0,0.999989,0.0534116,0,0,0.999968,0.0534283,0,0,0.999918,0.0534633,0,0.000155895,0.99983,0.0535262,0,0.00120914,0.999685,0.0536281,0,0.00334944,0.999461,0.0537799,0,0.00653077,0.999119,0.0539902,0,0.0106718,0.998582,0.0542524,0,0.0156907,0.995919,0.0540318,0,0.0215147,0.993735,0.0538914,0,0.0280801,0.992126,0.0539557,0,0.0353323,0.990266,0.0540401,0,0.0432247,0.986317,0.0536064,0,0.0517172,0.983213,0.0534425,0,0.0607754,0.978303,0.0528622,0,0.0703698,0.973665,0.0523363,0,0.0804742,0.968091,0.0516165,0,0.0910667,0.961026,0.0505434,0,0.102128,0.954333,0.049523,0,0.113641,0.946372,0.0481698,0,0.125591,0.938254,0.0467674,0,0.137965,0.929516,0.0452341,0,0.150754,0.920106,0.0435083,0,0.163947,0.910899,0.0417399,0,0.177537,0.901532,0.0399389,0,0.191516,0.891919,0.0380901,0,0.205881,0.882006,0.0362341,0,0.220626,0.871965,0.0343444,0,0.235749,0.862145,0.0324832,0,0.251248,0.852058,0.0306681,0,0.267121,0.84161,0.0289097,0,0.283368,0.830806,0.0272079,0,0.299992,0.820476,0.0256089,0,0.316992,0.809514,0.0240394,0,0.334374,0.797865,0.0225379,0,0.35214,0.785621,0.0211235,0,0.370296,0.773765,0.0197908,0,0.388849,0.761629,0.0185235,0,0.407807,0.748891,0.0173358,0,0.427178,0.736437,0.0162305,0,0.446974,0.723707,0.0151778,0,0.467207,0.710606,0.0141791,0,0.487892,0.698019,0.0132592,0,0.509046,0.686203,0.0123887,0,0.530687,0.675692,0.0115976,0,0.552839,0.664826,0.0108325,0,0.575527,0.65349,0.0101348,0,0.59878,0.641774,0.00947756,0,0.622634,0.629794,0.00886058,0,0.647128,0.617647,0.00828526,0,0.672308,0.60534,0.00775312,0,0.698231,0.592718,0.00726033,0,0.724958,0.579746,0.00679731,0,0.752563,0.566763,0.00636111,0,0.781127,0.553515,0.00595228,0,0.810733,0.540118,0.00556876,0,0.841426,0.527325,0.00523051,0,0.873016,0.514265,0.00490712,0,0.904762,0.501406,0.00460297,0,0.936508,0.488922,0.00431247,0,0.968254,0.476541,0.0040472,0,1,1,0.0659184,0,0,1,0.0659185,0,0,0.999998,0.06592,0,0,0.999988,0.0659259,0,0,0.999963,0.0659423,0,0,0.999907,0.0659764,0,0.000374198,0.999806,0.0660376,0,0.00182071,0.999639,0.0661361,0,0.0043894,0.999378,0.0662814,0,0.00800055,0.998985,0.0664779,0,0.0125594,0.998285,0.0666914,0,0.0179786,0.995071,0.0661989,0,0.0241822,0.993172,0.0660454,0,0.031106,0.991438,0.0660105,0,0.0386952,0.988428,0.0656875,0,0.0469032,0.985218,0.0652913,0,0.0556905,0.981128,0.0647107,0,0.065023,0.976015,0.0638491,0,0.0748717,0.97097,0.062993,0,0.0852112,0.964582,0.0617927,0,0.0960199,0.957383,0.0603626,0,0.107279,0.949969,0.0588128,0,0.118971,0.941843,0.0570274,0,0.131084,0.933624,0.0551885,0,0.143604,0.924543,0.053122,0,0.156521,0.914919,0.0508897,0,0.169825,0.905773,0.0486418,0,0.18351,0.896434,0.0463364,0,0.197569,0.887195,0.0440623,0,0.211997,0.877706,0.0417799,0,0.226789,0.867719,0.03945,0,0.241944,0.858587,0.037243,0,0.257458,0.849317,0.0350956,0,0.273331,0.839585,0.0329852,0,0.289563,0.829856,0.0310028,0,0.306154,0.819589,0.0290953,0,0.323108,0.809714,0.0272738,0,0.340426,0.79934,0.0255631,0,0.358113,0.788224,0.0239175,0,0.376175,0.776619,0.0223831,0,0.394616,0.76521,0.0209298,0,0.413445,0.753716,0.0195786,0,0.432671,0.741564,0.0183001,0,0.452305,0.729413,0.0171259,0,0.472358,0.717146,0.0159933,0,0.492845,0.70436,0.0149495,0,0.513783,0.69219,0.0139681,0,0.535189,0.680289,0.0130577,0,0.557087,0.669611,0.0122198,0,0.5795,0.659113,0.0114174,0,0.602459,0.648148,0.0106729,0,0.625997,0.636905,0.00998997,0,0.650154,0.625154,0.00934313,0,0.674976,0.613481,0.00874839,0,0.700518,0.60154,0.00818265,0,0.726845,0.58943,0.00766889,0,0.754032,0.576828,0.00717153,0,0.782167,0.564194,0.00672696,0,0.811344,0.551501,0.00630863,0,0.841644,0.538635,0.00592177,0,0.873016,0.525724,0.00554888,0,0.904762,0.513209,0.00520225,0,0.936508,0.500457,0.00488231,0,0.968254,0.48799,0.00457153,0,1,1,0.0810131,0,0,1,0.0810133,0,0,0.999997,0.0810145,0,0,0.999985,0.08102,0,0,0.999956,0.0810347,0,0.0000195026,0.999893,0.0810656,0,0.000719316,0.999777,0.0811205,0,0.00259774,0.999583,0.081208,0,0.00561807,0.999281,0.0813343,0,0.00967472,0.998813,0.0814969,0,0.0146627,0.997597,0.0815217,0,0.0204902,0.994379,0.0808502,0,0.0270802,0.992744,0.0806792,0,0.0343674,0.990745,0.0804589,0,0.0422974,0.986646,0.0796107,0,0.0508242,0.983611,0.0790913,0,0.0599087,0.978869,0.0780746,0,0.0695175,0.973475,0.0768218,0,0.0796223,0.967845,0.0754926,0,0.0901983,0.960778,0.0737063,0,0.101224,0.953333,0.0718052,0,0.112682,0.945274,0.0695946,0,0.124555,0.936955,0.0672492,0,0.136831,0.928319,0.0647732,0,0.149496,0.919075,0.0620947,0,0.162542,0.909114,0.0591816,0,0.175958,0.900137,0.0563917,0,0.189739,0.891069,0.0535392,0,0.203877,0.882262,0.0507642,0,0.218368,0.873232,0.0479793,0,0.233208,0.864042,0.045226,0,0.248393,0.855002,0.0425413,0,0.263923,0.846569,0.0400126,0,0.279796,0.837714,0.0375269,0,0.296012,0.828918,0.0352027,0,0.312573,0.819783,0.0330011,0,0.329479,0.810129,0.0308908,0,0.346734,0.800866,0.0289112,0,0.364342,0.79093,0.0270255,0,0.382307,0.780593,0.0252758,0,0.400637,0.769511,0.0236178,0,0.419337,0.758558,0.0220652,0,0.438418,0.747632,0.0206289,0,0.457889,0.736146,0.0192873,0,0.477761,0.724093,0.0180333,0,0.49805,0.71234,0.0168264,0,0.51877,0.700201,0.015746,0,0.53994,0.687949,0.0147027,0,0.561581,0.676163,0.0137512,0,0.583718,0.665001,0.0128655,0,0.60638,0.65472,0.0120366,0,0.629599,0.644213,0.0112604,0,0.653415,0.633382,0.0105413,0,0.677874,0.62212,0.00986498,0,0.70303,0.610631,0.00923308,0,0.728948,0.599078,0.00864206,0,0.755706,0.587519,0.00811784,0,0.783396,0.575505,0.00761237,0,0.812121,0.563148,0.00713949,0,0.841989,0.550828,0.00668379,0,0.873035,0.538458,0.00627715,0,0.904762,0.525905,0.00588336,0,0.936508,0.513517,0.00552687,0,0.968254,0.501395,0.00519681,0,1,1,0.0991506,0,0,1,0.0991504,0,0,0.999996,0.0991515,0,0,0.999984,0.0991558,0,0,0.999947,0.0991672,0,0.000114389,0.999874,0.0991912,0,0.00121503,0.999739,0.0992331,0,0.00356108,0.999514,0.0992983,0,0.00705578,0.999159,0.0993877,0,0.011574,0.998586,0.0994837,0,0.017003,0.995731,0.0988425,0,0.0232484,0.993384,0.098276,0,0.0302318,0.991615,0.0979269,0,0.0378884,0.989029,0.0973432,0,0.0461641,0.985373,0.0963539,0,0.0550136,0.981278,0.0952306,0,0.0643988,0.975777,0.0936233,0,0.0742868,0.970526,0.0920219,0,0.0846501,0.963755,0.0898912,0,0.0954644,0.956676,0.0876064,0,0.106709,0.948099,0.0847751,0,0.118367,0.939718,0.0818638,0,0.130423,0.931305,0.078857,0,0.142862,0.922342,0.0756127,0,0.155674,0.912842,0.0721473,0,0.168849,0.903304,0.0686195,0,0.182378,0.89411,0.0650589,0,0.196255,0.885512,0.0616022,0,0.210473,0.877193,0.0582434,0,0.225027,0.86877,0.0548979,0,0.239915,0.860267,0.0516095,0,0.255132,0.851915,0.048468,0,0.270678,0.843912,0.0454447,0,0.286551,0.83604,0.0425612,0,0.302751,0.828245,0.0398752,0,0.31928,0.820159,0.0373198,0,0.336138,0.81167,0.034916,0,0.35333,0.802659,0.0326402,0,0.370858,0.793921,0.0304901,0,0.388728,0.784713,0.0284857,0,0.406944,0.774946,0.0266186,0,0.425515,0.76448,0.0248593,0,0.444449,0.753793,0.0232114,0,0.463756,0.743506,0.0217039,0,0.483447,0.732555,0.0202841,0,0.503535,0.720965,0.0189648,0,0.524036,0.709422,0.0177189,0,0.544968,0.697756,0.0165626,0,0.56635,0.685565,0.015483,0,0.588208,0.673987,0.0144892,0,0.610569,0.66244,0.0135607,0,0.633466,0.651675,0.0126956,0,0.656936,0.641598,0.0118788,0,0.681025,0.63121,0.0111261,0,0.705788,0.620514,0.010437,0,0.731289,0.609366,0.00978747,0,0.757606,0.598137,0.00917257,0,0.784834,0.586966,0.00859778,0,0.813085,0.575549,0.00806803,0,0.842485,0.563797,0.00757294,0,0.87313,0.551758,0.00710592,0,0.904762,0.539894,0.0066841,0,0.936508,0.527901,0.00627901,0,0.968254,0.515819,0.00590506,0,1,1,0.120864,0,0,1,0.120864,0,0,0.999996,0.120864,0,0,0.99998,0.120867,0,0,0.99994,0.120872,0,0.000323781,0.999852,0.120884,0,0.00188693,0.999693,0.120903,0,0.00473489,0.999426,0.120929,0,0.00872704,0.999002,0.120955,0,0.0137237,0.998235,0.120918,0,0.0196068,0.994608,0.119764,0,0.0262803,0.992997,0.119265,0,0.0336657,0.990968,0.11863,0,0.0416987,0.987002,0.117261,0,0.0503261,0.983524,0.116009,0,0.0595035,0.97875,0.114252,0,0.0691935,0.972652,0.11193,0,0.0793645,0.966613,0.109555,0,0.0899894,0.959275,0.106612,0,0.101045,0.951272,0.103375,0,0.112512,0.942323,0.0996594,0,0.124372,0.933679,0.0958841,0,0.136611,0.924822,0.0919265,0,0.149216,0.915742,0.0878061,0,0.162176,0.906348,0.0834894,0,0.175482,0.896883,0.079085,0,0.189125,0.88774,0.0746745,0,0.203098,0.87986,0.0705773,0,0.217396,0.871998,0.0665005,0,0.232015,0.864325,0.0625413,0,0.24695,0.856685,0.0586781,0,0.2622,0.84925,0.0550063,0,0.277761,0.841719,0.0514727,0,0.293634,0.834755,0.0481398,0,0.309819,0.827853,0.0450172,0,0.326315,0.820888,0.0420969,0,0.343126,0.813616,0.0393702,0,0.360254,0.805767,0.0367771,0,0.377701,0.797338,0.0343274,0,0.395474,0.789122,0.0320529,0,0.413577,0.780601,0.0299485,0,0.432018,0.771424,0.0279812,0,0.450804,0.761502,0.0261054,0,0.469944,0.751166,0.0243942,0,0.489451,0.741276,0.0228087,0,0.509337,0.730898,0.0213265,0,0.529617,0.719878,0.0199307,0,0.550307,0.708379,0.0186574,0,0.571428,0.697165,0.0174446,0,0.593003,0.685554,0.0163144,0,0.615059,0.673631,0.015276,0,0.637628,0.662385,0.0143003,0,0.660746,0.651059,0.0134112,0,0.68446,0.640451,0.0125794,0,0.70882,0.630536,0.011793,0,0.733893,0.620316,0.0110547,0,0.759756,0.609722,0.0103668,0,0.786505,0.598804,0.00973009,0,0.814259,0.587871,0.00912812,0,0.843157,0.577121,0.00858916,0,0.87334,0.566019,0.00807333,0,0.904762,0.554664,0.00759687,0,0.936508,0.543101,0.00714759,0,0.968254,0.531558,0.00673418,0,1,1,0.146767,0,0,1,0.146767,0,0,0.999997,0.146767,0,0,0.999977,0.146765,0,0.00000320658,0.999929,0.146762,0,0.000682576,0.999823,0.146753,0,0.00276402,0.999633,0.146735,0,0.00614771,0.999314,0.146699,0,0.0106613,0.998796,0.14662,0,0.0161546,0.997124,0.146107,0,0.0225063,0.994062,0.144857,0,0.0296198,0.992154,0.144011,0,0.037417,0.989186,0.142712,0,0.0458348,0.985279,0.140926,0,0.0548211,0.980826,0.13885,0,0.0643326,0.975056,0.136168,0,0.074333,0.969005,0.133217,0,0.0847917,0.961554,0.12959,0,0.0956828,0.954206,0.125886,0,0.106984,0.945046,0.121335,0,0.118675,0.935678,0.116492,0,0.130741,0.926748,0.111635,0,0.143166,0.917764,0.106625,0,0.155939,0.908358,0.101325,0,0.169049,0.899219,0.0960249,0,0.182487,0.890089,0.0906527,0,0.196245,0.881488,0.0853905,0,0.210317,0.874031,0.0804177,0,0.224697,0.866932,0.0756005,0,0.23938,0.859976,0.0709019,0,0.254364,0.853375,0.0664391,0,0.269646,0.846971,0.0622012,0,0.285223,0.840483,0.058129,0,0.301096,0.833969,0.0542762,0,0.317265,0.82806,0.0507042,0,0.333729,0.822128,0.047368,0,0.350491,0.815989,0.044272,0,0.367554,0.809336,0.0413444,0,0.38492,0.802177,0.038601,0,0.402594,0.79441,0.0360227,0,0.420582,0.786573,0.0336383,0,0.438891,0.778619,0.0314321,0,0.457527,0.77,0.029362,0,0.476499,0.760698,0.0274102,0,0.49582,0.750932,0.0256146,0,0.5155,0.740993,0.023974,0,0.535555,0.731159,0.0224182,0,0.556,0.720836,0.0209889,0,0.576855,0.709913,0.0196411,0,0.598143,0.698415,0.0183824,0,0.619888,0.68745,0.0172222,0,0.642123,0.676154,0.0161509,0,0.664883,0.664383,0.0151397,0,0.688211,0.6533,0.0141873,0,0.71216,0.642072,0.0133105,0,0.736792,0.631412,0.0124932,0,0.762186,0.621622,0.0117408,0,0.788439,0.611681,0.0110358,0,0.815672,0.60142,0.0103775,0,0.844034,0.59083,0.00975623,0,0.873699,0.580254,0.00918084,0,0.904765,0.569841,0.00864721,0,0.936508,0.559224,0.00815731,0,0.968254,0.548315,0.00767924,0,1,1,0.177563,0,0,1,0.177563,0,0,0.999994,0.177562,0,0,0.999972,0.177555,0,0.0000664171,0.999914,0.177536,0,0.0012276,0.999787,0.177496,0,0.00388025,0.999556,0.17742,0,0.00783463,0.999165,0.177285,0,0.0128953,0.9985,0.177037,0,0.0189053,0.995388,0.175634,0,0.025742,0.993102,0.174375,0,0.033309,0.990992,0.173121,0,0.0415298,0.986932,0.170896,0,0.0503425,0.982786,0.16847,0,0.0596964,0.977592,0.165455,0,0.0695498,0.971075,0.161676,0,0.0798676,0.963967,0.157458,0,0.0906201,0.956397,0.152836,0,0.101783,0.947489,0.147467,0,0.113333,0.937564,0.14145,0,0.125254,0.928182,0.135383,0,0.137529,0.919027,0.129212,0,0.150144,0.909618,0.12276,0,0.163088,0.900492,0.116273,0,0.176351,0.891671,0.1098,0,0.189924,0.883146,0.103362,0,0.203799,0.875151,0.0970799,0,0.21797,0.868338,0.0911732,0,0.232433,0.862033,0.0854966,0,0.247182,0.856107,0.0800691,0,0.262216,0.850644,0.0749618,0,0.27753,0.845261,0.070079,0,0.293124,0.839885,0.0654321,0,0.308997,0.834609,0.0610975,0,0.325149,0.829083,0.0569741,0,0.341581,0.82404,0.0531736,0,0.358294,0.818968,0.049665,0,0.37529,0.813496,0.0463856,0,0.392573,0.807533,0.0433217,0,0.410148,0.80099,0.0404402,0,0.428019,0.793891,0.0377578,0,0.446192,0.786281,0.0352616,0,0.464676,0.778773,0.0329577,0,0.483478,0.770737,0.030808,0,0.502608,0.762094,0.0287964,0,0.522079,0.752898,0.0269254,0,0.541905,0.743306,0.0251926,0,0.5621,0.733416,0.023595,0,0.582684,0.723742,0.0221155,0,0.603677,0.713542,0.0207435,0,0.625106,0.702755,0.019434,0,0.646998,0.691484,0.0182046,0,0.66939,0.680531,0.0170771,0,0.692324,0.66953,0.0160339,0,0.715849,0.658126,0.0150677,0,0.740028,0.646933,0.0141551,0,0.764937,0.636107,0.0133179,0,0.790673,0.625271,0.0125284,0,0.817358,0.615225,0.0117937,0,0.84515,0.605678,0.0111181,0,0.874244,0.59583,0.0104759,0,0.904828,0.585704,0.00986672,0,0.936508,0.575413,0.00929712,0,0.968254,0.565373,0.00876713,0,1,1,0.214058,0,0,0.999999,0.214058,0,0,0.999994,0.214055,0,0,0.999966,0.214039,0,0.000259642,0.999893,0.213998,0,0.00200075,0.999737,0.21391,0,0.00527775,0.999449,0.213745,0,0.00983959,0.99896,0.213458,0,0.0154755,0.9979,0.212855,0,0.0220249,0.994278,0.210779,0,0.0293654,0.992254,0.20926,0,0.0374021,0.98881,0.206908,0,0.0460604,0.984715,0.204009,0,0.0552802,0.979738,0.200471,0,0.0650127,0.972884,0.195813,0,0.0752175,0.965996,0.190856,0,0.0858612,0.957974,0.185077,0,0.0969155,0.949155,0.17868,0,0.108356,0.939288,0.171513,0,0.120163,0.928996,0.163838,0,0.132319,0.919563,0.156246,0,0.144808,0.910004,0.148359,0,0.157618,0.900791,0.140417,0,0.170737,0.892135,0.132569,0,0.184155,0.883803,0.124741,0,0.197866,0.876034,0.117091,0,0.211861,0.869219,0.109835,0,0.226134,0.863062,0.102859,0,0.240682,0.857795,0.0962928,0,0.255499,0.853009,0.0900725,0,0.270583,0.848603,0.0842101,0,0.285931,0.844335,0.0786527,0,0.301542,0.840208,0.0734397,0,0.317415,0.836035,0.0685334,0,0.33355,0.83172,0.0639275,0,0.349948,0.827135,0.0595909,0,0.36661,0.822797,0.0556204,0,0.383539,0.818387,0.0519394,0,0.400738,0.813565,0.0485317,0,0.41821,0.808142,0.0453138,0,0.435961,0.802212,0.0423354,0,0.453997,0.79573,0.0395553,0,0.472324,0.788741,0.036988,0,0.490951,0.781093,0.0345688,0,0.509887,0.773597,0.0323297,0,0.529144,0.765622,0.0302719,0,0.548735,0.757083,0.0283477,0,0.568674,0.747992,0.0265562,0,0.588979,0.738591,0.0248844,0,0.609671,0.728719,0.0233342,0,0.630773,0.719146,0.0219081,0,0.652314,0.709165,0.0205711,0,0.674328,0.69875,0.0193248,0,0.696854,0.687884,0.0181582,0,0.719942,0.676818,0.0170746,0,0.743651,0.666247,0.0160718,0,0.768057,0.655284,0.0151262,0,0.793253,0.64401,0.0142561,0,0.819363,0.633353,0.0134327,0,0.846547,0.622674,0.012653,0,0.875017,0.612265,0.0119354,0,0.905021,0.602455,0.0112533,0,0.936508,0.593147,0.0106234,0,0.968254,0.583592,0.0100213,0,1,1,0.25717,0,0,1,0.25717,0,0,0.999992,0.257164,0,0,0.999958,0.257135,0,0.000641715,0.999864,0.25706,0,0.00305314,0.999666,0.256897,0,0.00700975,0.999302,0.256596,0,0.0122194,0.998663,0.25607,0,0.0184622,0.995607,0.254123,0,0.0255773,0.993094,0.252081,0,0.0334439,0.9907,0.249867,0,0.0419696,0.98594,0.246118,0,0.0510823,0.981214,0.242049,0,0.0607242,0.974966,0.236869,0,0.0708486,0.967589,0.230724,0,0.081417,0.95915,0.223635,0,0.0923974,0.950257,0.21596,0,0.103763,0.940165,0.207296,0,0.115491,0.929396,0.197901,0,0.127562,0.919288,0.188437,0,0.13996,0.909428,0.178762,0,0.15267,0.900105,0.169072,0,0.165679,0.891418,0.159478,0,0.178979,0.883347,0.15002,0,0.192558,0.875992,0.140813,0,0.20641,0.869466,0.13196,0,0.220529,0.863699,0.123501,0,0.234907,0.858553,0.115436,0,0.249542,0.854379,0.107901,0,0.264428,0.850894,0.10088,0,0.279564,0.847632,0.0942296,0,0.294947,0.844571,0.0879861,0,0.310575,0.84163,0.0821534,0,0.326448,0.838542,0.0766409,0,0.342566,0.835412,0.0715322,0,0.358929,0.831899,0.0666883,0,0.37554,0.828177,0.0622175,0,0.392399,0.82416,0.0580452,0,0.409511,0.820393,0.054267,0,0.426878,0.816068,0.0507172,0,0.444506,0.811201,0.0474041,0,0.4624,0.805785,0.0443174,0,0.480566,0.799878,0.0414562,0,0.499013,0.793469,0.0388147,0,0.517749,0.786473,0.0363453,0,0.536785,0.778874,0.0340225,0,0.556134,0.771277,0.0318599,0,0.575809,0.763426,0.0298859,0,0.595827,0.755044,0.0280357,0,0.616207,0.746161,0.0262979,0,0.636973,0.737124,0.0247295,0,0.65815,0.72761,0.0232514,0,0.679772,0.717822,0.0218755,0,0.701876,0.708279,0.0205942,0,0.724509,0.698333,0.0193947,0,0.74773,0.68802,0.0182717,0,0.771609,0.677321,0.0172044,0,0.79624,0.666504,0.0162122,0,0.821743,0.656184,0.0152924,0,0.84828,0.64556,0.0144326,0,0.876069,0.634636,0.0136157,0,0.905404,0.624124,0.0128612,0,0.936508,0.613914,0.0121435,0,0.968254,0.603589,0.0114887,0,1,1,0.307946,0,0,0.999999,0.307945,0,0,0.999988,0.307934,0,0.0000204479,0.999944,0.307886,0,0.00127833,0.999824,0.307756,0,0.00445047,0.999565,0.30748,0,0.00914673,0.999085,0.306966,0,0.0150498,0.998103,0.306004,0,0.0219367,0.994249,0.303028,0,0.0296485,0.991807,0.300435,0,0.038068,0.987773,0.296554,0,0.0471062,0.982673,0.2916,0,0.0566942,0.976623,0.285641,0,0.0667768,0.968757,0.27815,0,0.0773099,0.959849,0.269529,0,0.088257,0.950663,0.260248,0,0.0995879,0.940129,0.249704,0,0.111277,0.92895,0.238291,0,0.123304,0.917996,0.226501,0,0.13565,0.907813,0.214669,0,0.148299,0.898305,0.202835,0,0.161237,0.889626,0.191158,0,0.174455,0.88175,0.179695,0,0.187941,0.874715,0.168548,0,0.201687,0.868746,0.15792,0,0.215687,0.863703,0.147807,0,0.229933,0.859315,0.138149,0,0.24442,0.855538,0.128993,0,0.259145,0.852428,0.120414,0,0.274103,0.850168,0.112498,0,0.289293,0.848132,0.105054,0,0.304711,0.846291,0.0981087,0,0.320357,0.844431,0.0915942,0,0.33623,0.842493,0.0855056,0,0.35233,0.840368,0.0798204,0,0.368658,0.83798,0.0745097,0,0.385214,0.83523,0.0695424,0,0.402002,0.832091,0.0649092,0,0.419023,0.828667,0.0606291,0,0.436282,0.824805,0.0566523,0,0.453782,0.820988,0.0530229,0,0.471529,0.816635,0.0496364,0,0.489528,0.811725,0.0464658,0,0.507788,0.806316,0.0435082,0,0.526317,0.800469,0.0407873,0,0.545124,0.794107,0.038255,0,0.564221,0.787218,0.0358825,0,0.583621,0.779872,0.0336785,0,0.603341,0.772097,0.0316379,0,0.623397,0.764484,0.0297379,0,0.643812,0.756428,0.0279581,0,0.664611,0.748022,0.0263153,0,0.685824,0.739268,0.0247799,0,0.707488,0.73024,0.0233385,0,0.729646,0.720893,0.0220035,0,0.752354,0.71119,0.0207555,0,0.77568,0.701791,0.0195843,0,0.799715,0.692184,0.0184891,0,0.824574,0.682258,0.0174541,0,0.850417,0.67206,0.0164873,0,0.877466,0.661717,0.0155959,0,0.90604,0.651462,0.0147519,0,0.936528,0.641467,0.0139727,0,0.968254,0.631229,0.0132363,0,1,1,0.367573,0,0,0.999999,0.367571,0,0,0.999984,0.367553,0,0.000183382,0.999925,0.367473,0,0.00225254,0.999759,0.367259,0,0.00628165,0.99941,0.366801,0,0.0117858,0.998739,0.365946,0,0.0184359,0.995529,0.363191,0,0.0260114,0.992875,0.360171,0,0.0343581,0.989135,0.355981,0,0.0433637,0.984166,0.350401,0,0.0529438,0.977871,0.343348,0,0.0630334,0.96951,0.334341,0,0.0735805,0.959964,0.323862,0,0.0845437,0.950162,0.312521,0,0.095889,0.938882,0.299577,0,0.107588,0.926992,0.285573,0,0.119617,0.915589,0.271212,0,0.131957,0.904791,0.256611,0,0.144591,0.895177,0.242224,0,0.157503,0.886403,0.227952,0,0.170682,0.878957,0.214192,0,0.184117,0.872418,0.200795,0,0.197799,0.867029,0.188015,0,0.21172,0.862835,0.175975,0,0.225873,0.859411,0.164526,0,0.240253,0.856655,0.153693,0,0.254854,0.854519,0.14352,0,0.269673,0.852828,0.13397,0,0.284707,0.851412,0.124984,0,0.299953,0.850609,0.116748,0,0.315408,0.849855,0.10905,0,0.331073,0.849017,0.101839,0,0.346946,0.848079,0.0951359,0,0.363028,0.846911,0.0888774,0,0.379318,0.845445,0.0830375,0,0.395818,0.84362,0.0775844,0,0.41253,0.841411,0.0725054,0,0.429457,0.838768,0.0677691,0,0.446602,0.835801,0.0634016,0,0.463968,0.832341,0.0593095,0,0.481561,0.828424,0.0555121,0,0.499386,0.824312,0.052024,0,0.51745,0.819918,0.0487865,0,0.535761,0.815072,0.0457801,0,0.554328,0.809863,0.0430184,0,0.573162,0.804164,0.0404245,0,0.592275,0.798034,0.0380146,0,0.611681,0.791436,0.0357436,0,0.631398,0.784498,0.0336475,0,0.651445,0.777125,0.0316666,0,0.671845,0.769365,0.0298122,0,0.692628,0.761579,0.0281001,0,0.713827,0.753746,0.0265049,0,0.735484,0.745573,0.0250067,0,0.75765,0.737083,0.0236026,0,0.78039,0.728545,0.0223302,0,0.803789,0.719691,0.0211243,0,0.82796,0.710569,0.0199983,0,0.853056,0.701216,0.0189569,0,0.879298,0.692094,0.0179702,0,0.907014,0.682909,0.0170418,0,0.936691,0.673509,0.0161732,0,0.968254,0.663863,0.0153406,0,1,1,0.437395,0,0,0.999998,0.437394,0,0,0.99998,0.437363,0,0.000616704,0.999891,0.437232,0,0.00367925,0.999656,0.436877,0,0.00867446,0.999148,0.436121,0,0.0150679,0.997959,0.434564,0,0.022531,0.993464,0.430134,0,0.0308507,0.990606,0.426077,0,0.0398805,0.985027,0.419397,0,0.0495148,0.978491,0.41118,0,0.0596749,0.969643,0.40048,0,0.0703001,0.959189,0.38769,0,0.0813427,0.948223,0.373575,0,0.0927641,0.935955,0.357622,0,0.104533,0.923237,0.34043,0,0.116624,0.911074,0.322735,0,0.129015,0.899724,0.30479,0,0.141687,0.890189,0.287392,0,0.154626,0.881796,0.270248,0,0.167818,0.874781,0.253659,0,0.181252,0.869166,0.237786,0,0.194918,0.864725,0.222618,0,0.208807,0.861565,0.208356,0,0.222913,0.859284,0.194867,0,0.237229,0.857677,0.18212,0,0.25175,0.856714,0.17018,0,0.266473,0.856155,0.158969,0,0.281392,0.8558,0.148413,0,0.296505,0.855672,0.138578,0,0.311811,0.855538,0.129345,0,0.327306,0.855689,0.120861,0,0.342991,0.855767,0.112969,0,0.358864,0.855618,0.105593,0,0.374925,0.85525,0.0987451,0,0.391176,0.854583,0.0923727,0,0.407616,0.853534,0.0864143,0,0.424249,0.852061,0.0808338,0,0.441076,0.850253,0.0756771,0,0.4581,0.848004,0.0708612,0,0.475324,0.845333,0.0663784,0,0.492754,0.842376,0.0622631,0,0.510394,0.838956,0.0584112,0,0.528251,0.835121,0.0548328,0,0.546331,0.830842,0.0514838,0,0.564644,0.826212,0.048355,0,0.583198,0.821522,0.0454714,0,0.602005,0.816551,0.0428263,0,0.621078,0.811211,0.0403612,0,0.640434,0.805479,0.038039,0,0.660089,0.799409,0.0358739,0,0.680066,0.79306,0.0338727,0,0.70039,0.786395,0.0319985,0,0.721094,0.779416,0.030241,0,0.742215,0.77214,0.0285951,0,0.7638,0.764636,0.0270747,0,0.785912,0.756836,0.0256354,0,0.808628,0.749315,0.0243027,0,0.832055,0.741561,0.0230497,0,0.856338,0.733589,0.0218801,0,0.88169,0.725479,0.020784,0,0.908441,0.717255,0.0197702,0,0.937125,0.708829,0.0188168,0,0.968254,0.700191,0.0179113,0,1,1,0.518937,0,0,0.999998,0.518933,0,0,0.999967,0.518883,0,0.00147741,0.999832,0.51866,0,0.00573221,0.999466,0.518057,0,0.011826,0.998644,0.516752,0,0.0192116,0.994458,0.512347,0,0.027573,0.991223,0.507675,0,0.0367099,0.985515,0.500188,0,0.046487,0.978308,0.490408,0,0.0568071,0.968359,0.477357,0,0.0675984,0.95682,0.461752,0,0.0788059,0.943929,0.443796,0,0.090386,0.930224,0.423893,0,0.102304,0.916514,0.402682,0,0.114532,0.903653,0.380914,0,0.127047,0.892315,0.359212,0,0.139828,0.882942,0.338102,0,0.152861,0.875438,0.31773,0,0.16613,0.869642,0.298186,0,0.179624,0.865304,0.279491,0,0.193332,0.862382,0.261804,0,0.207247,0.860666,0.245146,0,0.22136,0.859788,0.229406,0,0.235666,0.859608,0.214605,0,0.250158,0.859912,0.200691,0,0.264832,0.86053,0.187623,0,0.279684,0.861368,0.17539,0,0.294711,0.862237,0.163901,0,0.309911,0.863127,0.153175,0,0.32528,0.863923,0.143147,0,0.340819,0.864567,0.133781,0,0.356524,0.865013,0.125042,0,0.372397,0.86539,0.116952,0,0.388438,0.865591,0.109476,0,0.404645,0.865517,0.102542,0,0.421022,0.865084,0.0960688,0,0.437569,0.864309,0.0900499,0,0.454287,0.863151,0.0844328,0,0.471181,0.861649,0.0792218,0,0.488253,0.859742,0.0743482,0,0.505507,0.857446,0.0697963,0,0.522947,0.854757,0.0655364,0,0.54058,0.851783,0.061608,0,0.558412,0.848516,0.0579701,0,0.576449,0.844897,0.0545742,0,0.594701,0.840956,0.0514167,0,0.613178,0.836676,0.0484598,0,0.631892,0.832075,0.0456934,0,0.650856,0.827191,0.0431178,0,0.670088,0.822295,0.0407718,0,0.689606,0.817294,0.0386032,0,0.709434,0.812013,0.0365675,0,0.7296,0.806465,0.0346547,0,0.750138,0.800691,0.0328717,0,0.771093,0.794709,0.031211,0,0.792519,0.788493,0.0296504,0,0.814488,0.782049,0.0281782,0,0.837097,0.775403,0.0267965,0,0.860481,0.76857,0.0255002,0,0.884842,0.761536,0.0242759,0,0.910494,0.754303,0.0231142,0,0.937985,0.74692,0.0220305,0,0.968254,0.739745,0.0210192,0,1,1,0.613914,0,0,0.999996,0.613907,0,0.0000963597,0.999942,0.613814,0,0.00301247,0.999704,0.613407,0,0.00870385,0.999046,0.612302,0,0.0160714,0.995516,0.608266,0,0.0245899,0.991726,0.602863,0,0.0339681,0.985157,0.593956,0,0.0440254,0.97642,0.581748,0,0.0546409,0.964404,0.565183,0,0.0657284,0.950601,0.545273,0,0.0772246,0.935158,0.522129,0,0.0890812,0.919364,0.496782,0,0.10126,0.904754,0.470571,0,0.113731,0.89176,0.444037,0,0.126469,0.881492,0.418322,0,0.139454,0.873656,0.393522,0,0.15267,0.868053,0.369795,0,0.166101,0.864336,0.347171,0,0.179736,0.862259,0.325737,0,0.193565,0.861556,0.305532,0,0.207578,0.861776,0.286416,0,0.221769,0.862661,0.268355,0,0.23613,0.864015,0.251334,0,0.250656,0.865711,0.235352,0,0.265343,0.867519,0.220302,0,0.280187,0.869351,0.206161,0,0.295183,0.871144,0.192908,0,0.31033,0.872839,0.180505,0,0.325624,0.874307,0.168848,0,0.341065,0.875667,0.158021,0,0.35665,0.876758,0.147877,0,0.37238,0.87764,0.138441,0,0.388253,0.878237,0.129627,0,0.404269,0.878563,0.121415,0,0.42043,0.878572,0.113741,0,0.436735,0.87842,0.106652,0,0.453187,0.878057,0.100097,0,0.469786,0.877413,0.0940128,0,0.486536,0.87646,0.0883462,0,0.503439,0.875233,0.0830924,0,0.520498,0.8737,0.0781975,0,0.537717,0.871873,0.07364,0,0.555102,0.86978,0.0694103,0,0.572657,0.867405,0.0654696,0,0.59039,0.864751,0.0617914,0,0.608307,0.861818,0.0583491,0,0.626419,0.858645,0.0551443,0,0.644733,0.855307,0.0521894,0,0.663264,0.851736,0.0494334,0,0.682025,0.847927,0.0468504,0,0.701032,0.843888,0.0444261,0,0.720308,0.839629,0.0421497,0,0.739875,0.835158,0.0400082,0,0.759764,0.830509,0.0380076,0,0.780014,0.825714,0.0361488,0,0.800673,0.820729,0.0343956,0,0.821803,0.815751,0.0327781,0,0.843492,0.810752,0.031275,0,0.86586,0.805587,0.0298542,0,0.889087,0.800317,0.0285397,0,0.913466,0.79489,0.0272948,0,0.93952,0.789314,0.0261139,0,0.96835,0.783593,0.0249938,0,1,1,0.724258,0,0,0.999992,0.724243,0,0.000726889,0.99987,0.724044,0,0.00569574,0.999336,0.72317,0,0.0131702,0.996271,0.719432,0,0.0220738,0.991159,0.712576,0,0.0319405,0.982465,0.700927,0,0.0425202,0.97049,0.684297,0,0.0536599,0.953973,0.661244,0,0.065258,0.935546,0.633804,0,0.0772427,0.916596,0.603071,0,0.0895616,0.899353,0.57105,0,0.102175,0.885216,0.539206,0,0.11505,0.875076,0.508714,0,0.128164,0.868334,0.479571,0,0.141495,0.864414,0.451796,0,0.155026,0.862678,0.425328,0,0.168745,0.862835,0.400352,0,0.182639,0.864067,0.376532,0,0.196699,0.866086,0.35391,0,0.210915,0.868557,0.332424,0,0.225282,0.871271,0.312053,0,0.239792,0.874058,0.292764,0,0.25444,0.8768,0.27453,0,0.269223,0.87939,0.257297,0,0.284135,0.8819,0.24114,0,0.299174,0.884187,0.225934,0,0.314337,0.886262,0.211669,0,0.329622,0.888119,0.198311,0,0.345026,0.889709,0.185783,0,0.360549,0.891054,0.174063,0,0.376189,0.892196,0.163143,0,0.391946,0.893101,0.152952,0,0.407819,0.893803,0.143475,0,0.423808,0.894277,0.134647,0,0.439914,0.894532,0.126434,0,0.456137,0.894576,0.1188,0,0.472479,0.894393,0.111694,0,0.48894,0.893976,0.105069,0,0.505523,0.893346,0.0989077,0,0.52223,0.892502,0.0931724,0,0.539064,0.891441,0.0878276,0,0.556028,0.890276,0.082903,0,0.573125,0.888972,0.0783505,0,0.590361,0.887469,0.0741083,0,0.607741,0.885785,0.0701633,0,0.62527,0.883914,0.0664835,0,0.642957,0.881872,0.0630567,0,0.660809,0.879651,0.0598527,0,0.678836,0.877267,0.0568615,0,0.69705,0.874717,0.05406,0,0.715465,0.872012,0.0514378,0,0.734098,0.869157,0.0489805,0,0.752968,0.866155,0.0466727,0,0.772101,0.863014,0.0445056,0,0.791529,0.859748,0.0424733,0,0.81129,0.856416,0.0405957,0,0.831438,0.852958,0.0388273,0,0.852044,0.849382,0.0371619,0,0.87321,0.845694,0.0355959,0,0.89509,0.841893,0.0341155,0,0.917932,0.837981,0.0327141,0,0.942204,0.833963,0.0313856,0,0.968981,0.829847,0.0301275,0,1,1,0.85214,0,0,0.999969,0.852095,0,0.00279627,0.999483,0.851408,0,0.0107635,0.994545,0.84579,0,0.0206454,0.986188,0.835231,0,0.0315756,0.969847,0.814687,0,0.0432021,0.945951,0.783735,0,0.0553396,0.91917,0.746074,0,0.0678766,0.895488,0.706938,0,0.0807395,0.878232,0.669534,0,0.0938767,0.868252,0.635168,0,0.10725,0.863873,0.603069,0,0.120832,0.863369,0.572514,0,0.134598,0.86545,0.543169,0,0.148533,0.868803,0.514578,0,0.16262,0.872794,0.486762,0,0.176849,0.87702,0.459811,0,0.19121,0.881054,0.433654,0,0.205694,0.884974,0.408574,0,0.220294,0.888587,0.384525,0,0.235005,0.891877,0.36156,0,0.24982,0.894793,0.339661,0,0.264737,0.89743,0.318913,0,0.279751,0.899796,0.299302,0,0.294859,0.901943,0.280843,0,0.310058,0.903858,0.263481,0,0.325346,0.905574,0.247197,0,0.340721,0.907069,0.231915,0,0.356181,0.908379,0.217614,0,0.371725,0.90952,0.20425,0,0.387353,0.910483,0.191758,0,0.403063,0.91128,0.180092,0,0.418854,0.911936,0.169222,0,0.434727,0.912454,0.159098,0,0.450682,0.912835,0.149668,0,0.466718,0.913078,0.140884,0,0.482837,0.913192,0.132709,0,0.499038,0.913175,0.125095,0,0.515324,0.91304,0.118012,0,0.531695,0.912781,0.111417,0,0.548153,0.91241,0.105281,0,0.5647,0.911924,0.0995691,0,0.581338,0.911331,0.0942531,0,0.59807,0.910637,0.0893076,0,0.6149,0.90984,0.0846998,0,0.63183,0.908941,0.0804044,0,0.648865,0.907944,0.0763984,0,0.666011,0.906857,0.0726638,0,0.683273,0.90568,0.0691783,0,0.700659,0.904416,0.0659222,0,0.718176,0.903067,0.0628782,0,0.735834,0.901637,0.0600307,0,0.753646,0.900128,0.0573647,0,0.771625,0.898544,0.0548668,0,0.78979,0.89689,0.052527,0,0.808162,0.895165,0.0503306,0,0.826771,0.893371,0.0482668,0,0.845654,0.891572,0.0463605,0,0.864863,0.889763,0.0445998,0,0.884472,0.887894,0.0429451,0,0.904592,0.885967,0.0413884,0,0.925407,0.883984,0.0399225,0,0.947271,0.881945,0.0385405,0,0.97105,0.879854,0.0372362,0,1,0.999804,0.995833,0,0,0.938155,0.933611,0,0.0158731,0.864755,0.854311,0,0.0317461,0.888594,0.865264,0,0.0476191,0.905575,0.863922,0,0.0634921,0.915125,0.850558,0,0.0793651,0.920665,0.829254,0,0.0952381,0.924073,0.802578,0,0.111111,0.926304,0.772211,0,0.126984,0.927829,0.739366,0,0.142857,0.928924,0.705033,0,0.15873,0.92973,0.670019,0,0.174603,0.930339,0.634993,0,0.190476,0.930811,0.600485,0,0.206349,0.931191,0.566897,0,0.222222,0.93149,0.534485,0,0.238095,0.931737,0.503429,0,0.253968,0.931939,0.473811,0,0.269841,0.932108,0.445668,0,0.285714,0.93225,0.418993,0,0.301587,0.932371,0.393762,0,0.31746,0.932474,0.369939,0,0.333333,0.932562,0.347479,0,0.349206,0.932638,0.326336,0,0.365079,0.932703,0.306462,0,0.380952,0.93276,0.287805,0,0.396825,0.932809,0.270313,0,0.412698,0.932851,0.253933,0,0.428571,0.932887,0.23861,0,0.444444,0.932917,0.224289,0,0.460317,0.932943,0.210917,0,0.47619,0.932965,0.19844,0,0.492063,0.932982,0.186807,0,0.507937,0.932995,0.175966,0,0.52381,0.933005,0.165869,0,0.539683,0.933011,0.156468,0,0.555556,0.933013,0.147719,0,0.571429,0.933013,0.139579,0,0.587302,0.93301,0.132007,0,0.603175,0.933004,0.124965,0,0.619048,0.932994,0.118416,0,0.634921,0.932982,0.112326,0,0.650794,0.932968,0.106663,0,0.666667,0.93295,0.101397,0,0.68254,0.932931,0.0964993,0,0.698413,0.932908,0.0919438,0,0.714286,0.932883,0.0877057,0,0.730159,0.932856,0.0837623,0,0.746032,0.932827,0.0800921,0,0.761905,0.932796,0.0766754,0,0.777778,0.932762,0.0734936,0,0.793651,0.932727,0.0705296,0,0.809524,0.932689,0.0677676,0,0.825397,0.93265,0.0651929,0,0.84127,0.932609,0.0627917,0,0.857143,0.932565,0.0605515,0,0.873016,0.932521,0.0584606,0,0.888889,0.932474,0.0565082,0,0.904762,0.932427,0.0546841,0,0.920635,0.932377,0.0529793,0,0.936508,0.932326,0.0513851,0,0.952381,0.932274,0.0498936,0,0.968254,0.93222,0.0484975,0,0.984127,0.932164,0.0471899,0,1],E=new Float32Array(A),B=new Float32Array(Q),I=new h0(E,64,64,V0,m0,jB,JQ,JQ,L0,Z0,1),C=new h0(B,64,64,V0,m0,jB,JQ,JQ,L0,Z0,1);I.needsUpdate=!0,C.needsUpdate=!0;let K=new Uint16Array(A.length);A.forEach(function(H,R){K[R]=vE.toHalfFloat(H)});let J=new Uint16Array(Q.length);Q.forEach(function(H,R){J[R]=vE.toHalfFloat(H)});let U=new h0(K,64,64,V0,sA,jB,JQ,JQ,L0,Z0,1),Y=new h0(J,64,64,V0,sA,jB,JQ,JQ,L0,Z0,1);return U.needsUpdate=!0,Y.needsUpdate=!0,this.LTC_HALF_1=U,this.LTC_HALF_2=Y,this.LTC_FLOAT_1=I,this.LTC_FLOAT_2=C,this}}L6.LTC_HALF_1=null;L6.LTC_HALF_1=null;L6.LTC_FLOAT_1=null;L6.LTC_FLOAT_2=null;var pv=new g0,mv=new y;vA.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new AA(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};CE.line={uniforms:oA.merge([vA.common,vA.fog,vA.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};var ov=new MA,rv=new y,av=new y,tv=new MA,ev=new MA,Ah=new MA,Qh=new y,Eh=new RA,Bh=new $B,Ih=new y,Ch=new g0,Kh=new KQ,Jh=new MA;var qh=new y,Fh=new y,Dh=new MA;var th=new DQ,eh=new y;class YK extends C0{constructor(A){super(A);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(Q){return new PG(Q)}),this.register(function(Q){return new VG(Q)}),this.register(function(Q){return new uG(Q)}),this.register(function(Q){return new pG(Q)}),this.register(function(Q){return new mG(Q)}),this.register(function(Q){return new vG(Q)}),this.register(function(Q){return new hG(Q)}),this.register(function(Q){return new yG(Q)}),this.register(function(Q){return new gG(Q)}),this.register(function(Q){return new zG(Q)}),this.register(function(Q){return new xG(Q)}),this.register(function(Q){return new jG(Q)}),this.register(function(Q){return new fG(Q)}),this.register(function(Q){return new bG(Q)}),this.register(function(Q){return new SG(Q)}),this.register(function(Q){return new cG(Q)}),this.register(function(Q){return new lG(Q)})}load(A,Q,E,B){let I=this,C;if(this.resourcePath!=="")C=this.resourcePath;else if(this.path!==""){let U=QE.extractUrlBase(A);C=QE.resolveURL(U,this.path)}else C=QE.extractUrlBase(A);this.manager.itemStart(A);let K=function(U){if(B)B(U);else console.error(U);I.manager.itemError(A),I.manager.itemEnd(A)},J=new U0(this.manager);J.setPath(this.path),J.setResponseType("arraybuffer"),J.setRequestHeader(this.requestHeader),J.setWithCredentials(this.withCredentials),J.load(A,function(U){try{I.parse(U,C,function(Y){Q(Y),I.manager.itemEnd(A)},K)}catch(Y){K(Y)}},E,K)}setDRACOLoader(A){return this.dracoLoader=A,this}setKTX2Loader(A){return this.ktx2Loader=A,this}setMeshoptDecoder(A){return this.meshoptDecoder=A,this}register(A){if(this.pluginCallbacks.indexOf(A)===-1)this.pluginCallbacks.push(A);return this}unregister(A){if(this.pluginCallbacks.indexOf(A)!==-1)this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(A),1);return this}parse(A,Q,E,B){let I,C={},K={},J=/*@__PURE__*/new TextDecoder;if(typeof A==="string")I=JSON.parse(A);else if(A instanceof ArrayBuffer)if(J.decode(new Uint8Array(A,0,4))===dG){try{C[u0.KHR_BINARY_GLTF]=new nG(A)}catch(H){if(B)B(H);return}I=JSON.parse(C[u0.KHR_BINARY_GLTF].content)}else I=JSON.parse(J.decode(A));else I=A;if(I.asset===void 0||I.asset.version[0]<2){if(B)B(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let U=new aG(I,{path:Q||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});U.fileLoader.setRequestHeader(this.requestHeader);for(let Y=0;Y<this.pluginCallbacks.length;Y++){let H=this.pluginCallbacks[Y](U);if(!H.name)console.error("THREE.GLTFLoader: Invalid plugin found: missing name");K[H.name]=H,C[H.name]=!0}if(I.extensionsUsed)for(let Y=0;Y<I.extensionsUsed.length;++Y){let H=I.extensionsUsed[Y],R=I.extensionsRequired||[];switch(H){case u0.KHR_MATERIALS_UNLIT:C[H]=new TG;break;case u0.KHR_DRACO_MESH_COMPRESSION:C[H]=new sG(I,this.dracoLoader);break;case u0.KHR_TEXTURE_TRANSFORM:C[H]=new iG;break;case u0.KHR_MESH_QUANTIZATION:C[H]=new oG;break;default:if(R.indexOf(H)>=0&&K[H]===void 0)console.warn('THREE.GLTFLoader: Unknown extension "'+H+'".')}}U.setExtensions(C),U.setPlugins(K),U.parse(E,B)}parseAsync(A,Q){let E=this;return new Promise(function(B,I){E.parse(A,Q,B,I)})}}function Nw(){let A={};return{get:function(Q){return A[Q]},add:function(Q,E){A[Q]=E},remove:function(Q){delete A[Q]},removeAll:function(){A={}}}}var u0={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class SG{constructor(A){this.parser=A,this.name=u0.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let A=this.parser,Q=this.parser.json.nodes||[];for(let E=0,B=Q.length;E<B;E++){let I=Q[E];if(I.extensions&&I.extensions[this.name]&&I.extensions[this.name].light!==void 0)A._addNodeRef(this.cache,I.extensions[this.name].light)}}_loadLight(A){let Q=this.parser,E="light:"+A,B=Q.cache.get(E);if(B)return B;let I=Q.json,J=((I.extensions&&I.extensions[this.name]||{}).lights||[])[A],U,Y=new a(16777215);if(J.color!==void 0)Y.setRGB(J.color[0],J.color[1],J.color[2],b0);let H=J.range!==void 0?J.range:0;switch(J.type){case"directional":U=new XB(Y),U.target.position.set(0,0,-1),U.add(U.target);break;case"point":U=new WB(Y),U.distance=H;break;case"spot":U=new UI(Y),U.distance=H,J.spot=J.spot||{},J.spot.innerConeAngle=J.spot.innerConeAngle!==void 0?J.spot.innerConeAngle:0,J.spot.outerConeAngle=J.spot.outerConeAngle!==void 0?J.spot.outerConeAngle:Math.PI/4,U.angle=J.spot.outerConeAngle,U.penumbra=1-J.spot.innerConeAngle/J.spot.outerConeAngle,U.target.position.set(0,0,-1),U.add(U.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+J.type)}if(U.position.set(0,0,0),HI(U,J),J.intensity!==void 0)U.intensity=J.intensity;return U.name=Q.createUniqueName(J.name||"light_"+A),B=Promise.resolve(U),Q.cache.add(E,B),B}getDependency(A,Q){if(A!=="light")return;return this._loadLight(Q)}createNodeAttachment(A){let Q=this,E=this.parser,I=E.json.nodes[A],K=(I.extensions&&I.extensions[this.name]||{}).light;if(K===void 0)return null;return this._loadLight(K).then(function(J){return E._getNodeRef(Q.cache,K,J)})}}class TG{constructor(){this.name=u0.KHR_MATERIALS_UNLIT}getMaterialType(){return _0}extendParams(A,Q,E){let B=[];A.color=new a(1,1,1),A.opacity=1;let I=Q.pbrMetallicRoughness;if(I){if(Array.isArray(I.baseColorFactor)){let C=I.baseColorFactor;A.color.setRGB(C[0],C[1],C[2],b0),A.opacity=C[3]}if(I.baseColorTexture!==void 0)B.push(E.assignTexture(A,"map",I.baseColorTexture,N0))}return Promise.all(B)}}class zG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(A,Q){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=B.extensions[this.name].emissiveStrength;if(I!==void 0)Q.emissiveIntensity=I;return Promise.resolve()}}class PG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_CLEARCOAT}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let E=this.parser,B=E.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=[],C=B.extensions[this.name];if(C.clearcoatFactor!==void 0)Q.clearcoat=C.clearcoatFactor;if(C.clearcoatTexture!==void 0)I.push(E.assignTexture(Q,"clearcoatMap",C.clearcoatTexture));if(C.clearcoatRoughnessFactor!==void 0)Q.clearcoatRoughness=C.clearcoatRoughnessFactor;if(C.clearcoatRoughnessTexture!==void 0)I.push(E.assignTexture(Q,"clearcoatRoughnessMap",C.clearcoatRoughnessTexture));if(C.clearcoatNormalTexture!==void 0){if(I.push(E.assignTexture(Q,"clearcoatNormalMap",C.clearcoatNormalTexture)),C.clearcoatNormalTexture.scale!==void 0){let K=C.clearcoatNormalTexture.scale;Q.clearcoatNormalScale=new AA(K,K)}}return Promise.all(I)}}class VG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_DISPERSION}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=B.extensions[this.name];return Q.dispersion=I.dispersion!==void 0?I.dispersion:0,Promise.resolve()}}class jG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_IRIDESCENCE}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let E=this.parser,B=E.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=[],C=B.extensions[this.name];if(C.iridescenceFactor!==void 0)Q.iridescence=C.iridescenceFactor;if(C.iridescenceTexture!==void 0)I.push(E.assignTexture(Q,"iridescenceMap",C.iridescenceTexture));if(C.iridescenceIor!==void 0)Q.iridescenceIOR=C.iridescenceIor;if(Q.iridescenceThicknessRange===void 0)Q.iridescenceThicknessRange=[100,400];if(C.iridescenceThicknessMinimum!==void 0)Q.iridescenceThicknessRange[0]=C.iridescenceThicknessMinimum;if(C.iridescenceThicknessMaximum!==void 0)Q.iridescenceThicknessRange[1]=C.iridescenceThicknessMaximum;if(C.iridescenceThicknessTexture!==void 0)I.push(E.assignTexture(Q,"iridescenceThicknessMap",C.iridescenceThicknessTexture));return Promise.all(I)}}class vG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_SHEEN}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let E=this.parser,B=E.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=[];Q.sheenColor=new a(0,0,0),Q.sheenRoughness=0,Q.sheen=1;let C=B.extensions[this.name];if(C.sheenColorFactor!==void 0){let K=C.sheenColorFactor;Q.sheenColor.setRGB(K[0],K[1],K[2],b0)}if(C.sheenRoughnessFactor!==void 0)Q.sheenRoughness=C.sheenRoughnessFactor;if(C.sheenColorTexture!==void 0)I.push(E.assignTexture(Q,"sheenColorMap",C.sheenColorTexture,N0));if(C.sheenRoughnessTexture!==void 0)I.push(E.assignTexture(Q,"sheenRoughnessMap",C.sheenRoughnessTexture));return Promise.all(I)}}class hG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_TRANSMISSION}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let E=this.parser,B=E.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=[],C=B.extensions[this.name];if(C.transmissionFactor!==void 0)Q.transmission=C.transmissionFactor;if(C.transmissionTexture!==void 0)I.push(E.assignTexture(Q,"transmissionMap",C.transmissionTexture));return Promise.all(I)}}class yG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_VOLUME}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let E=this.parser,B=E.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=[],C=B.extensions[this.name];if(Q.thickness=C.thicknessFactor!==void 0?C.thicknessFactor:0,C.thicknessTexture!==void 0)I.push(E.assignTexture(Q,"thicknessMap",C.thicknessTexture));Q.attenuationDistance=C.attenuationDistance||1/0;let K=C.attenuationColor||[1,1,1];return Q.attenuationColor=new a().setRGB(K[0],K[1],K[2],b0),Promise.all(I)}}class gG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_IOR}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=B.extensions[this.name];return Q.ior=I.ior!==void 0?I.ior:1.5,Promise.resolve()}}class xG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_SPECULAR}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let E=this.parser,B=E.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=[],C=B.extensions[this.name];if(Q.specularIntensity=C.specularFactor!==void 0?C.specularFactor:1,C.specularTexture!==void 0)I.push(E.assignTexture(Q,"specularIntensityMap",C.specularTexture));let K=C.specularColorFactor||[1,1,1];if(Q.specularColor=new a().setRGB(K[0],K[1],K[2],b0),C.specularColorTexture!==void 0)I.push(E.assignTexture(Q,"specularColorMap",C.specularColorTexture,N0));return Promise.all(I)}}class bG{constructor(A){this.parser=A,this.name=u0.EXT_MATERIALS_BUMP}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let E=this.parser,B=E.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=[],C=B.extensions[this.name];if(Q.bumpScale=C.bumpFactor!==void 0?C.bumpFactor:1,C.bumpTexture!==void 0)I.push(E.assignTexture(Q,"bumpMap",C.bumpTexture));return Promise.all(I)}}class fG{constructor(A){this.parser=A,this.name=u0.KHR_MATERIALS_ANISOTROPY}getMaterialType(A){let E=this.parser.json.materials[A];if(!E.extensions||!E.extensions[this.name])return null;return fQ}extendMaterialParams(A,Q){let E=this.parser,B=E.json.materials[A];if(!B.extensions||!B.extensions[this.name])return Promise.resolve();let I=[],C=B.extensions[this.name];if(C.anisotropyStrength!==void 0)Q.anisotropy=C.anisotropyStrength;if(C.anisotropyRotation!==void 0)Q.anisotropyRotation=C.anisotropyRotation;if(C.anisotropyTexture!==void 0)I.push(E.assignTexture(Q,"anisotropyMap",C.anisotropyTexture));return Promise.all(I)}}class uG{constructor(A){this.parser=A,this.name=u0.KHR_TEXTURE_BASISU}loadTexture(A){let Q=this.parser,E=Q.json,B=E.textures[A];if(!B.extensions||!B.extensions[this.name])return null;let I=B.extensions[this.name],C=Q.options.ktx2Loader;if(!C)if(E.extensionsRequired&&E.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");else return null;return Q.loadTextureImage(A,I.source,C)}}class pG{constructor(A){this.parser=A,this.name=u0.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(A){let Q=this.name,E=this.parser,B=E.json,I=B.textures[A];if(!I.extensions||!I.extensions[Q])return null;let C=I.extensions[Q],K=B.images[C.source],J=E.textureLoader;if(K.uri){let U=E.options.manager.getHandler(K.uri);if(U!==null)J=U}return this.detectSupport().then(function(U){if(U)return E.loadTextureImage(A,C.source,J);if(B.extensionsRequired&&B.extensionsRequired.indexOf(Q)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return E.loadTexture(A)})}detectSupport(){if(!this.isSupported)this.isSupported=new Promise(function(A){let Q=new Image;Q.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",Q.onload=Q.onerror=function(){A(Q.height===1)}});return this.isSupported}}class mG{constructor(A){this.parser=A,this.name=u0.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(A){let Q=this.name,E=this.parser,B=E.json,I=B.textures[A];if(!I.extensions||!I.extensions[Q])return null;let C=I.extensions[Q],K=B.images[C.source],J=E.textureLoader;if(K.uri){let U=E.options.manager.getHandler(K.uri);if(U!==null)J=U}return this.detectSupport().then(function(U){if(U)return E.loadTextureImage(A,C.source,J);if(B.extensionsRequired&&B.extensionsRequired.indexOf(Q)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return E.loadTexture(A)})}detectSupport(){if(!this.isSupported)this.isSupported=new Promise(function(A){let Q=new Image;Q.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",Q.onload=Q.onerror=function(){A(Q.height===1)}});return this.isSupported}}class cG{constructor(A){this.name=u0.EXT_MESHOPT_COMPRESSION,this.parser=A}loadBufferView(A){let Q=this.parser.json,E=Q.bufferViews[A];if(E.extensions&&E.extensions[this.name]){let B=E.extensions[this.name],I=this.parser.getDependency("buffer",B.buffer),C=this.parser.options.meshoptDecoder;if(!C||!C.supported)if(Q.extensionsRequired&&Q.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");else return null;return I.then(function(K){let J=B.byteOffset||0,U=B.byteLength||0,Y=B.count,H=B.byteStride,R=new Uint8Array(K,J,U);if(C.decodeGltfBufferAsync)return C.decodeGltfBufferAsync(Y,H,R,B.mode,B.filter).then(function(O){return O.buffer});else return C.ready.then(function(){let O=new ArrayBuffer(Y*H);return C.decodeGltfBuffer(new Uint8Array(O),Y,H,R,B.mode,B.filter),O})})}else return null}}class lG{constructor(A){this.name=u0.EXT_MESH_GPU_INSTANCING,this.parser=A}createNodeMesh(A){let Q=this.parser.json,E=Q.nodes[A];if(!E.extensions||!E.extensions[this.name]||E.mesh===void 0)return null;let B=Q.meshes[E.mesh];for(let U of B.primitives)if(U.mode!==AB.TRIANGLES&&U.mode!==AB.TRIANGLE_STRIP&&U.mode!==AB.TRIANGLE_FAN&&U.mode!==void 0)return null;let C=E.extensions[this.name].attributes,K=[],J={};for(let U in C)K.push(this.parser.getDependency("accessor",C[U]).then((Y)=>{return J[U]=Y,J[U]}));if(K.length<1)return null;return K.push(this.parser.createNodeMesh(A)),Promise.all(K).then((U)=>{let Y=U.pop(),H=Y.isGroup?Y.children:[Y],R=U[0].count,O=[];for(let N of H){let $=new RA,L=new y,W=new J0,Z=new y(1,1,1),G=new vI(N.geometry,N.material,R);for(let X=0;X<R;X++){if(J.TRANSLATION)L.fromBufferAttribute(J.TRANSLATION,X);if(J.ROTATION)W.fromBufferAttribute(J.ROTATION,X);if(J.SCALE)Z.fromBufferAttribute(J.SCALE,X);G.setMatrixAt(X,$.compose(L,W,Z))}for(let X in J)if(X==="_COLOR_0"){let q=J[X];G.instanceColor=new HB(q.array,q.itemSize,q.normalized)}else if(X!=="TRANSLATION"&&X!=="ROTATION"&&X!=="SCALE")N.geometry.setAttribute(X,J[X]);I0.prototype.copy.call(G,N),this.parser.assignFinalMaterial(G),O.push(G)}if(Y.isGroup)return Y.clear(),Y.add(...O),Y;return O[0]})}}var dG="glTF",UK=12,MG={JSON:1313821514,BIN:5130562};class nG{constructor(A){this.name=u0.KHR_BINARY_GLTF,this.content=null,this.body=null;let Q=new DataView(A,0,UK),E=/*@__PURE__*/new TextDecoder;if(this.header={magic:E.decode(new Uint8Array(A.slice(0,4))),version:Q.getUint32(4,!0),length:Q.getUint32(8,!0)},this.header.magic!==dG)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");else if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let B=this.header.length-UK,I=new DataView(A,UK),C=0;while(C<B){let K=I.getUint32(C,!0);C+=4;let J=I.getUint32(C,!0);if(C+=4,J===MG.JSON){let U=new Uint8Array(A,UK+C,K);this.content=E.decode(U)}else if(J===MG.BIN){let U=UK+C;this.body=A.slice(U,U+K)}C+=K}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class sG{constructor(A,Q){if(!Q)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=u0.KHR_DRACO_MESH_COMPRESSION,this.json=A,this.dracoLoader=Q,this.dracoLoader.preload()}decodePrimitive(A,Q){let E=this.json,B=this.dracoLoader,I=A.extensions[this.name].bufferView,C=A.extensions[this.name].attributes,K={},J={},U={};for(let Y in C){let H=kH[Y]||Y.toLowerCase();K[H]=C[Y]}for(let Y in A.attributes){let H=kH[Y]||Y.toLowerCase();if(C[Y]!==void 0){let R=E.accessors[A.attributes[Y]],O=q6[R.componentType];U[H]=O.name,J[H]=R.normalized===!0}}return Q.getDependency("bufferView",I).then(function(Y){return new Promise(function(H,R){B.decodeDracoFile(Y,function(O){for(let N in O.attributes){let $=O.attributes[N],L=J[N];if(L!==void 0)$.normalized=L}H(O)},K,U,b0,R)})})}}class iG{constructor(){this.name=u0.KHR_TEXTURE_TRANSFORM}extendTexture(A,Q){if((Q.texCoord===void 0||Q.texCoord===A.channel)&&Q.offset===void 0&&Q.rotation===void 0&&Q.scale===void 0)return A;if(A=A.clone(),Q.texCoord!==void 0)A.channel=Q.texCoord;if(Q.offset!==void 0)A.offset.fromArray(Q.offset);if(Q.rotation!==void 0)A.rotation=Q.rotation;if(Q.scale!==void 0)A.repeat.fromArray(Q.scale);return A.needsUpdate=!0,A}}class oG{constructor(){this.name=u0.KHR_MESH_QUANTIZATION}}class TH extends KI{constructor(A,Q,E,B){super(A,Q,E,B)}copySampleValue_(A){let Q=this.resultBuffer,E=this.sampleValues,B=this.valueSize,I=A*B*3+B;for(let C=0;C!==B;C++)Q[C]=E[I+C];return Q}interpolate_(A,Q,E,B){let I=this.resultBuffer,C=this.sampleValues,K=this.valueSize,J=K*2,U=K*3,Y=B-Q,H=(E-Q)/Y,R=H*H,O=R*H,N=A*U,$=N-U,L=-2*O+3*R,W=O-R,Z=1-L,G=W-R+H;for(let X=0;X!==K;X++){let q=C[$+X+K],M=C[$+X+J]*Y,F=C[N+X+K],D=C[N+X]*Y;I[X]=Z*q+G*M+L*F+W*D}return I}}var Gw=new J0;class rG extends TH{interpolate_(A,Q,E,B){let I=super.interpolate_(A,Q,E,B);return Gw.fromArray(I).normalize().toArray(I),I}}var AB={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},q6={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},wG={9728:Z0,9729:L0,9984:X1,9985:AI,9986:vB,9987:hQ},_G={33071:JQ,33648:OE,10497:BQ},MH={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},kH={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},fI={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ww={CUBICSPLINE:void 0,LINEAR:T1,STEP:g8},wH={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Xw(A){if(A.DefaultMaterial===void 0)A.DefaultMaterial=new aQ({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:jQ});return A.DefaultMaterial}function c1(A,Q,E){for(let B in E.extensions)if(A[B]===void 0)Q.userData.gltfExtensions=Q.userData.gltfExtensions||{},Q.userData.gltfExtensions[B]=E.extensions[B]}function HI(A,Q){if(Q.extras!==void 0)if(typeof Q.extras==="object")Object.assign(A.userData,Q.extras);else console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Q.extras)}function $w(A,Q,E){let B=!1,I=!1,C=!1;for(let Y=0,H=Q.length;Y<H;Y++){let R=Q[Y];if(R.POSITION!==void 0)B=!0;if(R.NORMAL!==void 0)I=!0;if(R.COLOR_0!==void 0)C=!0;if(B&&I&&C)break}if(!B&&!I&&!C)return Promise.resolve(A);let K=[],J=[],U=[];for(let Y=0,H=Q.length;Y<H;Y++){let R=Q[Y];if(B){let O=R.POSITION!==void 0?E.getDependency("accessor",R.POSITION):A.attributes.position;K.push(O)}if(I){let O=R.NORMAL!==void 0?E.getDependency("accessor",R.NORMAL):A.attributes.normal;J.push(O)}if(C){let O=R.COLOR_0!==void 0?E.getDependency("accessor",R.COLOR_0):A.attributes.color;U.push(O)}}return Promise.all([Promise.all(K),Promise.all(J),Promise.all(U)]).then(function(Y){let H=Y[0],R=Y[1],O=Y[2];if(B)A.morphAttributes.position=H;if(I)A.morphAttributes.normal=R;if(C)A.morphAttributes.color=O;return A.morphTargetsRelative=!0,A})}function Lw(A,Q){if(A.updateMorphTargets(),Q.weights!==void 0)for(let E=0,B=Q.weights.length;E<B;E++)A.morphTargetInfluences[E]=Q.weights[E];if(Q.extras&&Array.isArray(Q.extras.targetNames)){let E=Q.extras.targetNames;if(A.morphTargetInfluences.length===E.length){A.morphTargetDictionary={};for(let B=0,I=E.length;B<I;B++)A.morphTargetDictionary[E[B]]=B}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qw(A){let Q,E=A.extensions&&A.extensions[u0.KHR_DRACO_MESH_COMPRESSION];if(E)Q="draco:"+E.bufferView+":"+E.indices+":"+_H(E.attributes);else Q=A.indices+":"+_H(A.attributes)+":"+A.mode;if(A.targets!==void 0)for(let B=0,I=A.targets.length;B<I;B++)Q+=":"+_H(A.targets[B]);return Q}function _H(A){let Q="",E=Object.keys(A).sort();for(let B=0,I=E.length;B<I;B++)Q+=E[B]+":"+A[E[B]]+";";return Q}function SH(A){switch(A){case Int8Array:return 0.007874015748031496;case Uint8Array:return 0.00392156862745098;case Int16Array:return 0.00003051850947599719;case Uint16Array:return 0.000015259021896696422;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Fw(A){if(A.search(/\.jpe?g($|\?)/i)>0||A.search(/^data\:image\/jpeg/)===0)return"image/jpeg";if(A.search(/\.webp($|\?)/i)>0||A.search(/^data\:image\/webp/)===0)return"image/webp";if(A.search(/\.ktx2($|\?)/i)>0||A.search(/^data\:image\/ktx2/)===0)return"image/ktx2";return"image/png"}var Dw=new RA;class aG{constructor(A={},Q={}){this.json=A,this.extensions={},this.plugins={},this.options=Q,this.cache=new Nw,this.associations=/*@__PURE__*/new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let E=!1,B=-1,I=!1,C=-1;if(typeof navigator!=="undefined"){let K=navigator.userAgent;E=/^((?!chrome|android).)*safari/i.test(K)===!0;let J=K.match(/Version\/(\d+)/);B=E&&J?parseInt(J[1],10):-1,I=K.indexOf("Firefox")>-1,C=I?K.match(/Firefox\/([0-9]+)\./)[1]:-1}if(typeof createImageBitmap==="undefined"||E&&B<17||I&&C<98)this.textureLoader=new nQ(this.options.manager);else this.textureLoader=new iC(this.options.manager);if(this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new U0(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials")this.fileLoader.setWithCredentials(!0)}setExtensions(A){this.extensions=A}setPlugins(A){this.plugins=A}parse(A,Q){let E=this,B=this.json,I=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(C){return C._markDefs&&C._markDefs()}),Promise.all(this._invokeAll(function(C){return C.beforeRoot&&C.beforeRoot()})).then(function(){return Promise.all([E.getDependencies("scene"),E.getDependencies("animation"),E.getDependencies("camera")])}).then(function(C){let K={scene:C[0][B.scene||0],scenes:C[0],animations:C[1],cameras:C[2],asset:B.asset,parser:E,userData:{}};return c1(I,K,B),HI(K,B),Promise.all(E._invokeAll(function(J){return J.afterRoot&&J.afterRoot(K)})).then(function(){for(let J of K.scenes)J.updateMatrixWorld();A(K)})}).catch(Q)}_markDefs(){let A=this.json.nodes||[],Q=this.json.skins||[],E=this.json.meshes||[];for(let B=0,I=Q.length;B<I;B++){let C=Q[B].joints;for(let K=0,J=C.length;K<J;K++)A[C[K]].isBone=!0}for(let B=0,I=A.length;B<I;B++){let C=A[B];if(C.mesh!==void 0){if(this._addNodeRef(this.meshCache,C.mesh),C.skin!==void 0)E[C.mesh].isSkinnedMesh=!0}if(C.camera!==void 0)this._addNodeRef(this.cameraCache,C.camera)}}_addNodeRef(A,Q){if(Q===void 0)return;if(A.refs[Q]===void 0)A.refs[Q]=A.uses[Q]=0;A.refs[Q]++}_getNodeRef(A,Q,E){if(A.refs[Q]<=1)return E;let B=E.clone(),I=(C,K)=>{let J=this.associations.get(C);if(J!=null)this.associations.set(K,J);for(let[U,Y]of C.children.entries())I(Y,K.children[U])};return I(E,B),B.name+="_instance_"+A.uses[Q]++,B}_invokeOne(A){let Q=Object.values(this.plugins);Q.push(this);for(let E=0;E<Q.length;E++){let B=A(Q[E]);if(B)return B}return null}_invokeAll(A){let Q=Object.values(this.plugins);Q.unshift(this);let E=[];for(let B=0;B<Q.length;B++){let I=A(Q[B]);if(I)E.push(I)}return E}getDependency(A,Q){let E=A+":"+Q,B=this.cache.get(E);if(!B){switch(A){case"scene":B=this.loadScene(Q);break;case"node":B=this._invokeOne(function(I){return I.loadNode&&I.loadNode(Q)});break;case"mesh":B=this._invokeOne(function(I){return I.loadMesh&&I.loadMesh(Q)});break;case"accessor":B=this.loadAccessor(Q);break;case"bufferView":B=this._invokeOne(function(I){return I.loadBufferView&&I.loadBufferView(Q)});break;case"buffer":B=this.loadBuffer(Q);break;case"material":B=this._invokeOne(function(I){return I.loadMaterial&&I.loadMaterial(Q)});break;case"texture":B=this._invokeOne(function(I){return I.loadTexture&&I.loadTexture(Q)});break;case"skin":B=this.loadSkin(Q);break;case"animation":B=this._invokeOne(function(I){return I.loadAnimation&&I.loadAnimation(Q)});break;case"camera":B=this.loadCamera(Q);break;default:if(B=this._invokeOne(function(I){return I!=this&&I.getDependency&&I.getDependency(A,Q)}),!B)throw new Error("Unknown type: "+A);break}this.cache.add(E,B)}return B}getDependencies(A){let Q=this.cache.get(A);if(!Q){let E=this,B=this.json[A+(A==="mesh"?"es":"s")]||[];Q=Promise.all(B.map(function(I,C){return E.getDependency(A,C)})),this.cache.add(A,Q)}return Q}loadBuffer(A){let Q=this.json.buffers[A],E=this.fileLoader;if(Q.type&&Q.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+Q.type+" buffer type is not supported.");if(Q.uri===void 0&&A===0)return Promise.resolve(this.extensions[u0.KHR_BINARY_GLTF].body);let B=this.options;return new Promise(function(I,C){E.load(QE.resolveURL(Q.uri,B.path),I,void 0,function(){C(new Error('THREE.GLTFLoader: Failed to load buffer "'+Q.uri+'".'))})})}loadBufferView(A){let Q=this.json.bufferViews[A];return this.getDependency("buffer",Q.buffer).then(function(E){let B=Q.byteLength||0,I=Q.byteOffset||0;return E.slice(I,I+B)})}loadAccessor(A){let Q=this,E=this.json,B=this.json.accessors[A];if(B.bufferView===void 0&&B.sparse===void 0){let C=MH[B.type],K=q6[B.componentType],J=B.normalized===!0,U=new K(B.count*C);return Promise.resolve(new tA(U,C,J))}let I=[];if(B.bufferView!==void 0)I.push(this.getDependency("bufferView",B.bufferView));else I.push(null);if(B.sparse!==void 0)I.push(this.getDependency("bufferView",B.sparse.indices.bufferView)),I.push(this.getDependency("bufferView",B.sparse.values.bufferView));return Promise.all(I).then(function(C){let K=C[0],J=MH[B.type],U=q6[B.componentType],Y=U.BYTES_PER_ELEMENT,H=Y*J,R=B.byteOffset||0,O=B.bufferView!==void 0?E.bufferViews[B.bufferView].byteStride:void 0,N=B.normalized===!0,$,L;if(O&&O!==H){let W=Math.floor(R/O),Z="InterleavedBuffer:"+B.bufferView+":"+B.componentType+":"+W+":"+B.count,G=Q.cache.get(Z);if(!G)$=new U(K,W*O,B.count*O/Y),G=new hE($,O/Y),Q.cache.add(Z,G);L=new xQ(G,J,R%O/Y,N)}else{if(K===null)$=new U(B.count*J);else $=new U(K,R,B.count*J);L=new tA($,J,N)}if(B.sparse!==void 0){let W=MH.SCALAR,Z=q6[B.sparse.indices.componentType],G=B.sparse.indices.byteOffset||0,X=B.sparse.values.byteOffset||0,q=new Z(C[1],G,B.sparse.count*W),M=new U(C[2],X,B.sparse.count*J);if(K!==null)L=new tA(L.array.slice(),L.itemSize,L.normalized);L.normalized=!1;for(let F=0,D=q.length;F<D;F++){let _=q[F];if(L.setX(_,M[F*J]),J>=2)L.setY(_,M[F*J+1]);if(J>=3)L.setZ(_,M[F*J+2]);if(J>=4)L.setW(_,M[F*J+3]);if(J>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}L.normalized=N}return L})}loadTexture(A){let Q=this.json,E=this.options,I=Q.textures[A].source,C=Q.images[I],K=this.textureLoader;if(C.uri){let J=E.manager.getHandler(C.uri);if(J!==null)K=J}return this.loadTextureImage(A,I,K)}loadTextureImage(A,Q,E){let B=this,I=this.json,C=I.textures[A],K=I.images[Q],J=(K.uri||K.bufferView)+":"+C.sampler;if(this.textureCache[J])return this.textureCache[J];let U=this.loadImageSource(Q,E).then(function(Y){if(Y.flipY=!1,Y.name=C.name||K.name||"",Y.name===""&&typeof K.uri==="string"&&K.uri.startsWith("data:image/")===!1)Y.name=K.uri;let R=(I.samplers||{})[C.sampler]||{};return Y.magFilter=wG[R.magFilter]||L0,Y.minFilter=wG[R.minFilter]||hQ,Y.wrapS=_G[R.wrapS]||BQ,Y.wrapT=_G[R.wrapT]||BQ,Y.generateMipmaps=!Y.isCompressedTexture&&Y.minFilter!==Z0&&Y.minFilter!==L0,B.associations.set(Y,{textures:A}),Y}).catch(function(){return null});return this.textureCache[J]=U,U}loadImageSource(A,Q){let E=this,B=this.json,I=this.options;if(this.sourceCache[A]!==void 0)return this.sourceCache[A].then((H)=>H.clone());let C=B.images[A],K=self.URL||self.webkitURL,J=C.uri||"",U=!1;if(C.bufferView!==void 0)J=E.getDependency("bufferView",C.bufferView).then(function(H){U=!0;let R=new Blob([H],{type:C.mimeType});return J=K.createObjectURL(R),J});else if(C.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+A+" is missing URI and bufferView");let Y=Promise.resolve(J).then(function(H){return new Promise(function(R,O){let N=R;if(Q.isImageBitmapLoader===!0)N=function($){let L=new EQ($);L.needsUpdate=!0,R(L)};Q.load(QE.resolveURL(H,I.path),N,void 0,O)})}).then(function(H){if(U===!0)K.revokeObjectURL(J);return HI(H,C),H.userData.mimeType=C.mimeType||Fw(C.uri),H}).catch(function(H){throw console.error("THREE.GLTFLoader: Couldn't load texture",J),H});return this.sourceCache[A]=Y,Y}assignTexture(A,Q,E,B){let I=this;return this.getDependency("texture",E.index).then(function(C){if(!C)return null;if(E.texCoord!==void 0&&E.texCoord>0)C=C.clone(),C.channel=E.texCoord;if(I.extensions[u0.KHR_TEXTURE_TRANSFORM]){let K=E.extensions!==void 0?E.extensions[u0.KHR_TEXTURE_TRANSFORM]:void 0;if(K){let J=I.associations.get(C);C=I.extensions[u0.KHR_TEXTURE_TRANSFORM].extendTexture(C,K),I.associations.set(C,J)}}if(B!==void 0)C.colorSpace=B;return A[Q]=C,C})}assignFinalMaterial(A){let{geometry:Q,material:E}=A,B=Q.attributes.tangent===void 0,I=Q.attributes.color!==void 0,C=Q.attributes.normal===void 0;if(A.isPoints){let K="PointsMaterial:"+E.uuid,J=this.cache.get(K);if(!J)J=new aE,$Q.prototype.copy.call(J,E),J.color.copy(E.color),J.map=E.map,J.sizeAttenuation=!1,this.cache.add(K,J);E=J}else if(A.isLine){let K="LineBasicMaterial:"+E.uuid,J=this.cache.get(K);if(!J)J=new p0,$Q.prototype.copy.call(J,E),J.color.copy(E.color),J.map=E.map,this.cache.add(K,J);E=J}if(B||I||C){let K="ClonedMaterial:"+E.uuid+":";if(B)K+="derivative-tangents:";if(I)K+="vertex-colors:";if(C)K+="flat-shading:";let J=this.cache.get(K);if(!J){if(J=E.clone(),I)J.vertexColors=!0;if(C)J.flatShading=!0;if(B){if(J.normalScale)J.normalScale.y*=-1;if(J.clearcoatNormalScale)J.clearcoatNormalScale.y*=-1}this.cache.add(K,J),this.associations.set(J,this.associations.get(E))}E=J}A.material=E}getMaterialType(){return aQ}loadMaterial(A){let Q=this,E=this.json,B=this.extensions,I=E.materials[A],C,K={},J=I.extensions||{},U=[];if(J[u0.KHR_MATERIALS_UNLIT]){let H=B[u0.KHR_MATERIALS_UNLIT];C=H.getMaterialType(),U.push(H.extendParams(K,I,Q))}else{let H=I.pbrMetallicRoughness||{};if(K.color=new a(1,1,1),K.opacity=1,Array.isArray(H.baseColorFactor)){let R=H.baseColorFactor;K.color.setRGB(R[0],R[1],R[2],b0),K.opacity=R[3]}if(H.baseColorTexture!==void 0)U.push(Q.assignTexture(K,"map",H.baseColorTexture,N0));if(K.metalness=H.metallicFactor!==void 0?H.metallicFactor:1,K.roughness=H.roughnessFactor!==void 0?H.roughnessFactor:1,H.metallicRoughnessTexture!==void 0)U.push(Q.assignTexture(K,"metalnessMap",H.metallicRoughnessTexture)),U.push(Q.assignTexture(K,"roughnessMap",H.metallicRoughnessTexture));C=this._invokeOne(function(R){return R.getMaterialType&&R.getMaterialType(A)}),U.push(Promise.all(this._invokeAll(function(R){return R.extendMaterialParams&&R.extendMaterialParams(A,K)})))}if(I.doubleSided===!0)K.side=y0;let Y=I.alphaMode||wH.OPAQUE;if(Y===wH.BLEND)K.transparent=!0,K.depthWrite=!1;else if(K.transparent=!1,Y===wH.MASK)K.alphaTest=I.alphaCutoff!==void 0?I.alphaCutoff:0.5;if(I.normalTexture!==void 0&&C!==_0){if(U.push(Q.assignTexture(K,"normalMap",I.normalTexture)),K.normalScale=new AA(1,1),I.normalTexture.scale!==void 0){let H=I.normalTexture.scale;K.normalScale.set(H,H)}}if(I.occlusionTexture!==void 0&&C!==_0){if(U.push(Q.assignTexture(K,"aoMap",I.occlusionTexture)),I.occlusionTexture.strength!==void 0)K.aoMapIntensity=I.occlusionTexture.strength}if(I.emissiveFactor!==void 0&&C!==_0){let H=I.emissiveFactor;K.emissive=new a().setRGB(H[0],H[1],H[2],b0)}if(I.emissiveTexture!==void 0&&C!==_0)U.push(Q.assignTexture(K,"emissiveMap",I.emissiveTexture,N0));return Promise.all(U).then(function(){let H=new C(K);if(I.name)H.name=I.name;if(HI(H,I),Q.associations.set(H,{materials:A}),I.extensions)c1(B,H,I);return H})}createUniqueName(A){let Q=T0.sanitizeNodeName(A||"");if(Q in this.nodeNamesUsed)return Q+"_"+ ++this.nodeNamesUsed[Q];else return this.nodeNamesUsed[Q]=0,Q}loadGeometries(A){let Q=this,E=this.extensions,B=this.primitiveCache;function I(K){return E[u0.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(K,Q).then(function(J){return kG(J,K,Q)})}let C=[];for(let K=0,J=A.length;K<J;K++){let U=A[K],Y=qw(U),H=B[Y];if(H)C.push(H.promise);else{let R;if(U.extensions&&U.extensions[u0.KHR_DRACO_MESH_COMPRESSION])R=I(U);else R=kG(new hA,U,Q);B[Y]={primitive:U,promise:R},C.push(R)}}return Promise.all(C)}loadMesh(A){let Q=this,E=this.json,B=this.extensions,I=E.meshes[A],C=I.primitives,K=[];for(let J=0,U=C.length;J<U;J++){let Y=C[J].material===void 0?Xw(this.cache):this.getDependency("material",C[J].material);K.push(Y)}return K.push(Q.loadGeometries(C)),Promise.all(K).then(function(J){let U=J.slice(0,J.length-1),Y=J[J.length-1],H=[];for(let O=0,N=Y.length;O<N;O++){let $=Y[O],L=C[O],W,Z=U[O];if(L.mode===AB.TRIANGLES||L.mode===AB.TRIANGLE_STRIP||L.mode===AB.TRIANGLE_FAN||L.mode===void 0){if(W=I.isSkinnedMesh===!0?new jI($,Z):new xA($,Z),W.isSkinnedMesh===!0)W.normalizeSkinWeights();if(L.mode===AB.TRIANGLE_STRIP)W.geometry=LH(W.geometry,x8);else if(L.mode===AB.TRIANGLE_FAN)W.geometry=LH(W.geometry,z1)}else if(L.mode===AB.LINES)W=new RQ($,Z);else if(L.mode===AB.LINE_STRIP)W=new VQ($,Z);else if(L.mode===AB.LINE_LOOP)W=new l8($,Z);else if(L.mode===AB.POINTS)W=new GB($,Z);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+L.mode);if(Object.keys(W.geometry.morphAttributes).length>0)Lw(W,I);if(W.name=Q.createUniqueName(I.name||"mesh_"+A),HI(W,I),L.extensions)c1(B,W,L);Q.assignFinalMaterial(W),H.push(W)}for(let O=0,N=H.length;O<N;O++)Q.associations.set(H[O],{meshes:A,primitives:O});if(H.length===1){if(I.extensions)c1(B,H[0],I);return H[0]}let R=new i0;if(I.extensions)c1(B,R,I);Q.associations.set(R,{meshes:A});for(let O=0,N=H.length;O<N;O++)R.add(H[O]);return R})}loadCamera(A){let Q,E=this.json.cameras[A],B=E[E.type];if(!B){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}if(E.type==="perspective")Q=new v0(o0.radToDeg(B.yfov),B.aspectRatio||1,B.znear||1,B.zfar||2000000);else if(E.type==="orthographic")Q=new HE(-B.xmag,B.xmag,B.ymag,-B.ymag,B.znear,B.zfar);if(E.name)Q.name=this.createUniqueName(E.name);return HI(Q,E),Promise.resolve(Q)}loadSkin(A){let Q=this.json.skins[A],E=[];for(let B=0,I=Q.joints.length;B<I;B++)E.push(this._loadNodeShallow(Q.joints[B]));if(Q.inverseBindMatrices!==void 0)E.push(this.getDependency("accessor",Q.inverseBindMatrices));else E.push(null);return Promise.all(E).then(function(B){let I=B.pop(),C=B,K=[],J=[];for(let U=0,Y=C.length;U<Y;U++){let H=C[U];if(H){K.push(H);let R=new RA;if(I!==null)R.fromArray(I.array,U*16);J.push(R)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Q.joints[U])}return new gB(K,J)})}loadAnimation(A){let Q=this.json,E=this,B=Q.animations[A],I=B.name?B.name:"animation_"+A,C=[],K=[],J=[],U=[],Y=[];for(let H=0,R=B.channels.length;H<R;H++){let O=B.channels[H],N=B.samplers[O.sampler],$=O.target,L=$.node,W=B.parameters!==void 0?B.parameters[N.input]:N.input,Z=B.parameters!==void 0?B.parameters[N.output]:N.output;if($.node===void 0)continue;C.push(this.getDependency("node",L)),K.push(this.getDependency("accessor",W)),J.push(this.getDependency("accessor",Z)),U.push(N),Y.push($)}return Promise.all([Promise.all(C),Promise.all(K),Promise.all(J),Promise.all(U),Promise.all(Y)]).then(function(H){let R=H[0],O=H[1],N=H[2],$=H[3],L=H[4],W=[];for(let Z=0,G=R.length;Z<G;Z++){let X=R[Z],q=O[Z],M=N[Z],F=$[Z],D=L[Z];if(X===void 0)continue;if(X.updateMatrix)X.updateMatrix();let _=E._createAnimationTracks(X,q,M,F,D);if(_)for(let w=0;w<_.length;w++)W.push(_[w])}return new oQ(I,void 0,W)})}createNodeMesh(A){let Q=this.json,E=this,B=Q.nodes[A];if(B.mesh===void 0)return null;return E.getDependency("mesh",B.mesh).then(function(I){let C=E._getNodeRef(E.meshCache,B.mesh,I);if(B.weights!==void 0)C.traverse(function(K){if(!K.isMesh)return;for(let J=0,U=B.weights.length;J<U;J++)K.morphTargetInfluences[J]=B.weights[J]});return C})}loadNode(A){let Q=this.json,E=this,B=Q.nodes[A],I=E._loadNodeShallow(A),C=[],K=B.children||[];for(let U=0,Y=K.length;U<Y;U++)C.push(E.getDependency("node",K[U]));let J=B.skin===void 0?Promise.resolve(null):E.getDependency("skin",B.skin);return Promise.all([I,Promise.all(C),J]).then(function(U){let Y=U[0],H=U[1],R=U[2];if(R!==null)Y.traverse(function(O){if(!O.isSkinnedMesh)return;O.bind(R,Dw)});for(let O=0,N=H.length;O<N;O++)Y.add(H[O]);return Y})}_loadNodeShallow(A){let Q=this.json,E=this.extensions,B=this;if(this.nodeCache[A]!==void 0)return this.nodeCache[A];let I=Q.nodes[A],C=I.name?B.createUniqueName(I.name):"",K=[],J=B._invokeOne(function(U){return U.createNodeMesh&&U.createNodeMesh(A)});if(J)K.push(J);if(I.camera!==void 0)K.push(B.getDependency("camera",I.camera).then(function(U){return B._getNodeRef(B.cameraCache,I.camera,U)}));return B._invokeAll(function(U){return U.createNodeAttachment&&U.createNodeAttachment(A)}).forEach(function(U){K.push(U)}),this.nodeCache[A]=Promise.all(K).then(function(U){let Y;if(I.isBone===!0)Y=new yB;else if(U.length>1)Y=new i0;else if(U.length===1)Y=U[0];else Y=new I0;if(Y!==U[0])for(let H=0,R=U.length;H<R;H++)Y.add(U[H]);if(I.name)Y.userData.name=I.name,Y.name=C;if(HI(Y,I),I.extensions)c1(E,Y,I);if(I.matrix!==void 0){let H=new RA;H.fromArray(I.matrix),Y.applyMatrix4(H)}else{if(I.translation!==void 0)Y.position.fromArray(I.translation);if(I.rotation!==void 0)Y.quaternion.fromArray(I.rotation);if(I.scale!==void 0)Y.scale.fromArray(I.scale)}if(!B.associations.has(Y))B.associations.set(Y,{});return B.associations.get(Y).nodes=A,Y}),this.nodeCache[A]}loadScene(A){let Q=this.extensions,E=this.json.scenes[A],B=this,I=new i0;if(E.name)I.name=B.createUniqueName(E.name);if(HI(I,E),E.extensions)c1(Q,I,E);let C=E.nodes||[],K=[];for(let J=0,U=C.length;J<U;J++)K.push(B.getDependency("node",C[J]));return Promise.all(K).then(function(J){for(let Y=0,H=J.length;Y<H;Y++)I.add(J[Y]);let U=(Y)=>{let H=/*@__PURE__*/new Map;for(let[R,O]of B.associations)if(R instanceof $Q||R instanceof EQ)H.set(R,O);return Y.traverse((R)=>{let O=B.associations.get(R);if(O!=null)H.set(R,O)}),H};return B.associations=U(I),I})}_createAnimationTracks(A,Q,E,B,I){let C=[],K=A.name?A.name:A.uuid,J=[];if(fI[I.path]===fI.weights)A.traverse(function(R){if(R.morphTargetInfluences)J.push(R.name?R.name:R.uuid)});else J.push(K);let U;switch(fI[I.path]){case fI.weights:U=zE;break;case fI.rotation:U=ME;break;case fI.position:case fI.scale:U=YE;break;default:switch(E.itemSize){case 1:U=zE;break;case 2:case 3:default:U=YE;break}break}let Y=B.interpolation!==void 0?Ww[B.interpolation]:T1,H=this._getArrayFromAccessor(E);for(let R=0,O=J.length;R<O;R++){let N=new U(J[R]+"."+fI[I.path],Q.array,H,Y);if(B.interpolation==="CUBICSPLINE")this._createCubicSplineTrackInterpolant(N);C.push(N)}return C}_getArrayFromAccessor(A){let Q=A.array;if(A.normalized){let E=SH(Q.constructor),B=new Float32Array(Q.length);for(let I=0,C=Q.length;I<C;I++)B[I]=Q[I]*E;Q=B}return Q}_createCubicSplineTrackInterpolant(A){A.createInterpolant=function Q(E){return new(this instanceof ME?rG:TH)(this.times,this.values,this.getValueSize()/3,E)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Mw(A,Q,E){let B=Q.attributes,I=new g0;if(B.POSITION!==void 0){let J=E.json.accessors[B.POSITION],U=J.min,Y=J.max;if(U!==void 0&&Y!==void 0){if(I.set(new y(U[0],U[1],U[2]),new y(Y[0],Y[1],Y[2])),J.normalized){let H=SH(q6[J.componentType]);I.min.multiplyScalar(H),I.max.multiplyScalar(H)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let C=Q.targets;if(C!==void 0){let J=new y,U=new y;for(let Y=0,H=C.length;Y<H;Y++){let R=C[Y];if(R.POSITION!==void 0){let O=E.json.accessors[R.POSITION],N=O.min,$=O.max;if(N!==void 0&&$!==void 0){if(U.setX(Math.max(Math.abs(N[0]),Math.abs($[0]))),U.setY(Math.max(Math.abs(N[1]),Math.abs($[1]))),U.setZ(Math.max(Math.abs(N[2]),Math.abs($[2]))),O.normalized){let L=SH(q6[O.componentType]);U.multiplyScalar(L)}J.max(U)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}I.expandByVector(J)}A.boundingBox=I;let K=new KQ;I.getCenter(K.center),K.radius=I.min.distanceTo(I.max)/2,A.boundingSphere=K}function kG(A,Q,E){let B=Q.attributes,I=[];function C(K,J){return E.getDependency("accessor",K).then(function(U){A.setAttribute(J,U)})}for(let K in B){let J=kH[K]||K.toLowerCase();if(J in A.attributes)continue;I.push(C(B[K],J))}if(Q.indices!==void 0&&!A.index){let K=E.getDependency("accessor",Q.indices).then(function(J){A.setIndex(J)});I.push(K)}if(O0.workingColorSpace!==b0&&"COLOR_0"in B)console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${O0.workingColorSpace}" not supported.`);return HI(A,Q),Mw(A,Q,E),Promise.all(I).then(function(){return Q.targets!==void 0?$w(A,Q.targets,E):A})}class zH{constructor(A=4){this.pool=A,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(A){if(!this.workers[A]){let Q=this.workerCreator();Q.addEventListener("message",this._onMessage.bind(this,A)),this.workers[A]=Q}}_getIdleWorker(){for(let A=0;A<this.pool;A++)if(!(this.workerStatus&1<<A))return A;return-1}_onMessage(A,Q){let E=this.workersResolve[A];if(E&&E(Q),this.queue.length){let{resolve:B,msg:I,transfer:C}=this.queue.shift();this.workersResolve[A]=B,this.workers[A].postMessage(I,C)}else this.workerStatus^=1<<A}setWorkerCreator(A){this.workerCreator=A}setWorkerLimit(A){this.pool=A}postMessage(A,Q){return new Promise((E)=>{let B=this._getIdleWorker();if(B!==-1)this._initWorker(B),this.workerStatus|=1<<B,this.workersResolve[B]=E,this.workers[B].postMessage(A,Q);else this.queue.push({resolve:E,msg:A,transfer:Q})})}dispose(){this.workers.forEach((A)=>A.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var PH,ZI,jH,VH={env:{emscripten_notify_memory_growth:function(A){jH=new Uint8Array(ZI.exports.memory.buffer)}}};class vH{init(){return PH||(PH=typeof fetch!="undefined"?fetch("data:application/wasm;base64,"+tG).then((A)=>A.arrayBuffer()).then((A)=>WebAssembly.instantiate(A,VH)).then(this._init):WebAssembly.instantiate(Buffer.from(tG,"base64"),VH).then(this._init),PH)}_init(A){ZI=A.instance,VH.env.emscripten_notify_memory_growth(0)}decode(A,Q=0){if(!ZI)throw new Error("ZSTDDecoder: Await .init() before decoding.");let E=A.byteLength,B=ZI.exports.malloc(E);jH.set(A,B),Q=Q||Number(ZI.exports.ZSTD_findDecompressedSize(B,E));let I=ZI.exports.malloc(Q),C=ZI.exports.ZSTD_decompress(I,Q,B,E),K=jH.slice(I,I+C);return ZI.exports.free(B),ZI.exports.free(I),K}}var tG="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";var eG="display-p3",AW="display-p3-linear";var hH=/*@__PURE__*/new WeakMap,yH=0,gH;class qB extends C0{constructor(A){super(A);if(this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new zH,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER!=="undefined")console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(A){return this.transcoderPath=A,this}setWorkerLimit(A){return this.workerPool.setWorkerLimit(A),this}async detectSupportAsync(A){return this.workerConfig={astcSupported:await A.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await A.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await A.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await A.hasFeatureAsync("texture-compression-bc"),bptcSupported:await A.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await A.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(A){if(A.isWebGPURenderer===!0)this.workerConfig={astcSupported:A.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:A.hasFeature("texture-compression-etc1"),etc2Supported:A.hasFeature("texture-compression-etc2"),dxtSupported:A.hasFeature("texture-compression-bc"),bptcSupported:A.hasFeature("texture-compression-bptc"),pvrtcSupported:A.hasFeature("texture-compression-pvrtc")};else this.workerConfig={astcSupported:A.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:A.extensions.has("WEBGL_compressed_texture_astc")&&A.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:A.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:A.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:A.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:A.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:A.extensions.has("WEBGL_compressed_texture_pvrtc")||A.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")};return this}init(){if(!this.transcoderPending){let A=new U0(this.manager);A.setPath(this.transcoderPath),A.setWithCredentials(this.withCredentials);let Q=A.loadAsync("basis_transcoder.js"),E=new U0(this.manager);E.setPath(this.transcoderPath),E.setResponseType("arraybuffer"),E.setWithCredentials(this.withCredentials);let B=E.loadAsync("basis_transcoder.wasm");if(this.transcoderPending=Promise.all([Q,B]).then(([I,C])=>{let K=qB.BasisWorker.toString(),J=["/* constants */","let _EngineFormat = "+JSON.stringify(qB.EngineFormat),"let _EngineType = "+JSON.stringify(qB.EngineType),"let _TranscoderFormat = "+JSON.stringify(qB.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(qB.BasisFormat),"/* basis_transcoder.js */",I,"/* worker */",K.substring(K.indexOf("{")+1,K.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([J])),this.transcoderBinary=C,this.workerPool.setWorkerCreator(()=>{let U=new Worker(this.workerSourceURL),Y=this.transcoderBinary.slice(0);return U.postMessage({type:"init",config:this.workerConfig,transcoderBinary:Y},[Y]),U})}),yH>0)console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances.");yH++}return this.transcoderPending}load(A,Q,E,B){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");let I=new U0(this.manager);I.setResponseType("arraybuffer"),I.setWithCredentials(this.withCredentials),I.load(A,(C)=>{this.parse(C,Q,B)},E,B)}parse(A,Q,E){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(hH.has(A))return hH.get(A).promise.then(Q).catch(E);this._createTexture(A).then((B)=>Q?Q(B):null).catch(E)}_createTextureFrom(A,Q){let{type:E,error:B,data:{faces:I,width:C,height:K,format:J,type:U,dfdFlags:Y}}=A;if(E==="error")return Promise.reject(B);let H;if(Q.faceCount===6)H=new kC(I,J,U);else{let R=I[0].mipmaps;H=Q.layerCount>1?new _C(R,C,K,Q.layerCount,J,U):new yE(R,C,K,J,U)}return H.minFilter=I[0].mipmaps.length===1?L0:hQ,H.magFilter=L0,H.generateMipmaps=!1,H.needsUpdate=!0,H.colorSpace=QW(Q),H.premultiplyAlpha=!!(Y&XG),H}async _createTexture(A,Q={}){let E=qG(new Uint8Array(A)),B=E.vkFormat===HU&&E.dataFormatDescriptor[0].colorModel===167;if(!(E.vkFormat===LG||B&&!this.workerConfig.astcHDRSupported))return kw(E);let C=Q,K=this.init().then(()=>{return this.workerPool.postMessage({type:"transcode",buffer:A,taskConfig:C},[A])}).then((J)=>this._createTextureFrom(J.data,E));return hH.set(A,{promise:K}),K}dispose(){if(this.workerPool.dispose(),this.workerSourceURL)URL.revokeObjectURL(this.workerSourceURL);return yH--,this}}qB.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2};qB.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25};qB.EngineFormat={RGBAFormat:V0,RGBA_ASTC_4x4_Format:w1,RGB_BPTC_UNSIGNED_Format:S1,RGBA_BPTC_Format:k1,RGBA_ETC2_EAC_Format:y8,RGBA_PVRTC_4BPPV1_Format:D1,RGBA_S3TC_DXT5_Format:PI,RGB_ETC1_Format:M1,RGB_ETC2_Format:h8,RGB_PVRTC_4BPPV1_Format:F1,RGBA_S3TC_DXT1_Format:q1};qB.EngineType={UnsignedByteType:x0,HalfFloatType:sA,FloatType:m0};qB.BasisWorker=function(){let A,Q,E,B=_EngineFormat,I=_EngineType,C=_TranscoderFormat,K=_BasisFormat;self.addEventListener("message",function($){let L=$.data;switch(L.type){case"init":A=L.config,J(L.transcoderBinary);break;case"transcode":Q.then(()=>{try{let{faces:W,buffers:Z,width:G,height:X,hasAlpha:q,format:M,type:F,dfdFlags:D}=U(L.buffer);self.postMessage({type:"transcode",id:L.id,data:{faces:W,width:G,height:X,hasAlpha:q,format:M,type:F,dfdFlags:D}},Z)}catch(W){console.error(W),self.postMessage({type:"error",id:L.id,error:W.message})}});break}});function J($){Q=new Promise((L)=>{E={wasmBinary:$,onRuntimeInitialized:L},BASIS(E)}).then(()=>{if(E.initializeBasis(),E.KTX2File===void 0)console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function U($){let L=new E.KTX2File(new Uint8Array($));function W(){L.close(),L.delete()}if(!L.isValid())throw W(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");let Z;if(L.isUASTC())Z=K.UASTC;else if(L.isETC1S())Z=K.ETC1S;else if(L.isHDR())Z=K.UASTC_HDR;else throw new Error("THREE.KTX2Loader: Unknown Basis encoding");let G=L.getWidth(),X=L.getHeight(),q=L.getLayers()||1,M=L.getLevels(),F=L.getFaces(),D=L.getHasAlpha(),_=L.getDFDFlags(),{transcoderFormat:w,engineFormat:k,engineType:T}=R(Z,G,X,D);if(!G||!X||!M)throw W(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!L.startTranscoding())throw W(),new Error("THREE.KTX2Loader: .startTranscoding failed");let z=[],j=[];for(let v=0;v<F;v++){let g=[];for(let P=0;P<M;P++){let V=[],S,h;for(let b=0;b<q;b++){let m=L.getImageLevelInfo(P,b,v);if(v===0&&P===0&&b===0&&(m.origWidth%4!==0||m.origHeight%4!==0))console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions.");if(M>1)S=m.origWidth,h=m.origHeight;else S=m.width,h=m.height;let s=new Uint8Array(L.getImageTranscodedSizeInBytes(P,b,0,w)),i=L.transcodeImage(s,P,b,v,w,0,-1,-1);if(T===I.HalfFloatType)s=new Uint16Array(s.buffer,s.byteOffset,s.byteLength/Uint16Array.BYTES_PER_ELEMENT);if(!i)throw W(),new Error("THREE.KTX2Loader: .transcodeImage failed.");V.push(s)}let x=N(V);g.push({data:x,width:S,height:h}),j.push(x.buffer)}z.push({mipmaps:g,width:G,height:X,format:k,type:T})}return W(),{faces:z,buffers:j,width:G,height:X,hasAlpha:D,dfdFlags:_,format:k,type:T}}let Y=[{if:"astcSupported",basisFormat:[K.UASTC],transcoderFormat:[C.ASTC_4x4,C.ASTC_4x4],engineFormat:[B.RGBA_ASTC_4x4_Format,B.RGBA_ASTC_4x4_Format],engineType:[I.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[K.ETC1S,K.UASTC],transcoderFormat:[C.BC7_M5,C.BC7_M5],engineFormat:[B.RGBA_BPTC_Format,B.RGBA_BPTC_Format],engineType:[I.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[K.ETC1S,K.UASTC],transcoderFormat:[C.BC1,C.BC3],engineFormat:[B.RGBA_S3TC_DXT1_Format,B.RGBA_S3TC_DXT5_Format],engineType:[I.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[K.ETC1S,K.UASTC],transcoderFormat:[C.ETC1,C.ETC2],engineFormat:[B.RGB_ETC2_Format,B.RGBA_ETC2_EAC_Format],engineType:[I.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[K.ETC1S,K.UASTC],transcoderFormat:[C.ETC1],engineFormat:[B.RGB_ETC1_Format],engineType:[I.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[K.ETC1S,K.UASTC],transcoderFormat:[C.PVRTC1_4_RGB,C.PVRTC1_4_RGBA],engineFormat:[B.RGB_PVRTC_4BPPV1_Format,B.RGBA_PVRTC_4BPPV1_Format],engineType:[I.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[K.UASTC_HDR],transcoderFormat:[C.BC6H],engineFormat:[B.RGB_BPTC_UNSIGNED_Format],engineType:[I.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[K.ETC1S,K.UASTC],transcoderFormat:[C.RGBA32,C.RGBA32],engineFormat:[B.RGBAFormat,B.RGBAFormat],engineType:[I.UnsignedByteType,I.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[K.UASTC_HDR],transcoderFormat:[C.RGBA_HALF],engineFormat:[B.RGBAFormat],engineType:[I.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],H={[K.ETC1S]:Y.filter(($)=>$.basisFormat.includes(K.ETC1S)).sort(($,L)=>$.priorityUASTC-L.priorityUASTC),[K.UASTC]:Y.filter(($)=>$.basisFormat.includes(K.UASTC)).sort(($,L)=>$.priorityUASTC-L.priorityUASTC),[K.UASTC_HDR]:Y.filter(($)=>$.basisFormat.includes(K.UASTC_HDR)).sort(($,L)=>$.priorityHDR-L.priorityHDR)};function R($,L,W,Z){let G=H[$];for(let X=0;X<G.length;X++){let q=G[X];if(q.if&&!A[q.if])continue;if(!q.basisFormat.includes($))continue;if(Z&&q.transcoderFormat.length<2)continue;if(q.needsPowerOfTwo&&!(O(L)&&O(W)))continue;let M=q.transcoderFormat[Z?1:0],F=q.engineFormat[Z?1:0],D=q.engineType[0];return{transcoderFormat:M,engineFormat:F,engineType:D}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}function O($){if($<=2)return!0;return($&$-1)===0&&$!==0}function N($){if($.length===1)return $[0];let L=0;for(let G=0;G<$.length;G++){let X=$[G];L+=X.byteLength}let W=new Uint8Array(L),Z=0;for(let G=0;G<$.length;G++){let X=$[G];W.set(X,Z),Z+=X.byteLength}return W}};var _w=/*@__PURE__*/new Set([V0,jE,SQ]),xH={[$6]:V0,[G6]:V0,[Z6]:V0,[CK]:V0,[X6]:jE,[N6]:jE,[H6]:jE,[IK]:jE,[W6]:SQ,[R6]:SQ,[BK]:SQ,[O6]:SQ,[HU]:w1,[XH]:_1,[WH]:_1},bH={[$6]:m0,[G6]:sA,[Z6]:x0,[CK]:x0,[X6]:m0,[N6]:sA,[H6]:x0,[IK]:x0,[W6]:m0,[R6]:sA,[BK]:x0,[O6]:x0,[HU]:sA,[XH]:x0,[WH]:x0};async function kw(A){let{vkFormat:Q}=A;if(xH[Q]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let E;if(A.supercompressionScheme===RH){if(!gH)gH=new Promise(async(C)=>{let K=new vH;await K.init(),C(K)});E=await gH}let B=[];for(let C=0;C<A.levels.length;C++){let K=Math.max(1,A.pixelWidth>>C),J=Math.max(1,A.pixelHeight>>C),U=A.pixelDepth?Math.max(1,A.pixelDepth>>C):0,Y=A.levels[C],H;if(A.supercompressionScheme===WG)H=Y.levelData;else if(A.supercompressionScheme===RH)H=E.decode(Y.levelData,Y.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let R;if(bH[Q]===m0)R=new Float32Array(H.buffer,H.byteOffset,H.byteLength/Float32Array.BYTES_PER_ELEMENT);else if(bH[Q]===sA)R=new Uint16Array(H.buffer,H.byteOffset,H.byteLength/Uint16Array.BYTES_PER_ELEMENT);else R=H;B.push({data:R,width:K,height:J,depth:U})}let I;if(_w.has(xH[Q]))I=A.pixelDepth===0?new h0(B[0].data,A.pixelWidth,A.pixelHeight):new NB(B[0].data,A.pixelWidth,A.pixelHeight,A.pixelDepth);else{if(A.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");I=new yE(B,A.pixelWidth,A.pixelHeight),I.minFilter=B.length===1?L0:hQ,I.magFilter=L0}return I.mipmaps=B,I.type=bH[Q],I.format=xH[Q],I.colorSpace=QW(A),I.needsUpdate=!0,Promise.resolve(I)}function QW(A){let Q=A.dataFormatDescriptor[0];if(Q.colorPrimaries===GH)return Q.transferFunction===OU?N0:b0;else if(Q.colorPrimaries===$G)return Q.transferFunction===OU?eG:AW;else if(Q.colorPrimaries===NH)return YQ;else return console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${Q.colorPrimaries}"`),YQ}var vy=new y,hy=new y;var yy=new qE;var BW={};rU(BW,{default:()=>CQ});var CQ={};if(typeof document!=="undefined"){function createTag(A){return document.createElement(A)}function extendPrototype(A,Q){var E,B=A.length,I;for(E=0;E<B;E+=1){I=A[E].prototype;for(var C in I)if(Object.prototype.hasOwnProperty.call(I,C))Q.prototype[C]=I[C]}}function getDescriptor(A,Q){return Object.getOwnPropertyDescriptor(A,Q)}function createProxyFunction(A){function Q(){}return Q.prototype=A,Q}function createSizedArray(A){return Array.apply(null,{length:A})}function ProjectInterface$1(){return{}}function roundValues(A){_shouldRoundValues=!!A}function bmRnd(A){if(_shouldRoundValues)return Math.round(A);return A}function styleDiv(A){A.style.position="absolute",A.style.top=0,A.style.left=0,A.style.display="block",A.style.transformOrigin="0 0",A.style.webkitTransformOrigin="0 0",A.style.backfaceVisibility="visible",A.style.webkitBackfaceVisibility="visible",A.style.transformStyle="preserve-3d",A.style.webkitTransformStyle="preserve-3d",A.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(A,Q,E,B){this.type=A,this.currentTime=Q,this.totalTime=E,this.direction=B<0?-1:1}function BMCompleteEvent(A,Q){this.type=A,this.direction=Q<0?-1:1}function BMCompleteLoopEvent(A,Q,E,B){this.type=A,this.currentLoop=E,this.totalLoops=Q,this.direction=B<0?-1:1}function BMSegmentStartEvent(A,Q,E){this.type=A,this.firstFrame=Q,this.totalFrames=E}function BMDestroyEvent(A,Q){this.type=A,this.target=Q}function BMRenderFrameErrorEvent(A,Q){this.type="renderFrameError",this.nativeError=A,this.currentTime=Q}function BMConfigErrorEvent(A){this.type="configError",this.nativeError=A}function BMAnimationConfigErrorEvent(A,Q){this.type=A,this.nativeError=Q}function HSVtoRGB(A,Q,E){var B,I,C,K,J,U,Y,H;switch(K=Math.floor(A*6),J=A*6-K,U=E*(1-Q),Y=E*(1-J*Q),H=E*(1-(1-J)*Q),K%6){case 0:B=E,I=H,C=U;break;case 1:B=Y,I=E,C=U;break;case 2:B=U,I=E,C=H;break;case 3:B=U,I=Y,C=E;break;case 4:B=H,I=U,C=E;break;case 5:B=E,I=U,C=Y;break;default:break}return[B,I,C]}function RGBtoHSV(A,Q,E){var B=Math.max(A,Q,E),I=Math.min(A,Q,E),C=B-I,K,J=B===0?0:C/B,U=B/255;switch(B){case I:K=0;break;case A:K=Q-E+C*(Q<E?6:0),K/=6*C;break;case Q:K=E-A+C*2,K/=6*C;break;case E:K=A-Q+C*4,K/=6*C;break;default:break}return[K,J,U]}function addSaturationToRGB(A,Q){var E=RGBtoHSV(A[0]*255,A[1]*255,A[2]*255);if(E[1]+=Q,E[1]>1)E[1]=1;else if(E[1]<=0)E[1]=0;return HSVtoRGB(E[0],E[1],E[2])}function addBrightnessToRGB(A,Q){var E=RGBtoHSV(A[0]*255,A[1]*255,A[2]*255);if(E[2]+=Q,E[2]>1)E[2]=1;else if(E[2]<0)E[2]=0;return HSVtoRGB(E[0],E[1],E[2])}function addHueToRGB(A,Q){var E=RGBtoHSV(A[0]*255,A[1]*255,A[2]*255);if(E[0]+=Q/360,E[0]>1)E[0]-=1;else if(E[0]<0)E[0]+=1;return HSVtoRGB(E[0],E[1],E[2])}function createNS(A){return document.createElementNS("http://www.w3.org/2000/svg",A)}function BaseEvent(){}function getRenderer(A){return renderers[A]}function bezFunction(){var A=Math;function Q(O,N,$,L,W,Z){var G=O*L+N*W+$*Z-W*L-Z*O-$*N;return G>-0.001&&G<0.001}function E(O,N,$,L,W,Z,G,X,q){if($===0&&Z===0&&q===0)return Q(O,N,L,W,G,X);var M=A.sqrt(A.pow(L-O,2)+A.pow(W-N,2)+A.pow(Z-$,2)),F=A.sqrt(A.pow(G-O,2)+A.pow(X-N,2)+A.pow(q-$,2)),D=A.sqrt(A.pow(G-L,2)+A.pow(X-W,2)+A.pow(q-Z,2)),_;if(M>F)if(M>D)_=M-F-D;else _=D-F-M;else if(D>F)_=D-F-M;else _=F-M-D;return _>-0.0001&&_<0.0001}var B=function(){return function(O,N,$,L){var W=getDefaultCurveSegments(),Z,G,X,q,M,F=0,D,_=[],w=[],k=bezierLengthPool.newElement();X=$.length;for(Z=0;Z<W;Z+=1){M=Z/(W-1),D=0;for(G=0;G<X;G+=1){if(q=bmPow(1-M,3)*O[G]+3*bmPow(1-M,2)*M*$[G]+3*(1-M)*bmPow(M,2)*L[G]+bmPow(M,3)*N[G],_[G]=q,w[G]!==null)D+=bmPow(_[G]-w[G],2);w[G]=_[G]}if(D)D=bmSqrt(D),F+=D;k.percents[Z]=M,k.lengths[Z]=F}return k.addedLength=F,k}}();function I(O){var N=segmentsLengthPool.newElement(),$=O.c,L=O.v,W=O.o,Z=O.i,G,X=O._length,q=N.lengths,M=0;for(G=0;G<X-1;G+=1)q[G]=B(L[G],L[G+1],W[G],Z[G+1]),M+=q[G].addedLength;if($&&X)q[G]=B(L[G],L[0],W[G],Z[0]),M+=q[G].addedLength;return N.totalLength=M,N}function C(O){this.segmentLength=0,this.points=new Array(O)}function K(O,N){this.partialLength=O,this.point=N}var J=function(){var O={};return function(N,$,L,W){var Z=(N[0]+"_"+N[1]+"_"+$[0]+"_"+$[1]+"_"+L[0]+"_"+L[1]+"_"+W[0]+"_"+W[1]).replace(/\./g,"p");if(!O[Z]){var G=getDefaultCurveSegments(),X,q,M,F,D,_=0,w,k,T=null;if(N.length===2&&(N[0]!==$[0]||N[1]!==$[1])&&Q(N[0],N[1],$[0],$[1],N[0]+L[0],N[1]+L[1])&&Q(N[0],N[1],$[0],$[1],$[0]+W[0],$[1]+W[1]))G=2;var z=new C(G);M=L.length;for(X=0;X<G;X+=1){k=createSizedArray(M),D=X/(G-1),w=0;for(q=0;q<M;q+=1)if(F=bmPow(1-D,3)*N[q]+3*bmPow(1-D,2)*D*(N[q]+L[q])+3*(1-D)*bmPow(D,2)*($[q]+W[q])+bmPow(D,3)*$[q],k[q]=F,T!==null)w+=bmPow(k[q]-T[q],2);w=bmSqrt(w),_+=w,z.points[X]=new K(w,k),T=k}z.segmentLength=_,O[Z]=z}return O[Z]}}();function U(O,N){var{percents:$,lengths:L}=N,W=$.length,Z=bmFloor((W-1)*O),G=O*N.addedLength,X=0;if(Z===W-1||Z===0||G===L[Z])return $[Z];var q=L[Z]>G?-1:1,M=!0;while(M){if(L[Z]<=G&&L[Z+1]>G)X=(G-L[Z])/(L[Z+1]-L[Z]),M=!1;else Z+=q;if(Z<0||Z>=W-1){if(Z===W-1)return $[Z];M=!1}}return $[Z]+($[Z+1]-$[Z])*X}function Y(O,N,$,L,W,Z){var G=U(W,Z),X=1-G,q=A.round((X*X*X*O[0]+(G*X*X+X*G*X+X*X*G)*$[0]+(G*G*X+X*G*G+G*X*G)*L[0]+G*G*G*N[0])*1000)/1000,M=A.round((X*X*X*O[1]+(G*X*X+X*G*X+X*X*G)*$[1]+(G*G*X+X*G*G+G*X*G)*L[1]+G*G*G*N[1])*1000)/1000;return[q,M]}var H=createTypedArray("float32",8);function R(O,N,$,L,W,Z,G){if(W<0)W=0;else if(W>1)W=1;var X=U(W,G);Z=Z>1?1:Z;var q=U(Z,G),M,F=O.length,D=1-X,_=1-q,w=D*D*D,k=X*D*D*3,T=X*X*D*3,z=X*X*X,j=D*D*_,v=X*D*_+D*X*_+D*D*q,g=X*X*_+D*X*q+X*D*q,P=X*X*q,V=D*_*_,S=X*_*_+D*q*_+D*_*q,h=X*q*_+D*q*q+X*_*q,x=X*q*q,b=_*_*_,m=q*_*_+_*q*_+_*_*q,s=q*q*_+_*q*q+q*_*q,i=q*q*q;for(M=0;M<F;M+=1)H[M*4]=A.round((w*O[M]+k*$[M]+T*L[M]+z*N[M])*1000)/1000,H[M*4+1]=A.round((j*O[M]+v*$[M]+g*L[M]+P*N[M])*1000)/1000,H[M*4+2]=A.round((V*O[M]+S*$[M]+h*L[M]+x*N[M])*1000)/1000,H[M*4+3]=A.round((b*O[M]+m*$[M]+s*L[M]+i*N[M])*1000)/1000;return H}return{getSegmentsLength:I,getNewSegment:R,getPointInSegment:Y,buildBezierData:J,pointOnLine2D:Q,pointOnLine3D:E}}function DynamicPropertyContainer(){}function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function setLocation(A){setLocationHref(A)}function searchAnimations(){if(standalone===!0)animationManager.searchAnimations(animationData,standalone,renderer);else animationManager.searchAnimations()}function setSubframeRendering(A){setSubframeEnabled(A)}function setPrefix(A){setIdPrefix(A)}function loadAnimation(A){if(standalone===!0)A.animationData=JSON.parse(animationData);return animationManager.loadAnimation(A)}function setQuality(A){if(typeof A==="string")switch(A){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else if(!isNaN(A)&&A>1)setDefaultCurveSegments(A);if(getDefaultCurveSegments()>=50)roundValues(!1);else roundValues(!0)}function inBrowser(){return typeof navigator!=="undefined"}function installPlugin(A,Q){if(A==="expressions")setExpressionsPlugin(Q)}function getFactory(A){switch(A){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){if(document.readyState==="complete")clearInterval(readyStateCheckInterval),searchAnimations()}function getQueryVariable(A){var Q=queryString.split("&");for(var E=0;E<Q.length;E+=1){var B=Q[E].split("=");if(decodeURIComponent(B[0])==A)return decodeURIComponent(B[1])}return null}function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}function RepeaterModifier(){}function RoundCornersModifier(){}function getFontProperties(A){var Q=A.fStyle?A.fStyle.split(" "):[],E="normal",B="normal",I=Q.length,C;for(var K=0;K<I;K+=1)switch(C=Q[K].toLowerCase(),C){case"italic":B="italic";break;case"bold":E="700";break;case"black":E="900";break;case"medium":E="500";break;case"regular":case"normal":E="400";break;case"light":case"thin":E="200";break;default:break}return{style:B,weight:A.fWeight||E}}function RenderableElement(){}function SliderEffect(A,Q,E){this.p=PropertyFactory.getProp(Q,A.v,0,0,E)}function AngleEffect(A,Q,E){this.p=PropertyFactory.getProp(Q,A.v,0,0,E)}function ColorEffect(A,Q,E){this.p=PropertyFactory.getProp(Q,A.v,1,0,E)}function PointEffect(A,Q,E){this.p=PropertyFactory.getProp(Q,A.v,1,0,E)}function LayerIndexEffect(A,Q,E){this.p=PropertyFactory.getProp(Q,A.v,0,0,E)}function MaskIndexEffect(A,Q,E){this.p=PropertyFactory.getProp(Q,A.v,0,0,E)}function CheckboxEffect(A,Q,E){this.p=PropertyFactory.getProp(Q,A.v,0,0,E)}function NoValueEffect(){this.p={}}function EffectsManager(A,Q){var E=A.ef||[];this.effectElements=[];var B,I=E.length,C;for(B=0;B<I;B+=1)C=new GroupEffect(E[B],Q),this.effectElements.push(C)}function GroupEffect(A,Q){this.init(A,Q)}function BaseElement(){}function FrameElement(){}function FootageElement(A,Q,E){this.initFrame(),this.initRenderable(),this.assetData=Q.getAssetData(A.refId),this.footageData=Q.imageLoader.getAsset(this.assetData),this.initBaseData(A,Q,E)}function AudioElement(A,Q,E){this.initFrame(),this.initRenderable(),this.assetData=Q.getAssetData(A.refId),this.initBaseData(A,Q,E),this._isPlaying=!1,this._canPlay=!1;var B=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(B),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,Q.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,A.au&&A.au.lv?A.au.lv:{k:[100]},1,0.01,this)}function BaseRenderer(){}function TransformElement(){}function MaskElement(A,Q,E){this.data=A,this.element=Q,this.globalData=E,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var B=this.globalData.defs,I,C=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(C),this.solidPath="";var K,J=this.masksProperties,U=0,Y=[],H,R,O=createElementID(),N,$,L,W,Z="clipPath",G="clip-path";for(I=0;I<C;I+=1){if(J[I].mode!=="a"&&J[I].mode!=="n"||J[I].inv||J[I].o.k!==100||J[I].o.x)Z="mask",G="mask";if((J[I].mode==="s"||J[I].mode==="i")&&U===0)N=createNS("rect"),N.setAttribute("fill","#ffffff"),N.setAttribute("width",this.element.comp.data.w||0),N.setAttribute("height",this.element.comp.data.h||0),Y.push(N);else N=null;if(K=createNS("path"),J[I].mode==="n")this.viewData[I]={op:PropertyFactory.getProp(this.element,J[I].o,0,0.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,J[I],3),elem:K,lastPath:""},B.appendChild(K);else{U+=1,K.setAttribute("fill",J[I].mode==="s"?"#000000":"#ffffff"),K.setAttribute("clip-rule","nonzero");var X;if(J[I].x.k!==0)Z="mask",G="mask",W=PropertyFactory.getProp(this.element,J[I].x,0,null,this.element),X=createElementID(),$=createNS("filter"),$.setAttribute("id",X),L=createNS("feMorphology"),L.setAttribute("operator","erode"),L.setAttribute("in","SourceGraphic"),L.setAttribute("radius","0"),$.appendChild(L),B.appendChild($),K.setAttribute("stroke",J[I].mode==="s"?"#000000":"#ffffff");else L=null,W=null;if(this.storedData[I]={elem:K,x:W,expan:L,lastPath:"",lastOperator:"",filterId:X,lastRadius:0},J[I].mode==="i"){R=Y.length;var q=createNS("g");for(H=0;H<R;H+=1)q.appendChild(Y[H]);var M=createNS("mask");M.setAttribute("mask-type","alpha"),M.setAttribute("id",O+"_"+U),M.appendChild(K),B.appendChild(M),q.setAttribute("mask","url("+getLocationHref()+"#"+O+"_"+U+")"),Y.length=0,Y.push(q)}else Y.push(K);if(J[I].inv&&!this.solidPath)this.solidPath=this.createLayerSolidPath();if(this.viewData[I]={elem:K,lastPath:"",op:PropertyFactory.getProp(this.element,J[I].o,0,0.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,J[I],3),invRect:N},!this.viewData[I].prop.k)this.drawPath(J[I],this.viewData[I].prop.v,this.viewData[I])}}this.maskElement=createNS(Z),C=Y.length;for(I=0;I<C;I+=1)this.maskElement.appendChild(Y[I]);if(U>0)this.maskElement.setAttribute("id",O),this.element.maskedElement.setAttribute(G,"url("+getLocationHref()+"#"+O+")"),B.appendChild(this.maskElement);if(this.viewData.length)this.element.addRenderableComponent(this)}function SVGEffects(A){var Q,E="SourceGraphic",B=A.data.ef?A.data.ef.length:0,I=createElementID(),C=filtersFactory.createFilter(I,!0),K=0;this.filters=[];var J;for(Q=0;Q<B;Q+=1){J=null;var U=A.data.ef[Q].ty;if(registeredEffects[U]){var Y=registeredEffects[U].effect;if(J=new Y(C,A.effectsManager.effectElements[Q],A,idPrefix+K,E),E=idPrefix+K,registeredEffects[U].countsAsEffect)K+=1}if(J)this.filters.push(J)}if(K)A.globalData.defs.appendChild(C),A.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+I+")");if(this.filters.length)A.addRenderableComponent(this)}function registerEffect(A,Q,E){registeredEffects[A]={effect:Q,countsAsEffect:E}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(A,Q,E){this.assetData=Q.getAssetData(A.refId),this.initElement(A,Q,E),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(A,Q){this.elem=A,this.pos=Q}function IShapeElement(){}function SVGShapeData(A,Q,E){this.caches=[],this.styles=[],this.transformers=A,this.lStr="",this.sh=E,this.lvl=Q,this._isAnimated=!!E.k;var B=0,I=A.length;while(B<I){if(A[B].mProps.dynamicProperties.length){this._isAnimated=!0;break}B+=1}}function SVGStyleData(A,Q){this.data=A,this.type=A.ty,this.d="",this.lvl=Q,this._mdf=!1,this.closed=A.hd===!0,this.pElem=createNS("path"),this.msElem=null}function DashProperty(A,Q,E,B){this.elem=A,this.frameId=-1,this.dataProps=createSizedArray(Q.length),this.renderer=E,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",Q.length?Q.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(B);var I,C=Q.length||0,K;for(I=0;I<C;I+=1)K=PropertyFactory.getProp(A,Q[I].v,0,0,this),this.k=K.k||this.k,this.dataProps[I]={n:Q[I].n,p:K};if(!this.k)this.getValue(!0);this._isAnimated=this.k}function SVGStrokeStyleData(A,Q,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(A,Q.o,0,0.01,this),this.w=PropertyFactory.getProp(A,Q.w,0,null,this),this.d=new DashProperty(A,Q.d||{},"svg",this),this.c=PropertyFactory.getProp(A,Q.c,1,255,this),this.style=E,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(A,Q,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(A,Q.o,0,0.01,this),this.c=PropertyFactory.getProp(A,Q.c,1,255,this),this.style=E}function SVGNoStyleData(A,Q,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.style=E}function GradientProperty(A,Q,E){this.data=Q,this.c=createTypedArray("uint8c",Q.p*4);var B=Q.k.k[0].s?Q.k.k[0].s.length-Q.p*4:Q.k.k.length-Q.p*4;this.o=createTypedArray("float32",B),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=B,this.initDynamicPropertyContainer(E),this.prop=PropertyFactory.getProp(A,Q.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(A,Q,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.initGradientData(A,Q,E)}function SVGGradientStrokeStyleData(A,Q,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(A,Q.w,0,null,this),this.d=new DashProperty(A,Q.d||{},"svg",this),this.initGradientData(A,Q,E),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(A,Q,E){this.transform={mProps:A,op:Q,container:E},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGShapeElement(A,Q,E){this.shapes=[],this.shapesData=A.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(A,Q,E),this.prevViewData=[]}function LetterProps(A,Q,E,B,I,C){this.o=A,this.sw=Q,this.sc=E,this.fc=B,this.m=I,this.p=C,this._mdf={o:!0,sw:!!Q,sc:!!E,fc:!!B,m:!0,p:!0}}function TextProperty(A,Q){if(this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=Q,this.elem=A,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),!this.searchProperty())this.completeTextData(this.currentData)}function TextAnimatorDataProperty(A,Q,E){var B={propType:!1},I=PropertyFactory.getProp,C=Q.a;this.a={r:C.r?I(A,C.r,0,degToRads,E):B,rx:C.rx?I(A,C.rx,0,degToRads,E):B,ry:C.ry?I(A,C.ry,0,degToRads,E):B,sk:C.sk?I(A,C.sk,0,degToRads,E):B,sa:C.sa?I(A,C.sa,0,degToRads,E):B,s:C.s?I(A,C.s,1,0.01,E):B,a:C.a?I(A,C.a,1,0,E):B,o:C.o?I(A,C.o,0,0.01,E):B,p:C.p?I(A,C.p,1,0,E):B,sw:C.sw?I(A,C.sw,0,0,E):B,sc:C.sc?I(A,C.sc,1,0,E):B,fc:C.fc?I(A,C.fc,1,0,E):B,fh:C.fh?I(A,C.fh,0,0,E):B,fs:C.fs?I(A,C.fs,0,0.01,E):B,fb:C.fb?I(A,C.fb,0,0.01,E):B,t:C.t?I(A,C.t,0,0,E):B},this.s=TextSelectorProp.getTextSelectorProp(A,Q.s,E),this.s.t=Q.s.t}function TextAnimatorProperty(A,Q,E){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=A,this._renderType=Q,this._elem=E,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(E)}function ITextElement(){}function SVGTextLottieElement(A,Q,E){this.textSpans=[],this.renderType="svg",this.initElement(A,Q,E)}function ISolidElement(A,Q,E){this.initElement(A,Q,E)}function NullElement(A,Q,E){this.initFrame(),this.initBaseData(A,Q,E),this.initFrame(),this.initTransform(A,Q,E),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(A,Q,E){this.layers=A.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(A,Q,E),this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,Q.frameRate,this):{_placeholder:!0}}function SVGRenderer(A,Q){this.animationItem=A,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var E="";if(Q&&Q.title){var B=createNS("title"),I=createElementID();B.setAttribute("id",I),B.textContent=Q.title,this.svgElement.appendChild(B),E+=I}if(Q&&Q.description){var C=createNS("desc"),K=createElementID();C.setAttribute("id",K),C.textContent=Q.description,this.svgElement.appendChild(C),E+=" "+K}if(E)this.svgElement.setAttribute("aria-labelledby",E);var J=createNS("defs");this.svgElement.appendChild(J);var U=createNS("g");this.svgElement.appendChild(U),this.layerElement=U,this.renderConfig={preserveAspectRatio:Q&&Q.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:Q&&Q.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:Q&&Q.contentVisibility||"visible",progressiveLoad:Q&&Q.progressiveLoad||!1,hideOnTransparent:!(Q&&Q.hideOnTransparent===!1),viewBoxOnly:Q&&Q.viewBoxOnly||!1,viewBoxSize:Q&&Q.viewBoxSize||!1,className:Q&&Q.className||"",id:Q&&Q.id||"",focusable:Q&&Q.focusable,filterSize:{width:Q&&Q.filterSize&&Q.filterSize.width||"100%",height:Q&&Q.filterSize&&Q.filterSize.height||"100%",x:Q&&Q.filterSize&&Q.filterSize.x||"0%",y:Q&&Q.filterSize&&Q.filterSize.y||"0%"},width:Q&&Q.width,height:Q&&Q.height},this.globalData={_mdf:!1,frameNum:-1,defs:J,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var A,Q=15;this.savedOp=createTypedArray("float32",Q);for(A=0;A<Q;A+=1)this.saved[A]=createTypedArray("float32",16);this._length=Q}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVEffects(){}function CVMaskElement(A,Q){this.data=A,this.element=Q,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var E,B=this.masksProperties.length,I=!1;for(E=0;E<B;E+=1){if(this.masksProperties[E].mode!=="n")I=!0;this.viewData[E]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[E],3)}if(this.hasMasks=I,I)this.element.addRenderableComponent(this)}function CVBaseElement(){}function CVShapeData(A,Q,E,B){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var I=4;if(Q.ty==="rc")I=5;else if(Q.ty==="el")I=6;else if(Q.ty==="sr")I=7;this.sh=ShapePropertyFactory.getShapeProp(A,Q,I,A);var C,K=E.length,J;for(C=0;C<K;C+=1)if(!E[C].closed)J={transforms:B.addTransformSequence(E[C].transforms),trNodes:[]},this.styledShapes.push(J),E[C].elements.push(J)}function CVShapeElement(A,Q,E){this.shapes=[],this.shapesData=A.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(A,Q,E)}function CVTextElement(A,Q,E){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(A,Q,E)}function CVImageElement(A,Q,E){this.assetData=Q.getAssetData(A.refId),this.img=Q.imageLoader.getAsset(this.assetData),this.initElement(A,Q,E)}function CVSolidElement(A,Q,E){this.initElement(A,Q,E)}function CanvasRendererBase(A,Q){if(this.animationItem=A,this.renderConfig={clearCanvas:Q&&Q.clearCanvas!==void 0?Q.clearCanvas:!0,context:Q&&Q.context||null,progressiveLoad:Q&&Q.progressiveLoad||!1,preserveAspectRatio:Q&&Q.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:Q&&Q.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:Q&&Q.contentVisibility||"visible",className:Q&&Q.className||"",id:Q&&Q.id||""},this.renderConfig.dpr=Q&&Q.dpr||1,this.animationItem.wrapper)this.renderConfig.dpr=Q&&Q.dpr||window.devicePixelRatio||1;this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function CVCompElement(A,Q,E){this.completeLayers=!1,this.layers=A.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(A,Q,E),this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,Q.frameRate,this):{_placeholder:!0}}function CanvasRenderer(A,Q){if(this.animationItem=A,this.renderConfig={clearCanvas:Q&&Q.clearCanvas!==void 0?Q.clearCanvas:!0,context:Q&&Q.context||null,progressiveLoad:Q&&Q.progressiveLoad||!1,preserveAspectRatio:Q&&Q.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:Q&&Q.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:Q&&Q.contentVisibility||"visible",className:Q&&Q.className||"",id:Q&&Q.id||""},this.renderConfig.dpr=Q&&Q.dpr||1,this.animationItem.wrapper)this.renderConfig.dpr=Q&&Q.dpr||window.devicePixelRatio||1;this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function seedRandom(A,Q){var E=this,B=256,I=6,C=52,K="random",J=Q.pow(B,I),U=Q.pow(2,C),Y=U*2,H=B-1,R;function O(X,q,M){var F=[];q=q===!0?{entropy:!0}:q||{};var D=W(L(q.entropy?[X,G(A)]:X===null?Z():X,3),F),_=new N(F),w=function(){var k=_.g(I),T=J,z=0;while(k<U)k=(k+z)*B,T*=B,z=_.g(1);while(k>=Y)k/=2,T/=2,z>>>=1;return(k+z)/T};return w.int32=function(){return _.g(4)|0},w.quick=function(){return _.g(4)/4294967296},w.double=w,W(G(_.S),A),(q.pass||M||function(k,T,z,j){if(j){if(j.S)$(j,_);k.state=function(){return $(_,{})}}if(z)return Q[K]=k,T;else return k})(w,D,"global"in q?q.global:this==Q,q.state)}Q["seed"+K]=O;function N(X){var q,M=X.length,F=this,D=0,_=F.i=F.j=0,w=F.S=[];if(!M)X=[M++];while(D<B)w[D]=D++;for(D=0;D<B;D++)w[D]=w[_=H&_+X[D%M]+(q=w[D])],w[_]=q;F.g=function(k){var T,z=0,j=F.i,v=F.j,g=F.S;while(k--)T=g[j=H&j+1],z=z*B+g[H&(g[j]=g[v=H&v+T])+(g[v]=T)];return F.i=j,F.j=v,z}}function $(X,q){return q.i=X.i,q.j=X.j,q.S=X.S.slice(),q}function L(X,q){var M=[],F=typeof X,D;if(q&&F=="object")for(D in X)try{M.push(L(X[D],q-1))}catch(_){}return M.length?M:F=="string"?X:X+"\x00"}function W(X,q){var M=X+"",F,D=0;while(D<M.length)q[H&D]=H&(F^=q[H&D]*19)+M.charCodeAt(D++);return G(q)}function Z(){try{if(R)return G(R.randomBytes(B));var X=new Uint8Array(B);return(E.crypto||E.msCrypto).getRandomValues(X),G(X)}catch(F){var q=E.navigator,M=q&&q.plugins;return[+/*@__PURE__*/new Date,E,M,E.screen,G(A)]}}function G(X){return String.fromCharCode.apply(0,X)}W(Q.random(),A)}function initialize$2(A){seedRandom([],A)}function addPropertyDecorator(){function A(O,N,$){if(!this.k||!this.keyframes)return this.pv;O=O?O.toLowerCase():"";var L=this.comp.renderedFrame,W=this.keyframes,Z=W[W.length-1].t;if(L<=Z)return this.pv;var G,X;if(!$){if(!N||N>W.length-1)N=W.length-1;X=W[W.length-1-N].t,G=Z-X}else{if(!N)G=Math.max(0,Z-this.elem.data.ip);else G=Math.abs(Z-this.elem.comp.globalData.frameRate*N);X=Z-G}var q,M,F;if(O==="pingpong"){var D=Math.floor((L-X)/G);if(D%2!==0)return this.getValueAtTime((G-(L-X)%G+X)/this.comp.globalData.frameRate,0)}else if(O==="offset"){var _=this.getValueAtTime(X/this.comp.globalData.frameRate,0),w=this.getValueAtTime(Z/this.comp.globalData.frameRate,0),k=this.getValueAtTime(((L-X)%G+X)/this.comp.globalData.frameRate,0),T=Math.floor((L-X)/G);if(this.pv.length){F=new Array(_.length),M=F.length;for(q=0;q<M;q+=1)F[q]=(w[q]-_[q])*T+k[q];return F}return(w-_)*T+k}else if(O==="continue"){var z=this.getValueAtTime(Z/this.comp.globalData.frameRate,0),j=this.getValueAtTime((Z-0.001)/this.comp.globalData.frameRate,0);if(this.pv.length){F=new Array(z.length),M=F.length;for(q=0;q<M;q+=1)F[q]=z[q]+(z[q]-j[q])*((L-Z)/this.comp.globalData.frameRate)/0.0005;return F}return z+(z-j)*((L-Z)/0.001)}return this.getValueAtTime(((L-X)%G+X)/this.comp.globalData.frameRate,0)}function Q(O,N,$){if(!this.k)return this.pv;O=O?O.toLowerCase():"";var L=this.comp.renderedFrame,W=this.keyframes,Z=W[0].t;if(L>=Z)return this.pv;var G,X;if(!$){if(!N||N>W.length-1)N=W.length-1;X=W[N].t,G=X-Z}else{if(!N)G=Math.max(0,this.elem.data.op-Z);else G=Math.abs(this.elem.comp.globalData.frameRate*N);X=Z+G}var q,M,F;if(O==="pingpong"){var D=Math.floor((Z-L)/G);if(D%2===0)return this.getValueAtTime(((Z-L)%G+Z)/this.comp.globalData.frameRate,0)}else if(O==="offset"){var _=this.getValueAtTime(Z/this.comp.globalData.frameRate,0),w=this.getValueAtTime(X/this.comp.globalData.frameRate,0),k=this.getValueAtTime((G-(Z-L)%G+Z)/this.comp.globalData.frameRate,0),T=Math.floor((Z-L)/G)+1;if(this.pv.length){F=new Array(_.length),M=F.length;for(q=0;q<M;q+=1)F[q]=k[q]-(w[q]-_[q])*T;return F}return k-(w-_)*T}else if(O==="continue"){var z=this.getValueAtTime(Z/this.comp.globalData.frameRate,0),j=this.getValueAtTime((Z+0.001)/this.comp.globalData.frameRate,0);if(this.pv.length){F=new Array(z.length),M=F.length;for(q=0;q<M;q+=1)F[q]=z[q]+(z[q]-j[q])*(Z-L)/0.001;return F}return z+(z-j)*(Z-L)/0.001}return this.getValueAtTime((G-((Z-L)%G+Z))/this.comp.globalData.frameRate,0)}function E(O,N){if(!this.k)return this.pv;if(O=(O||0.4)*0.5,N=Math.floor(N||5),N<=1)return this.pv;var $=this.comp.renderedFrame/this.comp.globalData.frameRate,L=$-O,W=$+O,Z=N>1?(W-L)/(N-1):1,G=0,X=0,q;if(this.pv.length)q=createTypedArray("float32",this.pv.length);else q=0;var M;while(G<N){if(M=this.getValueAtTime(L+G*Z),this.pv.length)for(X=0;X<this.pv.length;X+=1)q[X]+=M[X];else q+=M;G+=1}if(this.pv.length)for(X=0;X<this.pv.length;X+=1)q[X]/=N;else q/=N;return q}function B(O){if(!this._transformCachingAtTime)this._transformCachingAtTime={v:new Matrix};var N=this._transformCachingAtTime.v;if(N.cloneFromProps(this.pre.props),this.appliedTransformations<1){var $=this.a.getValueAtTime(O);N.translate(-$[0]*this.a.mult,-$[1]*this.a.mult,$[2]*this.a.mult)}if(this.appliedTransformations<2){var L=this.s.getValueAtTime(O);N.scale(L[0]*this.s.mult,L[1]*this.s.mult,L[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var W=this.sk.getValueAtTime(O),Z=this.sa.getValueAtTime(O);N.skewFromAxis(-W*this.sk.mult,Z*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var G=this.r.getValueAtTime(O);N.rotate(-G*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var X=this.rz.getValueAtTime(O),q=this.ry.getValueAtTime(O),M=this.rx.getValueAtTime(O),F=this.or.getValueAtTime(O);N.rotateZ(-X*this.rz.mult).rotateY(q*this.ry.mult).rotateX(M*this.rx.mult).rotateZ(-F[2]*this.or.mult).rotateY(F[1]*this.or.mult).rotateX(F[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var D=this.px.getValueAtTime(O),_=this.py.getValueAtTime(O);if(this.data.p.z){var w=this.pz.getValueAtTime(O);N.translate(D*this.px.mult,_*this.py.mult,-w*this.pz.mult)}else N.translate(D*this.px.mult,_*this.py.mult,0)}else{var k=this.p.getValueAtTime(O);N.translate(k[0]*this.p.mult,k[1]*this.p.mult,-k[2]*this.p.mult)}return N}function I(){return this.v.clone(new Matrix)}var C=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(O,N,$){var L=C(O,N,$);if(L.dynamicProperties.length)L.getValueAtTime=B.bind(L);else L.getValueAtTime=I.bind(L);return L.setGroupProperty=expressionHelpers.setGroupProperty,L};var K=PropertyFactory.getProp;PropertyFactory.getProp=function(O,N,$,L,W){var Z=K(O,N,$,L,W);if(Z.kf)Z.getValueAtTime=expressionHelpers.getValueAtTime.bind(Z);else Z.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Z);Z.setGroupProperty=expressionHelpers.setGroupProperty,Z.loopOut=A,Z.loopIn=Q,Z.smooth=E,Z.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Z),Z.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Z),Z.numKeys=N.a===1?N.k.length:0,Z.propertyIndex=N.ix;var G=0;if($!==0)G=createTypedArray("float32",N.a===1?N.k[0].s.length:N.k.length);if(Z._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:G},expressionHelpers.searchExpressions(O,N,Z),Z.k)W.addDynamicProperty(Z);return Z};function J(O){if(!this._cachingAtTime)this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame};if(O*=this.elem.globalData.frameRate,O-=this.offsetTime,O!==this._cachingAtTime.lastTime)this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<O?this._caching.lastIndex:0,this._cachingAtTime.lastTime=O,this.interpolateShape(O,this._cachingAtTime.shapeValue,this._cachingAtTime);return this._cachingAtTime.shapeValue}var U=ShapePropertyFactory.getConstructorFunction(),Y=ShapePropertyFactory.getKeyframedConstructorFunction();function H(){}H.prototype={vertices:function(O,N){if(this.k)this.getValue();var $=this.v;if(N!==void 0)$=this.getValueAtTime(N,0);var L,W=$._length,Z=$[O],G=$.v,X=createSizedArray(W);for(L=0;L<W;L+=1)if(O==="i"||O==="o")X[L]=[Z[L][0]-G[L][0],Z[L][1]-G[L][1]];else X[L]=[Z[L][0],Z[L][1]];return X},points:function(O){return this.vertices("v",O)},inTangents:function(O){return this.vertices("i",O)},outTangents:function(O){return this.vertices("o",O)},isClosed:function(){return this.v.c},pointOnPath:function(O,N){var $=this.v;if(N!==void 0)$=this.getValueAtTime(N,0);if(!this._segmentsLength)this._segmentsLength=bez.getSegmentsLength($);var L=this._segmentsLength,W=L.lengths,Z=L.totalLength*O,G=0,X=W.length,q=0,M;while(G<X){if(q+W[G].addedLength>Z){var F=G,D=$.c&&G===X-1?0:G+1,_=(Z-q)/W[G].addedLength;M=bez.getPointInSegment($.v[F],$.v[D],$.o[F],$.i[D],_,W[G]);break}else q+=W[G].addedLength;G+=1}if(!M)M=$.c?[$.v[0][0],$.v[0][1]]:[$.v[$._length-1][0],$.v[$._length-1][1]];return M},vectorOnPath:function(O,N,$){if(O==1)O=this.v.c;else if(O==0)O=0.999;var L=this.pointOnPath(O,N),W=this.pointOnPath(O+0.001,N),Z=W[0]-L[0],G=W[1]-L[1],X=Math.sqrt(Math.pow(Z,2)+Math.pow(G,2));if(X===0)return[0,0];var q=$==="tangent"?[Z/X,G/X]:[-G/X,Z/X];return q},tangentOnPath:function(O,N){return this.vectorOnPath(O,N,"tangent")},normalOnPath:function(O,N){return this.vectorOnPath(O,N,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([H],U),extendPrototype([H],Y),Y.prototype.getValueAtTime=J,Y.prototype.initiateExpression=ExpressionManager.initiateExpression;var R=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(O,N,$,L,W){var Z=R(O,N,$,L,W);if(Z.propertyIndex=N.ix,Z.lock=!1,$===3)expressionHelpers.searchExpressions(O,N.pt,Z);else if($===4)expressionHelpers.searchExpressions(O,N.ks,Z);if(Z.k)O.addDynamicProperty(Z);return Z}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function A(){if(this.data.d.x)return this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0;return null}TextProperty.prototype.getExpressionValue=function(Q,E){var B=this.calculateExpression(E);if(Q.t!==B){var I={};return this.copyData(I,Q),I.t=B.toString(),I.__complete=!1,I}return Q},TextProperty.prototype.searchProperty=function(){var Q=this.searchKeyframes(),E=this.searchExpressions();return this.kf=Q||E,this.kf},TextProperty.prototype.searchExpressions=A}function initialize(){addDecorator()}let svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=(A)=>{_useWebWorker=!!A},getWebWorker=()=>_useWebWorker,setLocationHref=(A)=>{locationHref=A},getLocationHref=()=>locationHref,audioControllerFactory=function(){function A(Q){this.audios=[],this.audioFactory=Q,this._volume=1,this._isMuted=!1}return A.prototype={addAudio:function(Q){this.audios.push(Q)},pause:function(){var Q,E=this.audios.length;for(Q=0;Q<E;Q+=1)this.audios[Q].pause()},resume:function(){var Q,E=this.audios.length;for(Q=0;Q<E;Q+=1)this.audios[Q].resume()},setRate:function(Q){var E,B=this.audios.length;for(E=0;E<B;E+=1)this.audios[E].setRate(Q)},createAudio:function(Q){if(this.audioFactory)return this.audioFactory(Q);if(window.Howl)return new window.Howl({src:[Q]});return{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(Q){this.audioFactory=Q},setVolume:function(Q){this._volume=Q,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var Q,E=this.audios.length;for(Q=0;Q<E;Q+=1)this.audios[Q].volume(this._volume*(this._isMuted?0:1))}},function(){return new A}}(),createTypedArray=function(){function A(E,B){var I=0,C=[],K;switch(E){case"int16":case"uint8c":K=1;break;default:K=1.1;break}for(I=0;I<B;I+=1)C.push(K);return C}function Q(E,B){if(E==="float32")return new Float32Array(B);if(E==="int16")return new Int16Array(B);if(E==="uint8c")return new Uint8ClampedArray(B);return A(E,B)}if(typeof Uint8ClampedArray==="function"&&typeof Float32Array==="function")return Q;return A}(),subframeEnabled=!0,expressionsPlugin=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var A=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],Q,E=A.length;for(Q=0;Q<E;Q+=1)BMMath[A[Q]]=Math[A[Q]]})(),BMMath.random=Math.random,BMMath.abs=function(A){var Q=typeof A;if(Q==="object"&&A.length){var E=createSizedArray(A.length),B,I=A.length;for(B=0;B<I;B+=1)E[B]=Math.abs(A[B]);return E}return Math.abs(A)};let defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=0.5519,createElementID=function(){var A=0;return function Q(){return A+=1,idPrefix$1+"__lottie_element_"+A}}(),rgbToHex=function(){var A=[],Q,E;for(Q=0;Q<256;Q+=1)E=Q.toString(16),A[Q]=E.length===1?"0"+E:E;return function(B,I,C){if(B<0)B=0;if(I<0)I=0;if(C<0)C=0;return"#"+A[B]+A[I]+A[C]}}(),setSubframeEnabled=(A)=>{subframeEnabled=!!A},getSubframeEnabled=()=>subframeEnabled,setExpressionsPlugin=(A)=>{expressionsPlugin=A},getExpressionsPlugin=()=>expressionsPlugin,setDefaultCurveSegments=(A)=>{defaultCurveSegments=A},getDefaultCurveSegments=()=>defaultCurveSegments,setIdPrefix=(A)=>{idPrefix$1=A},getIdPrefix=()=>idPrefix$1,dataManager=function(){var A=1,Q=[],E,B,I={onmessage:function(){},postMessage:function(O){E({data:O})}},C={postMessage:function(O){I.onmessage({data:O})}};function K(O){if(window.Worker&&window.Blob&&getWebWorker()){var N=new Blob(["var _workerSelf = self; self.onmessage = ",O.toString()],{type:"text/javascript"}),$=URL.createObjectURL(N);return new Worker($)}return E=O,I}function J(){if(!B)B=K(function O(N){function $(){function W(g,P){var V,S,h=g.length,x,b,m,s;for(S=0;S<h;S+=1)if(V=g[S],"ks"in V&&!V.completed){if(V.completed=!0,V.tt)g[S-1].td=V.tt;if(V.hasMask){var i=V.masksProperties;b=i.length;for(x=0;x<b;x+=1)if(i[x].pt.k.i)M(i[x].pt.k);else{s=i[x].pt.k.length;for(m=0;m<s;m+=1){if(i[x].pt.k[m].s)M(i[x].pt.k[m].s[0]);if(i[x].pt.k[m].e)M(i[x].pt.k[m].e[0])}}}if(V.ty===0)V.layers=X(V.refId,P),W(V.layers,P);else if(V.ty===4)q(V.shapes);else if(V.ty===5)j(V)}}function Z(g,P){if(g){var V=0,S=g.length;for(V=0;V<S;V+=1)if(g[V].t===1)g[V].data.layers=X(g[V].data.refId,P),W(g[V].data.layers,P)}}function G(g,P){var V=0,S=P.length;while(V<S){if(P[V].id===g)return P[V];V+=1}return null}function X(g,P){var V=G(g,P);if(V){if(!V.layers.__used)return V.layers.__used=!0,V.layers;return JSON.parse(JSON.stringify(V.layers))}return null}function q(g){var P,V=g.length,S,h;for(P=V-1;P>=0;P-=1)if(g[P].ty==="sh")if(g[P].ks.k.i)M(g[P].ks.k);else{h=g[P].ks.k.length;for(S=0;S<h;S+=1){if(g[P].ks.k[S].s)M(g[P].ks.k[S].s[0]);if(g[P].ks.k[S].e)M(g[P].ks.k[S].e[0])}}else if(g[P].ty==="gr")q(g[P].it)}function M(g){var P,V=g.i.length;for(P=0;P<V;P+=1)g.i[P][0]+=g.v[P][0],g.i[P][1]+=g.v[P][1],g.o[P][0]+=g.v[P][0],g.o[P][1]+=g.v[P][1]}function F(g,P){var V=P?P.split("."):[100,100,100];if(g[0]>V[0])return!0;if(V[0]>g[0])return!1;if(g[1]>V[1])return!0;if(V[1]>g[1])return!1;if(g[2]>V[2])return!0;if(V[2]>g[2])return!1;return null}var D=function(){var g=[4,4,14];function P(S){var h=S.t.d;S.t.d={k:[{s:h,t:0}]}}function V(S){var h,x=S.length;for(h=0;h<x;h+=1)if(S[h].ty===5)P(S[h])}return function(S){if(F(g,S.v)){if(V(S.layers),S.assets){var h,x=S.assets.length;for(h=0;h<x;h+=1)if(S.assets[h].layers)V(S.assets[h].layers)}}}}(),_=function(){var g=[4,7,99];return function(P){if(P.chars&&!F(g,P.v)){var V,S=P.chars.length;for(V=0;V<S;V+=1){var h=P.chars[V];if(h.data&&h.data.shapes){if(q(h.data.shapes),h.data.ip=0,h.data.op=99999,h.data.st=0,h.data.sr=1,h.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},!P.chars[V].t)h.data.shapes.push({ty:"no"}),h.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})}}}}}(),w=function(){var g=[5,7,15];function P(S){var h=S.t.p;if(typeof h.a==="number")h.a={a:0,k:h.a};if(typeof h.p==="number")h.p={a:0,k:h.p};if(typeof h.r==="number")h.r={a:0,k:h.r}}function V(S){var h,x=S.length;for(h=0;h<x;h+=1)if(S[h].ty===5)P(S[h])}return function(S){if(F(g,S.v)){if(V(S.layers),S.assets){var h,x=S.assets.length;for(h=0;h<x;h+=1)if(S.assets[h].layers)V(S.assets[h].layers)}}}}(),k=function(){var g=[4,1,9];function P(S){var h,x=S.length,b,m;for(h=0;h<x;h+=1)if(S[h].ty==="gr")P(S[h].it);else if(S[h].ty==="fl"||S[h].ty==="st")if(S[h].c.k&&S[h].c.k[0].i){m=S[h].c.k.length;for(b=0;b<m;b+=1){if(S[h].c.k[b].s)S[h].c.k[b].s[0]/=255,S[h].c.k[b].s[1]/=255,S[h].c.k[b].s[2]/=255,S[h].c.k[b].s[3]/=255;if(S[h].c.k[b].e)S[h].c.k[b].e[0]/=255,S[h].c.k[b].e[1]/=255,S[h].c.k[b].e[2]/=255,S[h].c.k[b].e[3]/=255}}else S[h].c.k[0]/=255,S[h].c.k[1]/=255,S[h].c.k[2]/=255,S[h].c.k[3]/=255}function V(S){var h,x=S.length;for(h=0;h<x;h+=1)if(S[h].ty===4)P(S[h].shapes)}return function(S){if(F(g,S.v)){if(V(S.layers),S.assets){var h,x=S.assets.length;for(h=0;h<x;h+=1)if(S.assets[h].layers)V(S.assets[h].layers)}}}}(),T=function(){var g=[4,4,18];function P(S){var h,x=S.length,b,m;for(h=x-1;h>=0;h-=1)if(S[h].ty==="sh")if(S[h].ks.k.i)S[h].ks.k.c=S[h].closed;else{m=S[h].ks.k.length;for(b=0;b<m;b+=1){if(S[h].ks.k[b].s)S[h].ks.k[b].s[0].c=S[h].closed;if(S[h].ks.k[b].e)S[h].ks.k[b].e[0].c=S[h].closed}}else if(S[h].ty==="gr")P(S[h].it)}function V(S){var h,x,b=S.length,m,s,i,n;for(x=0;x<b;x+=1){if(h=S[x],h.hasMask){var l=h.masksProperties;s=l.length;for(m=0;m<s;m+=1)if(l[m].pt.k.i)l[m].pt.k.c=l[m].cl;else{n=l[m].pt.k.length;for(i=0;i<n;i+=1){if(l[m].pt.k[i].s)l[m].pt.k[i].s[0].c=l[m].cl;if(l[m].pt.k[i].e)l[m].pt.k[i].e[0].c=l[m].cl}}}if(h.ty===4)P(h.shapes)}}return function(S){if(F(g,S.v)){if(V(S.layers),S.assets){var h,x=S.assets.length;for(h=0;h<x;h+=1)if(S.assets[h].layers)V(S.assets[h].layers)}}}}();function z(g){if(g.__complete)return;k(g),D(g),_(g),w(g),T(g),W(g.layers,g.assets),Z(g.chars,g.assets),g.__complete=!0}function j(g){if(g.t.a.length===0&&!("m"in g.t.p));}var v={};return v.completeData=z,v.checkColors=k,v.checkChars=_,v.checkPathProperties=w,v.checkShapes=T,v.completeLayers=W,v}if(!C.dataManager)C.dataManager=$();if(!C.assetLoader)C.assetLoader=function(){function W(G){var X=G.getResponseHeader("content-type");if(X&&G.responseType==="json"&&X.indexOf("json")!==-1)return G.response;if(G.response&&typeof G.response==="object")return G.response;if(G.response&&typeof G.response==="string")return JSON.parse(G.response);if(G.responseText)return JSON.parse(G.responseText);return null}function Z(G,X,q,M){var F,D=new XMLHttpRequest;try{D.responseType="json"}catch(_){}D.onreadystatechange=function(){if(D.readyState===4)if(D.status===200)F=W(D),q(F);else try{F=W(D),q(F)}catch(_){if(M)M(_)}};try{D.open("GET",G,!0)}catch(_){D.open("GET",X+"/"+G,!0)}D.send()}return{load:Z}}();if(N.data.type==="loadAnimation")C.assetLoader.load(N.data.path,N.data.fullPath,function(W){C.dataManager.completeData(W),C.postMessage({id:N.data.id,payload:W,status:"success"})},function(){C.postMessage({id:N.data.id,status:"error"})});else if(N.data.type==="complete"){var L=N.data.animation;C.dataManager.completeData(L),C.postMessage({id:N.data.id,payload:L,status:"success"})}else if(N.data.type==="loadData")C.assetLoader.load(N.data.path,N.data.fullPath,function(W){C.postMessage({id:N.data.id,payload:W,status:"success"})},function(){C.postMessage({id:N.data.id,status:"error"})})}),B.onmessage=function(O){var N=O.data,$=N.id,L=Q[$];if(Q[$]=null,N.status==="success")L.onComplete(N.payload);else if(L.onError)L.onError()}}function U(O,N){A+=1;var $="processId_"+A;return Q[$]={onComplete:O,onError:N},$}function Y(O,N,$){J();var L=U(N,$);B.postMessage({type:"loadAnimation",path:O,fullPath:window.location.origin+window.location.pathname,id:L})}function H(O,N,$){J();var L=U(N,$);B.postMessage({type:"loadData",path:O,fullPath:window.location.origin+window.location.pathname,id:L})}function R(O,N,$){J();var L=U(N,$);B.postMessage({type:"complete",animation:O,id:L})}return{loadAnimation:Y,loadData:H,completeAnimation:R}}(),ImagePreloader=function(){var A=function(){var Z=createTag("canvas");Z.width=1,Z.height=1;var G=Z.getContext("2d");return G.fillStyle="rgba(0,0,0,0)",G.fillRect(0,0,1,1),Z}();function Q(){if(this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages){if(this.imagesLoadedCb)this.imagesLoadedCb(null)}}function E(){if(this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages){if(this.imagesLoadedCb)this.imagesLoadedCb(null)}}function B(Z,G,X){var q="";if(Z.e)q=Z.p;else if(G){var M=Z.p;if(M.indexOf("images/")!==-1)M=M.split("/")[1];q=G+M}else q=X,q+=Z.u?Z.u:"",q+=Z.p;return q}function I(Z){var G=0,X=setInterval(function(){var q=Z.getBBox();if(q.width||G>500)this._imageLoaded(),clearInterval(X);G+=1}.bind(this),50)}function C(Z){var G=B(Z,this.assetsPath,this.path),X=createNS("image");if(isSafari)this.testImageLoaded(X);else X.addEventListener("load",this._imageLoaded,!1);if(X.addEventListener("error",function(){q.img=A,this._imageLoaded()}.bind(this),!1),X.setAttributeNS("http://www.w3.org/1999/xlink","href",G),this._elementHelper.append)this._elementHelper.append(X);else this._elementHelper.appendChild(X);var q={img:X,assetData:Z};return q}function K(Z){var G=B(Z,this.assetsPath,this.path),X=createTag("img");X.crossOrigin="anonymous",X.addEventListener("load",this._imageLoaded,!1),X.addEventListener("error",function(){q.img=A,this._imageLoaded()}.bind(this),!1),X.src=G;var q={img:X,assetData:Z};return q}function J(Z){var G={assetData:Z},X=B(Z,this.assetsPath,this.path);return dataManager.loadData(X,function(q){G.img=q,this._footageLoaded()}.bind(this),function(){G.img={},this._footageLoaded()}.bind(this)),G}function U(Z,G){this.imagesLoadedCb=G;var X,q=Z.length;for(X=0;X<q;X+=1)if(!Z[X].layers){if(!Z[X].t||Z[X].t==="seq")this.totalImages+=1,this.images.push(this._createImageData(Z[X]));else if(Z[X].t===3)this.totalFootages+=1,this.images.push(this.createFootageData(Z[X]))}}function Y(Z){this.path=Z||""}function H(Z){this.assetsPath=Z||""}function R(Z){var G=0,X=this.images.length;while(G<X){if(this.images[G].assetData===Z)return this.images[G].img;G+=1}return null}function O(){this.imagesLoadedCb=null,this.images.length=0}function N(){return this.totalImages===this.loadedAssets}function $(){return this.totalFootages===this.loadedFootagesCount}function L(Z,G){if(Z==="svg")this._elementHelper=G,this._createImageData=this.createImageData.bind(this);else this._createImageData=this.createImgData.bind(this)}function W(){this._imageLoaded=Q.bind(this),this._footageLoaded=E.bind(this),this.testImageLoaded=I.bind(this),this.createFootageData=J.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return W.prototype={loadAssets:U,setAssetsPath:H,setPath:Y,loadedImages:N,loadedFootages:$,destroy:O,getAsset:R,createImgData:K,createImageData:C,imageLoaded:Q,footageLoaded:E,setCacheType:L},W}();BaseEvent.prototype={triggerEvent:function(A,Q){if(this._cbs[A]){var E=this._cbs[A];for(var B=0;B<E.length;B+=1)E[B](Q)}},addEventListener:function(A,Q){if(!this._cbs[A])this._cbs[A]=[];return this._cbs[A].push(Q),function(){this.removeEventListener(A,Q)}.bind(this)},removeEventListener:function(A,Q){if(!Q)this._cbs[A]=null;else if(this._cbs[A]){var E=0,B=this._cbs[A].length;while(E<B){if(this._cbs[A][E]===Q)this._cbs[A].splice(E,1),E-=1,B-=1;E+=1}if(!this._cbs[A].length)this._cbs[A]=null}}};let markerParser=function(){function A(Q){var E=Q.split(`\r
`),B={},I,C=0;for(var K=0;K<E.length;K+=1)if(I=E[K].split(":"),I.length===2)B[I[0]]=I[1].trim(),C+=1;if(C===0)throw new Error;return B}return function(Q){var E=[];for(var B=0;B<Q.length;B+=1){var I=Q[B],C={time:I.tm,duration:I.dr};try{C.payload=JSON.parse(Q[B].cm)}catch(K){try{C.payload=A(Q[B].cm)}catch(J){C.payload={name:Q[B].cm}}}E.push(C)}return E}}(),ProjectInterface=function(){function A(Q){this.compositions.push(Q)}return function(){function Q(E){var B=0,I=this.compositions.length;while(B<I){if(this.compositions[B].data&&this.compositions[B].data.nm===E){if(this.compositions[B].prepareFrame&&this.compositions[B].data.xt)this.compositions[B].prepareFrame(this.currentFrame);return this.compositions[B].compInterface}B+=1}return null}return Q.compositions=[],Q.currentFrame=0,Q.registerComposition=A,Q}}(),renderers={},registerRenderer=(A,Q)=>{renderers[A]=Q},AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(A){if(A.wrapper||A.container)this.wrapper=A.wrapper||A.container;var Q="svg";if(A.animType)Q=A.animType;else if(A.renderer)Q=A.renderer;let E=getRenderer(Q);if(this.renderer=new E(this,A.rendererSettings),this.imagePreloader.setCacheType(Q,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=Q,A.loop===""||A.loop===null||A.loop===void 0||A.loop===!0)this.loop=!0;else if(A.loop===!1)this.loop=!1;else this.loop=parseInt(A.loop,10);if(this.autoplay="autoplay"in A?A.autoplay:!0,this.name=A.name?A.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(A,"autoloadSegments")?A.autoloadSegments:!0,this.assetsPath=A.assetsPath,this.initialSegment=A.initialSegment,A.audioFactory)this.audioController.setAudioFactory(A.audioFactory);if(A.animationData)this.setupAnimation(A.animationData);else if(A.path){if(A.path.lastIndexOf("\\")!==-1)this.path=A.path.substr(0,A.path.lastIndexOf("\\")+1);else this.path=A.path.substr(0,A.path.lastIndexOf("/")+1);this.fileName=A.path.substr(A.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(A.path,this.configAnimation,this.onSetupError)}},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(A){dataManager.completeAnimation(A,this.configAnimation)},AnimationItem.prototype.setData=function(A,Q){if(Q){if(typeof Q!=="object")Q=JSON.parse(Q)}var E={wrapper:A,animationData:Q},B=A.attributes;E.path=B.getNamedItem("data-animation-path")?B.getNamedItem("data-animation-path").value:B.getNamedItem("data-bm-path")?B.getNamedItem("data-bm-path").value:B.getNamedItem("bm-path")?B.getNamedItem("bm-path").value:"",E.animType=B.getNamedItem("data-anim-type")?B.getNamedItem("data-anim-type").value:B.getNamedItem("data-bm-type")?B.getNamedItem("data-bm-type").value:B.getNamedItem("bm-type")?B.getNamedItem("bm-type").value:B.getNamedItem("data-bm-renderer")?B.getNamedItem("data-bm-renderer").value:B.getNamedItem("bm-renderer")?B.getNamedItem("bm-renderer").value:"canvas";var I=B.getNamedItem("data-anim-loop")?B.getNamedItem("data-anim-loop").value:B.getNamedItem("data-bm-loop")?B.getNamedItem("data-bm-loop").value:B.getNamedItem("bm-loop")?B.getNamedItem("bm-loop").value:"";if(I==="false")E.loop=!1;else if(I==="true")E.loop=!0;else if(I!=="")E.loop=parseInt(I,10);var C=B.getNamedItem("data-anim-autoplay")?B.getNamedItem("data-anim-autoplay").value:B.getNamedItem("data-bm-autoplay")?B.getNamedItem("data-bm-autoplay").value:B.getNamedItem("bm-autoplay")?B.getNamedItem("bm-autoplay").value:!0;E.autoplay=C!=="false",E.name=B.getNamedItem("data-name")?B.getNamedItem("data-name").value:B.getNamedItem("data-bm-name")?B.getNamedItem("data-bm-name").value:B.getNamedItem("bm-name")?B.getNamedItem("bm-name").value:"";var K=B.getNamedItem("data-anim-prerender")?B.getNamedItem("data-anim-prerender").value:B.getNamedItem("data-bm-prerender")?B.getNamedItem("data-bm-prerender").value:B.getNamedItem("bm-prerender")?B.getNamedItem("bm-prerender").value:"";if(K==="false")E.prerender=!1;this.setParams(E)},AnimationItem.prototype.includeLayers=function(A){if(A.op>this.animationData.op)this.animationData.op=A.op,this.totalFrames=Math.floor(A.op-this.animationData.ip);var Q=this.animationData.layers,E,B=Q.length,I=A.layers,C,K=I.length;for(C=0;C<K;C+=1){E=0;while(E<B){if(Q[E].id===I[C].id){Q[E]=I[C];break}E+=1}}if(A.chars||A.fonts)this.renderer.globalData.fontManager.addChars(A.chars),this.renderer.globalData.fontManager.addFonts(A.fonts,this.renderer.globalData.defs);if(A.assets){B=A.assets.length;for(E=0;E<B;E+=1)this.animationData.assets.push(A.assets[E])}this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(A){this.animationData=A;var Q=getExpressionsPlugin();if(Q)Q.initExpressions(this);this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var A=this.animationData.segments;if(!A||A.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var Q=A.shift();this.timeCompleted=Q.time*this.frameRate;var E=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(E,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var A=this.animationData.segments;if(!A)this.timeCompleted=this.totalFrames;this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(A){if(!this.renderer)return;try{if(this.animationData=A,this.initialSegment)this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0]);else this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip);if(this.renderer.configAnimation(A),!A.assets)A.assets=[];if(this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1000,this.renderer.searchExtraCompositions(A.assets),this.markers=markerParser(A.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused)this.audioController.pause()}catch(Q){this.triggerConfigError(Q)}},AnimationItem.prototype.waitForFontsLoaded=function(){if(!this.renderer)return;if(this.renderer.globalData.fontManager.isLoaded)this.checkLoaded();else setTimeout(this.waitForFontsLoaded.bind(this),20)},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var A=getExpressionsPlugin();if(A)A.initExpressions(this);if(this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay)this.play()}},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(A){this.isSubframeEnabled=!!A},AnimationItem.prototype.gotoFrame=function(){if(this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted)this.currentFrame=this.timeCompleted;this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(this.isLoaded===!1||!this.renderer)return;try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(A){this.triggerRenderFrameError(A)}},AnimationItem.prototype.play=function(A){if(A&&this.name!==A)return;if(this.isPaused===!0){if(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle)this._idle=!1,this.trigger("_active")}},AnimationItem.prototype.pause=function(A){if(A&&this.name!==A)return;if(this.isPaused===!1)this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause()},AnimationItem.prototype.togglePause=function(A){if(A&&this.name!==A)return;if(this.isPaused===!0)this.play();else this.pause()},AnimationItem.prototype.stop=function(A){if(A&&this.name!==A)return;this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0)},AnimationItem.prototype.getMarkerData=function(A){var Q;for(var E=0;E<this.markers.length;E+=1)if(Q=this.markers[E],Q.payload&&Q.payload.name===A)return Q;return null},AnimationItem.prototype.goToAndStop=function(A,Q,E){if(E&&this.name!==E)return;var B=Number(A);if(isNaN(B)){var I=this.getMarkerData(A);if(I)this.goToAndStop(I.time,!0)}else if(Q)this.setCurrentRawFrameValue(A);else this.setCurrentRawFrameValue(A*this.frameModifier);this.pause()},AnimationItem.prototype.goToAndPlay=function(A,Q,E){if(E&&this.name!==E)return;var B=Number(A);if(isNaN(B)){var I=this.getMarkerData(A);if(I)if(!I.duration)this.goToAndStop(I.time,!0);else this.playSegments([I.time,I.time+I.duration],!0)}else this.goToAndStop(B,Q,E);this.play()},AnimationItem.prototype.advanceTime=function(A){if(this.isPaused===!0||this.isLoaded===!1)return;var Q=this.currentRawFrame+A*this.frameModifier,E=!1;if(Q>=this.totalFrames-1&&this.frameModifier>0)if(!this.loop||this.playCount===this.loop){if(!this.checkSegments(Q>this.totalFrames?Q%this.totalFrames:0))E=!0,Q=this.totalFrames-1}else if(Q>=this.totalFrames){if(this.playCount+=1,!this.checkSegments(Q%this.totalFrames))this.setCurrentRawFrameValue(Q%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete")}else this.setCurrentRawFrameValue(Q);else if(Q<0){if(!this.checkSegments(Q%this.totalFrames))if(this.loop&&!(this.playCount--<=0&&this.loop!==!0))if(this.setCurrentRawFrameValue(this.totalFrames+Q%this.totalFrames),!this._completedLoop)this._completedLoop=!0;else this.trigger("loopComplete");else E=!0,Q=0}else this.setCurrentRawFrameValue(Q);if(E)this.setCurrentRawFrameValue(Q),this.pause(),this.trigger("complete")},AnimationItem.prototype.adjustSegment=function(A,Q){if(this.playCount=0,A[1]<A[0]){if(this.frameModifier>0)if(this.playSpeed<0)this.setSpeed(-this.playSpeed);else this.setDirection(-1);this.totalFrames=A[0]-A[1],this.timeCompleted=this.totalFrames,this.firstFrame=A[1],this.setCurrentRawFrameValue(this.totalFrames-0.001-Q)}else if(A[1]>A[0]){if(this.frameModifier<0)if(this.playSpeed<0)this.setSpeed(-this.playSpeed);else this.setDirection(1);this.totalFrames=A[1]-A[0],this.timeCompleted=this.totalFrames,this.firstFrame=A[0],this.setCurrentRawFrameValue(0.001+Q)}this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(A,Q){var E=-1;if(this.isPaused){if(this.currentRawFrame+this.firstFrame<A)E=A;else if(this.currentRawFrame+this.firstFrame>Q)E=Q-A}if(this.firstFrame=A,this.totalFrames=Q-A,this.timeCompleted=this.totalFrames,E!==-1)this.goToAndStop(E,!0)},AnimationItem.prototype.playSegments=function(A,Q){if(Q)this.segments.length=0;if(typeof A[0]==="object"){var E,B=A.length;for(E=0;E<B;E+=1)this.segments.push(A[E])}else this.segments.push(A);if(this.segments.length&&Q)this.adjustSegment(this.segments.shift(),0);if(this.isPaused)this.play()},AnimationItem.prototype.resetSegments=function(A){if(this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),A)this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(A){if(this.segments.length)return this.adjustSegment(this.segments.shift(),A),!0;return!1},AnimationItem.prototype.destroy=function(A){if(A&&this.name!==A||!this.renderer)return;this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null},AnimationItem.prototype.setCurrentRawFrameValue=function(A){this.currentRawFrame=A,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(A){this.playSpeed=A,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(A){this.playDirection=A<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(A,Q){if(Q&&this.name!==Q)return;this.audioController.setVolume(A)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(A){if(A&&this.name!==A)return;this.audioController.mute()},AnimationItem.prototype.unmute=function(A){if(A&&this.name!==A)return;this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(A){var Q="";if(A.e)Q=A.p;else if(this.assetsPath){var E=A.p;if(E.indexOf("images/")!==-1)E=E.split("/")[1];Q=this.assetsPath+E}else Q=this.path,Q+=A.u?A.u:"",Q+=A.p;return Q},AnimationItem.prototype.getAssetData=function(A){var Q=0,E=this.assets.length;while(Q<E){if(A===this.assets[Q].id)return this.assets[Q];Q+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(A){return A?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(A,Q,E){try{var B=this.renderer.getElementByPath(A);B.updateDocumentData(Q,E)}catch(I){}},AnimationItem.prototype.trigger=function(A){if(this._cbs&&this._cbs[A])switch(A){case"enterFrame":this.triggerEvent(A,new BMEnterFrameEvent(A,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(A,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(A,new BMCompleteLoopEvent(A,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(A,new BMCompleteEvent(A,this.frameMult));break;case"segmentStart":this.triggerEvent(A,new BMSegmentStartEvent(A,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(A,new BMDestroyEvent(A,this));break;default:this.triggerEvent(A)}if(A==="enterFrame"&&this.onEnterFrame)this.onEnterFrame.call(this,new BMEnterFrameEvent(A,this.currentFrame,this.totalFrames,this.frameMult));if(A==="loopComplete"&&this.onLoopComplete)this.onLoopComplete.call(this,new BMCompleteLoopEvent(A,this.loop,this.playCount,this.frameMult));if(A==="complete"&&this.onComplete)this.onComplete.call(this,new BMCompleteEvent(A,this.frameMult));if(A==="segmentStart"&&this.onSegmentStart)this.onSegmentStart.call(this,new BMSegmentStartEvent(A,this.firstFrame,this.totalFrames));if(A==="destroy"&&this.onDestroy)this.onDestroy.call(this,new BMDestroyEvent(A,this))},AnimationItem.prototype.triggerRenderFrameError=function(A){var Q=new BMRenderFrameErrorEvent(A,this.currentFrame);if(this.triggerEvent("error",Q),this.onError)this.onError.call(this,Q)},AnimationItem.prototype.triggerConfigError=function(A){var Q=new BMConfigErrorEvent(A,this.currentFrame);if(this.triggerEvent("error",Q),this.onError)this.onError.call(this,Q)};let animationManager=function(){var A={},Q=[],E=0,B=0,I=0,C=!0,K=!1;function J(P){var V=0,S=P.target;while(V<B){if(Q[V].animation===S){if(Q.splice(V,1),V-=1,B-=1,!S.isPaused)R()}V+=1}}function U(P,V){if(!P)return null;var S=0;while(S<B){if(Q[S].elem===P&&Q[S].elem!==null)return Q[S].animation;S+=1}var h=new AnimationItem;return O(h,P),h.setData(P,V),h}function Y(){var P,V=Q.length,S=[];for(P=0;P<V;P+=1)S.push(Q[P].animation);return S}function H(){I+=1,k()}function R(){I-=1}function O(P,V){P.addEventListener("destroy",J),P.addEventListener("_active",H),P.addEventListener("_idle",R),Q.push({elem:V,animation:P}),B+=1}function N(P){var V=new AnimationItem;return O(V,null),V.setParams(P),V}function $(P,V){var S;for(S=0;S<B;S+=1)Q[S].animation.setSpeed(P,V)}function L(P,V){var S;for(S=0;S<B;S+=1)Q[S].animation.setDirection(P,V)}function W(P){var V;for(V=0;V<B;V+=1)Q[V].animation.play(P)}function Z(P){var V=P-E,S;for(S=0;S<B;S+=1)Q[S].animation.advanceTime(V);if(E=P,I&&!K)window.requestAnimationFrame(Z);else C=!0}function G(P){E=P,window.requestAnimationFrame(Z)}function X(P){var V;for(V=0;V<B;V+=1)Q[V].animation.pause(P)}function q(P,V,S){var h;for(h=0;h<B;h+=1)Q[h].animation.goToAndStop(P,V,S)}function M(P){var V;for(V=0;V<B;V+=1)Q[V].animation.stop(P)}function F(P){var V;for(V=0;V<B;V+=1)Q[V].animation.togglePause(P)}function D(P){var V;for(V=B-1;V>=0;V-=1)Q[V].animation.destroy(P)}function _(P,V,S){var h=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),x,b=h.length;for(x=0;x<b;x+=1){if(S)h[x].setAttribute("data-bm-type",S);U(h[x],P)}if(V&&b===0){if(!S)S="svg";var m=document.getElementsByTagName("body")[0];m.innerText="";var s=createTag("div");s.style.width="100%",s.style.height="100%",s.setAttribute("data-bm-type",S),m.appendChild(s),U(s,P)}}function w(){var P;for(P=0;P<B;P+=1)Q[P].animation.resize()}function k(){if(!K&&I){if(C)window.requestAnimationFrame(G),C=!1}}function T(){K=!0}function z(){K=!1,k()}function j(P,V){var S;for(S=0;S<B;S+=1)Q[S].animation.setVolume(P,V)}function v(P){var V;for(V=0;V<B;V+=1)Q[V].animation.mute(P)}function g(P){var V;for(V=0;V<B;V+=1)Q[V].animation.unmute(P)}return A.registerAnimation=U,A.loadAnimation=N,A.setSpeed=$,A.setDirection=L,A.play=W,A.pause=X,A.stop=M,A.togglePause=F,A.searchAnimations=_,A.resize=w,A.goToAndStop=q,A.destroy=D,A.freeze=T,A.unfreeze=z,A.setVolume=j,A.mute=v,A.unmute=g,A.getRegisteredAnimations=Y,A}(),BezierFactory=function(){var A={};A.getBezierEasing=E;var Q={};function E(G,X,q,M,F){var D=F||("bez_"+G+"_"+X+"_"+q+"_"+M).replace(/\./g,"p");if(Q[D])return Q[D];var _=new Z([G,X,q,M]);return Q[D]=_,_}var B=4,I=0.001,C=0.0000001,K=10,J=11,U=1/(J-1),Y=typeof Float32Array==="function";function H(G,X){return 1-3*X+3*G}function R(G,X){return 3*X-6*G}function O(G){return 3*G}function N(G,X,q){return((H(X,q)*G+R(X,q))*G+O(X))*G}function $(G,X,q){return 3*H(X,q)*G*G+2*R(X,q)*G+O(X)}function L(G,X,q,M,F){var D,_,w=0;do if(_=X+(q-X)/2,D=N(_,M,F)-G,D>0)q=_;else X=_;while(Math.abs(D)>C&&++w<K);return _}function W(G,X,q,M){for(var F=0;F<B;++F){var D=$(X,q,M);if(D===0)return X;var _=N(X,q,M)-G;X-=_/D}return X}function Z(G){this._p=G,this._mSampleValues=Y?new Float32Array(J):new Array(J),this._precomputed=!1,this.get=this.get.bind(this)}return Z.prototype={get:function(G){var X=this._p[0],q=this._p[1],M=this._p[2],F=this._p[3];if(!this._precomputed)this._precompute();if(X===q&&M===F)return G;if(G===0)return 0;if(G===1)return 1;return N(this._getTForX(G),q,F)},_precompute:function(){var G=this._p[0],X=this._p[1],q=this._p[2],M=this._p[3];if(this._precomputed=!0,G!==X||q!==M)this._calcSampleValues()},_calcSampleValues:function(){var G=this._p[0],X=this._p[2];for(var q=0;q<J;++q)this._mSampleValues[q]=N(q*U,G,X)},_getTForX:function(G){var X=this._p[0],q=this._p[2],M=this._mSampleValues,F=0,D=1,_=J-1;for(;D!==_&&M[D]<=G;++D)F+=U;--D;var w=(G-M[D])/(M[D+1]-M[D]),k=F+w*U,T=$(k,X,q);if(T>=I)return W(G,k,X,q);if(T===0)return k;return L(G,F,F+U,X,q)}},A}(),pooling=function(){function A(Q){return Q.concat(createSizedArray(Q.length))}return{double:A}}(),poolFactory=function(){return function(A,Q,E){var B=0,I=A,C=createSizedArray(I),K={newElement:J,release:U};function J(){var Y;if(B)B-=1,Y=C[B];else Y=Q();return Y}function U(Y){if(B===I)C=pooling.double(C),I*=2;if(E)E(Y);C[B]=Y,B+=1}return K}}(),bezierLengthPool=function(){function A(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,A)}(),segmentsLengthPool=function(){function A(){return{lengths:[],totalLength:0}}function Q(E){var B,I=E.lengths.length;for(B=0;B<I;B+=1)bezierLengthPool.release(E.lengths[B]);E.lengths.length=0}return poolFactory(8,A,Q)}(),bez=bezFunction(),PropertyFactory=function(){var A=initialDefaultFrame,Q=Math.abs;function E(W,Z){var G=this.offsetTime,X;if(this.propType==="multidimensional")X=createTypedArray("float32",this.pv.length);var q=Z.lastIndex,M=q,F=this.keyframes.length-1,D=!0,_,w,k;while(D){if(_=this.keyframes[M],w=this.keyframes[M+1],M===F-1&&W>=w.t-G){if(_.h)_=w;q=0;break}if(w.t-G>W){q=M;break}if(M<F-1)M+=1;else q=0,D=!1}k=this.keyframesMetadata[M]||{};var T,z,j,v,g,P,V=w.t-G,S=_.t-G,h;if(_.to){if(!k.bezierData)k.bezierData=bez.buildBezierData(_.s,w.s||_.e,_.to,_.ti);var x=k.bezierData;if(W>=V||W<S){var b=W>=V?x.points.length-1:0;z=x.points[b].point.length;for(T=0;T<z;T+=1)X[T]=x.points[b].point[T]}else{if(k.__fnct)P=k.__fnct;else P=BezierFactory.getBezierEasing(_.o.x,_.o.y,_.i.x,_.i.y,_.n).get,k.__fnct=P;j=P((W-S)/(V-S));var m=x.segmentLength*j,s,i=Z.lastFrame<W&&Z._lastKeyframeIndex===M?Z._lastAddedLength:0;g=Z.lastFrame<W&&Z._lastKeyframeIndex===M?Z._lastPoint:0,D=!0,v=x.points.length;while(D){if(i+=x.points[g].partialLength,m===0||j===0||g===x.points.length-1){z=x.points[g].point.length;for(T=0;T<z;T+=1)X[T]=x.points[g].point[T];break}else if(m>=i&&m<i+x.points[g+1].partialLength){s=(m-i)/x.points[g+1].partialLength,z=x.points[g].point.length;for(T=0;T<z;T+=1)X[T]=x.points[g].point[T]+(x.points[g+1].point[T]-x.points[g].point[T])*s;break}if(g<v-1)g+=1;else D=!1}Z._lastPoint=g,Z._lastAddedLength=i-x.points[g].partialLength,Z._lastKeyframeIndex=M}}else{var n,l,c,o,e;if(F=_.s.length,h=w.s||_.e,this.sh&&_.h!==1)if(W>=V)X[0]=h[0],X[1]=h[1],X[2]=h[2];else if(W<=S)X[0]=_.s[0],X[1]=_.s[1],X[2]=_.s[2];else{var BA=C(_.s),EA=C(h),CA=(W-S)/(V-S);I(X,B(BA,EA,CA))}else for(M=0;M<F;M+=1){if(_.h!==1)if(W>=V)j=1;else if(W<S)j=0;else{if(_.o.x.constructor===Array){if(!k.__fnct)k.__fnct=[];if(!k.__fnct[M])n=_.o.x[M]===void 0?_.o.x[0]:_.o.x[M],l=_.o.y[M]===void 0?_.o.y[0]:_.o.y[M],c=_.i.x[M]===void 0?_.i.x[0]:_.i.x[M],o=_.i.y[M]===void 0?_.i.y[0]:_.i.y[M],P=BezierFactory.getBezierEasing(n,l,c,o).get,k.__fnct[M]=P;else P=k.__fnct[M]}else if(!k.__fnct)n=_.o.x,l=_.o.y,c=_.i.x,o=_.i.y,P=BezierFactory.getBezierEasing(n,l,c,o).get,_.keyframeMetadata=P;else P=k.__fnct;j=P((W-S)/(V-S))}if(h=w.s||_.e,e=_.h===1?_.s[M]:_.s[M]+(h[M]-_.s[M])*j,this.propType==="multidimensional")X[M]=e;else X=e}}return Z.lastIndex=q,X}function B(W,Z,G){var X=[],q=W[0],M=W[1],F=W[2],D=W[3],_=Z[0],w=Z[1],k=Z[2],T=Z[3],z,j,v,g,P;if(j=q*_+M*w+F*k+D*T,j<0)j=-j,_=-_,w=-w,k=-k,T=-T;if(1-j>0.000001)z=Math.acos(j),v=Math.sin(z),g=Math.sin((1-G)*z)/v,P=Math.sin(G*z)/v;else g=1-G,P=G;return X[0]=g*q+P*_,X[1]=g*M+P*w,X[2]=g*F+P*k,X[3]=g*D+P*T,X}function I(W,Z){var G=Z[0],X=Z[1],q=Z[2],M=Z[3],F=Math.atan2(2*X*M-2*G*q,1-2*X*X-2*q*q),D=Math.asin(2*G*X+2*q*M),_=Math.atan2(2*G*M-2*X*q,1-2*G*G-2*q*q);W[0]=F/degToRads,W[1]=D/degToRads,W[2]=_/degToRads}function C(W){var Z=W[0]*degToRads,G=W[1]*degToRads,X=W[2]*degToRads,q=Math.cos(Z/2),M=Math.cos(G/2),F=Math.cos(X/2),D=Math.sin(Z/2),_=Math.sin(G/2),w=Math.sin(X/2),k=q*M*F-D*_*w,T=D*_*F+q*M*w,z=D*M*F+q*_*w,j=q*_*F-D*M*w;return[T,z,j,k]}function K(){var W=this.comp.renderedFrame-this.offsetTime,Z=this.keyframes[0].t-this.offsetTime,G=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(W===this._caching.lastFrame||this._caching.lastFrame!==A&&(this._caching.lastFrame>=G&&W>=G||this._caching.lastFrame<Z&&W<Z))){if(this._caching.lastFrame>=W)this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0;var X=this.interpolateValue(W,this._caching);this.pv=X}return this._caching.lastFrame=W,this.pv}function J(W){var Z;if(this.propType==="unidimensional"){if(Z=W*this.mult,Q(this.v-Z)>0.00001)this.v=Z,this._mdf=!0}else{var G=0,X=this.v.length;while(G<X){if(Z=W[G]*this.mult,Q(this.v[G]-Z)>0.00001)this.v[G]=Z,this._mdf=!0;G+=1}}}function U(){if(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)return;if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var W,Z=this.effectsSequence.length,G=this.kf?this.pv:this.data.k;for(W=0;W<Z;W+=1)G=this.effectsSequence[W](G);this.setVValue(G),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}function Y(W){this.effectsSequence.push(W),this.container.addDynamicProperty(this)}function H(W,Z,G,X){this.propType="unidimensional",this.mult=G||1,this.data=Z,this.v=G?Z.k*G:Z.k,this.pv=Z.k,this._mdf=!1,this.elem=W,this.container=X,this.comp=W.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=U,this.setVValue=J,this.addEffect=Y}function R(W,Z,G,X){this.propType="multidimensional",this.mult=G||1,this.data=Z,this._mdf=!1,this.elem=W,this.container=X,this.comp=W.comp,this.k=!1,this.kf=!1,this.frameId=-1;var q,M=Z.k.length;this.v=createTypedArray("float32",M),this.pv=createTypedArray("float32",M),this.vel=createTypedArray("float32",M);for(q=0;q<M;q+=1)this.v[q]=Z.k[q]*this.mult,this.pv[q]=Z.k[q];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=U,this.setVValue=J,this.addEffect=Y}function O(W,Z,G,X){this.propType="unidimensional",this.keyframes=Z.k,this.keyframesMetadata=[],this.offsetTime=W.data.st,this.frameId=-1,this._caching={lastFrame:A,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=Z,this.mult=G||1,this.elem=W,this.container=X,this.comp=W.comp,this.v=A,this.pv=A,this._isFirstFrame=!0,this.getValue=U,this.setVValue=J,this.interpolateValue=E,this.effectsSequence=[K.bind(this)],this.addEffect=Y}function N(W,Z,G,X){this.propType="multidimensional";var q,M=Z.k.length,F,D,_,w;for(q=0;q<M-1;q+=1)if(Z.k[q].to&&Z.k[q].s&&Z.k[q+1]&&Z.k[q+1].s){if(F=Z.k[q].s,D=Z.k[q+1].s,_=Z.k[q].to,w=Z.k[q].ti,F.length===2&&!(F[0]===D[0]&&F[1]===D[1])&&bez.pointOnLine2D(F[0],F[1],D[0],D[1],F[0]+_[0],F[1]+_[1])&&bez.pointOnLine2D(F[0],F[1],D[0],D[1],D[0]+w[0],D[1]+w[1])||F.length===3&&!(F[0]===D[0]&&F[1]===D[1]&&F[2]===D[2])&&bez.pointOnLine3D(F[0],F[1],F[2],D[0],D[1],D[2],F[0]+_[0],F[1]+_[1],F[2]+_[2])&&bez.pointOnLine3D(F[0],F[1],F[2],D[0],D[1],D[2],D[0]+w[0],D[1]+w[1],D[2]+w[2]))Z.k[q].to=null,Z.k[q].ti=null;if(F[0]===D[0]&&F[1]===D[1]&&_[0]===0&&_[1]===0&&w[0]===0&&w[1]===0){if(F.length===2||F[2]===D[2]&&_[2]===0&&w[2]===0)Z.k[q].to=null,Z.k[q].ti=null}}this.effectsSequence=[K.bind(this)],this.data=Z,this.keyframes=Z.k,this.keyframesMetadata=[],this.offsetTime=W.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=G||1,this.elem=W,this.container=X,this.comp=W.comp,this.getValue=U,this.setVValue=J,this.interpolateValue=E,this.frameId=-1;var k=Z.k[0].s.length;this.v=createTypedArray("float32",k),this.pv=createTypedArray("float32",k);for(q=0;q<k;q+=1)this.v[q]=A,this.pv[q]=A;this._caching={lastFrame:A,lastIndex:0,value:createTypedArray("float32",k)},this.addEffect=Y}function $(W,Z,G,X,q){var M;if(!Z.k.length)M=new H(W,Z,X,q);else if(typeof Z.k[0]==="number")M=new R(W,Z,X,q);else switch(G){case 0:M=new O(W,Z,X,q);break;case 1:M=new N(W,Z,X,q);break;default:break}if(M.effectsSequence.length)q.addDynamicProperty(M);return M}var L={getProp:$};return L}();DynamicPropertyContainer.prototype={addDynamicProperty:function(A){if(this.dynamicProperties.indexOf(A)===-1)this.dynamicProperties.push(A),this.container.addDynamicProperty(this),this._isAnimated=!0},iterateDynamicProperties:function(){this._mdf=!1;var A,Q=this.dynamicProperties.length;for(A=0;A<Q;A+=1)if(this.dynamicProperties[A].getValue(),this.dynamicProperties[A]._mdf)this._mdf=!0},initDynamicPropertyContainer:function(A){this.container=A,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};let pointPool=function(){function A(){return createTypedArray("float32",2)}return poolFactory(8,A)}();ShapePath.prototype.setPathData=function(A,Q){this.c=A,this.setLength(Q);var E=0;while(E<Q)this.v[E]=pointPool.newElement(),this.o[E]=pointPool.newElement(),this.i[E]=pointPool.newElement(),E+=1},ShapePath.prototype.setLength=function(A){while(this._maxLength<A)this.doubleArrayLength();this._length=A},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(A,Q,E,B,I){var C;if(this._length=Math.max(this._length,B+1),this._length>=this._maxLength)this.doubleArrayLength();switch(E){case"v":C=this.v;break;case"i":C=this.i;break;case"o":C=this.o;break;default:C=[];break}if(!C[B]||C[B]&&!I)C[B]=pointPool.newElement();C[B][0]=A,C[B][1]=Q},ShapePath.prototype.setTripleAt=function(A,Q,E,B,I,C,K,J){this.setXYAt(A,Q,"v",K,J),this.setXYAt(E,B,"o",K,J),this.setXYAt(I,C,"i",K,J)},ShapePath.prototype.reverse=function(){var A=new ShapePath;A.setPathData(this.c,this._length);var Q=this.v,E=this.o,B=this.i,I=0;if(this.c)A.setTripleAt(Q[0][0],Q[0][1],B[0][0],B[0][1],E[0][0],E[0][1],0,!1),I=1;var C=this._length-1,K=this._length,J;for(J=I;J<K;J+=1)A.setTripleAt(Q[C][0],Q[C][1],B[C][0],B[C][1],E[C][0],E[C][1],J,!1),C-=1;return A};let shapePool=function(){function A(){return new ShapePath}function Q(I){var C=I._length,K;for(K=0;K<C;K+=1)pointPool.release(I.v[K]),pointPool.release(I.i[K]),pointPool.release(I.o[K]),I.v[K]=null,I.i[K]=null,I.o[K]=null;I._length=0,I.c=!1}function E(I){var C=B.newElement(),K,J=I._length===void 0?I.v.length:I._length;C.setLength(J),C.c=I.c;for(K=0;K<J;K+=1)C.setTripleAt(I.v[K][0],I.v[K][1],I.o[K][0],I.o[K][1],I.i[K][0],I.i[K][1],K);return C}var B=poolFactory(4,A,Q);return B.clone=E,B}();ShapeCollection.prototype.addShape=function(A){if(this._length===this._maxLength)this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2;this.shapes[this._length]=A,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var A;for(A=0;A<this._length;A+=1)shapePool.release(this.shapes[A]);this._length=0};let shapeCollectionPool=function(){var A={newShapeCollection:I,release:C},Q=0,E=4,B=createSizedArray(E);function I(){var K;if(Q)Q-=1,K=B[Q];else K=new ShapeCollection;return K}function C(K){var J,U=K._length;for(J=0;J<U;J+=1)shapePool.release(K.shapes[J]);if(K._length=0,Q===E)B=pooling.double(B),E*=2;B[Q]=K,Q+=1}return A}(),ShapePropertyFactory=function(){var A=-999999;function Q(Z,G,X){var q=X.lastIndex,M,F,D,_,w,k,T,z,j,v=this.keyframes;if(Z<v[0].t-this.offsetTime)M=v[0].s[0],D=!0,q=0;else if(Z>=v[v.length-1].t-this.offsetTime)M=v[v.length-1].s?v[v.length-1].s[0]:v[v.length-2].e[0],D=!0;else{var g=q,P=v.length-1,V=!0,S,h,x;while(V){if(S=v[g],h=v[g+1],h.t-this.offsetTime>Z)break;if(g<P-1)g+=1;else V=!1}if(x=this.keyframesMetadata[g]||{},D=S.h===1,q=g,!D){if(Z>=h.t-this.offsetTime)z=1;else if(Z<S.t-this.offsetTime)z=0;else{var b;if(x.__fnct)b=x.__fnct;else b=BezierFactory.getBezierEasing(S.o.x,S.o.y,S.i.x,S.i.y).get,x.__fnct=b;z=b((Z-(S.t-this.offsetTime))/(h.t-this.offsetTime-(S.t-this.offsetTime)))}F=h.s?h.s[0]:S.e[0]}M=S.s[0]}k=G._length,T=M.i[0].length,X.lastIndex=q;for(_=0;_<k;_+=1)for(w=0;w<T;w+=1)j=D?M.i[_][w]:M.i[_][w]+(F.i[_][w]-M.i[_][w])*z,G.i[_][w]=j,j=D?M.o[_][w]:M.o[_][w]+(F.o[_][w]-M.o[_][w])*z,G.o[_][w]=j,j=D?M.v[_][w]:M.v[_][w]+(F.v[_][w]-M.v[_][w])*z,G.v[_][w]=j}function E(){var Z=this.comp.renderedFrame-this.offsetTime,G=this.keyframes[0].t-this.offsetTime,X=this.keyframes[this.keyframes.length-1].t-this.offsetTime,q=this._caching.lastFrame;if(!(q!==A&&(q<G&&Z<G||q>X&&Z>X)))this._caching.lastIndex=q<Z?this._caching.lastIndex:0,this.interpolateShape(Z,this.pv,this._caching);return this._caching.lastFrame=Z,this.pv}function B(){this.paths=this.localShapeCollection}function I(Z,G){if(Z._length!==G._length||Z.c!==G.c)return!1;var X,q=Z._length;for(X=0;X<q;X+=1)if(Z.v[X][0]!==G.v[X][0]||Z.v[X][1]!==G.v[X][1]||Z.o[X][0]!==G.o[X][0]||Z.o[X][1]!==G.o[X][1]||Z.i[X][0]!==G.i[X][0]||Z.i[X][1]!==G.i[X][1])return!1;return!0}function C(Z){if(!I(this.v,Z))this.v=shapePool.clone(Z),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection}function K(){if(this.elem.globalData.frameId===this.frameId)return;if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Z;if(this.kf)Z=this.pv;else if(this.data.ks)Z=this.data.ks.k;else Z=this.data.pt.k;var G,X=this.effectsSequence.length;for(G=0;G<X;G+=1)Z=this.effectsSequence[G](Z);this.setVValue(Z),this.lock=!1,this.frameId=this.elem.globalData.frameId}function J(Z,G,X){this.propType="shape",this.comp=Z.comp,this.container=Z,this.elem=Z,this.data=G,this.k=!1,this.kf=!1,this._mdf=!1;var q=X===3?G.pt.k:G.ks.k;this.v=shapePool.clone(q),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=B,this.effectsSequence=[]}function U(Z){this.effectsSequence.push(Z),this.container.addDynamicProperty(this)}J.prototype.interpolateShape=Q,J.prototype.getValue=K,J.prototype.setVValue=C,J.prototype.addEffect=U;function Y(Z,G,X){this.propType="shape",this.comp=Z.comp,this.elem=Z,this.container=Z,this.offsetTime=Z.data.st,this.keyframes=X===3?G.pt.k:G.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var q=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,q),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=A,this.reset=B,this._caching={lastFrame:A,lastIndex:0},this.effectsSequence=[E.bind(this)]}Y.prototype.getValue=K,Y.prototype.interpolateShape=Q,Y.prototype.setVValue=C,Y.prototype.addEffect=U;var H=function(){var Z=roundCorner;function G(X,q){if(this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=q.d,this.elem=X,this.comp=X.comp,this.frameId=-1,this.initDynamicPropertyContainer(X),this.p=PropertyFactory.getProp(X,q.p,1,0,this),this.s=PropertyFactory.getProp(X,q.s,1,0,this),this.dynamicProperties.length)this.k=!0;else this.k=!1,this.convertEllToPath()}return G.prototype={reset:B,getValue:function(){if(this.elem.globalData.frameId===this.frameId)return;if(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf)this.convertEllToPath()},convertEllToPath:function(){var X=this.p.v[0],q=this.p.v[1],M=this.s.v[0]/2,F=this.s.v[1]/2,D=this.d!==3,_=this.v;_.v[0][0]=X,_.v[0][1]=q-F,_.v[1][0]=D?X+M:X-M,_.v[1][1]=q,_.v[2][0]=X,_.v[2][1]=q+F,_.v[3][0]=D?X-M:X+M,_.v[3][1]=q,_.i[0][0]=D?X-M*Z:X+M*Z,_.i[0][1]=q-F,_.i[1][0]=D?X+M:X-M,_.i[1][1]=q-F*Z,_.i[2][0]=D?X+M*Z:X-M*Z,_.i[2][1]=q+F,_.i[3][0]=D?X-M:X+M,_.i[3][1]=q+F*Z,_.o[0][0]=D?X+M*Z:X-M*Z,_.o[0][1]=q-F,_.o[1][0]=D?X+M:X-M,_.o[1][1]=q+F*Z,_.o[2][0]=D?X-M*Z:X+M*Z,_.o[2][1]=q+F,_.o[3][0]=D?X-M:X+M,_.o[3][1]=q-F*Z}},extendPrototype([DynamicPropertyContainer],G),G}(),R=function(){function Z(G,X){if(this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=G,this.comp=G.comp,this.data=X,this.frameId=-1,this.d=X.d,this.initDynamicPropertyContainer(G),X.sy===1)this.ir=PropertyFactory.getProp(G,X.ir,0,0,this),this.is=PropertyFactory.getProp(G,X.is,0,0.01,this),this.convertToPath=this.convertStarToPath;else this.convertToPath=this.convertPolygonToPath;if(this.pt=PropertyFactory.getProp(G,X.pt,0,0,this),this.p=PropertyFactory.getProp(G,X.p,1,0,this),this.r=PropertyFactory.getProp(G,X.r,0,degToRads,this),this.or=PropertyFactory.getProp(G,X.or,0,0,this),this.os=PropertyFactory.getProp(G,X.os,0,0.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length)this.k=!0;else this.k=!1,this.convertToPath()}return Z.prototype={reset:B,getValue:function(){if(this.elem.globalData.frameId===this.frameId)return;if(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf)this.convertToPath()},convertStarToPath:function(){var G=Math.floor(this.pt.v)*2,X=Math.PI*2/G,q=!0,M=this.or.v,F=this.ir.v,D=this.os.v,_=this.is.v,w=2*Math.PI*M/(G*2),k=2*Math.PI*F/(G*2),T,z,j,v,g=-Math.PI/2;g+=this.r.v;var P=this.data.d===3?-1:1;this.v._length=0;for(T=0;T<G;T+=1){z=q?M:F,j=q?D:_,v=q?w:k;var V=z*Math.cos(g),S=z*Math.sin(g),h=V===0&&S===0?0:S/Math.sqrt(V*V+S*S),x=V===0&&S===0?0:-V/Math.sqrt(V*V+S*S);V+=+this.p.v[0],S+=+this.p.v[1],this.v.setTripleAt(V,S,V-h*v*j*P,S-x*v*j*P,V+h*v*j*P,S+x*v*j*P,T,!0),q=!q,g+=X*P}},convertPolygonToPath:function(){var G=Math.floor(this.pt.v),X=Math.PI*2/G,q=this.or.v,M=this.os.v,F=2*Math.PI*q/(G*4),D,_=-Math.PI*0.5,w=this.data.d===3?-1:1;_+=this.r.v,this.v._length=0;for(D=0;D<G;D+=1){var k=q*Math.cos(_),T=q*Math.sin(_),z=k===0&&T===0?0:T/Math.sqrt(k*k+T*T),j=k===0&&T===0?0:-k/Math.sqrt(k*k+T*T);k+=+this.p.v[0],T+=+this.p.v[1],this.v.setTripleAt(k,T,k-z*F*M*w,T-j*F*M*w,k+z*F*M*w,T+j*F*M*w,D,!0),_+=X*w}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Z),Z}(),O=function(){function Z(G,X){if(this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=G,this.comp=G.comp,this.frameId=-1,this.d=X.d,this.initDynamicPropertyContainer(G),this.p=PropertyFactory.getProp(G,X.p,1,0,this),this.s=PropertyFactory.getProp(G,X.s,1,0,this),this.r=PropertyFactory.getProp(G,X.r,0,0,this),this.dynamicProperties.length)this.k=!0;else this.k=!1,this.convertRectToPath()}return Z.prototype={convertRectToPath:function(){var G=this.p.v[0],X=this.p.v[1],q=this.s.v[0]/2,M=this.s.v[1]/2,F=bmMin(q,M,this.r.v),D=F*(1-roundCorner);if(this.v._length=0,this.d===2||this.d===1)if(this.v.setTripleAt(G+q,X-M+F,G+q,X-M+F,G+q,X-M+D,0,!0),this.v.setTripleAt(G+q,X+M-F,G+q,X+M-D,G+q,X+M-F,1,!0),F!==0)this.v.setTripleAt(G+q-F,X+M,G+q-F,X+M,G+q-D,X+M,2,!0),this.v.setTripleAt(G-q+F,X+M,G-q+D,X+M,G-q+F,X+M,3,!0),this.v.setTripleAt(G-q,X+M-F,G-q,X+M-F,G-q,X+M-D,4,!0),this.v.setTripleAt(G-q,X-M+F,G-q,X-M+D,G-q,X-M+F,5,!0),this.v.setTripleAt(G-q+F,X-M,G-q+F,X-M,G-q+D,X-M,6,!0),this.v.setTripleAt(G+q-F,X-M,G+q-D,X-M,G+q-F,X-M,7,!0);else this.v.setTripleAt(G-q,X+M,G-q+D,X+M,G-q,X+M,2),this.v.setTripleAt(G-q,X-M,G-q,X-M+D,G-q,X-M,3);else if(this.v.setTripleAt(G+q,X-M+F,G+q,X-M+D,G+q,X-M+F,0,!0),F!==0)this.v.setTripleAt(G+q-F,X-M,G+q-F,X-M,G+q-D,X-M,1,!0),this.v.setTripleAt(G-q+F,X-M,G-q+D,X-M,G-q+F,X-M,2,!0),this.v.setTripleAt(G-q,X-M+F,G-q,X-M+F,G-q,X-M+D,3,!0),this.v.setTripleAt(G-q,X+M-F,G-q,X+M-D,G-q,X+M-F,4,!0),this.v.setTripleAt(G-q+F,X+M,G-q+F,X+M,G-q+D,X+M,5,!0),this.v.setTripleAt(G+q-F,X+M,G+q-D,X+M,G+q-F,X+M,6,!0),this.v.setTripleAt(G+q,X+M-F,G+q,X+M-F,G+q,X+M-D,7,!0);else this.v.setTripleAt(G-q,X-M,G-q+D,X-M,G-q,X-M,1,!0),this.v.setTripleAt(G-q,X+M,G-q,X+M-D,G-q,X+M,2,!0),this.v.setTripleAt(G+q,X+M,G+q-D,X+M,G+q,X+M,3,!0)},getValue:function(){if(this.elem.globalData.frameId===this.frameId)return;if(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf)this.convertRectToPath()},reset:B},extendPrototype([DynamicPropertyContainer],Z),Z}();function N(Z,G,X){var q;if(X===3||X===4){var M=X===3?G.pt:G.ks,F=M.k;if(F.length)q=new Y(Z,G,X);else q=new J(Z,G,X)}else if(X===5)q=new O(Z,G);else if(X===6)q=new H(Z,G);else if(X===7)q=new R(Z,G);if(q.k)Z.addDynamicProperty(q);return q}function $(){return J}function L(){return Y}var W={};return W.getShapeProp=N,W.getConstructorFunction=$,W.getKeyframedConstructorFunction=L,W}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */let Matrix=function(){var{cos:A,sin:Q,tan:E,round:B}=Math;function I(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function C(V){if(V===0)return this;var S=A(V),h=Q(V);return this._t(S,-h,0,0,h,S,0,0,0,0,1,0,0,0,0,1)}function K(V){if(V===0)return this;var S=A(V),h=Q(V);return this._t(1,0,0,0,0,S,-h,0,0,h,S,0,0,0,0,1)}function J(V){if(V===0)return this;var S=A(V),h=Q(V);return this._t(S,0,h,0,0,1,0,0,-h,0,S,0,0,0,0,1)}function U(V){if(V===0)return this;var S=A(V),h=Q(V);return this._t(S,-h,0,0,h,S,0,0,0,0,1,0,0,0,0,1)}function Y(V,S){return this._t(1,S,V,1,0,0)}function H(V,S){return this.shear(E(V),E(S))}function R(V,S){var h=A(S),x=Q(S);return this._t(h,x,0,0,-x,h,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,E(V),1,0,0,0,0,1,0,0,0,0,1)._t(h,-x,0,0,x,h,0,0,0,0,1,0,0,0,0,1)}function O(V,S,h){if(!h&&h!==0)h=1;if(V===1&&S===1&&h===1)return this;return this._t(V,0,0,0,0,S,0,0,0,0,h,0,0,0,0,1)}function N(V,S,h,x,b,m,s,i,n,l,c,o,e,BA,EA,CA){return this.props[0]=V,this.props[1]=S,this.props[2]=h,this.props[3]=x,this.props[4]=b,this.props[5]=m,this.props[6]=s,this.props[7]=i,this.props[8]=n,this.props[9]=l,this.props[10]=c,this.props[11]=o,this.props[12]=e,this.props[13]=BA,this.props[14]=EA,this.props[15]=CA,this}function $(V,S,h){if(h=h||0,V!==0||S!==0||h!==0)return this._t(1,0,0,0,0,1,0,0,0,0,1,0,V,S,h,1);return this}function L(V,S,h,x,b,m,s,i,n,l,c,o,e,BA,EA,CA){var f=this.props;if(V===1&&S===0&&h===0&&x===0&&b===0&&m===1&&s===0&&i===0&&n===0&&l===0&&c===1&&o===0)return f[12]=f[12]*V+f[15]*e,f[13]=f[13]*m+f[15]*BA,f[14]=f[14]*c+f[15]*EA,f[15]*=CA,this._identityCalculated=!1,this;var NA=f[0],YA=f[1],FA=f[2],ZA=f[3],jA=f[4],wA=f[5],VA=f[6],d=f[7],u=f[8],QA=f[9],t=f[10],KA=f[11],HA=f[12],fA=f[13],zA=f[14],yA=f[15];return f[0]=NA*V+YA*b+FA*n+ZA*e,f[1]=NA*S+YA*m+FA*l+ZA*BA,f[2]=NA*h+YA*s+FA*c+ZA*EA,f[3]=NA*x+YA*i+FA*o+ZA*CA,f[4]=jA*V+wA*b+VA*n+d*e,f[5]=jA*S+wA*m+VA*l+d*BA,f[6]=jA*h+wA*s+VA*c+d*EA,f[7]=jA*x+wA*i+VA*o+d*CA,f[8]=u*V+QA*b+t*n+KA*e,f[9]=u*S+QA*m+t*l+KA*BA,f[10]=u*h+QA*s+t*c+KA*EA,f[11]=u*x+QA*i+t*o+KA*CA,f[12]=HA*V+fA*b+zA*n+yA*e,f[13]=HA*S+fA*m+zA*l+yA*BA,f[14]=HA*h+fA*s+zA*c+yA*EA,f[15]=HA*x+fA*i+zA*o+yA*CA,this._identityCalculated=!1,this}function W(){if(!this._identityCalculated)this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0;return this._identity}function Z(V){var S=0;while(S<16){if(V.props[S]!==this.props[S])return!1;S+=1}return!0}function G(V){var S;for(S=0;S<16;S+=1)V.props[S]=this.props[S];return V}function X(V){var S;for(S=0;S<16;S+=1)this.props[S]=V[S]}function q(V,S,h){return{x:V*this.props[0]+S*this.props[4]+h*this.props[8]+this.props[12],y:V*this.props[1]+S*this.props[5]+h*this.props[9]+this.props[13],z:V*this.props[2]+S*this.props[6]+h*this.props[10]+this.props[14]}}function M(V,S,h){return V*this.props[0]+S*this.props[4]+h*this.props[8]+this.props[12]}function F(V,S,h){return V*this.props[1]+S*this.props[5]+h*this.props[9]+this.props[13]}function D(V,S,h){return V*this.props[2]+S*this.props[6]+h*this.props[10]+this.props[14]}function _(){var V=this.props[0]*this.props[5]-this.props[1]*this.props[4],S=this.props[5]/V,h=-this.props[1]/V,x=-this.props[4]/V,b=this.props[0]/V,m=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/V,s=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/V,i=new Matrix;return i.props[0]=S,i.props[1]=h,i.props[4]=x,i.props[5]=b,i.props[12]=m,i.props[13]=s,i}function w(V){var S=this.getInverseMatrix();return S.applyToPointArray(V[0],V[1],V[2]||0)}function k(V){var S,h=V.length,x=[];for(S=0;S<h;S+=1)x[S]=w(V[S]);return x}function T(V,S,h){var x=createTypedArray("float32",6);if(this.isIdentity())x[0]=V[0],x[1]=V[1],x[2]=S[0],x[3]=S[1],x[4]=h[0],x[5]=h[1];else{var b=this.props[0],m=this.props[1],s=this.props[4],i=this.props[5],n=this.props[12],l=this.props[13];x[0]=V[0]*b+V[1]*s+n,x[1]=V[0]*m+V[1]*i+l,x[2]=S[0]*b+S[1]*s+n,x[3]=S[0]*m+S[1]*i+l,x[4]=h[0]*b+h[1]*s+n,x[5]=h[0]*m+h[1]*i+l}return x}function z(V,S,h){var x;if(this.isIdentity())x=[V,S,h];else x=[V*this.props[0]+S*this.props[4]+h*this.props[8]+this.props[12],V*this.props[1]+S*this.props[5]+h*this.props[9]+this.props[13],V*this.props[2]+S*this.props[6]+h*this.props[10]+this.props[14]];return x}function j(V,S){if(this.isIdentity())return V+","+S;var h=this.props;return Math.round((V*h[0]+S*h[4]+h[12])*100)/100+","+Math.round((V*h[1]+S*h[5]+h[13])*100)/100}function v(){var V=0,S=this.props,h="matrix3d(",x=1e4;while(V<16)h+=B(S[V]*x)/x,h+=V===15?")":",",V+=1;return h}function g(V){var S=1e4;if(V<0.000001&&V>0||V>-0.000001&&V<0)return B(V*S)/S;return V}function P(){var V=this.props,S=g(V[0]),h=g(V[1]),x=g(V[4]),b=g(V[5]),m=g(V[12]),s=g(V[13]);return"matrix("+S+","+h+","+x+","+b+","+m+","+s+")"}return function(){this.reset=I,this.rotate=C,this.rotateX=K,this.rotateY=J,this.rotateZ=U,this.skew=H,this.skewFromAxis=R,this.shear=Y,this.scale=O,this.setTransform=N,this.translate=$,this.transform=L,this.applyToPoint=q,this.applyToX=M,this.applyToY=F,this.applyToZ=D,this.applyToPointArray=z,this.applyToTriplePoints=T,this.applyToPointStringified=j,this.toCSS=v,this.to2dCSS=P,this.clone=G,this.cloneFromProps=X,this.equals=Z,this.inversePoints=k,this.inversePoint=w,this.getInverseMatrix=_,this._t=this.transform,this.isIdentity=W,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();if(standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="",CQ.play=animationManager.play,CQ.pause=animationManager.pause,CQ.setLocationHref=setLocation,CQ.togglePause=animationManager.togglePause,CQ.setSpeed=animationManager.setSpeed,CQ.setDirection=animationManager.setDirection,CQ.stop=animationManager.stop,CQ.searchAnimations=searchAnimations,CQ.registerAnimation=animationManager.registerAnimation,CQ.loadAnimation=loadAnimation,CQ.setSubframeRendering=setSubframeRendering,CQ.resize=animationManager.resize,CQ.goToAndStop=animationManager.goToAndStop,CQ.destroy=animationManager.destroy,CQ.setQuality=setQuality,CQ.inBrowser=inBrowser,CQ.installPlugin=installPlugin,CQ.freeze=animationManager.freeze,CQ.unfreeze=animationManager.unfreeze,CQ.setVolume=animationManager.setVolume,CQ.mute=animationManager.mute,CQ.unmute=animationManager.unmute,CQ.getRegisteredAnimations=animationManager.getRegisteredAnimations,CQ.useWebWorker=setWebWorker,CQ.setIDPrefix=setPrefix,CQ.__getFactory=getFactory,CQ.version="[[BM_VERSION]]",queryString="",standalone)fH=document.getElementsByTagName("script"),EW=fH.length-1,uH=fH[EW]||{src:""},queryString=uH.src?uH.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer");readyStateCheckInterval=setInterval(checkReady,100);try{if(!(typeof BW==="object"&&typeof Sw!=="undefined")&&!(typeof define==="function"&&define.amd))window.bodymovin=CQ}catch(A){}let ShapeModifiers=function(){var A={},Q={};A.registerModifier=E,A.getModifier=B;function E(I,C){if(!Q[I])Q[I]=C}function B(I,C,K){return new Q[I](C,K)}return A}();ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(A){if(!this.closed){A.sh.container.addDynamicProperty(A.sh);var Q={shape:A.sh,data:A,localShapeCollection:shapeCollectionPool.newShapeCollection()};if(this.shapes.push(Q),this.addShapeToModifier(Q),this._isAnimated)A.setAsAnimated()}},ShapeModifier.prototype.init=function(A,Q){if(this.shapes=[],this.elem=A,this.initDynamicPropertyContainer(A),this.initModifierProperties(A,Q),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length)this.k=!0;else this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){if(this.elem.globalData.frameId===this.frameId)return;this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties()},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(A,Q){this.s=PropertyFactory.getProp(A,Q.s,0,0.01,this),this.e=PropertyFactory.getProp(A,Q.e,0,0.01,this),this.o=PropertyFactory.getProp(A,Q.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=Q.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(A){A.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(A,Q,E,B,I){var C=[];if(Q<=1)C.push({s:A,e:Q});else if(A>=1)C.push({s:A-1,e:Q-1});else C.push({s:A,e:1}),C.push({s:0,e:Q-1});var K=[],J,U=C.length,Y;for(J=0;J<U;J+=1)if(Y=C[J],!(Y.e*I<B||Y.s*I>B+E)){var H,R;if(Y.s*I<=B)H=0;else H=(Y.s*I-B)/E;if(Y.e*I>=B+E)R=1;else R=(Y.e*I-B)/E;K.push([H,R])}if(!K.length)K.push([0,0]);return K},TrimModifier.prototype.releasePathsData=function(A){var Q,E=A.length;for(Q=0;Q<E;Q+=1)segmentsLengthPool.release(A[Q]);return A.length=0,A},TrimModifier.prototype.processShapes=function(A){var Q,E;if(this._mdf||A){var B=this.o.v%360/360;if(B<0)B+=1;if(this.s.v>1)Q=1+B;else if(this.s.v<0)Q=0+B;else Q=this.s.v+B;if(this.e.v>1)E=1+B;else if(this.e.v<0)E=0+B;else E=this.e.v+B;if(Q>E){var I=Q;Q=E,E=I}Q=Math.round(Q*1e4)*0.0001,E=Math.round(E*1e4)*0.0001,this.sValue=Q,this.eValue=E}else Q=this.sValue,E=this.eValue;var C,K,J=this.shapes.length,U,Y,H,R,O,N=0;if(E===Q){for(K=0;K<J;K+=1)if(this.shapes[K].localShapeCollection.releaseShapes(),this.shapes[K].shape._mdf=!0,this.shapes[K].shape.paths=this.shapes[K].localShapeCollection,this._mdf)this.shapes[K].pathsData.length=0}else if(!(E===1&&Q===0||E===0&&Q===1)){var $=[],L,W;for(K=0;K<J;K+=1)if(L=this.shapes[K],!L.shape._mdf&&!this._mdf&&!A&&this.m!==2)L.shape.paths=L.localShapeCollection;else{if(C=L.shape.paths,Y=C._length,O=0,!L.shape._mdf&&L.pathsData.length)O=L.totalShapeLength;else{H=this.releasePathsData(L.pathsData);for(U=0;U<Y;U+=1)R=bez.getSegmentsLength(C.shapes[U]),H.push(R),O+=R.totalLength;L.totalShapeLength=O,L.pathsData=H}N+=O,L.shape._mdf=!0}var Z=Q,G=E,X=0,q;for(K=J-1;K>=0;K-=1)if(L=this.shapes[K],L.shape._mdf){if(W=L.localShapeCollection,W.releaseShapes(),this.m===2&&J>1)q=this.calculateShapeEdges(Q,E,L.totalShapeLength,X,N),X+=L.totalShapeLength;else q=[[Z,G]];Y=q.length;for(U=0;U<Y;U+=1){if(Z=q[U][0],G=q[U][1],$.length=0,G<=1)$.push({s:L.totalShapeLength*Z,e:L.totalShapeLength*G});else if(Z>=1)$.push({s:L.totalShapeLength*(Z-1),e:L.totalShapeLength*(G-1)});else $.push({s:L.totalShapeLength*Z,e:L.totalShapeLength}),$.push({s:0,e:L.totalShapeLength*(G-1)});var M=this.addShapes(L,$[0]);if($[0].s!==$[0].e){if($.length>1){var F=L.shape.paths.shapes[L.shape.paths._length-1];if(F.c){var D=M.pop();this.addPaths(M,W),M=this.addShapes(L,$[1],D)}else this.addPaths(M,W),M=this.addShapes(L,$[1])}this.addPaths(M,W)}}L.shape.paths=W}}else if(this._mdf)for(K=0;K<J;K+=1)this.shapes[K].pathsData.length=0,this.shapes[K].shape._mdf=!0},TrimModifier.prototype.addPaths=function(A,Q){var E,B=A.length;for(E=0;E<B;E+=1)Q.addShape(A[E])},TrimModifier.prototype.addSegment=function(A,Q,E,B,I,C,K){if(I.setXYAt(Q[0],Q[1],"o",C),I.setXYAt(E[0],E[1],"i",C+1),K)I.setXYAt(A[0],A[1],"v",C);I.setXYAt(B[0],B[1],"v",C+1)},TrimModifier.prototype.addSegmentFromArray=function(A,Q,E,B){if(Q.setXYAt(A[1],A[5],"o",E),Q.setXYAt(A[2],A[6],"i",E+1),B)Q.setXYAt(A[0],A[4],"v",E);Q.setXYAt(A[3],A[7],"v",E+1)},TrimModifier.prototype.addShapes=function(A,Q,E){var B=A.pathsData,I=A.shape.paths.shapes,C,K=A.shape.paths._length,J,U,Y=0,H,R,O,N,$=[],L,W=!0;if(!E)E=shapePool.newElement(),R=0,L=0;else R=E._length,L=E._length;$.push(E);for(C=0;C<K;C+=1){O=B[C].lengths,E.c=I[C].c,U=I[C].c?O.length:O.length+1;for(J=1;J<U;J+=1)if(H=O[J-1],Y+H.addedLength<Q.s)Y+=H.addedLength,E.c=!1;else if(Y>Q.e){E.c=!1;break}else{if(Q.s<=Y&&Q.e>=Y+H.addedLength)this.addSegment(I[C].v[J-1],I[C].o[J-1],I[C].i[J],I[C].v[J],E,R,W),W=!1;else N=bez.getNewSegment(I[C].v[J-1],I[C].v[J],I[C].o[J-1],I[C].i[J],(Q.s-Y)/H.addedLength,(Q.e-Y)/H.addedLength,O[J-1]),this.addSegmentFromArray(N,E,R,W),W=!1,E.c=!1;Y+=H.addedLength,R+=1}if(I[C].c&&O.length){if(H=O[J-1],Y<=Q.e){var Z=O[J-1].addedLength;if(Q.s<=Y&&Q.e>=Y+Z)this.addSegment(I[C].v[J-1],I[C].o[J-1],I[C].i[0],I[C].v[0],E,R,W),W=!1;else N=bez.getNewSegment(I[C].v[J-1],I[C].v[0],I[C].o[J-1],I[C].i[0],(Q.s-Y)/Z,(Q.e-Y)/Z,O[J-1]),this.addSegmentFromArray(N,E,R,W),W=!1,E.c=!1}else E.c=!1;Y+=H.addedLength,R+=1}if(E._length)E.setXYAt(E.v[L][0],E.v[L][1],"i",L),E.setXYAt(E.v[E._length-1][0],E.v[E._length-1][1],"o",E._length-1);if(Y>Q.e)break;if(C<K-1)E=shapePool.newElement(),W=!0,$.push(E),R=0}return $},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(A,Q){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(A,Q.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(A,Q){var E=Q/100,B=[0,0],I=A._length,C=0;for(C=0;C<I;C+=1)B[0]+=A.v[C][0],B[1]+=A.v[C][1];B[0]/=I,B[1]/=I;var K=shapePool.newElement();K.c=A.c;var J,U,Y,H,R,O;for(C=0;C<I;C+=1)J=A.v[C][0]+(B[0]-A.v[C][0])*E,U=A.v[C][1]+(B[1]-A.v[C][1])*E,Y=A.o[C][0]+(B[0]-A.o[C][0])*-E,H=A.o[C][1]+(B[1]-A.o[C][1])*-E,R=A.i[C][0]+(B[0]-A.i[C][0])*-E,O=A.i[C][1]+(B[1]-A.i[C][1])*-E,K.setTripleAt(J,U,Y,H,R,O,C);return K},PuckerAndBloatModifier.prototype.processShapes=function(A){var Q,E,B=this.shapes.length,I,C,K=this.amount.v;if(K!==0){var J,U;for(E=0;E<B;E+=1){if(J=this.shapes[E],U=J.localShapeCollection,!(!J.shape._mdf&&!this._mdf&&!A)){U.releaseShapes(),J.shape._mdf=!0,Q=J.shape.paths.shapes,C=J.shape.paths._length;for(I=0;I<C;I+=1)U.addShape(this.processPath(Q[I],K))}J.shape.paths=J.localShapeCollection}}if(!this.dynamicProperties.length)this._mdf=!1};let TransformPropertyFactory=function(){var A=[0,0];function Q(U){var Y=this._mdf;if(this.iterateDynamicProperties(),this._mdf=this._mdf||Y,this.a)U.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]);if(this.s)U.scale(this.s.v[0],this.s.v[1],this.s.v[2]);if(this.sk)U.skewFromAxis(-this.sk.v,this.sa.v);if(this.r)U.rotate(-this.r.v);else U.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);if(this.data.p.s)if(this.data.p.z)U.translate(this.px.v,this.py.v,-this.pz.v);else U.translate(this.px.v,this.py.v,0);else U.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function E(U){if(this.elem.globalData.frameId===this.frameId)return;if(this._isDirty)this.precalculateMatrix(),this._isDirty=!1;if(this.iterateDynamicProperties(),this._mdf||U){var Y;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1)this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]);if(this.appliedTransformations<2)this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]);if(this.sk&&this.appliedTransformations<3)this.v.skewFromAxis(-this.sk.v,this.sa.v);if(this.r&&this.appliedTransformations<4)this.v.rotate(-this.r.v);else if(!this.r&&this.appliedTransformations<4)this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);if(this.autoOriented){var H,R;if(Y=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)if(this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t)H=this.p.getValueAtTime((this.p.keyframes[0].t+0.01)/Y,0),R=this.p.getValueAtTime(this.p.keyframes[0].t/Y,0);else if(this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t)H=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/Y,0),R=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-0.05)/Y,0);else H=this.p.pv,R=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-0.01)/Y,this.p.offsetTime);else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){H=[],R=[];var O=this.px,N=this.py;if(O._caching.lastFrame+O.offsetTime<=O.keyframes[0].t)H[0]=O.getValueAtTime((O.keyframes[0].t+0.01)/Y,0),H[1]=N.getValueAtTime((N.keyframes[0].t+0.01)/Y,0),R[0]=O.getValueAtTime(O.keyframes[0].t/Y,0),R[1]=N.getValueAtTime(N.keyframes[0].t/Y,0);else if(O._caching.lastFrame+O.offsetTime>=O.keyframes[O.keyframes.length-1].t)H[0]=O.getValueAtTime(O.keyframes[O.keyframes.length-1].t/Y,0),H[1]=N.getValueAtTime(N.keyframes[N.keyframes.length-1].t/Y,0),R[0]=O.getValueAtTime((O.keyframes[O.keyframes.length-1].t-0.01)/Y,0),R[1]=N.getValueAtTime((N.keyframes[N.keyframes.length-1].t-0.01)/Y,0);else H=[O.pv,N.pv],R[0]=O.getValueAtTime((O._caching.lastFrame+O.offsetTime-0.01)/Y,O.offsetTime),R[1]=N.getValueAtTime((N._caching.lastFrame+N.offsetTime-0.01)/Y,N.offsetTime)}else R=A,H=R;this.v.rotate(-Math.atan2(H[1]-R[1],H[0]-R[0]))}if(this.data.p&&this.data.p.s)if(this.data.p.z)this.v.translate(this.px.v,this.py.v,-this.pz.v);else this.v.translate(this.px.v,this.py.v,0);else this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}function B(){if(!this.a.k)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;if(this.r){if(!this.r.effectsSequence.length)this.pre.rotate(-this.r.v),this.appliedTransformations=4}else if(!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length)this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4}function I(){}function C(U){this._addDynamicProperty(U),this.elem.addDynamicProperty(U),this._isDirty=!0}function K(U,Y,H){if(this.elem=U,this.frameId=-1,this.propType="transform",this.data=Y,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(H||U),Y.p&&Y.p.s){if(this.px=PropertyFactory.getProp(U,Y.p.x,0,0,this),this.py=PropertyFactory.getProp(U,Y.p.y,0,0,this),Y.p.z)this.pz=PropertyFactory.getProp(U,Y.p.z,0,0,this)}else this.p=PropertyFactory.getProp(U,Y.p||{k:[0,0,0]},1,0,this);if(Y.rx){if(this.rx=PropertyFactory.getProp(U,Y.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(U,Y.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(U,Y.rz,0,degToRads,this),Y.or.k[0].ti){var R,O=Y.or.k.length;for(R=0;R<O;R+=1)Y.or.k[R].to=null,Y.or.k[R].ti=null}this.or=PropertyFactory.getProp(U,Y.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(U,Y.r||{k:0},0,degToRads,this);if(Y.sk)this.sk=PropertyFactory.getProp(U,Y.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(U,Y.sa,0,degToRads,this);if(this.a=PropertyFactory.getProp(U,Y.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(U,Y.s||{k:[100,100,100]},1,0.01,this),Y.o)this.o=PropertyFactory.getProp(U,Y.o,0,0.01,U);else this.o={_mdf:!1,v:1};if(this._isDirty=!0,!this.dynamicProperties.length)this.getValue(!0)}K.prototype={applyToMatrix:Q,getValue:E,precalculateMatrix:B,autoOrient:I},extendPrototype([DynamicPropertyContainer],K),K.prototype.addDynamicProperty=C,K.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function J(U,Y,H){return new K(U,Y,H)}return{getTransformProperty:J}}();extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(A,Q){if(this.getValue=this.processKeys,this.c=PropertyFactory.getProp(A,Q.c,0,null,this),this.o=PropertyFactory.getProp(A,Q.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(A,Q.tr,this),this.so=PropertyFactory.getProp(A,Q.tr.so,0,0.01,this),this.eo=PropertyFactory.getProp(A,Q.tr.eo,0,0.01,this),this.data=Q,!this.dynamicProperties.length)this.getValue(!0);this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(A,Q,E,B,I,C){var K=C?-1:1,J=B.s.v[0]+(1-B.s.v[0])*(1-I),U=B.s.v[1]+(1-B.s.v[1])*(1-I);A.translate(B.p.v[0]*K*I,B.p.v[1]*K*I,B.p.v[2]),Q.translate(-B.a.v[0],-B.a.v[1],B.a.v[2]),Q.rotate(-B.r.v*K*I),Q.translate(B.a.v[0],B.a.v[1],B.a.v[2]),E.translate(-B.a.v[0],-B.a.v[1],B.a.v[2]),E.scale(C?1/J:J,C?1/U:U),E.translate(B.a.v[0],B.a.v[1],B.a.v[2])},RepeaterModifier.prototype.init=function(A,Q,E,B){this.elem=A,this.arr=Q,this.pos=E,this.elemsData=B,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(A),this.initModifierProperties(A,Q[E]);while(E>0)E-=1,this._elements.unshift(Q[E]);if(this.dynamicProperties.length)this.k=!0;else this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(A){var Q,E=A.length;for(Q=0;Q<E;Q+=1)if(A[Q]._processed=!1,A[Q].ty==="gr")this.resetElements(A[Q].it)},RepeaterModifier.prototype.cloneElements=function(A){var Q=JSON.parse(JSON.stringify(A));return this.resetElements(Q),Q},RepeaterModifier.prototype.changeGroupRender=function(A,Q){var E,B=A.length;for(E=0;E<B;E+=1)if(A[E]._render=Q,A[E].ty==="gr")this.changeGroupRender(A[E].it,Q)},RepeaterModifier.prototype.processShapes=function(A){var Q,E,B,I,C,K=!1;if(this._mdf||A){var J=Math.ceil(this.c.v);if(this._groups.length<J){while(this._groups.length<J){var U={it:this.cloneElements(this._elements),ty:"gr"};U.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,U),this._groups.splice(0,0,U),this._currentCopies+=1}this.elem.reloadShapes(),K=!0}C=0;var Y;for(B=0;B<=this._groups.length-1;B+=1){if(Y=C<J,this._groups[B]._render=Y,this.changeGroupRender(this._groups[B].it,Y),!Y){var H=this.elemsData[B].it,R=H[H.length-1];if(R.transform.op.v!==0)R.transform.op._mdf=!0,R.transform.op.v=0;else R.transform.op._mdf=!1}C+=1}this._currentCopies=J;var O=this.o.v,N=O%1,$=O>0?Math.floor(O):Math.ceil(O),L=this.pMatrix.props,W=this.rMatrix.props,Z=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var G=0;if(O>0){while(G<$)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),G+=1;if(N)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,N,!1),G+=N}else if(O<0){while(G>$)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),G-=1;if(N)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-N,!0),G-=N}B=this.data.m===1?0:this._currentCopies-1,I=this.data.m===1?1:-1,C=this._currentCopies;var X,q;while(C){if(Q=this.elemsData[B].it,E=Q[Q.length-1].transform.mProps.v.props,q=E.length,Q[Q.length-1].transform.mProps._mdf=!0,Q[Q.length-1].transform.op._mdf=!0,Q[Q.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(B/(this._currentCopies-1)),G!==0){if(B!==0&&I===1||B!==this._currentCopies-1&&I===-1)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1);this.matrix.transform(W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],W[8],W[9],W[10],W[11],W[12],W[13],W[14],W[15]),this.matrix.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],Z[8],Z[9],Z[10],Z[11],Z[12],Z[13],Z[14],Z[15]),this.matrix.transform(L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],L[8],L[9],L[10],L[11],L[12],L[13],L[14],L[15]);for(X=0;X<q;X+=1)E[X]=this.matrix.props[X];this.matrix.reset()}else{this.matrix.reset();for(X=0;X<q;X+=1)E[X]=this.matrix.props[X]}G+=1,C-=1,B+=I}}else{C=this._currentCopies,B=0,I=1;while(C)Q=this.elemsData[B].it,E=Q[Q.length-1].transform.mProps.v.props,Q[Q.length-1].transform.mProps._mdf=!1,Q[Q.length-1].transform.op._mdf=!1,C-=1,B+=I}return K},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(A,Q){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(A,Q.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(A,Q){var E=shapePool.newElement();E.c=A.c;var B,I=A._length,C,K,J,U,Y,H,R=0,O,N,$,L,W,Z;for(B=0;B<I;B+=1)if(C=A.v[B],J=A.o[B],K=A.i[B],C[0]===J[0]&&C[1]===J[1]&&C[0]===K[0]&&C[1]===K[1])if((B===0||B===I-1)&&!A.c)E.setTripleAt(C[0],C[1],J[0],J[1],K[0],K[1],R),R+=1;else{if(B===0)U=A.v[I-1];else U=A.v[B-1];if(Y=Math.sqrt(Math.pow(C[0]-U[0],2)+Math.pow(C[1]-U[1],2)),H=Y?Math.min(Y/2,Q)/Y:0,W=C[0]+(U[0]-C[0])*H,O=W,Z=C[1]-(C[1]-U[1])*H,N=Z,$=O-(O-C[0])*roundCorner,L=N-(N-C[1])*roundCorner,E.setTripleAt(O,N,$,L,W,Z,R),R+=1,B===I-1)U=A.v[0];else U=A.v[B+1];Y=Math.sqrt(Math.pow(C[0]-U[0],2)+Math.pow(C[1]-U[1],2)),H=Y?Math.min(Y/2,Q)/Y:0,$=C[0]+(U[0]-C[0])*H,O=$,L=C[1]+(U[1]-C[1])*H,N=L,W=O-(O-C[0])*roundCorner,Z=N-(N-C[1])*roundCorner,E.setTripleAt(O,N,$,L,W,Z,R),R+=1}else E.setTripleAt(A.v[B][0],A.v[B][1],A.o[B][0],A.o[B][1],A.i[B][0],A.i[B][1],R),R+=1;return E},RoundCornersModifier.prototype.processShapes=function(A){var Q,E,B=this.shapes.length,I,C,K=this.rd.v;if(K!==0){var J,U;for(E=0;E<B;E+=1){if(J=this.shapes[E],U=J.localShapeCollection,!(!J.shape._mdf&&!this._mdf&&!A)){U.releaseShapes(),J.shape._mdf=!0,Q=J.shape.paths.shapes,C=J.shape.paths._length;for(I=0;I<C;I+=1)U.addShape(this.processPath(Q[I],K))}J.shape.paths=J.localShapeCollection}}if(!this.dynamicProperties.length)this._mdf=!1};let FontManager=function(){var A=5000,Q={w:0,size:0,shapes:[],data:{shapes:[]}},E=[];E=E.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var B=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],I=[65039,8205];function C(q){var M=q.split(","),F,D=M.length,_=[];for(F=0;F<D;F+=1)if(M[F]!=="sans-serif"&&M[F]!=="monospace")_.push(M[F]);return _.join(",")}function K(q,M){var F=createTag("span");F.setAttribute("aria-hidden",!0),F.style.fontFamily=M;var D=createTag("span");D.innerText="giItT1WQy@!-/#",F.style.position="absolute",F.style.left="-10000px",F.style.top="-10000px",F.style.fontSize="300px",F.style.fontVariant="normal",F.style.fontStyle="normal",F.style.fontWeight="normal",F.style.letterSpacing="0",F.appendChild(D),document.body.appendChild(F);var _=D.offsetWidth;return D.style.fontFamily=C(q)+", "+M,{node:D,w:_,parent:F}}function J(){var q,M=this.fonts.length,F,D,_=M;for(q=0;q<M;q+=1)if(this.fonts[q].loaded)_-=1;else if(this.fonts[q].fOrigin==="n"||this.fonts[q].origin===0)this.fonts[q].loaded=!0;else{if(F=this.fonts[q].monoCase.node,D=this.fonts[q].monoCase.w,F.offsetWidth!==D)_-=1,this.fonts[q].loaded=!0;else if(F=this.fonts[q].sansCase.node,D=this.fonts[q].sansCase.w,F.offsetWidth!==D)_-=1,this.fonts[q].loaded=!0;if(this.fonts[q].loaded)this.fonts[q].sansCase.parent.parentNode.removeChild(this.fonts[q].sansCase.parent),this.fonts[q].monoCase.parent.parentNode.removeChild(this.fonts[q].monoCase.parent)}if(_!==0&&Date.now()-this.initTime<A)setTimeout(this.checkLoadedFontsBinded,20);else setTimeout(this.setIsLoadedBinded,10)}function U(q,M){var F=document.body&&M?"svg":"canvas",D,_=getFontProperties(q);if(F==="svg"){var w=createNS("text");if(w.style.fontSize="100px",w.setAttribute("font-family",q.fFamily),w.setAttribute("font-style",_.style),w.setAttribute("font-weight",_.weight),w.textContent="1",q.fClass)w.style.fontFamily="inherit",w.setAttribute("class",q.fClass);else w.style.fontFamily=q.fFamily;M.appendChild(w),D=w}else{var k=new OffscreenCanvas(500,500).getContext("2d");k.font=_.style+" "+_.weight+" 100px "+q.fFamily,D=k}function T(z){if(F==="svg")return D.textContent=z,D.getComputedTextLength();return D.measureText(z).width}return{measureText:T}}function Y(q,M){if(!q){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=q.list;return}if(!document.body){this.isLoaded=!0,q.list.forEach((P)=>{P.helper=U(P),P.cache={}}),this.fonts=q.list;return}var F=q.list,D,_=F.length,w=_;for(D=0;D<_;D+=1){var k=!0,T,z;if(F[D].loaded=!1,F[D].monoCase=K(F[D].fFamily,"monospace"),F[D].sansCase=K(F[D].fFamily,"sans-serif"),!F[D].fPath)F[D].loaded=!0,w-=1;else if(F[D].fOrigin==="p"||F[D].origin===3){if(T=document.querySelectorAll('style[f-forigin="p"][f-family="'+F[D].fFamily+'"], style[f-origin="3"][f-family="'+F[D].fFamily+'"]'),T.length>0)k=!1;if(k){var j=createTag("style");j.setAttribute("f-forigin",F[D].fOrigin),j.setAttribute("f-origin",F[D].origin),j.setAttribute("f-family",F[D].fFamily),j.type="text/css",j.innerText="@font-face {font-family: "+F[D].fFamily+"; font-style: normal; src: url('"+F[D].fPath+"');}",M.appendChild(j)}}else if(F[D].fOrigin==="g"||F[D].origin===1){T=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]');for(z=0;z<T.length;z+=1)if(T[z].href.indexOf(F[D].fPath)!==-1)k=!1;if(k){var v=createTag("link");v.setAttribute("f-forigin",F[D].fOrigin),v.setAttribute("f-origin",F[D].origin),v.type="text/css",v.rel="stylesheet",v.href=F[D].fPath,document.body.appendChild(v)}}else if(F[D].fOrigin==="t"||F[D].origin===2){T=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]');for(z=0;z<T.length;z+=1)if(F[D].fPath===T[z].src)k=!1;if(k){var g=createTag("link");g.setAttribute("f-forigin",F[D].fOrigin),g.setAttribute("f-origin",F[D].origin),g.setAttribute("rel","stylesheet"),g.setAttribute("href",F[D].fPath),M.appendChild(g)}}F[D].helper=U(F[D],M),F[D].cache={},this.fonts.push(F[D])}if(w===0)this.isLoaded=!0;else setTimeout(this.checkLoadedFonts.bind(this),100)}function H(q){if(!q)return;if(!this.chars)this.chars=[];var M,F=q.length,D,_=this.chars.length,w;for(M=0;M<F;M+=1){D=0,w=!1;while(D<_){if(this.chars[D].style===q[M].style&&this.chars[D].fFamily===q[M].fFamily&&this.chars[D].ch===q[M].ch)w=!0;D+=1}if(!w)this.chars.push(q[M]),_+=1}}function R(q,M,F){var D=0,_=this.chars.length;while(D<_){if(this.chars[D].ch===q&&this.chars[D].style===M&&this.chars[D].fFamily===F)return this.chars[D];D+=1}if((typeof q==="string"&&q.charCodeAt(0)!==13||!q)&&console&&console.warn&&!this._warned)this._warned=!0,console.warn("Missing character from exported characters list: ",q,M,F);return Q}function O(q,M,F){var D=this.getFontByName(M),_=q.charCodeAt(0);if(!D.cache[_+1]){var w=D.helper;if(q===" "){var k=w.measureText("|"+q+"|"),T=w.measureText("||");D.cache[_+1]=(k-T)/100}else D.cache[_+1]=w.measureText(q)/100}return D.cache[_+1]*F}function N(q){var M=0,F=this.fonts.length;while(M<F){if(this.fonts[M].fName===q)return this.fonts[M];M+=1}return this.fonts[0]}function $(q,M){var F=q.toString(16)+M.toString(16);return B.indexOf(F)!==-1}function L(q,M){if(!M)return q===I[1];return q===I[0]&&M===I[1]}function W(q){return E.indexOf(q)!==-1}function Z(){this.isLoaded=!0}var G=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};G.isModifier=$,G.isZeroWidthJoiner=L,G.isCombinedCharacter=W;var X={addChars:H,addFonts:Y,getCharData:R,getFontByName:N,measureText:O,checkLoadedFonts:J,setIsLoaded:Z};return G.prototype=X,G}();RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(A){if(this.renderableComponents.indexOf(A)===-1)this.renderableComponents.push(A)},removeRenderableComponent:function(A){if(this.renderableComponents.indexOf(A)!==-1)this.renderableComponents.splice(this.renderableComponents.indexOf(A),1)},prepareRenderableFrame:function(A){this.checkLayerLimits(A)},checkTransparency:function(){if(this.finalTransform.mProp.o.v<=0){if(!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent)this.isTransparent=!0,this.hide()}else if(this.isTransparent)this.isTransparent=!1,this.show()},checkLayerLimits:function(A){if(this.data.ip-this.data.st<=A&&this.data.op-this.data.st>A){if(this.isInRange!==!0)this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()}else if(this.isInRange!==!1)this.globalData._mdf=!0,this.isInRange=!1,this.hide()},renderRenderable:function(){var A,Q=this.renderableComponents.length;for(A=0;A<Q;A+=1)this.renderableComponents[A].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){if(this.data.ty===5)return{w:this.data.textData.width,h:this.data.textData.height};return{w:this.data.width,h:this.data.height}}};let MaskManagerInterface=function(){function A(E,B){this._mask=E,this._data=B}Object.defineProperty(A.prototype,"maskPath",{get:function(){if(this._mask.prop.k)this._mask.prop.getValue();return this._mask.prop}}),Object.defineProperty(A.prototype,"maskOpacity",{get:function(){if(this._mask.op.k)this._mask.op.getValue();return this._mask.op.v*100}});var Q=function(E){var B=createSizedArray(E.viewData.length),I,C=E.viewData.length;for(I=0;I<C;I+=1)B[I]=new A(E.viewData[I],E.masksProperties[I]);var K=function(J){I=0;while(I<C){if(E.masksProperties[I].nm===J)return B[I];I+=1}return null};return K};return Q}(),ExpressionPropertyInterface=function(){var A={pv:0,v:0,mult:1},Q={pv:[0,0,0],v:[0,0,0],mult:1};function E(K,J,U){Object.defineProperty(K,"velocity",{get:function(){return J.getVelocityAtTime(J.comp.currentFrame)}}),K.numKeys=J.keyframes?J.keyframes.length:0,K.key=function(Y){if(!K.numKeys)return 0;var H="";if("s"in J.keyframes[Y-1])H=J.keyframes[Y-1].s;else if("e"in J.keyframes[Y-2])H=J.keyframes[Y-2].e;else H=J.keyframes[Y-2].s;var R=U==="unidimensional"?new Number(H):Object.assign({},H);return R.time=J.keyframes[Y-1].t/J.elem.comp.globalData.frameRate,R.value=U==="unidimensional"?H[0]:H,R},K.valueAtTime=J.getValueAtTime,K.speedAtTime=J.getSpeedAtTime,K.velocityAtTime=J.getVelocityAtTime,K.propertyGroup=J.propertyGroup}function B(K){if(!K||!("pv"in K))K=A;var J=1/K.mult,U=K.pv*J,Y=new Number(U);return Y.value=U,E(Y,K,"unidimensional"),function(){if(K.k)K.getValue();if(U=K.v*J,Y.value!==U)Y=new Number(U),Y.value=U,E(Y,K,"unidimensional");return Y}}function I(K){if(!K||!("pv"in K))K=Q;var J=1/K.mult,U=K.data&&K.data.l||K.pv.length,Y=createTypedArray("float32",U),H=createTypedArray("float32",U);return Y.value=H,E(Y,K,"multidimensional"),function(){if(K.k)K.getValue();for(var R=0;R<U;R+=1)H[R]=K.v[R]*J,Y[R]=H[R];return Y}}function C(){return A}return function(K){if(!K)return C;if(K.propType==="unidimensional")return B(K);return I(K)}}(),TransformExpressionInterface=function(){return function(A){function Q(K){switch(K){case"scale":case"Scale":case"ADBE Scale":case 6:return Q.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return Q.rotation;case"ADBE Rotate X":return Q.xRotation;case"ADBE Rotate Y":return Q.yRotation;case"position":case"Position":case"ADBE Position":case 2:return Q.position;case"ADBE Position_0":return Q.xPosition;case"ADBE Position_1":return Q.yPosition;case"ADBE Position_2":return Q.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return Q.anchorPoint;case"opacity":case"Opacity":case 11:return Q.opacity;default:return null}}Object.defineProperty(Q,"rotation",{get:ExpressionPropertyInterface(A.r||A.rz)}),Object.defineProperty(Q,"zRotation",{get:ExpressionPropertyInterface(A.rz||A.r)}),Object.defineProperty(Q,"xRotation",{get:ExpressionPropertyInterface(A.rx)}),Object.defineProperty(Q,"yRotation",{get:ExpressionPropertyInterface(A.ry)}),Object.defineProperty(Q,"scale",{get:ExpressionPropertyInterface(A.s)});var E,B,I,C;if(A.p)C=ExpressionPropertyInterface(A.p);else if(E=ExpressionPropertyInterface(A.px),B=ExpressionPropertyInterface(A.py),A.pz)I=ExpressionPropertyInterface(A.pz);return Object.defineProperty(Q,"position",{get:function(){if(A.p)return C();return[E(),B(),I?I():0]}}),Object.defineProperty(Q,"xPosition",{get:ExpressionPropertyInterface(A.px)}),Object.defineProperty(Q,"yPosition",{get:ExpressionPropertyInterface(A.py)}),Object.defineProperty(Q,"zPosition",{get:ExpressionPropertyInterface(A.pz)}),Object.defineProperty(Q,"anchorPoint",{get:ExpressionPropertyInterface(A.a)}),Object.defineProperty(Q,"opacity",{get:ExpressionPropertyInterface(A.o)}),Object.defineProperty(Q,"skew",{get:ExpressionPropertyInterface(A.sk)}),Object.defineProperty(Q,"skewAxis",{get:ExpressionPropertyInterface(A.sa)}),Object.defineProperty(Q,"orientation",{get:ExpressionPropertyInterface(A.or)}),Q}}(),LayerExpressionInterface=function(){function A(Y){var H=new Matrix;if(Y!==void 0){var R=this._elem.finalTransform.mProp.getValueAtTime(Y);R.clone(H)}else{var O=this._elem.finalTransform.mProp;O.applyToMatrix(H)}return H}function Q(Y,H){var R=this.getMatrix(H);return R.props[12]=0,R.props[13]=0,R.props[14]=0,this.applyPoint(R,Y)}function E(Y,H){var R=this.getMatrix(H);return this.applyPoint(R,Y)}function B(Y,H){var R=this.getMatrix(H);return R.props[12]=0,R.props[13]=0,R.props[14]=0,this.invertPoint(R,Y)}function I(Y,H){var R=this.getMatrix(H);return this.invertPoint(R,Y)}function C(Y,H){if(this._elem.hierarchy&&this._elem.hierarchy.length){var R,O=this._elem.hierarchy.length;for(R=0;R<O;R+=1)this._elem.hierarchy[R].finalTransform.mProp.applyToMatrix(Y)}return Y.applyToPointArray(H[0],H[1],H[2]||0)}function K(Y,H){if(this._elem.hierarchy&&this._elem.hierarchy.length){var R,O=this._elem.hierarchy.length;for(R=0;R<O;R+=1)this._elem.hierarchy[R].finalTransform.mProp.applyToMatrix(Y)}return Y.inversePoint(H)}function J(Y){var H=new Matrix;if(H.reset(),this._elem.finalTransform.mProp.applyToMatrix(H),this._elem.hierarchy&&this._elem.hierarchy.length){var R,O=this._elem.hierarchy.length;for(R=0;R<O;R+=1)this._elem.hierarchy[R].finalTransform.mProp.applyToMatrix(H);return H.inversePoint(Y)}return H.inversePoint(Y)}function U(){return[1,1,1,1]}return function(Y){var H;function R(L){N.mask=new MaskManagerInterface(L,Y)}function O(L){N.effect=L}function N(L){switch(L){case"ADBE Root Vectors Group":case"Contents":case 2:return N.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return H;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return N.effect;case"ADBE Text Properties":return N.textInterface;default:return null}}N.getMatrix=A,N.invertPoint=K,N.applyPoint=C,N.toWorld=E,N.toWorldVec=Q,N.fromWorld=I,N.fromWorldVec=B,N.toComp=E,N.fromComp=J,N.sampleImage=U,N.sourceRectAtTime=Y.sourceRectAtTime.bind(Y),N._elem=Y,H=TransformExpressionInterface(Y.finalTransform.mProp);var $=getDescriptor(H,"anchorPoint");return Object.defineProperties(N,{hasParent:{get:function(){return Y.hierarchy.length}},parent:{get:function(){return Y.hierarchy[0].layerInterface}},rotation:getDescriptor(H,"rotation"),scale:getDescriptor(H,"scale"),position:getDescriptor(H,"position"),opacity:getDescriptor(H,"opacity"),anchorPoint:$,anchor_point:$,transform:{get:function(){return H}},active:{get:function(){return Y.isInRange}}}),N.startTime=Y.data.st,N.index=Y.data.ind,N.source=Y.data.refId,N.height=Y.data.ty===0?Y.data.h:100,N.width=Y.data.ty===0?Y.data.w:100,N.inPoint=Y.data.ip/Y.comp.globalData.frameRate,N.outPoint=Y.data.op/Y.comp.globalData.frameRate,N._name=Y.data.nm,N.registerMaskInterface=R,N.registerEffectsInterface=O,N}}(),propertyGroupFactory=function(){return function(A,Q){return function(E){if(E=E===void 0?1:E,E<=0)return A;return Q(E-1)}}}(),PropertyInterface=function(){return function(A,Q){var E={_name:A};function B(I){if(I=I===void 0?1:I,I<=0)return E;return Q(I-1)}return B}}(),EffectsExpressionInterface=function(){var A={createEffectsInterface:Q};function Q(I,C){if(I.effectsManager){var K=[],J=I.data.ef,U,Y=I.effectsManager.effectElements.length;for(U=0;U<Y;U+=1)K.push(E(J[U],I.effectsManager.effectElements[U],C,I));var H=I.data.ef||[],R=function(O){U=0,Y=H.length;while(U<Y){if(O===H[U].nm||O===H[U].mn||O===H[U].ix)return K[U];U+=1}return null};return Object.defineProperty(R,"numProperties",{get:function(){return H.length}}),R}return null}function E(I,C,K,J){function U(N){var $=I.ef,L=0,W=$.length;while(L<W){if(N===$[L].nm||N===$[L].mn||N===$[L].ix){if($[L].ty===5)return H[L];return H[L]()}L+=1}throw new Error}var Y=propertyGroupFactory(U,K),H=[],R,O=I.ef.length;for(R=0;R<O;R+=1)if(I.ef[R].ty===5)H.push(E(I.ef[R],C.effectElements[R],C.effectElements[R].propertyGroup,J));else H.push(B(C.effectElements[R],I.ef[R].ty,J,Y));if(I.mn==="ADBE Color Control")Object.defineProperty(U,"color",{get:function(){return H[0]()}});return Object.defineProperties(U,{numProperties:{get:function(){return I.np}},_name:{value:I.nm},propertyGroup:{value:Y}}),U.enabled=I.en!==0,U.active=U.enabled,U}function B(I,C,K,J){var U=ExpressionPropertyInterface(I.p);function Y(){if(C===10)return K.comp.compInterface(I.p.v);return U()}if(I.p.setGroupProperty)I.p.setGroupProperty(PropertyInterface("",J));return Y}return A}(),CompExpressionInterface=function(){return function(A){function Q(E){var B=0,I=A.layers.length;while(B<I){if(A.layers[B].nm===E||A.layers[B].ind===E)return A.elements[B].layerInterface;B+=1}return null}return Object.defineProperty(Q,"_name",{value:A.data.nm}),Q.layer=Q,Q.pixelAspect=1,Q.height=A.data.h||A.globalData.compSize.h,Q.width=A.data.w||A.globalData.compSize.w,Q.pixelAspect=1,Q.frameDuration=1/A.globalData.frameRate,Q.displayStartTime=0,Q.numLayers=A.layers.length,Q}}(),ShapePathInterface=function(){return function A(Q,E,B){var I=E.sh;function C(J){if(J==="Shape"||J==="shape"||J==="Path"||J==="path"||J==="ADBE Vector Shape"||J===2)return C.path;return null}var K=propertyGroupFactory(C,B);return I.setGroupProperty(PropertyInterface("Path",K)),Object.defineProperties(C,{path:{get:function(){if(I.k)I.getValue();return I}},shape:{get:function(){if(I.k)I.getValue();return I}},_name:{value:Q.nm},ix:{value:Q.ix},propertyIndex:{value:Q.ix},mn:{value:Q.mn},propertyGroup:{value:B}}),C}}(),ShapeExpressionInterface=function(){function A($,L,W){var Z=[],G,X=$?$.length:0;for(G=0;G<X;G+=1)if($[G].ty==="gr")Z.push(E($[G],L[G],W));else if($[G].ty==="fl")Z.push(B($[G],L[G],W));else if($[G].ty==="st")Z.push(K($[G],L[G],W));else if($[G].ty==="tm")Z.push(J($[G],L[G],W));else if($[G].ty==="tr");else if($[G].ty==="el")Z.push(Y($[G],L[G],W));else if($[G].ty==="sr")Z.push(H($[G],L[G],W));else if($[G].ty==="sh")Z.push(ShapePathInterface($[G],L[G],W));else if($[G].ty==="rc")Z.push(R($[G],L[G],W));else if($[G].ty==="rd")Z.push(O($[G],L[G],W));else if($[G].ty==="rp")Z.push(N($[G],L[G],W));else if($[G].ty==="gf")Z.push(I($[G],L[G],W));else Z.push(C($[G],L[G],W));return Z}function Q($,L,W){var Z,G=function q(M){var F=0,D=Z.length;while(F<D){if(Z[F]._name===M||Z[F].mn===M||Z[F].propertyIndex===M||Z[F].ix===M||Z[F].ind===M)return Z[F];F+=1}if(typeof M==="number")return Z[M-1];return null};G.propertyGroup=propertyGroupFactory(G,W),Z=A($.it,L.it,G.propertyGroup),G.numProperties=Z.length;var X=U($.it[$.it.length-1],L.it[L.it.length-1],G.propertyGroup);return G.transform=X,G.propertyIndex=$.cix,G._name=$.nm,G}function E($,L,W){var Z=function q(M){switch(M){case"ADBE Vectors Group":case"Contents":case 2:return Z.content;default:return Z.transform}};Z.propertyGroup=propertyGroupFactory(Z,W);var G=Q($,L,Z.propertyGroup),X=U($.it[$.it.length-1],L.it[L.it.length-1],Z.propertyGroup);return Z.content=G,Z.transform=X,Object.defineProperty(Z,"_name",{get:function(){return $.nm}}),Z.numProperties=$.np,Z.propertyIndex=$.ix,Z.nm=$.nm,Z.mn=$.mn,Z}function B($,L,W){function Z(G){if(G==="Color"||G==="color")return Z.color;if(G==="Opacity"||G==="opacity")return Z.opacity;return null}return Object.defineProperties(Z,{color:{get:ExpressionPropertyInterface(L.c)},opacity:{get:ExpressionPropertyInterface(L.o)},_name:{value:$.nm},mn:{value:$.mn}}),L.c.setGroupProperty(PropertyInterface("Color",W)),L.o.setGroupProperty(PropertyInterface("Opacity",W)),Z}function I($,L,W){function Z(G){if(G==="Start Point"||G==="start point")return Z.startPoint;if(G==="End Point"||G==="end point")return Z.endPoint;if(G==="Opacity"||G==="opacity")return Z.opacity;return null}return Object.defineProperties(Z,{startPoint:{get:ExpressionPropertyInterface(L.s)},endPoint:{get:ExpressionPropertyInterface(L.e)},opacity:{get:ExpressionPropertyInterface(L.o)},type:{get:function(){return"a"}},_name:{value:$.nm},mn:{value:$.mn}}),L.s.setGroupProperty(PropertyInterface("Start Point",W)),L.e.setGroupProperty(PropertyInterface("End Point",W)),L.o.setGroupProperty(PropertyInterface("Opacity",W)),Z}function C(){function $(){return null}return $}function K($,L,W){var Z=propertyGroupFactory(D,W),G=propertyGroupFactory(F,Z);function X(_){Object.defineProperty(F,$.d[_].nm,{get:ExpressionPropertyInterface(L.d.dataProps[_].p)})}var q,M=$.d?$.d.length:0,F={};for(q=0;q<M;q+=1)X(q),L.d.dataProps[q].p.setGroupProperty(G);function D(_){if(_==="Color"||_==="color")return D.color;if(_==="Opacity"||_==="opacity")return D.opacity;if(_==="Stroke Width"||_==="stroke width")return D.strokeWidth;return null}return Object.defineProperties(D,{color:{get:ExpressionPropertyInterface(L.c)},opacity:{get:ExpressionPropertyInterface(L.o)},strokeWidth:{get:ExpressionPropertyInterface(L.w)},dash:{get:function(){return F}},_name:{value:$.nm},mn:{value:$.mn}}),L.c.setGroupProperty(PropertyInterface("Color",Z)),L.o.setGroupProperty(PropertyInterface("Opacity",Z)),L.w.setGroupProperty(PropertyInterface("Stroke Width",Z)),D}function J($,L,W){function Z(X){if(X===$.e.ix||X==="End"||X==="end")return Z.end;if(X===$.s.ix)return Z.start;if(X===$.o.ix)return Z.offset;return null}var G=propertyGroupFactory(Z,W);return Z.propertyIndex=$.ix,L.s.setGroupProperty(PropertyInterface("Start",G)),L.e.setGroupProperty(PropertyInterface("End",G)),L.o.setGroupProperty(PropertyInterface("Offset",G)),Z.propertyIndex=$.ix,Z.propertyGroup=W,Object.defineProperties(Z,{start:{get:ExpressionPropertyInterface(L.s)},end:{get:ExpressionPropertyInterface(L.e)},offset:{get:ExpressionPropertyInterface(L.o)},_name:{value:$.nm}}),Z.mn=$.mn,Z}function U($,L,W){function Z(X){if($.a.ix===X||X==="Anchor Point")return Z.anchorPoint;if($.o.ix===X||X==="Opacity")return Z.opacity;if($.p.ix===X||X==="Position")return Z.position;if($.r.ix===X||X==="Rotation"||X==="ADBE Vector Rotation")return Z.rotation;if($.s.ix===X||X==="Scale")return Z.scale;if($.sk&&$.sk.ix===X||X==="Skew")return Z.skew;if($.sa&&$.sa.ix===X||X==="Skew Axis")return Z.skewAxis;return null}var G=propertyGroupFactory(Z,W);if(L.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",G)),L.transform.mProps.p.setGroupProperty(PropertyInterface("Position",G)),L.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",G)),L.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",G)),L.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",G)),L.transform.mProps.sk)L.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",G)),L.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",G));return L.transform.op.setGroupProperty(PropertyInterface("Opacity",G)),Object.defineProperties(Z,{opacity:{get:ExpressionPropertyInterface(L.transform.mProps.o)},position:{get:ExpressionPropertyInterface(L.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(L.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(L.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(L.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(L.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(L.transform.mProps.sa)},_name:{value:$.nm}}),Z.ty="tr",Z.mn=$.mn,Z.propertyGroup=W,Z}function Y($,L,W){function Z(q){if($.p.ix===q)return Z.position;if($.s.ix===q)return Z.size;return null}var G=propertyGroupFactory(Z,W);Z.propertyIndex=$.ix;var X=L.sh.ty==="tm"?L.sh.prop:L.sh;return X.s.setGroupProperty(PropertyInterface("Size",G)),X.p.setGroupProperty(PropertyInterface("Position",G)),Object.defineProperties(Z,{size:{get:ExpressionPropertyInterface(X.s)},position:{get:ExpressionPropertyInterface(X.p)},_name:{value:$.nm}}),Z.mn=$.mn,Z}function H($,L,W){function Z(q){if($.p.ix===q)return Z.position;if($.r.ix===q)return Z.rotation;if($.pt.ix===q)return Z.points;if($.or.ix===q||q==="ADBE Vector Star Outer Radius")return Z.outerRadius;if($.os.ix===q)return Z.outerRoundness;if($.ir&&($.ir.ix===q||q==="ADBE Vector Star Inner Radius"))return Z.innerRadius;if($.is&&$.is.ix===q)return Z.innerRoundness;return null}var G=propertyGroupFactory(Z,W),X=L.sh.ty==="tm"?L.sh.prop:L.sh;if(Z.propertyIndex=$.ix,X.or.setGroupProperty(PropertyInterface("Outer Radius",G)),X.os.setGroupProperty(PropertyInterface("Outer Roundness",G)),X.pt.setGroupProperty(PropertyInterface("Points",G)),X.p.setGroupProperty(PropertyInterface("Position",G)),X.r.setGroupProperty(PropertyInterface("Rotation",G)),$.ir)X.ir.setGroupProperty(PropertyInterface("Inner Radius",G)),X.is.setGroupProperty(PropertyInterface("Inner Roundness",G));return Object.defineProperties(Z,{position:{get:ExpressionPropertyInterface(X.p)},rotation:{get:ExpressionPropertyInterface(X.r)},points:{get:ExpressionPropertyInterface(X.pt)},outerRadius:{get:ExpressionPropertyInterface(X.or)},outerRoundness:{get:ExpressionPropertyInterface(X.os)},innerRadius:{get:ExpressionPropertyInterface(X.ir)},innerRoundness:{get:ExpressionPropertyInterface(X.is)},_name:{value:$.nm}}),Z.mn=$.mn,Z}function R($,L,W){function Z(q){if($.p.ix===q)return Z.position;if($.r.ix===q)return Z.roundness;if($.s.ix===q||q==="Size"||q==="ADBE Vector Rect Size")return Z.size;return null}var G=propertyGroupFactory(Z,W),X=L.sh.ty==="tm"?L.sh.prop:L.sh;return Z.propertyIndex=$.ix,X.p.setGroupProperty(PropertyInterface("Position",G)),X.s.setGroupProperty(PropertyInterface("Size",G)),X.r.setGroupProperty(PropertyInterface("Rotation",G)),Object.defineProperties(Z,{position:{get:ExpressionPropertyInterface(X.p)},roundness:{get:ExpressionPropertyInterface(X.r)},size:{get:ExpressionPropertyInterface(X.s)},_name:{value:$.nm}}),Z.mn=$.mn,Z}function O($,L,W){function Z(q){if($.r.ix===q||q==="Round Corners 1")return Z.radius;return null}var G=propertyGroupFactory(Z,W),X=L;return Z.propertyIndex=$.ix,X.rd.setGroupProperty(PropertyInterface("Radius",G)),Object.defineProperties(Z,{radius:{get:ExpressionPropertyInterface(X.rd)},_name:{value:$.nm}}),Z.mn=$.mn,Z}function N($,L,W){function Z(q){if($.c.ix===q||q==="Copies")return Z.copies;if($.o.ix===q||q==="Offset")return Z.offset;return null}var G=propertyGroupFactory(Z,W),X=L;return Z.propertyIndex=$.ix,X.c.setGroupProperty(PropertyInterface("Copies",G)),X.o.setGroupProperty(PropertyInterface("Offset",G)),Object.defineProperties(Z,{copies:{get:ExpressionPropertyInterface(X.c)},offset:{get:ExpressionPropertyInterface(X.o)},_name:{value:$.nm}}),Z.mn=$.mn,Z}return function($,L,W){var Z;function G(q){if(typeof q==="number"){if(q=q===void 0?1:q,q===0)return W;return Z[q-1]}var M=0,F=Z.length;while(M<F){if(Z[M]._name===q)return Z[M];M+=1}return null}function X(){return W}return G.propertyGroup=propertyGroupFactory(G,X),Z=A($,L,G.propertyGroup),G.numProperties=Z.length,G._name="Contents",G}}(),TextExpressionInterface=function(){return function(A){var Q,E;function B(I){switch(I){case"ADBE Text Document":return B.sourceText;default:return null}}return Object.defineProperty(B,"sourceText",{get:function(){A.textProperty.getValue();var I=A.textProperty.currentData.t;if(I!==Q)A.textProperty.currentData.t=Q,E=new String(I),E.value=I||new String(I);return E}}),B}}(),getBlendMode=function(){var A={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(Q){return A[Q]||""}}();extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(A,Q){this.data=A,this.effectElements=[],this.initDynamicPropertyContainer(Q);var E,B=this.data.ef.length,I,C=this.data.ef;for(E=0;E<B;E+=1){switch(I=null,C[E].ty){case 0:I=new SliderEffect(C[E],Q,this);break;case 1:I=new AngleEffect(C[E],Q,this);break;case 2:I=new ColorEffect(C[E],Q,this);break;case 3:I=new PointEffect(C[E],Q,this);break;case 4:case 7:I=new CheckboxEffect(C[E],Q,this);break;case 10:I=new LayerIndexEffect(C[E],Q,this);break;case 11:I=new MaskIndexEffect(C[E],Q,this);break;case 5:I=new EffectsManager(C[E],Q,this);break;default:I=new NoValueEffect(C[E],Q,this);break}if(I)this.effectElements.push(I)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;var A=0,Q=this.data.masksProperties.length;while(A<Q){if(this.data.masksProperties[A].mode!=="n"&&this.data.masksProperties[A].cl!==!1)return!0;A+=1}return!1},initExpressions:function(){if(this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager)this.layerInterface.registerMaskInterface(this.maskManager);var A=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);if(this.layerInterface.registerEffectsInterface(A),this.data.ty===0||this.data.xt)this.compInterface=CompExpressionInterface(this);else if(this.data.ty===4)this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface;else if(this.data.ty===5)this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface},setBlendMode:function(){var A=getBlendMode(this.data.bm),Q=this.baseElement||this.layerElement;Q.style["mix-blend-mode"]=A},initBaseData:function(A,Q,E){if(this.globalData=Q,this.comp=E,this.data=A,this.layerId=createElementID(),!this.data.sr)this.data.sr=1;this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(A,Q){var E,B=this.dynamicProperties.length;for(E=0;E<B;E+=1)if(Q||this._isParent&&this.dynamicProperties[E].propType==="transform"){if(this.dynamicProperties[E].getValue(),this.dynamicProperties[E]._mdf)this.globalData._mdf=!0,this._mdf=!0}},addDynamicProperty:function(A){if(this.dynamicProperties.indexOf(A)===-1)this.dynamicProperties.push(A)}};let FootageInterface=function(){var A=function(E){var B="",I=E.getFootageData();function C(){return B="",I=E.getFootageData(),K}function K(J){if(I[J]){if(B=J,I=I[J],typeof I==="object")return K;return I}var U=J.indexOf(B);if(U!==-1){var Y=parseInt(J.substr(U+B.length),10);if(I=I[Y],typeof I==="object")return K;return I}return""}return C},Q=function(E){function B(I){if(I==="Outline")return B.outlineInterface();return null}return B._name="Outline",B.outlineInterface=A(E),B};return function(E){function B(I){if(I==="Data")return B.dataInterface;return null}return B._name="Data",B.dataInterface=Q(E),B}}();FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(A){if(this.prepareRenderableFrame(A,!0),this.prepareProperties(A,!0),!this.tm._placeholder){var Q=this.tm.v;this._currentTime=Q}else this._currentTime=A/this.data.sr;this._volume=this.lv.v[0];var E=this._volume*this._volumeMultiplier;if(this._previousVolume!==E)this._previousVolume=E,this.audio.volume(E)},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){if(this.isInRange&&this._canPlay){if(!this._isPlaying)this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0;else if(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>0.1)this.audio.seek(this._currentTime/this.globalData.frameRate)}},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(A){this.audio.rate(A)},AudioElement.prototype.volume=function(A){this._volumeMultiplier=A,this._previousVolume=A*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(A){var Q,E=this.layers.length,B;this.completeLayers=!0;for(Q=E-1;Q>=0;Q-=1){if(!this.elements[Q]){if(B=this.layers[Q],B.ip-B.st<=A-this.layers[Q].st&&B.op-B.st>A-this.layers[Q].st)this.buildItem(Q)}this.completeLayers=this.elements[Q]?this.completeLayers:!1}this.checkPendingElements()},BaseRenderer.prototype.createItem=function(A){switch(A.ty){case 2:return this.createImage(A);case 0:return this.createComp(A);case 1:return this.createSolid(A);case 3:return this.createNull(A);case 4:return this.createShape(A);case 5:return this.createText(A);case 6:return this.createAudio(A);case 13:return this.createCamera(A);case 15:return this.createFootage(A);default:return this.createNull(A)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(A){return new AudioElement(A,this.globalData,this)},BaseRenderer.prototype.createFootage=function(A){return new FootageElement(A,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var A,Q=this.layers.length;for(A=0;A<Q;A+=1)this.buildItem(A);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(A){this.completeLayers=!1;var Q,E=A.length,B,I=this.layers.length;for(Q=0;Q<E;Q+=1){B=0;while(B<I){if(this.layers[B].id===A[Q].id){this.layers[B]=A[Q];break}B+=1}}},BaseRenderer.prototype.setProjectInterface=function(A){this.globalData.projectInterface=A},BaseRenderer.prototype.initItems=function(){if(!this.globalData.progressiveLoad)this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(A,Q,E){var B=this.elements,I=this.layers,C=0,K=I.length;while(C<K){if(I[C].ind==Q)if(!B[C]||B[C]===!0)this.buildItem(C),this.addPendingElement(A);else if(E.push(B[C]),B[C].setAsParent(),I[C].parent!==void 0)this.buildElementParenting(A,I[C].parent,E);else A.setHierarchy(E);C+=1}},BaseRenderer.prototype.addPendingElement=function(A){this.pendingElements.push(A)},BaseRenderer.prototype.searchExtraCompositions=function(A){var Q,E=A.length;for(Q=0;Q<E;Q+=1)if(A[Q].xt){var B=this.createComp(A[Q]);B.initExpressions(),this.globalData.projectInterface.registerComposition(B)}},BaseRenderer.prototype.getElementByPath=function(A){var Q=A.shift(),E;if(typeof Q==="number")E=this.elements[Q];else{var B,I=this.elements.length;for(B=0;B<I;B+=1)if(this.elements[B].data.nm===Q){E=this.elements[B];break}}if(A.length===0)return E;return E.getElementByPath(A)},BaseRenderer.prototype.setupGlobalData=function(A,Q){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(A.chars),this.globalData.fontManager.addFonts(A.fonts,Q),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=A.fr,this.globalData.nm=A.nm,this.globalData.compSize={w:A.w,h:A.h}},TransformElement.prototype={initTransform:function(){if(this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao)this.finalTransform.mProp.autoOriented=!0;if(this.data.ty!==11);},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var A,Q=this.finalTransform.mat,E=0,B=this.hierarchy.length;if(!this.finalTransform._matMdf)while(E<B){if(this.hierarchy[E].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}E+=1}if(this.finalTransform._matMdf){A=this.finalTransform.mProp.v.props,Q.cloneFromProps(A);for(E=0;E<B;E+=1)A=this.hierarchy[E].finalTransform.mProp.v.props,Q.transform(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8],A[9],A[10],A[11],A[12],A[13],A[14],A[15])}}},globalToLocal:function(A){var Q=[];Q.push(this.finalTransform);var E=!0,B=this.comp;while(E)if(B.finalTransform){if(B.data.hasMask)Q.splice(0,0,B.finalTransform);B=B.comp}else E=!1;var I,C=Q.length,K;for(I=0;I<C;I+=1)K=Q[I].mat.applyToPointArray(0,0,0),A=[A[0]-K[0],A[1]-K[1],0];return A},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(A){return this.viewData[A].prop},MaskElement.prototype.renderFrame=function(A){var Q=this.element.finalTransform.mat,E,B=this.masksProperties.length;for(E=0;E<B;E+=1){if(this.viewData[E].prop._mdf||A)this.drawPath(this.masksProperties[E],this.viewData[E].prop.v,this.viewData[E]);if(this.viewData[E].op._mdf||A)this.viewData[E].elem.setAttribute("fill-opacity",this.viewData[E].op.v);if(this.masksProperties[E].mode!=="n"){if(this.viewData[E].invRect&&(this.element.finalTransform.mProp._mdf||A))this.viewData[E].invRect.setAttribute("transform",Q.getInverseMatrix().to2dCSS());if(this.storedData[E].x&&(this.storedData[E].x._mdf||A)){var I=this.storedData[E].expan;if(this.storedData[E].x.v<0){if(this.storedData[E].lastOperator!=="erode")this.storedData[E].lastOperator="erode",this.storedData[E].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[E].filterId+")");I.setAttribute("radius",-this.storedData[E].x.v)}else{if(this.storedData[E].lastOperator!=="dilate")this.storedData[E].lastOperator="dilate",this.storedData[E].elem.setAttribute("filter",null);this.storedData[E].elem.setAttribute("stroke-width",this.storedData[E].x.v*2)}}}}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var A="M0,0 ";return A+=" h"+this.globalData.compSize.w,A+=" v"+this.globalData.compSize.h,A+=" h-"+this.globalData.compSize.w,A+=" v-"+this.globalData.compSize.h+" ",A},MaskElement.prototype.drawPath=function(A,Q,E){var B=" M"+Q.v[0][0]+","+Q.v[0][1],I,C;C=Q._length;for(I=1;I<C;I+=1)B+=" C"+Q.o[I-1][0]+","+Q.o[I-1][1]+" "+Q.i[I][0]+","+Q.i[I][1]+" "+Q.v[I][0]+","+Q.v[I][1];if(Q.c&&C>1)B+=" C"+Q.o[I-1][0]+","+Q.o[I-1][1]+" "+Q.i[0][0]+","+Q.i[0][1]+" "+Q.v[0][0]+","+Q.v[0][1];if(E.lastPath!==B){var K="";if(E.elem){if(Q.c)K=A.inv?this.solidPath+B:B;E.elem.setAttribute("d",K)}E.lastPath=B}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};let filtersFactory=function(){var A={};A.createFilter=Q,A.createAlphaToLuminanceFilter=E;function Q(B,I){var C=createNS("filter");if(C.setAttribute("id",B),I!==!0)C.setAttribute("filterUnits","objectBoundingBox"),C.setAttribute("x","0%"),C.setAttribute("y","0%"),C.setAttribute("width","100%"),C.setAttribute("height","100%");return C}function E(){var B=createNS("feColorMatrix");return B.setAttribute("type","matrix"),B.setAttribute("color-interpolation-filters","sRGB"),B.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),B}return A}(),featureSupport=function(){var A={maskType:!0};if(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))A.maskType=!1;return A}();registeredEffects={},idPrefix="filter_result_",SVGEffects.prototype.renderFrame=function(A){var Q,E=this.filters.length;for(Q=0;Q<E;Q+=1)this.filters[Q].renderFrame(A)},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var A=null,Q,E,B;if(this.data.td){if(this.data.td==3||this.data.td==1){var I=createNS("mask");if(I.setAttribute("id",this.layerId),I.setAttribute("mask-type",this.data.td==3?"luminance":"alpha"),I.appendChild(this.layerElement),A=I,this.globalData.defs.appendChild(I),!featureSupport.maskType&&this.data.td==1)I.setAttribute("mask-type","luminance"),Q=createElementID(),E=filtersFactory.createFilter(Q),this.globalData.defs.appendChild(E),E.appendChild(filtersFactory.createAlphaToLuminanceFilter()),B=createNS("g"),B.appendChild(this.layerElement),A=B,I.appendChild(B),B.setAttribute("filter","url("+getLocationHref()+"#"+Q+")")}else if(this.data.td==2){var C=createNS("mask");C.setAttribute("id",this.layerId),C.setAttribute("mask-type","alpha");var K=createNS("g");C.appendChild(K),Q=createElementID(),E=filtersFactory.createFilter(Q);var J=createNS("feComponentTransfer");J.setAttribute("in","SourceGraphic"),E.appendChild(J);var U=createNS("feFuncA");U.setAttribute("type","table"),U.setAttribute("tableValues","1.0 0.0"),J.appendChild(U),this.globalData.defs.appendChild(E);var Y=createNS("rect");if(Y.setAttribute("width",this.comp.data.w),Y.setAttribute("height",this.comp.data.h),Y.setAttribute("x","0"),Y.setAttribute("y","0"),Y.setAttribute("fill","#ffffff"),Y.setAttribute("opacity","0"),K.setAttribute("filter","url("+getLocationHref()+"#"+Q+")"),K.appendChild(Y),K.appendChild(this.layerElement),A=K,!featureSupport.maskType)C.setAttribute("mask-type","luminance"),E.appendChild(filtersFactory.createAlphaToLuminanceFilter()),B=createNS("g"),K.appendChild(Y),B.appendChild(this.layerElement),A=B,K.appendChild(B);this.globalData.defs.appendChild(C)}}else if(this.data.tt)this.matteElement.appendChild(this.layerElement),A=this.matteElement,this.baseElement=this.matteElement;else this.baseElement=this.layerElement;if(this.data.ln)this.layerElement.setAttribute("id",this.data.ln);if(this.data.cl)this.layerElement.setAttribute("class",this.data.cl);if(this.data.ty===0&&!this.data.hd){var H=createNS("clipPath"),R=createNS("path");R.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var O=createElementID();if(H.setAttribute("id",O),H.appendChild(R),this.globalData.defs.appendChild(H),this.checkMasks()){var N=createNS("g");if(N.setAttribute("clip-path","url("+getLocationHref()+"#"+O+")"),N.appendChild(this.layerElement),this.transformedElement=N,A)A.appendChild(this.transformedElement);else this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+O+")")}if(this.data.bm!==0)this.setBlendMode()},renderElement:function(){if(this.finalTransform._matMdf)this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS());if(this.finalTransform._opMdf)this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){if(this.data.hd)return null;return this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(A){if(!this.matteElement)return;this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+A+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(A){this.hierarchy=A},setAsParent:function(){this._isParent=!0},checkParenting:function(){if(this.data.parent!==void 0)this.comp.buildElementParenting(this,this.data.parent,[])}},function(){var A={initElement:function(Q,E,B){this.initFrame(),this.initBaseData(Q,E,B),this.initTransform(Q,E,B),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var Q=this.baseElement||this.layerElement;Q.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var Q=this.baseElement||this.layerElement;Q.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){if(this.data.hd||this.hidden)return;if(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame)this._isFirstFrame=!1},renderInnerContent:function(){},prepareFrame:function(Q){this._mdf=!1,this.prepareRenderableFrame(Q),this.prepareProperties(Q,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(A)],RenderableDOMElement)}(),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var A=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",A),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(A){var Q,E=this.shapeModifiers.length;for(Q=0;Q<E;Q+=1)this.shapeModifiers[Q].addShape(A)},isShapeInAnimatedModifiers:function(A){var Q=0,E=this.shapeModifiers.length;while(Q<E)if(this.shapeModifiers[Q].isAnimatedWithShape(A))return!0;return!1},renderModifiers:function(){if(!this.shapeModifiers.length)return;var A,Q=this.shapes.length;for(A=0;A<Q;A+=1)this.shapes[A].sh.reset();Q=this.shapeModifiers.length;var E;for(A=Q-1;A>=0;A-=1)if(E=this.shapeModifiers[A].processShapes(this._isFirstFrame),E)break},searchProcessedElement:function(A){var Q=this.processedElements,E=0,B=Q.length;while(E<B){if(Q[E].elem===A)return Q[E].pos;E+=1}return 0},addProcessedElement:function(A,Q){var E=this.processedElements,B=E.length;while(B)if(B-=1,E[B].elem===A){E[B].pos=Q;return}E.push(new ProcessedElement(A,Q))},prepareFrame:function(A){this.prepareRenderableFrame(A),this.prepareProperties(A,this.isInRange)}};let lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(A){if(this.elem.globalData.frameId===this.frameId&&!A)return;if(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||A,this._mdf){var Q=0,E=this.dataProps.length;if(this.renderer==="svg")this.dashStr="";for(Q=0;Q<E;Q+=1)if(this.dataProps[Q].n!=="o")if(this.renderer==="svg")this.dashStr+=" "+this.dataProps[Q].p.v;else this.dashArray[Q]=this.dataProps[Q].p.v;else this.dashoffset[0]=this.dataProps[Q].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(A,Q){var E=0,B=this.o.length/2,I;while(E<B){if(I=Math.abs(A[E*4]-A[Q*4+E*2]),I>0.01)return!1;E+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s){var A=0,Q=this.data.k.k.length;while(A<Q){if(!this.comparePoints(this.data.k.k[A].s,this.data.p))return!1;A+=1}}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(A){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||A){var Q,E=this.data.p*4,B,I;for(Q=0;Q<E;Q+=1)if(B=Q%4===0?100:255,I=Math.round(this.prop.v[Q]*B),this.c[Q]!==I)this.c[Q]=I,this._cmdf=!A;if(this.o.length){E=this.prop.v.length;for(Q=this.data.p*4;Q<E;Q+=1)if(B=Q%2===0?100:1,I=Q%2===0?Math.round(this.prop.v[Q]*100):this.prop.v[Q],this.o[Q-this.data.p*4]!==I)this.o[Q-this.data.p*4]=I,this._omdf=!A}this._mdf=!A}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(A,Q,E){this.o=PropertyFactory.getProp(A,Q.o,0,0.01,this),this.s=PropertyFactory.getProp(A,Q.s,1,null,this),this.e=PropertyFactory.getProp(A,Q.e,1,null,this),this.h=PropertyFactory.getProp(A,Q.h||{k:0},0,0.01,this),this.a=PropertyFactory.getProp(A,Q.a||{k:0},0,degToRads,this),this.g=new GradientProperty(A,Q.g,this),this.style=E,this.stops=[],this.setGradientData(E.pElem,Q),this.setGradientOpacity(Q,E),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(A,Q){var E=createElementID(),B=createNS(Q.t===1?"linearGradient":"radialGradient");B.setAttribute("id",E),B.setAttribute("spreadMethod","pad"),B.setAttribute("gradientUnits","userSpaceOnUse");var I=[],C,K,J;J=Q.g.p*4;for(K=0;K<J;K+=4)C=createNS("stop"),B.appendChild(C),I.push(C);A.setAttribute(Q.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+E+")"),this.gf=B,this.cst=I},SVGGradientFillStyleData.prototype.setGradientOpacity=function(A,Q){if(this.g._hasOpacity&&!this.g._collapsable){var E,B,I,C=createNS("mask"),K=createNS("path");C.appendChild(K);var J=createElementID(),U=createElementID();C.setAttribute("id",U);var Y=createNS(A.t===1?"linearGradient":"radialGradient");Y.setAttribute("id",J),Y.setAttribute("spreadMethod","pad"),Y.setAttribute("gradientUnits","userSpaceOnUse"),I=A.g.k.k[0].s?A.g.k.k[0].s.length:A.g.k.k.length;var H=this.stops;for(B=A.g.p*4;B<I;B+=2)E=createNS("stop"),E.setAttribute("stop-color","rgb(255,255,255)"),Y.appendChild(E),H.push(E);if(K.setAttribute(A.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+J+")"),A.ty==="gs"){if(K.setAttribute("stroke-linecap",lineCapEnum[A.lc||2]),K.setAttribute("stroke-linejoin",lineJoinEnum[A.lj||2]),A.lj===1)K.setAttribute("stroke-miterlimit",A.ml)}this.of=Y,this.ms=C,this.ost=H,this.maskId=U,Q.msElem=K}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);let buildShapeString=function(A,Q,E,B){if(Q===0)return"";var{o:I,i:C,v:K}=A,J,U=" M"+B.applyToPointStringified(K[0][0],K[0][1]);for(J=1;J<Q;J+=1)U+=" C"+B.applyToPointStringified(I[J-1][0],I[J-1][1])+" "+B.applyToPointStringified(C[J][0],C[J][1])+" "+B.applyToPointStringified(K[J][0],K[J][1]);if(E&&Q)U+=" C"+B.applyToPointStringified(I[J-1][0],I[J-1][1])+" "+B.applyToPointStringified(C[0][0],C[0][1])+" "+B.applyToPointStringified(K[0][0],K[0][1]),U+="z";return U},SVGElementsRenderer=function(){var A=new Matrix,Q=new Matrix,E={createRenderFunction:B};function B(R){switch(R.ty){case"fl":return J;case"gf":return Y;case"gs":return U;case"st":return H;case"sh":case"el":case"rc":case"sr":return K;case"tr":return I;case"no":return C;default:return null}}function I(R,O,N){if(N||O.transform.op._mdf)O.transform.container.setAttribute("opacity",O.transform.op.v);if(N||O.transform.mProps._mdf)O.transform.container.setAttribute("transform",O.transform.mProps.v.to2dCSS())}function C(){}function K(R,O,N){var $,L,W,Z,G,X,q=O.styles.length,M=O.lvl,F,D,_,w,k;for(X=0;X<q;X+=1){if(Z=O.sh._mdf||N,O.styles[X].lvl<M){D=Q.reset(),w=M-O.styles[X].lvl,k=O.transformers.length-1;while(!Z&&w>0)Z=O.transformers[k].mProps._mdf||Z,w-=1,k-=1;if(Z){w=M-O.styles[X].lvl,k=O.transformers.length-1;while(w>0)_=O.transformers[k].mProps.v.props,D.transform(_[0],_[1],_[2],_[3],_[4],_[5],_[6],_[7],_[8],_[9],_[10],_[11],_[12],_[13],_[14],_[15]),w-=1,k-=1}}else D=A;if(F=O.sh.paths,L=F._length,Z){W="";for($=0;$<L;$+=1)if(G=F.shapes[$],G&&G._length)W+=buildShapeString(G,G._length,G.c,D);O.caches[X]=W}else W=O.caches[X];O.styles[X].d+=R.hd===!0?"":W,O.styles[X]._mdf=Z||O.styles[X]._mdf}}function J(R,O,N){var $=O.style;if(O.c._mdf||N)$.pElem.setAttribute("fill","rgb("+bmFloor(O.c.v[0])+","+bmFloor(O.c.v[1])+","+bmFloor(O.c.v[2])+")");if(O.o._mdf||N)$.pElem.setAttribute("fill-opacity",O.o.v)}function U(R,O,N){Y(R,O,N),H(R,O,N)}function Y(R,O,N){var $=O.gf,L=O.g._hasOpacity,W=O.s.v,Z=O.e.v;if(O.o._mdf||N){var G=R.ty==="gf"?"fill-opacity":"stroke-opacity";O.style.pElem.setAttribute(G,O.o.v)}if(O.s._mdf||N){var X=R.t===1?"x1":"cx",q=X==="x1"?"y1":"cy";if($.setAttribute(X,W[0]),$.setAttribute(q,W[1]),L&&!O.g._collapsable)O.of.setAttribute(X,W[0]),O.of.setAttribute(q,W[1])}var M,F,D,_;if(O.g._cmdf||N){M=O.cst;var w=O.g.c;D=M.length;for(F=0;F<D;F+=1)_=M[F],_.setAttribute("offset",w[F*4]+"%"),_.setAttribute("stop-color","rgb("+w[F*4+1]+","+w[F*4+2]+","+w[F*4+3]+")")}if(L&&(O.g._omdf||N)){var k=O.g.o;if(O.g._collapsable)M=O.cst;else M=O.ost;D=M.length;for(F=0;F<D;F+=1){if(_=M[F],!O.g._collapsable)_.setAttribute("offset",k[F*2]+"%");_.setAttribute("stop-opacity",k[F*2+1])}}if(R.t===1){if(O.e._mdf||N){if($.setAttribute("x2",Z[0]),$.setAttribute("y2",Z[1]),L&&!O.g._collapsable)O.of.setAttribute("x2",Z[0]),O.of.setAttribute("y2",Z[1])}}else{var T;if(O.s._mdf||O.e._mdf||N){if(T=Math.sqrt(Math.pow(W[0]-Z[0],2)+Math.pow(W[1]-Z[1],2)),$.setAttribute("r",T),L&&!O.g._collapsable)O.of.setAttribute("r",T)}if(O.e._mdf||O.h._mdf||O.a._mdf||N){if(!T)T=Math.sqrt(Math.pow(W[0]-Z[0],2)+Math.pow(W[1]-Z[1],2));var z=Math.atan2(Z[1]-W[1],Z[0]-W[0]),j=O.h.v;if(j>=1)j=0.99;else if(j<=-1)j=-0.99;var v=T*j,g=Math.cos(z+O.a.v)*v+W[0],P=Math.sin(z+O.a.v)*v+W[1];if($.setAttribute("fx",g),$.setAttribute("fy",P),L&&!O.g._collapsable)O.of.setAttribute("fx",g),O.of.setAttribute("fy",P)}}}function H(R,O,N){var{style:$,d:L}=O;if(L&&(L._mdf||N)&&L.dashStr)$.pElem.setAttribute("stroke-dasharray",L.dashStr),$.pElem.setAttribute("stroke-dashoffset",L.dashoffset[0]);if(O.c&&(O.c._mdf||N))$.pElem.setAttribute("stroke","rgb("+bmFloor(O.c.v[0])+","+bmFloor(O.c.v[1])+","+bmFloor(O.c.v[2])+")");if(O.o._mdf||N)$.pElem.setAttribute("stroke-opacity",O.o.v);if(O.w._mdf||N){if($.pElem.setAttribute("stroke-width",O.w.v),$.msElem)$.msElem.setAttribute("stroke-width",O.w.v)}}return E}();extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var A,Q=this.shapes.length,E,B,I=this.stylesList.length,C,K=[],J=!1;for(B=0;B<I;B+=1){C=this.stylesList[B],J=!1,K.length=0;for(A=0;A<Q;A+=1)if(E=this.shapes[A],E.styles.indexOf(C)!==-1)K.push(E),J=E._isAnimated||J;if(K.length>1&&J)this.setShapesAsAnimated(K)}},SVGShapeElement.prototype.setShapesAsAnimated=function(A){var Q,E=A.length;for(Q=0;Q<E;Q+=1)A[Q].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(A,Q){var E,B=new SVGStyleData(A,Q),I=B.pElem;if(A.ty==="st")E=new SVGStrokeStyleData(this,A,B);else if(A.ty==="fl")E=new SVGFillStyleData(this,A,B);else if(A.ty==="gf"||A.ty==="gs"){var C=A.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;if(E=new C(this,A,B),this.globalData.defs.appendChild(E.gf),E.maskId)this.globalData.defs.appendChild(E.ms),this.globalData.defs.appendChild(E.of),I.setAttribute("mask","url("+getLocationHref()+"#"+E.maskId+")")}else if(A.ty==="no")E=new SVGNoStyleData(this,A,B);if(A.ty==="st"||A.ty==="gs"){if(I.setAttribute("stroke-linecap",lineCapEnum[A.lc||2]),I.setAttribute("stroke-linejoin",lineJoinEnum[A.lj||2]),I.setAttribute("fill-opacity","0"),A.lj===1)I.setAttribute("stroke-miterlimit",A.ml)}if(A.r===2)I.setAttribute("fill-rule","evenodd");if(A.ln)I.setAttribute("id",A.ln);if(A.cl)I.setAttribute("class",A.cl);if(A.bm)I.style["mix-blend-mode"]=getBlendMode(A.bm);return this.stylesList.push(B),this.addToAnimatedContents(A,E),E},SVGShapeElement.prototype.createGroupElement=function(A){var Q=new ShapeGroupData;if(A.ln)Q.gr.setAttribute("id",A.ln);if(A.cl)Q.gr.setAttribute("class",A.cl);if(A.bm)Q.gr.style["mix-blend-mode"]=getBlendMode(A.bm);return Q},SVGShapeElement.prototype.createTransformElement=function(A,Q){var E=TransformPropertyFactory.getTransformProperty(this,A,this),B=new SVGTransformData(E,E.o,Q);return this.addToAnimatedContents(A,B),B},SVGShapeElement.prototype.createShapeElement=function(A,Q,E){var B=4;if(A.ty==="rc")B=5;else if(A.ty==="el")B=6;else if(A.ty==="sr")B=7;var I=ShapePropertyFactory.getShapeProp(this,A,B,this),C=new SVGShapeData(Q,E,I);return this.shapes.push(C),this.addShapeToModifiers(C),this.addToAnimatedContents(A,C),C},SVGShapeElement.prototype.addToAnimatedContents=function(A,Q){var E=0,B=this.animatedContents.length;while(E<B){if(this.animatedContents[E].element===Q)return;E+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(A),element:Q,data:A})},SVGShapeElement.prototype.setElementStyles=function(A){var Q=A.styles,E,B=this.stylesList.length;for(E=0;E<B;E+=1)if(!this.stylesList[E].closed)Q.push(this.stylesList[E])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var A,Q=this.itemsData.length;for(A=0;A<Q;A+=1)this.prevViewData[A]=this.itemsData[A];this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),Q=this.dynamicProperties.length;for(A=0;A<Q;A+=1)this.dynamicProperties[A].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(A,Q,E,B,I,C,K){var J=[].concat(C),U,Y=A.length-1,H,R,O=[],N=[],$,L,W;for(U=Y;U>=0;U-=1){if(W=this.searchProcessedElement(A[U]),!W)A[U]._render=K;else Q[U]=E[W-1];if(A[U].ty==="fl"||A[U].ty==="st"||A[U].ty==="gf"||A[U].ty==="gs"||A[U].ty==="no"){if(!W)Q[U]=this.createStyleElement(A[U],I);else Q[U].style.closed=!1;if(A[U]._render){if(Q[U].style.pElem.parentNode!==B)B.appendChild(Q[U].style.pElem)}O.push(Q[U].style)}else if(A[U].ty==="gr"){if(!W)Q[U]=this.createGroupElement(A[U]);else{R=Q[U].it.length;for(H=0;H<R;H+=1)Q[U].prevViewData[H]=Q[U].it[H]}if(this.searchShapes(A[U].it,Q[U].it,Q[U].prevViewData,Q[U].gr,I+1,J,K),A[U]._render){if(Q[U].gr.parentNode!==B)B.appendChild(Q[U].gr)}}else if(A[U].ty==="tr"){if(!W)Q[U]=this.createTransformElement(A[U],B);$=Q[U].transform,J.push($)}else if(A[U].ty==="sh"||A[U].ty==="rc"||A[U].ty==="el"||A[U].ty==="sr"){if(!W)Q[U]=this.createShapeElement(A[U],J,I);this.setElementStyles(Q[U])}else if(A[U].ty==="tm"||A[U].ty==="rd"||A[U].ty==="ms"||A[U].ty==="pb"){if(!W)L=ShapeModifiers.getModifier(A[U].ty),L.init(this,A[U]),Q[U]=L,this.shapeModifiers.push(L);else L=Q[U],L.closed=!1;N.push(L)}else if(A[U].ty==="rp"){if(!W)L=ShapeModifiers.getModifier(A[U].ty),Q[U]=L,L.init(this,A,U,Q),this.shapeModifiers.push(L),K=!1;else L=Q[U],L.closed=!0;N.push(L)}this.addProcessedElement(A[U],U+1)}Y=O.length;for(U=0;U<Y;U+=1)O[U].closed=!0;Y=N.length;for(U=0;U<Y;U+=1)N[U].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var A,Q=this.stylesList.length;for(A=0;A<Q;A+=1)this.stylesList[A].reset();this.renderShape();for(A=0;A<Q;A+=1)if(this.stylesList[A]._mdf||this._isFirstFrame){if(this.stylesList[A].msElem)this.stylesList[A].msElem.setAttribute("d",this.stylesList[A].d),this.stylesList[A].d="M0 0"+this.stylesList[A].d;this.stylesList[A].pElem.setAttribute("d",this.stylesList[A].d||"M0 0")}},SVGShapeElement.prototype.renderShape=function(){var A,Q=this.animatedContents.length,E;for(A=0;A<Q;A+=1)if(E=this.animatedContents[A],(this._isFirstFrame||E.element._isAnimated)&&E.data!==!0)E.fn(E.data,E.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(A,Q,E,B,I,C){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var K=!1;if(this.o!==A)this.o=A,this._mdf.o=!0,K=!0;if(this.sw!==Q)this.sw=Q,this._mdf.sw=!0,K=!0;if(this.sc!==E)this.sc=E,this._mdf.sc=!0,K=!0;if(this.fc!==B)this.fc=B,this._mdf.fc=!0,K=!0;if(this.m!==I)this.m=I,this._mdf.m=!0,K=!0;if(C.length&&(this.p[0]!==C[0]||this.p[1]!==C[1]||this.p[4]!==C[4]||this.p[5]!==C[5]||this.p[12]!==C[12]||this.p[13]!==C[13]))this.p=C,this._mdf.p=!0,K=!0;return K},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(A,Q){for(var E in Q)if(Object.prototype.hasOwnProperty.call(Q,E))A[E]=Q[E];return A},TextProperty.prototype.setCurrentData=function(A){if(!A.__complete)this.completeTextData(A);this.currentData=A,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){if(this.kf=this.data.d.k.length>1,this.kf)this.addEffect(this.getKeyframeValue.bind(this));return this.kf},TextProperty.prototype.addEffect=function(A){this.effectsSequence.push(A),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(A){if((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!A)return;this.currentData.t=this.data.d.k[this.keysIndex].s.t;var Q=this.currentData,E=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var B,I=this.effectsSequence.length,C=A||this.data.d.k[this.keysIndex].s;for(B=0;B<I;B+=1)if(E!==this.keysIndex)C=this.effectsSequence[B](C,C.t);else C=this.effectsSequence[B](this.currentData,C.t);if(Q!==C)this.setCurrentData(C);this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId},TextProperty.prototype.getKeyframeValue=function(){var A=this.data.d.k,Q=this.elem.comp.renderedFrame,E=0,B=A.length;while(E<=B-1){if(E===B-1||A[E+1].t>Q)break;E+=1}if(this.keysIndex!==E)this.keysIndex=E;return this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(A){var Q=[],E=0,B=A.length,I,C,K=!1;while(E<B){if(I=A.charCodeAt(E),FontManager.isCombinedCharacter(I))Q[Q.length-1]+=A.charAt(E);else if(I>=55296&&I<=56319)if(C=A.charCodeAt(E+1),C>=56320&&C<=57343){if(K||FontManager.isModifier(I,C))Q[Q.length-1]+=A.substr(E,2),K=!1;else Q.push(A.substr(E,2));E+=1}else Q.push(A.charAt(E));else if(I>56319)if(C=A.charCodeAt(E+1),FontManager.isZeroWidthJoiner(I,C))K=!0,Q[Q.length-1]+=A.substr(E,2),E+=1;else Q.push(A.charAt(E));else if(FontManager.isZeroWidthJoiner(I))Q[Q.length-1]+=A.charAt(E),K=!0;else Q.push(A.charAt(E));E+=1}return Q},TextProperty.prototype.completeTextData=function(A){A.__complete=!0;var Q=this.elem.globalData.fontManager,E=this.data,B=[],I,C,K,J=0,U,Y=E.m.g,H=0,R=0,O=0,N=[],$=0,L=0,W,Z,G=Q.getFontByName(A.f),X,q=0,M=getFontProperties(G);A.fWeight=M.weight,A.fStyle=M.style,A.finalSize=A.s,A.finalText=this.buildFinalText(A.t),C=A.finalText.length,A.finalLineHeight=A.lh;var F=A.tr/1000*A.finalSize,D;if(A.sz){var _=!0,w=A.sz[0],k=A.sz[1],T,z;while(_){z=this.buildFinalText(A.t),T=0,$=0,C=z.length,F=A.tr/1000*A.finalSize;var j=-1;for(I=0;I<C;I+=1){if(D=z[I].charCodeAt(0),K=!1,z[I]===" ")j=I;else if(D===13||D===3)$=0,K=!0,T+=A.finalLineHeight||A.finalSize*1.2;if(Q.chars)X=Q.getCharData(z[I],G.fStyle,G.fFamily),q=K?0:X.w*A.finalSize/100;else q=Q.measureText(z[I],A.f,A.finalSize);if($+q>w&&z[I]!==" "){if(j===-1)C+=1;else I=j;T+=A.finalLineHeight||A.finalSize*1.2,z.splice(I,j===I?1:0,"\r"),j=-1,$=0}else $+=q,$+=F}if(T+=G.ascent*A.finalSize/100,this.canResize&&A.finalSize>this.minimumFontSize&&k<T)A.finalSize-=1,A.finalLineHeight=A.finalSize*A.lh/A.s;else A.finalText=z,C=A.finalText.length,_=!1}}$=-F,q=0;var v=0,g;for(I=0;I<C;I+=1){if(K=!1,g=A.finalText[I],D=g.charCodeAt(0),D===13||D===3)v=0,N.push($),L=$>L?$:L,$=-2*F,U="",K=!0,O+=1;else U=g;if(Q.chars)X=Q.getCharData(g,G.fStyle,Q.getFontByName(A.f).fFamily),q=K?0:X.w*A.finalSize/100;else q=Q.measureText(U,A.f,A.finalSize);if(g===" ")v+=q+F;else $+=q+F+v,v=0;if(B.push({l:q,an:q,add:H,n:K,anIndexes:[],val:U,line:O,animatorJustifyOffset:0}),Y==2){if(H+=q,U===""||U===" "||I===C-1){if(U===""||U===" ")H-=q;while(R<=I)B[R].an=H,B[R].ind=J,B[R].extra=q,R+=1;J+=1,H=0}}else if(Y==3){if(H+=q,U===""||I===C-1){if(U==="")H-=q;while(R<=I)B[R].an=H,B[R].ind=J,B[R].extra=q,R+=1;H=0,J+=1}}else B[J].ind=J,B[J].extra=0,J+=1}if(A.l=B,L=$>L?$:L,N.push($),A.sz)A.boxWidth=A.sz[0],A.justifyOffset=0;else switch(A.boxWidth=L,A.j){case 1:A.justifyOffset=-A.boxWidth;break;case 2:A.justifyOffset=-A.boxWidth/2;break;default:A.justifyOffset=0}A.lineWidths=N;var P=E.a,V,S;Z=P.length;var h,x,b=[];for(W=0;W<Z;W+=1){if(V=P[W],V.a.sc)A.strokeColorAnim=!0;if(V.a.sw)A.strokeWidthAnim=!0;if(V.a.fc||V.a.fh||V.a.fs||V.a.fb)A.fillColorAnim=!0;x=0,h=V.s.b;for(I=0;I<C;I+=1)if(S=B[I],S.anIndexes[W]=x,h==1&&S.val!==""||h==2&&S.val!==""&&S.val!==" "||h==3&&(S.n||S.val==" "||I==C-1)||h==4&&(S.n||I==C-1)){if(V.s.rn===1)b.push(x);x+=1}E.a[W].s.totalChars=x;var m=-1,s;if(V.s.rn===1)for(I=0;I<C;I+=1){if(S=B[I],m!=S.anIndexes[W])m=S.anIndexes[W],s=b.splice(Math.floor(Math.random()*b.length),1)[0];S.anIndexes[W]=s}}A.yOffset=A.finalLineHeight||A.finalSize*1.2,A.ls=A.ls||0,A.ascent=G.ascent*A.finalSize/100},TextProperty.prototype.updateDocumentData=function(A,Q){Q=Q===void 0?this.keysIndex:Q;var E=this.copyData({},this.data.d.k[Q].s);E=this.copyData(E,A),this.data.d.k[Q].s=E,this.recalculate(Q),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(A){var Q=this.data.d.k[A].s;Q.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(Q)},TextProperty.prototype.canResizeFont=function(A){this.canResize=A,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(A){this.minimumFontSize=Math.floor(A)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};let TextSelectorProp=function(){var{max:A,min:Q,floor:E}=Math;function B(C,K){if(this._currentTextLength=-1,this.k=!1,this.data=K,this.elem=C,this.comp=C.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(C),this.s=PropertyFactory.getProp(C,K.s||{k:0},0,0,this),"e"in K)this.e=PropertyFactory.getProp(C,K.e,0,0,this);else this.e={v:100};if(this.o=PropertyFactory.getProp(C,K.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(C,K.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(C,K.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(C,K.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(C,K.a,0,0.01,this),!this.dynamicProperties.length)this.getValue()}B.prototype={getMult:function(C){if(this._currentTextLength!==this.elem.textProperty.currentData.l.length)this.getValue();var K=0,J=0,U=1,Y=1;if(this.ne.v>0)K=this.ne.v/100;else J=-this.ne.v/100;if(this.xe.v>0)U=1-this.xe.v/100;else Y=1+this.xe.v/100;var H=BezierFactory.getBezierEasing(K,J,U,Y).get,R=0,O=this.finalS,N=this.finalE,$=this.data.sh;if($===2){if(N===O)R=C>=N?1:0;else R=A(0,Q(0.5/(N-O)+(C-O)/(N-O),1));R=H(R)}else if($===3){if(N===O)R=C>=N?0:1;else R=1-A(0,Q(0.5/(N-O)+(C-O)/(N-O),1));R=H(R)}else if($===4){if(N===O)R=0;else if(R=A(0,Q(0.5/(N-O)+(C-O)/(N-O),1)),R<0.5)R*=2;else R=1-2*(R-0.5);R=H(R)}else if($===5){if(N===O)R=0;else{var L=N-O;C=Q(A(0,C+0.5-O),N-O);var W=-L/2+C,Z=L/2;R=Math.sqrt(1-W*W/(Z*Z))}R=H(R)}else if($===6){if(N===O)R=0;else C=Q(A(0,C+0.5-O),N-O),R=(1+Math.cos(Math.PI+Math.PI*2*C/(N-O)))/2;R=H(R)}else{if(C>=E(O))if(C-O<0)R=A(0,Q(Q(N,1)-(O-C),1));else R=A(0,Q(N-C,1));R=H(R)}if(this.sm.v!==100){var G=this.sm.v*0.01;if(G===0)G=0.00000001;var X=0.5-G*0.5;if(R<X)R=0;else if(R=(R-X)/G,R>1)R=1}return R*this.a.v},getValue:function(C){if(this.iterateDynamicProperties(),this._mdf=C||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,C&&this.data.r===2)this.e.v=this._currentTextLength;var K=this.data.r===2?1:100/this.data.totalChars,J=this.o.v/K,U=this.s.v/K+J,Y=this.e.v/K+J;if(U>Y){var H=U;U=Y,Y=H}this.finalS=U,this.finalE=Y}},extendPrototype([DynamicPropertyContainer],B);function I(C,K,J){return new B(C,K,J)}return{getTextSelectorProp:I}}();TextAnimatorProperty.prototype.searchProperties=function(){var A,Q=this._textData.a.length,E,B=PropertyFactory.getProp;for(A=0;A<Q;A+=1)E=this._textData.a[A],this._animatorsData[A]=new TextAnimatorDataProperty(this._elem,E,this);if(this._textData.p&&"m"in this._textData.p)this._pathData={a:B(this._elem,this._textData.p.a,0,0,this),f:B(this._elem,this._textData.p.f,0,0,this),l:B(this._elem,this._textData.p.l,0,0,this),r:B(this._elem,this._textData.p.r,0,0,this),p:B(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0;else this._hasMaskedPath=!1;this._moreOptions.alignment=B(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(A,Q){if(this.lettersChangedFlag=Q,!this._mdf&&!this._isFirstFrame&&!Q&&(!this._hasMaskedPath||!this._pathData.m._mdf))return;this._isFirstFrame=!1;var E=this._moreOptions.alignment.v,B=this._animatorsData,I=this._textData,C=this.mHelper,K=this._renderType,J=this.renderedLetters.length,U,Y,H,R,O=A.l,N,$,L,W,Z,G,X,q,M,F,D,_,w,k,T;if(this._hasMaskedPath){if(T=this._pathData.m,!this._pathData.n||this._pathData._mdf){var z=T.v;if(this._pathData.r.v)z=z.reverse();N={tLength:0,segments:[]},R=z._length-1;var j;_=0;for(H=0;H<R;H+=1)j=bez.buildBezierData(z.v[H],z.v[H+1],[z.o[H][0]-z.v[H][0],z.o[H][1]-z.v[H][1]],[z.i[H+1][0]-z.v[H+1][0],z.i[H+1][1]-z.v[H+1][1]]),N.tLength+=j.segmentLength,N.segments.push(j),_+=j.segmentLength;if(H=R,T.v.c)j=bez.buildBezierData(z.v[H],z.v[0],[z.o[H][0]-z.v[H][0],z.o[H][1]-z.v[H][1]],[z.i[0][0]-z.v[0][0],z.i[0][1]-z.v[0][1]]),N.tLength+=j.segmentLength,N.segments.push(j),_+=j.segmentLength;this._pathData.pi=N}if(N=this._pathData.pi,$=this._pathData.f.v,X=0,G=1,W=0,Z=!0,F=N.segments,$<0&&T.v.c){if(N.tLength<Math.abs($))$=-Math.abs($)%N.tLength;X=F.length-1,M=F[X].points,G=M.length-1;while($<0)if($+=M[G].partialLength,G-=1,G<0)X-=1,M=F[X].points,G=M.length-1}M=F[X].points,q=M[G-1],L=M[G],D=L.partialLength}R=O.length,U=0,Y=0;var v=A.finalSize*1.2*0.714,g=!0,P,V,S,h,x;h=B.length;var b,m=-1,s,i,n,l=$,c=X,o=G,e=-1,BA,EA,CA,f,NA,YA,FA,ZA,jA="",wA=this.defaultPropsArray,VA;if(A.j===2||A.j===1){var d=0,u=0,QA=A.j===2?-0.5:-1,t=0,KA=!0;for(H=0;H<R;H+=1)if(O[H].n){if(d)d+=u;while(t<H)O[t].animatorJustifyOffset=d,t+=1;d=0,KA=!0}else{for(S=0;S<h;S+=1)if(P=B[S].a,P.t.propType){if(KA&&A.j===2)u+=P.t.v*QA;if(V=B[S].s,b=V.getMult(O[H].anIndexes[S],I.a[S].s.totalChars),b.length)d+=P.t.v*b[0]*QA;else d+=P.t.v*b*QA}KA=!1}if(d)d+=u;while(t<H)O[t].animatorJustifyOffset=d,t+=1}for(H=0;H<R;H+=1){if(C.reset(),BA=1,O[H].n){if(U=0,Y+=A.yOffset,Y+=g?1:0,$=l,g=!1,this._hasMaskedPath)X=c,G=o,M=F[X].points,q=M[G-1],L=M[G],D=L.partialLength,W=0;jA="",ZA="",YA="",VA="",wA=this.defaultPropsArray}else{if(this._hasMaskedPath){if(e!==O[H].line){switch(A.j){case 1:$+=_-A.lineWidths[O[H].line];break;case 2:$+=(_-A.lineWidths[O[H].line])/2;break;default:break}e=O[H].line}if(m!==O[H].ind){if(O[m])$+=O[m].extra;$+=O[H].an/2,m=O[H].ind}$+=E[0]*O[H].an*0.005;var HA=0;for(S=0;S<h;S+=1){if(P=B[S].a,P.p.propType)if(V=B[S].s,b=V.getMult(O[H].anIndexes[S],I.a[S].s.totalChars),b.length)HA+=P.p.v[0]*b[0];else HA+=P.p.v[0]*b;if(P.a.propType)if(V=B[S].s,b=V.getMult(O[H].anIndexes[S],I.a[S].s.totalChars),b.length)HA+=P.a.v[0]*b[0];else HA+=P.a.v[0]*b}if(Z=!0,this._pathData.a.v)$=O[0].an*0.5+(_-this._pathData.f.v-O[0].an*0.5-O[O.length-1].an*0.5)*m/(R-1),$+=this._pathData.f.v;while(Z)if(W+D>=$+HA||!M)w=($+HA-W)/L.partialLength,i=q.point[0]+(L.point[0]-q.point[0])*w,n=q.point[1]+(L.point[1]-q.point[1])*w,C.translate(-E[0]*O[H].an*0.005,-(E[1]*v)*0.01),Z=!1;else if(M){if(W+=L.partialLength,G+=1,G>=M.length)if(G=0,X+=1,!F[X])if(T.v.c)G=0,X=0,M=F[X].points;else W-=L.partialLength,M=null;else M=F[X].points;if(M)q=L,L=M[G],D=L.partialLength}s=O[H].an/2-O[H].add,C.translate(-s,0,0)}else s=O[H].an/2-O[H].add,C.translate(-s,0,0),C.translate(-E[0]*O[H].an*0.005,-E[1]*v*0.01,0);for(S=0;S<h;S+=1)if(P=B[S].a,P.t.propType){if(V=B[S].s,b=V.getMult(O[H].anIndexes[S],I.a[S].s.totalChars),U!==0||A.j!==0)if(this._hasMaskedPath)if(b.length)$+=P.t.v*b[0];else $+=P.t.v*b;else if(b.length)U+=P.t.v*b[0];else U+=P.t.v*b}if(A.strokeWidthAnim)CA=A.sw||0;if(A.strokeColorAnim)if(A.sc)EA=[A.sc[0],A.sc[1],A.sc[2]];else EA=[0,0,0];if(A.fillColorAnim&&A.fc)f=[A.fc[0],A.fc[1],A.fc[2]];for(S=0;S<h;S+=1)if(P=B[S].a,P.a.propType)if(V=B[S].s,b=V.getMult(O[H].anIndexes[S],I.a[S].s.totalChars),b.length)C.translate(-P.a.v[0]*b[0],-P.a.v[1]*b[1],P.a.v[2]*b[2]);else C.translate(-P.a.v[0]*b,-P.a.v[1]*b,P.a.v[2]*b);for(S=0;S<h;S+=1)if(P=B[S].a,P.s.propType)if(V=B[S].s,b=V.getMult(O[H].anIndexes[S],I.a[S].s.totalChars),b.length)C.scale(1+(P.s.v[0]-1)*b[0],1+(P.s.v[1]-1)*b[1],1);else C.scale(1+(P.s.v[0]-1)*b,1+(P.s.v[1]-1)*b,1);for(S=0;S<h;S+=1){if(P=B[S].a,V=B[S].s,b=V.getMult(O[H].anIndexes[S],I.a[S].s.totalChars),P.sk.propType)if(b.length)C.skewFromAxis(-P.sk.v*b[0],P.sa.v*b[1]);else C.skewFromAxis(-P.sk.v*b,P.sa.v*b);if(P.r.propType)if(b.length)C.rotateZ(-P.r.v*b[2]);else C.rotateZ(-P.r.v*b);if(P.ry.propType)if(b.length)C.rotateY(P.ry.v*b[1]);else C.rotateY(P.ry.v*b);if(P.rx.propType)if(b.length)C.rotateX(P.rx.v*b[0]);else C.rotateX(P.rx.v*b);if(P.o.propType)if(b.length)BA+=(P.o.v*b[0]-BA)*b[0];else BA+=(P.o.v*b-BA)*b;if(A.strokeWidthAnim&&P.sw.propType)if(b.length)CA+=P.sw.v*b[0];else CA+=P.sw.v*b;if(A.strokeColorAnim&&P.sc.propType)for(NA=0;NA<3;NA+=1)if(b.length)EA[NA]+=(P.sc.v[NA]-EA[NA])*b[0];else EA[NA]+=(P.sc.v[NA]-EA[NA])*b;if(A.fillColorAnim&&A.fc){if(P.fc.propType)for(NA=0;NA<3;NA+=1)if(b.length)f[NA]+=(P.fc.v[NA]-f[NA])*b[0];else f[NA]+=(P.fc.v[NA]-f[NA])*b;if(P.fh.propType)if(b.length)f=addHueToRGB(f,P.fh.v*b[0]);else f=addHueToRGB(f,P.fh.v*b);if(P.fs.propType)if(b.length)f=addSaturationToRGB(f,P.fs.v*b[0]);else f=addSaturationToRGB(f,P.fs.v*b);if(P.fb.propType)if(b.length)f=addBrightnessToRGB(f,P.fb.v*b[0]);else f=addBrightnessToRGB(f,P.fb.v*b)}}for(S=0;S<h;S+=1)if(P=B[S].a,P.p.propType)if(V=B[S].s,b=V.getMult(O[H].anIndexes[S],I.a[S].s.totalChars),this._hasMaskedPath)if(b.length)C.translate(0,P.p.v[1]*b[0],-P.p.v[2]*b[1]);else C.translate(0,P.p.v[1]*b,-P.p.v[2]*b);else if(b.length)C.translate(P.p.v[0]*b[0],P.p.v[1]*b[1],-P.p.v[2]*b[2]);else C.translate(P.p.v[0]*b,P.p.v[1]*b,-P.p.v[2]*b);if(A.strokeWidthAnim)YA=CA<0?0:CA;if(A.strokeColorAnim)FA="rgb("+Math.round(EA[0]*255)+","+Math.round(EA[1]*255)+","+Math.round(EA[2]*255)+")";if(A.fillColorAnim&&A.fc)ZA="rgb("+Math.round(f[0]*255)+","+Math.round(f[1]*255)+","+Math.round(f[2]*255)+")";if(this._hasMaskedPath){if(C.translate(0,-A.ls),C.translate(0,E[1]*v*0.01+Y,0),this._pathData.p.v){k=(L.point[1]-q.point[1])/(L.point[0]-q.point[0]);var fA=Math.atan(k)*180/Math.PI;if(L.point[0]<q.point[0])fA+=180;C.rotate(-fA*Math.PI/180)}if(C.translate(i,n,0),$-=E[0]*O[H].an*0.005,O[H+1]&&m!==O[H+1].ind)$+=O[H].an/2,$+=A.tr*0.001*A.finalSize}else{if(C.translate(U,Y,0),A.ps)C.translate(A.ps[0],A.ps[1]+A.ascent,0);switch(A.j){case 1:C.translate(O[H].animatorJustifyOffset+A.justifyOffset+(A.boxWidth-A.lineWidths[O[H].line]),0,0);break;case 2:C.translate(O[H].animatorJustifyOffset+A.justifyOffset+(A.boxWidth-A.lineWidths[O[H].line])/2,0,0);break;default:break}C.translate(0,-A.ls),C.translate(s,0,0),C.translate(E[0]*O[H].an*0.005,E[1]*v*0.01,0),U+=O[H].l+A.tr*0.001*A.finalSize}if(K==="html")jA=C.toCSS();else if(K==="svg")jA=C.to2dCSS();else wA=[C.props[0],C.props[1],C.props[2],C.props[3],C.props[4],C.props[5],C.props[6],C.props[7],C.props[8],C.props[9],C.props[10],C.props[11],C.props[12],C.props[13],C.props[14],C.props[15]];VA=BA}if(J<=H)x=new LetterProps(VA,YA,FA,ZA,jA,wA),this.renderedLetters.push(x),J+=1,this.lettersChangedFlag=!0;else x=this.renderedLetters[H],this.lettersChangedFlag=x.update(VA,YA,FA,ZA,jA,wA)||this.lettersChangedFlag}},TextAnimatorProperty.prototype.getValue=function(){if(this._elem.globalData.frameId===this._frameId)return;this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties()},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(A,Q,E){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(A,Q,E),this.textProperty=new TextProperty(this,A.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(A.t,this.renderType,this),this.initTransform(A,Q,E),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(A){if(this._mdf=!1,this.prepareRenderableFrame(A),this.prepareProperties(A,this.isInRange),this.textProperty._mdf||this.textProperty._isFirstFrame)this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1},ITextElement.prototype.createPathShape=function(A,Q){var E,B=Q.length,I,C="";for(E=0;E<B;E+=1)if(Q[E].ty==="sh")I=Q[E].ks.k,C+=buildShapeString(I,I.i.length,!0,A);return C},ITextElement.prototype.updateDocumentData=function(A,Q){this.textProperty.updateDocumentData(A,Q)},ITextElement.prototype.canResizeFont=function(A){this.textProperty.canResizeFont(A)},ITextElement.prototype.setMinimumFontSize=function(A){this.textProperty.setMinimumFontSize(A)},ITextElement.prototype.applyTextPropertiesToMatrix=function(A,Q,E,B,I){if(A.ps)Q.translate(A.ps[0],A.ps[1]+A.ascent,0);switch(Q.translate(0,-A.ls,0),A.j){case 1:Q.translate(A.justifyOffset+(A.boxWidth-A.lineWidths[E]),0,0);break;case 2:Q.translate(A.justifyOffset+(A.boxWidth-A.lineWidths[E])/2,0,0);break;default:break}Q.translate(B,I,0)},ITextElement.prototype.buildColor=function(A){return"rgb("+Math.round(A[0]*255)+","+Math.round(A[1]*255)+","+Math.round(A[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},emptyShapeData={shapes:[]},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){if(this.data.singleShape&&!this.globalData.fontManager.chars)this.textContainer=createNS("text")},SVGTextLottieElement.prototype.buildTextContents=function(A){var Q=0,E=A.length,B=[],I="";while(Q<E){if(A[Q]===String.fromCharCode(13)||A[Q]===String.fromCharCode(3))B.push(I),I="";else I+=A[Q];Q+=1}return B.push(I),B},SVGTextLottieElement.prototype.buildShapeData=function(A,Q){if(A.shapes&&A.shapes.length){var E=A.shapes[0];if(E.it){var B=E.it[E.it.length-1];if(B.s)B.s.k[0]=Q,B.s.k[1]=Q}}return A},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var A,Q,E=this.textProperty.currentData;if(this.renderedLetters=createSizedArray(E?E.l.length:0),E.fc)this.layerElement.setAttribute("fill",this.buildColor(E.fc));else this.layerElement.setAttribute("fill","rgba(0,0,0,0)");if(E.sc)this.layerElement.setAttribute("stroke",this.buildColor(E.sc)),this.layerElement.setAttribute("stroke-width",E.sw);this.layerElement.setAttribute("font-size",E.finalSize);var B=this.globalData.fontManager.getFontByName(E.f);if(B.fClass)this.layerElement.setAttribute("class",B.fClass);else{this.layerElement.setAttribute("font-family",B.fFamily);var{fWeight:I,fStyle:C}=E;this.layerElement.setAttribute("font-style",C),this.layerElement.setAttribute("font-weight",I)}this.layerElement.setAttribute("aria-label",E.t);var K=E.l||[],J=!!this.globalData.fontManager.chars;Q=K.length;var U,Y=this.mHelper,H="",R=this.data.singleShape,O=0,N=0,$=!0,L=E.tr*0.001*E.finalSize;if(R&&!J&&!E.sz){var W=this.textContainer,Z="start";switch(E.j){case 1:Z="end";break;case 2:Z="middle";break;default:Z="start";break}W.setAttribute("text-anchor",Z),W.setAttribute("letter-spacing",L);var G=this.buildTextContents(E.finalText);Q=G.length,N=E.ps?E.ps[1]+E.ascent:0;for(A=0;A<Q;A+=1){if(U=this.textSpans[A].span||createNS("tspan"),U.textContent=G[A],U.setAttribute("x",0),U.setAttribute("y",N),U.style.display="inherit",W.appendChild(U),!this.textSpans[A])this.textSpans[A]={span:null,glyph:null};this.textSpans[A].span=U,N+=E.finalLineHeight}this.layerElement.appendChild(W)}else{var X=this.textSpans.length,q;for(A=0;A<Q;A+=1){if(!this.textSpans[A])this.textSpans[A]={span:null,childSpan:null,glyph:null};if(!J||!R||A===0){if(U=X>A?this.textSpans[A].span:createNS(J?"g":"text"),X<=A){if(U.setAttribute("stroke-linecap","butt"),U.setAttribute("stroke-linejoin","round"),U.setAttribute("stroke-miterlimit","4"),this.textSpans[A].span=U,J){var M=createNS("g");U.appendChild(M),this.textSpans[A].childSpan=M}this.textSpans[A].span=U,this.layerElement.appendChild(U)}U.style.display="inherit"}if(Y.reset(),R){if(K[A].n)O=-L,N+=E.yOffset,N+=$?1:0,$=!1;this.applyTextPropertiesToMatrix(E,Y,K[A].line,O,N),O+=K[A].l||0,O+=L}if(J){q=this.globalData.fontManager.getCharData(E.finalText[A],B.fStyle,this.globalData.fontManager.getFontByName(E.f).fFamily);var F;if(q.t===1)F=new SVGCompElement(q.data,this.globalData,this);else{var D=emptyShapeData;if(q.data&&q.data.shapes)D=this.buildShapeData(q.data,E.finalSize);F=new SVGShapeElement(D,this.globalData,this)}if(this.textSpans[A].glyph){var _=this.textSpans[A].glyph;this.textSpans[A].childSpan.removeChild(_.layerElement),_.destroy()}if(this.textSpans[A].glyph=F,F._debug=!0,F.prepareFrame(0),F.renderFrame(),this.textSpans[A].childSpan.appendChild(F.layerElement),q.t===1)this.textSpans[A].childSpan.setAttribute("transform","scale("+E.finalSize/100+","+E.finalSize/100+")")}else{if(R)U.setAttribute("transform","translate("+Y.props[12]+","+Y.props[13]+")");U.textContent=K[A].val,U.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}}if(R&&U)U.setAttribute("d",H)}while(A<this.textSpans.length)this.textSpans[A].span.style.display="none",A+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var A=this.layerElement.getBBox();this.bbox={top:A.y,left:A.x,width:A.width,height:A.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var A,Q=this.textSpans.length,E;this.renderedFrame=this.comp.renderedFrame;for(A=0;A<Q;A+=1)if(E=this.textSpans[A].glyph,E){if(E.prepareFrame(this.comp.renderedFrame-this.data.st),E._mdf)this._mdf=!0}},SVGTextLottieElement.prototype.renderInnerContent=function(){if(!this.data.singleShape||this._mdf){if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){this._sizeChanged=!0;var A,Q,E=this.textAnimator.renderedLetters,B=this.textProperty.currentData.l;Q=B.length;var I,C,K;for(A=0;A<Q;A+=1)if(!B[A].n){if(I=E[A],C=this.textSpans[A].span,K=this.textSpans[A].glyph,K)K.renderFrame();if(I._mdf.m)C.setAttribute("transform",I.m);if(I._mdf.o)C.setAttribute("opacity",I.o);if(I._mdf.sw)C.setAttribute("stroke-width",I.sw);if(I._mdf.sc)C.setAttribute("stroke",I.sc);if(I._mdf.fc)C.setAttribute("fill",I.fc)}}}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var A=createNS("rect");A.setAttribute("width",this.data.sw),A.setAttribute("height",this.data.sh),A.setAttribute("fill",this.data.sc),this.layerElement.appendChild(A)},NullElement.prototype.prepareFrame=function(A){this.prepareProperties(A,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(A){return new NullElement(A,this.globalData,this)},SVGRendererBase.prototype.createShape=function(A){return new SVGShapeElement(A,this.globalData,this)},SVGRendererBase.prototype.createText=function(A){return new SVGTextLottieElement(A,this.globalData,this)},SVGRendererBase.prototype.createImage=function(A){return new IImageElement(A,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(A){return new ISolidElement(A,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(A){if(this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize)this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize);else this.svgElement.setAttribute("viewBox","0 0 "+A.w+" "+A.h);if(!this.renderConfig.viewBoxOnly)this.svgElement.setAttribute("width",A.w),this.svgElement.setAttribute("height",A.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility;if(this.renderConfig.width)this.svgElement.setAttribute("width",this.renderConfig.width);if(this.renderConfig.height)this.svgElement.setAttribute("height",this.renderConfig.height);if(this.renderConfig.className)this.svgElement.setAttribute("class",this.renderConfig.className);if(this.renderConfig.id)this.svgElement.setAttribute("id",this.renderConfig.id);if(this.renderConfig.focusable!==void 0)this.svgElement.setAttribute("focusable",this.renderConfig.focusable);this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var Q=this.globalData.defs;this.setupGlobalData(A,Q),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=A;var E=createNS("clipPath"),B=createNS("rect");B.setAttribute("width",A.w),B.setAttribute("height",A.h),B.setAttribute("x",0),B.setAttribute("y",0);var I=createElementID();E.setAttribute("id",I),E.appendChild(B),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+I+")"),Q.appendChild(E),this.layers=A.layers,this.elements=createSizedArray(A.layers.length)},SVGRendererBase.prototype.destroy=function(){if(this.animationItem.wrapper)this.animationItem.wrapper.innerText="";this.layerElement=null,this.globalData.defs=null;var A,Q=this.layers?this.layers.length:0;for(A=0;A<Q;A+=1)if(this.elements[A])this.elements[A].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.buildItem=function(A){var Q=this.elements;if(Q[A]||this.layers[A].ty===99)return;Q[A]=!0;var E=this.createItem(this.layers[A]);if(Q[A]=E,getExpressionsPlugin()){if(this.layers[A].ty===0)this.globalData.projectInterface.registerComposition(E);E.initExpressions()}if(this.appendElementInPos(E,A),this.layers[A].tt)if(!this.elements[A-1]||this.elements[A-1]===!0)this.buildItem(A-1),this.addPendingElement(E);else E.setMatte(Q[A-1].layerId)},SVGRendererBase.prototype.checkPendingElements=function(){while(this.pendingElements.length){var A=this.pendingElements.pop();if(A.checkParenting(),A.data.tt){var Q=0,E=this.elements.length;while(Q<E){if(this.elements[Q]===A){A.setMatte(this.elements[Q-1].layerId);break}Q+=1}}}},SVGRendererBase.prototype.renderFrame=function(A){if(this.renderedFrame===A||this.destroyed)return;if(A===null)A=this.renderedFrame;else this.renderedFrame=A;this.globalData.frameNum=A,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=A,this.globalData._mdf=!1;var Q,E=this.layers.length;if(!this.completeLayers)this.checkLayers(A);for(Q=E-1;Q>=0;Q-=1)if(this.completeLayers||this.elements[Q])this.elements[Q].prepareFrame(A-this.layers[Q].st);if(this.globalData._mdf){for(Q=0;Q<E;Q+=1)if(this.completeLayers||this.elements[Q])this.elements[Q].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(A,Q){var E=A.getBaseElement();if(!E)return;var B=0,I;while(B<Q){if(this.elements[B]&&this.elements[B]!==!0&&this.elements[B].getBaseElement())I=this.elements[B].getBaseElement();B+=1}if(I)this.layerElement.insertBefore(E,I);else this.layerElement.appendChild(E)},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(A,Q,E){if(this.initFrame(),this.initBaseData(A,Q,E),this.initTransform(A,Q,E),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.data.xt||!Q.progressiveLoad)this.buildAllItems();this.hide()},ICompElement.prototype.prepareFrame=function(A){if(this._mdf=!1,this.prepareRenderableFrame(A),this.prepareProperties(A,this.isInRange),!this.isInRange&&!this.data.xt)return;if(!this.tm._placeholder){var Q=this.tm.v;if(Q===this.data.op)Q=this.data.op-1;this.renderedFrame=Q}else this.renderedFrame=A/this.data.sr;var E,B=this.elements.length;if(!this.completeLayers)this.checkLayers(this.renderedFrame);for(E=B-1;E>=0;E-=1)if(this.completeLayers||this.elements[E]){if(this.elements[E].prepareFrame(this.renderedFrame-this.layers[E].st),this.elements[E]._mdf)this._mdf=!0}},ICompElement.prototype.renderInnerContent=function(){var A,Q=this.layers.length;for(A=0;A<Q;A+=1)if(this.completeLayers||this.elements[A])this.elements[A].renderFrame()},ICompElement.prototype.setElements=function(A){this.elements=A},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var A,Q=this.layers.length;for(A=0;A<Q;A+=1)if(this.elements[A])this.elements[A].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(A){return new SVGCompElement(A,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(A){return new SVGCompElement(A,this.globalData,this)},CVContextData.prototype.duplicate=function(){var A=this._length*2,Q=this.savedOp;this.savedOp=createTypedArray("float32",A),this.savedOp.set(Q);var E=0;for(E=this._length;E<A;E+=1)this.saved[E]=createTypedArray("float32",16);this._length=A},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},ShapeTransformManager.prototype={addTransformSequence:function(A){var Q,E=A.length,B="_";for(Q=0;Q<E;Q+=1)B+=A[Q].transform.key+"_";var I=this.sequences[B];if(!I)I={transforms:[].concat(A),finalTransform:new Matrix,_mdf:!1},this.sequences[B]=I,this.sequenceList.push(I);return I},processSequence:function(A,Q){var E=0,B=A.transforms.length,I=Q;while(E<B&&!Q){if(A.transforms[E].transform.mProps._mdf){I=!0;break}E+=1}if(I){var C;A.finalTransform.reset();for(E=B-1;E>=0;E-=1)C=A.transforms[E].transform.mProps.v.props,A.finalTransform.transform(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],C[8],C[9],C[10],C[11],C[12],C[13],C[14],C[15])}A._mdf=I},processSequences:function(A){var Q,E=this.sequenceList.length;for(Q=0;Q<E;Q+=1)this.processSequence(this.sequenceList[Q],A)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVEffects.prototype.renderFrame=function(){},CVMaskElement.prototype.renderFrame=function(){if(!this.hasMasks)return;var A=this.element.finalTransform.mat,Q=this.element.canvasContext,E,B=this.masksProperties.length,I,C,K;Q.beginPath();for(E=0;E<B;E+=1)if(this.masksProperties[E].mode!=="n"){if(this.masksProperties[E].inv)Q.moveTo(0,0),Q.lineTo(this.element.globalData.compSize.w,0),Q.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),Q.lineTo(0,this.element.globalData.compSize.h),Q.lineTo(0,0);K=this.viewData[E].v,I=A.applyToPointArray(K.v[0][0],K.v[0][1],0),Q.moveTo(I[0],I[1]);var J,U=K._length;for(J=1;J<U;J+=1)C=A.applyToTriplePoints(K.o[J-1],K.i[J],K.v[J]),Q.bezierCurveTo(C[0],C[1],C[2],C[3],C[4],C[5]);C=A.applyToTriplePoints(K.o[J-1],K.i[0],K.v[0]),Q.bezierCurveTo(C[0],C[1],C[2],C[3],C[4],C[5])}this.element.globalData.renderer.save(!0),Q.clip()},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var A=this.globalData;if(A.blendMode!==this.data.bm){A.blendMode=this.data.bm;var Q=getBlendMode(this.data.bm);A.canvasContext.globalCompositeOperation=Q}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent))this.hidden=!0},showElement:function(){if(this.isInRange&&!this.isTransparent)this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0},renderFrame:function(){if(this.hidden||this.data.hd)return;this.renderTransform(),this.renderRenderable(),this.setBlendMode();var A=this.data.ty===0;if(this.globalData.renderer.save(A),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(A),this.maskManager.hasMasks)this.globalData.renderer.restore(!0);if(this._isFirstFrame)this._isFirstFrame=!1},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(A,Q){var E={data:A,type:A.ty,preTransforms:this.transformsManager.addTransformSequence(Q),transforms:[],elements:[],closed:A.hd===!0},B={};if(A.ty==="fl"||A.ty==="st"){if(B.c=PropertyFactory.getProp(this,A.c,1,255,this),!B.c.k)E.co="rgb("+bmFloor(B.c.v[0])+","+bmFloor(B.c.v[1])+","+bmFloor(B.c.v[2])+")"}else if(A.ty==="gf"||A.ty==="gs")B.s=PropertyFactory.getProp(this,A.s,1,null,this),B.e=PropertyFactory.getProp(this,A.e,1,null,this),B.h=PropertyFactory.getProp(this,A.h||{k:0},0,0.01,this),B.a=PropertyFactory.getProp(this,A.a||{k:0},0,degToRads,this),B.g=new GradientProperty(this,A.g,this);if(B.o=PropertyFactory.getProp(this,A.o,0,0.01,this),A.ty==="st"||A.ty==="gs"){if(E.lc=lineCapEnum[A.lc||2],E.lj=lineJoinEnum[A.lj||2],A.lj==1)E.ml=A.ml;if(B.w=PropertyFactory.getProp(this,A.w,0,null,this),!B.w.k)E.wi=B.w.v;if(A.d){var I=new DashProperty(this,A.d,"canvas",this);if(B.d=I,!B.d.k)E.da=B.d.dashArray,E.do=B.d.dashoffset[0]}}else E.r=A.r===2?"evenodd":"nonzero";return this.stylesList.push(E),B.style=E,B},CVShapeElement.prototype.createGroupElement=function(){var A={it:[],prevViewData:[]};return A},CVShapeElement.prototype.createTransformElement=function(A){var Q={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,A.o,0,0.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,A,this)}};return Q},CVShapeElement.prototype.createShapeElement=function(A){var Q=new CVShapeData(this,A,this.stylesList,this.transformsManager);return this.shapes.push(Q),this.addShapeToModifiers(Q),Q},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var A,Q=this.itemsData.length;for(A=0;A<Q;A+=1)this.prevViewData[A]=this.itemsData[A];this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),Q=this.dynamicProperties.length;for(A=0;A<Q;A+=1)this.dynamicProperties[A].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(A){var Q,E=this.stylesList.length;for(Q=0;Q<E;Q+=1)if(!this.stylesList[Q].closed)this.stylesList[Q].transforms.push(A)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var A,Q=this.stylesList.length;for(A=0;A<Q;A+=1)if(!this.stylesList[A].closed)this.stylesList[A].transforms.pop()},CVShapeElement.prototype.closeStyles=function(A){var Q,E=A.length;for(Q=0;Q<E;Q+=1)A[Q].closed=!0},CVShapeElement.prototype.searchShapes=function(A,Q,E,B,I){var C,K=A.length-1,J,U,Y=[],H=[],R,O,N,$=[].concat(I);for(C=K;C>=0;C-=1){if(R=this.searchProcessedElement(A[C]),!R)A[C]._shouldRender=B;else Q[C]=E[R-1];if(A[C].ty==="fl"||A[C].ty==="st"||A[C].ty==="gf"||A[C].ty==="gs"){if(!R)Q[C]=this.createStyleElement(A[C],$);else Q[C].style.closed=!1;Y.push(Q[C].style)}else if(A[C].ty==="gr"){if(!R)Q[C]=this.createGroupElement(A[C]);else{U=Q[C].it.length;for(J=0;J<U;J+=1)Q[C].prevViewData[J]=Q[C].it[J]}this.searchShapes(A[C].it,Q[C].it,Q[C].prevViewData,B,$)}else if(A[C].ty==="tr"){if(!R)N=this.createTransformElement(A[C]),Q[C]=N;$.push(Q[C]),this.addTransformToStyleList(Q[C])}else if(A[C].ty==="sh"||A[C].ty==="rc"||A[C].ty==="el"||A[C].ty==="sr"){if(!R)Q[C]=this.createShapeElement(A[C])}else if(A[C].ty==="tm"||A[C].ty==="rd"||A[C].ty==="pb"){if(!R)O=ShapeModifiers.getModifier(A[C].ty),O.init(this,A[C]),Q[C]=O,this.shapeModifiers.push(O);else O=Q[C],O.closed=!1;H.push(O)}else if(A[C].ty==="rp"){if(!R)O=ShapeModifiers.getModifier(A[C].ty),Q[C]=O,O.init(this,A,C,Q),this.shapeModifiers.push(O),B=!1;else O=Q[C],O.closed=!0;H.push(O)}this.addProcessedElement(A[C],C+1)}this.removeTransformFromStyleList(),this.closeStyles(Y),K=H.length;for(C=0;C<K;C+=1)H[C].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(A,Q){if(A._opMdf||Q.op._mdf||this._isFirstFrame)Q.opacity=A.opacity,Q.opacity*=Q.op.v,Q._opMdf=!0},CVShapeElement.prototype.drawLayer=function(){var A,Q=this.stylesList.length,E,B,I,C,K,J,U=this.globalData.renderer,Y=this.globalData.canvasContext,H,R;for(A=0;A<Q;A+=1)if(R=this.stylesList[A],H=R.type,!((H==="st"||H==="gs")&&R.wi===0||!R.data._shouldRender||R.coOp===0||this.globalData.currentGlobalAlpha===0)){if(U.save(),K=R.elements,H==="st"||H==="gs")Y.strokeStyle=H==="st"?R.co:R.grd,Y.lineWidth=R.wi,Y.lineCap=R.lc,Y.lineJoin=R.lj,Y.miterLimit=R.ml||0;else Y.fillStyle=H==="fl"?R.co:R.grd;if(U.ctxOpacity(R.coOp),H!=="st"&&H!=="gs")Y.beginPath();U.ctxTransform(R.preTransforms.finalTransform.props),B=K.length;for(E=0;E<B;E+=1){if(H==="st"||H==="gs"){if(Y.beginPath(),R.da)Y.setLineDash(R.da),Y.lineDashOffset=R.do}J=K[E].trNodes,C=J.length;for(I=0;I<C;I+=1)if(J[I].t==="m")Y.moveTo(J[I].p[0],J[I].p[1]);else if(J[I].t==="c")Y.bezierCurveTo(J[I].pts[0],J[I].pts[1],J[I].pts[2],J[I].pts[3],J[I].pts[4],J[I].pts[5]);else Y.closePath();if(H==="st"||H==="gs"){if(Y.stroke(),R.da)Y.setLineDash(this.dashResetter)}}if(H!=="st"&&H!=="gs")Y.fill(R.r);U.restore()}},CVShapeElement.prototype.renderShape=function(A,Q,E,B){var I,C=Q.length-1,K;K=A;for(I=C;I>=0;I-=1)if(Q[I].ty==="tr")K=E[I].transform,this.renderShapeTransform(A,K);else if(Q[I].ty==="sh"||Q[I].ty==="el"||Q[I].ty==="rc"||Q[I].ty==="sr")this.renderPath(Q[I],E[I]);else if(Q[I].ty==="fl")this.renderFill(Q[I],E[I],K);else if(Q[I].ty==="st")this.renderStroke(Q[I],E[I],K);else if(Q[I].ty==="gf"||Q[I].ty==="gs")this.renderGradientFill(Q[I],E[I],K);else if(Q[I].ty==="gr")this.renderShape(K,Q[I].it,E[I].it);else if(Q[I].ty==="tm");if(B)this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(A,Q){if(this._isFirstFrame||Q._mdf||A.transforms._mdf){var E=A.trNodes,B=Q.paths,I,C,K,J=B._length;E.length=0;var U=A.transforms.finalTransform;for(K=0;K<J;K+=1){var Y=B.shapes[K];if(Y&&Y.v){C=Y._length;for(I=1;I<C;I+=1){if(I===1)E.push({t:"m",p:U.applyToPointArray(Y.v[0][0],Y.v[0][1],0)});E.push({t:"c",pts:U.applyToTriplePoints(Y.o[I-1],Y.i[I],Y.v[I])})}if(C===1)E.push({t:"m",p:U.applyToPointArray(Y.v[0][0],Y.v[0][1],0)});if(Y.c&&C)E.push({t:"c",pts:U.applyToTriplePoints(Y.o[I-1],Y.i[0],Y.v[0])}),E.push({t:"z"})}}A.trNodes=E}},CVShapeElement.prototype.renderPath=function(A,Q){if(A.hd!==!0&&A._shouldRender){var E,B=Q.styledShapes.length;for(E=0;E<B;E+=1)this.renderStyledShape(Q.styledShapes[E],Q.sh)}},CVShapeElement.prototype.renderFill=function(A,Q,E){var B=Q.style;if(Q.c._mdf||this._isFirstFrame)B.co="rgb("+bmFloor(Q.c.v[0])+","+bmFloor(Q.c.v[1])+","+bmFloor(Q.c.v[2])+")";if(Q.o._mdf||E._opMdf||this._isFirstFrame)B.coOp=Q.o.v*E.opacity},CVShapeElement.prototype.renderGradientFill=function(A,Q,E){var B=Q.style,I;if(!B.grd||Q.g._mdf||Q.s._mdf||Q.e._mdf||A.t!==1&&(Q.h._mdf||Q.a._mdf)){var C=this.globalData.canvasContext,K=Q.s.v,J=Q.e.v;if(A.t===1)I=C.createLinearGradient(K[0],K[1],J[0],J[1]);else{var U=Math.sqrt(Math.pow(K[0]-J[0],2)+Math.pow(K[1]-J[1],2)),Y=Math.atan2(J[1]-K[1],J[0]-K[0]),H=Q.h.v;if(H>=1)H=0.99;else if(H<=-1)H=-0.99;var R=U*H,O=Math.cos(Y+Q.a.v)*R+K[0],N=Math.sin(Y+Q.a.v)*R+K[1];I=C.createRadialGradient(O,N,0,K[0],K[1],U)}var $,L=A.g.p,W=Q.g.c,Z=1;for($=0;$<L;$+=1){if(Q.g._hasOpacity&&Q.g._collapsable)Z=Q.g.o[$*2+1];I.addColorStop(W[$*4]/100,"rgba("+W[$*4+1]+","+W[$*4+2]+","+W[$*4+3]+","+Z+")")}B.grd=I}B.coOp=Q.o.v*E.opacity},CVShapeElement.prototype.renderStroke=function(A,Q,E){var{style:B,d:I}=Q;if(I&&(I._mdf||this._isFirstFrame))B.da=I.dashArray,B.do=I.dashoffset[0];if(Q.c._mdf||this._isFirstFrame)B.co="rgb("+bmFloor(Q.c.v[0])+","+bmFloor(Q.c.v[1])+","+bmFloor(Q.c.v[2])+")";if(Q.o._mdf||E._opMdf||this._isFirstFrame)B.coOp=Q.o.v*E.opacity;if(Q.w._mdf||this._isFirstFrame)B.wi=Q.w.v},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var A=this.textProperty.currentData;this.renderedLetters=createSizedArray(A.l?A.l.length:0);var Q=!1;if(A.fc)Q=!0,this.values.fill=this.buildColor(A.fc);else this.values.fill="rgba(0,0,0,0)";this.fill=Q;var E=!1;if(A.sc)E=!0,this.values.stroke=this.buildColor(A.sc),this.values.sWidth=A.sw;var B=this.globalData.fontManager.getFontByName(A.f),I,C,K=A.l,J=this.mHelper;this.stroke=E,this.values.fValue=A.finalSize+"px "+this.globalData.fontManager.getFontByName(A.f).fFamily,C=A.finalText.length;var U,Y,H,R,O,N,$,L,W,Z,G=this.data.singleShape,X=A.tr*0.001*A.finalSize,q=0,M=0,F=!0,D=0;for(I=0;I<C;I+=1){if(U=this.globalData.fontManager.getCharData(A.finalText[I],B.fStyle,this.globalData.fontManager.getFontByName(A.f).fFamily),Y=U&&U.data||{},J.reset(),G&&K[I].n)q=-X,M+=A.yOffset,M+=F?1:0,F=!1;if(O=Y.shapes?Y.shapes[0].it:[],$=O.length,J.scale(A.finalSize/100,A.finalSize/100),G)this.applyTextPropertiesToMatrix(A,J,K[I].line,q,M);W=createSizedArray($-1);var _=0;for(N=0;N<$;N+=1)if(O[N].ty==="sh"){R=O[N].ks.k.i.length,L=O[N].ks.k,Z=[];for(H=1;H<R;H+=1){if(H===1)Z.push(J.applyToX(L.v[0][0],L.v[0][1],0),J.applyToY(L.v[0][0],L.v[0][1],0));Z.push(J.applyToX(L.o[H-1][0],L.o[H-1][1],0),J.applyToY(L.o[H-1][0],L.o[H-1][1],0),J.applyToX(L.i[H][0],L.i[H][1],0),J.applyToY(L.i[H][0],L.i[H][1],0),J.applyToX(L.v[H][0],L.v[H][1],0),J.applyToY(L.v[H][0],L.v[H][1],0))}Z.push(J.applyToX(L.o[H-1][0],L.o[H-1][1],0),J.applyToY(L.o[H-1][0],L.o[H-1][1],0),J.applyToX(L.i[0][0],L.i[0][1],0),J.applyToY(L.i[0][0],L.i[0][1],0),J.applyToX(L.v[0][0],L.v[0][1],0),J.applyToY(L.v[0][0],L.v[0][1],0)),W[_]=Z,_+=1}if(G)q+=K[I].l,q+=X;if(this.textSpans[D])this.textSpans[D].elem=W;else this.textSpans[D]={elem:W};D+=1}},CVTextElement.prototype.renderInnerContent=function(){var A=this.canvasContext;if(A.font=this.values.fValue,A.lineCap="butt",A.lineJoin="miter",A.miterLimit=4,!this.data.singleShape)this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var Q,E,B,I,C,K,J=this.textAnimator.renderedLetters,U=this.textProperty.currentData.l;E=U.length;var Y,H=null,R=null,O=null,N,$;for(Q=0;Q<E;Q+=1)if(!U[Q].n){if(Y=J[Q],Y)this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(Y.p),this.globalData.renderer.ctxOpacity(Y.o);if(this.fill){if(Y&&Y.fc){if(H!==Y.fc)H=Y.fc,A.fillStyle=Y.fc}else if(H!==this.values.fill)H=this.values.fill,A.fillStyle=this.values.fill;N=this.textSpans[Q].elem,I=N.length,this.globalData.canvasContext.beginPath();for(B=0;B<I;B+=1){$=N[B],K=$.length,this.globalData.canvasContext.moveTo($[0],$[1]);for(C=2;C<K;C+=6)this.globalData.canvasContext.bezierCurveTo($[C],$[C+1],$[C+2],$[C+3],$[C+4],$[C+5])}this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){if(Y&&Y.sw){if(O!==Y.sw)O=Y.sw,A.lineWidth=Y.sw}else if(O!==this.values.sWidth)O=this.values.sWidth,A.lineWidth=this.values.sWidth;if(Y&&Y.sc){if(R!==Y.sc)R=Y.sc,A.strokeStyle=Y.sc}else if(R!==this.values.stroke)R=this.values.stroke,A.strokeStyle=this.values.stroke;N=this.textSpans[Q].elem,I=N.length,this.globalData.canvasContext.beginPath();for(B=0;B<I;B+=1){$=N[B],K=$.length,this.globalData.canvasContext.moveTo($[0],$[1]);for(C=2;C<K;C+=6)this.globalData.canvasContext.bezierCurveTo($[C],$[C+1],$[C+2],$[C+3],$[C+4],$[C+5])}this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}if(Y)this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var A=createTag("canvas");A.width=this.assetData.w,A.height=this.assetData.h;var Q=A.getContext("2d"),E=this.img.width,B=this.img.height,I=E/B,C=this.assetData.w/this.assetData.h,K,J,U=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;if(I>C&&U==="xMidYMid slice"||I<C&&U!=="xMidYMid slice")J=B,K=J*C;else K=E,J=K/C;Q.drawImage(this.img,(E-K)/2,(B-J)/2,K,J,0,0,this.assetData.w,this.assetData.h),this.img=A}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var A=this.canvasContext;A.fillStyle=this.data.sc,A.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(A){return new CVShapeElement(A,this.globalData,this)},CanvasRendererBase.prototype.createText=function(A){return new CVTextElement(A,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(A){return new CVImageElement(A,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(A){return new CVSolidElement(A,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(A){if(A[0]===1&&A[1]===0&&A[4]===0&&A[5]===1&&A[12]===0&&A[13]===0)return;if(!this.renderConfig.clearCanvas){this.canvasContext.transform(A[0],A[1],A[4],A[5],A[12],A[13]);return}this.transformMat.cloneFromProps(A);var Q=this.contextData.cTr.props;this.transformMat.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],Q[7],Q[8],Q[9],Q[10],Q[11],Q[12],Q[13],Q[14],Q[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var E=this.contextData.cTr.props;this.canvasContext.setTransform(E[0],E[1],E[4],E[5],E[12],E[13])},CanvasRendererBase.prototype.ctxOpacity=function(A){if(!this.renderConfig.clearCanvas){this.canvasContext.globalAlpha*=A<0?0:A,this.globalData.currentGlobalAlpha=this.contextData.cO;return}if(this.contextData.cO*=A<0?0:A,this.globalData.currentGlobalAlpha!==this.contextData.cO)this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(A){if(!this.renderConfig.clearCanvas){this.canvasContext.save();return}if(A)this.canvasContext.save();var Q=this.contextData.cTr.props;if(this.contextData._length<=this.contextData.cArrPos)this.contextData.duplicate();var E,B=this.contextData.saved[this.contextData.cArrPos];for(E=0;E<16;E+=1)B[E]=Q[E];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1},CanvasRendererBase.prototype.restore=function(A){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}if(A)this.canvasContext.restore(),this.globalData.blendMode="source-over";this.contextData.cArrPos-=1;var Q=this.contextData.saved[this.contextData.cArrPos],E,B=this.contextData.cTr.props;for(E=0;E<16;E+=1)B[E]=Q[E];if(this.canvasContext.setTransform(Q[0],Q[1],Q[4],Q[5],Q[12],Q[13]),Q=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=Q,this.globalData.currentGlobalAlpha!==Q)this.canvasContext.globalAlpha=Q,this.globalData.currentGlobalAlpha=Q},CanvasRendererBase.prototype.configAnimation=function(A){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var Q=this.animationItem.container.style;Q.width="100%",Q.height="100%";var E="0px 0px 0px";if(Q.transformOrigin=E,Q.mozTransformOrigin=E,Q.webkitTransformOrigin=E,Q["-webkit-transform"]=E,Q.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className)this.animationItem.container.setAttribute("class",this.renderConfig.className);if(this.renderConfig.id)this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=A,this.layers=A.layers,this.transformCanvas={w:A.w,h:A.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(A,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(A.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(){this.reset();var A,Q;if(this.animationItem.wrapper&&this.animationItem.container)A=this.animationItem.wrapper.offsetWidth,Q=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",A*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",Q*this.renderConfig.dpr);else A=this.canvasContext.canvas.width*this.renderConfig.dpr,Q=this.canvasContext.canvas.height*this.renderConfig.dpr;var E,B;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var I=this.renderConfig.preserveAspectRatio.split(" "),C=I[1]||"meet",K=I[0]||"xMidYMid",J=K.substr(0,4),U=K.substr(4);if(E=A/Q,B=this.transformCanvas.w/this.transformCanvas.h,B>E&&C==="meet"||B<E&&C==="slice")this.transformCanvas.sx=A/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=A/(this.transformCanvas.w/this.renderConfig.dpr);else this.transformCanvas.sx=Q/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=Q/(this.transformCanvas.h/this.renderConfig.dpr);if(J==="xMid"&&(B<E&&C==="meet"||B>E&&C==="slice"))this.transformCanvas.tx=(A-this.transformCanvas.w*(Q/this.transformCanvas.h))/2*this.renderConfig.dpr;else if(J==="xMax"&&(B<E&&C==="meet"||B>E&&C==="slice"))this.transformCanvas.tx=(A-this.transformCanvas.w*(Q/this.transformCanvas.h))*this.renderConfig.dpr;else this.transformCanvas.tx=0;if(U==="YMid"&&(B>E&&C==="meet"||B<E&&C==="slice"))this.transformCanvas.ty=(Q-this.transformCanvas.h*(A/this.transformCanvas.w))/2*this.renderConfig.dpr;else if(U==="YMax"&&(B>E&&C==="meet"||B<E&&C==="slice"))this.transformCanvas.ty=(Q-this.transformCanvas.h*(A/this.transformCanvas.w))*this.renderConfig.dpr;else this.transformCanvas.ty=0}else if(this.renderConfig.preserveAspectRatio==="none")this.transformCanvas.sx=A/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=Q/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0;else this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0;this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){if(this.renderConfig.clearCanvas&&this.animationItem.wrapper)this.animationItem.wrapper.innerText="";var A,Q=this.layers?this.layers.length:0;for(A=Q-1;A>=0;A-=1)if(this.elements[A])this.elements[A].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(A,Q){if(this.renderedFrame===A&&this.renderConfig.clearCanvas===!0&&!Q||this.destroyed||A===-1)return;this.renderedFrame=A,this.globalData.frameNum=A-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||Q,this.globalData.projectInterface.currentFrame=A;var E,B=this.layers.length;if(!this.completeLayers)this.checkLayers(A);for(E=0;E<B;E+=1)if(this.completeLayers||this.elements[E])this.elements[E].prepareFrame(A-this.layers[E].st);if(this.globalData._mdf){if(this.renderConfig.clearCanvas===!0)this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h);else this.save();for(E=B-1;E>=0;E-=1)if(this.completeLayers||this.elements[E])this.elements[E].renderFrame();if(this.renderConfig.clearCanvas!==!0)this.restore()}},CanvasRendererBase.prototype.buildItem=function(A){var Q=this.elements;if(Q[A]||this.layers[A].ty===99)return;var E=this.createItem(this.layers[A],this,this.globalData);Q[A]=E,E.initExpressions()},CanvasRendererBase.prototype.checkPendingElements=function(){while(this.pendingElements.length){var A=this.pendingElements.pop();A.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var A=this.canvasContext;A.beginPath(),A.moveTo(0,0),A.lineTo(this.data.w,0),A.lineTo(this.data.w,this.data.h),A.lineTo(0,this.data.h),A.lineTo(0,0),A.clip();var Q,E=this.layers.length;for(Q=E-1;Q>=0;Q-=1)if(this.completeLayers||this.elements[Q])this.elements[Q].renderFrame()},CVCompElement.prototype.destroy=function(){var A,Q=this.layers.length;for(A=Q-1;A>=0;A-=1)if(this.elements[A])this.elements[A].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(A){return new CVCompElement(A,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(A){return new CVCompElement(A,this.globalData,this)},registerRenderer("canvas",CanvasRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier);let Expressions=function(){var A={};A.initExpressions=Q;function Q(E){var B=0,I=[];function C(){B+=1}function K(){if(B-=1,B===0)U()}function J(Y){if(I.indexOf(Y)===-1)I.push(Y)}function U(){var Y,H=I.length;for(Y=0;Y<H;Y+=1)I[Y].release();I.length=0}E.renderer.compInterface=CompExpressionInterface(E.renderer),E.renderer.globalData.projectInterface.registerComposition(E.renderer),E.renderer.globalData.pushExpression=C,E.renderer.globalData.popExpression=K,E.renderer.globalData.registerExpressionProperty=J}return A}();propTypes={SHAPE:"shape"};let ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;initialize$2(BMMath);function $bm_isInstanceOfArray(A){return A.constructor===Array||A.constructor===Float32Array}function isNumerable(A,Q){return A==="number"||A==="boolean"||A==="string"||Q instanceof Number}function $bm_neg(A){var Q=typeof A;if(Q==="number"||Q==="boolean"||A instanceof Number)return-A;if($bm_isInstanceOfArray(A)){var E,B=A.length,I=[];for(E=0;E<B;E+=1)I[E]=-A[E];return I}if(A.propType)return A.v;return-A}var easeInBez=BezierFactory.getBezierEasing(0.333,0,0.833,0.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(0.167,0.167,0.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(0.33,0,0.667,1,"easeInOut").get;function sum(A,Q){var E=typeof A,B=typeof Q;if(E==="string"||B==="string")return A+Q;if(isNumerable(E,A)&&isNumerable(B,Q))return A+Q;if($bm_isInstanceOfArray(A)&&isNumerable(B,Q))return A=A.slice(0),A[0]+=Q,A;if(isNumerable(E,A)&&$bm_isInstanceOfArray(Q))return Q=Q.slice(0),Q[0]=A+Q[0],Q;if($bm_isInstanceOfArray(A)&&$bm_isInstanceOfArray(Q)){var I=0,C=A.length,K=Q.length,J=[];while(I<C||I<K){if((typeof A[I]==="number"||A[I]instanceof Number)&&(typeof Q[I]==="number"||Q[I]instanceof Number))J[I]=A[I]+Q[I];else J[I]=Q[I]===void 0?A[I]:A[I]||Q[I];I+=1}return J}return 0}var add=sum;function sub(A,Q){var E=typeof A,B=typeof Q;if(isNumerable(E,A)&&isNumerable(B,Q)){if(E==="string")A=parseInt(A,10);if(B==="string")Q=parseInt(Q,10);return A-Q}if($bm_isInstanceOfArray(A)&&isNumerable(B,Q))return A=A.slice(0),A[0]-=Q,A;if(isNumerable(E,A)&&$bm_isInstanceOfArray(Q))return Q=Q.slice(0),Q[0]=A-Q[0],Q;if($bm_isInstanceOfArray(A)&&$bm_isInstanceOfArray(Q)){var I=0,C=A.length,K=Q.length,J=[];while(I<C||I<K){if((typeof A[I]==="number"||A[I]instanceof Number)&&(typeof Q[I]==="number"||Q[I]instanceof Number))J[I]=A[I]-Q[I];else J[I]=Q[I]===void 0?A[I]:A[I]||Q[I];I+=1}return J}return 0}function mul(A,Q){var E=typeof A,B=typeof Q,I;if(isNumerable(E,A)&&isNumerable(B,Q))return A*Q;var C,K;if($bm_isInstanceOfArray(A)&&isNumerable(B,Q)){K=A.length,I=createTypedArray("float32",K);for(C=0;C<K;C+=1)I[C]=A[C]*Q;return I}if(isNumerable(E,A)&&$bm_isInstanceOfArray(Q)){K=Q.length,I=createTypedArray("float32",K);for(C=0;C<K;C+=1)I[C]=A*Q[C];return I}return 0}function div(A,Q){var E=typeof A,B=typeof Q,I;if(isNumerable(E,A)&&isNumerable(B,Q))return A/Q;var C,K;if($bm_isInstanceOfArray(A)&&isNumerable(B,Q)){K=A.length,I=createTypedArray("float32",K);for(C=0;C<K;C+=1)I[C]=A[C]/Q;return I}if(isNumerable(E,A)&&$bm_isInstanceOfArray(Q)){K=Q.length,I=createTypedArray("float32",K);for(C=0;C<K;C+=1)I[C]=A/Q[C];return I}return 0}function mod(A,Q){if(typeof A==="string")A=parseInt(A,10);if(typeof Q==="string")Q=parseInt(Q,10);return A%Q}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(A,Q,E){if(Q>E){var B=E;E=Q,Q=B}return Math.min(Math.max(A,Q),E)}function radiansToDegrees(A){return A/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(A){return A*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(A,Q){if(typeof A==="number"||A instanceof Number)return Q=Q||0,Math.abs(A-Q);if(!Q)Q=helperLengthArray;var E,B=Math.min(A.length,Q.length),I=0;for(E=0;E<B;E+=1)I+=Math.pow(Q[E]-A[E],2);return Math.sqrt(I)}function normalize(A){return div(A,length(A))}function rgbToHsl(A){var Q=A[0],E=A[1],B=A[2],I=Math.max(Q,E,B),C=Math.min(Q,E,B),K,J,U=(I+C)/2;if(I===C)K=0,J=0;else{var Y=I-C;switch(J=U>0.5?Y/(2-I-C):Y/(I+C),I){case Q:K=(E-B)/Y+(E<B?6:0);break;case E:K=(B-Q)/Y+2;break;case B:K=(Q-E)/Y+4;break;default:break}K/=6}return[K,J,U,A[3]]}function hue2rgb(A,Q,E){if(E<0)E+=1;if(E>1)E-=1;if(E<0.16666666666666666)return A+(Q-A)*6*E;if(E<0.5)return Q;if(E<0.6666666666666666)return A+(Q-A)*(0.6666666666666666-E)*6;return A}function hslToRgb(A){var Q=A[0],E=A[1],B=A[2],I,C,K;if(E===0)I=B,K=B,C=B;else{var J=B<0.5?B*(1+E):B+E-B*E,U=2*B-J;I=hue2rgb(U,J,Q+0.3333333333333333),C=hue2rgb(U,J,Q),K=hue2rgb(U,J,Q-0.3333333333333333)}return[I,C,K,A[3]]}function linear(A,Q,E,B,I){if(B===void 0||I===void 0)B=Q,I=E,Q=0,E=1;if(E<Q){var C=E;E=Q,Q=C}if(A<=Q)return B;if(A>=E)return I;var K=E===Q?0:(A-Q)/(E-Q);if(!B.length)return B+(I-B)*K;var J,U=B.length,Y=createTypedArray("float32",U);for(J=0;J<U;J+=1)Y[J]=B[J]+(I[J]-B[J])*K;return Y}function random(A,Q){if(Q===void 0)if(A===void 0)A=0,Q=1;else Q=A,A=void 0;if(Q.length){var E,B=Q.length;if(!A)A=createTypedArray("float32",B);var I=createTypedArray("float32",B),C=BMMath.random();for(E=0;E<B;E+=1)I[E]=A[E]+C*(Q[E]-A[E]);return I}if(A===void 0)A=0;var K=BMMath.random();return A+K*(Q-A)}function createPath(A,Q,E,B){var I,C=A.length,K=shapePool.newElement();K.setPathData(!!B,C);var J=[0,0],U,Y;for(I=0;I<C;I+=1)U=Q&&Q[I]?Q[I]:J,Y=E&&E[I]?E[I]:J,K.setTripleAt(A[I][0],A[I][1],Y[0]+A[I][0],Y[1]+A[I][1],U[0]+A[I][0],U[1]+A[I][1],I,!0);return K}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function A(Q,E){var B,I,C=this.pv.length?this.pv.length:1,K=createTypedArray("float32",C);Q=5;var J=Math.floor(time*Q);B=0,I=0;while(B<J){for(I=0;I<C;I+=1)K[I]+=-E+E*2*BMMath.random();B+=1}var U=time*Q,Y=U-Math.floor(U),H=createTypedArray("float32",C);if(C>1){for(I=0;I<C;I+=1)H[I]=this.pv[I]+K[I]+(-E+E*2*BMMath.random())*Y;return H}return this.pv+K[0]+(-E+E*2*BMMath.random())*Y}.bind(this);if(thisProperty.loopIn)loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn;if(thisProperty.loopOut)loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut;if(thisProperty.smooth)smooth=thisProperty.smooth.bind(thisProperty);function loopInDuration(A,Q){return loopIn(A,Q,!0)}function loopOutDuration(A,Q){return loopOut(A,Q,!0)}if(this.getValueAtTime)valueAtTime=this.getValueAtTime.bind(this);if(this.getVelocityAtTime)velocityAtTime=this.getVelocityAtTime.bind(this);var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(A,Q){var E=[Q[0]-A[0],Q[1]-A[1],Q[2]-A[2]],B=Math.atan2(E[0],Math.sqrt(E[1]*E[1]+E[2]*E[2]))/degToRads,I=-Math.atan2(E[1],E[2])/degToRads;return[I,B,0]}function easeOut(A,Q,E,B,I){return applyEase(easeOutBez,A,Q,E,B,I)}function easeIn(A,Q,E,B,I){return applyEase(easeInBez,A,Q,E,B,I)}function ease(A,Q,E,B,I){return applyEase(easeInOutBez,A,Q,E,B,I)}function applyEase(A,Q,E,B,I,C){if(I===void 0)I=E,C=B;else Q=(Q-E)/(B-E);if(Q>1)Q=1;else if(Q<0)Q=0;var K=A(Q);if($bm_isInstanceOfArray(I)){var J,U=I.length,Y=createTypedArray("float32",U);for(J=0;J<U;J+=1)Y[J]=(C[J]-I[J])*K+I[J];return Y}return(C-I)*K+I}function nearestKey(A){var Q,E=data.k.length,B,I;if(!data.k.length||typeof data.k[0]==="number")B=0,I=0;else if(B=-1,A*=elem.comp.globalData.frameRate,A<data.k[0].t)B=1,I=data.k[0].t;else{for(Q=0;Q<E-1;Q+=1)if(A===data.k[Q].t){B=Q+1,I=data.k[Q].t;break}else if(A>data.k[Q].t&&A<data.k[Q+1].t){if(A-data.k[Q].t>data.k[Q+1].t-A)B=Q+2,I=data.k[Q+1].t;else B=Q+1,I=data.k[Q].t;break}if(B===-1)B=Q+1,I=data.k[Q].t}var C={};return C.index=B,C.time=I/elem.comp.globalData.frameRate,C}function key(A){var Q,E,B;if(!data.k.length||typeof data.k[0]==="number")throw new Error("The property has no keyframe at index "+A);A-=1,Q={time:data.k[A].t/elem.comp.globalData.frameRate,value:[]};var I=Object.prototype.hasOwnProperty.call(data.k[A],"s")?data.k[A].s:data.k[A-1].e;B=I.length;for(E=0;E<B;E+=1)Q[E]=I[E],Q.value[E]=I[E];return Q}function framesToTime(A,Q){if(!Q)Q=elem.comp.globalData.frameRate;return A/Q}function timeToFrames(A,Q){if(!A&&A!==0)A=time;if(!Q)Q=elem.comp.globalData.frameRate;return A*Q}function seedRandom(A){BMMath.seedrandom(randSeed+A)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(A,Q){if(typeof value==="string"){if(Q===void 0)return value.substring(A);return value.substring(A,Q)}return""}function substr(A,Q){if(typeof value==="string"){if(Q===void 0)return value.substr(A);return value.substr(A,Q)}return""}function posterizeTime(A){time=A===0?0:Math.floor(time*A)/A,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(A){if(value=A,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector")return value;if(this.propType==="textSelector")textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue;if(!thisLayer)text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp;if(!transform){if(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform)anchorPoint=transform.anchorPoint}if(elemType===4&&!content)content=thisLayer("ADBE Root Vectors Group");if(!effect)effect=thisLayer(4);if(hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent)parent=elem.hierarchy[0].layerInterface;if(time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom)seedRandom(randSeed+time);if(needsVelocity)velocity=velocityAtTime(time);return expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers=function(){function A(K,J,U){if(J.x)U.k=!0,U.x=!0,U.initiateExpression=ExpressionManager.initiateExpression,U.effectsSequence.push(U.initiateExpression(K,J,U).bind(U))}function Q(K){if(K*=this.elem.globalData.frameRate,K-=this.offsetTime,K!==this._cachingAtTime.lastFrame)this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<K?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(K,this._cachingAtTime),this._cachingAtTime.lastFrame=K;return this._cachingAtTime.value}function E(K){var J=-0.01,U=this.getValueAtTime(K),Y=this.getValueAtTime(K+J),H=0;if(U.length){var R;for(R=0;R<U.length;R+=1)H+=Math.pow(Y[R]-U[R],2);H=Math.sqrt(H)*100}else H=0;return H}function B(K){if(this.vel!==void 0)return this.vel;var J=-0.001,U=this.getValueAtTime(K),Y=this.getValueAtTime(K+J),H;if(U.length){H=createTypedArray("float32",U.length);var R;for(R=0;R<U.length;R+=1)H[R]=(Y[R]-U[R])/J}else H=(Y-U)/J;return H}function I(){return this.pv}function C(K){this.propertyGroup=K}return{searchExpressions:A,getSpeedAtTime:E,getVelocityAtTime:B,getValueAtTime:Q,getStaticValueAtTime:I,setGroupProperty:C}}();setExpressionsPlugin(Expressions),initialize$1(),initialize()}var standalone,animationData,renderer,queryString,fH,EW,uH,readyStateCheckInterval,registeredEffects,idPrefix,emptyShapeData,propTypes;var Lg=new y,qg=new y,Fg=new y,Dg=new y,Mg=new y,wg=new a;var Vg=new a;var gg=Array(1024).fill(0).map((A,Q)=>Math.pow(Q/255*0.9478672986+0.0521327014,2.4));var j0={};j0.toRGBA8=function(A){var{width:Q,height:E}=A;if(A.tabs.acTL==null)return[j0.toRGBA8.decodeImage(A.data,Q,E,A).buffer];var B=[];if(A.frames[0].data==null)A.frames[0].data=A.data;var I=Q*E*4,C=new Uint8Array(I),K=new Uint8Array(I),J=new Uint8Array(I);for(var U=0;U<A.frames.length;U++){var Y=A.frames[U],H=Y.rect.x,R=Y.rect.y,O=Y.rect.width,N=Y.rect.height,$=j0.toRGBA8.decodeImage(Y.data,O,N,A);if(U!=0)for(var L=0;L<I;L++)J[L]=C[L];if(Y.blend==0)j0._copyTile($,O,N,C,Q,E,H,R,0);else if(Y.blend==1)j0._copyTile($,O,N,C,Q,E,H,R,1);if(B.push(C.buffer.slice(0)),Y.dispose==1)j0._copyTile(K,O,N,C,Q,E,H,R,0);else if(Y.dispose==2)for(var L=0;L<I;L++)C[L]=J[L]}return B};j0.toRGBA8.decodeImage=function(A,Q,E,B){var I=Q*E,C=j0.decode._getBPP(B),K=Math.ceil(Q*C/8),J=new Uint8Array(I*4),U=new Uint32Array(J.buffer),Y=B.ctype,H=B.depth,R=j0._bin.readUshort;if(Y==6){var O=I<<2;if(H==8)for(var N=0;N<O;N+=4)J[N]=A[N],J[N+1]=A[N+1],J[N+2]=A[N+2],J[N+3]=A[N+3];if(H==16)for(var N=0;N<O;N++)J[N]=A[N<<1]}else if(Y==2){var $=B.tabs.tRNS;if($==null){if(H==8)for(var N=0;N<I;N++){var L=N*3;U[N]=-16777216|A[L+2]<<16|A[L+1]<<8|A[L]}if(H==16)for(var N=0;N<I;N++){var L=N*6;U[N]=-16777216|A[L+4]<<16|A[L+2]<<8|A[L]}}else{var W=$[0],Z=$[1],G=$[2];if(H==8)for(var N=0;N<I;N++){var X=N<<2,L=N*3;if(U[N]=-16777216|A[L+2]<<16|A[L+1]<<8|A[L],A[L]==W&&A[L+1]==Z&&A[L+2]==G)J[X+3]=0}if(H==16)for(var N=0;N<I;N++){var X=N<<2,L=N*6;if(U[N]=-16777216|A[L+4]<<16|A[L+2]<<8|A[L],R(A,L)==W&&R(A,L+2)==Z&&R(A,L+4)==G)J[X+3]=0}}}else if(Y==3){var q=B.tabs.PLTE,M=B.tabs.tRNS,F=M?M.length:0;if(H==1)for(var D=0;D<E;D++){var _=D*K,w=D*Q;for(var N=0;N<Q;N++){var X=w+N<<2,k=A[_+(N>>3)]>>7-((N&7)<<0)&1,T=3*k;J[X]=q[T],J[X+1]=q[T+1],J[X+2]=q[T+2],J[X+3]=k<F?M[k]:255}}if(H==2)for(var D=0;D<E;D++){var _=D*K,w=D*Q;for(var N=0;N<Q;N++){var X=w+N<<2,k=A[_+(N>>2)]>>6-((N&3)<<1)&3,T=3*k;J[X]=q[T],J[X+1]=q[T+1],J[X+2]=q[T+2],J[X+3]=k<F?M[k]:255}}if(H==4)for(var D=0;D<E;D++){var _=D*K,w=D*Q;for(var N=0;N<Q;N++){var X=w+N<<2,k=A[_+(N>>1)]>>4-((N&1)<<2)&15,T=3*k;J[X]=q[T],J[X+1]=q[T+1],J[X+2]=q[T+2],J[X+3]=k<F?M[k]:255}}if(H==8)for(var N=0;N<I;N++){var X=N<<2,k=A[N],T=3*k;J[X]=q[T],J[X+1]=q[T+1],J[X+2]=q[T+2],J[X+3]=k<F?M[k]:255}}else if(Y==4){if(H==8)for(var N=0;N<I;N++){var X=N<<2,z=N<<1,j=A[z];J[X]=j,J[X+1]=j,J[X+2]=j,J[X+3]=A[z+1]}if(H==16)for(var N=0;N<I;N++){var X=N<<2,z=N<<2,j=A[z];J[X]=j,J[X+1]=j,J[X+2]=j,J[X+3]=A[z+2]}}else if(Y==0){var W=B.tabs.tRNS?B.tabs.tRNS:-1;for(var D=0;D<E;D++){var v=D*K,g=D*Q;if(H==1)for(var P=0;P<Q;P++){var j=255*(A[v+(P>>>3)]>>>7-(P&7)&1),V=j==W*255?0:255;U[g+P]=V<<24|j<<16|j<<8|j}else if(H==2)for(var P=0;P<Q;P++){var j=85*(A[v+(P>>>2)]>>>6-((P&3)<<1)&3),V=j==W*85?0:255;U[g+P]=V<<24|j<<16|j<<8|j}else if(H==4)for(var P=0;P<Q;P++){var j=17*(A[v+(P>>>1)]>>>4-((P&1)<<2)&15),V=j==W*17?0:255;U[g+P]=V<<24|j<<16|j<<8|j}else if(H==8)for(var P=0;P<Q;P++){var j=A[v+P],V=j==W?0:255;U[g+P]=V<<24|j<<16|j<<8|j}else if(H==16)for(var P=0;P<Q;P++){var j=A[v+(P<<1)],V=R(A,v+(P<<1))==W?0:255;U[g+P]=V<<24|j<<16|j<<8|j}}}return J};j0.decode=function(A){var Q=new Uint8Array(A),E=8,B=j0._bin,I=B.readUshort,C=B.readUint,K={tabs:{},frames:[]},J=new Uint8Array(Q.length),U=0,Y,H=0,R,O,N,$=[137,80,78,71,13,10,26,10];for(var L=0;L<8;L++)if(Q[L]!=$[L])throw new Error("The input is not a PNG file!");while(E<Q.length){var W=B.readUint(Q,E);E+=4;var Z=B.readASCII(Q,E,4);if(E+=4,Z=="IHDR")j0.decode._IHDR(Q,E,K);else if(Z=="CgBI")K.tabs[Z]=Q.slice(E,E+4);else if(Z=="IDAT"){for(var L=0;L<W;L++)J[U+L]=Q[E+L];U+=W}else if(Z=="acTL")K.tabs[Z]={num_frames:C(Q,E),num_plays:C(Q,E+4)},Y=new Uint8Array(Q.length);else if(Z=="fcTL"){if(H!=0){var G=K.frames[K.frames.length-1];G.data=j0.decode._decompress(K,Y.slice(0,H),G.rect.width,G.rect.height),H=0}var X={x:C(Q,E+12),y:C(Q,E+16),width:C(Q,E+4),height:C(Q,E+8)},q=I(Q,E+22);q=I(Q,E+20)/(q==0?100:q);var M={rect:X,delay:Math.round(q*1000),dispose:Q[E+24],blend:Q[E+25]};K.frames.push(M)}else if(Z=="fdAT"){for(var L=0;L<W-4;L++)Y[H+L]=Q[E+L+4];H+=W-4}else if(Z=="pHYs")K.tabs[Z]=[B.readUint(Q,E),B.readUint(Q,E+4),Q[E+8]];else if(Z=="cHRM"){K.tabs[Z]=[];for(var L=0;L<8;L++)K.tabs[Z].push(B.readUint(Q,E+L*4))}else if(Z=="tEXt"||Z=="zTXt"){if(K.tabs[Z]==null)K.tabs[Z]={};var F=B.nextZero(Q,E);O=B.readASCII(Q,E,F-E);var D=E+W-F-1;if(Z=="tEXt")R=B.readASCII(Q,F+1,D);else N=j0.decode._inflate(Q.slice(F+2,F+2+D)),R=B.readUTF8(N,0,N.length);K.tabs[Z][O]=R}else if(Z=="iTXt"){if(K.tabs[Z]==null)K.tabs[Z]={};var F=0,_=E;F=B.nextZero(Q,_),O=B.readASCII(Q,_,F-_),_=F+1;var w=Q[_];_+=2,F=B.nextZero(Q,_),B.readASCII(Q,_,F-_),_=F+1,F=B.nextZero(Q,_),B.readUTF8(Q,_,F-_),_=F+1;var D=W-(_-E);if(w==0)R=B.readUTF8(Q,_,D);else N=j0.decode._inflate(Q.slice(_,_+D)),R=B.readUTF8(N,0,N.length);K.tabs[Z][O]=R}else if(Z=="PLTE")K.tabs[Z]=B.readBytes(Q,E,W);else if(Z=="hIST"){var k=K.tabs.PLTE.length/3;K.tabs[Z]=[];for(var L=0;L<k;L++)K.tabs[Z].push(I(Q,E+L*2))}else if(Z=="tRNS"){if(K.ctype==3)K.tabs[Z]=B.readBytes(Q,E,W);else if(K.ctype==0)K.tabs[Z]=I(Q,E);else if(K.ctype==2)K.tabs[Z]=[I(Q,E),I(Q,E+2),I(Q,E+4)]}else if(Z=="gAMA")K.tabs[Z]=B.readUint(Q,E)/1e5;else if(Z=="sRGB")K.tabs[Z]=Q[E];else if(Z=="bKGD"){if(K.ctype==0||K.ctype==4)K.tabs[Z]=[I(Q,E)];else if(K.ctype==2||K.ctype==6)K.tabs[Z]=[I(Q,E),I(Q,E+2),I(Q,E+4)];else if(K.ctype==3)K.tabs[Z]=Q[E]}else if(Z=="IEND")break;E+=W,B.readUint(Q,E),E+=4}if(H!=0){var G=K.frames[K.frames.length-1];G.data=j0.decode._decompress(K,Y.slice(0,H),G.rect.width,G.rect.height)}return K.data=j0.decode._decompress(K,J,K.width,K.height),delete K.compress,delete K.interlace,delete K.filter,K};j0.decode._decompress=function(A,Q,E,B){var I=j0.decode._getBPP(A),C=Math.ceil(E*I/8),K=new Uint8Array((C+1+A.interlace)*B);if(A.tabs.CgBI)Q=j0.inflateRaw(Q,K);else Q=j0.decode._inflate(Q,K);if(A.interlace==0)Q=j0.decode._filterZero(Q,A,0,E,B);else if(A.interlace==1)Q=j0.decode._readInterlace(Q,A);return Q};j0.decode._inflate=function(A,Q){var E=j0.inflateRaw(new Uint8Array(A.buffer,2,A.length-6),Q);return E};j0.inflateRaw=function(){var A={};return A.H={},A.H.N=function(Q,E){var B=Uint8Array,I=0,C=0,K=0,J=0,U=0,Y=0,H=0,R=0,O=0,N,$;if(Q[0]==3&&Q[1]==0)return E?E:new B(0);var L=A.H,W=L.b,Z=L.e,G=L.R,X=L.n,q=L.A,M=L.Z,F=L.m,D=E==null;if(D)E=new B(Q.length>>>2<<5);while(I==0){if(I=W(Q,O,1),C=W(Q,O+1,2),O+=3,C==0){if((O&7)!=0)O+=8-(O&7);var _=(O>>>3)+4,w=Q[_-4]|Q[_-3]<<8;if(D)E=A.H.W(E,R+w);E.set(new B(Q.buffer,Q.byteOffset+_,w),R),O=_+w<<3,R+=w;continue}if(D)E=A.H.W(E,R+131072);if(C==1)N=F.J,$=F.h,Y=511,H=31;if(C==2){K=Z(Q,O,5)+257,J=Z(Q,O+5,5)+1,U=Z(Q,O+10,4)+4,O+=14;var k=1;for(var T=0;T<38;T+=2)F.Q[T]=0,F.Q[T+1]=0;for(var T=0;T<U;T++){var z=Z(Q,O+T*3,3);if(F.Q[(F.X[T]<<1)+1]=z,z>k)k=z}O+=3*U,X(F.Q,k),q(F.Q,k,F.u),N=F.w,$=F.d,O=G(F.u,(1<<k)-1,K+J,Q,O,F.v);var j=L.V(F.v,0,K,F.C);Y=(1<<j)-1;var v=L.V(F.v,K,J,F.D);H=(1<<v)-1,X(F.C,j),q(F.C,j,N),X(F.D,v),q(F.D,v,$)}while(!0){var g=N[M(Q,O)&Y];O+=g&15;var P=g>>>4;if(P>>>8==0)E[R++]=P;else if(P==256)break;else{var V=R+P-254;if(P>264){var S=F.q[P-257];V=R+(S>>>3)+Z(Q,O,S&7),O+=S&7}var h=$[M(Q,O)&H];O+=h&15;var x=h>>>4,b=F.c[x],m=(b>>>4)+W(Q,O,b&15);O+=b&15;while(R<V)E[R]=E[R++-m],E[R]=E[R++-m],E[R]=E[R++-m],E[R]=E[R++-m];R=V}}}return E.length==R?E:E.slice(0,R)},A.H.W=function(Q,E){var B=Q.length;if(E<=B)return Q;var I=new Uint8Array(B<<1);return I.set(Q,0),I},A.H.R=function(Q,E,B,I,C,K){var J=A.H.e,U=A.H.Z,Y=0;while(Y<B){var H=Q[U(I,C)&E];C+=H&15;var R=H>>>4;if(R<=15)K[Y]=R,Y++;else{var O=0,N=0;if(R==16)N=3+J(I,C,2),C+=2,O=K[Y-1];else if(R==17)N=3+J(I,C,3),C+=3;else if(R==18)N=11+J(I,C,7),C+=7;var $=Y+N;while(Y<$)K[Y]=O,Y++}}return C},A.H.V=function(Q,E,B,I){var C=0,K=0,J=I.length>>>1;while(K<B){var U=Q[K+E];if(I[K<<1]=0,I[(K<<1)+1]=U,U>C)C=U;K++}while(K<J)I[K<<1]=0,I[(K<<1)+1]=0,K++;return C},A.H.n=function(Q,E){var B=A.H.m,I=Q.length,C,K,J,U,Y,H=B.j;for(var U=0;U<=E;U++)H[U]=0;for(U=1;U<I;U+=2)H[Q[U]]++;var R=B.K;C=0,H[0]=0;for(K=1;K<=E;K++)C=C+H[K-1]<<1,R[K]=C;for(J=0;J<I;J+=2)if(Y=Q[J+1],Y!=0)Q[J]=R[Y],R[Y]++},A.H.A=function(Q,E,B){var I=Q.length,C=A.H.m,K=C.r;for(var J=0;J<I;J+=2)if(Q[J+1]!=0){var U=J>>1,Y=Q[J+1],H=U<<4|Y,R=E-Y,O=Q[J]<<R,N=O+(1<<R);while(O!=N){var $=K[O]>>>15-E;B[$]=H,O++}}},A.H.l=function(Q,E){var B=A.H.m.r,I=15-E;for(var C=0;C<Q.length;C+=2){var K=Q[C]<<E-Q[C+1];Q[C]=B[K]>>>I}},A.H.M=function(Q,E,B){B=B<<(E&7);var I=E>>>3;Q[I]|=B,Q[I+1]|=B>>>8},A.H.I=function(Q,E,B){B=B<<(E&7);var I=E>>>3;Q[I]|=B,Q[I+1]|=B>>>8,Q[I+2]|=B>>>16},A.H.e=function(Q,E,B){return(Q[E>>>3]|Q[(E>>>3)+1]<<8)>>>(E&7)&(1<<B)-1},A.H.b=function(Q,E,B){return(Q[E>>>3]|Q[(E>>>3)+1]<<8|Q[(E>>>3)+2]<<16)>>>(E&7)&(1<<B)-1},A.H.Z=function(Q,E){return(Q[E>>>3]|Q[(E>>>3)+1]<<8|Q[(E>>>3)+2]<<16)>>>(E&7)},A.H.i=function(Q,E){return(Q[E>>>3]|Q[(E>>>3)+1]<<8|Q[(E>>>3)+2]<<16|Q[(E>>>3)+3]<<24)>>>(E&7)},A.H.m=function(){var Q=Uint16Array,E=Uint32Array;return{K:new Q(16),j:new Q(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new Q(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new E(32),J:new Q(512),_:[],h:new Q(32),$:[],w:new Q(32768),C:[],v:[],d:new Q(32768),D:[],u:new Q(512),Q:[],r:new Q(32768),s:new E(286),Y:new E(30),a:new E(19),t:new E(15000),k:new Q(65536),g:new Q(32768)}}(),function(){var Q=A.H.m,E=32768;for(var B=0;B<E;B++){var I=B;I=(I&2863311530)>>>1|(I&1431655765)<<1,I=(I&3435973836)>>>2|(I&858993459)<<2,I=(I&4042322160)>>>4|(I&252645135)<<4,I=(I&4278255360)>>>8|(I&16711935)<<8,Q.r[B]=(I>>>16|I<<16)>>>17}function C(K,J,U){while(J--!=0)K.push(0,U)}for(var B=0;B<32;B++)Q.q[B]=Q.S[B]<<3|Q.T[B],Q.c[B]=Q.p[B]<<4|Q.z[B];C(Q._,144,8),C(Q._,112,9),C(Q._,24,7),C(Q._,8,8),A.H.n(Q._,9),A.H.A(Q._,9,Q.J),A.H.l(Q._,9),C(Q.$,32,5),A.H.n(Q.$,5),A.H.A(Q.$,5,Q.h),A.H.l(Q.$,5),C(Q.Q,19,0),C(Q.C,286,0),C(Q.D,30,0),C(Q.v,320,0)}(),A.H.N}();j0.decode._readInterlace=function(A,Q){var{width:E,height:B}=Q,I=j0.decode._getBPP(Q),C=I>>3,K=Math.ceil(E*I/8),J=new Uint8Array(B*K),U=0,Y=[0,0,4,0,2,0,1],H=[0,4,0,2,0,1,0],R=[8,8,8,4,4,2,2],O=[8,8,4,4,2,2,1],N=0;while(N<7){var $=R[N],L=O[N],W=0,Z=0,G=Y[N];while(G<B)G+=$,Z++;var X=H[N];while(X<E)X+=L,W++;var q=Math.ceil(W*I/8);j0.decode._filterZero(A,Q,U,W,Z);var M=0,F=Y[N],D;while(F<B){var _=H[N],w=U+M*q<<3;while(_<E){if(I==1)D=A[w>>3],D=D>>7-(w&7)&1,J[F*K+(_>>3)]|=D<<7-((_&7)<<0);if(I==2)D=A[w>>3],D=D>>6-(w&7)&3,J[F*K+(_>>2)]|=D<<6-((_&3)<<1);if(I==4)D=A[w>>3],D=D>>4-(w&7)&15,J[F*K+(_>>1)]|=D<<4-((_&1)<<2);if(I>=8){var k=F*K+_*C;for(var T=0;T<C;T++)J[k+T]=A[(w>>3)+T]}w+=I,_+=L}M++,F+=$}if(W*Z!=0)U+=Z*(1+q);N=N+1}return J};j0.decode._getBPP=function(A){var Q=[1,null,3,1,2,null,4][A.ctype];return Q*A.depth};j0.decode._filterZero=function(A,Q,E,B,I){var C=j0.decode._getBPP(Q),K=Math.ceil(B*C/8),J=j0.decode._paeth;C=Math.ceil(C/8);var U,Y,H=A[E],R=0;if(H>1)A[E]=[0,0,1][H-2];if(H==3)for(R=C;R<K;R++)A[R+1]=A[R+1]+(A[R+1-C]>>>1)&255;for(var O=0;O<I;O++)if(U=E+O*K,Y=U+O+1,H=A[Y-1],R=0,H==0)for(;R<K;R++)A[U+R]=A[Y+R];else if(H==1){for(;R<C;R++)A[U+R]=A[Y+R];for(;R<K;R++)A[U+R]=A[Y+R]+A[U+R-C]}else if(H==2)for(;R<K;R++)A[U+R]=A[Y+R]+A[U+R-K];else if(H==3){for(;R<C;R++)A[U+R]=A[Y+R]+(A[U+R-K]>>>1);for(;R<K;R++)A[U+R]=A[Y+R]+(A[U+R-K]+A[U+R-C]>>>1)}else{for(;R<C;R++)A[U+R]=A[Y+R]+J(0,A[U+R-K],0);for(;R<K;R++)A[U+R]=A[Y+R]+J(A[U+R-C],A[U+R-K],A[U+R-C-K])}return A};j0.decode._paeth=function(A,Q,E){var B=A+Q-E,I=B-A,C=B-Q,K=B-E;if(I*I<=C*C&&I*I<=K*K)return A;else if(C*C<=K*K)return Q;return E};j0.decode._IHDR=function(A,Q,E){var B=j0._bin;E.width=B.readUint(A,Q),Q+=4,E.height=B.readUint(A,Q),Q+=4,E.depth=A[Q],Q++,E.ctype=A[Q],Q++,E.compress=A[Q],Q++,E.filter=A[Q],Q++,E.interlace=A[Q],Q++};j0._bin={nextZero:function(A,Q){while(A[Q]!=0)Q++;return Q},readUshort:function(A,Q){return A[Q]<<8|A[Q+1]},writeUshort:function(A,Q,E){A[Q]=E>>8&255,A[Q+1]=E&255},readUint:function(A,Q){return A[Q]*16777216+(A[Q+1]<<16|A[Q+2]<<8|A[Q+3])},writeUint:function(A,Q,E){A[Q]=E>>24&255,A[Q+1]=E>>16&255,A[Q+2]=E>>8&255,A[Q+3]=E&255},readASCII:function(A,Q,E){var B="";for(var I=0;I<E;I++)B+=String.fromCharCode(A[Q+I]);return B},writeASCII:function(A,Q,E){for(var B=0;B<E.length;B++)A[Q+B]=E.charCodeAt(B)},readBytes:function(A,Q,E){var B=[];for(var I=0;I<E;I++)B.push(A[Q+I]);return B},pad:function(A){return A.length<2?"0"+A:A},readUTF8:function(A,Q,E){var B="",I;for(var C=0;C<E;C++)B+="%"+j0._bin.pad(A[Q+C].toString(16));try{I=decodeURIComponent(B)}catch(K){return j0._bin.readASCII(A,Q,E)}return I}};j0._copyTile=function(A,Q,E,B,I,C,K,J,U){var Y=Math.min(Q,I),H=Math.min(E,C),R=0,O=0;for(var N=0;N<H;N++)for(var $=0;$<Y;$++){if(K>=0&&J>=0)R=N*Q+$<<2,O=(J+N)*I+K+$<<2;else R=(-J+N)*Q-K+$<<2,O=N*I+$<<2;if(U==0)B[O]=A[R],B[O+1]=A[R+1],B[O+2]=A[R+2],B[O+3]=A[R+3];else if(U==1){var L=A[R+3]*0.00392156862745098,W=A[R]*L,Z=A[R+1]*L,G=A[R+2]*L,X=B[O+3]*0.00392156862745098,q=B[O]*X,M=B[O+1]*X,F=B[O+2]*X,D=1-L,_=L+X*D,w=_==0?0:1/_;B[O+3]=255*_,B[O+0]=(W+q*D)*w,B[O+1]=(Z+M*D)*w,B[O+2]=(G+F*D)*w}else if(U==2){var L=A[R+3],W=A[R],Z=A[R+1],G=A[R+2],X=B[O+3],q=B[O],M=B[O+1],F=B[O+2];if(L==X&&W==q&&Z==M&&G==F)B[O]=0,B[O+1]=0,B[O+2]=0,B[O+3]=0;else B[O]=W,B[O+1]=Z,B[O+2]=G,B[O+3]=L}else if(U==3){var L=A[R+3],W=A[R],Z=A[R+1],G=A[R+2],X=B[O+3],q=B[O],M=B[O+1],F=B[O+2];if(L==X&&W==q&&Z==M&&G==F)continue;if(L<220&&X>20)return!1}}return!0};var OA={};(function(){var A=function C(){function K(J){this.message="JPEG error: "+J}return K.prototype=new Error,K.prototype.name="JpegError",K.constructor=K,K}(),Q=function C(){var K=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),J=4017,U=799,Y=3406,H=2276,R=1567,O=3784,N=5793,$=2896;function L(F){if(F==null)F={};if(F.w==null)F.w=-1;this.V=F.n,this.N=F.w}function W(F,D){var _=0,w=[],k,T,z=16,j;while(z>0&&!F[z-1])z--;w.push({children:[],index:0});var v=w[0];for(k=0;k<z;k++){for(T=0;T<F[k];T++){v=w.pop(),v.children[v.index]=D[_];while(v.index>0)v=w.pop();v.index++,w.push(v);while(w.length<=k)w.push(j={children:[],index:0}),v.children[v.index]=j.children,v=j;_++}if(k+1<z)w.push(j={children:[],index:0}),v.children[v.index]=j.children,v=j}return w[0].children}function Z(F,D,_){return 64*((F.P+1)*D+_)}function G(F,D,_,w,k,T,z,j,v,g){if(g==null)g=!1;var{m:P,Z:V}=_,S=D,h=0,x=0,b=0,m=0,s,i=0,n,l,c,o,e,BA,EA=0,CA,f,NA,YA;function FA(){if(x>0)return x--,h>>x&1;if(h=F[D++],h===255){var qA=F[D++];if(qA){if(qA===220&&g){D+=2;var LA=B(F,D);if(D+=2,LA>0&&LA!==_.s)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",LA)}else if(qA===217){if(g){var _A=i*8;if(_A>0&&_A<_.s/10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",_A)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new A("unexpected marker")}}return x=7,h>>>7}function ZA(qA){var LA=qA;while(!0){switch(LA=LA[FA()],typeof LA){case"number":return LA;case"object":continue}throw new A("invalid huffman sequence")}}function jA(qA){var LA=0;while(qA>0)LA=LA<<1|FA(),qA--;return LA}function wA(qA){if(qA===1)return FA()===1?1:-1;var LA=jA(qA);if(LA>=1<<qA-1)return LA;return LA+(-1<<qA)+1}function VA(qA,LA){var _A=ZA(qA.J),B0=_A===0?0:wA(_A),cA=1;qA.D[LA]=qA.Q+=B0;while(cA<64){var uA=ZA(qA.i),pA=uA&15,iA=uA>>4;if(pA===0){if(iA<15)break;cA+=16;continue}cA+=iA;var $0=K[cA];qA.D[LA+$0]=wA(pA),cA++}}function d(qA,LA){var _A=ZA(qA.J),B0=_A===0?0:wA(_A)<<v;qA.D[LA]=qA.Q+=B0}function u(qA,LA){qA.D[LA]|=FA()<<v}function QA(qA,LA){if(b>0){b--;return}var _A=T,B0=z;while(_A<=B0){var cA=ZA(qA.i),uA=cA&15,pA=cA>>4;if(uA===0){if(pA<15){b=jA(pA)+(1<<pA)-1;break}_A+=16;continue}_A+=pA;var iA=K[_A];qA.D[LA+iA]=wA(uA)*(1<<v),_A++}}function t(qA,LA){var _A=T,B0=z,cA=0,uA,pA;while(_A<=B0){var iA=LA+K[_A],$0=qA.D[iA]<0?-1:1;switch(m){case 0:if(pA=ZA(qA.i),uA=pA&15,cA=pA>>4,uA===0)if(cA<15)b=jA(cA)+(1<<cA),m=4;else cA=16,m=1;else{if(uA!==1)throw new A("invalid ACn encoding");s=wA(uA),m=cA?2:3}continue;case 1:case 2:if(qA.D[iA])qA.D[iA]+=$0*(FA()<<v);else if(cA--,cA===0)m=m===2?3:0;break;case 3:if(qA.D[iA])qA.D[iA]+=$0*(FA()<<v);else qA.D[iA]=s<<v,m=0;break;case 4:if(qA.D[iA])qA.D[iA]+=$0*(FA()<<v);break}_A++}if(m===4){if(b--,b===0)m=0}}function KA(qA,LA,_A,B0,cA){var uA=_A/P|0,pA=_A%P;i=uA*qA.A+B0;var iA=pA*qA.h+cA,$0=Z(qA,i,iA);LA(qA,$0)}function HA(qA,LA,_A){i=_A/qA.P|0;var B0=_A%qA.P,cA=Z(qA,i,B0);LA(qA,cA)}var fA=w.length;if(V)if(T===0)BA=j===0?d:u;else BA=j===0?QA:t;else BA=VA;if(fA===1)f=w[0].P*w[0].c;else f=P*_.R;while(EA<=f){var zA=k?Math.min(f-EA,k):f;if(zA>0){for(l=0;l<fA;l++)w[l].Q=0;if(b=0,fA===1){n=w[0];for(e=0;e<zA;e++)HA(n,BA,EA),EA++}else for(e=0;e<zA;e++){for(l=0;l<fA;l++){n=w[l],NA=n.h,YA=n.A;for(c=0;c<YA;c++)for(o=0;o<NA;o++)KA(n,BA,EA,c,o)}EA++}}if(x=0,CA=M(F,D),!CA)break;if(CA.u){var yA=zA>0?"unexpected":"excessive";D=CA.offset}if(CA.M>=65488&&CA.M<=65495)D+=2;else break}return D-S}function X(F,D,_){var{$:w,D:k}=F,T,z,j,v,g,P,V,S,h,x,b,m,s,i,n,l,c;if(!w)throw new A("missing required Quantization Table.");for(var o=0;o<64;o+=8){if(h=k[D+o],x=k[D+o+1],b=k[D+o+2],m=k[D+o+3],s=k[D+o+4],i=k[D+o+5],n=k[D+o+6],l=k[D+o+7],h*=w[o],(x|b|m|s|i|n|l)===0){c=N*h+512>>10,_[o]=c,_[o+1]=c,_[o+2]=c,_[o+3]=c,_[o+4]=c,_[o+5]=c,_[o+6]=c,_[o+7]=c;continue}x*=w[o+1],b*=w[o+2],m*=w[o+3],s*=w[o+4],i*=w[o+5],n*=w[o+6],l*=w[o+7],T=N*h+128>>8,z=N*s+128>>8,j=b,v=n,g=$*(x-l)+128>>8,S=$*(x+l)+128>>8,P=m<<4,V=i<<4,T=T+z+1>>1,z=T-z,c=j*O+v*R+128>>8,j=j*R-v*O+128>>8,v=c,g=g+V+1>>1,V=g-V,S=S+P+1>>1,P=S-P,T=T+v+1>>1,v=T-v,z=z+j+1>>1,j=z-j,c=g*H+S*Y+2048>>12,g=g*Y-S*H+2048>>12,S=c,c=P*U+V*J+2048>>12,P=P*J-V*U+2048>>12,V=c,_[o]=T+S,_[o+7]=T-S,_[o+1]=z+V,_[o+6]=z-V,_[o+2]=j+P,_[o+5]=j-P,_[o+3]=v+g,_[o+4]=v-g}for(var e=0;e<8;++e){if(h=_[e],x=_[e+8],b=_[e+16],m=_[e+24],s=_[e+32],i=_[e+40],n=_[e+48],l=_[e+56],(x|b|m|s|i|n|l)===0){if(c=N*h+8192>>14,c<-2040)c=0;else if(c>=2024)c=255;else c=c+2056>>4;k[D+e]=c,k[D+e+8]=c,k[D+e+16]=c,k[D+e+24]=c,k[D+e+32]=c,k[D+e+40]=c,k[D+e+48]=c,k[D+e+56]=c;continue}if(T=N*h+2048>>12,z=N*s+2048>>12,j=b,v=n,g=$*(x-l)+2048>>12,S=$*(x+l)+2048>>12,P=m,V=i,T=(T+z+1>>1)+4112,z=T-z,c=j*O+v*R+2048>>12,j=j*R-v*O+2048>>12,v=c,g=g+V+1>>1,V=g-V,S=S+P+1>>1,P=S-P,T=T+v+1>>1,v=T-v,z=z+j+1>>1,j=z-j,c=g*H+S*Y+2048>>12,g=g*Y-S*H+2048>>12,S=c,c=P*U+V*J+2048>>12,P=P*J-V*U+2048>>12,V=c,h=T+S,l=T-S,x=z+V,n=z-V,b=j+P,i=j-P,m=v+g,s=v-g,h<16)h=0;else if(h>=4080)h=255;else h>>=4;if(x<16)x=0;else if(x>=4080)x=255;else x>>=4;if(b<16)b=0;else if(b>=4080)b=255;else b>>=4;if(m<16)m=0;else if(m>=4080)m=255;else m>>=4;if(s<16)s=0;else if(s>=4080)s=255;else s>>=4;if(i<16)i=0;else if(i>=4080)i=255;else i>>=4;if(n<16)n=0;else if(n>=4080)n=255;else n>>=4;if(l<16)l=0;else if(l>=4080)l=255;else l>>=4;k[D+e]=h,k[D+e+8]=x,k[D+e+16]=b,k[D+e+24]=m,k[D+e+32]=s,k[D+e+40]=i,k[D+e+48]=n,k[D+e+56]=l}}function q(F,D){var{P:_,c:w}=D,k=new Int16Array(64);for(var T=0;T<w;T++)for(var z=0;z<_;z++){var j=Z(D,T,z);X(D,j,k)}return D.D}function M(F,D,_){if(_==null)_=D;var w=F.length-1,k=_<D?_:D;if(D>=w)return null;var T=B(F,D);if(T>=65472&&T<=65534)return{u:null,M:T,offset:D};var z=B(F,k);while(!(z>=65472&&z<=65534)){if(++k>=w)return null;z=B(F,k)}return{u:T.toString(16),M:z,offset:k}}return L.prototype={parse(F,D){if(D==null)D={};var _=D.F,w=0,k=null,T=null,z,j,v=0;function g(){var pA=B(F,w);w+=2;var iA=w+pA-2,$0=M(F,iA,w);if($0&&$0.u)iA=$0.offset;var IA=F.subarray(w,iA);return w+=IA.length,IA}function P(pA){var iA=Math.ceil(pA.o/8/pA.X),$0=Math.ceil(pA.s/8/pA.B);for(var IA=0;IA<pA.W.length;IA++){t=pA.W[IA];var TA=Math.ceil(Math.ceil(pA.o/8)*t.h/pA.X),DA=Math.ceil(Math.ceil(pA.s/8)*t.A/pA.B),kA=iA*t.h,lA=$0*t.A,dA=64*lA*(kA+1);t.D=new Int16Array(dA),t.P=TA,t.c=DA}pA.m=iA,pA.R=$0}var V=[],S=[],h=[],x=B(F,w);if(w+=2,x!==65496)throw new A("SOI not found");x=B(F,w),w+=2;A:while(x!==65497){var b,m,s;switch(x){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var i=g();if(x===65504){if(i[0]===74&&i[1]===70&&i[2]===73&&i[3]===70&&i[4]===0)k={version:{d:i[5],T:i[6]},K:i[7],j:i[8]<<8|i[9],H:i[10]<<8|i[11],S:i[12],I:i[13],C:i.subarray(14,14+3*i[12]*i[13])}}if(x===65518){if(i[0]===65&&i[1]===100&&i[2]===111&&i[3]===98&&i[4]===101)T={version:i[5]<<8|i[6],k:i[7]<<8|i[8],q:i[9]<<8|i[10],a:i[11]}}break;case 65499:var n=B(F,w),l;w+=2;var c=n+w-2;while(w<c){var o=F[w++],e=new Uint16Array(64);if(o>>4===0)for(m=0;m<64;m++)l=K[m],e[l]=F[w++];else if(o>>4===1)for(m=0;m<64;m++)l=K[m],e[l]=B(F,w),w+=2;else throw new A("DQT - invalid table spec");V[o&15]=e}break;case 65472:case 65473:case 65474:if(z)throw new A("Only single frame JPEGs supported");w+=2,z={},z.G=x===65473,z.Z=x===65474,z.precision=F[w++];var BA=B(F,w),EA,CA=0,f=0;w+=2,z.s=_||BA,z.o=B(F,w),w+=2,z.W=[],z._={};var NA=F[w++];for(b=0;b<NA;b++){EA=F[w];var YA=F[w+1]>>4,FA=F[w+1]&15;if(CA<YA)CA=YA;if(f<FA)f=FA;var ZA=F[w+2];s=z.W.push({h:YA,A:FA,L:ZA,$:null}),z._[EA]=s-1,w+=3}z.X=CA,z.B=f,P(z);break;case 65476:var jA=B(F,w);w+=2;for(b=2;b<jA;){var wA=F[w++],VA=new Uint8Array(16),d=0;for(m=0;m<16;m++,w++)d+=VA[m]=F[w];var u=new Uint8Array(d);for(m=0;m<d;m++,w++)u[m]=F[w];b+=17+d,(wA>>4===0?h:S)[wA&15]=W(VA,u)}break;case 65501:w+=2,j=B(F,w),w+=2;break;case 65498:var QA=++v===1&&!_,t;w+=2;var KA=F[w++],HA=[];for(b=0;b<KA;b++){var fA=F[w++],zA=z._[fA];t=z.W[zA],t.index=fA;var yA=F[w++];t.J=h[yA>>4],t.i=S[yA&15],HA.push(t)}var qA=F[w++],LA=F[w++],_A=F[w++];try{var B0=G(F,w,z,HA,j,qA,LA,_A>>4,_A&15,QA);w+=B0}catch(pA){if(pA instanceof DNLMarkerError)return this.parse(F,{F:pA.s});else if(pA instanceof EOIMarkerError)break A;throw pA}break;case 65500:w+=4;break;case 65535:if(F[w]!==255)w--;break;default:var cA=M(F,w-2,w-3);if(cA&&cA.u){w=cA.offset;break}if(w>=F.length-1)break A;throw new A("JpegImage.parse - unknown marker: "+x.toString(16))}x=B(F,w),w+=2}this.width=z.o,this.height=z.s,this.g=k,this.b=T,this.W=[];for(b=0;b<z.W.length;b++){t=z.W[b];var uA=V[t.L];if(uA)t.$=uA;this.W.push({index:t.index,e:q(z,t),l:t.h/z.X,t:t.A/z.B,P:t.P,c:t.c})}this.p=this.W.length;return},Y(F,D,_){if(_==null)_=!1;var w=this.width/F,k=this.height/D,T,z,j,v,g,P,V,S,h,x,b=0,m,s=this.W.length,i=F*D*s,n=new Uint8ClampedArray(i),l=new Uint32Array(F),c=4294967288,o;for(V=0;V<s;V++){if(T=this.W[V],z=T.l*w,j=T.t*k,b=V,m=T.e,v=T.P+1<<3,z!==o){for(g=0;g<F;g++)S=0|g*z,l[g]=(S&c)<<3|S&7;o=z}for(P=0;P<D;P++){S=0|P*j,x=v*(S&c)|(S&7)<<3;for(g=0;g<F;g++)n[b]=m[x+l[g]],b+=s}}var e=this.V;if(!_&&s===4&&!e)e=new Int32Array([-256,255,-256,255,-256,255,-256,255]);if(e)for(V=0;V<i;)for(S=0,h=0;S<s;S++,V++,h+=2)n[V]=(n[V]*e[h]>>8)+e[h+1];return n},get f(){if(this.b)return!!this.b.a;if(this.p===3){if(this.N===0)return!1;else if(this.W[0].index===82&&this.W[1].index===71&&this.W[2].index===66)return!1;return!0}if(this.N===1)return!0;return!1},z:function F(D){var _,w,k;for(var T=0,z=D.length;T<z;T+=3)_=D[T],w=D[T+1],k=D[T+2],D[T]=_-179.456+1.402*k,D[T+1]=_+135.459-0.344*w-0.714*k,D[T+2]=_-226.816+1.772*w;return D},O:function F(D){var _,w,k,T,z=0;for(var j=0,v=D.length;j<v;j+=4)_=D[j],w=D[j+1],k=D[j+2],T=D[j+3],D[z++]=-122.67195406894+w*(-0.0000660635669420364*w+0.000437130475926232*k-0.000054080610064599*_+0.00048449797120281*T-0.154362151871126)+k*(-0.000957964378445773*k+0.000817076911346625*_-0.00477271405408747*T+1.53380253221734)+_*(0.000961250184130688*_-0.00266257332283933*T+0.48357088451265)+T*(-0.000336197177618394*T+0.484791561490776),D[z++]=107.268039397724+w*(0.0000219927104525741*w-0.000640992018297945*k+0.000659397001245577*_+0.000426105652938837*T-0.176491792462875)+k*(-0.000778269941513683*k+0.00130872261408275*_+0.000770482631801132*T-0.151051492775562)+_*(0.00126935368114843*_-0.00265090189010898*T+0.25802910206845)+T*(-0.000318913117588328*T-0.213742400323665),D[z++]=-20.810012546947+w*(-0.000570115196973677*w-0.0000263409051004589*k+0.0020741088115012*_-0.00288260236853442*T+0.814272968359295)+k*(-0.0000153496057440975*k-0.000132689043961446*_+0.000560833691242812*T-0.195152027534049)+_*(0.00174418132927582*_-0.00255243321439347*T+0.116935020465145)+T*(-0.000343531996510555*T+0.24165260232407);return D.subarray(0,z)},r:function F(D){var _,w,k;for(var T=0,z=D.length;T<z;T+=4)_=D[T],w=D[T+1],k=D[T+2],D[T]=434.456-_-1.402*k,D[T+1]=119.541-_+0.344*w+0.714*k,D[T+2]=481.816-_-1.772*w;return D},U:function F(D){var _,w,k,T,z=0;for(var j=0,v=D.length;j<v;j+=4)_=D[j],w=D[j+1],k=D[j+2],T=D[j+3],D[z++]=255+_*(-0.00006747147073602441*_+0.0008379262121013727*w+0.0002894718188643294*k+0.003264231057537806*T-1.1185611867203937)+w*(0.000026374107616089405*w-0.00008626949158638572*k-0.0002748769067499491*T-0.02155688794978967)+k*(-0.00003878099212869363*k-0.0003267808279485286*T+0.0686742238595345)-T*(0.0003361971776183937*T+0.7430659151342254),D[z++]=255+_*(0.00013596372813588848*_+0.000924537132573585*w+0.00010567359618683593*k+0.0004791864687436512*T-0.3109689587515875)+w*(-0.00023545346108370344*w+0.0002702845253534714*k+0.0020200308977307156*T-0.7488052167015494)+k*(0.00006834815998235662*k+0.00015168452363460973*T-0.09751927774728933)-T*(0.0003189131175883281*T+0.7364883807733168),D[z++]=255+_*(0.000013598650411385307*_+0.00012423956175490851*w+0.0004751985097583589*k-0.0000036729317476630422*T-0.05562186980264034)+w*(0.00016141380598724676*w+0.0009692239130725186*k+0.0007782692450036253*T-0.44015232367526463)+k*(0.0000005068882914068769*k+0.0017778369011375071*T-0.7591454649749609)-T*(0.0003435319965105553*T+0.7063770186160144);return D.subarray(0,z)},getData:function(F){var{width:D,height:_,forceRGB:w,isSourcePDF:k}=F;if(this.p>4)throw new A("Unsupported color mode");var T=this.Y(D,_,k);if(this.p===1&&w){var z=T.length,j=new Uint8ClampedArray(z*3),v=0;for(var g=0;g<z;g++){var P=T[g];j[v++]=P,j[v++]=P,j[v++]=P}return j}else if(this.p===3&&this.f)return this.z(T);else if(this.p===4){if(this.f){if(w)return this.O(T);return this.r(T)}else if(w)return this.U(T)}return T}},L}();function E(C,K){return C[K]<<24>>24}function B(C,K){return C[K]<<8|C[K+1]}function I(C,K){return(C[K]<<24|C[K+1]<<16|C[K+2]<<8|C[K+3])>>>0}OA.JpegDecoder=Q})();OA.encodeImage=function(A,Q,E,B){var I={t256:[Q],t257:[E],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1000],t277:[4],t278:[E],t279:[Q*E*4],t282:[[72,1]],t283:[[72,1]],t284:[1],t286:[[0,1]],t287:[[0,1]],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(B)for(var C in B)I[C]=B[C];var K=new Uint8Array(OA.encode([I])),J=new Uint8Array(A),U=new Uint8Array(1000+Q*E*4);for(var C=0;C<K.length;C++)U[C]=K[C];for(var C=0;C<J.length;C++)U[1000+C]=J[C];return U.buffer};OA.encode=function(A){var Q=!1,E=new Uint8Array(20000),B=4,I=Q?OA._binLE:OA._binBE;E[0]=E[1]=Q?73:77,I.writeUshort(E,2,42);var C=8;I.writeUint(E,B,C),B+=4;for(var K=0;K<A.length;K++){var J=OA._writeIFD(I,OA._types.basic,E,C,A[K]);if(C=J[1],K<A.length-1){if((C&3)!=0)C+=4-(C&3);I.writeUint(E,J[0],C)}}return E.slice(0,C).buffer};OA.decode=function(A,Q){if(Q==null)Q={parseMN:!0,debug:!1};var E=new Uint8Array(A),B=0,I=OA._binBE.readASCII(E,B,2);B+=2;var C=I=="II"?OA._binLE:OA._binBE,K=C.readUshort(E,B);B+=2;var J=C.readUint(E,B);B+=4;var U=[];while(!0){var Y=C.readUshort(E,J),H=C.readUshort(E,J+4);if(Y!=0){if(H<1||13<H){log("error in TIFF");break}}if(OA._readIFD(C,E,J,U,0,Q),J=C.readUint(E,J+2+Y*12),J==0)break}return U};OA.decodeImage=function(A,Q,E){if(Q.data)return;var B=new Uint8Array(A),I=OA._binBE.readASCII(B,0,2);if(Q.t256==null)return;Q.isLE=I=="II",Q.width=Q.t256[0],Q.height=Q.t257[0];var C=Q.t259?Q.t259[0]:1,K=Q.t266?Q.t266[0]:1;if(Q.t284&&Q.t284[0]==2)log("PlanarConfiguration 2 should not be used!");if(C==7&&Q.t258&&Q.t258.length>3)Q.t258=Q.t258.slice(0,3);var J=Q.t277?Q.t277[0]:1,U=Q.t258?Q.t258[0]:1,Y=U*J;if(C==1&&Q.t279!=null&&Q.t278&&Q.t262[0]==32803)Y=Math.round(Q.t279[0]*8/(Q.width*Q.t278[0]));if(Q.t50885&&Q.t50885[0]==4)Y=Q.t258[0]*3;var H=Math.ceil(Q.width*Y/8)*8,R=Q.t273;if(R==null||Q.t322)R=Q.t324;var O=Q.t279;if(C==1&&R.length==1)O=[Q.height*(H>>>3)];if(O==null||Q.t322)O=Q.t325;var N=new Uint8Array(Q.height*(H>>>3)),$=0;if(Q.t322!=null){var L=Q.t322[0],W=Q.t323[0],Z=Math.floor((Q.width+L-1)/L),G=Math.floor((Q.height+W-1)/W),X=new Uint8Array(Math.ceil(L*W*Y/8)|0);console.log("====",Z,G);for(var q=0;q<G;q++)for(var M=0;M<Z;M++){var F=q*Z+M;if(X.fill(0),OA.decode._decompress(Q,E,B,R[F],O[F],C,X,0,K,L,W),C==6)N=X;else OA._copyTile(X,Math.ceil(L*Y/8)|0,W,N,Math.ceil(Q.width*Y/8)|0,Q.height,Math.ceil(M*L*Y/8)|0,q*W)}$=N.length*8}else{if(R==null)return;var D=Q.t278?Q.t278[0]:Q.height;D=Math.min(D,Q.height);for(var F=0;F<R.length;F++)OA.decode._decompress(Q,E,B,R[F],O[F],C,N,Math.ceil($/8)|0,K,Q.width,D),$+=H*D;$=Math.min($,N.length*8)}Q.data=new Uint8Array(N.buffer,0,Math.ceil($/8)|0)};OA.decode._decompress=function(A,Q,E,B,I,C,K,J,U,Y,H){if(A.t271&&A.t271[0]=="Panasonic"&&A.t45&&A.t45[0]==6)C=34316;if(C==1)for(var R=0;R<I;R++)K[J+R]=E[B+R];else if(C==2)OA.decode._decodeG2(E,B,I,K,J,Y,U);else if(C==3)OA.decode._decodeG3(E,B,I,K,J,Y,U,A.t292?(A.t292[0]&1)==1:!1);else if(C==4)OA.decode._decodeG4(E,B,I,K,J,Y,U);else if(C==5)OA.decode._decodeLZW(E,B,I,K,J,8);else if(C==6)OA.decode._decodeOldJPEG(A,E,B,I,K,J);else if(C==7||C==34892)OA.decode._decodeNewJPEG(A,E,B,I,K,J);else if(C==8||C==32946){var O=new Uint8Array(E.buffer,B+2,I-6),N=OA._inflateRaw(O);if(J+N.length<=K.length)K.set(N,J)}else if(C==9)OA.decode._decodeVC5(E,B,I,K,J,A.t33422);else if(C==32767)OA.decode._decodeARW(A,E,B,I,K,J);else if(C==32773)OA.decode._decodePackBits(E,B,I,K,J);else if(C==32809)OA.decode._decodeThunder(E,B,I,K,J);else if(C==34316)OA.decode._decodePanasonic(A,E,B,I,K,J);else if(C==34713)OA.decode._decodeNikon(A,Q,E,B,I,K,J);else if(C==34676)OA.decode._decodeLogLuv32(A,E,B,I,K,J);else log("Unknown compression",C);var $=A.t258?Math.min(32,A.t258[0]):1,L=A.t277?A.t277[0]:1,W=$*L>>>3,Z=Math.ceil($*L*Y/8);if($==16&&!A.isLE&&A.t33422==null)for(var G=0;G<H;G++){var X=J+G*Z;for(var q=1;q<Z;q+=2){var M=K[X+q];K[X+q]=K[X+q-1],K[X+q-1]=M}}if(A.t317&&A.t317[0]==2)for(var G=0;G<H;G++){var F=J+G*Z;if($==16)for(var R=W;R<Z;R+=2){var D=(K[F+R+1]<<8|K[F+R])+(K[F+R-W+1]<<8|K[F+R-W]);K[F+R]=D&255,K[F+R+1]=D>>>8&255}else if(L==3)for(var R=3;R<Z;R+=3)K[F+R]=K[F+R]+K[F+R-3]&255,K[F+R+1]=K[F+R+1]+K[F+R-2]&255,K[F+R+2]=K[F+R+2]+K[F+R-1]&255;else for(var R=W;R<Z;R++)K[F+R]=K[F+R]+K[F+R-W]&255}};OA.decode._decodePanasonic=function(A,Q,E,B,I,C){var K=Q.buffer,J=A.t2[0],U=A.t3[0],Y=A.t10[0],H=A.t45[0],R=0,O=0,N=0,$=0,L,W,Z=H==6?new Uint32Array(18):new Uint8Array(16),G,X,q,M=[0,0],F=[0,0],D,_=0,w,k,T,z,j=new Uint8Array(16384),v=new Uint16Array(I.buffer);function g(FA){if(N==0){var ZA=new Uint8Array(K,E+O+8184,8200),jA=new Uint8Array(K,E+O,8184);j.set(ZA),j.set(jA,ZA.length),O+=16384}if(H==5)for(G=0;G<16;G++)Z[G]=j[N++],N&=16383;else return N=N-FA&131071,$=N>>3^16368,(j[$]|j[$+1]<<8)>>(N&7)&~(-1<<FA)}function P(FA){return j[N+15-FA]}function V(){Z[0]=P(0)<<6|P(1)>>2,Z[1]=((P(1)&3)<<12|P(2)<<4|P(3)>>4)&16383,Z[2]=P(3)>>2&3,Z[3]=(P(3)&3)<<8|P(4),Z[4]=P(5)<<2|P(6)>>6,Z[5]=(P(6)&63)<<4|P(7)>>4,Z[6]=P(7)>>2&3,Z[7]=(P(7)&3)<<8|P(8),Z[8]=P(9)<<2&1020|P(10)>>6,Z[9]=(P(10)<<4|P(11)>>4)&1023,Z[10]=P(11)>>2&3,Z[11]=(P(11)&3)<<8|P(12),Z[12]=(P(13)<<2&1020|P(14)>>6)&1023,Z[13]=(P(14)<<4|P(15)>>4)&1023,N+=16,$=0}function S(){Z[0]=P(0)<<4|P(1)>>4,Z[1]=((P(1)&15)<<8|P(2))&4095,Z[2]=P(3)>>6&3,Z[3]=(P(3)&63)<<2|P(4)>>6,Z[4]=(P(4)&63)<<2|P(5)>>6,Z[5]=(P(5)&63)<<2|P(6)>>6,Z[6]=P(6)>>4&3,Z[7]=(P(6)&15)<<4|P(7)>>4,Z[8]=(P(7)&15)<<4|P(8)>>4,Z[9]=(P(8)&15)<<4|P(9)>>4,Z[10]=P(9)>>2&3,Z[11]=(P(9)&3)<<6|P(10)>>2,Z[12]=(P(10)&3)<<6|P(11)>>2,Z[13]=(P(11)&3)<<6|P(12)>>2,Z[14]=P(12)&3,Z[15]=P(13),Z[16]=P(14),Z[17]=P(15),N+=16,$=0}function h(){M[0]=0,M[1]=0,F[0]=0,F[1]=0}if(H==7)throw H;else if(H==6){var x=Y==12,b=x?S:V,m=x?14:11,s=x?128:512,i=x?2048:8192,n=x?16383:65535,l=x?4095:16383,c=J/m,o=c*16,e=x?18:14;for(k=0;k<U-15;k+=16){var BA=Math.min(16,U-k),EA=o*BA;j=new Uint8Array(K,E+R,EA),N=0,R+=EA;for(z=0,T=0;z<BA;z++,T=0){_=(k+z)*J;for(var CA=0;CA<c;CA++){b(),h(),q=0,w=0;for(G=0;G<m;G++){if(D=G&1,G%3==2){var f=$<e?Z[$++]:0;if(f==3)f=4;w=s<<f,q=1<<f}var NA=$<e?Z[$++]:0;if(M[D]){if(NA*=q,w<i&&F[D]>w)NA+=F[D]-w;F[D]=NA}else if(M[D]=NA,NA)F[D]=NA;else NA=F[D];v[_+T++]=NA-15<=n?NA-15&n:NA+2147483633>>31&l}}}}}else if(H==5){var YA=Y==12?10:9;for(k=0;k<U;k++)for(T=0;T<J;T+=YA)if(g(0),Y==12)v[_++]=((Z[1]&15)<<8)+Z[0],v[_++]=16*Z[2]+(Z[1]>>4),v[_++]=((Z[4]&15)<<8)+Z[3],v[_++]=16*Z[5]+(Z[4]>>4),v[_++]=((Z[7]&15)<<8)+Z[6],v[_++]=16*Z[8]+(Z[7]>>4),v[_++]=((Z[10]&15)<<8)+Z[9],v[_++]=16*Z[11]+(Z[10]>>4),v[_++]=((Z[13]&15)<<8)+Z[12],v[_++]=16*Z[14]+(Z[13]>>4);else if(Y==14)v[_++]=Z[0]+((Z[1]&63)<<8),v[_++]=(Z[1]>>6)+4*Z[2]+((Z[3]&15)<<10),v[_++]=(Z[3]>>4)+16*Z[4]+((Z[5]&3)<<12),v[_++]=((Z[5]&252)>>2)+(Z[6]<<6),v[_++]=Z[7]+((Z[8]&63)<<8),v[_++]=(Z[8]>>6)+4*Z[9]+((Z[10]&15)<<10),v[_++]=(Z[10]>>4)+16*Z[11]+((Z[12]&3)<<12),v[_++]=((Z[12]&252)>>2)+(Z[13]<<6),v[_++]=Z[14]+((Z[15]&63)<<8)}else if(H==4)for(k=0;k<U;k++)for(T=0;T<J;T++){if(G=T%14,D=G&1,G==0)h();if(G%3==2)q=4>>3-g(2);if(F[D]){if(X=g(8),X!=0){if(M[D]-=128<<q,M[D]<0||q==4)M[D]&=~(-1<<q);M[D]+=X<<q}}else if(F[D]=g(8),F[D]||G>11)M[D]=F[D]<<4|g(4);v[_++]=M[T&1]}else throw H};OA.decode._decodeVC5=function(){var A=[1,0,1,0,2,2,1,1,3,7,1,2,5,25,1,3,6,48,1,4,6,54,1,5,7,111,1,8,7,99,1,6,7,105,12,0,7,107,1,7,8,209,20,0,8,212,1,9,8,220,1,10,9,393,1,11,9,394,32,0,9,416,1,12,9,427,1,13,10,887,1,18,10,784,1,14,10,790,1,15,10,835,60,0,10,852,1,16,10,885,1,17,11,1571,1,19,11,1668,1,20,11,1669,100,0,11,1707,1,21,11,1772,1,22,12,3547,1,29,12,3164,1,24,12,3166,1,25,12,3140,1,23,12,3413,1,26,12,3537,1,27,12,3539,1,28,13,7093,1,35,13,6283,1,30,13,6331,1,31,13,6335,180,0,13,6824,1,32,13,7072,1,33,13,7077,320,0,13,7076,1,34,14,12565,1,36,14,12661,1,37,14,12669,1,38,14,13651,1,39,14,14184,1,40,15,28295,1,46,15,28371,1,47,15,25320,1,42,15,25336,1,43,15,25128,1,41,15,27300,1,44,15,28293,1,45,16,50259,1,48,16,50643,1,49,16,50675,1,50,16,56740,1,53,16,56584,1,51,16,56588,1,52,17,113483,1,61,17,113482,1,60,17,101285,1,55,17,101349,1,56,17,109205,1,57,17,109207,1,58,17,100516,1,54,17,113171,1,59,18,202568,1,62,18,202696,1,63,18,218408,1,64,18,218412,1,65,18,226340,1,66,18,226356,1,67,18,226358,1,68,19,402068,1,69,19,405138,1,70,19,405394,1,71,19,436818,1,72,19,436826,1,73,19,452714,1,75,19,452718,1,76,19,452682,1,74,20,804138,1,77,20,810279,1,78,20,810790,1,79,20,873638,1,80,20,873654,1,81,20,905366,1,82,20,905430,1,83,20,905438,1,84,21,1608278,1,85,21,1620557,1,86,21,1621582,1,87,21,1621583,1,88,21,1747310,1,89,21,1810734,1,90,21,1810735,1,91,21,1810863,1,92,21,1810879,1,93,22,3621725,1,99,22,3621757,1,100,22,3241112,1,94,22,3494556,1,95,22,3494557,1,96,22,3494622,1,97,22,3494623,1,98,23,6482227,1,102,23,6433117,1,101,23,6989117,1,103,23,6989119,1,105,23,6989118,1,104,23,7243449,1,106,23,7243512,1,107,24,13978233,1,111,24,12964453,1,109,24,12866232,1,108,24,14486897,1,113,24,13978232,1,110,24,14486896,1,112,24,14487026,1,114,24,14487027,1,115,25,25732598,1,225,25,25732597,1,189,25,25732596,1,188,25,25732595,1,203,25,25732594,1,202,25,25732593,1,197,25,25732592,1,207,25,25732591,1,169,25,25732590,1,223,25,25732589,1,159,25,25732522,1,235,25,25732579,1,152,25,25732575,1,192,25,25732489,1,179,25,25732573,1,201,25,25732472,1,172,25,25732576,1,149,25,25732488,1,178,25,25732566,1,120,25,25732571,1,219,25,25732577,1,150,25,25732487,1,127,25,25732506,1,211,25,25732548,1,125,25,25732588,1,158,25,25732486,1,247,25,25732467,1,238,25,25732508,1,163,25,25732552,1,228,25,25732603,1,183,25,25732513,1,217,25,25732587,1,168,25,25732520,1,122,25,25732484,1,128,25,25732562,1,249,25,25732505,1,187,25,25732504,1,186,25,25732483,1,136,25,25928905,1,181,25,25732560,1,255,25,25732500,1,230,25,25732482,1,135,25,25732555,1,233,25,25732568,1,222,25,25732583,1,145,25,25732481,1,134,25,25732586,1,167,25,25732521,1,248,25,25732518,1,209,25,25732480,1,243,25,25732512,1,216,25,25732509,1,164,25,25732547,1,140,25,25732479,1,157,25,25732544,1,239,25,25732574,1,191,25,25732564,1,251,25,25732478,1,156,25,25732546,1,139,25,25732498,1,242,25,25732557,1,133,25,25732477,1,162,25,25732515,1,213,25,25732584,1,165,25,25732514,1,212,25,25732476,1,227,25,25732494,1,198,25,25732531,1,236,25,25732530,1,234,25,25732529,1,117,25,25732528,1,215,25,25732527,1,124,25,25732526,1,123,25,25732525,1,254,25,25732524,1,253,25,25732523,1,148,25,25732570,1,218,25,25732580,1,146,25,25732581,1,147,25,25732569,1,224,25,25732533,1,143,25,25732540,1,184,25,25732541,1,185,25,25732585,1,166,25,25732556,1,132,25,25732485,1,129,25,25732563,1,250,25,25732578,1,151,25,25732501,1,119,25,25732502,1,193,25,25732536,1,176,25,25732496,1,245,25,25732553,1,229,25,25732516,1,206,25,25732582,1,144,25,25732517,1,208,25,25732558,1,137,25,25732543,1,241,25,25732466,1,237,25,25732507,1,190,25,25732542,1,240,25,25732551,1,131,25,25732554,1,232,25,25732565,1,252,25,25732475,1,171,25,25732493,1,205,25,25732492,1,204,25,25732491,1,118,25,25732490,1,214,25,25928904,1,180,25,25732549,1,126,25,25732602,1,182,25,25732539,1,175,25,25732545,1,141,25,25732559,1,138,25,25732537,1,177,25,25732534,1,153,25,25732503,1,194,25,25732606,1,160,25,25732567,1,121,25,25732538,1,174,25,25732497,1,246,25,25732550,1,130,25,25732572,1,200,25,25732474,1,170,25,25732511,1,221,25,25732601,1,196,25,25732532,1,142,25,25732519,1,210,25,25732495,1,199,25,25732605,1,155,25,25732535,1,154,25,25732499,1,244,25,25732510,1,220,25,25732600,1,195,25,25732607,1,161,25,25732604,1,231,25,25732473,1,173,25,25732599,1,226,26,51465122,1,116,26,51465123,0,1],Q,E,B,I=[3,3,3,3,2,2,2,1,1,1],C=24576,K=16384,J=8192,U=K|J;function Y(G){var X=G[1],q=G[0][X>>>3]>>>7-(X&7)&1;return G[1]++,q}function H(G,X){if(Q==null){Q={};for(var q=0;q<A.length;q+=4)Q[A[q+1]]=A.slice(q,q+4)}var M=Y(G),F=Q[M];while(F==null)M=M<<1|Y(G),F=Q[M];var D=F[3];if(D!=0)D=Y(G)==0?D:-D;X[0]=F[2],X[1]=D}function R(G,X){for(var q=0;q<X;q++){if((G&1)==1)G++;G=G>>>1}return G}function O(G,X){return G>>X}function N(G,X,q,M,F,D){X[q]=O(O(11*G[F]-4*G[F+D]+G[F+D+D]+4,3)+G[M],1),X[q+D]=O(O(5*G[F]+4*G[F+D]-G[F+D+D]+4,3)-G[M],1)}function $(G,X,q,M,F,D){var _=G[F-D]-G[F+D],w=G[F],k=G[M];X[q]=O(O(_+4,3)+w+k,1),X[q+D]=O(O(-_+4,3)+w-k,1)}function L(G,X,q,M,F,D){X[q]=O(O(5*G[F]+4*G[F-D]-G[F-D-D]+4,3)+G[M],1),X[q+D]=O(O(11*G[F]-4*G[F-D]+G[F-D-D]+4,3)-G[M],1)}function W(G){return G=G<0?0:G>4095?4095:G,G=B[G]>>>2,G}function Z(G,X,q,M,F,D){M=new Uint16Array(M.buffer);var _=Date.now(),w=OA._binBE,k=X+q,T,z,j,v,g,P,V,S,h,x,b,m,s,i,n,l,c,o;X+=4;var e=D[0]==1;while(X<k){var BA=w.readShort(G,X),EA=w.readUshort(G,X+2);if(X+=4,BA==12)T=EA;else if(BA==20)z=EA;else if(BA==21)j=EA;else if(BA==48)v=EA;else if(BA==53)g=EA;else if(BA==35)P=EA;else if(BA==62)V=EA;else if(BA==101)S=EA;else if(BA==109)h=EA;else if(BA==84)x=EA;else if(BA==106)b=EA;else if(BA==107)m=EA;else if(BA==108)s=EA;else if(BA==102)i=EA;else if(BA==104)n=EA;else if(BA==105)l=EA;else{var CA=BA<0?-BA:BA,f=CA&65280,NA=0;if(CA&U)if(CA&J)NA=EA&65535,NA+=(CA&255)<<16;else NA=EA&65535;if((CA&C)==C){if(c==null){c=[];for(var YA=0;YA<4;YA++)c[YA]=new Int16Array((z>>>1)*(j>>>1));o=new Int16Array((z>>>1)*(j>>>1)),E=new Int16Array(1024);for(var YA=0;YA<1024;YA++){var FA=YA-512,ZA=Math.abs(FA),T=Math.floor(768*ZA*ZA*ZA/16581375)+ZA;E[YA]=Math.sign(FA)*T}B=new Uint16Array(4096);var jA=65535;for(var YA=0;YA<4096;YA++){var wA=YA,VA=jA*(Math.pow(113,wA/4095)-1)/112;B[YA]=Math.min(VA,jA)}}var d=c[V],u=R(z,1+I[v]),QA=R(j,1+I[v]);if(v==0)for(var t=0;t<QA;t++)for(var KA=0;KA<u;KA++){var HA=X+(t*u+KA)*2;d[t*(z>>>1)+KA]=G[HA]<<8|G[HA+1]}else{var fA=[G,X*8],zA=[],yA=0,qA=u*QA,LA=[0,0],_A=0,EA=0;while(yA<qA){H(fA,LA),_A=LA[0],EA=LA[1];while(_A>0)zA[yA++]=EA,_A--}var B0=(v-1)%3,cA=B0!=1?u:0,uA=B0!=0?QA:0;for(var t=0;t<QA;t++){var pA=(t+uA)*(z>>>1)+cA,iA=t*u;for(var KA=0;KA<u;KA++)d[pA+KA]=E[zA[iA+KA]+512]*g}if(B0==2){var n=z>>>1,$0=u*2,IA=QA*2;for(var t=0;t<QA;t++)for(var KA=0;KA<$0;KA++){var YA=t*2*n+KA,TA=t*n+KA,DA=QA*n+TA;if(t==0)N(d,o,YA,DA,TA,n);else if(t==QA-1)L(d,o,YA,DA,TA,n);else $(d,o,YA,DA,TA,n)}var kA=d;d=o,o=kA;for(var t=0;t<IA;t++)for(var KA=0;KA<u;KA++){var YA=t*n+2*KA,TA=t*n+KA,DA=u+TA;if(KA==0)N(d,o,YA,DA,TA,1);else if(KA==u-1)L(d,o,YA,DA,TA,1);else $(d,o,YA,DA,TA,1)}var kA=d;d=o,o=kA;var lA=[],dA=2-~~((v-1)/3);for(var F0=0;F0<3;F0++)lA[F0]=h>>14-F0*2&3;var HQ=lA[dA];if(HQ!=0)for(var t=0;t<IA;t++)for(var KA=0;KA<$0;KA++){var YA=t*n+KA;d[YA]=d[YA]<<HQ}}}if(v==9&&V==3){var gQ=c[0],d0=c[1],IB=c[2],cE=c[3];for(var t=0;t<j;t+=2)for(var KA=0;KA<z;KA+=2){var CB=t*z+KA,HA=(t>>>1)*(z>>>1)+(KA>>>1),lE=gQ[HA],v6=d0[HA]-2048,nK=IB[HA]-2048,h6=cE[HA]-2048,oI=(v6<<1)+lE,y6=(nK<<1)+lE,rI=lE+h6,g6=lE-h6;if(e)M[CB]=W(rI),M[CB+1]=W(y6),M[CB+z]=W(oI),M[CB+z+1]=W(g6);else M[CB]=W(oI),M[CB+1]=W(rI),M[CB+z]=W(g6),M[CB+z+1]=W(y6)}}X+=NA*4}else if(CA==16388)X+=NA*4;else if(f==8192||f==8448||f==9216);else throw CA.toString(16)}}console.log(Date.now()-_)}return Z}();OA.decode._decodeLogLuv32=function(A,Q,E,B,I,C){var K=A.width,J=K*4,U=0,Y=new Uint8Array(J);while(U<B){var H=0;while(H<J){var R=Q[E+U];if(U++,R<128){for(var O=0;O<R;O++)Y[H+O]=Q[E+U+O];H+=R,U+=R}else{R=R-126;for(var O=0;O<R;O++)Y[H+O]=Q[E+U];H+=R,U++}}for(var N=0;N<K;N++)I[C+0]=Y[N],I[C+1]=Y[N+K],I[C+2]=Y[N+K*2],I[C+4]=Y[N+K*3],C+=6}};OA.decode._ljpeg_diff=function(A,Q,E){var B=OA.decode._getbithuff,I,C;if(I=B(A,Q,E[0],E),C=B(A,Q,I,0),(C&1<<I-1)==0)C-=(1<<I)-1;return C};OA.decode._decodeARW=function(A,Q,E,B,I,C){var K=A.t256[0],J=A.t257[0],U=A.t258[0],Y=A.isLE?OA._binLE:OA._binBE,H=K*J==B||K*J*1.5==B;if(!H){J+=8;var R=[E,0,0,0],O=new Uint16Array(32770),N=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],V,$,L,w,_,W=0,Z=OA.decode._ljpeg_diff;O[0]=15;for(L=V=0;V<18;V++){var G=32768>>>(N[V]>>>8);for(var $=0;$<G;$++)O[++L]=N[V]}for(w=K;w--;)for(_=0;_<J+1;_+=2){if(_==J)_=1;if(W+=Z(Q,R,O),_<J){var X=W&4095;OA.decode._putsF(I,(_*K+w)*U,X<<16-U)}}return}if(K*J*1.5==B){for(var V=0;V<B;V+=3){var q=Q[E+V+0],M=Q[E+V+1],F=Q[E+V+2];I[C+V]=M<<4|q>>>4,I[C+V+1]=q<<4|F>>>4,I[C+V+2]=F<<4|M>>>4}return}var D=new Uint16Array(16),_,w,k,T,z,j,v,g,P,V,S,h=new Uint8Array(K+1);for(_=0;_<J;_++){for(var x=0;x<K;x++)h[x]=Q[E++];for(S=0,w=0;w<K-30;S+=16){T=2047&(k=Y.readUint(h,S)),z=2047&k>>>11,j=15&k>>>22,v=15&k>>>26;for(g=0;g<4&&128<<g<=T-z;g++);for(P=30,V=0;V<16;V++)if(V==j)D[V]=T;else if(V==v)D[V]=z;else{if(D[V]=((Y.readUshort(h,S+(P>>3))>>>(P&7)&127)<<g)+z,D[V]>2047)D[V]=2047;P+=7}for(V=0;V<16;V++,w+=2){var X=D[V]<<1;OA.decode._putsF(I,(_*K+w)*U,X<<16-U)}w-=w&1?1:31}}};OA.decode._decodeNikon=function(A,Q,E,B,I,C,K){var J=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],U=A.t256[0],Y=A.t257[0],H=A.t258[0],R=0,O=0,N=OA.decode._make_decoder,$=OA.decode._getbithuff,L=Q[0].exifIFD.makerNote,W=L.t150?L.t150:L.t140,Z=0,G=W[Z++],X=W[Z++];if(G==73||X==88)Z+=2110;if(G==70)R=2;if(H==14)R+=3;var q=[[0,0],[0,0]],M=A.isLE?OA._binLE:OA._binBE;for(var k=0;k<2;k++)for(var F=0;F<2;F++)q[k][F]=M.readShort(W,Z),Z+=2;var D=1<<H&32767,_=0,w=M.readShort(W,Z);if(Z+=2,w>1)_=Math.floor(D/(w-1));if(G==68&&X==32&&_>0)O=M.readShort(W,562);var k,T,z,j,v,g,P=0,V=[0,0],S=N(J[R]),h=[B,0,0,0];for(P=T=0;T<Y;T++){if(O&&T==O)S=N(J[R+1]);for(z=0;z<U;z++){if(k=$(E,h,S[0],S),j=k&15,v=k>>>4,g=($(E,h,j-v,0)<<1)+1<<v>>>1,(g&1<<j-1)==0)g-=(1<<j)-(v==0?1:0);if(z<2)V[z]=q[T&1][z]+=g;else V[z&1]+=g;var x=Math.min(Math.max(V[z&1],0),(1<<H)-1),b=(T*U+z)*H;OA.decode._putsF(C,b,x<<16-H)}}};OA.decode._putsF=function(A,Q,E){E=E<<8-(Q&7);var B=Q>>>3;A[B]|=E>>>16,A[B+1]|=E>>>8,A[B+2]|=E};OA.decode._getbithuff=function(A,Q,E,B){var I=0,C=OA.decode._get_byte,K,J=Q[0],U=Q[1],Y=Q[2],H=Q[3];if(E==0||Y<0)return 0;while(!H&&Y<E&&(K=A[J++])!=-1&&!(H=I&&K==255&&A[J++]))U=(U<<8)+K,Y+=8;if(K=U<<32-Y>>>32-E,B)Y-=B[K+1]>>>8,K=B[K+1]&255;else Y-=E;if(Y<0)throw"e";return Q[0]=J,Q[1]=U,Q[2]=Y,Q[3]=H,K};OA.decode._make_decoder=function(A){var Q,E,B,I,C,K=[];for(Q=16;Q!=0&&!A[Q];Q--);var J=17;K[0]=Q;for(B=E=1;E<=Q;E++)for(I=0;I<A[E];I++,++J)for(C=0;C<1<<Q-E;C++)if(B<=1<<Q)K[B++]=E<<8|A[J];return K};OA.decode._decodeNewJPEG=function(A,Q,E,B,I,C){B=Math.min(B,Q.length-E);var K=A.t347,J=K?K.length:0,U=new Uint8Array(J+B);if(K){var Y=216,H=217,R=0;for(var O=0;O<J-1;O++){if(K[O]==255&&K[O+1]==H)break;U[R++]=K[O]}var N=Q[E],$=Q[E+1];if(N!=255||$!=Y)U[R++]=N,U[R++]=$;for(var O=2;O<B;O++)U[R++]=Q[E+O]}else for(var O=0;O<B;O++)U[O]=Q[E+O];if(A.t262[0]==32803||A.t259[0]==7&&A.t262[0]==34892){var L=A.t258[0],W=OA.LosslessJpegDecode(U),Z=W.length;if(L==16)if(A.isLE)for(var O=0;O<Z;O++)I[C+(O<<1)]=W[O]&255,I[C+(O<<1)+1]=W[O]>>>8;else for(var O=0;O<Z;O++)I[C+(O<<1)]=W[O]>>>8,I[C+(O<<1)+1]=W[O]&255;else if(L==14||L==12||L==10){var G=16-L;for(var O=0;O<Z;O++)OA.decode._putsF(I,O*L,W[O]<<G)}else if(L==8)for(var O=0;O<Z;O++)I[C+O]=W[O];else throw new Error("unsupported bit depth "+L)}else{var X=new OA.JpegDecoder;X.parse(U);var q=X.getData({width:X.width,height:X.height,forceRGB:!0,isSourcePDF:!1});for(var O=0;O<q.length;O++)I[C+O]=q[O]}if(A.t262[0]==6)A.t262[0]=2};OA.decode._decodeOldJPEGInit=function(A,Q,E,B){var I=216,C=217,K=219,J=196,U=221,Y=192,H=218,R=0,O=0,N,$,L=!1,W,Z,G,X=A.t513,q=X?X[0]:0,M=A.t514,F=M?M[0]:0,D=A.t324||A.t273||X,_=A.t530,w=0,k=0,T=A.t277?A.t277[0]:1,z=A.t515;if(D)O=D[0],L=D.length>1;if(!L){if(Q[E]==255&&Q[E+1]==I)return{jpegOffset:E};if(X!=null){if(Q[E+q]==255&&Q[E+q+1]==I)R=E+q;else log("JPEGInterchangeFormat does not point to SOI");if(M==null)log("JPEGInterchangeFormatLength field is missing");else if(q>=O||q+F<=O)log("JPEGInterchangeFormatLength field value is invalid");if(R!=null)return{jpegOffset:R}}}if(_!=null)w=_[0],k=_[1];if(X!=null){if(M!=null)if(F>=2&&q+F<=O){if(Q[E+q+F-2]==255&&Q[E+q+F-1]==I)N=new Uint8Array(F-2);else N=new Uint8Array(F);for(W=0;W<N.length;W++)N[W]=Q[E+q+W];log("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else log("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile")}if(N==null){var j=0,v=[];v[j++]=255,v[j++]=I;var g=A.t519;if(g==null)throw new Error("JPEGQTables tag is missing");for(W=0;W<g.length;W++){v[j++]=255,v[j++]=K,v[j++]=0,v[j++]=67,v[j++]=W;for(Z=0;Z<64;Z++)v[j++]=Q[E+g[W]+Z]}for(G=0;G<2;G++){var P=A[G==0?"t520":"t521"];if(P==null)throw new Error((G==0?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(W=0;W<P.length;W++){v[j++]=255,v[j++]=J;var V=19;for(Z=0;Z<16;Z++)V+=Q[E+P[W]+Z];v[j++]=V>>>8,v[j++]=V&255,v[j++]=W|G<<4;for(Z=0;Z<16;Z++)v[j++]=Q[E+P[W]+Z];for(Z=0;Z<V;Z++)v[j++]=Q[E+P[W]+16+Z]}}if(v[j++]=255,v[j++]=Y,v[j++]=0,v[j++]=8+3*T,v[j++]=8,v[j++]=A.height>>>8&255,v[j++]=A.height&255,v[j++]=A.width>>>8&255,v[j++]=A.width&255,v[j++]=T,T==1)v[j++]=1,v[j++]=17,v[j++]=0;else for(W=0;W<3;W++)v[j++]=W+1,v[j++]=W!=0?17:(w&15)<<4|k&15,v[j++]=W;if(z!=null&&z[0]!=0)v[j++]=255,v[j++]=U,v[j++]=0,v[j++]=4,v[j++]=z[0]>>>8&255,v[j++]=z[0]&255;N=new Uint8Array(v)}var S=-1;W=0;while(W<N.length-1){if(N[W]==255&&N[W+1]==Y){S=W;break}W++}if(S==-1){var h=new Uint8Array(N.length+10+3*T);h.set(N);var x=N.length;if(S=N.length,N=h,N[x++]=255,N[x++]=Y,N[x++]=0,N[x++]=8+3*T,N[x++]=8,N[x++]=A.height>>>8&255,N[x++]=A.height&255,N[x++]=A.width>>>8&255,N[x++]=A.width&255,N[x++]=T,T==1)N[x++]=1,N[x++]=17,N[x++]=0;else for(W=0;W<3;W++)N[x++]=W+1,N[x++]=W!=0?17:(w&15)<<4|k&15,N[x++]=W}if(Q[O]==255&&Q[O+1]==H){var b=Q[O+2]<<8|Q[O+3];$=new Uint8Array(b+2),$[0]=Q[O],$[1]=Q[O+1],$[2]=Q[O+2],$[3]=Q[O+3];for(W=0;W<b-2;W++)$[W+4]=Q[O+W+4]}else{$=new Uint8Array(8+2*T);var m=0;if($[m++]=255,$[m++]=H,$[m++]=0,$[m++]=6+2*T,$[m++]=T,T==1)$[m++]=1,$[m++]=0;else for(W=0;W<3;W++)$[m++]=W+1,$[m++]=W<<4|W;$[m++]=0,$[m++]=63,$[m++]=0}return{jpegOffset:E,tables:N,sosMarker:$,sofPosition:S}};OA.decode._decodeOldJPEG=function(A,Q,E,B,I,C){var K,J,U,Y,H,R=OA.decode._decodeOldJPEGInit(A,Q,E,B);if(R.jpegOffset!=null){J=E+B-R.jpegOffset,Y=new Uint8Array(J);for(K=0;K<J;K++)Y[K]=Q[R.jpegOffset+K]}else{if(U=R.tables.length,Y=new Uint8Array(U+R.sosMarker.length+B+2),Y.set(R.tables),H=U,Y[R.sofPosition+5]=A.height>>>8&255,Y[R.sofPosition+6]=A.height&255,Y[R.sofPosition+7]=A.width>>>8&255,Y[R.sofPosition+8]=A.width&255,Q[E]!=255||Q[E+1]!=SOS)Y.set(R.sosMarker,H),H+=sosMarker.length;for(K=0;K<B;K++)Y[H++]=Q[E+K];Y[H++]=255,Y[H++]=EOI}var O=new OA.JpegDecoder;O.parse(Y);var N=O.getData({width:O.width,height:O.height,forceRGB:!0,isSourcePDF:!1});for(var K=0;K<N.length;K++)I[C+K]=N[K];if(A.t262&&A.t262[0]==6)A.t262[0]=2};OA.decode._decodePackBits=function(A,Q,E,B,I){var C=new Int8Array(A.buffer),K=new Int8Array(B.buffer),J=Q+E;while(Q<J){var U=C[Q];if(Q++,U>=0&&U<128)for(var Y=0;Y<U+1;Y++)K[I]=C[Q],I++,Q++;if(U>=-127&&U<0){for(var Y=0;Y<-U+1;Y++)K[I]=C[Q],I++;Q++}}return I};OA.decode._decodeThunder=function(A,Q,E,B,I){var C=[0,1,0,-1],K=[0,1,2,3,0,-3,-2,-1],J=Q+E,U=I*2,Y=0;while(Q<J){var H=A[Q],R=H>>>6,O=H&63;if(Q++,R==3)Y=O&15,B[U>>>1]|=Y<<4*(1-U&1),U++;if(R==0)for(var N=0;N<O;N++)B[U>>>1]|=Y<<4*(1-U&1),U++;if(R==2)for(var N=0;N<2;N++){var $=O>>>3*(1-N)&7;if($!=4)Y+=K[$],B[U>>>1]|=Y<<4*(1-U&1),U++}if(R==1)for(var N=0;N<3;N++){var $=O>>>2*(2-N)&3;if($!=2)Y+=C[$],B[U>>>1]|=Y<<4*(1-U&1),U++}}};OA.decode._dmap={"1":0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3};OA.decode._lens=function(){var A=function(U,Y,H,R){for(var O=0;O<Y.length;O++)U[Y[O]]=H+O*R},Q="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",E="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",B="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",I="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",C="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";Q=Q.split(","),E=E.split(","),B=B.split(","),I=I.split(","),C=C.split(",");var K={},J={};return A(K,Q,0,1),A(K,B,64,64),A(K,C,1792,64),A(J,E,0,1),A(J,I,64,64),A(J,C,1792,64),[K,J]}();OA.decode._decodeG4=function(A,Q,E,B,I,C,K){var J=OA.decode,U=Q<<3,Y=0,H="",R=[],O=[];for(var N=0;N<C;N++)O.push(0);O=J._makeDiff(O);var $=0,L=0,W=0,Z=0,G=0,X=0,q=0,M="",F=0,D=Math.ceil(C/8)*8;while(U>>>3<Q+E){Z=J._findDiff(O,$+($==0?0:1),1-X),G=J._findDiff(O,Z,X);var _=0;if(K==1)_=A[U>>>3]>>>7-(U&7)&1;if(K==2)_=A[U>>>3]>>>(U&7)&1;if(U++,H+=_,M=="H"){if(J._lens[X][H]!=null){var w=J._lens[X][H];if(H="",Y+=w,w<64){if(J._addNtimes(R,Y,X),$+=Y,X=1-X,Y=0,F--,F==0)M=""}}}else{if(H=="0001")H="",J._addNtimes(R,G-$,X),$=G;if(H=="001")H="",M="H",F=2;if(J._dmap[H]!=null)L=Z+J._dmap[H],J._addNtimes(R,L-$,X),$=L,H="",X=1-X}if(R.length==C&&M=="")J._writeBits(R,B,I*8+q*D),X=0,q++,$=0,O=J._makeDiff(R),R=[]}};OA.decode._findDiff=function(A,Q,E){for(var B=0;B<A.length;B+=2)if(A[B]>=Q&&A[B+1]==E)return A[B]};OA.decode._makeDiff=function(A){var Q=[];if(A[0]==1)Q.push(0,1);for(var E=1;E<A.length;E++)if(A[E-1]!=A[E])Q.push(E,A[E]);return Q.push(A.length,0,A.length,1),Q};OA.decode._decodeG2=function(A,Q,E,B,I,C,K){var J=OA.decode,U=Q<<3,Y=0,H="",R=[],O=0,N=0,$=Math.ceil(C/8)*8;while(U>>>3<Q+E){var L=0;if(K==1)L=A[U>>>3]>>>7-(U&7)&1;if(K==2)L=A[U>>>3]>>>(U&7)&1;if(U++,H+=L,Y=J._lens[O][H],Y!=null){if(J._addNtimes(R,Y,O),H="",Y<64)O=1-O;if(R.length==C){if(J._writeBits(R,B,I*8+N*$),R=[],N++,O=0,(U&7)!=0)U+=8-(U&7);if(Y>=64)U+=8}}}};OA.decode._decodeG3=function(A,Q,E,B,I,C,K,J){var U=OA.decode,Y=Q<<3,H=0,R="",O=[],N=[];for(var $=0;$<C;$++)O.push(0);var L=0,W=0,Z=0,G=0,X=0,q=0,M=-1,F="",D=0,_=!0,w=Math.ceil(C/8)*8;while(Y>>>3<Q+E){G=U._findDiff(N,L+(L==0?0:1),1-q),X=U._findDiff(N,G,q);var k=0;if(K==1)k=A[Y>>>3]>>>7-(Y&7)&1;if(K==2)k=A[Y>>>3]>>>(Y&7)&1;if(Y++,R+=k,_){if(U._lens[q][R]!=null){var T=U._lens[q][R];if(R="",H+=T,T<64)U._addNtimes(O,H,q),q=1-q,H=0}}else if(F=="H"){if(U._lens[q][R]!=null){var T=U._lens[q][R];if(R="",H+=T,T<64){if(U._addNtimes(O,H,q),L+=H,q=1-q,H=0,D--,D==0)F=""}}}else{if(R=="0001")R="",U._addNtimes(O,X-L,q),L=X;if(R=="001")R="",F="H",D=2;if(U._dmap[R]!=null)W=G+U._dmap[R],U._addNtimes(O,W-L,q),L=W,R="",q=1-q}if(R.endsWith("000000000001")){if(M>=0)U._writeBits(O,B,I*8+M*w);if(J){if(K==1)_=(A[Y>>>3]>>>7-(Y&7)&1)==1;if(K==2)_=(A[Y>>>3]>>>(Y&7)&1)==1;Y++}R="",q=0,M++,L=0,N=U._makeDiff(O),O=[]}}if(O.length==C)U._writeBits(O,B,I*8+M*w)};OA.decode._addNtimes=function(A,Q,E){for(var B=0;B<Q;B++)A.push(E)};OA.decode._writeBits=function(A,Q,E){for(var B=0;B<A.length;B++)Q[E+B>>>3]|=A[B]<<7-(E+B&7)};OA.decode._decodeLZW=OA.decode._decodeLZW=function(){var A,Q,E,B,I=0,C=0,K=0,J=0,U=function(){var W=A>>>3,Z=Q[W]<<16|Q[W+1]<<8|Q[W+2],G=Z>>>24-(A&7)-C&(1<<C)-1;return A+=C,G},Y=new Uint32Array(16384),H=0,R=function(W){if(W==H)return;H=W,K=1<<W,J=K+1;for(var Z=0;Z<J+1;Z++)Y[4*Z]=Y[4*Z+3]=Z,Y[4*Z+1]=65535,Y[4*Z+2]=1},O=function(W){C=W+1,I=J+1},N=function(W){var Z=W<<2,G=Y[Z+2],X=B+G-1;while(Z!=65535)E[X--]=Y[Z],Z=Y[Z+1];B+=G},$=function(W,Z){var G=I<<2,X=W<<2;if(Y[G]=Y[(Z<<2)+3],Y[G+1]=X,Y[G+2]=Y[X+2]+1,Y[G+3]=Y[X+3],I++,I+1==1<<C&&C!=12)C++},L=function(W,Z,G,X,q,M){A=Z<<3,Q=W,E=X,B=q;var F=Z+G<<3,D=0,_=0;R(M),O(M);while(A<F&&(D=U())!=J){if(D==K){if(O(M),D=U(),D==J)break;N(D)}else if(D<I)N(D),$(_,D);else $(_,_),N(I-1);_=D}return B};return L}();OA.tags={};OA._types=function(){var A=new Array(250);A.fill(0),A=A.concat([0,0,0,0,4,3,3,3,3,3,0,0,3,0,0,0,3,0,0,2,2,2,2,4,3,0,0,3,4,4,3,3,5,5,3,2,5,5,0,0,0,0,4,4,0,0,3,3,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,2,2,3,5,5,3,0,3,3,4,4,4,3,4,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);var Q={33432:2,33434:5,33437:5,34665:4,34850:3,34853:4,34855:3,34864:3,34866:4,36864:7,36867:2,36868:2,37121:7,37377:10,37378:5,37380:10,37381:5,37383:3,37384:3,37385:3,37386:5,37510:7,37520:2,37521:2,37522:2,40960:7,40961:3,40962:4,40963:4,40965:4,41486:5,41487:5,41488:3,41985:3,41986:3,41987:3,41988:5,41989:3,41990:3,41993:3,41994:3,41995:7,41996:3,42032:2,42033:2,42034:5,42036:2,42037:2,59932:7};return{basic:{main:A,rest:Q},gps:{main:[1,2,5,2,5,1,5,5,0,9],rest:{18:2,29:2}}}}();OA._readIFD=function(A,Q,E,B,I,C){var K=A.readUshort(Q,E);E+=2;var J={};if(C.debug)log("   ".repeat(I),B.length-1,">>>----------------");for(var U=0;U<K;U++){var Y=A.readUshort(Q,E);E+=2;var H=A.readUshort(Q,E);E+=2;var R=A.readUint(Q,E);E+=4;var O=A.readUint(Q,E);E+=4;var N=[];if(H==1||H==7){var $=R<5?E-4:O;if($+R>Q.buffer.byteLength)R=Q.buffer.byteLength-$;N=new Uint8Array(Q.buffer,$,R)}if(H==2){var L=R<5?E-4:O,W=Q[L],Z=Math.max(0,Math.min(R-1,Q.length-L));if(W<128||Z==0)N.push(A.readASCII(Q,L,Z));else N=new Uint8Array(Q.buffer,L,Z)}if(H==3)for(var G=0;G<R;G++)N.push(A.readUshort(Q,(R<3?E-4:O)+2*G));if(H==4||H==13)for(var G=0;G<R;G++)N.push(A.readUint(Q,(R<2?E-4:O)+4*G));if(H==5||H==10){var X=H==5?A.readUint:A.readInt;for(var G=0;G<R;G++)N.push([X(Q,O+G*8),X(Q,O+G*8+4)])}if(H==8)for(var G=0;G<R;G++)N.push(A.readShort(Q,(R<3?E-4:O)+2*G));if(H==9)for(var G=0;G<R;G++)N.push(A.readInt(Q,(R<2?E-4:O)+4*G));if(H==11)for(var G=0;G<R;G++)N.push(A.readFloat(Q,O+G*4));if(H==12)for(var G=0;G<R;G++)N.push(A.readDouble(Q,O+G*8));if(R!=0&&N.length==0){if(log(Y,"unknown TIFF tag type: ",H,"num:",R),U==0)return;continue}if(C.debug)log("   ".repeat(I),Y,H,OA.tags[Y],N);if(J["t"+Y]=N,Y==330&&J.t272&&J.t272[0]=="DSLR-A100");else if(Y==330||Y==34665||Y==34853||Y==50740&&A.readUshort(Q,A.readUint(N,0))<300||Y==61440){var q=Y==50740?[A.readUint(N,0)]:N,M=[];for(var G=0;G<q.length;G++)OA._readIFD(A,Q,q[G],M,I+1,C);if(Y==330)J.subIFD=M;if(Y==34665)J.exifIFD=M[0];if(Y==34853)J.gpsiIFD=M[0];if(Y==50740)J.dngPrvt=M[0];if(Y==61440)J.fujiIFD=M[0]}if(Y==37500&&C.parseMN){var F=N;if(A.readASCII(F,0,5)=="Nikon")J.makerNote=OA.decode(F.slice(10).buffer)[0];else if(A.readASCII(F,0,5)=="OLYMP"||A.readASCII(F,0,9)=="OM SYSTEM"){var D=[8208,8224,8240,8256,8272],_=[];OA._readIFD(A,F,F[1]==77?16:F[5]==85?12:8,_,I+1,C);var w=J.makerNote=_.pop();for(var G=0;G<D.length;G++){var k="t"+D[G];if(w[k]==null)continue;OA._readIFD(A,F,w[k][0],_,I+1,C),w[k]=_.pop()}if(w.t12288)OA._readIFD(A,w.t12288,0,_,I+1,C),w.t12288=_.pop()}else if(A.readUshort(Q,O)<300&&A.readUshort(Q,O+4)<=12){var _=[];OA._readIFD(A,Q,O,_,I+1,C),J.makerNote=_[0]}}}if(B.push(J),C.debug)log("   ".repeat(I),"<<<---------------");return E};OA._writeIFD=function(A,Q,E,B,I){var C=Object.keys(I),K=C.length;if(I.exifIFD)K--;if(I.gpsiIFD)K--;A.writeUshort(E,B,K),B+=2;var J=B+K*12+4;for(var U=0;U<C.length;U++){var Y=C[U];if(Y=="t34665"||Y=="t34853")continue;if(Y=="exifIFD")Y="t34665";if(Y=="gpsiIFD")Y="t34853";var H=parseInt(Y.slice(1)),R=Q.main[H];if(R==null)R=Q.rest[H];if(R==null||R==0)throw new Error("unknown type of tag: "+H);var O=I[Y];if(H==34665){var N=OA._writeIFD(A,Q,E,J,I.exifIFD);O=[J],J=N[1]}if(H==34853){var N=OA._writeIFD(A,OA._types.gps,E,J,I.gpsiIFD);O=[J],J=N[1]}if(R==2)O=O[0]+"\x00";var $=O.length;A.writeUshort(E,B,H),B+=2,A.writeUshort(E,B,R),B+=2,A.writeUint(E,B,$),B+=4;var L=[-1,1,1,2,4,8,0,1,0,4,8,0,8][R]*$,W=B;if(L>4)A.writeUint(E,B,J),W=J;if(R==1||R==7)for(var Z=0;Z<$;Z++)E[W+Z]=O[Z];else if(R==2)A.writeASCII(E,W,O);else if(R==3)for(var Z=0;Z<$;Z++)A.writeUshort(E,W+2*Z,O[Z]);else if(R==4)for(var Z=0;Z<$;Z++)A.writeUint(E,W+4*Z,O[Z]);else if(R==5||R==10){var G=R==5?A.writeUint:A.writeInt;for(var Z=0;Z<$;Z++){var X=O[Z],q=X[0],M=X[1];if(q==null)throw"e";G(E,W+8*Z,q),G(E,W+8*Z+4,M)}}else if(R==9)for(var Z=0;Z<$;Z++)A.writeInt(E,W+4*Z,O[Z]);else if(R==12)for(var Z=0;Z<$;Z++)A.writeDouble(E,W+8*Z,O[Z]);else throw R;if(L>4)L+=L&1,J+=L;B+=4}return[B,J]};OA.toRGBA8=function(A,Q){function E(d){return d<0.0031308?12.92*d:1.055*Math.pow(d,0.4166666666666667)-0.055}var{width:B,height:I}=A,C=B*I,K=C*4,J=A.data,U=new Uint8Array(C*4),Y=A.t262?A.t262[0]:2,H=A.t258?Math.min(32,A.t258[0]):1;if(A.t262==null&&H==1)Y=0;var R=A.t277?A.t277[0]:A.t258?A.t258.length:[1,1,3,1,1,4,3][Y],O=A.t339?A.t339[0]:null;if(Y==1&&H==32&&O!=3)throw"e";var N=Math.ceil(R*H*B/8);if(Y==0){Q=0.00390625;for(var $=0;$<I;$++){var L=$*N,W=$*B;if(H==1)for(var Z=0;Z<B;Z++){var G=W+Z<<2,X=J[L+(Z>>3)]>>7-(Z&7)&1;U[G]=U[G+1]=U[G+2]=(1-X)*255,U[G+3]=255}if(H==4)for(var Z=0;Z<B;Z++){var G=W+Z<<2,X=J[L+(Z>>1)]>>4-4*(Z&1)&15;U[G]=U[G+1]=U[G+2]=(15-X)*17,U[G+3]=255}if(H==8)for(var Z=0;Z<B;Z++){var G=W+Z<<2,X=J[L+Z];U[G]=U[G+1]=U[G+2]=255-X,U[G+3]=255}if(H==16)for(var Z=0;Z<B;Z++){var G=W+Z<<2,q=L+2*Z,X=J[q+1]<<8|J[q];U[G]=U[G+1]=U[G+2]=Math.min(255,255-~~(X*Q)),U[G+3]=255}}}else if(Y==1){if(Q==null)Q=0.00390625;var M=(J.length&3)==0?new Float32Array(J.buffer):null;for(var $=0;$<I;$++){var L=$*N,W=$*B;if(H==1)for(var Z=0;Z<B;Z++){var G=W+Z<<2,X=J[L+(Z>>3)]>>7-(Z&7)&1;U[G]=U[G+1]=U[G+2]=X*255,U[G+3]=255}if(H==2)for(var Z=0;Z<B;Z++){var G=W+Z<<2,X=J[L+(Z>>2)]>>6-2*(Z&3)&3;U[G]=U[G+1]=U[G+2]=X*85,U[G+3]=255}if(H==8)for(var Z=0;Z<B;Z++){var G=W+Z<<2,X=J[L+Z*R];U[G]=U[G+1]=U[G+2]=X,U[G+3]=255}if(H==16)for(var Z=0;Z<B;Z++){var G=W+Z<<2,q=L+2*Z,X=J[q+1]<<8|J[q];U[G]=U[G+1]=U[G+2]=Math.min(255,~~(X*Q)),U[G+3]=255}if(H==32)for(var Z=0;Z<B;Z++){var G=W+Z<<2,q=(L>>>2)+Z,X=M[q];U[G]=U[G+1]=U[G+2]=~~(0.5+255*X),U[G+3]=255}}}else if(Y==2)if(H==8){if(R==1)for(var Z=0;Z<C;Z++)U[4*Z]=U[4*Z+1]=U[4*Z+2]=J[Z],U[4*Z+3]=255;if(R==3)for(var Z=0;Z<C;Z++){var G=Z<<2,F=Z*3;U[G]=J[F],U[G+1]=J[F+1],U[G+2]=J[F+2],U[G+3]=255}if(R>=4)for(var Z=0;Z<C;Z++){var G=Z<<2,F=Z*R;U[G]=J[F],U[G+1]=J[F+1],U[G+2]=J[F+2],U[G+3]=J[F+3]}}else if(H==16){if(R==4)for(var Z=0;Z<C;Z++){var G=Z<<2,F=Z*8+1;U[G]=J[F],U[G+1]=J[F+2],U[G+2]=J[F+4],U[G+3]=J[F+6]}if(R==3)for(var Z=0;Z<C;Z++){var G=Z<<2,F=Z*6+1;U[G]=J[F],U[G+1]=J[F+2],U[G+2]=J[F+4],U[G+3]=255}}else if(H==32){var D=new Float32Array(J.buffer),_=0;for(var Z=0;Z<D.length;Z++)_=Math.min(_,D[Z]);if(_<0)for(var Z=0;Z<J.length;Z+=4){var w=J[Z];J[Z]=J[Z+3],J[Z+3]=w,w=J[Z+1],J[Z+1]=J[Z+2],J[Z+2]=w}var k=[];for(var Z=0;Z<65536;Z++)k.push(E(Z/65535));for(var Z=0;Z<D.length;Z++){var T=Math.max(0,Math.min(1,D[Z]));D[Z]=k[~~(0.5+T*65535)]}if(R==3)for(var Z=0;Z<C;Z++){var G=Z<<2,F=Z*3;U[G]=~~(0.5+D[F]*255),U[G+1]=~~(0.5+D[F+1]*255),U[G+2]=~~(0.5+D[F+2]*255),U[G+3]=255}else if(R==4)for(var Z=0;Z<C;Z++){var G=Z<<2,F=Z*4;U[G]=~~(0.5+D[F]*255),U[G+1]=~~(0.5+D[F+1]*255),U[G+2]=~~(0.5+D[F+2]*255),U[G+3]=~~(0.5+D[F+3]*255)}else throw R}else throw H;else if(Y==3){var z=A.t320,j=1<<H,v=H==8&&R>1&&A.t338&&A.t338[0]!=0;for(var $=0;$<I;$++)for(var g=0;g<B;g++){var Z=$*B+g,G=Z<<2,P=0,V=$*N;if(H==1)P=J[V+(g>>>3)]>>>7-(g&7)&1;else if(H==2)P=J[V+(g>>>2)]>>>6-2*(g&3)&3;else if(H==4)P=J[V+(g>>>1)]>>>4-4*(g&1)&15;else if(H==8)P=J[V+g*R];else throw H;U[G]=z[P]>>8,U[G+1]=z[j+P]>>8,U[G+2]=z[j+j+P]>>8,U[G+3]=v?J[V+g*R+1]:255}}else if(Y==5){var S=R>4?1:0;for(var Z=0;Z<C;Z++){var G=Z<<2,h=Z*R;if(window.UDOC){var x=J[h],b=J[h+1],m=J[h+2],s=J[h+3],i=UDOC.C.cmykToRgb([x*0.00392156862745098,b*0.00392156862745098,m*0.00392156862745098,s*0.00392156862745098]);U[G]=~~(0.5+255*i[0]),U[G+1]=~~(0.5+255*i[1]),U[G+2]=~~(0.5+255*i[2])}else{var x=255-J[h],b=255-J[h+1],m=255-J[h+2],s=(255-J[h+3])*0.00392156862745098;U[G]=~~(x*s+0.5),U[G+1]=~~(b*s+0.5),U[G+2]=~~(m*s+0.5)}U[G+3]=255*(1-S)+J[h+4]*S}}else if(Y==6&&A.t278){var n=A.t278[0];for(var $=0;$<I;$+=n){var Z=$*B,l=n*B;for(var c=0;c<l;c++){var G=4*(Z+c),h=3*Z+4*(c>>>1),m=J[h+(c&1)],o=J[h+2]-128,e=J[h+3]-128,BA=m+((e>>2)+(e>>3)+(e>>5)),EA=m-((o>>2)+(o>>4)+(o>>5))-((e>>1)+(e>>3)+(e>>4)+(e>>5)),CA=m+(o+(o>>1)+(o>>2)+(o>>6));U[G]=Math.max(0,Math.min(255,BA)),U[G+1]=Math.max(0,Math.min(255,EA)),U[G+2]=Math.max(0,Math.min(255,CA)),U[G+3]=255}}}else if(Y==32845)for(var $=0;$<I;$++)for(var g=0;g<B;g++){var h=($*B+g)*6,G=($*B+g)*4,f=J[h+1]<<8|J[h],f=Math.pow(2,(f+0.5)/256-64),NA=(J[h+3]+0.5)/410,YA=(J[h+5]+0.5)/410,FA=9*NA/(6*NA-16*YA+12),ZA=4*YA/(6*NA-16*YA+12),jA=f,wA=FA*jA/ZA,m=jA,VA=(1-FA-ZA)*jA/ZA,BA=2.69*wA-1.276*m-0.414*VA,EA=-1.022*wA+1.978*m+0.044*VA,CA=0.061*wA-0.224*m+1.163*VA;U[G]=E(Math.min(BA,1))*255,U[G+1]=E(Math.min(EA,1))*255,U[G+2]=E(Math.min(CA,1))*255,U[G+3]=255}else log("Unknown Photometric interpretation: "+Y);return U};OA.replaceIMG=function(A){if(A==null)A=document.getElementsByTagName("img");var Q=["tif","tiff","dng","cr2","nef"];for(var E=0;E<A.length;E++){var B=A[E],I=B.getAttribute("src");if(I==null)continue;var C=I.split(".").pop().toLowerCase();if(Q.indexOf(C)==-1)continue;var K=new XMLHttpRequest;OA._xhrs.push(K),OA._imgs.push(B),K.open("GET",I),K.responseType="arraybuffer",K.onload=OA._imgLoaded,K.send()}};OA._xhrs=[];OA._imgs=[];OA._imgLoaded=function(A){var Q=OA._xhrs.indexOf(A.target),E=OA._imgs[Q];OA._xhrs.splice(Q,1),OA._imgs.splice(Q,1),E.setAttribute("src",OA.bufferToURI(A.target.response))};OA.bufferToURI=function(A){var Q=OA.decode(A),E=Q,B=0,I=E[0];if(Q[0].subIFD)E=E.concat(Q[0].subIFD);for(var C=0;C<E.length;C++){var K=E[C];if(K.t258==null||K.t258.length<3)continue;var J=K.t256*K.t257;if(J>B)B=J,I=K}OA.decodeImage(A,I,Q);var U=OA.toRGBA8(I),Y=I.width,H=I.height,R=document.createElement("canvas");R.width=Y,R.height=H;var O=R.getContext("2d"),N=new ImageData(new Uint8ClampedArray(U.buffer),Y,H);return O.putImageData(N,0,0),R.toDataURL()};OA._binBE={nextZero:function(A,Q){while(A[Q]!=0)Q++;return Q},readUshort:function(A,Q){return A[Q]<<8|A[Q+1]},readShort:function(A,Q){var E=OA._binBE.ui8;return E[0]=A[Q+1],E[1]=A[Q+0],OA._binBE.i16[0]},readInt:function(A,Q){var E=OA._binBE.ui8;return E[0]=A[Q+3],E[1]=A[Q+2],E[2]=A[Q+1],E[3]=A[Q+0],OA._binBE.i32[0]},readUint:function(A,Q){var E=OA._binBE.ui8;return E[0]=A[Q+3],E[1]=A[Q+2],E[2]=A[Q+1],E[3]=A[Q+0],OA._binBE.ui32[0]},readASCII:function(A,Q,E){var B="";for(var I=0;I<E;I++)B+=String.fromCharCode(A[Q+I]);return B},readFloat:function(A,Q){var E=OA._binBE.ui8;for(var B=0;B<4;B++)E[B]=A[Q+3-B];return OA._binBE.fl32[0]},readDouble:function(A,Q){var E=OA._binBE.ui8;for(var B=0;B<8;B++)E[B]=A[Q+7-B];return OA._binBE.fl64[0]},writeUshort:function(A,Q,E){A[Q]=E>>8&255,A[Q+1]=E&255},writeInt:function(A,Q,E){var B=OA._binBE.ui8;OA._binBE.i32[0]=E,A[Q+3]=B[0],A[Q+2]=B[1],A[Q+1]=B[2],A[Q+0]=B[3]},writeUint:function(A,Q,E){A[Q]=E>>24&255,A[Q+1]=E>>16&255,A[Q+2]=E>>8&255,A[Q+3]=E>>0&255},writeASCII:function(A,Q,E){for(var B=0;B<E.length;B++)A[Q+B]=E.charCodeAt(B)},writeDouble:function(A,Q,E){OA._binBE.fl64[0]=E;for(var B=0;B<8;B++)A[Q+B]=OA._binBE.ui8[7-B]}};OA._binBE.ui8=new Uint8Array(8);OA._binBE.i16=new Int16Array(OA._binBE.ui8.buffer);OA._binBE.i32=new Int32Array(OA._binBE.ui8.buffer);OA._binBE.ui32=new Uint32Array(OA._binBE.ui8.buffer);OA._binBE.fl32=new Float32Array(OA._binBE.ui8.buffer);OA._binBE.fl64=new Float64Array(OA._binBE.ui8.buffer);OA._binLE={nextZero:OA._binBE.nextZero,readUshort:function(A,Q){return A[Q+1]<<8|A[Q]},readShort:function(A,Q){var E=OA._binBE.ui8;return E[0]=A[Q+0],E[1]=A[Q+1],OA._binBE.i16[0]},readInt:function(A,Q){var E=OA._binBE.ui8;return E[0]=A[Q+0],E[1]=A[Q+1],E[2]=A[Q+2],E[3]=A[Q+3],OA._binBE.i32[0]},readUint:function(A,Q){var E=OA._binBE.ui8;return E[0]=A[Q+0],E[1]=A[Q+1],E[2]=A[Q+2],E[3]=A[Q+3],OA._binBE.ui32[0]},readASCII:OA._binBE.readASCII,readFloat:function(A,Q){var E=OA._binBE.ui8;for(var B=0;B<4;B++)E[B]=A[Q+B];return OA._binBE.fl32[0]},readDouble:function(A,Q){var E=OA._binBE.ui8;for(var B=0;B<8;B++)E[B]=A[Q+B];return OA._binBE.fl64[0]},writeUshort:function(A,Q,E){A[Q]=E&255,A[Q+1]=E>>8&255},writeInt:function(A,Q,E){var B=OA._binBE.ui8;OA._binBE.i32[0]=E,A[Q+0]=B[0],A[Q+1]=B[1],A[Q+2]=B[2],A[Q+3]=B[3]},writeUint:function(A,Q,E){A[Q]=E>>>0&255,A[Q+1]=E>>>8&255,A[Q+2]=E>>>16&255,A[Q+3]=E>>>24&255},writeASCII:OA._binBE.writeASCII};OA._copyTile=function(A,Q,E,B,I,C,K,J){var U=Math.min(Q,I-K),Y=Math.min(E,C-J);for(var H=0;H<Y;H++){var R=(J+H)*I+K,O=H*Q;for(var N=0;N<U;N++)B[R+N]=A[O+N]}};OA._inflateRaw=function(){var A={};return A.H={},A.H.N=function(Q,E){var B=Uint8Array,I=0,C=0,K=0,J=0,U=0,Y=0,H=0,R=0,O=0,N,$;if(Q[0]==3&&Q[1]==0)return E?E:new B(0);var L=A.H,W=L.b,Z=L.e,G=L.R,X=L.n,q=L.A,M=L.Z,F=L.m,D=E==null;if(D)E=new B(Q.length>>>2<<5);while(I==0){if(I=W(Q,O,1),C=W(Q,O+1,2),O+=3,C==0){if((O&7)!=0)O+=8-(O&7);var _=(O>>>3)+4,w=Q[_-4]|Q[_-3]<<8;if(D)E=A.H.W(E,R+w);E.set(new B(Q.buffer,Q.byteOffset+_,w),R),O=_+w<<3,R+=w;continue}if(D)E=A.H.W(E,R+131072);if(C==1)N=F.J,$=F.h,Y=511,H=31;if(C==2){K=Z(Q,O,5)+257,J=Z(Q,O+5,5)+1,U=Z(Q,O+10,4)+4,O+=14;var k=O,T=1;for(var z=0;z<38;z+=2)F.Q[z]=0,F.Q[z+1]=0;for(var z=0;z<U;z++){var j=Z(Q,O+z*3,3);if(F.Q[(F.X[z]<<1)+1]=j,j>T)T=j}O+=3*U,X(F.Q,T),q(F.Q,T,F.u),N=F.w,$=F.d,O=G(F.u,(1<<T)-1,K+J,Q,O,F.v);var v=L.V(F.v,0,K,F.C);Y=(1<<v)-1;var g=L.V(F.v,K,J,F.D);H=(1<<g)-1,X(F.C,v),q(F.C,v,N),X(F.D,g),q(F.D,g,$)}while(!0){var P=N[M(Q,O)&Y];O+=P&15;var V=P>>>4;if(V>>>8==0)E[R++]=V;else if(V==256)break;else{var S=R+V-254;if(V>264){var h=F.q[V-257];S=R+(h>>>3)+Z(Q,O,h&7),O+=h&7}var x=$[M(Q,O)&H];O+=x&15;var b=x>>>4,m=F.c[b],s=(m>>>4)+W(Q,O,m&15);O+=m&15;while(R<S)E[R]=E[R++-s],E[R]=E[R++-s],E[R]=E[R++-s],E[R]=E[R++-s];R=S}}}return E.length==R?E:E.slice(0,R)},A.H.W=function(Q,E){var B=Q.length;if(E<=B)return Q;var I=new Uint8Array(B<<1);return I.set(Q,0),I},A.H.R=function(Q,E,B,I,C,K){var J=A.H.e,U=A.H.Z,Y=0;while(Y<B){var H=Q[U(I,C)&E];C+=H&15;var R=H>>>4;if(R<=15)K[Y]=R,Y++;else{var O=0,N=0;if(R==16)N=3+J(I,C,2),C+=2,O=K[Y-1];else if(R==17)N=3+J(I,C,3),C+=3;else if(R==18)N=11+J(I,C,7),C+=7;var $=Y+N;while(Y<$)K[Y]=O,Y++}}return C},A.H.V=function(Q,E,B,I){var C=0,K=0,J=I.length>>>1;while(K<B){var U=Q[K+E];if(I[K<<1]=0,I[(K<<1)+1]=U,U>C)C=U;K++}while(K<J)I[K<<1]=0,I[(K<<1)+1]=0,K++;return C},A.H.n=function(Q,E){var B=A.H.m,I=Q.length,C,K,J,U,Y,H=B.j;for(var U=0;U<=E;U++)H[U]=0;for(U=1;U<I;U+=2)H[Q[U]]++;var R=B.K;C=0,H[0]=0;for(K=1;K<=E;K++)C=C+H[K-1]<<1,R[K]=C;for(J=0;J<I;J+=2)if(Y=Q[J+1],Y!=0)Q[J]=R[Y],R[Y]++},A.H.A=function(Q,E,B){var I=Q.length,C=A.H.m,K=C.r;for(var J=0;J<I;J+=2)if(Q[J+1]!=0){var U=J>>1,Y=Q[J+1],H=U<<4|Y,R=E-Y,O=Q[J]<<R,N=O+(1<<R);while(O!=N){var $=K[O]>>>15-E;B[$]=H,O++}}},A.H.l=function(Q,E){var B=A.H.m.r,I=15-E;for(var C=0;C<Q.length;C+=2){var K=Q[C]<<E-Q[C+1];Q[C]=B[K]>>>I}},A.H.M=function(Q,E,B){B=B<<(E&7);var I=E>>>3;Q[I]|=B,Q[I+1]|=B>>>8},A.H.I=function(Q,E,B){B=B<<(E&7);var I=E>>>3;Q[I]|=B,Q[I+1]|=B>>>8,Q[I+2]|=B>>>16},A.H.e=function(Q,E,B){return(Q[E>>>3]|Q[(E>>>3)+1]<<8)>>>(E&7)&(1<<B)-1},A.H.b=function(Q,E,B){return(Q[E>>>3]|Q[(E>>>3)+1]<<8|Q[(E>>>3)+2]<<16)>>>(E&7)&(1<<B)-1},A.H.Z=function(Q,E){return(Q[E>>>3]|Q[(E>>>3)+1]<<8|Q[(E>>>3)+2]<<16)>>>(E&7)},A.H.i=function(Q,E){return(Q[E>>>3]|Q[(E>>>3)+1]<<8|Q[(E>>>3)+2]<<16|Q[(E>>>3)+3]<<24)>>>(E&7)},A.H.m=function(){var Q=Uint16Array,E=Uint32Array;return{K:new Q(16),j:new Q(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new Q(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new E(32),J:new Q(512),_:[],h:new Q(32),$:[],w:new Q(32768),C:[],v:[],d:new Q(32768),D:[],u:new Q(512),Q:[],r:new Q(32768),s:new E(286),Y:new E(30),a:new E(19),t:new E(15000),k:new Q(65536),g:new Q(32768)}}(),function(){var Q=A.H.m,E=32768;for(var B=0;B<E;B++){var I=B;I=(I&2863311530)>>>1|(I&1431655765)<<1,I=(I&3435973836)>>>2|(I&858993459)<<2,I=(I&4042322160)>>>4|(I&252645135)<<4,I=(I&4278255360)>>>8|(I&16711935)<<8,Q.r[B]=(I>>>16|I<<16)>>>17}function C(K,J,U){while(J--!=0)K.push(0,U)}for(var B=0;B<32;B++)Q.q[B]=Q.S[B]<<3|Q.T[B],Q.c[B]=Q.p[B]<<4|Q.z[B];C(Q._,144,8),C(Q._,112,9),C(Q._,24,7),C(Q._,8,8),A.H.n(Q._,9),A.H.A(Q._,9,Q.J),A.H.l(Q._,9),C(Q.$,32,5),A.H.n(Q.$,5),A.H.A(Q.$,5,Q.h),A.H.l(Q.$,5),C(Q.Q,19,0),C(Q.C,286,0),C(Q.D,30,0),C(Q.v,320,0)}(),A.H.N}();OA.LosslessJpegDecode=function(){var A,Q;function E(){return A[Q++]}function B(){return A[Q++]<<8|A[Q++]}function I(W){var Z=E(),G=[0,0,0,255],X=[],q=8;for(var M=0;M<16;M++)X[M]=E();for(var M=0;M<16;M++)for(var F=0;F<X[M];F++){var D=C(G,0,M+1,1);G[D+3]=E()}var _=new Uint8Array(1<<q);W[Z]=[new Uint8Array(G),_];for(var M=0;M<1<<q;M++){var w=q,k=M,T=0,z=0;while(G[T+3]==255&&w!=0)z=k>>--w&1,T=G[T+z];_[M]=T}}function C(W,Z,G,X){if(W[Z+3]!=255)return 0;if(G==0)return Z;for(var q=0;q<2;q++){if(W[Z+q]==0)W[Z+q]=W.length,W.push(0,0,X,255);var M=C(W,W[Z+q],G-1,X+1);if(M!=0)return M}return 0}function K(W){var{b:Z,f:G}=W;while(Z<25&&W.a<W.d){var X=W.data[W.a++];if(X==255&&!W.c)W.a++;G=G<<8|X,Z+=8}if(Z<0)throw"e";W.b=Z,W.f=G}function J(W,Z){if(Z.b<W)K(Z);return Z.f>>(Z.b-=W)&65535>>16-W}function U(W,Z){var G=W[0],X=0,q=255,M=0;if(Z.b<16)K(Z);var F=Z.f>>Z.b-8&255;X=W[1][F],q=G[X+3],Z.b-=G[X+2];while(q==255)M=Z.f>>--Z.b&1,X=G[X+M],q=G[X+3];return q}function Y(W,Z){if(W<32768>>16-Z)W+=-(1<<Z)+1;return W}function H(W,Z){var G=U(W,Z);if(G==0)return 0;if(G==16)return-32768;var X=J(G,Z);return Y(X,G)}function R(W,Z,G,X,q,M){var F=0;for(var D=0;D<M;D++){var _=D*Z;for(var w=0;w<Z;w+=q){F++;for(var k=0;k<q;k++)W[_+w+k]=H(X[k],G)}if(G.e!=0&&F%G.e==0&&D!=0){var{a:T,data:z}=G;while(z[T]!=255||!(208<=z[T+1]&&z[T+1]<=215))T--;G.a=T+2,G.f=0,G.b=0}}}function O(W,Z){return Y(J(W,Z),W)}function N(W,Z,G,X,q){var M=A.length-Q;for(var F=0;F<M;F+=4){var D=A[Q+F];A[Q+F]=A[Q+F+3],A[Q+F+3]=D;var D=A[Q+F+1];A[Q+F+1]=A[Q+F+2],A[Q+F+2]=D}for(var _=0;_<q;_++){var w=32768,k=32768;for(var T=0;T<Z;T+=2){var z=U(X,G),j=U(X,G);if(z!=0)w+=O(z,G);if(j!=0)k+=O(j,G);W[_*Z+T]=w&65535,W[_*Z+T+1]=k&65535}}}function $(W){if(A=W,Q=0,B()!=65496)throw"e";var Z=[],G=0,X=0,q=0,M=[],F=[],D=[],_=0,w=0,k=0;while(!0){var T=B();if(T==65535){Q--;continue}var z=B();if(T==65475){X=E(),w=B(),k=B(),_=E();for(var j=0;j<_;j++){var v=E(),g=E(),P=E();if(P!=0)throw"e";Z[v]=[j,g>>4,g&15]}}else if(T==65476){var V=Q+z-2;while(Q<V)I(F)}else if(T==65498){Q++;for(var j=0;j<_;j++){var S=E(),h=Z[S];D[h[0]]=F[E()>>>4],M[h[0]]=h.slice(1)}G=E(),Q+=2;break}else if(T==65501)q=B();else Q+=z-2}var x=X>8?Uint16Array:Uint8Array,b=new x(w*k*_),m={b:0,f:0,c:G==8,a:Q,data:A,d:A.length,e:q};if(m.c)N(b,k*_,m,D[0],w);else{var s=[],i=0,n=0;for(var j=0;j<_;j++){var l=M[j],c=l[0],o=l[1];if(c>i)i=c;if(o>n)n=o;s.push(c*o)}if(i!=1||n!=1){if(_!=3||s[1]!=1||s[2]!=1)throw"e";if(i!=2||n!=1&&n!=2)throw"e";var e=[],BA=0;for(var j=0;j<_;j++){for(var EA=0;EA<s[j];EA++)e.push(D[j]);BA+=s[j]}var CA=k/i,f=w/n,NA=CA*f;R(b,CA*BA,m,e,BA,f),L(b,G,CA,f,BA-2,BA,BA,X);var YA=new Uint16Array(NA*s[0]);if(i==2&&n==2){for(var j=0;j<NA;j++)YA[4*j]=b[6*j],YA[4*j+1]=b[6*j+1],YA[4*j+2]=b[6*j+2],YA[4*j+3]=b[6*j+3];L(YA,G,CA*4,f,0,1,1,X);for(var j=0;j<NA;j++)b[6*j]=YA[4*j],b[6*j+1]=YA[4*j+1],b[6*j+2]=YA[4*j+2],b[6*j+3]=YA[4*j+3]}if(i==2&&n==1){for(var j=0;j<NA;j++)YA[2*j]=b[4*j],YA[2*j+1]=b[4*j+1];L(YA,G,CA*2,f,0,1,1,X);for(var j=0;j<NA;j++)b[4*j]=YA[2*j],b[4*j+1]=YA[2*j+1]}var FA=b.slice(0);for(var o=0;o<w;o++)if(n==2)for(var c=0;c<k;c++){var ZA=(o*k+c)*_,jA=((o>>>1)*CA+(c>>>1))*BA,wA=(o&1)*2+(c&1);b[ZA]=FA[jA+wA],b[ZA+1]=FA[jA+4],b[ZA+2]=FA[jA+5]}else for(var c=0;c<k;c++){var ZA=(o*k+c)*_,jA=(o*CA+(c>>>1))*BA,wA=c&1;b[ZA]=FA[jA+wA],b[ZA+1]=FA[jA+2],b[ZA+2]=FA[jA+3]}}else if(R(b,k*_,m,D,_,w),q==0)L(b,G,k,w,0,_,_,X);else{var VA=Math.floor(q/k);for(var o=0;o<w;o+=VA){var d=b.slice(o*k*_,(o+VA)*k*_);L(d,G,k,VA,0,_,_,X),b.set(d,o*k*_)}}}return b}function L(W,Z,G,X,q,M,F,D){var _=G*F;for(var w=q;w<M;w++)W[w]+=1<<D-1;for(var k=F;k<_;k+=F)for(var w=q;w<M;w++)W[k+w]+=W[k+w-F];for(var T=1;T<X;T++){var z=T*_;for(var w=q;w<M;w++)W[z+w]+=W[z+w-_];for(var k=F;k<_;k+=F)for(var w=q;w<M;w++){var j=z+k+w,v=j-_,g=W[j-F],P=0;if(Z==0)P=0;else if(Z==1)P=g;else if(Z==2)P=W[v];else if(Z==3)P=W[v-F];else if(Z==4)P=g+(W[v]-W[v-F]);else if(Z==5)P=g+(W[v]-W[v-F]>>>1);else if(Z==6)P=W[v]+(g-W[v-F]>>>1);else if(Z==7)P=g+W[v]>>>1;else throw Z;W[j]+=P}}}return $}();(function(){var A=0,Q=1,E=2,B=3,I=4,C=5,K=6,J=7,U=8,Y=9,H=10,R=11,O=12,N=13,$=14,L=15,W=16,Z=17,G=18;function X(S){var h=OA._binBE.readUshort,x={b:h(S,0),i:S[2],C:S[3],u:S[4],q:h(S,5),k:h(S,7),e:h(S,9),l:h(S,11),s:S[13],d:h(S,14)};if(x.b!=18771||x.i>1||x.q<6||x.q%6||x.e<768||x.e%24||x.l!=768||x.k<x.l||x.k%x.l||x.k-x.e>=x.l||x.s>16||x.s!=x.k/x.l||x.s!=Math.ceil(x.e/x.l)||x.d!=x.q/6||x.u!=12&&x.u!=14&&x.u!=16||x.C!=16&&x.C!=0)throw"Invalid data";if(x.i==0)throw"Not implemented. We need this file!";return x.h=x.C==16,x.m=(x.h?x.l*2/3:x.l>>>1)|0,x.A=x.m+2,x.f=64,x.g=(1<<x.u)-1,x.n=4*x.u,x}function q(S,h){var x=new Array(h.s),b=4*h.s,m=16+b;if(b&12)m+=16-(b&12);for(var s=0,i=16;s<h.s;i+=4){var n=OA._binBE.readUint(S,i);x[s]=S.slice(m,m+n),x[s].j=0,x[s].a=0,m+=n,s++}if(m!=S.length)throw"Invalid data";return x}function M(S,h){for(var x=-h[4],b=0;x<=h[4];b++,x++)S[b]=x<=-h[3]?-4:x<=-h[2]?-3:x<=-h[1]?-2:x<-h[0]?-1:x<=h[0]?0:x<h[1]?1:x<h[2]?2:x<h[3]?3:4}function F(S,h,x){var b=[h,3*h+18,5*h+67,7*h+276,x];S.o=h,S.w=(b[4]+2*h)/(2*h+1)+1|0,S.v=Math.ceil(Math.log2(S.w)),S.t=9,M(S.c,b)}function D(S){var h={c:new Int8Array(2<<S.u)};return F(h,0,S.g),h}function _(S){var h=[[],[],[]],x=Math.max(2,S.w+32>>>6);for(var b=0;b<3;b++)for(var m=0;m<41;m++)h[b][m]=[x,1];return h}function w(S){for(var h=-1,x=0;!x;h++)if(x=S[S.j]>>>7-S.a&1,S.a++,S.a&=7,!S.a)S.j++;return h}function k(S,h){var x=0,b=8-S.a,m=S.j,s=S.a;if(h){if(h>=b)do x<<=b,h-=b,x|=S[S.j]&(1<<b)-1,S.j++,b=8;while(h>=8);if(h)x<<=h,b-=h,x|=S[S.j]>>>b&(1<<h)-1;S.a=8-b}return x}function T(S,h){var x=0;if(h<S)while(x<=14&&h<<++x<S);return x}function z(S,h,x,b,m,s,i,n){if(n==null)n=0;var l=s+1,c=l%2,o=0,e=0,BA=0,EA,CA,f=b[m],NA=b[m-1],YA=b[m-2][l],FA=NA[l-1],ZA=NA[l],jA=NA[l+1],wA=f[l-1],VA=f[l+1],d=Math.abs,u,QA,t,KA;if(c)u=d(jA-ZA),QA=d(YA-ZA),t=d(FA-ZA);if(c){if(KA=u>t&&QA<u?YA+FA:u<t&&QA<t?YA+jA:jA+FA,KA=KA+2*ZA>>>2,n){f[l]=KA;return}EA=h.t*h.c[S.g+ZA-YA]+h.c[S.g+FA-ZA]}else KA=ZA>FA&&ZA>jA||ZA<FA&&ZA<jA?VA+wA+2*ZA>>>2:wA+VA>>>1,EA=h.t*h.c[S.g+ZA-FA]+h.c[S.g+FA-wA];CA=d(EA);var HA=w(x);if(HA<S.n-h.v-1){var fA=T(i[CA][0],i[CA][1]);BA=k(x,fA)+(HA<<fA)}else BA=k(x,h.v)+1;if(BA=BA&1?-1-(BA>>>1):BA>>>1,i[CA][0]+=d(BA),i[CA][1]==S.f)i[CA][0]>>>=1,i[CA][1]>>>=1;if(i[CA][1]++,KA=EA<0?KA-BA:KA+BA,S.i){if(KA<0)KA+=h.w;else if(KA>S.g)KA-=h.w}f[l]=KA>=0?Math.min(KA,S.g):0}function j(S,h,x){var b=S[0].length;for(var m=h;m<=x;m++)S[m][0]=S[m-1][1],S[m][b-1]=S[m-1][b-2]}function v(S){j(S,J,O),j(S,E,I),j(S,L,Z)}function g(S,h,x,b,m,s,i,n,l,c,o,e,BA){var EA=0,CA=1,f=m<N&&m>I;while(CA<S.m){if(EA<S.m)z(S,h,x,b,m,EA,i[l],S.h&&(f&&c||!f&&(o||(EA&e)==BA))),z(S,h,x,b,s,EA,i[l],S.h&&(!f&&c||f&&(o||(EA&e)==BA))),EA+=2;if(EA>8)z(S,h,x,b,m,CA,n[l]),z(S,h,x,b,s,CA,n[l]),CA+=2}v(b)}function P(S,h,x,b,m,s){g(S,h,x,b,E,J,m,s,0,0,1,0,8),g(S,h,x,b,U,L,m,s,1,0,1,0,8),g(S,h,x,b,B,Y,m,s,2,1,0,3,0),g(S,h,x,b,H,W,m,s,0,0,0,3,2),g(S,h,x,b,I,R,m,s,1,0,0,3,2),g(S,h,x,b,O,Z,m,s,2,1,0,3,0)}function V(S,h,x,b,m,s){var i=s.length,n=S.l;if(m+1==S.s)n=S.e-m*S.l;var l=6*S.e*b+m*S.l;for(var c=0;c<6;c++){for(var o=0;o<n;o++){var e=s[c%i][o%i],BA;if(e==0)BA=E+(c>>>1);else if(e==2)BA=L+(c>>>1);else BA=J+c;var EA=S.h?(o*2/3&2147483646|o%3&1)+(o%3>>>1):o>>>1;h[l+o]=x[BA][EA+1]}l+=S.e}}OA._decompressRAF=function(S,h){var x=X(S),b=q(S,x),m=D(x),s=new Int16Array(x.e*x.q);if(h==null)h=x.h?[[1,1,0,1,1,2],[1,1,2,1,1,0],[2,0,1,0,2,1],[1,1,2,1,1,0],[1,1,0,1,1,2],[0,2,1,2,0,1]]:[[0,1],[3,2]];var i=[[A,B],[Q,I],[C,R],[K,O],[N,W],[$,Z]],n=[];for(var l=0;l<G;l++)n[l]=new Uint16Array(x.A);for(var c=0;c<x.s;c++){var o=_(m),e=_(m);for(var l=0;l<G;l++)for(var BA=0;BA<x.A;BA++)n[l][BA]=0;for(var EA=0;EA<x.d;EA++){P(x,m,b[c],n,o,e);for(var l=0;l<6;l++)for(var BA=0;BA<x.A;BA++)n[i[l][0]][BA]=n[i[l][1]][BA];V(x,s,n,EA,c,h);for(var l=E;l<G;l++)if([C,K,N,$].indexOf(l)==-1)for(var BA=0;BA<x.A;BA++)n[l][BA]=0;v(n)}}return s}})();/*! https://mths.be/codepointat v0.2.0 by @mathias */if(!String.prototype.codePointAt)(function(){var A=function(){try{var E={},B=Object.defineProperty,I=B(E,E,E)&&B}catch(C){}return I}(),Q=function(E){if(this==null)throw TypeError();var B=String(this),I=B.length,C=E?Number(E):0;if(C!=C)C=0;if(C<0||C>=I)return;var K=B.charCodeAt(C),J;if(K>=55296&&K<=56319&&I>C+1){if(J=B.charCodeAt(C+1),J>=56320&&J<=57343)return(K-55296)*1024+J-56320+65536}return K};if(A)A(String.prototype,"codePointAt",{value:Q,configurable:!0,writable:!0});else String.prototype.codePointAt=Q})();function E7(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var Tw=new E7,zw=new E7,uW=new Uint8Array(30),pW=new Uint16Array(30),Pw=new Uint8Array(30),Vw=new Uint16Array(30),ag=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tg=new E7,eg=new Uint8Array(320);function mW(A,Q,E,B){var I,C;for(I=0;I<E;++I)A[I]=0;for(I=0;I<30-E;++I)A[I+E]=I/E|0;for(C=B,I=0;I<30;++I)Q[I]=C,C+=1<<A[I]}function jw(A,Q){var E;for(E=0;E<7;++E)A.table[E]=0;A.table[7]=24,A.table[8]=152,A.table[9]=112;for(E=0;E<24;++E)A.trans[E]=256+E;for(E=0;E<144;++E)A.trans[24+E]=E;for(E=0;E<8;++E)A.trans[168+E]=280+E;for(E=0;E<112;++E)A.trans[176+E]=144+E;for(E=0;E<5;++E)Q.table[E]=0;Q.table[5]=32;for(E=0;E<32;++E)Q.trans[E]=E}var Ax=new Uint16Array(16);jw(Tw,zw);mW(uW,pW,4,3);mW(Pw,Vw,2,1);uW[28]=0;pW[28]=258;function F6(A,Q,E,B,I){return Math.pow(1-I,3)*A+3*Math.pow(1-I,2)*I*Q+3*(1-I)*Math.pow(I,2)*E+Math.pow(I,3)*B}function nI(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}nI.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};nI.prototype.addPoint=function(A,Q){if(typeof A==="number"){if(isNaN(this.x1)||isNaN(this.x2))this.x1=A,this.x2=A;if(A<this.x1)this.x1=A;if(A>this.x2)this.x2=A}if(typeof Q==="number"){if(isNaN(this.y1)||isNaN(this.y2))this.y1=Q,this.y2=Q;if(Q<this.y1)this.y1=Q;if(Q>this.y2)this.y2=Q}};nI.prototype.addX=function(A){this.addPoint(A,null)};nI.prototype.addY=function(A){this.addPoint(null,A)};nI.prototype.addBezier=function(A,Q,E,B,I,C,K,J){var U=[A,Q],Y=[E,B],H=[I,C],R=[K,J];this.addPoint(A,Q),this.addPoint(K,J);for(var O=0;O<=1;O++){var N=6*U[O]-12*Y[O]+6*H[O],$=-3*U[O]+9*Y[O]-9*H[O]+3*R[O],L=3*Y[O]-3*U[O];if($===0){if(N===0)continue;var W=-L/N;if(0<W&&W<1){if(O===0)this.addX(F6(U[O],Y[O],H[O],R[O],W));if(O===1)this.addY(F6(U[O],Y[O],H[O],R[O],W))}continue}var Z=Math.pow(N,2)-4*L*$;if(Z<0)continue;var G=(-N+Math.sqrt(Z))/(2*$);if(0<G&&G<1){if(O===0)this.addX(F6(U[O],Y[O],H[O],R[O],G));if(O===1)this.addY(F6(U[O],Y[O],H[O],R[O],G))}var X=(-N-Math.sqrt(Z))/(2*$);if(0<X&&X<1){if(O===0)this.addX(F6(U[O],Y[O],H[O],R[O],X));if(O===1)this.addY(F6(U[O],Y[O],H[O],R[O],X))}}};nI.prototype.addQuad=function(A,Q,E,B,I,C){var K=A+0.6666666666666666*(E-A),J=Q+0.6666666666666666*(B-Q),U=K+0.3333333333333333*(I-A),Y=J+0.3333333333333333*(C-Q);this.addBezier(A,Q,K,J,U,Y,I,C)};function mQ(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}mQ.prototype.moveTo=function(A,Q){this.commands.push({type:"M",x:A,y:Q})};mQ.prototype.lineTo=function(A,Q){this.commands.push({type:"L",x:A,y:Q})};mQ.prototype.curveTo=mQ.prototype.bezierCurveTo=function(A,Q,E,B,I,C){this.commands.push({type:"C",x1:A,y1:Q,x2:E,y2:B,x:I,y:C})};mQ.prototype.quadTo=mQ.prototype.quadraticCurveTo=function(A,Q,E,B){this.commands.push({type:"Q",x1:A,y1:Q,x:E,y:B})};mQ.prototype.close=mQ.prototype.closePath=function(){this.commands.push({type:"Z"})};mQ.prototype.extend=function(A){if(A.commands)A=A.commands;else if(A instanceof nI){var Q=A;this.moveTo(Q.x1,Q.y1),this.lineTo(Q.x2,Q.y1),this.lineTo(Q.x2,Q.y2),this.lineTo(Q.x1,Q.y2),this.close();return}Array.prototype.push.apply(this.commands,A)};mQ.prototype.getBoundingBox=function(){var A=new nI,Q=0,E=0,B=0,I=0;for(var C=0;C<this.commands.length;C++){var K=this.commands[C];switch(K.type){case"M":A.addPoint(K.x,K.y),Q=B=K.x,E=I=K.y;break;case"L":A.addPoint(K.x,K.y),B=K.x,I=K.y;break;case"Q":A.addQuad(B,I,K.x1,K.y1,K.x,K.y),B=K.x,I=K.y;break;case"C":A.addBezier(B,I,K.x1,K.y1,K.x2,K.y2,K.x,K.y),B=K.x,I=K.y;break;case"Z":B=Q,I=E;break;default:throw new Error("Unexpected path command "+K.type)}}if(A.isEmpty())A.addPoint(0,0);return A};mQ.prototype.draw=function(A){A.beginPath();for(var Q=0;Q<this.commands.length;Q+=1){var E=this.commands[Q];if(E.type==="M")A.moveTo(E.x,E.y);else if(E.type==="L")A.lineTo(E.x,E.y);else if(E.type==="C")A.bezierCurveTo(E.x1,E.y1,E.x2,E.y2,E.x,E.y);else if(E.type==="Q")A.quadraticCurveTo(E.x1,E.y1,E.x,E.y);else if(E.type==="Z")A.closePath()}if(this.fill)A.fillStyle=this.fill,A.fill();if(this.stroke)A.strokeStyle=this.stroke,A.lineWidth=this.strokeWidth,A.stroke()};mQ.prototype.toPathData=function(A){A=A!==void 0?A:2;function Q(K){if(Math.round(K)===K)return""+Math.round(K);else return K.toFixed(A)}function E(){var K=arguments,J="";for(var U=0;U<arguments.length;U+=1){var Y=K[U];if(Y>=0&&U>0)J+=" ";J+=Q(Y)}return J}var B="";for(var I=0;I<this.commands.length;I+=1){var C=this.commands[I];if(C.type==="M")B+="M"+E(C.x,C.y);else if(C.type==="L")B+="L"+E(C.x,C.y);else if(C.type==="C")B+="C"+E(C.x1,C.y1,C.x2,C.y2,C.x,C.y);else if(C.type==="Q")B+="Q"+E(C.x1,C.y1,C.x,C.y);else if(C.type==="Z")B+="Z"}return B};mQ.prototype.toSVG=function(A){var Q='<path d="';if(Q+=this.toPathData(A),Q+='"',this.fill&&this.fill!=="black")if(this.fill===null)Q+=' fill="none"';else Q+=' fill="'+this.fill+'"';if(this.stroke)Q+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"';return Q+="/>",Q};mQ.prototype.toDOMElement=function(A){var Q=this.toPathData(A),E=document.createElementNS("http://www.w3.org/2000/svg","path");return E.setAttribute("d",Q),E};function cW(A){throw new Error(A)}function IW(A,Q){if(!A)cW(Q)}var W0={fail:cW,argument:IW,assert:IW},CW=32768,KW=2147483648,M6={},mA={},q0={};function MB(A){return function(){return A}}mA.BYTE=function(A){return W0.argument(A>=0&&A<=255,"Byte value should be between 0 and 255."),[A]};q0.BYTE=MB(1);mA.CHAR=function(A){return[A.charCodeAt(0)]};q0.CHAR=MB(1);mA.CHARARRAY=function(A){if(typeof A==="undefined")A="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name.");var Q=[];for(var E=0;E<A.length;E+=1)Q[E]=A.charCodeAt(E);return Q};q0.CHARARRAY=function(A){if(typeof A==="undefined")return 0;return A.length};mA.USHORT=function(A){return[A>>8&255,A&255]};q0.USHORT=MB(2);mA.SHORT=function(A){if(A>=CW)A=-(2*CW-A);return[A>>8&255,A&255]};q0.SHORT=MB(2);mA.UINT24=function(A){return[A>>16&255,A>>8&255,A&255]};q0.UINT24=MB(3);mA.ULONG=function(A){return[A>>24&255,A>>16&255,A>>8&255,A&255]};q0.ULONG=MB(4);mA.LONG=function(A){if(A>=KW)A=-(2*KW-A);return[A>>24&255,A>>16&255,A>>8&255,A&255]};q0.LONG=MB(4);mA.FIXED=mA.ULONG;q0.FIXED=q0.ULONG;mA.FWORD=mA.SHORT;q0.FWORD=q0.SHORT;mA.UFWORD=mA.USHORT;q0.UFWORD=q0.USHORT;mA.LONGDATETIME=function(A){return[0,0,0,0,A>>24&255,A>>16&255,A>>8&255,A&255]};q0.LONGDATETIME=MB(8);mA.TAG=function(A){return W0.argument(A.length===4,"Tag should be exactly 4 ASCII characters."),[A.charCodeAt(0),A.charCodeAt(1),A.charCodeAt(2),A.charCodeAt(3)]};q0.TAG=MB(4);mA.Card8=mA.BYTE;q0.Card8=q0.BYTE;mA.Card16=mA.USHORT;q0.Card16=q0.USHORT;mA.OffSize=mA.BYTE;q0.OffSize=q0.BYTE;mA.SID=mA.USHORT;q0.SID=q0.USHORT;mA.NUMBER=function(A){if(A>=-107&&A<=107)return[A+139];else if(A>=108&&A<=1131)return A=A-108,[(A>>8)+247,A&255];else if(A>=-1131&&A<=-108)return A=-A-108,[(A>>8)+251,A&255];else if(A>=-32768&&A<=32767)return mA.NUMBER16(A);else return mA.NUMBER32(A)};q0.NUMBER=function(A){return mA.NUMBER(A).length};mA.NUMBER16=function(A){return[28,A>>8&255,A&255]};q0.NUMBER16=MB(3);mA.NUMBER32=function(A){return[29,A>>24&255,A>>16&255,A>>8&255,A&255]};q0.NUMBER32=MB(5);mA.REAL=function(A){var Q=A.toString(),E=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(Q);if(E){var B=parseFloat("1e"+((E[2]?+E[2]:0)+E[1].length));Q=(Math.round(A*B)/B).toString()}var I="";for(var C=0,K=Q.length;C<K;C+=1){var J=Q[C];if(J==="e")I+=Q[++C]==="-"?"c":"b";else if(J===".")I+="a";else if(J==="-")I+="e";else I+=J}I+=I.length&1?"f":"ff";var U=[30];for(var Y=0,H=I.length;Y<H;Y+=2)U.push(parseInt(I.substr(Y,2),16));return U};q0.REAL=function(A){return mA.REAL(A).length};mA.NAME=mA.CHARARRAY;q0.NAME=q0.CHARARRAY;mA.STRING=mA.CHARARRAY;q0.STRING=q0.CHARARRAY;M6.UTF8=function(A,Q,E){var B=[],I=E;for(var C=0;C<I;C++,Q+=1)B[C]=A.getUint8(Q);return String.fromCharCode.apply(null,B)};M6.UTF16=function(A,Q,E){var B=[],I=E/2;for(var C=0;C<I;C++,Q+=2)B[C]=A.getUint16(Q);return String.fromCharCode.apply(null,B)};mA.UTF16=function(A){var Q=[];for(var E=0;E<A.length;E+=1){var B=A.charCodeAt(E);Q[Q.length]=B>>8&255,Q[Q.length]=B&255}return Q};q0.UTF16=function(A){return A.length*2};var oH={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø"+"¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњ"+"јЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæø"+"ṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩ"+"άΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø"+"¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗ"+"ᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅ"+"ņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø"+"¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș"+"¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø"+"¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};M6.MACSTRING=function(A,Q,E,B){var I=oH[B];if(I===void 0)return;var C="";for(var K=0;K<E;K++){var J=A.getUint8(Q+K);if(J<=127)C+=String.fromCharCode(J);else C+=I[J&127]}return C};var ZU=typeof WeakMap==="function"&&/*@__PURE__*/new WeakMap,RU,vw=function(A){if(!RU){RU={};for(var Q in oH)RU[Q]=new String(Q)}var E=RU[A];if(E===void 0)return;if(ZU){var B=ZU.get(E);if(B!==void 0)return B}var I=oH[A];if(I===void 0)return;var C={};for(var K=0;K<I.length;K++)C[I.charCodeAt(K)]=K+128;if(ZU)ZU.set(E,C);return C};mA.MACSTRING=function(A,Q){var E=vw(Q);if(E===void 0)return;var B=[];for(var I=0;I<A.length;I++){var C=A.charCodeAt(I);if(C>=128){if(C=E[C],C===void 0)return}B[I]=C}return B};q0.MACSTRING=function(A,Q){var E=mA.MACSTRING(A,Q);if(E!==void 0)return E.length;else return 0};function rH(A){return A>=-128&&A<=127}function hw(A,Q,E){var B=0,I=A.length;while(Q<I&&B<64&&A[Q]===0)++Q,++B;return E.push(128|B-1),Q}function yw(A,Q,E){var B=0,I=A.length,C=Q;while(C<I&&B<64){var K=A[C];if(!rH(K))break;if(K===0&&C+1<I&&A[C+1]===0)break;++C,++B}E.push(B-1);for(var J=Q;J<C;++J)E.push(A[J]+256&255);return C}function gw(A,Q,E){var B=0,I=A.length,C=Q;while(C<I&&B<64){var K=A[C];if(K===0)break;if(rH(K)&&C+1<I&&rH(A[C+1]))break;++C,++B}E.push(64|B-1);for(var J=Q;J<C;++J){var U=A[J];E.push(U+65536>>8&255,U+256&255)}return C}mA.VARDELTAS=function(A){var Q=0,E=[];while(Q<A.length){var B=A[Q];if(B===0)Q=hw(A,Q,E);else if(B>=-128&&B<=127)Q=yw(A,Q,E);else Q=gw(A,Q,E)}return E};mA.INDEX=function(A){var Q=1,E=[Q],B=[];for(var I=0;I<A.length;I+=1){var C=mA.OBJECT(A[I]);Array.prototype.push.apply(B,C),Q+=C.length,E.push(Q)}if(B.length===0)return[0,0];var K=[],J=1+Math.floor(Math.log(Q)/Math.log(2))/8|0,U=[void 0,mA.BYTE,mA.USHORT,mA.UINT24,mA.ULONG][J];for(var Y=0;Y<E.length;Y+=1){var H=U(E[Y]);Array.prototype.push.apply(K,H)}return Array.prototype.concat(mA.Card16(A.length),mA.OffSize(J),K,B)};q0.INDEX=function(A){return mA.INDEX(A).length};mA.DICT=function(A){var Q=[],E=Object.keys(A),B=E.length;for(var I=0;I<B;I+=1){var C=parseInt(E[I],0),K=A[C];Q=Q.concat(mA.OPERAND(K.value,K.type)),Q=Q.concat(mA.OPERATOR(C))}return Q};q0.DICT=function(A){return mA.DICT(A).length};mA.OPERATOR=function(A){if(A<1200)return[A];else return[12,A-1200]};mA.OPERAND=function(A,Q){var E=[];if(Array.isArray(Q))for(var B=0;B<Q.length;B+=1)W0.argument(A.length===Q.length,"Not enough arguments given for type"+Q),E=E.concat(mA.OPERAND(A[B],Q[B]));else if(Q==="SID")E=E.concat(mA.NUMBER(A));else if(Q==="offset")E=E.concat(mA.NUMBER32(A));else if(Q==="number")E=E.concat(mA.NUMBER(A));else if(Q==="real")E=E.concat(mA.REAL(A));else throw new Error("Unknown operand type "+Q);return E};mA.OP=mA.BYTE;q0.OP=q0.BYTE;var NU=typeof WeakMap==="function"&&/*@__PURE__*/new WeakMap;mA.CHARSTRING=function(A){if(NU){var Q=NU.get(A);if(Q!==void 0)return Q}var E=[],B=A.length;for(var I=0;I<B;I+=1){var C=A[I];E=E.concat(mA[C.type](C.value))}if(NU)NU.set(A,E);return E};q0.CHARSTRING=function(A){return mA.CHARSTRING(A).length};mA.OBJECT=function(A){var Q=mA[A.type];return W0.argument(Q!==void 0,"No encoding function for type "+A.type),Q(A.value)};q0.OBJECT=function(A){var Q=q0[A.type];return W0.argument(Q!==void 0,"No sizeOf function for type "+A.type),Q(A.value)};mA.TABLE=function(A){var Q=[],E=A.fields.length,B=[],I=[];for(var C=0;C<E;C+=1){var K=A.fields[C],J=mA[K.type];W0.argument(J!==void 0,"No encoding function for field type "+K.type+" ("+K.name+")");var U=A[K.name];if(U===void 0)U=K.value;var Y=J(U);if(K.type==="TABLE")I.push(Q.length),Q=Q.concat([0,0]),B.push(Y);else Q=Q.concat(Y)}for(var H=0;H<B.length;H+=1){var R=I[H],O=Q.length;W0.argument(O<65536,"Table "+A.tableName+" too big."),Q[R]=O>>8,Q[R+1]=O&255,Q=Q.concat(B[H])}return Q};q0.TABLE=function(A){var Q=0,E=A.fields.length;for(var B=0;B<E;B+=1){var I=A.fields[B],C=q0[I.type];W0.argument(C!==void 0,"No sizeOf function for field type "+I.type+" ("+I.name+")");var K=A[I.name];if(K===void 0)K=I.value;if(Q+=C(K),I.type==="TABLE")Q+=2}return Q};mA.RECORD=mA.TABLE;q0.RECORD=q0.TABLE;mA.LITERAL=function(A){return A};q0.LITERAL=function(A){return A.length};function sQ(A,Q,E){if(Q.length&&(Q[0].name!=="coverageFormat"||Q[0].value===1))for(var B=0;B<Q.length;B+=1){var I=Q[B];this[I.name]=I.value}if(this.tableName=A,this.fields=Q,E){var C=Object.keys(E);for(var K=0;K<C.length;K+=1){var J=C[K],U=E[J];if(this[J]!==void 0)this[J]=U}}}sQ.prototype.encode=function(){return mA.TABLE(this)};sQ.prototype.sizeOf=function(){return q0.TABLE(this)};function ZK(A,Q,E){if(E===void 0)E=Q.length;var B=new Array(Q.length+1);B[0]={name:A+"Count",type:"USHORT",value:E};for(var I=0;I<Q.length;I++)B[I+1]={name:A+I,type:"USHORT",value:Q[I]};return B}function aH(A,Q,E){var B=Q.length,I=new Array(B+1);I[0]={name:A+"Count",type:"USHORT",value:B};for(var C=0;C<B;C++)I[C+1]={name:A+C,type:"TABLE",value:E(Q[C],C)};return I}function RK(A,Q,E){var B=Q.length,I=[];I[0]={name:A+"Count",type:"USHORT",value:B};for(var C=0;C<B;C++)I=I.concat(E(Q[C],C));return I}function LU(A){if(A.format===1)sQ.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ZK("glyph",A.glyphs)));else if(A.format===2)sQ.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(RK("rangeRecord",A.ranges,function(Q){return[{name:"startGlyphID",type:"USHORT",value:Q.start},{name:"endGlyphID",type:"USHORT",value:Q.end},{name:"startCoverageIndex",type:"USHORT",value:Q.index}]})));else W0.assert(!1,"Coverage format must be 1 or 2.")}LU.prototype=Object.create(sQ.prototype);LU.prototype.constructor=LU;function qU(A){sQ.call(this,"scriptListTable",RK("scriptRecord",A,function(Q,E){var B=Q.script,I=B.defaultLangSys;return W0.assert(!!I,"Unable to write GSUB: script "+Q.tag+" has no default language system."),[{name:"scriptTag"+E,type:"TAG",value:Q.tag},{name:"script"+E,type:"TABLE",value:new sQ("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new sQ("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:I.reqFeatureIndex}].concat(ZK("featureIndex",I.featureIndexes)))}].concat(RK("langSys",B.langSysRecords,function(C,K){var J=C.langSys;return[{name:"langSysTag"+K,type:"TAG",value:C.tag},{name:"langSys"+K,type:"TABLE",value:new sQ("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:J.reqFeatureIndex}].concat(ZK("featureIndex",J.featureIndexes)))}]})))}]}))}qU.prototype=Object.create(sQ.prototype);qU.prototype.constructor=qU;function FU(A){sQ.call(this,"featureListTable",RK("featureRecord",A,function(Q,E){var B=Q.feature;return[{name:"featureTag"+E,type:"TAG",value:Q.tag},{name:"feature"+E,type:"TABLE",value:new sQ("featureTable",[{name:"featureParams",type:"USHORT",value:B.featureParams}].concat(ZK("lookupListIndex",B.lookupListIndexes)))}]}))}FU.prototype=Object.create(sQ.prototype);FU.prototype.constructor=FU;function DU(A,Q){sQ.call(this,"lookupListTable",aH("lookup",A,function(E){var B=Q[E.lookupType];return W0.assert(!!B,"Unable to write GSUB lookup type "+E.lookupType+" tables."),new sQ("lookupTable",[{name:"lookupType",type:"USHORT",value:E.lookupType},{name:"lookupFlag",type:"USHORT",value:E.lookupFlag}].concat(aH("subtable",E.subtables,B)))}))}DU.prototype=Object.create(sQ.prototype);DU.prototype.constructor=DU;var aA={Table:sQ,Record:sQ,Coverage:LU,ScriptList:qU,FeatureList:FU,LookupList:DU,ushortList:ZK,tableList:aH,recordList:RK};function JW(A,Q){return A.getUint8(Q)}function MU(A,Q){return A.getUint16(Q,!1)}function xw(A,Q){return A.getInt16(Q,!1)}function B7(A,Q){return A.getUint32(Q,!1)}function lW(A,Q){var E=A.getInt16(Q,!1),B=A.getUint16(Q+2,!1);return E+B/65535}function bw(A,Q){var E="";for(var B=Q;B<Q+4;B+=1)E+=String.fromCharCode(A.getInt8(B));return E}function fw(A,Q,E){var B=0;for(var I=0;I<E;I+=1)B<<=8,B+=A.getUint8(Q+I);return B}function uw(A,Q,E){var B=[];for(var I=Q;I<E;I+=1)B.push(A.getUint8(I));return B}function pw(A){var Q="";for(var E=0;E<A.length;E+=1)Q+=String.fromCharCode(A[E]);return Q}var mw={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function $A(A,Q){this.data=A,this.offset=Q,this.relativeOffset=0}$A.prototype.parseByte=function(){var A=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,A};$A.prototype.parseChar=function(){var A=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,A};$A.prototype.parseCard8=$A.prototype.parseByte;$A.prototype.parseUShort=function(){var A=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,A};$A.prototype.parseCard16=$A.prototype.parseUShort;$A.prototype.parseSID=$A.prototype.parseUShort;$A.prototype.parseOffset16=$A.prototype.parseUShort;$A.prototype.parseShort=function(){var A=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,A};$A.prototype.parseF2Dot14=function(){var A=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,A};$A.prototype.parseULong=function(){var A=B7(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,A};$A.prototype.parseOffset32=$A.prototype.parseULong;$A.prototype.parseFixed=function(){var A=lW(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,A};$A.prototype.parseString=function(A){var Q=this.data,E=this.offset+this.relativeOffset,B="";this.relativeOffset+=A;for(var I=0;I<A;I++)B+=String.fromCharCode(Q.getUint8(E+I));return B};$A.prototype.parseTag=function(){return this.parseString(4)};$A.prototype.parseLongDateTime=function(){var A=B7(this.data,this.offset+this.relativeOffset+4);return A-=2082844800,this.relativeOffset+=8,A};$A.prototype.parseVersion=function(A){var Q=MU(this.data,this.offset+this.relativeOffset),E=MU(this.data,this.offset+this.relativeOffset+2);if(this.relativeOffset+=4,A===void 0)A=4096;return Q+E/A/10};$A.prototype.skip=function(A,Q){if(Q===void 0)Q=1;this.relativeOffset+=mw[A]*Q};$A.prototype.parseULongList=function(A){if(A===void 0)A=this.parseULong();var Q=new Array(A),E=this.data,B=this.offset+this.relativeOffset;for(var I=0;I<A;I++)Q[I]=E.getUint32(B),B+=4;return this.relativeOffset+=A*4,Q};$A.prototype.parseOffset16List=$A.prototype.parseUShortList=function(A){if(A===void 0)A=this.parseUShort();var Q=new Array(A),E=this.data,B=this.offset+this.relativeOffset;for(var I=0;I<A;I++)Q[I]=E.getUint16(B),B+=2;return this.relativeOffset+=A*2,Q};$A.prototype.parseShortList=function(A){var Q=new Array(A),E=this.data,B=this.offset+this.relativeOffset;for(var I=0;I<A;I++)Q[I]=E.getInt16(B),B+=2;return this.relativeOffset+=A*2,Q};$A.prototype.parseByteList=function(A){var Q=new Array(A),E=this.data,B=this.offset+this.relativeOffset;for(var I=0;I<A;I++)Q[I]=E.getUint8(B++);return this.relativeOffset+=A,Q};$A.prototype.parseList=function(A,Q){if(!Q)Q=A,A=this.parseUShort();var E=new Array(A);for(var B=0;B<A;B++)E[B]=Q.call(this);return E};$A.prototype.parseList32=function(A,Q){if(!Q)Q=A,A=this.parseULong();var E=new Array(A);for(var B=0;B<A;B++)E[B]=Q.call(this);return E};$A.prototype.parseRecordList=function(A,Q){if(!Q)Q=A,A=this.parseUShort();var E=new Array(A),B=Object.keys(Q);for(var I=0;I<A;I++){var C={};for(var K=0;K<B.length;K++){var J=B[K],U=Q[J];C[J]=U.call(this)}E[I]=C}return E};$A.prototype.parseRecordList32=function(A,Q){if(!Q)Q=A,A=this.parseULong();var E=new Array(A),B=Object.keys(Q);for(var I=0;I<A;I++){var C={};for(var K=0;K<B.length;K++){var J=B[K],U=Q[J];C[J]=U.call(this)}E[I]=C}return E};$A.prototype.parseStruct=function(A){if(typeof A==="function")return A.call(this);else{var Q=Object.keys(A),E={};for(var B=0;B<Q.length;B++){var I=Q[B],C=A[I];E[I]=C.call(this)}return E}};$A.prototype.parseValueRecord=function(A){if(A===void 0)A=this.parseUShort();if(A===0)return;var Q={};if(A&1)Q.xPlacement=this.parseShort();if(A&2)Q.yPlacement=this.parseShort();if(A&4)Q.xAdvance=this.parseShort();if(A&8)Q.yAdvance=this.parseShort();if(A&16)Q.xPlaDevice=void 0,this.parseShort();if(A&32)Q.yPlaDevice=void 0,this.parseShort();if(A&64)Q.xAdvDevice=void 0,this.parseShort();if(A&128)Q.yAdvDevice=void 0,this.parseShort();return Q};$A.prototype.parseValueRecordList=function(){var A=this.parseUShort(),Q=this.parseUShort(),E=new Array(Q);for(var B=0;B<Q;B++)E[B]=this.parseValueRecord(A);return E};$A.prototype.parsePointer=function(A){var Q=this.parseOffset16();if(Q>0)return new $A(this.data,this.offset+Q).parseStruct(A);return};$A.prototype.parsePointer32=function(A){var Q=this.parseOffset32();if(Q>0)return new $A(this.data,this.offset+Q).parseStruct(A);return};$A.prototype.parseListOfLists=function(A){var Q=this.parseOffset16List(),E=Q.length,B=this.relativeOffset,I=new Array(E);for(var C=0;C<E;C++){var K=Q[C];if(K===0){I[C]=void 0;continue}if(this.relativeOffset=K,A){var J=this.parseOffset16List(),U=new Array(J.length);for(var Y=0;Y<J.length;Y++)this.relativeOffset=K+J[Y],U[Y]=A.call(this);I[C]=U}else I[C]=this.parseUShortList()}return this.relativeOffset=B,I};$A.prototype.parseCoverage=function(){var A=this.offset+this.relativeOffset,Q=this.parseUShort(),E=this.parseUShort();if(Q===1)return{format:1,glyphs:this.parseUShortList(E)};else if(Q===2){var B=new Array(E);for(var I=0;I<E;I++)B[I]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:B}}throw new Error("0x"+A.toString(16)+": Coverage format must be 1 or 2.")};$A.prototype.parseClassDef=function(){var A=this.offset+this.relativeOffset,Q=this.parseUShort();if(Q===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};else if(Q===2)return{format:2,ranges:this.parseRecordList({start:$A.uShort,end:$A.uShort,classId:$A.uShort})};throw new Error("0x"+A.toString(16)+": ClassDef format must be 1 or 2.")};$A.list=function(A,Q){return function(){return this.parseList(A,Q)}};$A.list32=function(A,Q){return function(){return this.parseList32(A,Q)}};$A.recordList=function(A,Q){return function(){return this.parseRecordList(A,Q)}};$A.recordList32=function(A,Q){return function(){return this.parseRecordList32(A,Q)}};$A.pointer=function(A){return function(){return this.parsePointer(A)}};$A.pointer32=function(A){return function(){return this.parsePointer32(A)}};$A.tag=$A.prototype.parseTag;$A.byte=$A.prototype.parseByte;$A.uShort=$A.offset16=$A.prototype.parseUShort;$A.uShortList=$A.prototype.parseUShortList;$A.uLong=$A.offset32=$A.prototype.parseULong;$A.uLongList=$A.prototype.parseULongList;$A.struct=$A.prototype.parseStruct;$A.coverage=$A.prototype.parseCoverage;$A.classDef=$A.prototype.parseClassDef;var UW={reserved:$A.uShort,reqFeatureIndex:$A.uShort,featureIndexes:$A.uShortList};$A.prototype.parseScriptList=function(){return this.parsePointer($A.recordList({tag:$A.tag,script:$A.pointer({defaultLangSys:$A.pointer(UW),langSysRecords:$A.recordList({tag:$A.tag,langSys:$A.pointer(UW)})})}))||[]};$A.prototype.parseFeatureList=function(){return this.parsePointer($A.recordList({tag:$A.tag,feature:$A.pointer({featureParams:$A.offset16,lookupListIndexes:$A.uShortList})}))||[]};$A.prototype.parseLookupList=function(A){return this.parsePointer($A.list($A.pointer(function(){var Q=this.parseUShort();W0.argument(1<=Q&&Q<=9,"GPOS/GSUB lookup type "+Q+" unknown.");var E=this.parseUShort(),B=E&16;return{lookupType:Q,lookupFlag:E,subtables:this.parseList($A.pointer(A[Q])),markFilteringSet:B?this.parseUShort():void 0}})))||[]};$A.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var A=this.parseUShort(),Q=this.parseUShort();W0.argument(A===1&&Q<1,"GPOS/GSUB feature variations table unknown.");var E=this.parseRecordList32({conditionSetOffset:$A.offset32,featureTableSubstitutionOffset:$A.offset32});return E})||[]};var z0={getByte:JW,getCard8:JW,getUShort:MU,getCard16:MU,getShort:xw,getULong:B7,getFixed:lW,getTag:bw,getOffset:fw,getBytes:uw,bytesToString:pw,Parser:$A};function cw(A,Q){Q.parseUShort(),A.length=Q.parseULong(),A.language=Q.parseULong();var E;A.groupCount=E=Q.parseULong(),A.glyphIndexMap={};for(var B=0;B<E;B+=1){var I=Q.parseULong(),C=Q.parseULong(),K=Q.parseULong();for(var J=I;J<=C;J+=1)A.glyphIndexMap[J]=K,K++}}function lw(A,Q,E,B,I){A.length=Q.parseUShort(),A.language=Q.parseUShort();var C;A.segCount=C=Q.parseUShort()>>1,Q.skip("uShort",3),A.glyphIndexMap={};var K=new z0.Parser(E,B+I+14),J=new z0.Parser(E,B+I+16+C*2),U=new z0.Parser(E,B+I+16+C*4),Y=new z0.Parser(E,B+I+16+C*6),H=B+I+16+C*8;for(var R=0;R<C-1;R+=1){var O=void 0,N=K.parseUShort(),$=J.parseUShort(),L=U.parseShort(),W=Y.parseUShort();for(var Z=$;Z<=N;Z+=1){if(W!==0){if(H=Y.offset+Y.relativeOffset-2,H+=W,H+=(Z-$)*2,O=z0.getUShort(E,H),O!==0)O=O+L&65535}else O=Z+L&65535;A.glyphIndexMap[Z]=O}}}function dw(A,Q){var E={};E.version=z0.getUShort(A,Q),W0.argument(E.version===0,"cmap table version should be 0."),E.numTables=z0.getUShort(A,Q+2);var B=-1;for(var I=E.numTables-1;I>=0;I-=1){var C=z0.getUShort(A,Q+4+I*8),K=z0.getUShort(A,Q+4+I*8+2);if(C===3&&(K===0||K===1||K===10)||C===0&&(K===0||K===1||K===2||K===3||K===4)){B=z0.getULong(A,Q+4+I*8+4);break}}if(B===-1)throw new Error("No valid cmap sub-tables found.");var J=new z0.Parser(A,Q+B);if(E.format=J.parseUShort(),E.format===12)cw(E,J);else if(E.format===4)lw(E,J,A,Q,B);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+E.format+").");return E}function nw(A,Q,E){A.segments.push({end:Q,start:Q,delta:-(Q-E),offset:0,glyphIndex:E})}function sw(A){A.segments.push({end:65535,start:65535,delta:1,offset:0})}function iw(A){var Q=!0,E;for(E=A.length-1;E>0;E-=1){var B=A.get(E);if(B.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),Q=!1;break}}var I=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:Q?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:Q?12:20}];if(!Q)I=I.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}]);I=I.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var C=new aA.Table("cmap",I);C.segments=[];for(E=0;E<A.length;E+=1){var K=A.get(E);for(var J=0;J<K.unicodes.length;J+=1)nw(C,K.unicodes[J],E);C.segments=C.segments.sort(function(G,X){return G.start-X.start})}sw(C);var U=C.segments.length,Y=0,H=[],R=[],O=[],N=[],$=[],L=[];for(E=0;E<U;E+=1){var W=C.segments[E];if(W.end<=65535&&W.start<=65535){if(H=H.concat({name:"end_"+E,type:"USHORT",value:W.end}),R=R.concat({name:"start_"+E,type:"USHORT",value:W.start}),O=O.concat({name:"idDelta_"+E,type:"SHORT",value:W.delta}),N=N.concat({name:"idRangeOffset_"+E,type:"USHORT",value:W.offset}),W.glyphId!==void 0)$=$.concat({name:"glyph_"+E,type:"USHORT",value:W.glyphId})}else Y+=1;if(!Q&&W.glyphIndex!==void 0)L=L.concat({name:"cmap12Start_"+E,type:"ULONG",value:W.start}),L=L.concat({name:"cmap12End_"+E,type:"ULONG",value:W.end}),L=L.concat({name:"cmap12Glyph_"+E,type:"ULONG",value:W.glyphIndex})}if(C.segCountX2=(U-Y)*2,C.searchRange=Math.pow(2,Math.floor(Math.log(U-Y)/Math.log(2)))*2,C.entrySelector=Math.log(C.searchRange/2)/Math.log(2),C.rangeShift=C.segCountX2-C.searchRange,C.fields=C.fields.concat(H),C.fields.push({name:"reservedPad",type:"USHORT",value:0}),C.fields=C.fields.concat(R),C.fields=C.fields.concat(O),C.fields=C.fields.concat(N),C.fields=C.fields.concat($),C.cmap4Length=14+H.length*2+2+R.length*2+O.length*2+N.length*2+$.length*2,!Q){var Z=16+L.length*4;C.cmap12Offset=20+C.cmap4Length,C.fields=C.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Z},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:L.length/3}]),C.fields=C.fields.concat(L)}return C}var ow={parse:dw,make:iw},XU=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],rw=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],aw=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],d1=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function dW(A){this.font=A}dW.prototype.charToGlyphIndex=function(A){var Q=A.codePointAt(0),E=this.font.glyphs;if(E)for(var B=0;B<E.length;B+=1){var I=E.get(B);for(var C=0;C<I.unicodes.length;C+=1)if(I.unicodes[C]===Q)return B}return null};function tw(A){this.cmap=A}tw.prototype.charToGlyphIndex=function(A){return this.cmap.glyphIndexMap[A.codePointAt(0)]||0};function wU(A,Q){this.encoding=A,this.charset=Q}wU.prototype.charToGlyphIndex=function(A){var Q=A.codePointAt(0),E=this.encoding[Q];return this.charset.indexOf(E)};function nW(A){switch(A.version){case 1:this.names=d1.slice();break;case 2:this.names=new Array(A.numberOfGlyphs);for(var Q=0;Q<A.numberOfGlyphs;Q++)if(A.glyphNameIndex[Q]<d1.length)this.names[Q]=d1[A.glyphNameIndex[Q]];else this.names[Q]=A.names[A.glyphNameIndex[Q]-d1.length];break;case 2.5:this.names=new Array(A.numberOfGlyphs);for(var E=0;E<A.numberOfGlyphs;E++)this.names[E]=d1[E+A.glyphNameIndex[E]];break;case 3:this.names=[];break;default:this.names=[];break}}nW.prototype.nameToGlyphIndex=function(A){return this.names.indexOf(A)};nW.prototype.glyphIndexToName=function(A){return this.names[A]};function ew(A,Q,E,B,I){A.beginPath(),A.moveTo(Q,E),A.lineTo(B,I),A.stroke()}var l1={line:ew};function A_(A,Q){var E=Q||new mQ;return{configurable:!0,get:function(){if(typeof E==="function")E=E();return E},set:function(B){E=B}}}function QB(A){this.bindConstructorValues(A)}QB.prototype.bindConstructorValues=function(A){if(this.index=A.index||0,this.name=A.name||null,this.unicode=A.unicode||void 0,this.unicodes=A.unicodes||A.unicode!==void 0?[A.unicode]:[],"xMin"in A)this.xMin=A.xMin;if("yMin"in A)this.yMin=A.yMin;if("xMax"in A)this.xMax=A.xMax;if("yMax"in A)this.yMax=A.yMax;if("advanceWidth"in A)this.advanceWidth=A.advanceWidth;Object.defineProperty(this,"path",A_(this,A.path))};QB.prototype.addUnicode=function(A){if(this.unicodes.length===0)this.unicode=A;this.unicodes.push(A)};QB.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};QB.prototype.getPath=function(A,Q,E,B,I){A=A!==void 0?A:0,Q=Q!==void 0?Q:0,E=E!==void 0?E:72;var C,K;if(!B)B={};var{xScale:J,yScale:U}=B;if(B.hinting&&I&&I.hinting)K=this.path&&I.hinting.exec(this,E);if(K)C=I.hinting.getCommands(K),A=Math.round(A),Q=Math.round(Q),J=U=1;else{C=this.path.commands;var Y=1/(this.path.unitsPerEm||1000)*E;if(J===void 0)J=Y;if(U===void 0)U=Y}var H=new mQ;for(var R=0;R<C.length;R+=1){var O=C[R];if(O.type==="M")H.moveTo(A+O.x*J,Q+-O.y*U);else if(O.type==="L")H.lineTo(A+O.x*J,Q+-O.y*U);else if(O.type==="Q")H.quadraticCurveTo(A+O.x1*J,Q+-O.y1*U,A+O.x*J,Q+-O.y*U);else if(O.type==="C")H.curveTo(A+O.x1*J,Q+-O.y1*U,A+O.x2*J,Q+-O.y2*U,A+O.x*J,Q+-O.y*U);else if(O.type==="Z")H.closePath()}return H};QB.prototype.getContours=function(){if(this.points===void 0)return[];var A=[],Q=[];for(var E=0;E<this.points.length;E+=1){var B=this.points[E];if(Q.push(B),B.lastPointOfContour)A.push(Q),Q=[]}return W0.argument(Q.length===0,"There are still points left in the current contour."),A};QB.prototype.getMetrics=function(){var A=this.path.commands,Q=[],E=[];for(var B=0;B<A.length;B+=1){var I=A[B];if(I.type!=="Z")Q.push(I.x),E.push(I.y);if(I.type==="Q"||I.type==="C")Q.push(I.x1),E.push(I.y1);if(I.type==="C")Q.push(I.x2),E.push(I.y2)}var C={xMin:Math.min.apply(null,Q),yMin:Math.min.apply(null,E),xMax:Math.max.apply(null,Q),yMax:Math.max.apply(null,E),leftSideBearing:this.leftSideBearing};if(!isFinite(C.xMin))C.xMin=0;if(!isFinite(C.xMax))C.xMax=this.advanceWidth;if(!isFinite(C.yMin))C.yMin=0;if(!isFinite(C.yMax))C.yMax=0;return C.rightSideBearing=this.advanceWidth-C.leftSideBearing-(C.xMax-C.xMin),C};QB.prototype.draw=function(A,Q,E,B,I){this.getPath(Q,E,B,I).draw(A)};QB.prototype.drawPoints=function(A,Q,E,B){function I(R,O,N,$){A.beginPath();for(var L=0;L<R.length;L+=1)A.moveTo(O+R[L].x*$,N+R[L].y*$),A.arc(O+R[L].x*$,N+R[L].y*$,2,0,Math.PI*2,!1);A.closePath(),A.fill()}Q=Q!==void 0?Q:0,E=E!==void 0?E:0,B=B!==void 0?B:24;var C=1/this.path.unitsPerEm*B,K=[],J=[],U=this.path;for(var Y=0;Y<U.commands.length;Y+=1){var H=U.commands[Y];if(H.x!==void 0)K.push({x:H.x,y:-H.y});if(H.x1!==void 0)J.push({x:H.x1,y:-H.y1});if(H.x2!==void 0)J.push({x:H.x2,y:-H.y2})}A.fillStyle="blue",I(K,Q,E,C),A.fillStyle="red",I(J,Q,E,C)};QB.prototype.drawMetrics=function(A,Q,E,B){var I;Q=Q!==void 0?Q:0,E=E!==void 0?E:0,B=B!==void 0?B:24,I=1/this.path.unitsPerEm*B,A.lineWidth=1,A.strokeStyle="black",l1.line(A,Q,-1e4,Q,1e4),l1.line(A,-1e4,E,1e4,E);var C=this.xMin||0,K=this.yMin||0,J=this.xMax||0,U=this.yMax||0,Y=this.advanceWidth||0;A.strokeStyle="blue",l1.line(A,Q+C*I,-1e4,Q+C*I,1e4),l1.line(A,Q+J*I,-1e4,Q+J*I,1e4),l1.line(A,-1e4,E+-K*I,1e4,E+-K*I),l1.line(A,-1e4,E+-U*I,1e4,E+-U*I),A.strokeStyle="green",l1.line(A,Q+Y*I,-1e4,Q+Y*I,1e4)};function GU(A,Q,E){Object.defineProperty(A,Q,{get:function(){return A.path,A[E]},set:function(B){A[E]=B},enumerable:!0,configurable:!0})}function I7(A,Q){if(this.font=A,this.glyphs={},Array.isArray(Q))for(var E=0;E<Q.length;E++){var B=Q[E];B.path.unitsPerEm=A.unitsPerEm,this.glyphs[E]=B}this.length=Q&&Q.length||0}I7.prototype.get=function(A){if(this.glyphs[A]===void 0){if(this.font._push(A),typeof this.glyphs[A]==="function")this.glyphs[A]=this.glyphs[A]();var Q=this.glyphs[A],E=this.font._IndexToUnicodeMap[A];if(E)for(var B=0;B<E.unicodes.length;B++)Q.addUnicode(E.unicodes[B]);if(this.font.cffEncoding)if(this.font.isCIDFont)Q.name="gid"+A;else Q.name=this.font.cffEncoding.charset[A];else if(this.font.glyphNames.names)Q.name=this.font.glyphNames.glyphIndexToName(A);this.glyphs[A].advanceWidth=this.font._hmtxTableData[A].advanceWidth,this.glyphs[A].leftSideBearing=this.font._hmtxTableData[A].leftSideBearing}else if(typeof this.glyphs[A]==="function")this.glyphs[A]=this.glyphs[A]();return this.glyphs[A]};I7.prototype.push=function(A,Q){this.glyphs[A]=Q,this.length++};function Q_(A,Q){return new QB({index:Q,font:A})}function E_(A,Q,E,B,I,C){return function(){var K=new QB({index:Q,font:A});return K.path=function(){E(K,B,I);var J=C(A.glyphs,K);return J.unitsPerEm=A.unitsPerEm,J},GU(K,"xMin","_xMin"),GU(K,"xMax","_xMax"),GU(K,"yMin","_yMin"),GU(K,"yMax","_yMax"),K}}function B_(A,Q,E,B){return function(){var I=new QB({index:Q,font:A});return I.path=function(){var C=E(A,I,B);return C.unitsPerEm=A.unitsPerEm,C},I}}var mB={GlyphSet:I7,glyphLoader:Q_,ttfGlyphLoader:E_,cffGlyphLoader:B_};function sW(A,Q){if(A===Q)return!0;else if(Array.isArray(A)&&Array.isArray(Q)){if(A.length!==Q.length)return!1;for(var E=0;E<A.length;E+=1)if(!sW(A[E],Q[E]))return!1;return!0}else return!1}function tH(A){var Q;if(A.length<1240)Q=107;else if(A.length<33900)Q=1131;else Q=32768;return Q}function mI(A,Q,E){var B=[],I=[],C=z0.getCard16(A,Q),K,J;if(C!==0){var U=z0.getByte(A,Q+2);K=Q+(C+1)*U+2;var Y=Q+3;for(var H=0;H<C+1;H+=1)B.push(z0.getOffset(A,Y,U)),Y+=U;J=K+B[C]}else J=Q+2;for(var R=0;R<B.length-1;R+=1){var O=z0.getBytes(A,K+B[R],K+B[R+1]);if(E)O=E(O);I.push(O)}return{objects:I,startOffset:Q,endOffset:J}}function I_(A,Q){var E=[],B=z0.getCard16(A,Q),I,C;if(B!==0){var K=z0.getByte(A,Q+2);I=Q+(B+1)*K+2;var J=Q+3;for(var U=0;U<B+1;U+=1)E.push(z0.getOffset(A,J,K)),J+=K;C=I+E[B]}else C=Q+2;return{offsets:E,startOffset:Q,endOffset:C}}function C_(A,Q,E,B,I){var C=z0.getCard16(E,B),K=0;if(C!==0){var J=z0.getByte(E,B+2);K=B+(C+1)*J+2}var U=z0.getBytes(E,K+Q[A],K+Q[A+1]);if(I)U=I(U);return U}function K_(A){var Q="",E=15,B=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];while(!0){var I=A.parseByte(),C=I>>4,K=I&15;if(C===E)break;if(Q+=B[C],K===E)break;Q+=B[K]}return parseFloat(Q)}function J_(A,Q){var E,B,I,C;if(Q===28)return E=A.parseByte(),B=A.parseByte(),E<<8|B;if(Q===29)return E=A.parseByte(),B=A.parseByte(),I=A.parseByte(),C=A.parseByte(),E<<24|B<<16|I<<8|C;if(Q===30)return K_(A);if(Q>=32&&Q<=246)return Q-139;if(Q>=247&&Q<=250)return E=A.parseByte(),(Q-247)*256+E+108;if(Q>=251&&Q<=254)return E=A.parseByte(),-(Q-251)*256-E-108;throw new Error("Invalid b0 "+Q)}function U_(A){var Q={};for(var E=0;E<A.length;E+=1){var B=A[E][0],I=A[E][1],C=void 0;if(I.length===1)C=I[0];else C=I;if(Q.hasOwnProperty(B)&&!isNaN(Q[B]))throw new Error("Object "+Q+" already has key "+B);Q[B]=C}return Q}function iW(A,Q,E){Q=Q!==void 0?Q:0;var B=new z0.Parser(A,Q),I=[],C=[];E=E!==void 0?E:A.length;while(B.relativeOffset<E){var K=B.parseByte();if(K<=21){if(K===12)K=1200+B.parseByte();I.push([K,C]),C=[]}else C.push(J_(B,K))}return U_(I)}function HK(A,Q){if(Q<=390)Q=XU[Q];else Q=A[Q-391];return Q}function oW(A,Q,E){var B={},I;for(var C=0;C<Q.length;C+=1){var K=Q[C];if(Array.isArray(K.type)){var J=[];J.length=K.type.length;for(var U=0;U<K.type.length;U++){if(I=A[K.op]!==void 0?A[K.op][U]:void 0,I===void 0)I=K.value!==void 0&&K.value[U]!==void 0?K.value[U]:null;if(K.type[U]==="SID")I=HK(E,I);J[U]=I}B[K.name]=J}else{if(I=A[K.op],I===void 0)I=K.value!==void 0?K.value:null;if(K.type==="SID")I=HK(E,I);B[K.name]=I}}return B}function Y_(A,Q){var E={};return E.formatMajor=z0.getCard8(A,Q),E.formatMinor=z0.getCard8(A,Q+1),E.size=z0.getCard8(A,Q+2),E.offsetSize=z0.getCard8(A,Q+3),E.startOffset=Q,E.endOffset=Q+4,E}var rW=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[0.001,0,0,0.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],aW=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function O_(A,Q){var E=iW(A,0,A.byteLength);return oW(E,rW,Q)}function tW(A,Q,E,B){var I=iW(A,Q,E);return oW(I,aW,B)}function YW(A,Q,E,B){var I=[];for(var C=0;C<E.length;C+=1){var K=new DataView(new Uint8Array(E[C]).buffer),J=O_(K,B);J._subrs=[],J._subrsBias=0,J._defaultWidthX=0,J._nominalWidthX=0;var U=J.private[0],Y=J.private[1];if(U!==0&&Y!==0){var H=tW(A,Y+Q,U,B);if(J._defaultWidthX=H.defaultWidthX,J._nominalWidthX=H.nominalWidthX,H.subrs!==0){var R=Y+H.subrs,O=mI(A,R+Q);J._subrs=O.objects,J._subrsBias=tH(J._subrs)}J._privateDict=H}I.push(J)}return I}function H_(A,Q,E,B){var I,C,K=new z0.Parser(A,Q);E-=1;var J=[".notdef"],U=K.parseCard8();if(U===0)for(var Y=0;Y<E;Y+=1)I=K.parseSID(),J.push(HK(B,I));else if(U===1)while(J.length<=E){I=K.parseSID(),C=K.parseCard8();for(var H=0;H<=C;H+=1)J.push(HK(B,I)),I+=1}else if(U===2)while(J.length<=E){I=K.parseSID(),C=K.parseCard16();for(var R=0;R<=C;R+=1)J.push(HK(B,I)),I+=1}else throw new Error("Unknown charset format "+U);return J}function Z_(A,Q,E){var B,I={},C=new z0.Parser(A,Q),K=C.parseCard8();if(K===0){var J=C.parseCard8();for(var U=0;U<J;U+=1)B=C.parseCard8(),I[B]=U}else if(K===1){var Y=C.parseCard8();B=1;for(var H=0;H<Y;H+=1){var R=C.parseCard8(),O=C.parseCard8();for(var N=R;N<=R+O;N+=1)I[N]=B,B+=1}}else throw new Error("Unknown encoding format "+K);return new wU(I,E)}function OW(A,Q,E){var B,I,C,K,J=new mQ,U=[],Y=0,H=!1,R=!1,O=0,N=0,$,L,W,Z;if(A.isCIDFont){var G=A.tables.cff.topDict._fdSelect[Q.index],X=A.tables.cff.topDict._fdArray[G];$=X._subrs,L=X._subrsBias,W=X._defaultWidthX,Z=X._nominalWidthX}else $=A.tables.cff.topDict._subrs,L=A.tables.cff.topDict._subrsBias,W=A.tables.cff.topDict._defaultWidthX,Z=A.tables.cff.topDict._nominalWidthX;var q=W;function M(_,w){if(R)J.closePath();J.moveTo(_,w),R=!0}function F(){var _=U.length%2!==0;if(_&&!H)q=U.shift()+Z;Y+=U.length>>1,U.length=0,H=!0}function D(_){var w,k,T,z,j,v,g,P,V,S,h,x,b=0;while(b<_.length){var m=_[b];switch(b+=1,m){case 1:F();break;case 3:F();break;case 4:if(U.length>1&&!H)q=U.shift()+Z,H=!0;N+=U.pop(),M(O,N);break;case 5:while(U.length>0)O+=U.shift(),N+=U.shift(),J.lineTo(O,N);break;case 6:while(U.length>0){if(O+=U.shift(),J.lineTo(O,N),U.length===0)break;N+=U.shift(),J.lineTo(O,N)}break;case 7:while(U.length>0){if(N+=U.shift(),J.lineTo(O,N),U.length===0)break;O+=U.shift(),J.lineTo(O,N)}break;case 8:while(U.length>0)B=O+U.shift(),I=N+U.shift(),C=B+U.shift(),K=I+U.shift(),O=C+U.shift(),N=K+U.shift(),J.curveTo(B,I,C,K,O,N);break;case 10:if(j=U.pop()+L,v=$[j],v)D(v);break;case 11:return;case 12:switch(m=_[b],b+=1,m){case 35:B=O+U.shift(),I=N+U.shift(),C=B+U.shift(),K=I+U.shift(),g=C+U.shift(),P=K+U.shift(),V=g+U.shift(),S=P+U.shift(),h=V+U.shift(),x=S+U.shift(),O=h+U.shift(),N=x+U.shift(),U.shift(),J.curveTo(B,I,C,K,g,P),J.curveTo(V,S,h,x,O,N);break;case 34:B=O+U.shift(),I=N,C=B+U.shift(),K=I+U.shift(),g=C+U.shift(),P=K,V=g+U.shift(),S=K,h=V+U.shift(),x=N,O=h+U.shift(),J.curveTo(B,I,C,K,g,P),J.curveTo(V,S,h,x,O,N);break;case 36:B=O+U.shift(),I=N+U.shift(),C=B+U.shift(),K=I+U.shift(),g=C+U.shift(),P=K,V=g+U.shift(),S=K,h=V+U.shift(),x=S+U.shift(),O=h+U.shift(),J.curveTo(B,I,C,K,g,P),J.curveTo(V,S,h,x,O,N);break;case 37:if(B=O+U.shift(),I=N+U.shift(),C=B+U.shift(),K=I+U.shift(),g=C+U.shift(),P=K+U.shift(),V=g+U.shift(),S=P+U.shift(),h=V+U.shift(),x=S+U.shift(),Math.abs(h-O)>Math.abs(x-N))O=h+U.shift();else N=x+U.shift();J.curveTo(B,I,C,K,g,P),J.curveTo(V,S,h,x,O,N);break;default:console.log("Glyph "+Q.index+": unknown operator 1200"+m),U.length=0}break;case 14:if(U.length>0&&!H)q=U.shift()+Z,H=!0;if(R)J.closePath(),R=!1;break;case 18:F();break;case 19:case 20:F(),b+=Y+7>>3;break;case 21:if(U.length>2&&!H)q=U.shift()+Z,H=!0;N+=U.pop(),O+=U.pop(),M(O,N);break;case 22:if(U.length>1&&!H)q=U.shift()+Z,H=!0;O+=U.pop(),M(O,N);break;case 23:F();break;case 24:while(U.length>2)B=O+U.shift(),I=N+U.shift(),C=B+U.shift(),K=I+U.shift(),O=C+U.shift(),N=K+U.shift(),J.curveTo(B,I,C,K,O,N);O+=U.shift(),N+=U.shift(),J.lineTo(O,N);break;case 25:while(U.length>6)O+=U.shift(),N+=U.shift(),J.lineTo(O,N);B=O+U.shift(),I=N+U.shift(),C=B+U.shift(),K=I+U.shift(),O=C+U.shift(),N=K+U.shift(),J.curveTo(B,I,C,K,O,N);break;case 26:if(U.length%2)O+=U.shift();while(U.length>0)B=O,I=N+U.shift(),C=B+U.shift(),K=I+U.shift(),O=C,N=K+U.shift(),J.curveTo(B,I,C,K,O,N);break;case 27:if(U.length%2)N+=U.shift();while(U.length>0)B=O+U.shift(),I=N,C=B+U.shift(),K=I+U.shift(),O=C+U.shift(),N=K,J.curveTo(B,I,C,K,O,N);break;case 28:w=_[b],k=_[b+1],U.push((w<<24|k<<16)>>16),b+=2;break;case 29:if(j=U.pop()+A.gsubrsBias,v=A.gsubrs[j],v)D(v);break;case 30:while(U.length>0){if(B=O,I=N+U.shift(),C=B+U.shift(),K=I+U.shift(),O=C+U.shift(),N=K+(U.length===1?U.shift():0),J.curveTo(B,I,C,K,O,N),U.length===0)break;B=O+U.shift(),I=N,C=B+U.shift(),K=I+U.shift(),N=K+U.shift(),O=C+(U.length===1?U.shift():0),J.curveTo(B,I,C,K,O,N)}break;case 31:while(U.length>0){if(B=O+U.shift(),I=N,C=B+U.shift(),K=I+U.shift(),N=K+U.shift(),O=C+(U.length===1?U.shift():0),J.curveTo(B,I,C,K,O,N),U.length===0)break;B=O,I=N+U.shift(),C=B+U.shift(),K=I+U.shift(),O=C+U.shift(),N=K+(U.length===1?U.shift():0),J.curveTo(B,I,C,K,O,N)}break;default:if(m<32)console.log("Glyph "+Q.index+": unknown operator "+m);else if(m<247)U.push(m-139);else if(m<251)w=_[b],b+=1,U.push((m-247)*256+w+108);else if(m<255)w=_[b],b+=1,U.push(-(m-251)*256-w-108);else w=_[b],k=_[b+1],T=_[b+2],z=_[b+3],b+=4,U.push((w<<24|k<<16|T<<8|z)/65536)}}}return D(E),Q.advanceWidth=q,J}function R_(A,Q,E,B){var I=[],C,K=new z0.Parser(A,Q),J=K.parseCard8();if(J===0)for(var U=0;U<E;U++){if(C=K.parseCard8(),C>=B)throw new Error("CFF table CID Font FDSelect has bad FD index value "+C+" (FD count "+B+")");I.push(C)}else if(J===3){var Y=K.parseCard16(),H=K.parseCard16();if(H!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+H);var R;for(var O=0;O<Y;O++){if(C=K.parseCard8(),R=K.parseCard16(),C>=B)throw new Error("CFF table CID Font FDSelect has bad FD index value "+C+" (FD count "+B+")");if(R>E)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+R);for(;H<R;H++)I.push(C);H=R}if(R!==E)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+R)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+J);return I}function N_(A,Q,E,B){E.tables.cff={};var I=Y_(A,Q),C=mI(A,I.endOffset,z0.bytesToString),K=mI(A,C.endOffset),J=mI(A,K.endOffset,z0.bytesToString),U=mI(A,J.endOffset);E.gsubrs=U.objects,E.gsubrsBias=tH(E.gsubrs);var Y=YW(A,Q,K.objects,J.objects);if(Y.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+Y.length);var H=Y[0];if(E.tables.cff.topDict=H,H._privateDict)E.defaultWidthX=H._privateDict.defaultWidthX,E.nominalWidthX=H._privateDict.nominalWidthX;if(H.ros[0]!==void 0&&H.ros[1]!==void 0)E.isCIDFont=!0;if(E.isCIDFont){var{fdArray:R,fdSelect:O}=H;if(R===0||O===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");R+=Q;var N=mI(A,R),$=YW(A,Q,N.objects,J.objects);H._fdArray=$,O+=Q,H._fdSelect=R_(A,O,E.numGlyphs,$.length)}var L=Q+H.private[1],W=tW(A,L,H.private[0],J.objects);if(E.defaultWidthX=W.defaultWidthX,E.nominalWidthX=W.nominalWidthX,W.subrs!==0){var Z=L+W.subrs,G=mI(A,Z);E.subrs=G.objects,E.subrsBias=tH(E.subrs)}else E.subrs=[],E.subrsBias=0;var X;if(B.lowMemory)X=I_(A,Q+H.charStrings),E.nGlyphs=X.offsets.length;else X=mI(A,Q+H.charStrings),E.nGlyphs=X.objects.length;var q=H_(A,Q+H.charset,E.nGlyphs,J.objects);if(H.encoding===0)E.cffEncoding=new wU(rw,q);else if(H.encoding===1)E.cffEncoding=new wU(aw,q);else E.cffEncoding=Z_(A,Q+H.encoding,q);if(E.encoding=E.encoding||E.cffEncoding,E.glyphs=new mB.GlyphSet(E),B.lowMemory)E._push=function(D){var _=C_(D,X.offsets,A,Q+H.charStrings);E.glyphs.push(D,mB.cffGlyphLoader(E,D,OW,_))};else for(var M=0;M<E.nGlyphs;M+=1){var F=X.objects[M];E.glyphs.push(M,mB.cffGlyphLoader(E,M,OW,F))}}function eW(A,Q){var E,B=XU.indexOf(A);if(B>=0)E=B;if(B=Q.indexOf(A),B>=0)E=B+XU.length;else E=XU.length+Q.length,Q.push(A);return E}function G_(){return new aA.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function W_(A){var Q=new aA.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Q.names=[];for(var E=0;E<A.length;E+=1)Q.names.push({name:"name_"+E,type:"NAME",value:A[E]});return Q}function AX(A,Q,E){var B={};for(var I=0;I<A.length;I+=1){var C=A[I],K=Q[C.name];if(K!==void 0&&!sW(K,C.value)){if(C.type==="SID")K=eW(K,E);B[C.op]={name:C.name,type:C.type,value:K}}}return B}function HW(A,Q){var E=new aA.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return E.dict=AX(rW,A,Q),E}function ZW(A){var Q=new aA.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return Q.topDicts=[{name:"topDict_0",type:"TABLE",value:A}],Q}function X_(A){var Q=new aA.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Q.strings=[];for(var E=0;E<A.length;E+=1)Q.strings.push({name:"string_"+E,type:"STRING",value:A[E]});return Q}function $_(){return new aA.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function L_(A,Q){var E=new aA.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(var B=0;B<A.length;B+=1){var I=A[B],C=eW(I,Q);E.fields.push({name:"glyph_"+B,type:"SID",value:C})}return E}function q_(A){var Q=[],E=A.path;Q.push({name:"width",type:"NUMBER",value:A.advanceWidth});var B=0,I=0;for(var C=0;C<E.commands.length;C+=1){var K=void 0,J=void 0,U=E.commands[C];if(U.type==="Q"){var Y=0.3333333333333333,H=0.6666666666666666;U={type:"C",x:U.x,y:U.y,x1:Math.round(Y*B+H*U.x1),y1:Math.round(Y*I+H*U.y1),x2:Math.round(Y*U.x+H*U.x1),y2:Math.round(Y*U.y+H*U.y1)}}if(U.type==="M")K=Math.round(U.x-B),J=Math.round(U.y-I),Q.push({name:"dx",type:"NUMBER",value:K}),Q.push({name:"dy",type:"NUMBER",value:J}),Q.push({name:"rmoveto",type:"OP",value:21}),B=Math.round(U.x),I=Math.round(U.y);else if(U.type==="L")K=Math.round(U.x-B),J=Math.round(U.y-I),Q.push({name:"dx",type:"NUMBER",value:K}),Q.push({name:"dy",type:"NUMBER",value:J}),Q.push({name:"rlineto",type:"OP",value:5}),B=Math.round(U.x),I=Math.round(U.y);else if(U.type==="C"){var R=Math.round(U.x1-B),O=Math.round(U.y1-I),N=Math.round(U.x2-U.x1),$=Math.round(U.y2-U.y1);K=Math.round(U.x-U.x2),J=Math.round(U.y-U.y2),Q.push({name:"dx1",type:"NUMBER",value:R}),Q.push({name:"dy1",type:"NUMBER",value:O}),Q.push({name:"dx2",type:"NUMBER",value:N}),Q.push({name:"dy2",type:"NUMBER",value:$}),Q.push({name:"dx",type:"NUMBER",value:K}),Q.push({name:"dy",type:"NUMBER",value:J}),Q.push({name:"rrcurveto",type:"OP",value:8}),B=Math.round(U.x),I=Math.round(U.y)}}return Q.push({name:"endchar",type:"OP",value:14}),Q}function F_(A){var Q=new aA.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(var E=0;E<A.length;E+=1){var B=A.get(E),I=q_(B);Q.charStrings.push({name:B.name,type:"CHARSTRING",value:I})}return Q}function D_(A,Q){var E=new aA.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return E.dict=AX(aW,A,Q),E}function M_(A,Q){var E=new aA.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),B=1/Q.unitsPerEm,I={version:Q.version,fullName:Q.fullName,familyName:Q.familyName,weight:Q.weightName,fontBBox:Q.fontBBox||[0,0,0,0],fontMatrix:[B,0,0,B,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},C={},K=[],J;for(var U=1;U<A.length;U+=1)J=A.get(U),K.push(J.name);var Y=[];E.header=G_(),E.nameIndex=W_([Q.postScriptName]);var H=HW(I,Y);E.topDictIndex=ZW(H),E.globalSubrIndex=$_(),E.charsets=L_(K,Y),E.charStringsIndex=F_(A),E.privateDict=D_(C,Y),E.stringIndex=X_(Y);var R=E.header.sizeOf()+E.nameIndex.sizeOf()+E.topDictIndex.sizeOf()+E.stringIndex.sizeOf()+E.globalSubrIndex.sizeOf();return I.charset=R,I.encoding=0,I.charStrings=I.charset+E.charsets.sizeOf(),I.private[1]=I.charStrings+E.charStringsIndex.sizeOf(),H=HW(I,Y),E.topDictIndex=ZW(H),E}var w_={parse:N_,make:M_};function __(A,Q){var E={},B=new z0.Parser(A,Q);return E.version=B.parseVersion(),E.fontRevision=Math.round(B.parseFixed()*1000)/1000,E.checkSumAdjustment=B.parseULong(),E.magicNumber=B.parseULong(),W0.argument(E.magicNumber===1594834165,"Font header has wrong magic number."),E.flags=B.parseUShort(),E.unitsPerEm=B.parseUShort(),E.created=B.parseLongDateTime(),E.modified=B.parseLongDateTime(),E.xMin=B.parseShort(),E.yMin=B.parseShort(),E.xMax=B.parseShort(),E.yMax=B.parseShort(),E.macStyle=B.parseUShort(),E.lowestRecPPEM=B.parseUShort(),E.fontDirectionHint=B.parseShort(),E.indexToLocFormat=B.parseShort(),E.glyphDataFormat=B.parseShort(),E}function k_(A){var Q=Math.round((/*@__PURE__*/new Date()).getTime()/1000)+2082844800,E=Q;if(A.createdTimestamp)E=A.createdTimestamp+2082844800;return new aA.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1000},{name:"created",type:"LONGDATETIME",value:E},{name:"modified",type:"LONGDATETIME",value:Q},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],A)}var S_={parse:__,make:k_};function T_(A,Q){var E={},B=new z0.Parser(A,Q);return E.version=B.parseVersion(),E.ascender=B.parseShort(),E.descender=B.parseShort(),E.lineGap=B.parseShort(),E.advanceWidthMax=B.parseUShort(),E.minLeftSideBearing=B.parseShort(),E.minRightSideBearing=B.parseShort(),E.xMaxExtent=B.parseShort(),E.caretSlopeRise=B.parseShort(),E.caretSlopeRun=B.parseShort(),E.caretOffset=B.parseShort(),B.relativeOffset+=8,E.metricDataFormat=B.parseShort(),E.numberOfHMetrics=B.parseUShort(),E}function z_(A){return new aA.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],A)}var P_={parse:T_,make:z_};function V_(A,Q,E,B,I){var C,K,J=new z0.Parser(A,Q);for(var U=0;U<B;U+=1){if(U<E)C=J.parseUShort(),K=J.parseShort();var Y=I.get(U);Y.advanceWidth=C,Y.leftSideBearing=K}}function j_(A,Q,E,B,I){A._hmtxTableData={};var C,K,J=new z0.Parser(Q,E);for(var U=0;U<I;U+=1){if(U<B)C=J.parseUShort(),K=J.parseShort();A._hmtxTableData[U]={advanceWidth:C,leftSideBearing:K}}}function v_(A,Q,E,B,I,C,K){if(K.lowMemory)j_(A,Q,E,B,I);else V_(Q,E,B,I,C)}function h_(A){var Q=new aA.Table("hmtx",[]);for(var E=0;E<A.length;E+=1){var B=A.get(E),I=B.advanceWidth||0,C=B.leftSideBearing||0;Q.fields.push({name:"advanceWidth_"+E,type:"USHORT",value:I}),Q.fields.push({name:"leftSideBearing_"+E,type:"SHORT",value:C})}return Q}var y_={parse:v_,make:h_};function g_(A){var Q=new aA.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:A.length}]),E="",B=12+A.length*4;for(var I=0;I<A.length;++I){var C=E.indexOf(A[I]);if(C<0)C=E.length,E+=A[I];Q.fields.push({name:"offset "+I,type:"USHORT",value:B+C}),Q.fields.push({name:"length "+I,type:"USHORT",value:A[I].length})}return Q.fields.push({name:"stringPool",type:"CHARARRAY",value:E}),Q}function x_(A,Q){var E=new z0.Parser(A,Q),B=E.parseULong();W0.argument(B===1,"Unsupported ltag table version."),E.skip("uLong",1);var I=E.parseULong(),C=[];for(var K=0;K<I;K++){var J="",U=Q+E.parseUShort(),Y=E.parseUShort();for(var H=U;H<U+Y;++H)J+=String.fromCharCode(A.getInt8(H));C.push(J)}return C}var b_={make:g_,parse:x_};function f_(A,Q){var E={},B=new z0.Parser(A,Q);if(E.version=B.parseVersion(),E.numGlyphs=B.parseUShort(),E.version===1)E.maxPoints=B.parseUShort(),E.maxContours=B.parseUShort(),E.maxCompositePoints=B.parseUShort(),E.maxCompositeContours=B.parseUShort(),E.maxZones=B.parseUShort(),E.maxTwilightPoints=B.parseUShort(),E.maxStorage=B.parseUShort(),E.maxFunctionDefs=B.parseUShort(),E.maxInstructionDefs=B.parseUShort(),E.maxStackElements=B.parseUShort(),E.maxSizeOfInstructions=B.parseUShort(),E.maxComponentElements=B.parseUShort(),E.maxComponentDepth=B.parseUShort();return E}function u_(A){return new aA.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:A}])}var p_={parse:f_,make:u_},QX=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],EX={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},m_={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},BX={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function c_(A,Q,E){switch(A){case 0:if(Q===65535)return"und";else if(E)return E[Q];break;case 1:return EX[Q];case 3:return BX[Q]}return}var eH="utf-16",l_={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},d_={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function IX(A,Q,E){switch(A){case 0:return eH;case 1:return d_[E]||l_[Q];case 3:if(Q===1||Q===10)return eH;break}return}function n_(A,Q,E){var B={},I=new z0.Parser(A,Q),C=I.parseUShort(),K=I.parseUShort(),J=I.offset+I.parseUShort();for(var U=0;U<K;U++){var Y=I.parseUShort(),H=I.parseUShort(),R=I.parseUShort(),O=I.parseUShort(),N=QX[O]||O,$=I.parseUShort(),L=I.parseUShort(),W=c_(Y,R,E),Z=IX(Y,H,R);if(Z!==void 0&&W!==void 0){var G=void 0;if(Z===eH)G=M6.UTF16(A,J+L,$);else G=M6.MACSTRING(A,J+L,$,Z);if(G){var X=B[N];if(X===void 0)X=B[N]={};X[W]=G}}}var q=0;if(C===1)q=I.parseUShort();return B}function pH(A){var Q={};for(var E in A)Q[A[E]]=parseInt(E);return Q}function RW(A,Q,E,B,I,C){return new aA.Record("NameRecord",[{name:"platformID",type:"USHORT",value:A},{name:"encodingID",type:"USHORT",value:Q},{name:"languageID",type:"USHORT",value:E},{name:"nameID",type:"USHORT",value:B},{name:"length",type:"USHORT",value:I},{name:"offset",type:"USHORT",value:C}])}function s_(A,Q){var E=A.length,B=Q.length-E+1;A:for(var I=0;I<B;I++)for(;I<B;I++){for(var C=0;C<E;C++)if(Q[I+C]!==A[C])continue A;return I}return-1}function NW(A,Q){var E=s_(A,Q);if(E<0){E=Q.length;var B=0,I=A.length;for(;B<I;++B)Q.push(A[B])}return E}function i_(A,Q){var E,B=[],I={},C=pH(QX);for(var K in A){var J=C[K];if(J===void 0)J=K;if(E=parseInt(J),isNaN(E))throw new Error('Name table entry "'+K+'" does not exist, see nameTableNames for complete list.');I[E]=A[K],B.push(E)}var U=pH(EX),Y=pH(BX),H=[],R=[];for(var O=0;O<B.length;O++){E=B[O];var N=I[E];for(var $ in N){var L=N[$],W=1,Z=U[$],G=m_[Z],X=IX(W,G,Z),q=mA.MACSTRING(L,X);if(q===void 0){if(W=0,Z=Q.indexOf($),Z<0)Z=Q.length,Q.push($);G=4,q=mA.UTF16(L)}var M=NW(q,R);H.push(RW(W,G,Z,E,q.length,M));var F=Y[$];if(F!==void 0){var D=mA.UTF16(L),_=NW(D,R);H.push(RW(3,1,F,E,D.length,_))}}}H.sort(function(T,z){return T.platformID-z.platformID||T.encodingID-z.encodingID||T.languageID-z.languageID||T.nameID-z.nameID});var w=new aA.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:H.length},{name:"stringOffset",type:"USHORT",value:6+H.length*12}]);for(var k=0;k<H.length;k++)w.fields.push({name:"record_"+k,type:"RECORD",value:H[k]});return w.fields.push({name:"strings",type:"LITERAL",value:R}),w}var o_={parse:n_,make:i_},A7=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66000,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function r_(A){for(var Q=0;Q<A7.length;Q+=1){var E=A7[Q];if(A>=E.begin&&A<E.end)return Q}return-1}function a_(A,Q){var E={},B=new z0.Parser(A,Q);E.version=B.parseUShort(),E.xAvgCharWidth=B.parseShort(),E.usWeightClass=B.parseUShort(),E.usWidthClass=B.parseUShort(),E.fsType=B.parseUShort(),E.ySubscriptXSize=B.parseShort(),E.ySubscriptYSize=B.parseShort(),E.ySubscriptXOffset=B.parseShort(),E.ySubscriptYOffset=B.parseShort(),E.ySuperscriptXSize=B.parseShort(),E.ySuperscriptYSize=B.parseShort(),E.ySuperscriptXOffset=B.parseShort(),E.ySuperscriptYOffset=B.parseShort(),E.yStrikeoutSize=B.parseShort(),E.yStrikeoutPosition=B.parseShort(),E.sFamilyClass=B.parseShort(),E.panose=[];for(var I=0;I<10;I++)E.panose[I]=B.parseByte();if(E.ulUnicodeRange1=B.parseULong(),E.ulUnicodeRange2=B.parseULong(),E.ulUnicodeRange3=B.parseULong(),E.ulUnicodeRange4=B.parseULong(),E.achVendID=String.fromCharCode(B.parseByte(),B.parseByte(),B.parseByte(),B.parseByte()),E.fsSelection=B.parseUShort(),E.usFirstCharIndex=B.parseUShort(),E.usLastCharIndex=B.parseUShort(),E.sTypoAscender=B.parseShort(),E.sTypoDescender=B.parseShort(),E.sTypoLineGap=B.parseShort(),E.usWinAscent=B.parseUShort(),E.usWinDescent=B.parseUShort(),E.version>=1)E.ulCodePageRange1=B.parseULong(),E.ulCodePageRange2=B.parseULong();if(E.version>=2)E.sxHeight=B.parseShort(),E.sCapHeight=B.parseShort(),E.usDefaultChar=B.parseUShort(),E.usBreakChar=B.parseUShort(),E.usMaxContent=B.parseUShort();return E}function t_(A){return new aA.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],A)}var GW={parse:a_,make:t_,unicodeRanges:A7,getUnicodeRange:r_};function e_(A,Q){var E={},B=new z0.Parser(A,Q);switch(E.version=B.parseVersion(),E.italicAngle=B.parseFixed(),E.underlinePosition=B.parseShort(),E.underlineThickness=B.parseShort(),E.isFixedPitch=B.parseULong(),E.minMemType42=B.parseULong(),E.maxMemType42=B.parseULong(),E.minMemType1=B.parseULong(),E.maxMemType1=B.parseULong(),E.version){case 1:E.names=d1.slice();break;case 2:E.numberOfGlyphs=B.parseUShort(),E.glyphNameIndex=new Array(E.numberOfGlyphs);for(var I=0;I<E.numberOfGlyphs;I++)E.glyphNameIndex[I]=B.parseUShort();E.names=[];for(var C=0;C<E.numberOfGlyphs;C++)if(E.glyphNameIndex[C]>=d1.length){var K=B.parseChar();E.names.push(B.parseString(K))}break;case 2.5:E.numberOfGlyphs=B.parseUShort(),E.offset=new Array(E.numberOfGlyphs);for(var J=0;J<E.numberOfGlyphs;J++)E.offset[J]=B.parseChar();break}return E}function A2(){return new aA.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var Q2={parse:e_,make:A2},FB=new Array(9);FB[1]=function A(){var Q=this.offset+this.relativeOffset,E=this.parseUShort();if(E===1)return{substFormat:1,coverage:this.parsePointer($A.coverage),deltaGlyphId:this.parseUShort()};else if(E===2)return{substFormat:2,coverage:this.parsePointer($A.coverage),substitute:this.parseOffset16List()};W0.assert(!1,"0x"+Q.toString(16)+": lookup type 1 format must be 1 or 2.")};FB[2]=function A(){var Q=this.parseUShort();return W0.argument(Q===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:Q,coverage:this.parsePointer($A.coverage),sequences:this.parseListOfLists()}};FB[3]=function A(){var Q=this.parseUShort();return W0.argument(Q===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:Q,coverage:this.parsePointer($A.coverage),alternateSets:this.parseListOfLists()}};FB[4]=function A(){var Q=this.parseUShort();return W0.argument(Q===1,"GSUB ligature table identifier-format must be 1"),{substFormat:Q,coverage:this.parsePointer($A.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var D6={sequenceIndex:$A.uShort,lookupListIndex:$A.uShort};FB[5]=function A(){var Q=this.offset+this.relativeOffset,E=this.parseUShort();if(E===1)return{substFormat:E,coverage:this.parsePointer($A.coverage),ruleSets:this.parseListOfLists(function(){var C=this.parseUShort(),K=this.parseUShort();return{input:this.parseUShortList(C-1),lookupRecords:this.parseRecordList(K,D6)}})};else if(E===2)return{substFormat:E,coverage:this.parsePointer($A.coverage),classDef:this.parsePointer($A.classDef),classSets:this.parseListOfLists(function(){var C=this.parseUShort(),K=this.parseUShort();return{classes:this.parseUShortList(C-1),lookupRecords:this.parseRecordList(K,D6)}})};else if(E===3){var B=this.parseUShort(),I=this.parseUShort();return{substFormat:E,coverages:this.parseList(B,$A.pointer($A.coverage)),lookupRecords:this.parseRecordList(I,D6)}}W0.assert(!1,"0x"+Q.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};FB[6]=function A(){var Q=this.offset+this.relativeOffset,E=this.parseUShort();if(E===1)return{substFormat:1,coverage:this.parsePointer($A.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(D6)}})};else if(E===2)return{substFormat:2,coverage:this.parsePointer($A.coverage),backtrackClassDef:this.parsePointer($A.classDef),inputClassDef:this.parsePointer($A.classDef),lookaheadClassDef:this.parsePointer($A.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(D6)}})};else if(E===3)return{substFormat:3,backtrackCoverage:this.parseList($A.pointer($A.coverage)),inputCoverage:this.parseList($A.pointer($A.coverage)),lookaheadCoverage:this.parseList($A.pointer($A.coverage)),lookupRecords:this.parseRecordList(D6)};W0.assert(!1,"0x"+Q.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};FB[7]=function A(){var Q=this.parseUShort();W0.argument(Q===1,"GSUB Extension Substitution subtable identifier-format must be 1");var E=this.parseUShort(),B=new $A(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:E,extension:FB[E].call(B)}};FB[8]=function A(){var Q=this.parseUShort();return W0.argument(Q===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:Q,coverage:this.parsePointer($A.coverage),backtrackCoverage:this.parseList($A.pointer($A.coverage)),lookaheadCoverage:this.parseList($A.pointer($A.coverage)),substitutes:this.parseUShortList()}};function E2(A,Q){Q=Q||0;var E=new $A(A,Q),B=E.parseVersion(1);if(W0.argument(B===1||B===1.1,"Unsupported GSUB table version."),B===1)return{version:B,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(FB)};else return{version:B,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(FB),variations:E.parseFeatureVariationsList()}}var w6=new Array(9);w6[1]=function A(Q){if(Q.substFormat===1)return new aA.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new aA.Coverage(Q.coverage)},{name:"deltaGlyphID",type:"USHORT",value:Q.deltaGlyphId}]);else return new aA.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new aA.Coverage(Q.coverage)}].concat(aA.ushortList("substitute",Q.substitute)))};w6[2]=function A(Q){return W0.assert(Q.substFormat===1,"Lookup type 2 substFormat must be 1."),new aA.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new aA.Coverage(Q.coverage)}].concat(aA.tableList("seqSet",Q.sequences,function(E){return new aA.Table("sequenceSetTable",aA.ushortList("sequence",E))})))};w6[3]=function A(Q){return W0.assert(Q.substFormat===1,"Lookup type 3 substFormat must be 1."),new aA.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new aA.Coverage(Q.coverage)}].concat(aA.tableList("altSet",Q.alternateSets,function(E){return new aA.Table("alternateSetTable",aA.ushortList("alternate",E))})))};w6[4]=function A(Q){return W0.assert(Q.substFormat===1,"Lookup type 4 substFormat must be 1."),new aA.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new aA.Coverage(Q.coverage)}].concat(aA.tableList("ligSet",Q.ligatureSets,function(E){return new aA.Table("ligatureSetTable",aA.tableList("ligature",E,function(B){return new aA.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:B.ligGlyph}].concat(aA.ushortList("component",B.components,B.components.length+1)))}))})))};w6[6]=function A(Q){if(Q.substFormat===1){var E=new aA.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:Q.substFormat},{name:"coverage",type:"TABLE",value:new aA.Coverage(Q.coverage)}].concat(aA.tableList("chainRuleSet",Q.chainRuleSets,function(C){return new aA.Table("chainRuleSetTable",aA.tableList("chainRule",C,function(K){var J=aA.ushortList("backtrackGlyph",K.backtrack,K.backtrack.length).concat(aA.ushortList("inputGlyph",K.input,K.input.length+1)).concat(aA.ushortList("lookaheadGlyph",K.lookahead,K.lookahead.length)).concat(aA.ushortList("substitution",[],K.lookupRecords.length));return K.lookupRecords.forEach(function(U,Y){J=J.concat({name:"sequenceIndex"+Y,type:"USHORT",value:U.sequenceIndex}).concat({name:"lookupListIndex"+Y,type:"USHORT",value:U.lookupListIndex})}),new aA.Table("chainRuleTable",J)}))})));return E}else if(Q.substFormat===2)W0.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(Q.substFormat===3){var B=[{name:"substFormat",type:"USHORT",value:Q.substFormat}];B.push({name:"backtrackGlyphCount",type:"USHORT",value:Q.backtrackCoverage.length}),Q.backtrackCoverage.forEach(function(C,K){B.push({name:"backtrackCoverage"+K,type:"TABLE",value:new aA.Coverage(C)})}),B.push({name:"inputGlyphCount",type:"USHORT",value:Q.inputCoverage.length}),Q.inputCoverage.forEach(function(C,K){B.push({name:"inputCoverage"+K,type:"TABLE",value:new aA.Coverage(C)})}),B.push({name:"lookaheadGlyphCount",type:"USHORT",value:Q.lookaheadCoverage.length}),Q.lookaheadCoverage.forEach(function(C,K){B.push({name:"lookaheadCoverage"+K,type:"TABLE",value:new aA.Coverage(C)})}),B.push({name:"substitutionCount",type:"USHORT",value:Q.lookupRecords.length}),Q.lookupRecords.forEach(function(C,K){B=B.concat({name:"sequenceIndex"+K,type:"USHORT",value:C.sequenceIndex}).concat({name:"lookupListIndex"+K,type:"USHORT",value:C.lookupListIndex})});var I=new aA.Table("chainContextTable",B);return I}W0.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function B2(A){return new aA.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new aA.ScriptList(A.scripts)},{name:"features",type:"TABLE",value:new aA.FeatureList(A.features)},{name:"lookups",type:"TABLE",value:new aA.LookupList(A.lookups,w6)}])}var I2={parse:E2,make:B2};function C2(A,Q){var E=new z0.Parser(A,Q),B=E.parseULong();W0.argument(B===1,"Unsupported META table version."),E.parseULong(),E.parseULong();var I=E.parseULong(),C={};for(var K=0;K<I;K++){var J=E.parseTag(),U=E.parseULong(),Y=E.parseULong(),H=M6.UTF8(A,Q+U,Y);C[J]=H}return C}function K2(A){var Q=Object.keys(A).length,E="",B=16+Q*12,I=new aA.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:B},{name:"numTags",type:"ULONG",value:Q}]);for(var C in A){var K=E.length;E+=A[C],I.fields.push({name:"tag "+C,type:"TAG",value:C}),I.fields.push({name:"offset "+C,type:"ULONG",value:B+K}),I.fields.push({name:"length "+C,type:"ULONG",value:A[C].length})}return I.fields.push({name:"stringPool",type:"CHARARRAY",value:E}),I}var J2={parse:C2,make:K2};function U2(A,Q){var E=new $A(A,Q),B=E.parseUShort();W0.argument(B===0,"Only COLRv0 supported.");var I=E.parseUShort(),C=E.parseOffset32(),K=E.parseOffset32(),J=E.parseUShort();E.relativeOffset=C;var U=E.parseRecordList(I,{glyphID:$A.uShort,firstLayerIndex:$A.uShort,numLayers:$A.uShort});E.relativeOffset=K;var Y=E.parseRecordList(J,{glyphID:$A.uShort,paletteIndex:$A.uShort});return{version:B,baseGlyphRecords:U,layerRecords:Y}}function Y2(A){var Q=A.version;if(Q===void 0)Q=0;var E=A.baseGlyphRecords;if(E===void 0)E=[];var B=A.layerRecords;if(B===void 0)B=[];W0.argument(Q===0,"Only COLRv0 supported.");var I=14,C=I+E.length*6;return new aA.Table("COLR",[{name:"version",type:"USHORT",value:Q},{name:"numBaseGlyphRecords",type:"USHORT",value:E.length},{name:"baseGlyphRecordsOffset",type:"ULONG",value:I},{name:"layerRecordsOffset",type:"ULONG",value:C},{name:"numLayerRecords",type:"USHORT",value:B.length}].concat(E.map(function(K,J){return[{name:"glyphID_"+J,type:"USHORT",value:K.glyphID},{name:"firstLayerIndex_"+J,type:"USHORT",value:K.firstLayerIndex},{name:"numLayers_"+J,type:"USHORT",value:K.numLayers}]}).flat(),B.map(function(K,J){return[{name:"LayerGlyphID_"+J,type:"USHORT",value:K.glyphID},{name:"paletteIndex_"+J,type:"USHORT",value:K.paletteIndex}]}).flat()))}var O2={parse:U2,make:Y2};function H2(A,Q){var E=new $A(A,Q),B=E.parseShort(),I=E.parseShort(),C=E.parseShort(),K=E.parseShort(),J=E.parseOffset32(),U=E.parseUShortList(C);E.relativeOffset=J;var Y=E.parseULongList(K);return{version:B,numPaletteEntries:I,colorRecords:Y,colorRecordIndices:U}}function Z2(A){var Q=A.version;if(Q===void 0)Q=0;var E=A.numPaletteEntries;if(E===void 0)E=0;var B=A.colorRecords;if(B===void 0)B=[];var I=A.colorRecordIndices;if(I===void 0)I=[0];return W0.argument(Q===0,"Only CPALv0 are supported."),W0.argument(B.length,"No colorRecords given."),W0.argument(I.length,"No colorRecordIndices given."),W0.argument(!E&&I.length==1,"Can't infer numPaletteEntries on multiple colorRecordIndices"),new aA.Table("CPAL",[{name:"version",type:"USHORT",value:Q},{name:"numPaletteEntries",type:"USHORT",value:E||B.length},{name:"numPalettes",type:"USHORT",value:I.length},{name:"numColorRecords",type:"USHORT",value:B.length},{name:"colorRecordsArrayOffset",type:"ULONG",value:12+2*I.length}].concat(I.map(function(C,K){return{name:"colorRecordIndices_"+K,type:"USHORT",value:C}}),B.map(function(C,K){return{name:"colorRecords_"+K,type:"ULONG",value:C}})))}var R2={parse:H2,make:Z2};function WW(A){return Math.log(A)/Math.log(2)|0}function C7(A){while(A.length%4!==0)A.push(0);var Q=0;for(var E=0;E<A.length;E+=4)Q+=(A[E]<<24)+(A[E+1]<<16)+(A[E+2]<<8)+A[E+3];return Q%=Math.pow(2,32),Q}function XW(A,Q,E,B){return new aA.Record("Table Record",[{name:"tag",type:"TAG",value:A!==void 0?A:""},{name:"checkSum",type:"ULONG",value:Q!==void 0?Q:0},{name:"offset",type:"ULONG",value:E!==void 0?E:0},{name:"length",type:"ULONG",value:B!==void 0?B:0}])}function CX(A){var Q=new aA.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);Q.tables=A,Q.numTables=A.length;var E=Math.pow(2,WW(Q.numTables));Q.searchRange=16*E,Q.entrySelector=WW(E),Q.rangeShift=Q.numTables*16-Q.searchRange;var B=[],I=[],C=Q.sizeOf()+XW().sizeOf()*Q.numTables;while(C%4!==0)C+=1,I.push({name:"padding",type:"BYTE",value:0});for(var K=0;K<A.length;K+=1){var J=A[K];W0.argument(J.tableName.length===4,"Table name"+J.tableName+" is invalid.");var U=J.sizeOf(),Y=XW(J.tableName,C7(J.encode()),C,U);B.push({name:Y.tag+" Table Record",type:"RECORD",value:Y}),I.push({name:J.tableName+" table",type:"RECORD",value:J}),C+=U,W0.argument(!isNaN(C),"Something went wrong calculating the offset.");while(C%4!==0)C+=1,I.push({name:"padding",type:"BYTE",value:0})}return B.sort(function(H,R){if(H.value.tag>R.value.tag)return 1;else return-1}),Q.fields=Q.fields.concat(B),Q.fields=Q.fields.concat(I),Q}function $W(A,Q,E){for(var B=0;B<Q.length;B+=1){var I=A.charToGlyphIndex(Q[B]);if(I>0){var C=A.glyphs.get(I);return C.getMetrics()}}return E}function N2(A){var Q=0;for(var E=0;E<A.length;E+=1)Q+=A[E];return Q/A.length}function G2(A){var Q=[],E=[],B=[],I=[],C=[],K=[],J=[],U,Y=0,H=0,R=0,O=0,N=0;for(var $=0;$<A.glyphs.length;$+=1){var L=A.glyphs.get($),W=L.unicode|0;if(isNaN(L.advanceWidth))throw new Error("Glyph "+L.name+" ("+$+"): advanceWidth is not a number.");if(U>W||U===void 0){if(W>0)U=W}if(Y<W)Y=W;var Z=GW.getUnicodeRange(W);if(Z<32)H|=1<<Z;else if(Z<64)R|=1<<Z-32;else if(Z<96)O|=1<<Z-64;else if(Z<123)N|=1<<Z-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(L.name===".notdef")continue;var G=L.getMetrics();Q.push(G.xMin),E.push(G.yMin),B.push(G.xMax),I.push(G.yMax),K.push(G.leftSideBearing),J.push(G.rightSideBearing),C.push(L.advanceWidth)}var X={xMin:Math.min.apply(null,Q),yMin:Math.min.apply(null,E),xMax:Math.max.apply(null,B),yMax:Math.max.apply(null,I),advanceWidthMax:Math.max.apply(null,C),advanceWidthAvg:N2(C),minLeftSideBearing:Math.min.apply(null,K),maxLeftSideBearing:Math.max.apply(null,K),minRightSideBearing:Math.min.apply(null,J)};X.ascender=A.ascender,X.descender=A.descender;var q=S_.make({flags:3,unitsPerEm:A.unitsPerEm,xMin:X.xMin,yMin:X.yMin,xMax:X.xMax,yMax:X.yMax,lowestRecPPEM:3,createdTimestamp:A.createdTimestamp}),M=P_.make({ascender:X.ascender,descender:X.descender,advanceWidthMax:X.advanceWidthMax,minLeftSideBearing:X.minLeftSideBearing,minRightSideBearing:X.minRightSideBearing,xMaxExtent:X.maxLeftSideBearing+(X.xMax-X.xMin),numberOfHMetrics:A.glyphs.length}),F=p_.make(A.glyphs.length),D=GW.make(Object.assign({xAvgCharWidth:Math.round(X.advanceWidthAvg),usFirstCharIndex:U,usLastCharIndex:Y,ulUnicodeRange1:H,ulUnicodeRange2:R,ulUnicodeRange3:O,ulUnicodeRange4:N,sTypoAscender:X.ascender,sTypoDescender:X.descender,sTypoLineGap:0,usWinAscent:X.yMax,usWinDescent:Math.abs(X.yMin),ulCodePageRange1:1,sxHeight:$W(A,"xyvw",{yMax:Math.round(X.ascender/2)}).yMax,sCapHeight:$W(A,"HIKLEFJMNTZBDPRAGOQSUVWXY",X).yMax,usDefaultChar:A.hasChar(" ")?32:0,usBreakChar:A.hasChar(" ")?32:0},A.tables.os2)),_=y_.make(A.glyphs),w=ow.make(A.glyphs),k=A.getEnglishName("fontFamily"),T=A.getEnglishName("fontSubfamily"),z=k+" "+T,j=A.getEnglishName("postScriptName");if(!j)j=k.replace(/\s/g,"")+"-"+T;var v={};for(var g in A.names)v[g]=A.names[g];if(!v.uniqueID)v.uniqueID={en:A.getEnglishName("manufacturer")+":"+z};if(!v.postScriptName)v.postScriptName={en:j};if(!v.preferredFamily)v.preferredFamily=A.names.fontFamily;if(!v.preferredSubfamily)v.preferredSubfamily=A.names.fontSubfamily;var P=[],V=o_.make(v,P),S=P.length>0?b_.make(P):void 0,h=Q2.make(),x=w_.make(A.glyphs,{version:A.getEnglishName("version"),fullName:z,familyName:k,weightName:T,postScriptName:j,unitsPerEm:A.unitsPerEm,fontBBox:[0,X.yMin,X.ascender,X.advanceWidthMax]}),b=A.metas&&Object.keys(A.metas).length>0?J2.make(A.metas):void 0,m=[q,M,F,D,V,w,h,x,_];if(S)m.push(S);if(A.tables.gsub)m.push(I2.make(A.tables.gsub));if(A.tables.cpal)m.push(R2.make(A.tables.cpal));if(A.tables.colr)m.push(O2.make(A.tables.colr));if(b)m.push(b);var s=CX(m),i=s.encode(),n=C7(i),l=s.fields,c=!1;for(var o=0;o<l.length;o+=1)if(l[o].name==="head table"){l[o].value.checkSumAdjustment=2981146554-n,c=!0;break}if(!c)throw new Error("Could not find head table with checkSum to adjust.");return s}var W2={make:CX,fontToTable:G2,computeCheckSum:C7};function mH(A,Q){var E=0,B=A.length-1;while(E<=B){var I=E+B>>>1,C=A[I].tag;if(C===Q)return I;else if(C<Q)E=I+1;else B=I-1}return-E-1}function LW(A,Q){var E=0,B=A.length-1;while(E<=B){var I=E+B>>>1,C=A[I];if(C===Q)return I;else if(C<Q)E=I+1;else B=I-1}return-E-1}function qW(A,Q){var E,B=0,I=A.length-1;while(B<=I){var C=B+I>>>1;E=A[C];var K=E.start;if(K===Q)return E;else if(K<Q)B=C+1;else I=C-1}if(B>0){if(E=A[B-1],Q>E.end)return 0;return E}}function GK(A,Q){this.font=A,this.tableName=Q}GK.prototype={searchTag:mH,binSearch:LW,getTable:function(A){var Q=this.font.tables[this.tableName];if(!Q&&A)Q=this.font.tables[this.tableName]=this.createDefaultTable();return Q},getScriptNames:function(){var A=this.getTable();if(!A)return[];return A.scripts.map(function(Q){return Q.tag})},getDefaultScriptName:function(){var A=this.getTable();if(!A)return;var Q=!1;for(var E=0;E<A.scripts.length;E++){var B=A.scripts[E].tag;if(B==="DFLT")return B;if(B==="latn")Q=!0}if(Q)return"latn"},getScriptTable:function(A,Q){var E=this.getTable(Q);if(E){A=A||"DFLT";var B=E.scripts,I=mH(E.scripts,A);if(I>=0)return B[I].script;else if(Q){var C={tag:A,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return B.splice(-1-I,0,C),C.script}}},getLangSysTable:function(A,Q,E){var B=this.getScriptTable(A,E);if(B){if(!Q||Q==="dflt"||Q==="DFLT")return B.defaultLangSys;var I=mH(B.langSysRecords,Q);if(I>=0)return B.langSysRecords[I].langSys;else if(E){var C={tag:Q,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return B.langSysRecords.splice(-1-I,0,C),C.langSys}}},getFeatureTable:function(A,Q,E,B){var I=this.getLangSysTable(A,Q,B);if(I){var C,K=I.featureIndexes,J=this.font.tables[this.tableName].features;for(var U=0;U<K.length;U++)if(C=J[K[U]],C.tag===E)return C.feature;if(B){var Y=J.length;return W0.assert(Y===0||E>=J[Y-1].tag,"Features must be added in alphabetical order."),C={tag:E,feature:{params:0,lookupListIndexes:[]}},J.push(C),K.push(Y),C.feature}}},getLookupTables:function(A,Q,E,B,I){var C=this.getFeatureTable(A,Q,E,I),K=[];if(C){var J,U=C.lookupListIndexes,Y=this.font.tables[this.tableName].lookups;for(var H=0;H<U.length;H++)if(J=Y[U[H]],J.lookupType===B)K.push(J);if(K.length===0&&I){J={lookupType:B,lookupFlag:0,subtables:[],markFilteringSet:void 0};var R=Y.length;return Y.push(J),U.push(R),[J]}}return K},getGlyphClass:function(A,Q){switch(A.format){case 1:if(A.startGlyph<=Q&&Q<A.startGlyph+A.classes.length)return A.classes[Q-A.startGlyph];return 0;case 2:var E=qW(A.ranges,Q);return E?E.classId:0}},getCoverageIndex:function(A,Q){switch(A.format){case 1:var E=LW(A.glyphs,Q);return E>=0?E:-1;case 2:var B=qW(A.ranges,Q);return B?B.index+Q-B.start:-1}},expandCoverage:function(A){if(A.format===1)return A.glyphs;else{var Q=[],E=A.ranges;for(var B=0;B<E.length;B++){var I=E[B],C=I.start,K=I.end;for(var J=C;J<=K;J++)Q.push(J)}return Q}}};function WK(A){GK.call(this,A,"gpos")}WK.prototype=GK.prototype;WK.prototype.init=function(){var A=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(A)};WK.prototype.getKerningValue=function(A,Q,E){for(var B=0;B<A.length;B++){var I=A[B].subtables;for(var C=0;C<I.length;C++){var K=I[C],J=this.getCoverageIndex(K.coverage,Q);if(J<0)continue;switch(K.posFormat){case 1:var U=K.pairSets[J];for(var Y=0;Y<U.length;Y++){var H=U[Y];if(H.secondGlyph===E)return H.value1&&H.value1.xAdvance||0}break;case 2:var R=this.getGlyphClass(K.classDef1,Q),O=this.getGlyphClass(K.classDef2,E),N=K.classRecords[R][O];return N.value1&&N.value1.xAdvance||0}}}return 0};WK.prototype.getKerningTables=function(A,Q){if(this.font.tables.gpos)return this.getLookupTables(A,Q,"kern",2)};function uE(A){GK.call(this,A,"gsub")}function X2(A,Q){var E=A.length;if(E!==Q.length)return!1;for(var B=0;B<E;B++)if(A[B]!==Q[B])return!1;return!0}function K7(A,Q,E){var B=A.subtables;for(var I=0;I<B.length;I++){var C=B[I];if(C.substFormat===Q)return C}if(E)return B.push(E),E;return}uE.prototype=GK.prototype;uE.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};uE.prototype.getSingle=function(A,Q,E){var B=[],I=this.getLookupTables(Q,E,A,1);for(var C=0;C<I.length;C++){var K=I[C].subtables;for(var J=0;J<K.length;J++){var U=K[J],Y=this.expandCoverage(U.coverage),H=void 0;if(U.substFormat===1){var R=U.deltaGlyphId;for(H=0;H<Y.length;H++){var O=Y[H];B.push({sub:O,by:O+R})}}else{var N=U.substitute;for(H=0;H<Y.length;H++)B.push({sub:Y[H],by:N[H]})}}}return B};uE.prototype.getMultiple=function(A,Q,E){var B=[],I=this.getLookupTables(Q,E,A,2);for(var C=0;C<I.length;C++){var K=I[C].subtables;for(var J=0;J<K.length;J++){var U=K[J],Y=this.expandCoverage(U.coverage),H=void 0;for(H=0;H<Y.length;H++){var R=Y[H],O=U.sequences[H];B.push({sub:R,by:O})}}}return B};uE.prototype.getAlternates=function(A,Q,E){var B=[],I=this.getLookupTables(Q,E,A,3);for(var C=0;C<I.length;C++){var K=I[C].subtables;for(var J=0;J<K.length;J++){var U=K[J],Y=this.expandCoverage(U.coverage),H=U.alternateSets;for(var R=0;R<Y.length;R++)B.push({sub:Y[R],by:H[R]})}}return B};uE.prototype.getLigatures=function(A,Q,E){var B=[],I=this.getLookupTables(Q,E,A,4);for(var C=0;C<I.length;C++){var K=I[C].subtables;for(var J=0;J<K.length;J++){var U=K[J],Y=this.expandCoverage(U.coverage),H=U.ligatureSets;for(var R=0;R<Y.length;R++){var O=Y[R],N=H[R];for(var $=0;$<N.length;$++){var L=N[$];B.push({sub:[O].concat(L.components),by:L.ligGlyph})}}}}return B};uE.prototype.addSingle=function(A,Q,E,B){var I=this.getLookupTables(E,B,A,1,!0)[0],C=K7(I,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});W0.assert(C.coverage.format===1,"Single: unable to modify coverage table format "+C.coverage.format);var K=Q.sub,J=this.binSearch(C.coverage.glyphs,K);if(J<0)J=-1-J,C.coverage.glyphs.splice(J,0,K),C.substitute.splice(J,0,0);C.substitute[J]=Q.by};uE.prototype.addMultiple=function(A,Q,E,B){W0.assert(Q.by instanceof Array&&Q.by.length>1,'Multiple: "by" must be an array of two or more ids');var I=this.getLookupTables(E,B,A,2,!0)[0],C=K7(I,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});W0.assert(C.coverage.format===1,"Multiple: unable to modify coverage table format "+C.coverage.format);var K=Q.sub,J=this.binSearch(C.coverage.glyphs,K);if(J<0)J=-1-J,C.coverage.glyphs.splice(J,0,K),C.sequences.splice(J,0,0);C.sequences[J]=Q.by};uE.prototype.addAlternate=function(A,Q,E,B){var I=this.getLookupTables(E,B,A,3,!0)[0],C=K7(I,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});W0.assert(C.coverage.format===1,"Alternate: unable to modify coverage table format "+C.coverage.format);var K=Q.sub,J=this.binSearch(C.coverage.glyphs,K);if(J<0)J=-1-J,C.coverage.glyphs.splice(J,0,K),C.alternateSets.splice(J,0,0);C.alternateSets[J]=Q.by};uE.prototype.addLigature=function(A,Q,E,B){var I=this.getLookupTables(E,B,A,4,!0)[0],C=I.subtables[0];if(!C)C={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},I.subtables[0]=C;W0.assert(C.coverage.format===1,"Ligature: unable to modify coverage table format "+C.coverage.format);var K=Q.sub[0],J=Q.sub.slice(1),U={ligGlyph:Q.by,components:J},Y=this.binSearch(C.coverage.glyphs,K);if(Y>=0){var H=C.ligatureSets[Y];for(var R=0;R<H.length;R++)if(X2(H[R].components,J))return;H.push(U)}else Y=-1-Y,C.coverage.glyphs.splice(Y,0,K),C.ligatureSets.splice(Y,0,[U])};uE.prototype.getFeature=function(A,Q,E){if(/ss\d\d/.test(A))return this.getSingle(A,Q,E);switch(A){case"aalt":case"salt":return this.getSingle(A,Q,E).concat(this.getAlternates(A,Q,E));case"dlig":case"liga":case"rlig":return this.getLigatures(A,Q,E);case"ccmp":return this.getMultiple(A,Q,E).concat(this.getLigatures(A,Q,E));case"stch":return this.getMultiple(A,Q,E)}return};uE.prototype.add=function(A,Q,E,B){if(/ss\d\d/.test(A))return this.addSingle(A,Q,E,B);switch(A){case"aalt":case"salt":if(typeof Q.by==="number")return this.addSingle(A,Q,E,B);return this.addAlternate(A,Q,E,B);case"dlig":case"liga":case"rlig":return this.addLigature(A,Q,E,B);case"ccmp":if(Q.by instanceof Array)return this.addMultiple(A,Q,E,B);return this.addLigature(A,Q,E,B)}return};function OK(A,Q){if(!A)throw Q}function FW(A,Q,E,B,I){var C;if((Q&B)>0){if(C=A.parseByte(),(Q&I)===0)C=-C;C=E+C}else if((Q&I)>0)C=E;else C=E+A.parseShort();return C}function KX(A,Q,E){var B=new z0.Parser(Q,E);A.numberOfContours=B.parseShort(),A._xMin=B.parseShort(),A._yMin=B.parseShort(),A._xMax=B.parseShort(),A._yMax=B.parseShort();var I,C;if(A.numberOfContours>0){var K=A.endPointIndices=[];for(var J=0;J<A.numberOfContours;J+=1)K.push(B.parseUShort());A.instructionLength=B.parseUShort(),A.instructions=[];for(var U=0;U<A.instructionLength;U+=1)A.instructions.push(B.parseByte());var Y=K[K.length-1]+1;I=[];for(var H=0;H<Y;H+=1)if(C=B.parseByte(),I.push(C),(C&8)>0){var R=B.parseByte();for(var O=0;O<R;O+=1)I.push(C),H+=1}if(W0.argument(I.length===Y,"Bad flags."),K.length>0){var N=[],$;if(Y>0){for(var L=0;L<Y;L+=1)C=I[L],$={},$.onCurve=!!(C&1),$.lastPointOfContour=K.indexOf(L)>=0,N.push($);var W=0;for(var Z=0;Z<Y;Z+=1)C=I[Z],$=N[Z],$.x=FW(B,C,W,2,16),W=$.x;var G=0;for(var X=0;X<Y;X+=1)C=I[X],$=N[X],$.y=FW(B,C,G,4,32),G=$.y}A.points=N}else A.points=[]}else if(A.numberOfContours===0)A.points=[];else{A.isComposite=!0,A.points=[],A.components=[];var q=!0;while(q){I=B.parseUShort();var M={glyphIndex:B.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};if((I&1)>0)if((I&2)>0)M.dx=B.parseShort(),M.dy=B.parseShort();else M.matchedPoints=[B.parseUShort(),B.parseUShort()];else if((I&2)>0)M.dx=B.parseChar(),M.dy=B.parseChar();else M.matchedPoints=[B.parseByte(),B.parseByte()];if((I&8)>0)M.xScale=M.yScale=B.parseF2Dot14();else if((I&64)>0)M.xScale=B.parseF2Dot14(),M.yScale=B.parseF2Dot14();else if((I&128)>0)M.xScale=B.parseF2Dot14(),M.scale01=B.parseF2Dot14(),M.scale10=B.parseF2Dot14(),M.yScale=B.parseF2Dot14();A.components.push(M),q=!!(I&32)}if(I&256){A.instructionLength=B.parseUShort(),A.instructions=[];for(var F=0;F<A.instructionLength;F+=1)A.instructions.push(B.parseByte())}}}function cH(A,Q){var E=[];for(var B=0;B<A.length;B+=1){var I=A[B],C={x:Q.xScale*I.x+Q.scale01*I.y+Q.dx,y:Q.scale10*I.x+Q.yScale*I.y+Q.dy,onCurve:I.onCurve,lastPointOfContour:I.lastPointOfContour};E.push(C)}return E}function $2(A){var Q=[],E=[];for(var B=0;B<A.length;B+=1){var I=A[B];if(E.push(I),I.lastPointOfContour)Q.push(E),E=[]}return W0.argument(E.length===0,"There are still points left in the current contour."),Q}function JX(A){var Q=new mQ;if(!A)return Q;var E=$2(A);for(var B=0;B<E.length;++B){var I=E[B],C=null,K=I[I.length-1],J=I[0];if(K.onCurve)Q.moveTo(K.x,K.y);else if(J.onCurve)Q.moveTo(J.x,J.y);else{var U={x:(K.x+J.x)*0.5,y:(K.y+J.y)*0.5};Q.moveTo(U.x,U.y)}for(var Y=0;Y<I.length;++Y)if(C=K,K=J,J=I[(Y+1)%I.length],K.onCurve)Q.lineTo(K.x,K.y);else{var H=C,R=J;if(!C.onCurve)H={x:(K.x+C.x)*0.5,y:(K.y+C.y)*0.5};if(!J.onCurve)R={x:(K.x+J.x)*0.5,y:(K.y+J.y)*0.5};Q.quadraticCurveTo(K.x,K.y,R.x,R.y)}Q.closePath()}return Q}function UX(A,Q){if(Q.isComposite)for(var E=0;E<Q.components.length;E+=1){var B=Q.components[E],I=A.get(B.glyphIndex);if(I.getPath(),I.points){var C=void 0;if(B.matchedPoints===void 0)C=cH(I.points,B);else{if(B.matchedPoints[0]>Q.points.length-1||B.matchedPoints[1]>I.points.length-1)throw Error("Matched points out of range in "+Q.name);var K=Q.points[B.matchedPoints[0]],J=I.points[B.matchedPoints[1]],U={xScale:B.xScale,scale01:B.scale01,scale10:B.scale10,yScale:B.yScale,dx:0,dy:0};J=cH([J],U)[0],U.dx=K.x-J.x,U.dy=K.y-J.y,C=cH(I.points,U)}Q.points=Q.points.concat(C)}}return JX(Q.points)}function L2(A,Q,E,B){var I=new mB.GlyphSet(B);for(var C=0;C<E.length-1;C+=1){var K=E[C],J=E[C+1];if(K!==J)I.push(C,mB.ttfGlyphLoader(B,C,KX,A,Q+K,UX));else I.push(C,mB.glyphLoader(B,C))}return I}function q2(A,Q,E,B){var I=new mB.GlyphSet(B);return B._push=function(C){var K=E[C],J=E[C+1];if(K!==J)I.push(C,mB.ttfGlyphLoader(B,C,KX,A,Q+K,UX));else I.push(C,mB.glyphLoader(B,C))},I}function F2(A,Q,E,B,I){if(I.lowMemory)return q2(A,Q,E,B);else return L2(A,Q,E,B)}var D2={getPath:JX,parse:F2},YX,s1,OX,Q7;function HX(A){this.font=A,this.getCommands=function(Q){return D2.getPath(Q).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function M2(A){return A}function ZX(A){return Math.sign(A)*Math.round(Math.abs(A))}function w2(A){return Math.sign(A)*Math.round(Math.abs(A*2))/2}function _2(A){return Math.sign(A)*(Math.round(Math.abs(A)+0.5)-0.5)}function k2(A){return Math.sign(A)*Math.ceil(Math.abs(A))}function S2(A){return Math.sign(A)*Math.floor(Math.abs(A))}var RX=function(A){var Q=this.srPeriod,E=this.srPhase,B=this.srThreshold,I=1;if(A<0)A=-A,I=-1;if(A+=B-E,A=Math.trunc(A/Q)*Q,A+=E,A<0)return E*I;return A*I},pB={x:1,y:0,axis:"x",distance:function(A,Q,E,B){return(E?A.xo:A.x)-(B?Q.xo:Q.x)},interpolate:function(A,Q,E,B){var I,C,K,J,U,Y,H;if(!B||B===this){if(I=A.xo-Q.xo,C=A.xo-E.xo,U=Q.x-Q.xo,Y=E.x-E.xo,K=Math.abs(I),J=Math.abs(C),H=K+J,H===0){A.x=A.xo+(U+Y)/2;return}A.x=A.xo+(U*J+Y*K)/H;return}if(I=B.distance(A,Q,!0,!0),C=B.distance(A,E,!0,!0),U=B.distance(Q,Q,!1,!0),Y=B.distance(E,E,!1,!0),K=Math.abs(I),J=Math.abs(C),H=K+J,H===0){pB.setRelative(A,A,(U+Y)/2,B,!0);return}pB.setRelative(A,A,(U*J+Y*K)/H,B,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(A,Q,E,B,I){if(!B||B===this){A.x=(I?Q.xo:Q.x)+E;return}var C=I?Q.xo:Q.x,K=I?Q.yo:Q.y,J=C+E*B.x,U=K+E*B.y;A.x=J+(A.y-U)/B.normalSlope},slope:0,touch:function(A){A.xTouched=!0},touched:function(A){return A.xTouched},untouch:function(A){A.xTouched=!1}},RI={x:0,y:1,axis:"y",distance:function(A,Q,E,B){return(E?A.yo:A.y)-(B?Q.yo:Q.y)},interpolate:function(A,Q,E,B){var I,C,K,J,U,Y,H;if(!B||B===this){if(I=A.yo-Q.yo,C=A.yo-E.yo,U=Q.y-Q.yo,Y=E.y-E.yo,K=Math.abs(I),J=Math.abs(C),H=K+J,H===0){A.y=A.yo+(U+Y)/2;return}A.y=A.yo+(U*J+Y*K)/H;return}if(I=B.distance(A,Q,!0,!0),C=B.distance(A,E,!0,!0),U=B.distance(Q,Q,!1,!0),Y=B.distance(E,E,!1,!0),K=Math.abs(I),J=Math.abs(C),H=K+J,H===0){RI.setRelative(A,A,(U+Y)/2,B,!0);return}RI.setRelative(A,A,(U*J+Y*K)/H,B,!0)},normalSlope:0,setRelative:function(A,Q,E,B,I){if(!B||B===this){A.y=(I?Q.yo:Q.y)+E;return}var C=I?Q.xo:Q.x,K=I?Q.yo:Q.y,J=C+E*B.x,U=K+E*B.y;A.y=U+B.normalSlope*(A.x-J)},slope:Number.POSITIVE_INFINITY,touch:function(A){A.yTouched=!0},touched:function(A){return A.yTouched},untouch:function(A){A.yTouched=!1}};Object.freeze(pB);Object.freeze(RI);function XK(A,Q){this.x=A,this.y=Q,this.axis=void 0,this.slope=Q/A,this.normalSlope=-A/Q,Object.freeze(this)}XK.prototype.distance=function(A,Q,E,B){return this.x*pB.distance(A,Q,E,B)+this.y*RI.distance(A,Q,E,B)};XK.prototype.interpolate=function(A,Q,E,B){var I,C,K,J,U,Y,H;if(K=B.distance(A,Q,!0,!0),J=B.distance(A,E,!0,!0),I=B.distance(Q,Q,!1,!0),C=B.distance(E,E,!1,!0),U=Math.abs(K),Y=Math.abs(J),H=U+Y,H===0){this.setRelative(A,A,(I+C)/2,B,!0);return}this.setRelative(A,A,(I*Y+C*U)/H,B,!0)};XK.prototype.setRelative=function(A,Q,E,B,I){B=B||this;var C=I?Q.xo:Q.x,K=I?Q.yo:Q.y,J=C+E*B.x,U=K+E*B.y,Y=B.normalSlope,H=this.slope,R=A.x,O=A.y;A.x=(H*R-Y*J+U-O)/(H-Y),A.y=H*(A.x-R)+O};XK.prototype.touch=function(A){A.xTouched=!0,A.yTouched=!0};function $K(A,Q){var E=Math.sqrt(A*A+Q*Q);if(A/=E,Q/=E,A===1&&Q===0)return pB;else if(A===0&&Q===1)return RI;else return new XK(A,Q)}function NI(A,Q,E,B){this.x=this.xo=Math.round(A*64)/64,this.y=this.yo=Math.round(Q*64)/64,this.lastPointOfContour=E,this.onCurve=B,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}NI.prototype.nextTouched=function(A){var Q=this.nextPointOnContour;while(!A.touched(Q)&&Q!==this)Q=Q.nextPointOnContour;return Q};NI.prototype.prevTouched=function(A){var Q=this.prevPointOnContour;while(!A.touched(Q)&&Q!==this)Q=Q.prevPointOnContour;return Q};var NK=Object.freeze(new NI(0,0)),T2={cvCutIn:1.0625,deltaBase:9,deltaShift:0.125,loop:1,minDis:1,autoFlip:!0};function cI(A,Q){switch(this.env=A,this.stack=[],this.prog=Q,A){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=pB,this.round=ZX}}HX.prototype.exec=function(A,Q){if(typeof Q!=="number")throw new Error("Point size is not a number!");if(this._errorState>2)return;var E=this.font,B=this._prepState;if(!B||B.ppem!==Q){var I=this._fpgmState;if(!I){if(cI.prototype=T2,I=this._fpgmState=new cI("fpgm",E.tables.fpgm),I.funcs=[],I.font=E,Ex.DEBUG)console.log("---EXEC FPGM---"),I.step=-1;try{s1(I)}catch(Y){console.log("Hinting error in FPGM:"+Y),this._errorState=3;return}}cI.prototype=I,B=this._prepState=new cI("prep",E.tables.prep),B.ppem=Q;var C=E.tables.cvt;if(C){var K=B.cvt=new Array(C.length),J=Q/E.unitsPerEm;for(var U=0;U<C.length;U++)K[U]=C[U]*J}else B.cvt=[];if(Ex.DEBUG)console.log("---EXEC PREP---"),B.step=-1;try{s1(B)}catch(Y){if(this._errorState<2)console.log("Hinting error in PREP:"+Y);this._errorState=2}}if(this._errorState>1)return;try{return OX(A,B)}catch(Y){if(this._errorState<1)console.log("Hinting error:"+Y),console.log("Note: further hinting errors are silenced");this._errorState=1;return}};OX=function(A,Q){var E=Q.ppem/Q.font.unitsPerEm,B=E,I=A.components,C,K,J;if(cI.prototype=Q,!I){if(J=new cI("glyf",A.instructions),Ex.DEBUG)console.log("---EXEC GLYPH---"),J.step=-1;Q7(A,J,E,B),K=J.gZone}else{var U=Q.font;K=[],C=[];for(var Y=0;Y<I.length;Y++){var H=I[Y],R=U.glyphs.get(H.glyphIndex);if(J=new cI("glyf",R.instructions),Ex.DEBUG)console.log("---EXEC COMP "+Y+"---"),J.step=-1;Q7(R,J,E,B);var O=Math.round(H.dx*E),N=Math.round(H.dy*B),$=J.gZone,L=J.contours;for(var W=0;W<$.length;W++){var Z=$[W];Z.xTouched=Z.yTouched=!1,Z.xo=Z.x=Z.x+O,Z.yo=Z.y=Z.y+N}var G=K.length;K.push.apply(K,$);for(var X=0;X<L.length;X++)C.push(L[X]+G)}if(A.instructions&&!J.inhibitGridFit){if(J=new cI("glyf",A.instructions),J.gZone=J.z0=J.z1=J.z2=K,J.contours=C,K.push(new NI(0,0),new NI(Math.round(A.advanceWidth*E),0)),Ex.DEBUG)console.log("---EXEC COMPOSITE---"),J.step=-1;s1(J),K.length-=2}}return K};Q7=function(A,Q,E,B){var I=A.points||[],C=I.length,K=Q.gZone=Q.z0=Q.z1=Q.z2=[],J=Q.contours=[],U;for(var Y=0;Y<C;Y++)U=I[Y],K[Y]=new NI(U.x*E,U.y*B,U.lastPointOfContour,U.onCurve);var H,R;for(var O=0;O<C;O++){if(U=K[O],!H)H=U,J.push(O);if(U.lastPointOfContour)U.nextPointOnContour=H,H.prevPointOnContour=U,H=void 0;else R=K[O+1],U.nextPointOnContour=R,R.prevPointOnContour=U}if(Q.inhibitGridFit)return;if(Ex.DEBUG){console.log("PROCESSING GLYPH",Q.stack);for(var N=0;N<C;N++)console.log(N,K[N].x,K[N].y)}if(K.push(new NI(0,0),new NI(Math.round(A.advanceWidth*E),0)),s1(Q),K.length-=2,Ex.DEBUG){console.log("FINISHED GLYPH",Q.stack);for(var $=0;$<C;$++)console.log($,K[$].x,K[$].y)}};s1=function(A){var Q=A.prog;if(!Q)return;var E=Q.length,B;for(A.ip=0;A.ip<E;A.ip++){if(Ex.DEBUG)A.step++;if(B=YX[Q[A.ip]],!B)throw new Error("unknown instruction: 0x"+Number(Q[A.ip]).toString(16));B(A)}};function _U(A){var Q=A.tZone=new Array(A.gZone.length);for(var E=0;E<Q.length;E++)Q[E]=new NI(0,0)}function NX(A,Q){var{prog:E,ip:B}=A,I=1,C;do if(C=E[++B],C===88)I++;else if(C===89)I--;else if(C===64)B+=E[B+1]+1;else if(C===65)B+=2*E[B+1]+1;else if(C>=176&&C<=183)B+=C-176+1;else if(C>=184&&C<=191)B+=(C-184+1)*2;else if(Q&&I===1&&C===27)break;while(I>0);A.ip=B}function DW(A,Q){if(Ex.DEBUG)console.log(Q.step,"SVTCA["+A.axis+"]");Q.fv=Q.pv=Q.dpv=A}function MW(A,Q){if(Ex.DEBUG)console.log(Q.step,"SPVTCA["+A.axis+"]");Q.pv=Q.dpv=A}function wW(A,Q){if(Ex.DEBUG)console.log(Q.step,"SFVTCA["+A.axis+"]");Q.fv=A}function _W(A,Q){var E=Q.stack,B=E.pop(),I=E.pop(),C=Q.z2[B],K=Q.z1[I];if(Ex.DEBUG)console.log("SPVTL["+A+"]",B,I);var J,U;if(!A)J=K.x-C.x,U=K.y-C.y;else J=C.y-K.y,U=K.x-C.x;Q.pv=Q.dpv=$K(J,U)}function kW(A,Q){var E=Q.stack,B=E.pop(),I=E.pop(),C=Q.z2[B],K=Q.z1[I];if(Ex.DEBUG)console.log("SFVTL["+A+"]",B,I);var J,U;if(!A)J=K.x-C.x,U=K.y-C.y;else J=C.y-K.y,U=K.x-C.x;Q.fv=$K(J,U)}function z2(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"SPVFS[]",E,B);A.pv=A.dpv=$K(B,E)}function P2(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"SPVFS[]",E,B);A.fv=$K(B,E)}function V2(A){var{stack:Q,pv:E}=A;if(Ex.DEBUG)console.log(A.step,"GPV[]");Q.push(E.x*16384),Q.push(E.y*16384)}function j2(A){var{stack:Q,fv:E}=A;if(Ex.DEBUG)console.log(A.step,"GFV[]");Q.push(E.x*16384),Q.push(E.y*16384)}function v2(A){if(A.fv=A.pv,Ex.DEBUG)console.log(A.step,"SFVTPV[]")}function h2(A){var Q=A.stack,E=Q.pop(),B=Q.pop(),I=Q.pop(),C=Q.pop(),K=Q.pop(),J=A.z0,U=A.z1,Y=J[E],H=J[B],R=U[I],O=U[C],N=A.z2[K];if(Ex.DEBUG)console.log("ISECT[], ",E,B,I,C,K);var{x:$,y:L}=Y,W=H.x,Z=H.y,G=R.x,X=R.y,q=O.x,M=O.y,F=($-W)*(X-M)-(L-Z)*(G-q),D=$*Z-L*W,_=G*M-X*q;N.x=(D*(G-q)-_*($-W))/F,N.y=(D*(X-M)-_*(L-Z))/F}function y2(A){if(A.rp0=A.stack.pop(),Ex.DEBUG)console.log(A.step,"SRP0[]",A.rp0)}function g2(A){if(A.rp1=A.stack.pop(),Ex.DEBUG)console.log(A.step,"SRP1[]",A.rp1)}function x2(A){if(A.rp2=A.stack.pop(),Ex.DEBUG)console.log(A.step,"SRP2[]",A.rp2)}function b2(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"SZP0[]",Q);switch(A.zp0=Q,Q){case 0:if(!A.tZone)_U(A);A.z0=A.tZone;break;case 1:A.z0=A.gZone;break;default:throw new Error("Invalid zone pointer")}}function f2(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"SZP1[]",Q);switch(A.zp1=Q,Q){case 0:if(!A.tZone)_U(A);A.z1=A.tZone;break;case 1:A.z1=A.gZone;break;default:throw new Error("Invalid zone pointer")}}function u2(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"SZP2[]",Q);switch(A.zp2=Q,Q){case 0:if(!A.tZone)_U(A);A.z2=A.tZone;break;case 1:A.z2=A.gZone;break;default:throw new Error("Invalid zone pointer")}}function p2(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"SZPS[]",Q);switch(A.zp0=A.zp1=A.zp2=Q,Q){case 0:if(!A.tZone)_U(A);A.z0=A.z1=A.z2=A.tZone;break;case 1:A.z0=A.z1=A.z2=A.gZone;break;default:throw new Error("Invalid zone pointer")}}function m2(A){if(A.loop=A.stack.pop(),Ex.DEBUG)console.log(A.step,"SLOOP[]",A.loop)}function c2(A){if(Ex.DEBUG)console.log(A.step,"RTG[]");A.round=ZX}function l2(A){if(Ex.DEBUG)console.log(A.step,"RTHG[]");A.round=_2}function d2(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"SMD[]",Q);A.minDis=Q/64}function n2(A){if(Ex.DEBUG)console.log(A.step,"ELSE[]");NX(A,!1)}function s2(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"JMPR[]",Q);A.ip+=Q-1}function i2(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"SCVTCI[]",Q);A.cvCutIn=Q/64}function o2(A){var Q=A.stack;if(Ex.DEBUG)console.log(A.step,"DUP[]");Q.push(Q[Q.length-1])}function lH(A){if(Ex.DEBUG)console.log(A.step,"POP[]");A.stack.pop()}function r2(A){if(Ex.DEBUG)console.log(A.step,"CLEAR[]");A.stack.length=0}function a2(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"SWAP[]");Q.push(E),Q.push(B)}function t2(A){var Q=A.stack;if(Ex.DEBUG)console.log(A.step,"DEPTH[]");Q.push(Q.length)}function e2(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"LOOPCALL[]",E,B);var{ip:I,prog:C}=A;A.prog=A.funcs[E];for(var K=0;K<B;K++)if(s1(A),Ex.DEBUG)console.log(++A.step,K+1<B?"next loopcall":"done loopcall",K);A.ip=I,A.prog=C}function A4(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"CALL[]",Q);var{ip:E,prog:B}=A;if(A.prog=A.funcs[Q],s1(A),A.ip=E,A.prog=B,Ex.DEBUG)console.log(++A.step,"returning from",Q)}function Q4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"CINDEX[]",E);Q.push(Q[Q.length-E])}function E4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"MINDEX[]",E);Q.push(Q.splice(Q.length-E,1)[0])}function B4(A){if(A.env!=="fpgm")throw new Error("FDEF not allowed here");var{stack:Q,prog:E,ip:B}=A,I=Q.pop(),C=B;if(Ex.DEBUG)console.log(A.step,"FDEF[]",I);while(E[++B]!==45);A.ip=B,A.funcs[I]=E.slice(C+1,B)}function SW(A,Q){var E=Q.stack.pop(),B=Q.z0[E],I=Q.fv,C=Q.pv;if(Ex.DEBUG)console.log(Q.step,"MDAP["+A+"]",E);var K=C.distance(B,NK);if(A)K=Q.round(K);I.setRelative(B,NK,K,C),I.touch(B),Q.rp0=Q.rp1=E}function TW(A,Q){var E=Q.z2,B=E.length-2,I,C,K;if(Ex.DEBUG)console.log(Q.step,"IUP["+A.axis+"]");for(var J=0;J<B;J++){if(I=E[J],A.touched(I))continue;if(C=I.prevTouched(A),C===I)continue;if(K=I.nextTouched(A),C===K)A.setRelative(I,I,A.distance(C,C,!1,!0),A,!0);A.interpolate(I,C,K,A)}}function zW(A,Q){var E=Q.stack,B=A?Q.rp1:Q.rp2,I=(A?Q.z0:Q.z1)[B],C=Q.fv,K=Q.pv,J=Q.loop,U=Q.z2;while(J--){var Y=E.pop(),H=U[Y],R=K.distance(I,I,!1,!0);if(C.setRelative(H,H,R,K),C.touch(H),Ex.DEBUG)console.log(Q.step,(Q.loop>1?"loop "+(Q.loop-J)+": ":"")+"SHP["+(A?"rp1":"rp2")+"]",Y)}Q.loop=1}function PW(A,Q){var E=Q.stack,B=A?Q.rp1:Q.rp2,I=(A?Q.z0:Q.z1)[B],C=Q.fv,K=Q.pv,J=E.pop(),U=Q.z2[Q.contours[J]],Y=U;if(Ex.DEBUG)console.log(Q.step,"SHC["+A+"]",J);var H=K.distance(I,I,!1,!0);do{if(Y!==I)C.setRelative(Y,Y,H,K);Y=Y.nextPointOnContour}while(Y!==U)}function VW(A,Q){var E=Q.stack,B=A?Q.rp1:Q.rp2,I=(A?Q.z0:Q.z1)[B],C=Q.fv,K=Q.pv,J=E.pop();if(Ex.DEBUG)console.log(Q.step,"SHZ["+A+"]",J);var U;switch(J){case 0:U=Q.tZone;break;case 1:U=Q.gZone;break;default:throw new Error("Invalid zone")}var Y,H=K.distance(I,I,!1,!0),R=U.length-2;for(var O=0;O<R;O++)Y=U[O],C.setRelative(Y,Y,H,K)}function I4(A){var{stack:Q,loop:E,fv:B}=A,I=Q.pop()/64,C=A.z2;while(E--){var K=Q.pop(),J=C[K];if(Ex.DEBUG)console.log(A.step,(A.loop>1?"loop "+(A.loop-E)+": ":"")+"SHPIX[]",K,I);B.setRelative(J,J,I),B.touch(J)}A.loop=1}function C4(A){var{stack:Q,rp1:E,rp2:B,loop:I}=A,C=A.z0[E],K=A.z1[B],J=A.fv,U=A.dpv,Y=A.z2;while(I--){var H=Q.pop(),R=Y[H];if(Ex.DEBUG)console.log(A.step,(A.loop>1?"loop "+(A.loop-I)+": ":"")+"IP[]",H,E,"<->",B);J.interpolate(R,C,K,U),J.touch(R)}A.loop=1}function jW(A,Q){var E=Q.stack,B=E.pop()/64,I=E.pop(),C=Q.z1[I],K=Q.z0[Q.rp0],J=Q.fv,U=Q.pv;if(J.setRelative(C,K,B,U),J.touch(C),Ex.DEBUG)console.log(Q.step,"MSIRP["+A+"]",B,I);if(Q.rp1=Q.rp0,Q.rp2=I,A)Q.rp0=I}function K4(A){var{stack:Q,rp0:E}=A,B=A.z0[E],I=A.loop,C=A.fv,K=A.pv,J=A.z1;while(I--){var U=Q.pop(),Y=J[U];if(Ex.DEBUG)console.log(A.step,(A.loop>1?"loop "+(A.loop-I)+": ":"")+"ALIGNRP[]",U);C.setRelative(Y,B,0,K),C.touch(Y)}A.loop=1}function J4(A){if(Ex.DEBUG)console.log(A.step,"RTDG[]");A.round=w2}function vW(A,Q){var E=Q.stack,B=E.pop(),I=E.pop(),C=Q.z0[I],K=Q.fv,J=Q.pv,U=Q.cvt[B];if(Ex.DEBUG)console.log(Q.step,"MIAP["+A+"]",B,"(",U,")",I);var Y=J.distance(C,NK);if(A){if(Math.abs(Y-U)<Q.cvCutIn)Y=U;Y=Q.round(Y)}if(K.setRelative(C,NK,Y,J),Q.zp0===0)C.xo=C.x,C.yo=C.y;K.touch(C),Q.rp0=Q.rp1=I}function U4(A){var{prog:Q,ip:E,stack:B}=A,I=Q[++E];if(Ex.DEBUG)console.log(A.step,"NPUSHB[]",I);for(var C=0;C<I;C++)B.push(Q[++E]);A.ip=E}function Y4(A){var{ip:Q,prog:E,stack:B}=A,I=E[++Q];if(Ex.DEBUG)console.log(A.step,"NPUSHW[]",I);for(var C=0;C<I;C++){var K=E[++Q]<<8|E[++Q];if(K&32768)K=-((K^65535)+1);B.push(K)}A.ip=Q}function O4(A){var{stack:Q,store:E}=A;if(!E)E=A.store=[];var B=Q.pop(),I=Q.pop();if(Ex.DEBUG)console.log(A.step,"WS",B,I);E[I]=B}function H4(A){var{stack:Q,store:E}=A,B=Q.pop();if(Ex.DEBUG)console.log(A.step,"RS",B);var I=E&&E[B]||0;Q.push(I)}function Z4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"WCVTP",E,B);A.cvt[B]=E/64}function R4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"RCVT",E);Q.push(A.cvt[E]*64)}function hW(A,Q){var E=Q.stack,B=E.pop(),I=Q.z2[B];if(Ex.DEBUG)console.log(Q.step,"GC["+A+"]",B);E.push(Q.dpv.distance(I,NK,A,!1)*64)}function yW(A,Q){var E=Q.stack,B=E.pop(),I=E.pop(),C=Q.z1[B],K=Q.z0[I],J=Q.dpv.distance(K,C,A,A);if(Ex.DEBUG)console.log(Q.step,"MD["+A+"]",B,I,"->",J);Q.stack.push(Math.round(J*64))}function N4(A){if(Ex.DEBUG)console.log(A.step,"MPPEM[]");A.stack.push(A.ppem)}function G4(A){if(Ex.DEBUG)console.log(A.step,"FLIPON[]");A.autoFlip=!0}function W4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"LT[]",E,B);Q.push(B<E?1:0)}function X4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"LTEQ[]",E,B);Q.push(B<=E?1:0)}function $4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"GT[]",E,B);Q.push(B>E?1:0)}function L4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"GTEQ[]",E,B);Q.push(B>=E?1:0)}function q4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"EQ[]",E,B);Q.push(E===B?1:0)}function F4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"NEQ[]",E,B);Q.push(E!==B?1:0)}function D4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"ODD[]",E);Q.push(Math.trunc(E)%2?1:0)}function M4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"EVEN[]",E);Q.push(Math.trunc(E)%2?0:1)}function w4(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"IF[]",Q);if(!Q){if(NX(A,!0),Ex.DEBUG)console.log(A.step,"EIF[]")}}function _4(A){if(Ex.DEBUG)console.log(A.step,"EIF[]")}function k4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"AND[]",E,B);Q.push(E&&B?1:0)}function S4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"OR[]",E,B);Q.push(E||B?1:0)}function T4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"NOT[]",E);Q.push(E?0:1)}function dH(A,Q){var E=Q.stack,B=E.pop(),I=Q.fv,C=Q.pv,K=Q.ppem,J=Q.deltaBase+(A-1)*16,U=Q.deltaShift,Y=Q.z0;if(Ex.DEBUG)console.log(Q.step,"DELTAP["+A+"]",B,E);for(var H=0;H<B;H++){var R=E.pop(),O=E.pop(),N=J+((O&240)>>4);if(N!==K)continue;var $=(O&15)-8;if($>=0)$++;if(Ex.DEBUG)console.log(Q.step,"DELTAPFIX",R,"by",$*U);var L=Y[R];I.setRelative(L,L,$*U,C)}}function z4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"SDB[]",E);A.deltaBase=E}function P4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"SDS[]",E);A.deltaShift=Math.pow(0.5,E)}function V4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"ADD[]",E,B);Q.push(B+E)}function j4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"SUB[]",E,B);Q.push(B-E)}function v4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"DIV[]",E,B);Q.push(B*64/E)}function h4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"MUL[]",E,B);Q.push(B*E/64)}function y4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"ABS[]",E);Q.push(Math.abs(E))}function g4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"NEG[]",E);Q.push(-E)}function x4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"FLOOR[]",E);Q.push(Math.floor(E/64)*64)}function b4(A){var Q=A.stack,E=Q.pop();if(Ex.DEBUG)console.log(A.step,"CEILING[]",E);Q.push(Math.ceil(E/64)*64)}function WU(A,Q){var E=Q.stack,B=E.pop();if(Ex.DEBUG)console.log(Q.step,"ROUND[]");E.push(Q.round(B/64)*64)}function f4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"WCVTF[]",E,B);A.cvt[B]=E*A.ppem/A.font.unitsPerEm}function nH(A,Q){var E=Q.stack,B=E.pop(),I=Q.ppem,C=Q.deltaBase+(A-1)*16,K=Q.deltaShift;if(Ex.DEBUG)console.log(Q.step,"DELTAC["+A+"]",B,E);for(var J=0;J<B;J++){var U=E.pop(),Y=E.pop(),H=C+((Y&240)>>4);if(H!==I)continue;var R=(Y&15)-8;if(R>=0)R++;var O=R*K;if(Ex.DEBUG)console.log(Q.step,"DELTACFIX",U,"by",O);Q.cvt[U]+=O}}function u4(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"SROUND[]",Q);A.round=RX;var E;switch(Q&192){case 0:E=0.5;break;case 64:E=1;break;case 128:E=2;break;default:throw new Error("invalid SROUND value")}switch(A.srPeriod=E,Q&48){case 0:A.srPhase=0;break;case 16:A.srPhase=0.25*E;break;case 32:A.srPhase=0.5*E;break;case 48:A.srPhase=0.75*E;break;default:throw new Error("invalid SROUND value")}if(Q&=15,Q===0)A.srThreshold=0;else A.srThreshold=(Q/8-0.5)*E}function p4(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"S45ROUND[]",Q);A.round=RX;var E;switch(Q&192){case 0:E=Math.sqrt(2)/2;break;case 64:E=Math.sqrt(2);break;case 128:E=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(A.srPeriod=E,Q&48){case 0:A.srPhase=0;break;case 16:A.srPhase=0.25*E;break;case 32:A.srPhase=0.5*E;break;case 48:A.srPhase=0.75*E;break;default:throw new Error("invalid S45ROUND value")}if(Q&=15,Q===0)A.srThreshold=0;else A.srThreshold=(Q/8-0.5)*E}function m4(A){if(Ex.DEBUG)console.log(A.step,"ROFF[]");A.round=M2}function c4(A){if(Ex.DEBUG)console.log(A.step,"RUTG[]");A.round=k2}function l4(A){if(Ex.DEBUG)console.log(A.step,"RDTG[]");A.round=S2}function d4(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"SCANCTRL[]",Q)}function gW(A,Q){var E=Q.stack,B=E.pop(),I=E.pop(),C=Q.z2[B],K=Q.z1[I];if(Ex.DEBUG)console.log(Q.step,"SDPVTL["+A+"]",B,I);var J,U;if(!A)J=K.x-C.x,U=K.y-C.y;else J=C.y-K.y,U=K.x-C.x;Q.dpv=$K(J,U)}function n4(A){var Q=A.stack,E=Q.pop(),B=0;if(Ex.DEBUG)console.log(A.step,"GETINFO[]",E);if(E&1)B=35;if(E&32)B|=4096;Q.push(B)}function s4(A){var Q=A.stack,E=Q.pop(),B=Q.pop(),I=Q.pop();if(Ex.DEBUG)console.log(A.step,"ROLL[]");Q.push(B),Q.push(E),Q.push(I)}function i4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"MAX[]",E,B);Q.push(Math.max(B,E))}function o4(A){var Q=A.stack,E=Q.pop(),B=Q.pop();if(Ex.DEBUG)console.log(A.step,"MIN[]",E,B);Q.push(Math.min(B,E))}function r4(A){var Q=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"SCANTYPE[]",Q)}function a4(A){var Q=A.stack.pop(),E=A.stack.pop();if(Ex.DEBUG)console.log(A.step,"INSTCTRL[]",Q,E);switch(Q){case 1:A.inhibitGridFit=!!E;return;case 2:A.ignoreCvt=!!E;return;default:throw new Error("invalid INSTCTRL[] selector")}}function uI(A,Q){var{stack:E,prog:B,ip:I}=Q;if(Ex.DEBUG)console.log(Q.step,"PUSHB["+A+"]");for(var C=0;C<A;C++)E.push(B[++I]);Q.ip=I}function pI(A,Q){var{ip:E,prog:B,stack:I}=Q;if(Ex.DEBUG)console.log(Q.ip,"PUSHW["+A+"]");for(var C=0;C<A;C++){var K=B[++E]<<8|B[++E];if(K&32768)K=-((K^65535)+1);I.push(K)}Q.ip=E}function eA(A,Q,E,B,I,C){var K=C.stack,J=A&&K.pop(),U=K.pop(),Y=C.rp0,H=C.z0[Y],R=C.z1[U],O=C.minDis,N=C.fv,$=C.dpv,L,W,Z,G;if(W=L=$.distance(R,H,!0,!0),Z=W>=0?1:-1,W=Math.abs(W),A){if(G=C.cvt[J],B&&Math.abs(W-G)<C.cvCutIn)W=G}if(E&&W<O)W=O;if(B)W=C.round(W);if(N.setRelative(R,H,Z*W,$),N.touch(R),Ex.DEBUG)console.log(C.step,(A?"MIRP[":"MDRP[")+(Q?"M":"m")+(E?">":"_")+(B?"R":"_")+(I===0?"Gr":I===1?"Bl":I===2?"Wh":"")+"]",A?J+"("+C.cvt[J]+","+G+")":"",U,"(d =",L,"->",Z*W,")");if(C.rp1=C.rp0,C.rp2=U,Q)C.rp0=U}YX=[DW.bind(void 0,RI),DW.bind(void 0,pB),MW.bind(void 0,RI),MW.bind(void 0,pB),wW.bind(void 0,RI),wW.bind(void 0,pB),_W.bind(void 0,0),_W.bind(void 0,1),kW.bind(void 0,0),kW.bind(void 0,1),z2,P2,V2,j2,v2,h2,y2,g2,x2,b2,f2,u2,p2,m2,c2,l2,d2,n2,s2,i2,void 0,void 0,o2,lH,r2,a2,t2,Q4,E4,void 0,void 0,void 0,e2,A4,B4,void 0,SW.bind(void 0,0),SW.bind(void 0,1),TW.bind(void 0,RI),TW.bind(void 0,pB),zW.bind(void 0,0),zW.bind(void 0,1),PW.bind(void 0,0),PW.bind(void 0,1),VW.bind(void 0,0),VW.bind(void 0,1),I4,C4,jW.bind(void 0,0),jW.bind(void 0,1),K4,J4,vW.bind(void 0,0),vW.bind(void 0,1),U4,Y4,O4,H4,Z4,R4,hW.bind(void 0,0),hW.bind(void 0,1),void 0,yW.bind(void 0,0),yW.bind(void 0,1),N4,void 0,G4,void 0,void 0,W4,X4,$4,L4,q4,F4,D4,M4,w4,_4,k4,S4,T4,dH.bind(void 0,1),z4,P4,V4,j4,v4,h4,y4,g4,x4,b4,WU.bind(void 0,0),WU.bind(void 0,1),WU.bind(void 0,2),WU.bind(void 0,3),void 0,void 0,void 0,void 0,f4,dH.bind(void 0,2),dH.bind(void 0,3),nH.bind(void 0,1),nH.bind(void 0,2),nH.bind(void 0,3),u4,p4,void 0,void 0,m4,void 0,c4,l4,lH,lH,void 0,void 0,void 0,void 0,void 0,d4,gW.bind(void 0,0),gW.bind(void 0,1),n4,void 0,s4,i4,o4,r4,a4,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,uI.bind(void 0,1),uI.bind(void 0,2),uI.bind(void 0,3),uI.bind(void 0,4),uI.bind(void 0,5),uI.bind(void 0,6),uI.bind(void 0,7),uI.bind(void 0,8),pI.bind(void 0,1),pI.bind(void 0,2),pI.bind(void 0,3),pI.bind(void 0,4),pI.bind(void 0,5),pI.bind(void 0,6),pI.bind(void 0,7),pI.bind(void 0,8),eA.bind(void 0,0,0,0,0,0),eA.bind(void 0,0,0,0,0,1),eA.bind(void 0,0,0,0,0,2),eA.bind(void 0,0,0,0,0,3),eA.bind(void 0,0,0,0,1,0),eA.bind(void 0,0,0,0,1,1),eA.bind(void 0,0,0,0,1,2),eA.bind(void 0,0,0,0,1,3),eA.bind(void 0,0,0,1,0,0),eA.bind(void 0,0,0,1,0,1),eA.bind(void 0,0,0,1,0,2),eA.bind(void 0,0,0,1,0,3),eA.bind(void 0,0,0,1,1,0),eA.bind(void 0,0,0,1,1,1),eA.bind(void 0,0,0,1,1,2),eA.bind(void 0,0,0,1,1,3),eA.bind(void 0,0,1,0,0,0),eA.bind(void 0,0,1,0,0,1),eA.bind(void 0,0,1,0,0,2),eA.bind(void 0,0,1,0,0,3),eA.bind(void 0,0,1,0,1,0),eA.bind(void 0,0,1,0,1,1),eA.bind(void 0,0,1,0,1,2),eA.bind(void 0,0,1,0,1,3),eA.bind(void 0,0,1,1,0,0),eA.bind(void 0,0,1,1,0,1),eA.bind(void 0,0,1,1,0,2),eA.bind(void 0,0,1,1,0,3),eA.bind(void 0,0,1,1,1,0),eA.bind(void 0,0,1,1,1,1),eA.bind(void 0,0,1,1,1,2),eA.bind(void 0,0,1,1,1,3),eA.bind(void 0,1,0,0,0,0),eA.bind(void 0,1,0,0,0,1),eA.bind(void 0,1,0,0,0,2),eA.bind(void 0,1,0,0,0,3),eA.bind(void 0,1,0,0,1,0),eA.bind(void 0,1,0,0,1,1),eA.bind(void 0,1,0,0,1,2),eA.bind(void 0,1,0,0,1,3),eA.bind(void 0,1,0,1,0,0),eA.bind(void 0,1,0,1,0,1),eA.bind(void 0,1,0,1,0,2),eA.bind(void 0,1,0,1,0,3),eA.bind(void 0,1,0,1,1,0),eA.bind(void 0,1,0,1,1,1),eA.bind(void 0,1,0,1,1,2),eA.bind(void 0,1,0,1,1,3),eA.bind(void 0,1,1,0,0,0),eA.bind(void 0,1,1,0,0,1),eA.bind(void 0,1,1,0,0,2),eA.bind(void 0,1,1,0,0,3),eA.bind(void 0,1,1,0,1,0),eA.bind(void 0,1,1,0,1,1),eA.bind(void 0,1,1,0,1,2),eA.bind(void 0,1,1,0,1,3),eA.bind(void 0,1,1,1,0,0),eA.bind(void 0,1,1,1,0,1),eA.bind(void 0,1,1,1,0,2),eA.bind(void 0,1,1,1,0,3),eA.bind(void 0,1,1,1,1,0),eA.bind(void 0,1,1,1,1,1),eA.bind(void 0,1,1,1,1,2),eA.bind(void 0,1,1,1,1,3)];function _6(A){this.char=A,this.state={},this.activeState=null}function J7(A,Q,E){this.contextName=E,this.startIndex=A,this.endOffset=Q}function t4(A,Q,E){this.contextName=A,this.openRange=null,this.ranges=[],this.checkStart=Q,this.checkEnd=E}function DB(A,Q){this.context=A,this.index=Q,this.length=A.length,this.current=A[Q],this.backtrack=A.slice(0,Q),this.lookahead=A.slice(Q+1)}function kU(A){this.eventId=A,this.subscribers=[]}function e4(A){var Q=this,E=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];if(E.forEach(function(I){Object.defineProperty(Q.events,I,{value:new kU(I)})}),A)E.forEach(function(I){var C=A[I];if(typeof C==="function")Q.events[I].subscribe(C)});var B=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];B.forEach(function(I){Q.events[I].subscribe(Q.updateContextsRanges)})}function wQ(A){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],e4.call(this,A)}_6.prototype.setState=function(A,Q){return this.state[A]=Q,this.activeState={key:A,value:this.state[A]},this.activeState};_6.prototype.getState=function(A){return this.state[A]||null};wQ.prototype.inboundIndex=function(A){return A>=0&&A<this.tokens.length};wQ.prototype.composeRUD=function(A){var Q=this,E=!0,B=A.map(function(C){return Q[C[0]].apply(Q,C.slice(1).concat(E))}),I=function(C){return typeof C==="object"&&C.hasOwnProperty("FAIL")};if(B.every(I))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:B.filter(I)};this.dispatch("composeRUD",[B.filter(function(C){return!I(C)})])};wQ.prototype.replaceRange=function(A,Q,E,B){Q=Q!==null?Q:this.tokens.length;var I=E.every(function(K){return K instanceof _6});if(!isNaN(A)&&this.inboundIndex(A)&&I){var C=this.tokens.splice.apply(this.tokens,[A,Q].concat(E));if(!B)this.dispatch("replaceToken",[A,Q,E]);return[C,E]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};wQ.prototype.replaceToken=function(A,Q,E){if(!isNaN(A)&&this.inboundIndex(A)&&Q instanceof _6){var B=this.tokens.splice(A,1,Q);if(!E)this.dispatch("replaceToken",[A,Q]);return[B[0],Q]}else return{FAIL:"replaceToken: invalid token or index."}};wQ.prototype.removeRange=function(A,Q,E){Q=!isNaN(Q)?Q:this.tokens.length;var B=this.tokens.splice(A,Q);if(!E)this.dispatch("removeRange",[B,A,Q]);return B};wQ.prototype.removeToken=function(A,Q){if(!isNaN(A)&&this.inboundIndex(A)){var E=this.tokens.splice(A,1);if(!Q)this.dispatch("removeToken",[E,A]);return E}else return{FAIL:"removeToken: invalid token index."}};wQ.prototype.insertToken=function(A,Q,E){var B=A.every(function(I){return I instanceof _6});if(B){if(this.tokens.splice.apply(this.tokens,[Q,0].concat(A)),!E)this.dispatch("insertToken",[A,Q]);return A}else return{FAIL:"insertToken: invalid token(s)."}};wQ.prototype.registerModifier=function(A,Q,E){this.events.newToken.subscribe(function(B,I){var C=[B,I],K=Q===null||Q.apply(this,C)===!0,J=[B,I];if(K){var U=E.apply(this,J);B.setState(A,U)}}),this.registeredModifiers.push(A)};kU.prototype.subscribe=function(A){if(typeof A==="function")return this.subscribers.push(A)-1;else return{FAIL:"invalid '"+this.eventId+"' event handler"}};kU.prototype.unsubscribe=function(A){this.subscribers.splice(A,1)};DB.prototype.setCurrentIndex=function(A){this.index=A,this.current=this.context[A],this.backtrack=this.context.slice(0,A),this.lookahead=this.context.slice(A+1)};DB.prototype.get=function(A){switch(!0){case A===0:return this.current;case(A<0&&Math.abs(A)<=this.backtrack.length):return this.backtrack.slice(A)[0];case(A>0&&A<=this.lookahead.length):return this.lookahead[A-1];default:return null}};wQ.prototype.rangeToText=function(A){if(A instanceof J7)return this.getRangeTokens(A).map(function(Q){return Q.char}).join("")};wQ.prototype.getText=function(){return this.tokens.map(function(A){return A.char}).join("")};wQ.prototype.getContext=function(A){var Q=this.registeredContexts[A];return Q?Q:null};wQ.prototype.on=function(A,Q){var E=this.events[A];if(E)return E.subscribe(Q);else return null};wQ.prototype.dispatch=function(A,Q){var E=this,B=this.events[A];if(B instanceof kU)B.subscribers.forEach(function(I){I.apply(E,Q||[])})};wQ.prototype.registerContextChecker=function(A,Q,E){if(this.getContext(A))return{FAIL:"context name '"+A+"' is already registered."};if(typeof Q!=="function")return{FAIL:"missing context start check."};if(typeof E!=="function")return{FAIL:"missing context end check."};var B=new t4(A,Q,E);return this.registeredContexts[A]=B,this.contextCheckers.push(B),B};wQ.prototype.getRangeTokens=function(A){var Q=A.startIndex+A.endOffset;return[].concat(this.tokens.slice(A.startIndex,Q))};wQ.prototype.getContextRanges=function(A){var Q=this.getContext(A);if(Q)return Q.ranges;else return{FAIL:"context checker '"+A+"' is not registered."}};wQ.prototype.resetContextsRanges=function(){var A=this.registeredContexts;for(var Q in A)if(A.hasOwnProperty(Q)){var E=A[Q];E.ranges=[]}};wQ.prototype.updateContextsRanges=function(){this.resetContextsRanges();var A=this.tokens.map(function(B){return B.char});for(var Q=0;Q<A.length;Q++){var E=new DB(A,Q);this.runContextCheck(E)}this.dispatch("updateContextsRanges",[this.registeredContexts])};wQ.prototype.setEndOffset=function(A,Q){var E=this.getContext(Q).openRange.startIndex,B=new J7(E,A,Q),I=this.getContext(Q).ranges;return B.rangeId=Q+"."+I.length,I.push(B),this.getContext(Q).openRange=null,B};wQ.prototype.runContextCheck=function(A){var Q=this,E=A.index;this.contextCheckers.forEach(function(B){var I=B.contextName,C=Q.getContext(I).openRange;if(!C&&B.checkStart(A))C=new J7(E,null,I),Q.getContext(I).openRange=C,Q.dispatch("contextStart",[I,E]);if(!!C&&B.checkEnd(A)){var K=E-C.startIndex+1,J=Q.setEndOffset(K,I);Q.dispatch("contextEnd",[I,J])}})};wQ.prototype.tokenize=function(A){this.tokens=[],this.resetContextsRanges();var Q=Array.from(A);this.dispatch("start");for(var E=0;E<Q.length;E++){var B=Q[E],I=new DB(Q,E);this.dispatch("next",[I]),this.runContextCheck(I);var C=new _6(B);this.tokens.push(C),this.dispatch("newToken",[C,I])}return this.dispatch("end",[this.tokens]),this.tokens};function lI(A){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(A)}function GX(A){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(A)}function dI(A){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(A)}function $U(A){return/[A-z]/.test(A)}function Ak(A){return/\s/.test(A)}function pE(A){this.font=A,this.features={}}function n1(A){this.id=A.id,this.tag=A.tag,this.substitution=A.substitution}function LK(A,Q){if(!A)return-1;switch(Q.format){case 1:return Q.glyphs.indexOf(A);case 2:var E=Q.ranges;for(var B=0;B<E.length;B++){var I=E[B];if(A>=I.start&&A<=I.end){var C=A-I.start;return I.index+C}}break;default:return-1}return-1}function Qk(A,Q){var E=LK(A,Q.coverage);if(E===-1)return null;return A+Q.deltaGlyphId}function Ek(A,Q){var E=LK(A,Q.coverage);if(E===-1)return null;return Q.substitute[E]}function sH(A,Q){var E=[];for(var B=0;B<A.length;B++){var I=A[B],C=Q.current;C=Array.isArray(C)?C[0]:C;var K=LK(C,I);if(K!==-1)E.push(K)}if(E.length!==A.length)return-1;return E}function Bk(A,Q){var E=Q.inputCoverage.length+Q.lookaheadCoverage.length+Q.backtrackCoverage.length;if(A.context.length<E)return[];var B=sH(Q.inputCoverage,A);if(B===-1)return[];var I=Q.inputCoverage.length-1;if(A.lookahead.length<Q.lookaheadCoverage.length)return[];var C=A.lookahead.slice(I);while(C.length&&dI(C[0].char))C.shift();var K=new DB(C,0),J=sH(Q.lookaheadCoverage,K),U=[].concat(A.backtrack);U.reverse();while(U.length&&dI(U[0].char))U.shift();if(U.length<Q.backtrackCoverage.length)return[];var Y=new DB(U,0),H=sH(Q.backtrackCoverage,Y),R=B.length===Q.inputCoverage.length&&J.length===Q.lookaheadCoverage.length&&H.length===Q.backtrackCoverage.length,O=[];if(R)for(var N=0;N<Q.lookupRecords.length;N++){var $=Q.lookupRecords[N],L=$.lookupListIndex,W=this.getLookupByIndex(L);for(var Z=0;Z<W.subtables.length;Z++){var G=W.subtables[Z],X=this.getLookupMethod(W,G),q=this.getSubstitutionType(W,G);if(q==="12")for(var M=0;M<B.length;M++){var F=A.get(M),D=X(F);if(D)O.push(D)}}}return O}function Ik(A,Q){var E=A.current,B=LK(E,Q.coverage);if(B===-1)return null;var I,C=Q.ligatureSets[B];for(var K=0;K<C.length;K++){I=C[K];for(var J=0;J<I.components.length;J++){var U=A.lookahead[J],Y=I.components[J];if(U!==Y)break;if(J===I.components.length-1)return I}}return null}function Ck(A,Q){var E=LK(A,Q.coverage);if(E===-1)return null;return Q.sequences[E]}pE.prototype.getDefaultScriptFeaturesIndexes=function(){var A=this.font.tables.gsub.scripts;for(var Q=0;Q<A.length;Q++){var E=A[Q];if(E.tag==="DFLT")return E.script.defaultLangSys.featureIndexes}return[]};pE.prototype.getScriptFeaturesIndexes=function(A){var Q=this.font.tables;if(!Q.gsub)return[];if(!A)return this.getDefaultScriptFeaturesIndexes();var E=this.font.tables.gsub.scripts;for(var B=0;B<E.length;B++){var I=E[B];if(I.tag===A&&I.script.defaultLangSys)return I.script.defaultLangSys.featureIndexes;else{var C=I.langSysRecords;if(C)for(var K=0;K<C.length;K++){var J=C[K];if(J.tag===A){var U=J.langSys;return U.featureIndexes}}}}return this.getDefaultScriptFeaturesIndexes()};pE.prototype.mapTagsToFeatures=function(A,Q){var E={};for(var B=0;B<A.length;B++){var I=A[B].tag,C=A[B].feature;E[I]=C}this.features[Q].tags=E};pE.prototype.getScriptFeatures=function(A){var Q=this.features[A];if(this.features.hasOwnProperty(A))return Q;var E=this.getScriptFeaturesIndexes(A);if(!E)return null;var B=this.font.tables.gsub;return Q=E.map(function(I){return B.features[I]}),this.features[A]=Q,this.mapTagsToFeatures(Q,A),Q};pE.prototype.getSubstitutionType=function(A,Q){var E=A.lookupType.toString(),B=Q.substFormat.toString();return E+B};pE.prototype.getLookupMethod=function(A,Q){var E=this,B=this.getSubstitutionType(A,Q);switch(B){case"11":return function(I){return Qk.apply(E,[I,Q])};case"12":return function(I){return Ek.apply(E,[I,Q])};case"63":return function(I){return Bk.apply(E,[I,Q])};case"41":return function(I){return Ik.apply(E,[I,Q])};case"21":return function(I){return Ck.apply(E,[I,Q])};default:throw new Error("lookupType: "+A.lookupType+" - substFormat: "+Q.substFormat+" is not yet supported")}};pE.prototype.lookupFeature=function(A){var Q=A.contextParams,E=Q.index,B=this.getFeature({tag:A.tag,script:A.script});if(!B)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+A.tag+"' for script '"+A.script+"'.");var I=this.getFeatureLookups(B),C=[].concat(Q.context);for(var K=0;K<I.length;K++){var J=I[K],U=this.getLookupSubtables(J);for(var Y=0;Y<U.length;Y++){var H=U[Y],R=this.getSubstitutionType(J,H),O=this.getLookupMethod(J,H),N=void 0;switch(R){case"11":if(N=O(Q.current),N)C.splice(E,1,new n1({id:11,tag:A.tag,substitution:N}));break;case"12":if(N=O(Q.current),N)C.splice(E,1,new n1({id:12,tag:A.tag,substitution:N}));break;case"63":if(N=O(Q),Array.isArray(N)&&N.length)C.splice(E,1,new n1({id:63,tag:A.tag,substitution:N}));break;case"41":if(N=O(Q),N)C.splice(E,1,new n1({id:41,tag:A.tag,substitution:N}));break;case"21":if(N=O(Q.current),N)C.splice(E,1,new n1({id:21,tag:A.tag,substitution:N}));break}if(Q=new DB(C,E),Array.isArray(N)&&!N.length)continue;N=null}}return C.length?C:null};pE.prototype.supports=function(A){if(!A.script)return!1;this.getScriptFeatures(A.script);var Q=this.features.hasOwnProperty(A.script);if(!A.tag)return Q;var E=this.features[A.script].some(function(B){return B.tag===A.tag});return Q&&E};pE.prototype.getLookupSubtables=function(A){return A.subtables||null};pE.prototype.getLookupByIndex=function(A){var Q=this.font.tables.gsub.lookups;return Q[A]||null};pE.prototype.getFeatureLookups=function(A){return A.lookupListIndexes.map(this.getLookupByIndex.bind(this))};pE.prototype.getFeature=function A(Q){if(!this.font)return{FAIL:"No font was found"};if(!this.features.hasOwnProperty(Q.script))this.getScriptFeatures(Q.script);var E=this.features[Q.script];if(!E)return{FAIL:"No feature for script "+Q.script};if(!E.tags[Q.tag])return null;return this.features[Q.script].tags[Q.tag]};function Kk(A){var Q=A.current,E=A.get(-1);return E===null&&lI(Q)||!lI(E)&&lI(Q)}function Jk(A){var Q=A.get(1);return Q===null||!lI(Q)}var Uk={startCheck:Kk,endCheck:Jk};function Yk(A){var Q=A.current,E=A.get(-1);return(lI(Q)||dI(Q))&&!lI(E)}function Ok(A){var Q=A.get(1);switch(!0){case Q===null:return!0;case(!lI(Q)&&!dI(Q)):var E=Ak(Q);if(!E)return!0;if(E){var B=!1;if(B=A.lookahead.some(function(I){return lI(I)||dI(I)}),!B)return!0}break;default:return!1}}var Hk={startCheck:Yk,endCheck:Ok};function Zk(A,Q,E){Q[E].setState(A.tag,A.substitution)}function Rk(A,Q,E){Q[E].setState(A.tag,A.substitution)}function Nk(A,Q,E){A.substitution.forEach(function(B,I){var C=Q[E+I];C.setState(A.tag,B)})}function Gk(A,Q,E){var B=Q[E];B.setState(A.tag,A.substitution.ligGlyph);var I=A.substitution.components.length;for(var C=0;C<I;C++)B=Q[E+C+1],B.setState("deleted",!0)}var xW={11:Zk,12:Rk,63:Nk,41:Gk};function U7(A,Q,E){if(A instanceof n1&&xW[A.id])xW[A.id](A,Q,E)}function Wk(A){var Q=[].concat(A.backtrack);for(var E=Q.length-1;E>=0;E--){var B=Q[E],I=GX(B),C=dI(B);if(!I&&!C)return!0;if(I)return!1}return!1}function Xk(A){if(GX(A.current))return!1;for(var Q=0;Q<A.lookahead.length;Q++){var E=A.lookahead[Q],B=dI(E);if(!B)return!0}return!1}function $k(A){var Q=this,E="arab",B=this.featuresTags[E],I=this.tokenizer.getRangeTokens(A);if(I.length===1)return;var C=new DB(I.map(function(J){return J.getState("glyphIndex")}),0),K=new DB(I.map(function(J){return J.char}),0);I.forEach(function(J,U){if(dI(J.char))return;C.setCurrentIndex(U),K.setCurrentIndex(U);var Y=0;if(Wk(K))Y|=1;if(Xk(K))Y|=2;var H;switch(Y){case 1:H="fina";break;case 2:H="init";break;case 3:H="medi";break}if(B.indexOf(H)===-1)return;var R=Q.query.lookupFeature({tag:H,script:E,contextParams:C});if(R instanceof Error)return console.info(R.message);R.forEach(function(O,N){if(O instanceof n1)U7(O,I,N),C.context[N]=O.substitution})})}function bW(A,Q){var E=A.map(function(B){return B.activeState.value});return new DB(E,Q||0)}function Lk(A){var Q=this,E="arab",B=this.tokenizer.getRangeTokens(A),I=bW(B);I.context.forEach(function(C,K){I.setCurrentIndex(K);var J=Q.query.lookupFeature({tag:"rlig",script:E,contextParams:I});if(J.length)J.forEach(function(U){return U7(U,B,K)}),I=bW(B)})}function qk(A){var Q=A.current,E=A.get(-1);return E===null&&$U(Q)||!$U(E)&&$U(Q)}function Fk(A){var Q=A.get(1);return Q===null||!$U(Q)}var Dk={startCheck:qk,endCheck:Fk};function fW(A,Q){var E=A.map(function(B){return B.activeState.value});return new DB(E,Q||0)}function Mk(A){var Q=this,E="latn",B=this.tokenizer.getRangeTokens(A),I=fW(B);I.context.forEach(function(C,K){I.setCurrentIndex(K);var J=Q.query.lookupFeature({tag:"liga",script:E,contextParams:I});if(J.length)J.forEach(function(U){return U7(U,B,K)}),I=fW(B)})}function wB(A){this.baseDir=A||"ltr",this.tokenizer=new wQ,this.featuresTags={}}wB.prototype.setText=function(A){this.text=A};wB.prototype.contextChecks={latinWordCheck:Dk,arabicWordCheck:Uk,arabicSentenceCheck:Hk};function iH(A){var Q=this.contextChecks[A+"Check"];return this.tokenizer.registerContextChecker(A,Q.startCheck,Q.endCheck)}function wk(){return iH.call(this,"latinWord"),iH.call(this,"arabicWord"),iH.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function _k(){var A=this,Q=this.tokenizer.getContextRanges("arabicSentence");Q.forEach(function(E){var B=A.tokenizer.getRangeTokens(E);A.tokenizer.replaceRange(E.startIndex,E.endOffset,B.reverse())})}wB.prototype.registerFeatures=function(A,Q){var E=this,B=Q.filter(function(I){return E.query.supports({script:A,tag:I})});if(!this.featuresTags.hasOwnProperty(A))this.featuresTags[A]=B;else this.featuresTags[A]=this.featuresTags[A].concat(B)};wB.prototype.applyFeatures=function(A,Q){if(!A)throw new Error("No valid font was provided to apply features");if(!this.query)this.query=new pE(A);for(var E=0;E<Q.length;E++){var B=Q[E];if(!this.query.supports({script:B.script}))continue;this.registerFeatures(B.script,B.tags)}};wB.prototype.registerModifier=function(A,Q,E){this.tokenizer.registerModifier(A,Q,E)};function Y7(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function kk(){var A=this,Q="arab";if(!this.featuresTags.hasOwnProperty(Q))return;Y7.call(this);var E=this.tokenizer.getContextRanges("arabicWord");E.forEach(function(B){$k.call(A,B)})}function Sk(){var A=this,Q="arab";if(!this.featuresTags.hasOwnProperty(Q))return;var E=this.featuresTags[Q];if(E.indexOf("rlig")===-1)return;Y7.call(this);var B=this.tokenizer.getContextRanges("arabicWord");B.forEach(function(I){Lk.call(A,I)})}function Tk(){var A=this,Q="latn";if(!this.featuresTags.hasOwnProperty(Q))return;var E=this.featuresTags[Q];if(E.indexOf("liga")===-1)return;Y7.call(this);var B=this.tokenizer.getContextRanges("latinWord");B.forEach(function(I){Mk.call(A,I)})}wB.prototype.checkContextReady=function(A){return!!this.tokenizer.getContext(A)};wB.prototype.applyFeaturesToContexts=function(){if(this.checkContextReady("arabicWord"))kk.call(this),Sk.call(this);if(this.checkContextReady("latinWord"))Tk.call(this);if(this.checkContextReady("arabicSentence"))_k.call(this)};wB.prototype.processText=function(A){if(!this.text||this.text!==A)this.setText(A),wk.call(this),this.applyFeaturesToContexts()};wB.prototype.getBidiText=function(A){return this.processText(A),this.tokenizer.getText()};wB.prototype.getTextGlyphs=function(A){this.processText(A);var Q=[];for(var E=0;E<this.tokenizer.tokens.length;E++){var B=this.tokenizer.tokens[E];if(B.state.deleted)continue;var I=B.activeState.value;Q.push(Array.isArray(I)?I[0]:I)}return Q};function OQ(A){if(A=A||{},A.tables=A.tables||{},!A.empty)OK(A.familyName,"When creating a new Font object, familyName is required."),OK(A.styleName,"When creating a new Font object, styleName is required."),OK(A.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),OK(A.ascender,"When creating a new Font object, ascender is required."),OK(A.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:A.familyName||" "},fontSubfamily:{en:A.styleName||" "},fullName:{en:A.fullName||A.familyName+" "+A.styleName},postScriptName:{en:A.postScriptName||(A.familyName+A.styleName).replace(/\s/g,"")},designer:{en:A.designer||" "},designerURL:{en:A.designerURL||" "},manufacturer:{en:A.manufacturer||" "},manufacturerURL:{en:A.manufacturerURL||" "},license:{en:A.license||" "},licenseURL:{en:A.licenseURL||" "},version:{en:A.version||"Version 0.1"},description:{en:A.description||" "},copyright:{en:A.copyright||" "},trademark:{en:A.trademark||" "}},this.unitsPerEm=A.unitsPerEm||1000,this.ascender=A.ascender,this.descender=A.descender,this.createdTimestamp=A.createdTimestamp,this.tables=Object.assign(A.tables,{os2:Object.assign({usWeightClass:A.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:A.widthClass||this.usWidthClasses.MEDIUM,fsSelection:A.fsSelection||this.fsSelectionValues.REGULAR},A.tables.os2)});this.supported=!0,this.glyphs=new mB.GlyphSet(this,A.glyphs||[]),this.encoding=new dW(this),this.position=new WK(this),this.substitution=new uE(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new HX(this)}})}OQ.prototype.hasChar=function(A){return this.encoding.charToGlyphIndex(A)!==null};OQ.prototype.charToGlyphIndex=function(A){return this.encoding.charToGlyphIndex(A)};OQ.prototype.charToGlyph=function(A){var Q=this.charToGlyphIndex(A),E=this.glyphs.get(Q);if(!E)E=this.glyphs.get(0);return E};OQ.prototype.updateFeatures=function(A){return this.defaultRenderOptions.features.map(function(Q){if(Q.script==="latn")return{script:"latn",tags:Q.tags.filter(function(E){return A[E]})};else return Q})};OQ.prototype.stringToGlyphs=function(A,Q){var E=this,B=new wB,I=function(R){return E.charToGlyphIndex(R.char)};B.registerModifier("glyphIndex",null,I);var C=Q?this.updateFeatures(Q.features):this.defaultRenderOptions.features;B.applyFeatures(this,C);var K=B.getTextGlyphs(A),J=K.length,U=new Array(J),Y=this.glyphs.get(0);for(var H=0;H<J;H+=1)U[H]=this.glyphs.get(K[H])||Y;return U};OQ.prototype.nameToGlyphIndex=function(A){return this.glyphNames.nameToGlyphIndex(A)};OQ.prototype.nameToGlyph=function(A){var Q=this.nameToGlyphIndex(A),E=this.glyphs.get(Q);if(!E)E=this.glyphs.get(0);return E};OQ.prototype.glyphIndexToName=function(A){if(!this.glyphNames.glyphIndexToName)return"";return this.glyphNames.glyphIndexToName(A)};OQ.prototype.getKerningValue=function(A,Q){A=A.index||A,Q=Q.index||Q;var E=this.position.defaultKerningTables;if(E)return this.position.getKerningValue(E,A,Q);return this.kerningPairs[A+","+Q]||0};OQ.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};OQ.prototype.forEachGlyph=function(A,Q,E,B,I,C){Q=Q!==void 0?Q:0,E=E!==void 0?E:0,B=B!==void 0?B:72,I=Object.assign({},this.defaultRenderOptions,I);var K=1/this.unitsPerEm*B,J=this.stringToGlyphs(A,I),U;if(I.kerning){var Y=I.script||this.position.getDefaultScriptName();U=this.position.getKerningTables(Y,I.language)}for(var H=0;H<J.length;H+=1){var R=J[H];if(C.call(this,R,Q,E,B,I),R.advanceWidth)Q+=R.advanceWidth*K;if(I.kerning&&H<J.length-1){var O=U?this.position.getKerningValue(U,R.index,J[H+1].index):this.getKerningValue(R,J[H+1]);Q+=O*K}if(I.letterSpacing)Q+=I.letterSpacing*B;else if(I.tracking)Q+=I.tracking/1000*B}return Q};OQ.prototype.getPath=function(A,Q,E,B,I){var C=new mQ;return this.forEachGlyph(A,Q,E,B,I,function(K,J,U,Y){var H=K.getPath(J,U,Y,I,this);C.extend(H)}),C};OQ.prototype.getPaths=function(A,Q,E,B,I){var C=[];return this.forEachGlyph(A,Q,E,B,I,function(K,J,U,Y){var H=K.getPath(J,U,Y,I,this);C.push(H)}),C};OQ.prototype.getAdvanceWidth=function(A,Q,E){return this.forEachGlyph(A,0,0,Q,E,function(){})};OQ.prototype.draw=function(A,Q,E,B,I,C){this.getPath(Q,E,B,I,C).draw(A)};OQ.prototype.drawPoints=function(A,Q,E,B,I,C){this.forEachGlyph(Q,E,B,I,C,function(K,J,U,Y){K.drawPoints(A,J,U,Y)})};OQ.prototype.drawMetrics=function(A,Q,E,B,I,C){this.forEachGlyph(Q,E,B,I,C,function(K,J,U,Y){K.drawMetrics(A,J,U,Y)})};OQ.prototype.getEnglishName=function(A){var Q=this.names[A];if(Q)return Q.en};OQ.prototype.validate=function(){var A=this;function Q(B,I){}function E(B){var I=A.getEnglishName(B);Q(I&&I.trim().length>0)}E("fontFamily"),E("weightName"),E("manufacturer"),E("copyright"),E("version"),Q(this.unitsPerEm>0)};OQ.prototype.toTables=function(){return W2.fontToTable(this)};OQ.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};OQ.prototype.toArrayBuffer=function(){var A=this.toTables(),Q=A.encode(),E=new ArrayBuffer(Q.length),B=new Uint8Array(E);for(var I=0;I<Q.length;I++)B[I]=Q[I];return E};OQ.prototype.download=function(A){var Q=this.getEnglishName("fontFamily"),E=this.getEnglishName("fontSubfamily");A=A||Q.replace(/\s/g,"")+"-"+E+".otf";var B=this.toArrayBuffer();if(window.URL=window.URL||window.webkitURL,window.URL){var I=new DataView(B),C=new Blob([I],{type:"font/opentype"}),K=document.createElement("a");K.href=window.URL.createObjectURL(C),K.download=A;var J=document.createEvent("MouseEvents");J.initEvent("click",!0,!1),K.dispatchEvent(J)}else console.warn("Font file could not be downloaded. Try using a different browser.")};OQ.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};OQ.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};OQ.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var GI=new Array(10);GI[1]=function A(){var Q=this.offset+this.relativeOffset,E=this.parseUShort();if(E===1)return{posFormat:1,coverage:this.parsePointer($A.coverage),value:this.parseValueRecord()};else if(E===2)return{posFormat:2,coverage:this.parsePointer($A.coverage),values:this.parseValueRecordList()};W0.assert(!1,"0x"+Q.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};GI[2]=function A(){var Q=this.offset+this.relativeOffset,E=this.parseUShort();W0.assert(E===1||E===2,"0x"+Q.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var B=this.parsePointer($A.coverage),I=this.parseUShort(),C=this.parseUShort();if(E===1)return{posFormat:E,coverage:B,valueFormat1:I,valueFormat2:C,pairSets:this.parseList($A.pointer($A.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(I),value2:this.parseValueRecord(C)}})))};else if(E===2){var K=this.parsePointer($A.classDef),J=this.parsePointer($A.classDef),U=this.parseUShort(),Y=this.parseUShort();return{posFormat:E,coverage:B,valueFormat1:I,valueFormat2:C,classDef1:K,classDef2:J,class1Count:U,class2Count:Y,classRecords:this.parseList(U,$A.list(Y,function(){return{value1:this.parseValueRecord(I),value2:this.parseValueRecord(C)}}))}}};GI[3]=function A(){return{error:"GPOS Lookup 3 not supported"}};GI[4]=function A(){return{error:"GPOS Lookup 4 not supported"}};GI[5]=function A(){return{error:"GPOS Lookup 5 not supported"}};GI[6]=function A(){return{error:"GPOS Lookup 6 not supported"}};GI[7]=function A(){return{error:"GPOS Lookup 7 not supported"}};GI[8]=function A(){return{error:"GPOS Lookup 8 not supported"}};GI[9]=function A(){return{error:"GPOS Lookup 9 not supported"}};var Qx=new Array(10);/*! chevrotain - v9.0.1 */var P0=(A,Q)=>()=>(Q||(Q={exports:{}},A(Q.exports,Q)),Q.exports),WX=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.VERSION=void 0,A.VERSION="9.0.1"}),t0=P0((exports,module)=>{var __spreadArray=exports&&exports.__spreadArray||function(A,Q){for(var E=0,B=Q.length,I=A.length;E<B;E++,I++)A[I]=Q[E];return A};Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFastProperties=exports.timer=exports.peek=exports.isES2015MapSupported=exports.PRINT_WARNING=exports.PRINT_ERROR=exports.packArray=exports.IDENTITY=exports.NOOP=exports.merge=exports.groupBy=exports.defaults=exports.assignNoOverwrite=exports.assign=exports.zipObject=exports.sortBy=exports.indexOf=exports.some=exports.difference=exports.every=exports.isObject=exports.isRegExp=exports.isArray=exports.partial=exports.uniq=exports.compact=exports.reduce=exports.findAll=exports.find=exports.cloneObj=exports.cloneArr=exports.contains=exports.has=exports.pick=exports.reject=exports.filter=exports.dropRight=exports.drop=exports.isFunction=exports.isUndefined=exports.isString=exports.forEach=exports.last=exports.first=exports.flatten=exports.map=exports.mapValues=exports.values=exports.keys=exports.isEmpty=void 0;function isEmpty(A){return A&&A.length===0}exports.isEmpty=isEmpty;function keys(A){return A==null?[]:Object.keys(A)}exports.keys=keys;function values(A){for(var Q=[],E=Object.keys(A),B=0;B<E.length;B++)Q.push(A[E[B]]);return Q}exports.values=values;function mapValues(A,Q){for(var E=[],B=keys(A),I=0;I<B.length;I++){var C=B[I];E.push(Q.call(null,A[C],C))}return E}exports.mapValues=mapValues;function map(A,Q){for(var E=[],B=0;B<A.length;B++)E.push(Q.call(null,A[B],B));return E}exports.map=map;function flatten(A){for(var Q=[],E=0;E<A.length;E++){var B=A[E];Array.isArray(B)?Q=Q.concat(flatten(B)):Q.push(B)}return Q}exports.flatten=flatten;function first(A){return isEmpty(A)?void 0:A[0]}exports.first=first;function last(A){var Q=A&&A.length;return Q?A[Q-1]:void 0}exports.last=last;function forEach(A,Q){if(Array.isArray(A))for(var E=0;E<A.length;E++)Q.call(null,A[E],E);else if(isObject(A))for(var B=keys(A),E=0;E<B.length;E++){var I=B[E],C=A[I];Q.call(null,C,I)}else throw Error("non exhaustive match")}exports.forEach=forEach;function isString(A){return typeof A=="string"}exports.isString=isString;function isUndefined(A){return A===void 0}exports.isUndefined=isUndefined;function isFunction(A){return A instanceof Function}exports.isFunction=isFunction;function drop(A,Q){return Q===void 0&&(Q=1),A.slice(Q,A.length)}exports.drop=drop;function dropRight(A,Q){return Q===void 0&&(Q=1),A.slice(0,A.length-Q)}exports.dropRight=dropRight;function filter(A,Q){var E=[];if(Array.isArray(A))for(var B=0;B<A.length;B++){var I=A[B];Q.call(null,I)&&E.push(I)}return E}exports.filter=filter;function reject(A,Q){return filter(A,function(E){return!Q(E)})}exports.reject=reject;function pick(A,Q){for(var E=Object.keys(A),B={},I=0;I<E.length;I++){var C=E[I],K=A[C];Q(K)&&(B[C]=K)}return B}exports.pick=pick;function has(A,Q){return isObject(A)?A.hasOwnProperty(Q):!1}exports.has=has;function contains(A,Q){return find(A,function(E){return E===Q})!==void 0}exports.contains=contains;function cloneArr(A){for(var Q=[],E=0;E<A.length;E++)Q.push(A[E]);return Q}exports.cloneArr=cloneArr;function cloneObj(A){var Q={};for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(Q[E]=A[E]);return Q}exports.cloneObj=cloneObj;function find(A,Q){for(var E=0;E<A.length;E++){var B=A[E];if(Q.call(null,B))return B}}exports.find=find;function findAll(A,Q){for(var E=[],B=0;B<A.length;B++){var I=A[B];Q.call(null,I)&&E.push(I)}return E}exports.findAll=findAll;function reduce(A,Q,E){for(var B=Array.isArray(A),I=B?A:values(A),C=B?[]:keys(A),K=E,J=0;J<I.length;J++)K=Q.call(null,K,I[J],B?J:C[J]);return K}exports.reduce=reduce;function compact(A){return reject(A,function(Q){return Q==null})}exports.compact=compact;function uniq(A,Q){Q===void 0&&(Q=function(B){return B});var E=[];return reduce(A,function(B,I){var C=Q(I);return contains(E,C)?B:(E.push(C),B.concat(I))},[])}exports.uniq=uniq;function partial(A){for(var Q=[],E=1;E<arguments.length;E++)Q[E-1]=arguments[E];var B=[null],I=B.concat(Q);return Function.bind.apply(A,I)}exports.partial=partial;function isArray(A){return Array.isArray(A)}exports.isArray=isArray;function isRegExp(A){return A instanceof RegExp}exports.isRegExp=isRegExp;function isObject(A){return A instanceof Object}exports.isObject=isObject;function every(A,Q){for(var E=0;E<A.length;E++)if(!Q(A[E],E))return!1;return!0}exports.every=every;function difference(A,Q){return reject(A,function(E){return contains(Q,E)})}exports.difference=difference;function some(A,Q){for(var E=0;E<A.length;E++)if(Q(A[E]))return!0;return!1}exports.some=some;function indexOf(A,Q){for(var E=0;E<A.length;E++)if(A[E]===Q)return E;return-1}exports.indexOf=indexOf;function sortBy(A,Q){var E=cloneArr(A);return E.sort(function(B,I){return Q(B)-Q(I)}),E}exports.sortBy=sortBy;function zipObject(A,Q){if(A.length!==Q.length)throw Error("can't zipObject with different number of keys and values!");for(var E={},B=0;B<A.length;B++)E[A[B]]=Q[B];return E}exports.zipObject=zipObject;function assign(A){for(var Q=[],E=1;E<arguments.length;E++)Q[E-1]=arguments[E];for(var B=0;B<Q.length;B++)for(var I=Q[B],C=keys(I),K=0;K<C.length;K++){var J=C[K];A[J]=I[J]}return A}exports.assign=assign;function assignNoOverwrite(A){for(var Q=[],E=1;E<arguments.length;E++)Q[E-1]=arguments[E];for(var B=0;B<Q.length;B++)for(var I=Q[B],C=keys(I),K=0;K<C.length;K++){var J=C[K];has(A,J)||(A[J]=I[J])}return A}exports.assignNoOverwrite=assignNoOverwrite;function defaults(){for(var A=[],Q=0;Q<arguments.length;Q++)A[Q]=arguments[Q];return assignNoOverwrite.apply(void 0,__spreadArray([{}],A))}exports.defaults=defaults;function groupBy(A,Q){var E={};return forEach(A,function(B){var I=Q(B),C=E[I];C?C.push(B):E[I]=[B]}),E}exports.groupBy=groupBy;function merge(A,Q){for(var E=cloneObj(A),B=keys(Q),I=0;I<B.length;I++){var C=B[I],K=Q[C];E[C]=K}return E}exports.merge=merge;function NOOP(){}exports.NOOP=NOOP;function IDENTITY(A){return A}exports.IDENTITY=IDENTITY;function packArray(A){for(var Q=[],E=0;E<A.length;E++){var B=A[E];Q.push(B!==void 0?B:void 0)}return Q}exports.packArray=packArray;function PRINT_ERROR(A){console&&console.error&&console.error("Error: "+A)}exports.PRINT_ERROR=PRINT_ERROR;function PRINT_WARNING(A){console&&console.warn&&console.warn("Warning: "+A)}exports.PRINT_WARNING=PRINT_WARNING;function isES2015MapSupported(){return typeof Map=="function"}exports.isES2015MapSupported=isES2015MapSupported;function peek(A){return A[A.length-1]}exports.peek=peek;function timer(A){var Q=(/*@__PURE__*/new Date()).getTime(),E=A(),B=(/*@__PURE__*/new Date()).getTime(),I=B-Q;return{time:I,value:E}}exports.timer=timer;function toFastProperties(toBecomeFast){function FakeConstructor(){}FakeConstructor.prototype=toBecomeFast;var fakeInstance=new FakeConstructor;function fakeAccess(){return typeof fakeInstance.bar}return fakeAccess(),fakeAccess(),toBecomeFast}exports.toFastProperties=toFastProperties}),O7=P0((A,Q)=>{(function(E,B){typeof define=="function"&&define.amd?define([],B):typeof Q=="object"&&Q.exports?Q.exports=B():E.regexpToAst=B()})(typeof self!="undefined"?self:A,function(){function E(){}E.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},E.prototype.restoreState=function(W){this.idx=W.idx,this.input=W.input,this.groupIdx=W.groupIdx},E.prototype.pattern=function(W){this.idx=0,this.input=W,this.groupIdx=0,this.consumeChar("/");var Z=this.disjunction();this.consumeChar("/");for(var G={type:"Flags",loc:{begin:this.idx,end:W.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":U(G,"global");break;case"i":U(G,"ignoreCase");break;case"m":U(G,"multiLine");break;case"u":U(G,"unicode");break;case"y":U(G,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:G,value:Z,loc:this.loc(0)}},E.prototype.disjunction=function(){var W=[],Z=this.idx;for(W.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),W.push(this.alternative());return{type:"Disjunction",value:W,loc:this.loc(Z)}},E.prototype.alternative=function(){for(var W=[],Z=this.idx;this.isTerm();)W.push(this.term());return{type:"Alternative",value:W,loc:this.loc(Z)}},E.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},E.prototype.assertion=function(){var W=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(W)};case"$":return{type:"EndAnchor",loc:this.loc(W)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(W)};case"B":return{type:"NonWordBoundary",loc:this.loc(W)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var Z;switch(this.popChar()){case"=":Z="Lookahead";break;case"!":Z="NegativeLookahead";break}Y(Z);var G=this.disjunction();return this.consumeChar(")"),{type:Z,value:G,loc:this.loc(W)}}H()},E.prototype.quantifier=function(W){var Z,G=this.idx;switch(this.popChar()){case"*":Z={atLeast:0,atMost:1/0};break;case"+":Z={atLeast:1,atMost:1/0};break;case"?":Z={atLeast:0,atMost:1};break;case"{":var X=this.integerIncludingZero();switch(this.popChar()){case"}":Z={atLeast:X,atMost:X};break;case",":var q;this.isDigit()?(q=this.integerIncludingZero(),Z={atLeast:X,atMost:q}):Z={atLeast:X,atMost:1/0},this.consumeChar("}");break}if(W===!0&&Z===void 0)return;Y(Z);break}if(!(W===!0&&Z===void 0))return Y(Z),this.peekChar(0)==="?"?(this.consumeChar("?"),Z.greedy=!1):Z.greedy=!0,Z.type="Quantifier",Z.loc=this.loc(G),Z},E.prototype.atom=function(){var W,Z=this.idx;switch(this.peekChar()){case".":W=this.dotAll();break;case"\\":W=this.atomEscape();break;case"[":W=this.characterClass();break;case"(":W=this.group();break}return W===void 0&&this.isPatternCharacter()&&(W=this.patternCharacter()),Y(W),W.loc=this.loc(Z),this.isQuantifier()&&(W.quantifier=this.quantifier()),W},E.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[K(`
`),K("\r"),K("\u2028"),K("\u2029")]}},E.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},E.prototype.decimalEscapeAtom=function(){var W=this.positiveInteger();return{type:"GroupBackReference",value:W}},E.prototype.characterClassEscape=function(){var W,Z=!1;switch(this.popChar()){case"d":W=O;break;case"D":W=O,Z=!0;break;case"s":W=$;break;case"S":W=$,Z=!0;break;case"w":W=N;break;case"W":W=N,Z=!0;break}return Y(W),{type:"Set",value:W,complement:Z}},E.prototype.controlEscapeAtom=function(){var W;switch(this.popChar()){case"f":W=K("\f");break;case"n":W=K(`
`);break;case"r":W=K("\r");break;case"t":W=K("\t");break;case"v":W=K("\v");break}return Y(W),{type:"Character",value:W}},E.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var W=this.popChar();if(/[a-zA-Z]/.test(W)===!1)throw Error("Invalid ");var Z=W.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:Z}},E.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:K("\x00")}},E.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},E.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},E.prototype.identityEscapeAtom=function(){var W=this.popChar();return{type:"Character",value:K(W)}},E.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var W=this.popChar();return{type:"Character",value:K(W)}}},E.prototype.characterClass=function(){var W=[],Z=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),Z=!0);this.isClassAtom();){var G=this.classAtom(),X=G.type==="Character";if(X&&this.isRangeDash()){this.consumeChar("-");var q=this.classAtom(),M=q.type==="Character";if(M){if(q.value<G.value)throw Error("Range out of order in character class");W.push({from:G.value,to:q.value})}else J(G.value,W),W.push(K("-")),J(q.value,W)}else J(G.value,W)}return this.consumeChar("]"),{type:"Set",complement:Z,value:W}},E.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},E.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:K("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},E.prototype.group=function(){var W=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),W=!1;break;default:this.groupIdx++;break}var Z=this.disjunction();this.consumeChar(")");var G={type:"Group",capturing:W,value:Z};return W&&(G.idx=this.groupIdx),G},E.prototype.positiveInteger=function(){var W=this.popChar();if(C.test(W)===!1)throw Error("Expecting a positive integer");for(;I.test(this.peekChar(0));)W+=this.popChar();return parseInt(W,10)},E.prototype.integerIncludingZero=function(){var W=this.popChar();if(I.test(W)===!1)throw Error("Expecting an integer");for(;I.test(this.peekChar(0));)W+=this.popChar();return parseInt(W,10)},E.prototype.patternCharacter=function(){var W=this.popChar();switch(W){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:K(W)}}},E.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},E.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},E.prototype.isDigit=function(){return I.test(this.peekChar(0))},E.prototype.isClassAtom=function(W){switch(W===void 0&&(W=0),this.peekChar(W)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},E.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},E.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},E.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},E.prototype.isQuantifier=function(){var W=this.saveState();try{return this.quantifier(!0)!==void 0}catch(Z){return!1}finally{this.restoreState(W)}},E.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},E.prototype.parseHexDigits=function(W){for(var Z="",G=0;G<W;G++){var X=this.popChar();if(B.test(X)===!1)throw Error("Expecting a HexDecimal digits");Z+=X}var q=parseInt(Z,16);return{type:"Character",value:q}},E.prototype.peekChar=function(W){return W===void 0&&(W=0),this.input[this.idx+W]},E.prototype.popChar=function(){var W=this.peekChar(0);return this.consumeChar(),W},E.prototype.consumeChar=function(W){if(W!==void 0&&this.input[this.idx]!==W)throw Error("Expected: '"+W+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},E.prototype.loc=function(W){return{begin:W,end:this.idx}};var B=/[0-9a-fA-F]/,I=/[0-9]/,C=/[1-9]/;function K(W){return W.charCodeAt(0)}function J(W,Z){W.length!==void 0?W.forEach(function(G){Z.push(G)}):Z.push(W)}function U(W,Z){if(W[Z]===!0)throw"duplicate flag "+Z;W[Z]=!0}function Y(W){if(W===void 0)throw Error("Internal Error - Should never get here!")}function H(){throw Error("Internal Error - Should never get here!")}var R,O=[];for(R=K("0");R<=K("9");R++)O.push(R);var N=[K("_")].concat(O);for(R=K("a");R<=K("z");R++)N.push(R);for(R=K("A");R<=K("Z");R++)N.push(R);var $=[K(" "),K("\f"),K(`
`),K("\r"),K("\t"),K("\v"),K("\t"),K(" "),K(" "),K(" "),K(" "),K(" "),K(" "),K(" "),K(" "),K(" "),K(" "),K(" "),K(" "),K(" "),K("\u2028"),K("\u2029"),K(" "),K(" "),K("　"),K("\uFEFF")];function L(){}return L.prototype.visitChildren=function(W){for(var Z in W){var G=W[Z];W.hasOwnProperty(Z)&&(G.type!==void 0?this.visit(G):Array.isArray(G)&&G.forEach(function(X){this.visit(X)},this))}},L.prototype.visit=function(W){switch(W.type){case"Pattern":this.visitPattern(W);break;case"Flags":this.visitFlags(W);break;case"Disjunction":this.visitDisjunction(W);break;case"Alternative":this.visitAlternative(W);break;case"StartAnchor":this.visitStartAnchor(W);break;case"EndAnchor":this.visitEndAnchor(W);break;case"WordBoundary":this.visitWordBoundary(W);break;case"NonWordBoundary":this.visitNonWordBoundary(W);break;case"Lookahead":this.visitLookahead(W);break;case"NegativeLookahead":this.visitNegativeLookahead(W);break;case"Character":this.visitCharacter(W);break;case"Set":this.visitSet(W);break;case"Group":this.visitGroup(W);break;case"GroupBackReference":this.visitGroupBackReference(W);break;case"Quantifier":this.visitQuantifier(W);break}this.visitChildren(W)},L.prototype.visitPattern=function(W){},L.prototype.visitFlags=function(W){},L.prototype.visitDisjunction=function(W){},L.prototype.visitAlternative=function(W){},L.prototype.visitStartAnchor=function(W){},L.prototype.visitEndAnchor=function(W){},L.prototype.visitWordBoundary=function(W){},L.prototype.visitNonWordBoundary=function(W){},L.prototype.visitLookahead=function(W){},L.prototype.visitNegativeLookahead=function(W){},L.prototype.visitCharacter=function(W){},L.prototype.visitSet=function(W){},L.prototype.visitGroup=function(W){},L.prototype.visitGroupBackReference=function(W){},L.prototype.visitQuantifier=function(W){},{RegExpParser:E,BaseRegExpVisitor:L,VERSION:"0.5.0"}})}),H7=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.clearRegExpParserCache=A.getRegExpAst=void 0;var Q=O7(),E={},B=new Q.RegExpParser;function I(K){var J=K.toString();if(E.hasOwnProperty(J))return E[J];var U=B.pattern(J);return E[J]=U,U}A.getRegExpAst=I;function C(){E={}}A.clearRegExpParserCache=C}),zk=P0((A)=>{var Q=A&&A.__extends||function(){var L=function(W,Z){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,X){G.__proto__=X}||function(G,X){for(var q in X)Object.prototype.hasOwnProperty.call(X,q)&&(G[q]=X[q])},L(W,Z)};return function(W,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");L(W,Z);function G(){this.constructor=W}W.prototype=Z===null?Object.create(Z):(G.prototype=Z.prototype,new G)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.canMatchCharCode=A.firstCharOptimizedIndices=A.getOptimizedStartCodesIndices=A.failedOptimizationPrefixMsg=void 0;var E=O7(),B=t0(),I=H7(),C=XX(),K="Complement Sets are not supported for first char optimization";A.failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function J(L,W){W===void 0&&(W=!1);try{var Z=I.getRegExpAst(L),G=U(Z.value,{},Z.flags.ignoreCase);return G}catch(q){if(q.message===K)W&&B.PRINT_WARNING(""+A.failedOptimizationPrefixMsg+("\tUnable to optimize: < "+L.toString()+` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var X="";W&&(X=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),B.PRINT_ERROR(A.failedOptimizationPrefixMsg+`
`+("\tFailed parsing: < "+L.toString()+` >
`)+("\tUsing the regexp-to-ast library version: "+E.VERSION+`
`)+"\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues"+X)}}return[]}A.getOptimizedStartCodesIndices=J;function U(L,W,Z){switch(L.type){case"Disjunction":for(var G=0;G<L.value.length;G++)U(L.value[G],W,Z);break;case"Alternative":for(var X=L.value,G=0;G<X.length;G++){var q=X[G];switch(q.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var M=q;switch(M.type){case"Character":Y(M.value,W,Z);break;case"Set":if(M.complement===!0)throw Error(K);B.forEach(M.value,function(_){if(typeof _=="number")Y(_,W,Z);else{var w=_;if(Z===!0)for(var k=w.from;k<=w.to;k++)Y(k,W,Z);else{for(var k=w.from;k<=w.to&&k<C.minOptimizationVal;k++)Y(k,W,Z);if(w.to>=C.minOptimizationVal)for(var T=w.from>=C.minOptimizationVal?w.from:C.minOptimizationVal,z=w.to,j=C.charCodeToOptimizedIndex(T),v=C.charCodeToOptimizedIndex(z),g=j;g<=v;g++)W[g]=g}}});break;case"Group":U(M.value,W,Z);break;default:throw Error("Non Exhaustive Match")}var F=M.quantifier!==void 0&&M.quantifier.atLeast===0;if(M.type==="Group"&&O(M)===!1||M.type!=="Group"&&F===!1)break}break;default:throw Error("non exhaustive match!")}return B.values(W)}A.firstCharOptimizedIndices=U;function Y(L,W,Z){var G=C.charCodeToOptimizedIndex(L);W[G]=G,Z===!0&&H(L,W)}function H(L,W){var Z=String.fromCharCode(L),G=Z.toUpperCase();if(G!==Z){var X=C.charCodeToOptimizedIndex(G.charCodeAt(0));W[X]=X}else{var q=Z.toLowerCase();if(q!==Z){var X=C.charCodeToOptimizedIndex(q.charCodeAt(0));W[X]=X}}}function R(L,W){return B.find(L.value,function(Z){if(typeof Z=="number")return B.contains(W,Z);var G=Z;return B.find(W,function(X){return G.from<=X&&X<=G.to})!==void 0})}function O(L){return L.quantifier&&L.quantifier.atLeast===0?!0:L.value?B.isArray(L.value)?B.every(L.value,O):O(L.value):!1}var N=function(L){Q(W,L);function W(Z){var G=L.call(this)||this;return G.targetCharCodes=Z,G.found=!1,G}return W.prototype.visitChildren=function(Z){if(this.found!==!0){switch(Z.type){case"Lookahead":this.visitLookahead(Z);return;case"NegativeLookahead":this.visitNegativeLookahead(Z);return}L.prototype.visitChildren.call(this,Z)}},W.prototype.visitCharacter=function(Z){B.contains(this.targetCharCodes,Z.value)&&(this.found=!0)},W.prototype.visitSet=function(Z){Z.complement?R(Z,this.targetCharCodes)===void 0&&(this.found=!0):R(Z,this.targetCharCodes)!==void 0&&(this.found=!0)},W}(E.BaseRegExpVisitor);function $(L,W){if(W instanceof RegExp){var Z=I.getRegExpAst(W),G=new N(L);return G.visit(Z),G.found}else return B.find(W,function(X){return B.contains(L,X.charCodeAt(0))})!==void 0}A.canMatchCharCode=$}),XX=P0((A)=>{var Q=A&&A.__extends||function(){var n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var BA in e)Object.prototype.hasOwnProperty.call(e,BA)&&(o[BA]=e[BA])},n(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");n(l,c);function o(){this.constructor=l}l.prototype=c===null?Object.create(c):(o.prototype=c.prototype,new o)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.charCodeToOptimizedIndex=A.minOptimizationVal=A.buildLineBreakIssueMessage=A.LineTerminatorOptimizedTester=A.isShortPattern=A.isCustomPattern=A.cloneEmptyGroups=A.performWarningRuntimeChecks=A.performRuntimeChecks=A.addStickyFlag=A.addStartOfInput=A.findUnreachablePatterns=A.findModesThatDoNotExist=A.findInvalidGroupType=A.findDuplicatePatterns=A.findUnsupportedFlags=A.findStartOfInputAnchor=A.findEmptyMatchRegExps=A.findEndOfInputAnchor=A.findInvalidPatterns=A.findMissingPatterns=A.validatePatterns=A.analyzeTokenTypes=A.enableSticky=A.disableSticky=A.SUPPORT_STICKY=A.MODES=A.DEFAULT_MODE=void 0;var E=O7(),B=SU(),I=t0(),C=zk(),K=H7(),J="PATTERN";A.DEFAULT_MODE="defaultMode",A.MODES="modes",A.SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function U(){A.SUPPORT_STICKY=!1}A.disableSticky=U;function Y(){A.SUPPORT_STICKY=!0}A.enableSticky=Y;function H(n,l){l=I.defaults(l,{useSticky:A.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(QA,t){return t()}});var c=l.tracer;c("initCharCodeToOptimizedIndexMap",function(){i()});var o;c("Reject Lexer.NA",function(){o=I.reject(n,function(QA){return QA[J]===B.Lexer.NA})});var e=!1,BA;c("Transform Patterns",function(){e=!1,BA=I.map(o,function(QA){var t=QA[J];if(I.isRegExp(t)){var KA=t.source;return KA.length===1&&KA!=="^"&&KA!=="$"&&KA!=="."&&!t.ignoreCase?KA:KA.length===2&&KA[0]==="\\"&&!I.contains(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],KA[1])?KA[1]:l.useSticky?z(t):T(t)}else{if(I.isFunction(t))return e=!0,{exec:t};if(I.has(t,"exec"))return e=!0,t;if(typeof t=="string"){if(t.length===1)return t;var HA=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),fA=new RegExp(HA);return l.useSticky?z(fA):T(fA)}else throw Error("non exhaustive match")}})});var EA,CA,f,NA,YA;c("misc mapping",function(){EA=I.map(o,function(QA){return QA.tokenTypeIdx}),CA=I.map(o,function(QA){var t=QA.GROUP;if(t!==B.Lexer.SKIPPED){if(I.isString(t))return t;if(I.isUndefined(t))return!1;throw Error("non exhaustive match")}}),f=I.map(o,function(QA){var t=QA.LONGER_ALT;if(t){var KA=I.indexOf(o,t);return KA}}),NA=I.map(o,function(QA){return QA.PUSH_MODE}),YA=I.map(o,function(QA){return I.has(QA,"POP_MODE")})});var FA;c("Line Terminator Handling",function(){var QA=x(l.lineTerminatorCharacters);FA=I.map(o,function(t){return!1}),l.positionTracking!=="onlyOffset"&&(FA=I.map(o,function(t){if(I.has(t,"LINE_BREAKS"))return t.LINE_BREAKS;if(S(t,QA)===!1)return C.canMatchCharCode(QA,t.PATTERN)}))});var ZA,jA,wA,VA;c("Misc Mapping #2",function(){ZA=I.map(o,P),jA=I.map(BA,V),wA=I.reduce(o,function(QA,t){var KA=t.GROUP;return I.isString(KA)&&KA!==B.Lexer.SKIPPED&&(QA[KA]=[]),QA},{}),VA=I.map(BA,function(QA,t){return{pattern:BA[t],longerAlt:f[t],canLineTerminator:FA[t],isCustom:ZA[t],short:jA[t],group:CA[t],push:NA[t],pop:YA[t],tokenTypeIdx:EA[t],tokenType:o[t]}})});var d=!0,u=[];return l.safeMode||c("First Char Optimization",function(){u=I.reduce(o,function(QA,t,KA){if(typeof t.PATTERN=="string"){var HA=t.PATTERN.charCodeAt(0),fA=s(HA);b(QA,fA,VA[KA])}else if(I.isArray(t.START_CHARS_HINT)){var zA;I.forEach(t.START_CHARS_HINT,function(qA){var LA=typeof qA=="string"?qA.charCodeAt(0):qA,_A=s(LA);zA!==_A&&(zA=_A,b(QA,_A,VA[KA]))})}else if(I.isRegExp(t.PATTERN))if(t.PATTERN.unicode)d=!1,l.ensureOptimizations&&I.PRINT_ERROR(""+C.failedOptimizationPrefixMsg+("\tUnable to analyze < "+t.PATTERN.toString()+` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var yA=C.getOptimizedStartCodesIndices(t.PATTERN,l.ensureOptimizations);I.isEmpty(yA)&&(d=!1),I.forEach(yA,function(qA){b(QA,qA,VA[KA])})}else l.ensureOptimizations&&I.PRINT_ERROR(""+C.failedOptimizationPrefixMsg+("\tTokenType: <"+t.name+`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),d=!1;return QA},[])}),c("ArrayPacking",function(){u=I.packArray(u)}),{emptyGroups:wA,patternIdxToConfig:VA,charCodeToPatternIdxToConfig:u,hasCustom:e,canBeOptimized:d}}A.analyzeTokenTypes=H;function R(n,l){var c=[],o=N(n);c=c.concat(o.errors);var e=$(o.valid),BA=e.valid;return c=c.concat(e.errors),c=c.concat(O(BA)),c=c.concat(F(BA)),c=c.concat(D(BA,l)),c=c.concat(_(BA)),c}A.validatePatterns=R;function O(n){var l=[],c=I.filter(n,function(o){return I.isRegExp(o[J])});return l=l.concat(W(c)),l=l.concat(X(c)),l=l.concat(q(c)),l=l.concat(M(c)),l=l.concat(Z(c)),l}function N(n){var l=I.filter(n,function(e){return!I.has(e,J)}),c=I.map(l,function(e){return{message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:B.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[e]}}),o=I.difference(n,l);return{errors:c,valid:o}}A.findMissingPatterns=N;function $(n){var l=I.filter(n,function(e){var BA=e[J];return!I.isRegExp(BA)&&!I.isFunction(BA)&&!I.has(BA,"exec")&&!I.isString(BA)}),c=I.map(l,function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:B.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[e]}}),o=I.difference(n,l);return{errors:c,valid:o}}A.findInvalidPatterns=$;var L=/[^\\][\$]/;function W(n){var l=function(e){Q(BA,e);function BA(){var EA=e!==null&&e.apply(this,arguments)||this;return EA.found=!1,EA}return BA.prototype.visitEndAnchor=function(EA){this.found=!0},BA}(E.BaseRegExpVisitor),c=I.filter(n,function(e){var BA=e[J];try{var EA=K.getRegExpAst(BA),CA=new l;return CA.visit(EA),CA.found}catch(f){return L.test(BA.source)}}),o=I.map(c,function(e){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+e.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:B.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[e]}});return o}A.findEndOfInputAnchor=W;function Z(n){var l=I.filter(n,function(o){var e=o[J];return e.test("")}),c=I.map(l,function(o){return{message:"Token Type: ->"+o.name+"<- static 'PATTERN' must not match an empty string",type:B.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[o]}});return c}A.findEmptyMatchRegExps=Z;var G=/[^\\[][\^]|^\^/;function X(n){var l=function(e){Q(BA,e);function BA(){var EA=e!==null&&e.apply(this,arguments)||this;return EA.found=!1,EA}return BA.prototype.visitStartAnchor=function(EA){this.found=!0},BA}(E.BaseRegExpVisitor),c=I.filter(n,function(e){var BA=e[J];try{var EA=K.getRegExpAst(BA),CA=new l;return CA.visit(EA),CA.found}catch(f){return G.test(BA.source)}}),o=I.map(c,function(e){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+e.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:B.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[e]}});return o}A.findStartOfInputAnchor=X;function q(n){var l=I.filter(n,function(o){var e=o[J];return e instanceof RegExp&&(e.multiline||e.global)}),c=I.map(l,function(o){return{message:"Token Type: ->"+o.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:B.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[o]}});return c}A.findUnsupportedFlags=q;function M(n){var l=[],c=I.map(n,function(BA){return I.reduce(n,function(EA,CA){return BA.PATTERN.source===CA.PATTERN.source&&!I.contains(l,CA)&&CA.PATTERN!==B.Lexer.NA&&(l.push(CA),EA.push(CA)),EA},[])});c=I.compact(c);var o=I.filter(c,function(BA){return BA.length>1}),e=I.map(o,function(BA){var EA=I.map(BA,function(f){return f.name}),CA=I.first(BA).PATTERN;return{message:"The same RegExp pattern ->"+CA+"<-"+("has been used in all of the following Token Types: "+EA.join(", ")+" <-"),type:B.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:BA}});return e}A.findDuplicatePatterns=M;function F(n){var l=I.filter(n,function(o){if(!I.has(o,"GROUP"))return!1;var e=o.GROUP;return e!==B.Lexer.SKIPPED&&e!==B.Lexer.NA&&!I.isString(e)}),c=I.map(l,function(o){return{message:"Token Type: ->"+o.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:B.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[o]}});return c}A.findInvalidGroupType=F;function D(n,l){var c=I.filter(n,function(e){return e.PUSH_MODE!==void 0&&!I.contains(l,e.PUSH_MODE)}),o=I.map(c,function(e){var BA="Token Type: ->"+e.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+e.PUSH_MODE+"<-which does not exist";return{message:BA,type:B.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]}});return o}A.findModesThatDoNotExist=D;function _(n){var l=[],c=I.reduce(n,function(o,e,BA){var EA=e.PATTERN;return EA===B.Lexer.NA||(I.isString(EA)?o.push({str:EA,idx:BA,tokenType:e}):I.isRegExp(EA)&&k(EA)&&o.push({str:EA.source,idx:BA,tokenType:e})),o},[]);return I.forEach(n,function(o,e){I.forEach(c,function(BA){var{str:EA,idx:CA,tokenType:f}=BA;if(e<CA&&w(EA,o.PATTERN)){var NA="Token: ->"+f.name+`<- can never be matched.
`+("Because it appears AFTER the Token Type ->"+o.name+"<-")+`in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;l.push({message:NA,type:B.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[o,f]})}})}),l}A.findUnreachablePatterns=_;function w(n,l){if(I.isRegExp(l)){var c=l.exec(n);return c!==null&&c.index===0}else{if(I.isFunction(l))return l(n,0,[],{});if(I.has(l,"exec"))return l.exec(n,0,[],{});if(typeof l=="string")return l===n;throw Error("non exhaustive match")}}function k(n){var l=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return I.find(l,function(c){return n.source.indexOf(c)!==-1})===void 0}function T(n){var l=n.ignoreCase?"i":"";return new RegExp("^(?:"+n.source+")",l)}A.addStartOfInput=T;function z(n){var l=n.ignoreCase?"iy":"y";return new RegExp(""+n.source,l)}A.addStickyFlag=z;function j(n,l,c){var o=[];return I.has(n,A.DEFAULT_MODE)||o.push({message:"A MultiMode Lexer cannot be initialized without a <"+A.DEFAULT_MODE+`> property in its definition
`,type:B.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),I.has(n,A.MODES)||o.push({message:"A MultiMode Lexer cannot be initialized without a <"+A.MODES+`> property in its definition
`,type:B.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),I.has(n,A.MODES)&&I.has(n,A.DEFAULT_MODE)&&!I.has(n.modes,n.defaultMode)&&o.push({message:"A MultiMode Lexer cannot be initialized with a "+A.DEFAULT_MODE+": <"+n.defaultMode+`>which does not exist
`,type:B.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),I.has(n,A.MODES)&&I.forEach(n.modes,function(e,BA){I.forEach(e,function(EA,CA){I.isUndefined(EA)&&o.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+("<"+BA+"> at index: <"+CA+`>
`),type:B.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),o}A.performRuntimeChecks=j;function v(n,l,c){var o=[],e=!1,BA=I.compact(I.flatten(I.mapValues(n.modes,function(f){return f}))),EA=I.reject(BA,function(f){return f[J]===B.Lexer.NA}),CA=x(c);return l&&I.forEach(EA,function(f){var NA=S(f,CA);if(NA!==!1){var YA=h(f,NA),FA={message:YA,type:NA.issue,tokenType:f};o.push(FA)}else I.has(f,"LINE_BREAKS")?f.LINE_BREAKS===!0&&(e=!0):C.canMatchCharCode(CA,f.PATTERN)&&(e=!0)}),l&&!e&&o.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS
	for details.`,type:B.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),o}A.performWarningRuntimeChecks=v;function g(n){var l={},c=I.keys(n);return I.forEach(c,function(o){var e=n[o];if(I.isArray(e))l[o]=[];else throw Error("non exhaustive match")}),l}A.cloneEmptyGroups=g;function P(n){var l=n.PATTERN;if(I.isRegExp(l))return!1;if(I.isFunction(l))return!0;if(I.has(l,"exec"))return!0;if(I.isString(l))return!1;throw Error("non exhaustive match")}A.isCustomPattern=P;function V(n){return I.isString(n)&&n.length===1?n.charCodeAt(0):!1}A.isShortPattern=V,A.LineTerminatorOptimizedTester={test:function(n){for(var l=n.length,c=this.lastIndex;c<l;c++){var o=n.charCodeAt(c);if(o===10)return this.lastIndex=c+1,!0;if(o===13)return n.charCodeAt(c+1)===10?this.lastIndex=c+2:this.lastIndex=c+1,!0}return!1},lastIndex:0};function S(n,l){if(I.has(n,"LINE_BREAKS"))return!1;if(I.isRegExp(n.PATTERN)){try{C.canMatchCharCode(l,n.PATTERN)}catch(c){return{issue:B.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:c.message}}return!1}else{if(I.isString(n.PATTERN))return!1;if(P(n))return{issue:B.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function h(n,l){if(l.issue===B.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+("\tThe problem is in the <"+n.name+`> Token Type
`)+("\t Root cause: "+l.errMsg+`.
`)+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(l.issue===B.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+("\tThe problem is in the <"+n.name+`> Token Type
`)+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}A.buildLineBreakIssueMessage=h;function x(n){var l=I.map(n,function(c){return I.isString(c)&&c.length>0?c.charCodeAt(0):c});return l}function b(n,l,c){n[l]===void 0?n[l]=[c]:n[l].push(c)}A.minOptimizationVal=256;var m=[];function s(n){return n<A.minOptimizationVal?n:m[n]}A.charCodeToOptimizedIndex=s;function i(){if(I.isEmpty(m)){m=new Array(65536);for(var n=0;n<65536;n++)m[n]=n>255?255+~~(n/255):n}}}),qK=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.isTokenType=A.hasExtendingTokensTypesMapProperty=A.hasExtendingTokensTypesProperty=A.hasCategoriesProperty=A.hasShortKeyProperty=A.singleAssignCategoriesToksMap=A.assignCategoriesMapProp=A.assignCategoriesTokensProp=A.assignTokenDefaultProps=A.expandCategories=A.augmentTokenTypes=A.tokenIdxToClass=A.tokenShortNameIdx=A.tokenStructuredMatcherNoCategories=A.tokenStructuredMatcher=void 0;var Q=t0();function E(L,W){var Z=L.tokenTypeIdx;return Z===W.tokenTypeIdx?!0:W.isParent===!0&&W.categoryMatchesMap[Z]===!0}A.tokenStructuredMatcher=E;function B(L,W){return L.tokenTypeIdx===W.tokenTypeIdx}A.tokenStructuredMatcherNoCategories=B,A.tokenShortNameIdx=1,A.tokenIdxToClass={};function I(L){var W=C(L);K(W),U(W),J(W),Q.forEach(W,function(Z){Z.isParent=Z.categoryMatches.length>0})}A.augmentTokenTypes=I;function C(L){for(var W=Q.cloneArr(L),Z=L,G=!0;G;){Z=Q.compact(Q.flatten(Q.map(Z,function(q){return q.CATEGORIES})));var X=Q.difference(Z,W);W=W.concat(X),Q.isEmpty(X)?G=!1:Z=X}return W}A.expandCategories=C;function K(L){Q.forEach(L,function(W){H(W)||(A.tokenIdxToClass[A.tokenShortNameIdx]=W,W.tokenTypeIdx=A.tokenShortNameIdx++),R(W)&&!Q.isArray(W.CATEGORIES)&&(W.CATEGORIES=[W.CATEGORIES]),R(W)||(W.CATEGORIES=[]),O(W)||(W.categoryMatches=[]),N(W)||(W.categoryMatchesMap={})})}A.assignTokenDefaultProps=K;function J(L){Q.forEach(L,function(W){W.categoryMatches=[],Q.forEach(W.categoryMatchesMap,function(Z,G){W.categoryMatches.push(A.tokenIdxToClass[G].tokenTypeIdx)})})}A.assignCategoriesTokensProp=J;function U(L){Q.forEach(L,function(W){Y([],W)})}A.assignCategoriesMapProp=U;function Y(L,W){Q.forEach(L,function(Z){W.categoryMatchesMap[Z.tokenTypeIdx]=!0}),Q.forEach(W.CATEGORIES,function(Z){var G=L.concat(W);Q.contains(G,Z)||Y(G,Z)})}A.singleAssignCategoriesToksMap=Y;function H(L){return Q.has(L,"tokenTypeIdx")}A.hasShortKeyProperty=H;function R(L){return Q.has(L,"CATEGORIES")}A.hasCategoriesProperty=R;function O(L){return Q.has(L,"categoryMatches")}A.hasExtendingTokensTypesProperty=O;function N(L){return Q.has(L,"categoryMatchesMap")}A.hasExtendingTokensTypesMapProperty=N;function $(L){return Q.has(L,"tokenTypeIdx")}A.isTokenType=$}),$X=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.defaultLexerErrorProvider=void 0,A.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(Q){return"Unable to pop Lexer Mode after encountering Token ->"+Q.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(Q,E,B,I,C){return"unexpected character: ->"+Q.charAt(E)+"<- at offset: "+E+","+(" skipped "+B+" characters.")}}}),SU=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.Lexer=A.LexerDefinitionErrorType=void 0;var Q=XX(),E=t0(),B=qK(),I=$X(),C=H7(),K;(function(Y){Y[Y.MISSING_PATTERN=0]="MISSING_PATTERN",Y[Y.INVALID_PATTERN=1]="INVALID_PATTERN",Y[Y.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",Y[Y.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",Y[Y.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",Y[Y.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",Y[Y.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",Y[Y.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",Y[Y.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",Y[Y.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",Y[Y.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",Y[Y.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",Y[Y.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",Y[Y.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",Y[Y.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",Y[Y.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",Y[Y.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(K=A.LexerDefinitionErrorType||(A.LexerDefinitionErrorType={}));var J={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:I.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(J);var U=function(){function Y(H,R){var O=this;if(R===void 0&&(R=J),this.lexerDefinition=H,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},typeof R=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=E.merge(J,R);var N=this.config.traceInitPerf;N===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof N=="number"&&(this.traceInitMaxIdent=N,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var $,L=!0;O.TRACE_INIT("Lexer Config handling",function(){if(O.config.lineTerminatorsPattern===J.lineTerminatorsPattern)O.config.lineTerminatorsPattern=Q.LineTerminatorOptimizedTester;else if(O.config.lineTerminatorCharacters===J.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(R.safeMode&&R.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');O.trackStartLines=/full|onlyStart/i.test(O.config.positionTracking),O.trackEndLines=/full/i.test(O.config.positionTracking),E.isArray(H)?($={modes:{}},$.modes[Q.DEFAULT_MODE]=E.cloneArr(H),$[Q.DEFAULT_MODE]=Q.DEFAULT_MODE):(L=!1,$=E.cloneObj(H))}),O.config.skipValidations===!1&&(O.TRACE_INIT("performRuntimeChecks",function(){O.lexerDefinitionErrors=O.lexerDefinitionErrors.concat(Q.performRuntimeChecks($,O.trackStartLines,O.config.lineTerminatorCharacters))}),O.TRACE_INIT("performWarningRuntimeChecks",function(){O.lexerDefinitionWarning=O.lexerDefinitionWarning.concat(Q.performWarningRuntimeChecks($,O.trackStartLines,O.config.lineTerminatorCharacters))})),$.modes=$.modes?$.modes:{},E.forEach($.modes,function(X,q){$.modes[q]=E.reject(X,function(M){return E.isUndefined(M)})});var W=E.keys($.modes);if(E.forEach($.modes,function(X,q){O.TRACE_INIT("Mode: <"+q+"> processing",function(){if(O.modes.push(q),O.config.skipValidations===!1&&O.TRACE_INIT("validatePatterns",function(){O.lexerDefinitionErrors=O.lexerDefinitionErrors.concat(Q.validatePatterns(X,W))}),E.isEmpty(O.lexerDefinitionErrors)){B.augmentTokenTypes(X);var M;O.TRACE_INIT("analyzeTokenTypes",function(){M=Q.analyzeTokenTypes(X,{lineTerminatorCharacters:O.config.lineTerminatorCharacters,positionTracking:R.positionTracking,ensureOptimizations:R.ensureOptimizations,safeMode:R.safeMode,tracer:O.TRACE_INIT.bind(O)})}),O.patternIdxToConfig[q]=M.patternIdxToConfig,O.charCodeToPatternIdxToConfig[q]=M.charCodeToPatternIdxToConfig,O.emptyGroups=E.merge(O.emptyGroups,M.emptyGroups),O.hasCustom=M.hasCustom||O.hasCustom,O.canModeBeOptimized[q]=M.canBeOptimized}})}),O.defaultMode=$.defaultMode,!E.isEmpty(O.lexerDefinitionErrors)&&!O.config.deferDefinitionErrorsHandling){var Z=E.map(O.lexerDefinitionErrors,function(X){return X.message}),G=Z.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+G)}E.forEach(O.lexerDefinitionWarning,function(X){E.PRINT_WARNING(X.message)}),O.TRACE_INIT("Choosing sub-methods implementations",function(){if(Q.SUPPORT_STICKY?(O.chopInput=E.IDENTITY,O.match=O.matchWithTest):(O.updateLastIndex=E.NOOP,O.match=O.matchWithExec),L&&(O.handleModes=E.NOOP),O.trackStartLines===!1&&(O.computeNewColumn=E.IDENTITY),O.trackEndLines===!1&&(O.updateTokenEndLineColumnLocation=E.NOOP),/full/i.test(O.config.positionTracking))O.createTokenInstance=O.createFullToken;else if(/onlyStart/i.test(O.config.positionTracking))O.createTokenInstance=O.createStartOnlyToken;else if(/onlyOffset/i.test(O.config.positionTracking))O.createTokenInstance=O.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+O.config.positionTracking+'"');O.hasCustom?(O.addToken=O.addTokenUsingPush,O.handlePayload=O.handlePayloadWithCustom):(O.addToken=O.addTokenUsingMemberAccess,O.handlePayload=O.handlePayloadNoCustom)}),O.TRACE_INIT("Failed Optimization Warnings",function(){var X=E.reduce(O.canModeBeOptimized,function(q,M,F){return M===!1&&q.push(F),q},[]);if(R.ensureOptimizations&&!E.isEmpty(X))throw Error("Lexer Modes: < "+X.join(", ")+` > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),O.TRACE_INIT("clearRegExpParserCache",function(){C.clearRegExpParserCache()}),O.TRACE_INIT("toFastProperties",function(){E.toFastProperties(O)})})}return Y.prototype.tokenize=function(H,R){if(R===void 0&&(R=this.defaultMode),!E.isEmpty(this.lexerDefinitionErrors)){var O=E.map(this.lexerDefinitionErrors,function(L){return L.message}),N=O.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+N)}var $=this.tokenizeInternal(H,R);return $},Y.prototype.tokenizeInternal=function(H,R){var O=this,N,$,L,W,Z,G,X,q,M,F,D,_,w,k,T,z=H,j=z.length,v=0,g=0,P=this.hasCustom?0:Math.floor(H.length/10),V=new Array(P),S=[],h=this.trackStartLines?1:void 0,x=this.trackStartLines?1:void 0,b=Q.cloneEmptyGroups(this.emptyGroups),m=this.trackStartLines,s=this.config.lineTerminatorsPattern,i=0,n=[],l=[],c=[],o=[];Object.freeze(o);var e=void 0;function BA(){return n}function EA(qA){var LA=Q.charCodeToOptimizedIndex(qA),_A=l[LA];return _A===void 0?o:_A}var CA=function(qA){if(c.length===1&&qA.tokenType.PUSH_MODE===void 0){var LA=O.config.errorMessageProvider.buildUnableToPopLexerModeMessage(qA);S.push({offset:qA.startOffset,line:qA.startLine!==void 0?qA.startLine:void 0,column:qA.startColumn!==void 0?qA.startColumn:void 0,length:qA.image.length,message:LA})}else{c.pop();var _A=E.last(c);n=O.patternIdxToConfig[_A],l=O.charCodeToPatternIdxToConfig[_A],i=n.length;var B0=O.canModeBeOptimized[_A]&&O.config.safeMode===!1;l&&B0?e=EA:e=BA}};function f(qA){c.push(qA),l=this.charCodeToPatternIdxToConfig[qA],n=this.patternIdxToConfig[qA],i=n.length,i=n.length;var LA=this.canModeBeOptimized[qA]&&this.config.safeMode===!1;l&&LA?e=EA:e=BA}f.call(this,R);for(var NA;v<j;){Z=null;var YA=z.charCodeAt(v),FA=e(YA),ZA=FA.length;for(N=0;N<ZA;N++){NA=FA[N];var jA=NA.pattern;G=null;var wA=NA.short;if(wA!==!1?YA===wA&&(Z=jA):NA.isCustom===!0?(T=jA.exec(z,v,V,b),T!==null?(Z=T[0],T.payload!==void 0&&(G=T.payload)):Z=null):(this.updateLastIndex(jA,v),Z=this.match(jA,H,v)),Z!==null){if(W=NA.longerAlt,W!==void 0){var VA=n[W],d=VA.pattern;X=null,VA.isCustom===!0?(T=d.exec(z,v,V,b),T!==null?(L=T[0],T.payload!==void 0&&(X=T.payload)):L=null):(this.updateLastIndex(d,v),L=this.match(d,H,v)),L&&L.length>Z.length&&(Z=L,G=X,NA=VA)}break}}if(Z!==null){if(q=Z.length,M=NA.group,M!==void 0&&(F=NA.tokenTypeIdx,D=this.createTokenInstance(Z,v,F,NA.tokenType,h,x,q),this.handlePayload(D,G),M===!1?g=this.addToken(V,g,D):b[M].push(D)),H=this.chopInput(H,q),v=v+q,x=this.computeNewColumn(x,q),m===!0&&NA.canLineTerminator===!0){var u=0,QA=void 0,t=void 0;s.lastIndex=0;do QA=s.test(Z),QA===!0&&(t=s.lastIndex-1,u++);while(QA===!0);u!==0&&(h=h+u,x=q-t,this.updateTokenEndLineColumnLocation(D,M,t,u,h,x,q))}this.handleModes(NA,CA,f,D)}else{for(var KA=v,HA=h,fA=x,zA=!1;!zA&&v<j;)for(w=z.charCodeAt(v),H=this.chopInput(H,1),v++,$=0;$<i;$++){var yA=n[$],jA=yA.pattern,wA=yA.short;if(wA!==!1?z.charCodeAt(v)===wA&&(zA=!0):yA.isCustom===!0?zA=jA.exec(z,v,V,b)!==null:(this.updateLastIndex(jA,v),zA=jA.exec(H)!==null),zA===!0)break}_=v-KA,k=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(z,KA,_,HA,fA),S.push({offset:KA,line:HA,column:fA,length:_,message:k})}}return this.hasCustom||(V.length=g),{tokens:V,groups:b,errors:S}},Y.prototype.handleModes=function(H,R,O,N){if(H.pop===!0){var $=H.push;R(N),$!==void 0&&O.call(this,$)}else H.push!==void 0&&O.call(this,H.push)},Y.prototype.chopInput=function(H,R){return H.substring(R)},Y.prototype.updateLastIndex=function(H,R){H.lastIndex=R},Y.prototype.updateTokenEndLineColumnLocation=function(H,R,O,N,$,L,W){var Z,G;R!==void 0&&(Z=O===W-1,G=Z?-1:0,N===1&&Z===!0||(H.endLine=$+G,H.endColumn=L-1+-G))},Y.prototype.computeNewColumn=function(H,R){return H+R},Y.prototype.createTokenInstance=function(){for(var H=[],R=0;R<arguments.length;R++)H[R]=arguments[R];return null},Y.prototype.createOffsetOnlyToken=function(H,R,O,N){return{image:H,startOffset:R,tokenTypeIdx:O,tokenType:N}},Y.prototype.createStartOnlyToken=function(H,R,O,N,$,L){return{image:H,startOffset:R,startLine:$,startColumn:L,tokenTypeIdx:O,tokenType:N}},Y.prototype.createFullToken=function(H,R,O,N,$,L,W){return{image:H,startOffset:R,endOffset:R+W-1,startLine:$,endLine:$,startColumn:L,endColumn:L+W-1,tokenTypeIdx:O,tokenType:N}},Y.prototype.addToken=function(H,R,O){return 666},Y.prototype.addTokenUsingPush=function(H,R,O){return H.push(O),R},Y.prototype.addTokenUsingMemberAccess=function(H,R,O){return H[R]=O,R++,R},Y.prototype.handlePayload=function(H,R){},Y.prototype.handlePayloadNoCustom=function(H,R){},Y.prototype.handlePayloadWithCustom=function(H,R){R!==null&&(H.payload=R)},Y.prototype.match=function(H,R,O){return null},Y.prototype.matchWithTest=function(H,R,O){var N=H.test(R);return N===!0?R.substring(O,H.lastIndex):null},Y.prototype.matchWithExec=function(H,R){var O=H.exec(R);return O!==null?O[0]:O},Y.prototype.TRACE_INIT=function(H,R){if(this.traceInitPerf===!0){this.traceInitIndent++;var O=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(O+"--> <"+H+">");var N=E.timer(R),$=N.time,L=N.value,W=$>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&W(O+"<-- <"+H+"> time: "+$+"ms"),this.traceInitIndent--,L}else return R()},Y.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",Y.NA=/NOT_APPLICABLE/,Y}();A.Lexer=U}),i1=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.tokenMatcher=A.createTokenInstance=A.EOF=A.createToken=A.hasTokenLabel=A.tokenName=A.tokenLabel=void 0;var Q=t0(),E=SU(),B=qK();function I(q){return K(q)?q.LABEL:q.name}A.tokenLabel=I;function C(q){return q.name}A.tokenName=C;function K(q){return Q.isString(q.LABEL)&&q.LABEL!==""}A.hasTokenLabel=K;var J="parent",U="categories",Y="label",H="group",R="push_mode",O="pop_mode",N="longer_alt",$="line_breaks",L="start_chars_hint";function W(q){return Z(q)}A.createToken=W;function Z(q){var M=q.pattern,F={};if(F.name=q.name,Q.isUndefined(M)||(F.PATTERN=M),Q.has(q,J))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return Q.has(q,U)&&(F.CATEGORIES=q[U]),B.augmentTokenTypes([F]),Q.has(q,Y)&&(F.LABEL=q[Y]),Q.has(q,H)&&(F.GROUP=q[H]),Q.has(q,O)&&(F.POP_MODE=q[O]),Q.has(q,R)&&(F.PUSH_MODE=q[R]),Q.has(q,N)&&(F.LONGER_ALT=q[N]),Q.has(q,$)&&(F.LINE_BREAKS=q[$]),Q.has(q,L)&&(F.START_CHARS_HINT=q[L]),F}A.EOF=W({name:"EOF",pattern:E.Lexer.NA}),B.augmentTokenTypes([A.EOF]);function G(q,M,F,D,_,w,k,T){return{image:M,startOffset:F,endOffset:D,startLine:_,endLine:w,startColumn:k,endColumn:T,tokenTypeIdx:q.tokenTypeIdx,tokenType:q}}A.createTokenInstance=G;function X(q,M){return B.tokenStructuredMatcher(q,M)}A.tokenMatcher=X}),mE=P0((A)=>{var Q=A&&A.__extends||function(){var Z=function(G,X){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,M){q.__proto__=M}||function(q,M){for(var F in M)Object.prototype.hasOwnProperty.call(M,F)&&(q[F]=M[F])},Z(G,X)};return function(G,X){if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");Z(G,X);function q(){this.constructor=G}G.prototype=X===null?Object.create(X):(q.prototype=X.prototype,new q)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.serializeProduction=A.serializeGrammar=A.Terminal=A.Alternation=A.RepetitionWithSeparator=A.Repetition=A.RepetitionMandatoryWithSeparator=A.RepetitionMandatory=A.Option=A.Alternative=A.Rule=A.NonTerminal=A.AbstractProduction=void 0;var E=t0(),B=i1(),I=function(){function Z(G){this._definition=G}return Object.defineProperty(Z.prototype,"definition",{get:function(){return this._definition},set:function(G){this._definition=G},enumerable:!1,configurable:!0}),Z.prototype.accept=function(G){G.visit(this),E.forEach(this.definition,function(X){X.accept(G)})},Z}();A.AbstractProduction=I;var C=function(Z){Q(G,Z);function G(X){var q=Z.call(this,[])||this;return q.idx=1,E.assign(q,E.pick(X,function(M){return M!==void 0})),q}return Object.defineProperty(G.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(X){},enumerable:!1,configurable:!0}),G.prototype.accept=function(X){X.visit(this)},G}(I);A.NonTerminal=C;var K=function(Z){Q(G,Z);function G(X){var q=Z.call(this,X.definition)||this;return q.orgText="",E.assign(q,E.pick(X,function(M){return M!==void 0})),q}return G}(I);A.Rule=K;var J=function(Z){Q(G,Z);function G(X){var q=Z.call(this,X.definition)||this;return q.ignoreAmbiguities=!1,E.assign(q,E.pick(X,function(M){return M!==void 0})),q}return G}(I);A.Alternative=J;var U=function(Z){Q(G,Z);function G(X){var q=Z.call(this,X.definition)||this;return q.idx=1,E.assign(q,E.pick(X,function(M){return M!==void 0})),q}return G}(I);A.Option=U;var Y=function(Z){Q(G,Z);function G(X){var q=Z.call(this,X.definition)||this;return q.idx=1,E.assign(q,E.pick(X,function(M){return M!==void 0})),q}return G}(I);A.RepetitionMandatory=Y;var H=function(Z){Q(G,Z);function G(X){var q=Z.call(this,X.definition)||this;return q.idx=1,E.assign(q,E.pick(X,function(M){return M!==void 0})),q}return G}(I);A.RepetitionMandatoryWithSeparator=H;var R=function(Z){Q(G,Z);function G(X){var q=Z.call(this,X.definition)||this;return q.idx=1,E.assign(q,E.pick(X,function(M){return M!==void 0})),q}return G}(I);A.Repetition=R;var O=function(Z){Q(G,Z);function G(X){var q=Z.call(this,X.definition)||this;return q.idx=1,E.assign(q,E.pick(X,function(M){return M!==void 0})),q}return G}(I);A.RepetitionWithSeparator=O;var N=function(Z){Q(G,Z);function G(X){var q=Z.call(this,X.definition)||this;return q.idx=1,q.ignoreAmbiguities=!1,q.hasPredicates=!1,E.assign(q,E.pick(X,function(M){return M!==void 0})),q}return Object.defineProperty(G.prototype,"definition",{get:function(){return this._definition},set:function(X){this._definition=X},enumerable:!1,configurable:!0}),G}(I);A.Alternation=N;var $=function(){function Z(G){this.idx=1,E.assign(this,E.pick(G,function(X){return X!==void 0}))}return Z.prototype.accept=function(G){G.visit(this)},Z}();A.Terminal=$;function L(Z){return E.map(Z,W)}A.serializeGrammar=L;function W(Z){function G(M){return E.map(M,W)}if(Z instanceof C)return{type:"NonTerminal",name:Z.nonTerminalName,idx:Z.idx};if(Z instanceof J)return{type:"Alternative",definition:G(Z.definition)};if(Z instanceof U)return{type:"Option",idx:Z.idx,definition:G(Z.definition)};if(Z instanceof Y)return{type:"RepetitionMandatory",idx:Z.idx,definition:G(Z.definition)};if(Z instanceof H)return{type:"RepetitionMandatoryWithSeparator",idx:Z.idx,separator:W(new $({terminalType:Z.separator})),definition:G(Z.definition)};if(Z instanceof O)return{type:"RepetitionWithSeparator",idx:Z.idx,separator:W(new $({terminalType:Z.separator})),definition:G(Z.definition)};if(Z instanceof R)return{type:"Repetition",idx:Z.idx,definition:G(Z.definition)};if(Z instanceof N)return{type:"Alternation",idx:Z.idx,definition:G(Z.definition)};if(Z instanceof $){var X={type:"Terminal",name:Z.terminalType.name,label:B.tokenLabel(Z.terminalType),idx:Z.idx},q=Z.terminalType.PATTERN;return Z.terminalType.PATTERN&&(X.pattern=E.isRegExp(q)?q.source:q),X}else{if(Z instanceof K)return{type:"Rule",name:Z.name,orgText:Z.orgText,definition:G(Z.definition)};throw Error("non exhaustive match")}}A.serializeProduction=W}),Z7=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.RestWalker=void 0;var Q=t0(),E=mE(),B=function(){function C(){}return C.prototype.walk=function(K,J){var U=this;J===void 0&&(J=[]),Q.forEach(K.definition,function(Y,H){var R=Q.drop(K.definition,H+1);if(Y instanceof E.NonTerminal)U.walkProdRef(Y,R,J);else if(Y instanceof E.Terminal)U.walkTerminal(Y,R,J);else if(Y instanceof E.Alternative)U.walkFlat(Y,R,J);else if(Y instanceof E.Option)U.walkOption(Y,R,J);else if(Y instanceof E.RepetitionMandatory)U.walkAtLeastOne(Y,R,J);else if(Y instanceof E.RepetitionMandatoryWithSeparator)U.walkAtLeastOneSep(Y,R,J);else if(Y instanceof E.RepetitionWithSeparator)U.walkManySep(Y,R,J);else if(Y instanceof E.Repetition)U.walkMany(Y,R,J);else if(Y instanceof E.Alternation)U.walkOr(Y,R,J);else throw Error("non exhaustive match")})},C.prototype.walkTerminal=function(K,J,U){},C.prototype.walkProdRef=function(K,J,U){},C.prototype.walkFlat=function(K,J,U){var Y=J.concat(U);this.walk(K,Y)},C.prototype.walkOption=function(K,J,U){var Y=J.concat(U);this.walk(K,Y)},C.prototype.walkAtLeastOne=function(K,J,U){var Y=[new E.Option({definition:K.definition})].concat(J,U);this.walk(K,Y)},C.prototype.walkAtLeastOneSep=function(K,J,U){var Y=I(K,J,U);this.walk(K,Y)},C.prototype.walkMany=function(K,J,U){var Y=[new E.Option({definition:K.definition})].concat(J,U);this.walk(K,Y)},C.prototype.walkManySep=function(K,J,U){var Y=I(K,J,U);this.walk(K,Y)},C.prototype.walkOr=function(K,J,U){var Y=this,H=J.concat(U);Q.forEach(K.definition,function(R){var O=new E.Alternative({definition:[R]});Y.walk(O,H)})},C}();A.RestWalker=B;function I(C,K,J){var U=[new E.Option({definition:[new E.Terminal({terminalType:C.separator})].concat(C.definition)})],Y=U.concat(K,J);return Y}}),FK=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.GAstVisitor=void 0;var Q=mE(),E=function(){function B(){}return B.prototype.visit=function(I){var C=I;switch(C.constructor){case Q.NonTerminal:return this.visitNonTerminal(C);case Q.Alternative:return this.visitAlternative(C);case Q.Option:return this.visitOption(C);case Q.RepetitionMandatory:return this.visitRepetitionMandatory(C);case Q.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(C);case Q.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(C);case Q.Repetition:return this.visitRepetition(C);case Q.Alternation:return this.visitAlternation(C);case Q.Terminal:return this.visitTerminal(C);case Q.Rule:return this.visitRule(C);default:throw Error("non exhaustive match")}},B.prototype.visitNonTerminal=function(I){},B.prototype.visitAlternative=function(I){},B.prototype.visitOption=function(I){},B.prototype.visitRepetition=function(I){},B.prototype.visitRepetitionMandatory=function(I){},B.prototype.visitRepetitionMandatoryWithSeparator=function(I){},B.prototype.visitRepetitionWithSeparator=function(I){},B.prototype.visitAlternation=function(I){},B.prototype.visitTerminal=function(I){},B.prototype.visitRule=function(I){},B}();A.GAstVisitor=E}),TU=P0((A)=>{var Q=A&&A.__extends||function(){var O=function(N,$){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,W){L.__proto__=W}||function(L,W){for(var Z in W)Object.prototype.hasOwnProperty.call(W,Z)&&(L[Z]=W[Z])},O(N,$)};return function(N,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");O(N,$);function L(){this.constructor=N}N.prototype=$===null?Object.create($):(L.prototype=$.prototype,new L)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.collectMethods=A.DslMethodsCollectorVisitor=A.getProductionDslName=A.isBranchingProd=A.isOptionalProd=A.isSequenceProd=void 0;var E=t0(),B=mE(),I=FK();function C(O){return O instanceof B.Alternative||O instanceof B.Option||O instanceof B.Repetition||O instanceof B.RepetitionMandatory||O instanceof B.RepetitionMandatoryWithSeparator||O instanceof B.RepetitionWithSeparator||O instanceof B.Terminal||O instanceof B.Rule}A.isSequenceProd=C;function K(O,N){N===void 0&&(N=[]);var $=O instanceof B.Option||O instanceof B.Repetition||O instanceof B.RepetitionWithSeparator;return $?!0:O instanceof B.Alternation?E.some(O.definition,function(L){return K(L,N)}):O instanceof B.NonTerminal&&E.contains(N,O)?!1:O instanceof B.AbstractProduction?(O instanceof B.NonTerminal&&N.push(O),E.every(O.definition,function(L){return K(L,N)})):!1}A.isOptionalProd=K;function J(O){return O instanceof B.Alternation}A.isBranchingProd=J;function U(O){if(O instanceof B.NonTerminal)return"SUBRULE";if(O instanceof B.Option)return"OPTION";if(O instanceof B.Alternation)return"OR";if(O instanceof B.RepetitionMandatory)return"AT_LEAST_ONE";if(O instanceof B.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(O instanceof B.RepetitionWithSeparator)return"MANY_SEP";if(O instanceof B.Repetition)return"MANY";if(O instanceof B.Terminal)return"CONSUME";throw Error("non exhaustive match")}A.getProductionDslName=U;var Y=function(O){Q(N,O);function N(){var $=O!==null&&O.apply(this,arguments)||this;return $.separator="-",$.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},$}return N.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},N.prototype.visitTerminal=function($){var L=$.terminalType.name+this.separator+"Terminal";E.has(this.dslMethods,L)||(this.dslMethods[L]=[]),this.dslMethods[L].push($)},N.prototype.visitNonTerminal=function($){var L=$.nonTerminalName+this.separator+"Terminal";E.has(this.dslMethods,L)||(this.dslMethods[L]=[]),this.dslMethods[L].push($)},N.prototype.visitOption=function($){this.dslMethods.option.push($)},N.prototype.visitRepetitionWithSeparator=function($){this.dslMethods.repetitionWithSeparator.push($)},N.prototype.visitRepetitionMandatory=function($){this.dslMethods.repetitionMandatory.push($)},N.prototype.visitRepetitionMandatoryWithSeparator=function($){this.dslMethods.repetitionMandatoryWithSeparator.push($)},N.prototype.visitRepetition=function($){this.dslMethods.repetition.push($)},N.prototype.visitAlternation=function($){this.dslMethods.alternation.push($)},N}(I.GAstVisitor);A.DslMethodsCollectorVisitor=Y;var H=new Y;function R(O){H.reset(),O.accept(H);var N=H.dslMethods;return H.reset(),N}A.collectMethods=R}),LX=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.firstForTerminal=A.firstForBranching=A.firstForSequence=A.first=void 0;var Q=t0(),E=mE(),B=TU();function I(U){if(U instanceof E.NonTerminal)return I(U.referencedRule);if(U instanceof E.Terminal)return J(U);if(B.isSequenceProd(U))return C(U);if(B.isBranchingProd(U))return K(U);throw Error("non exhaustive match")}A.first=I;function C(U){for(var Y=[],H=U.definition,R=0,O=H.length>R,N,$=!0;O&&$;)N=H[R],$=B.isOptionalProd(N),Y=Y.concat(I(N)),R=R+1,O=H.length>R;return Q.uniq(Y)}A.firstForSequence=C;function K(U){var Y=Q.map(U.definition,function(H){return I(H)});return Q.uniq(Q.flatten(Y))}A.firstForBranching=K;function J(U){return[U.terminalType]}A.firstForTerminal=J}),qX=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.IN=void 0,A.IN="_~IN~_"}),Pk=P0((A)=>{var Q=A&&A.__extends||function(){var R=function(O,N){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,L){$.__proto__=L}||function($,L){for(var W in L)Object.prototype.hasOwnProperty.call(L,W)&&($[W]=L[W])},R(O,N)};return function(O,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");R(O,N);function $(){this.constructor=O}O.prototype=N===null?Object.create(N):($.prototype=N.prototype,new $)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.buildInProdFollowPrefix=A.buildBetweenProdsFollowPrefix=A.computeAllProdsFollows=A.ResyncFollowsWalker=void 0;var E=Z7(),B=LX(),I=t0(),C=qX(),K=mE(),J=function(R){Q(O,R);function O(N){var $=R.call(this)||this;return $.topProd=N,$.follows={},$}return O.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},O.prototype.walkTerminal=function(N,$,L){},O.prototype.walkProdRef=function(N,$,L){var W=Y(N.referencedRule,N.idx)+this.topProd.name,Z=$.concat(L),G=new K.Alternative({definition:Z}),X=B.first(G);this.follows[W]=X},O}(E.RestWalker);A.ResyncFollowsWalker=J;function U(R){var O={};return I.forEach(R,function(N){var $=new J(N).startWalking();I.assign(O,$)}),O}A.computeAllProdsFollows=U;function Y(R,O){return R.name+O+C.IN}A.buildBetweenProdsFollowPrefix=Y;function H(R){var O=R.terminalType.name;return O+R.idx+C.IN}A.buildInProdFollowPrefix=H}),zU=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.defaultGrammarValidatorErrorProvider=A.defaultGrammarResolverErrorProvider=A.defaultParserErrorProvider=void 0;var Q=i1(),E=t0(),B=t0(),I=mE(),C=TU();A.defaultParserErrorProvider={buildMismatchTokenMessage:function(K){var{expected:J,actual:U,previous:Y,ruleName:H}=K,R=Q.hasTokenLabel(J),O=R?"--> "+Q.tokenLabel(J)+" <--":"token of type --> "+J.name+" <--",N="Expecting "+O+" but found --> '"+U.image+"' <--";return N},buildNotAllInputParsedMessage:function(K){var{firstRedundant:J,ruleName:U}=K;return"Redundant input, expecting EOF but found: "+J.image},buildNoViableAltMessage:function(K){var{expectedPathsPerAlt:J,actual:U,previous:Y,customUserDescription:H,ruleName:R}=K,O="Expecting: ",N=B.first(U).image,$=`
but found: '`+N+"'";if(H)return O+H+$;var L=B.reduce(J,function(X,q){return X.concat(q)},[]),W=B.map(L,function(X){return"["+B.map(X,function(q){return Q.tokenLabel(q)}).join(", ")+"]"}),Z=B.map(W,function(X,q){return"  "+(q+1)+". "+X}),G=`one of these possible Token sequences:
`+Z.join(`
`);return O+G+$},buildEarlyExitMessage:function(K){var{expectedIterationPaths:J,actual:U,customUserDescription:Y,ruleName:H}=K,R="Expecting: ",O=B.first(U).image,N=`
but found: '`+O+"'";if(Y)return R+Y+N;var $=B.map(J,function(W){return"["+B.map(W,function(Z){return Q.tokenLabel(Z)}).join(",")+"]"}),L=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+("<"+$.join(" ,")+">");return R+L+N}},Object.freeze(A.defaultParserErrorProvider),A.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(K,J){var U="Invalid grammar, reference to a rule which is not defined: ->"+J.nonTerminalName+`<-
inside top level rule: ->`+K.name+"<-";return U}},A.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(K,J){function U(W){return W instanceof I.Terminal?W.terminalType.name:W instanceof I.NonTerminal?W.nonTerminalName:""}var Y=K.name,H=B.first(J),R=H.idx,O=C.getProductionDslName(H),N=U(H),$=R>0,L="->"+O+($?R:"")+"<- "+(N?"with argument: ->"+N+"<-":"")+`
                  appears more than once (`+J.length+" times) in the top level rule: ->"+Y+`<-.
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES
                  `;return L=L.replace(/[ \t]+/g," "),L=L.replace(/\s\s+/g,`
`),L},buildNamespaceConflictError:function(K){var J=`Namespace conflict found in grammar.
`+("The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+K.name+`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return J},buildAlternationPrefixAmbiguityError:function(K){var J=B.map(K.prefixPath,function(H){return Q.tokenLabel(H)}).join(", "),U=K.alternation.idx===0?"":K.alternation.idx,Y="Ambiguous alternatives: <"+K.ambiguityIndices.join(" ,")+`> due to common lookahead prefix
`+("in <OR"+U+"> inside <"+K.topLevelRule.name+`> Rule,
`)+("<"+J+`> may appears as a prefix path in all these alternatives.
`)+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return Y},buildAlternationAmbiguityError:function(K){var J=B.map(K.prefixPath,function(H){return Q.tokenLabel(H)}).join(", "),U=K.alternation.idx===0?"":K.alternation.idx,Y="Ambiguous Alternatives Detected: <"+K.ambiguityIndices.join(" ,")+"> in <OR"+U+">"+(" inside <"+K.topLevelRule.name+`> Rule,
`)+("<"+J+`> may appears as a prefix path in all these alternatives.
`);return Y=Y+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,Y},buildEmptyRepetitionError:function(K){var J=C.getProductionDslName(K.repetition);K.repetition.idx!==0&&(J+=K.repetition.idx);var U="The repetition <"+J+"> within Rule <"+K.topLevelRule.name+`> can never consume any tokens.
This could lead to an infinite loop.`;return U},buildTokenNameError:function(K){return"deprecated"},buildEmptyAlternationError:function(K){var J="Ambiguous empty alternative: <"+(K.emptyChoiceIdx+1)+">"+(" in <OR"+K.alternation.idx+"> inside <"+K.topLevelRule.name+`> Rule.
`)+"Only the last alternative may be an empty alternative.";return J},buildTooManyAlternativesError:function(K){var J=`An Alternation cannot have more than 256 alternatives:
`+("<OR"+K.alternation.idx+"> inside <"+K.topLevelRule.name+`> Rule.
 has `+(K.alternation.definition.length+1)+" alternatives.");return J},buildLeftRecursionError:function(K){var J=K.topLevelRule.name,U=E.map(K.leftRecursionPath,function(R){return R.name}),Y=J+" --> "+U.concat([J]).join(" --> "),H=`Left Recursion found in grammar.
`+("rule: <"+J+`> can be invoked from itself (directly or indirectly)
`)+(`without consuming any Tokens. The grammar path that causes this is:
 `+Y+`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.`;return H},buildInvalidRuleNameError:function(K){return"deprecated"},buildDuplicateRuleNameError:function(K){var J;K.topLevelRule instanceof I.Rule?J=K.topLevelRule.name:J=K.topLevelRule;var U="Duplicate definition, rule: ->"+J+"<- is already defined in the grammar: ->"+K.grammarName+"<-";return U}}}),Vk=P0((A)=>{var Q=A&&A.__extends||function(){var J=function(U,Y){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,R){H.__proto__=R}||function(H,R){for(var O in R)Object.prototype.hasOwnProperty.call(R,O)&&(H[O]=R[O])},J(U,Y)};return function(U,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");J(U,Y);function H(){this.constructor=U}U.prototype=Y===null?Object.create(Y):(H.prototype=Y.prototype,new H)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.GastRefResolverVisitor=A.resolveGrammar=void 0;var E=EB(),B=t0(),I=FK();function C(J,U){var Y=new K(J,U);return Y.resolveRefs(),Y.errors}A.resolveGrammar=C;var K=function(J){Q(U,J);function U(Y,H){var R=J.call(this)||this;return R.nameToTopRule=Y,R.errMsgProvider=H,R.errors=[],R}return U.prototype.resolveRefs=function(){var Y=this;B.forEach(B.values(this.nameToTopRule),function(H){Y.currTopLevel=H,H.accept(Y)})},U.prototype.visitNonTerminal=function(Y){var H=this.nameToTopRule[Y.nonTerminalName];if(H)Y.referencedRule=H;else{var R=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,Y);this.errors.push({message:R,type:E.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:Y.nonTerminalName})}},U}(I.GAstVisitor);A.GastRefResolverVisitor=K}),PU=P0((A)=>{var Q=A&&A.__extends||function(){var W=function(Z,G){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,q){X.__proto__=q}||function(X,q){for(var M in q)Object.prototype.hasOwnProperty.call(q,M)&&(X[M]=q[M])},W(Z,G)};return function(Z,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");W(Z,G);function X(){this.constructor=Z}Z.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.nextPossibleTokensAfter=A.possiblePathsFrom=A.NextTerminalAfterAtLeastOneSepWalker=A.NextTerminalAfterAtLeastOneWalker=A.NextTerminalAfterManySepWalker=A.NextTerminalAfterManyWalker=A.AbstractNextTerminalAfterProductionWalker=A.NextAfterTokenWalker=A.AbstractNextPossibleTokensWalker=void 0;var E=Z7(),B=t0(),I=LX(),C=mE(),K=function(W){Q(Z,W);function Z(G,X){var q=W.call(this)||this;return q.topProd=G,q.path=X,q.possibleTokTypes=[],q.nextProductionName="",q.nextProductionOccurrence=0,q.found=!1,q.isAtEndOfPath=!1,q}return Z.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=B.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=B.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},Z.prototype.walk=function(G,X){X===void 0&&(X=[]),this.found||W.prototype.walk.call(this,G,X)},Z.prototype.walkProdRef=function(G,X,q){if(G.referencedRule.name===this.nextProductionName&&G.idx===this.nextProductionOccurrence){var M=X.concat(q);this.updateExpectedNext(),this.walk(G.referencedRule,M)}},Z.prototype.updateExpectedNext=function(){B.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},Z}(E.RestWalker);A.AbstractNextPossibleTokensWalker=K;var J=function(W){Q(Z,W);function Z(G,X){var q=W.call(this,G,X)||this;return q.path=X,q.nextTerminalName="",q.nextTerminalOccurrence=0,q.nextTerminalName=q.path.lastTok.name,q.nextTerminalOccurrence=q.path.lastTokOccurrence,q}return Z.prototype.walkTerminal=function(G,X,q){if(this.isAtEndOfPath&&G.terminalType.name===this.nextTerminalName&&G.idx===this.nextTerminalOccurrence&&!this.found){var M=X.concat(q),F=new C.Alternative({definition:M});this.possibleTokTypes=I.first(F),this.found=!0}},Z}(K);A.NextAfterTokenWalker=J;var U=function(W){Q(Z,W);function Z(G,X){var q=W.call(this)||this;return q.topRule=G,q.occurrence=X,q.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},q}return Z.prototype.startWalking=function(){return this.walk(this.topRule),this.result},Z}(E.RestWalker);A.AbstractNextTerminalAfterProductionWalker=U;var Y=function(W){Q(Z,W);function Z(){return W!==null&&W.apply(this,arguments)||this}return Z.prototype.walkMany=function(G,X,q){if(G.idx===this.occurrence){var M=B.first(X.concat(q));this.result.isEndOfRule=M===void 0,M instanceof C.Terminal&&(this.result.token=M.terminalType,this.result.occurrence=M.idx)}else W.prototype.walkMany.call(this,G,X,q)},Z}(U);A.NextTerminalAfterManyWalker=Y;var H=function(W){Q(Z,W);function Z(){return W!==null&&W.apply(this,arguments)||this}return Z.prototype.walkManySep=function(G,X,q){if(G.idx===this.occurrence){var M=B.first(X.concat(q));this.result.isEndOfRule=M===void 0,M instanceof C.Terminal&&(this.result.token=M.terminalType,this.result.occurrence=M.idx)}else W.prototype.walkManySep.call(this,G,X,q)},Z}(U);A.NextTerminalAfterManySepWalker=H;var R=function(W){Q(Z,W);function Z(){return W!==null&&W.apply(this,arguments)||this}return Z.prototype.walkAtLeastOne=function(G,X,q){if(G.idx===this.occurrence){var M=B.first(X.concat(q));this.result.isEndOfRule=M===void 0,M instanceof C.Terminal&&(this.result.token=M.terminalType,this.result.occurrence=M.idx)}else W.prototype.walkAtLeastOne.call(this,G,X,q)},Z}(U);A.NextTerminalAfterAtLeastOneWalker=R;var O=function(W){Q(Z,W);function Z(){return W!==null&&W.apply(this,arguments)||this}return Z.prototype.walkAtLeastOneSep=function(G,X,q){if(G.idx===this.occurrence){var M=B.first(X.concat(q));this.result.isEndOfRule=M===void 0,M instanceof C.Terminal&&(this.result.token=M.terminalType,this.result.occurrence=M.idx)}else W.prototype.walkAtLeastOneSep.call(this,G,X,q)},Z}(U);A.NextTerminalAfterAtLeastOneSepWalker=O;function N(W,Z,G){G===void 0&&(G=[]),G=B.cloneArr(G);var X=[],q=0;function M(w){return w.concat(B.drop(W,q+1))}function F(w){var k=N(M(w),Z,G);return X.concat(k)}for(;G.length<Z&&q<W.length;){var D=W[q];if(D instanceof C.Alternative)return F(D.definition);if(D instanceof C.NonTerminal)return F(D.definition);if(D instanceof C.Option)X=F(D.definition);else if(D instanceof C.RepetitionMandatory){var _=D.definition.concat([new C.Repetition({definition:D.definition})]);return F(_)}else if(D instanceof C.RepetitionMandatoryWithSeparator){var _=[new C.Alternative({definition:D.definition}),new C.Repetition({definition:[new C.Terminal({terminalType:D.separator})].concat(D.definition)})];return F(_)}else if(D instanceof C.RepetitionWithSeparator){var _=D.definition.concat([new C.Repetition({definition:[new C.Terminal({terminalType:D.separator})].concat(D.definition)})]);X=F(_)}else if(D instanceof C.Repetition){var _=D.definition.concat([new C.Repetition({definition:D.definition})]);X=F(_)}else{if(D instanceof C.Alternation)return B.forEach(D.definition,function(w){B.isEmpty(w.definition)===!1&&(X=F(w.definition))}),X;if(D instanceof C.Terminal)G.push(D.terminalType);else throw Error("non exhaustive match")}q++}return X.push({partialPath:G,suffixDef:B.drop(W,q)}),X}A.possiblePathsFrom=N;function $(W,Z,G,X){var q="EXIT_NONE_TERMINAL",M=[q],F="EXIT_ALTERNATIVE",D=!1,_=Z.length,w=_-X-1,k=[],T=[];for(T.push({idx:-1,def:W,ruleStack:[],occurrenceStack:[]});!B.isEmpty(T);){var z=T.pop();if(z===F){D&&B.last(T).idx<=w&&T.pop();continue}var{def:j,idx:v,ruleStack:g,occurrenceStack:P}=z;if(!B.isEmpty(j)){var V=j[0];if(V===q){var S={idx:v,def:B.drop(j),ruleStack:B.dropRight(g),occurrenceStack:B.dropRight(P)};T.push(S)}else if(V instanceof C.Terminal)if(v<_-1){var h=v+1,x=Z[h];if(G(x,V.terminalType)){var S={idx:h,def:B.drop(j),ruleStack:g,occurrenceStack:P};T.push(S)}}else if(v===_-1)k.push({nextTokenType:V.terminalType,nextTokenOccurrence:V.idx,ruleStack:g,occurrenceStack:P}),D=!0;else throw Error("non exhaustive match");else if(V instanceof C.NonTerminal){var b=B.cloneArr(g);b.push(V.nonTerminalName);var m=B.cloneArr(P);m.push(V.idx);var S={idx:v,def:V.definition.concat(M,B.drop(j)),ruleStack:b,occurrenceStack:m};T.push(S)}else if(V instanceof C.Option){var s={idx:v,def:B.drop(j),ruleStack:g,occurrenceStack:P};T.push(s),T.push(F);var i={idx:v,def:V.definition.concat(B.drop(j)),ruleStack:g,occurrenceStack:P};T.push(i)}else if(V instanceof C.RepetitionMandatory){var n=new C.Repetition({definition:V.definition,idx:V.idx}),l=V.definition.concat([n],B.drop(j)),S={idx:v,def:l,ruleStack:g,occurrenceStack:P};T.push(S)}else if(V instanceof C.RepetitionMandatoryWithSeparator){var c=new C.Terminal({terminalType:V.separator}),n=new C.Repetition({definition:[c].concat(V.definition),idx:V.idx}),l=V.definition.concat([n],B.drop(j)),S={idx:v,def:l,ruleStack:g,occurrenceStack:P};T.push(S)}else if(V instanceof C.RepetitionWithSeparator){var s={idx:v,def:B.drop(j),ruleStack:g,occurrenceStack:P};T.push(s),T.push(F);var c=new C.Terminal({terminalType:V.separator}),o=new C.Repetition({definition:[c].concat(V.definition),idx:V.idx}),l=V.definition.concat([o],B.drop(j)),i={idx:v,def:l,ruleStack:g,occurrenceStack:P};T.push(i)}else if(V instanceof C.Repetition){var s={idx:v,def:B.drop(j),ruleStack:g,occurrenceStack:P};T.push(s),T.push(F);var o=new C.Repetition({definition:V.definition,idx:V.idx}),l=V.definition.concat([o],B.drop(j)),i={idx:v,def:l,ruleStack:g,occurrenceStack:P};T.push(i)}else if(V instanceof C.Alternation)for(var e=V.definition.length-1;e>=0;e--){var BA=V.definition[e],EA={idx:v,def:BA.definition.concat(B.drop(j)),ruleStack:g,occurrenceStack:P};T.push(EA),T.push(F)}else if(V instanceof C.Alternative)T.push({idx:v,def:V.definition.concat(B.drop(j)),ruleStack:g,occurrenceStack:P});else if(V instanceof C.Rule)T.push(L(V,v,g,P));else throw Error("non exhaustive match")}}return k}A.nextPossibleTokensAfter=$;function L(W,Z,G,X){var q=B.cloneArr(G);q.push(W.name);var M=B.cloneArr(X);return M.push(1),{idx:Z,def:W.definition,ruleStack:q,occurrenceStack:M}}}),VU=P0((A)=>{var Q=A&&A.__extends||function(){var w=function(k,T){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,j){z.__proto__=j}||function(z,j){for(var v in j)Object.prototype.hasOwnProperty.call(j,v)&&(z[v]=j[v])},w(k,T)};return function(k,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");w(k,T);function z(){this.constructor=k}k.prototype=T===null?Object.create(T):(z.prototype=T.prototype,new z)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.areTokenCategoriesNotUsed=A.isStrictPrefixOfPath=A.containsPath=A.getLookaheadPathsForOptionalProd=A.getLookaheadPathsForOr=A.lookAheadSequenceFromAlternatives=A.buildSingleAlternativeLookaheadFunction=A.buildAlternativesLookAheadFunc=A.buildLookaheadFuncForOptionalProd=A.buildLookaheadFuncForOr=A.getProdType=A.PROD_TYPE=void 0;var E=t0(),B=PU(),I=Z7(),C=qK(),K=mE(),J=FK(),U;(function(w){w[w.OPTION=0]="OPTION",w[w.REPETITION=1]="REPETITION",w[w.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",w[w.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",w[w.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",w[w.ALTERNATION=5]="ALTERNATION"})(U=A.PROD_TYPE||(A.PROD_TYPE={}));function Y(w){if(w instanceof K.Option)return U.OPTION;if(w instanceof K.Repetition)return U.REPETITION;if(w instanceof K.RepetitionMandatory)return U.REPETITION_MANDATORY;if(w instanceof K.RepetitionMandatoryWithSeparator)return U.REPETITION_MANDATORY_WITH_SEPARATOR;if(w instanceof K.RepetitionWithSeparator)return U.REPETITION_WITH_SEPARATOR;if(w instanceof K.Alternation)return U.ALTERNATION;throw Error("non exhaustive match")}A.getProdType=Y;function H(w,k,T,z,j,v){var g=q(w,k,T),P=_(g)?C.tokenStructuredMatcherNoCategories:C.tokenStructuredMatcher;return v(g,z,P,j)}A.buildLookaheadFuncForOr=H;function R(w,k,T,z,j,v){var g=M(w,k,j,T),P=_(g)?C.tokenStructuredMatcherNoCategories:C.tokenStructuredMatcher;return v(g[0],P,z)}A.buildLookaheadFuncForOptionalProd=R;function O(w,k,T,z){var j=w.length,v=E.every(w,function(V){return E.every(V,function(S){return S.length===1})});if(k)return function(V){for(var S=E.map(V,function(o){return o.GATE}),h=0;h<j;h++){var x=w[h],b=x.length,m=S[h];if(m!==void 0&&m.call(this)===!1)continue;A:for(var s=0;s<b;s++){for(var i=x[s],n=i.length,l=0;l<n;l++){var c=this.LA(l+1);if(T(c,i[l])===!1)continue A}return h}}};if(v&&!z){var g=E.map(w,function(V){return E.flatten(V)}),P=E.reduce(g,function(V,S,h){return E.forEach(S,function(x){E.has(V,x.tokenTypeIdx)||(V[x.tokenTypeIdx]=h),E.forEach(x.categoryMatches,function(b){E.has(V,b)||(V[b]=h)})}),V},[]);return function(){var V=this.LA(1);return P[V.tokenTypeIdx]}}else return function(){for(var V=0;V<j;V++){var S=w[V],h=S.length;A:for(var x=0;x<h;x++){for(var b=S[x],m=b.length,s=0;s<m;s++){var i=this.LA(s+1);if(T(i,b[s])===!1)continue A}return V}}}}A.buildAlternativesLookAheadFunc=O;function N(w,k,T){var z=E.every(w,function(S){return S.length===1}),j=w.length;if(z&&!T){var v=E.flatten(w);if(v.length===1&&E.isEmpty(v[0].categoryMatches)){var g=v[0],P=g.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===P}}else{var V=E.reduce(v,function(S,h,x){return S[h.tokenTypeIdx]=!0,E.forEach(h.categoryMatches,function(b){S[b]=!0}),S},[]);return function(){var S=this.LA(1);return V[S.tokenTypeIdx]===!0}}}else return function(){A:for(var S=0;S<j;S++){for(var h=w[S],x=h.length,b=0;b<x;b++){var m=this.LA(b+1);if(k(m,h[b])===!1)continue A}return!0}return!1}}A.buildSingleAlternativeLookaheadFunction=N;var $=function(w){Q(k,w);function k(T,z,j){var v=w.call(this)||this;return v.topProd=T,v.targetOccurrence=z,v.targetProdType=j,v}return k.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},k.prototype.checkIsTarget=function(T,z,j,v){return T.idx===this.targetOccurrence&&this.targetProdType===z?(this.restDef=j.concat(v),!0):!1},k.prototype.walkOption=function(T,z,j){this.checkIsTarget(T,U.OPTION,z,j)||w.prototype.walkOption.call(this,T,z,j)},k.prototype.walkAtLeastOne=function(T,z,j){this.checkIsTarget(T,U.REPETITION_MANDATORY,z,j)||w.prototype.walkOption.call(this,T,z,j)},k.prototype.walkAtLeastOneSep=function(T,z,j){this.checkIsTarget(T,U.REPETITION_MANDATORY_WITH_SEPARATOR,z,j)||w.prototype.walkOption.call(this,T,z,j)},k.prototype.walkMany=function(T,z,j){this.checkIsTarget(T,U.REPETITION,z,j)||w.prototype.walkOption.call(this,T,z,j)},k.prototype.walkManySep=function(T,z,j){this.checkIsTarget(T,U.REPETITION_WITH_SEPARATOR,z,j)||w.prototype.walkOption.call(this,T,z,j)},k}(I.RestWalker),L=function(w){Q(k,w);function k(T,z,j){var v=w.call(this)||this;return v.targetOccurrence=T,v.targetProdType=z,v.targetRef=j,v.result=[],v}return k.prototype.checkIsTarget=function(T,z){T.idx===this.targetOccurrence&&this.targetProdType===z&&(this.targetRef===void 0||T===this.targetRef)&&(this.result=T.definition)},k.prototype.visitOption=function(T){this.checkIsTarget(T,U.OPTION)},k.prototype.visitRepetition=function(T){this.checkIsTarget(T,U.REPETITION)},k.prototype.visitRepetitionMandatory=function(T){this.checkIsTarget(T,U.REPETITION_MANDATORY)},k.prototype.visitRepetitionMandatoryWithSeparator=function(T){this.checkIsTarget(T,U.REPETITION_MANDATORY_WITH_SEPARATOR)},k.prototype.visitRepetitionWithSeparator=function(T){this.checkIsTarget(T,U.REPETITION_WITH_SEPARATOR)},k.prototype.visitAlternation=function(T){this.checkIsTarget(T,U.ALTERNATION)},k}(J.GAstVisitor);function W(w){for(var k=new Array(w),T=0;T<w;T++)k[T]=[];return k}function Z(w){for(var k=[""],T=0;T<w.length;T++){for(var z=w[T],j=[],v=0;v<k.length;v++){var g=k[v];j.push(g+"_"+z.tokenTypeIdx);for(var P=0;P<z.categoryMatches.length;P++){var V="_"+z.categoryMatches[P];j.push(g+V)}}k=j}return k}function G(w,k,T){for(var z=0;z<w.length;z++)if(z!==T)for(var j=w[z],v=0;v<k.length;v++){var g=k[v];if(j[g]===!0)return!1}return!0}function X(w,k){for(var T=E.map(w,function(h){return B.possiblePathsFrom([h],1)}),z=W(T.length),j=E.map(T,function(h){var x={};return E.forEach(h,function(b){var m=Z(b.partialPath);E.forEach(m,function(s){x[s]=!0})}),x}),v=T,g=1;g<=k;g++){var P=v;v=W(P.length);for(var V=function(h){for(var x=P[h],b=0;b<x.length;b++){var m=x[b].partialPath,s=x[b].suffixDef,i=Z(m),n=G(j,i,h);if(n||E.isEmpty(s)||m.length===k){var l=z[h];if(F(l,m)===!1){l.push(m);for(var c=0;c<i.length;c++){var o=i[c];j[h][o]=!0}}}else{var e=B.possiblePathsFrom(s,g+1,m);v[h]=v[h].concat(e),E.forEach(e,function(BA){var EA=Z(BA.partialPath);E.forEach(EA,function(CA){j[h][CA]=!0})})}}},S=0;S<P.length;S++)V(S)}return z}A.lookAheadSequenceFromAlternatives=X;function q(w,k,T,z){var j=new L(w,U.ALTERNATION,z);return k.accept(j),X(j.result,T)}A.getLookaheadPathsForOr=q;function M(w,k,T,z){var j=new L(w,T);k.accept(j);var v=j.result,g=new $(k,w,T),P=g.startWalking(),V=new K.Alternative({definition:v}),S=new K.Alternative({definition:P});return X([V,S],z)}A.getLookaheadPathsForOptionalProd=M;function F(w,k){A:for(var T=0;T<w.length;T++){var z=w[T];if(z.length===k.length){for(var j=0;j<z.length;j++){var v=k[j],g=z[j],P=v===g||g.categoryMatchesMap[v.tokenTypeIdx]!==void 0;if(P===!1)continue A}return!0}}return!1}A.containsPath=F;function D(w,k){return w.length<k.length&&E.every(w,function(T,z){var j=k[z];return T===j||j.categoryMatchesMap[T.tokenTypeIdx]})}A.isStrictPrefixOfPath=D;function _(w){return E.every(w,function(k){return E.every(k,function(T){return E.every(T,function(z){return E.isEmpty(z.categoryMatches)})})})}A.areTokenCategoriesNotUsed=_}),FX=P0((A)=>{var Q=A&&A.__extends||function(){var z=function(j,v){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,P){g.__proto__=P}||function(g,P){for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&(g[V]=P[V])},z(j,v)};return function(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");z(j,v);function g(){this.constructor=j}j.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.checkPrefixAlternativesAmbiguities=A.validateSomeNonEmptyLookaheadPath=A.validateTooManyAlts=A.RepetionCollector=A.validateAmbiguousAlternationAlternatives=A.validateEmptyOrAlternative=A.getFirstNoneTerminal=A.validateNoLeftRecursion=A.validateRuleIsOverridden=A.validateRuleDoesNotAlreadyExist=A.OccurrenceValidationCollector=A.identifyProductionForDuplicates=A.validateGrammar=void 0;var E=t0(),B=t0(),I=EB(),C=TU(),K=VU(),J=PU(),U=mE(),Y=FK();function H(z,j,v,g,P){var V=E.map(z,function(n){return R(n,g)}),S=E.map(z,function(n){return Z(n,n,g)}),h=[],x=[],b=[];B.every(S,B.isEmpty)&&(h=B.map(z,function(n){return q(n,g)}),x=B.map(z,function(n){return M(n,j,g)}),b=_(z,j,g));var m=T(z,v,g),s=B.map(z,function(n){return D(n,g)}),i=B.map(z,function(n){return L(n,z,P,g)});return E.flatten(V.concat(b,S,h,x,m,s,i))}A.validateGrammar=H;function R(z,j){var v=new $;z.accept(v);var g=v.allProductions,P=E.groupBy(g,O),V=E.pick(P,function(h){return h.length>1}),S=E.map(E.values(V),function(h){var x=E.first(h),b=j.buildDuplicateFoundError(z,h),m=C.getProductionDslName(x),s={message:b,type:I.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:z.name,dslName:m,occurrence:x.idx},i=N(x);return i&&(s.parameter=i),s});return S}function O(z){return C.getProductionDslName(z)+"_#_"+z.idx+"_#_"+N(z)}A.identifyProductionForDuplicates=O;function N(z){return z instanceof U.Terminal?z.terminalType.name:z instanceof U.NonTerminal?z.nonTerminalName:""}var $=function(z){Q(j,z);function j(){var v=z!==null&&z.apply(this,arguments)||this;return v.allProductions=[],v}return j.prototype.visitNonTerminal=function(v){this.allProductions.push(v)},j.prototype.visitOption=function(v){this.allProductions.push(v)},j.prototype.visitRepetitionWithSeparator=function(v){this.allProductions.push(v)},j.prototype.visitRepetitionMandatory=function(v){this.allProductions.push(v)},j.prototype.visitRepetitionMandatoryWithSeparator=function(v){this.allProductions.push(v)},j.prototype.visitRepetition=function(v){this.allProductions.push(v)},j.prototype.visitAlternation=function(v){this.allProductions.push(v)},j.prototype.visitTerminal=function(v){this.allProductions.push(v)},j}(Y.GAstVisitor);A.OccurrenceValidationCollector=$;function L(z,j,v,g){var P=[],V=B.reduce(j,function(h,x){return x.name===z.name?h+1:h},0);if(V>1){var S=g.buildDuplicateRuleNameError({topLevelRule:z,grammarName:v});P.push({message:S,type:I.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:z.name})}return P}A.validateRuleDoesNotAlreadyExist=L;function W(z,j,v){var g=[],P;return E.contains(j,z)||(P="Invalid rule override, rule: ->"+z+"<- cannot be overridden in the grammar: ->"+v+"<-as it is not defined in any of the super grammars ",g.push({message:P,type:I.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:z})),g}A.validateRuleIsOverridden=W;function Z(z,j,v,g){g===void 0&&(g=[]);var P=[],V=G(j.definition);if(E.isEmpty(V))return[];var S=z.name,h=E.contains(V,z);h&&P.push({message:v.buildLeftRecursionError({topLevelRule:z,leftRecursionPath:g}),type:I.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:S});var x=E.difference(V,g.concat([z])),b=E.map(x,function(m){var s=E.cloneArr(g);return s.push(m),Z(z,m,v,s)});return P.concat(E.flatten(b))}A.validateNoLeftRecursion=Z;function G(z){var j=[];if(E.isEmpty(z))return j;var v=E.first(z);if(v instanceof U.NonTerminal)j.push(v.referencedRule);else if(v instanceof U.Alternative||v instanceof U.Option||v instanceof U.RepetitionMandatory||v instanceof U.RepetitionMandatoryWithSeparator||v instanceof U.RepetitionWithSeparator||v instanceof U.Repetition)j=j.concat(G(v.definition));else if(v instanceof U.Alternation)j=E.flatten(E.map(v.definition,function(S){return G(S.definition)}));else if(!(v instanceof U.Terminal))throw Error("non exhaustive match");var g=C.isOptionalProd(v),P=z.length>1;if(g&&P){var V=E.drop(z);return j.concat(G(V))}else return j}A.getFirstNoneTerminal=G;var X=function(z){Q(j,z);function j(){var v=z!==null&&z.apply(this,arguments)||this;return v.alternations=[],v}return j.prototype.visitAlternation=function(v){this.alternations.push(v)},j}(Y.GAstVisitor);function q(z,j){var v=new X;z.accept(v);var g=v.alternations,P=E.reduce(g,function(V,S){var h=E.dropRight(S.definition),x=E.map(h,function(b,m){var s=J.nextPossibleTokensAfter([b],[],null,1);return E.isEmpty(s)?{message:j.buildEmptyAlternationError({topLevelRule:z,alternation:S,emptyChoiceIdx:m}),type:I.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:z.name,occurrence:S.idx,alternative:m+1}:null});return V.concat(E.compact(x))},[]);return P}A.validateEmptyOrAlternative=q;function M(z,j,v){var g=new X;z.accept(g);var P=g.alternations;P=B.reject(P,function(S){return S.ignoreAmbiguities===!0});var V=E.reduce(P,function(S,h){var x=h.idx,b=h.maxLookahead||j,m=K.getLookaheadPathsForOr(x,z,b,h),s=w(m,h,z,v),i=k(m,h,z,v);return S.concat(s,i)},[]);return V}A.validateAmbiguousAlternationAlternatives=M;var F=function(z){Q(j,z);function j(){var v=z!==null&&z.apply(this,arguments)||this;return v.allProductions=[],v}return j.prototype.visitRepetitionWithSeparator=function(v){this.allProductions.push(v)},j.prototype.visitRepetitionMandatory=function(v){this.allProductions.push(v)},j.prototype.visitRepetitionMandatoryWithSeparator=function(v){this.allProductions.push(v)},j.prototype.visitRepetition=function(v){this.allProductions.push(v)},j}(Y.GAstVisitor);A.RepetionCollector=F;function D(z,j){var v=new X;z.accept(v);var g=v.alternations,P=E.reduce(g,function(V,S){return S.definition.length>255&&V.push({message:j.buildTooManyAlternativesError({topLevelRule:z,alternation:S}),type:I.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:z.name,occurrence:S.idx}),V},[]);return P}A.validateTooManyAlts=D;function _(z,j,v){var g=[];return B.forEach(z,function(P){var V=new F;P.accept(V);var S=V.allProductions;B.forEach(S,function(h){var x=K.getProdType(h),b=h.maxLookahead||j,m=h.idx,s=K.getLookaheadPathsForOptionalProd(m,P,x,b),i=s[0];if(B.isEmpty(B.flatten(i))){var n=v.buildEmptyRepetitionError({topLevelRule:P,repetition:h});g.push({message:n,type:I.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:P.name})}})}),g}A.validateSomeNonEmptyLookaheadPath=_;function w(z,j,v,g){var P=[],V=B.reduce(z,function(h,x,b){return j.definition[b].ignoreAmbiguities===!0||B.forEach(x,function(m){var s=[b];B.forEach(z,function(i,n){b!==n&&K.containsPath(i,m)&&j.definition[n].ignoreAmbiguities!==!0&&s.push(n)}),s.length>1&&!K.containsPath(P,m)&&(P.push(m),h.push({alts:s,path:m}))}),h},[]),S=E.map(V,function(h){var x=B.map(h.alts,function(m){return m+1}),b=g.buildAlternationAmbiguityError({topLevelRule:v,alternation:j,ambiguityIndices:x,prefixPath:h.path});return{message:b,type:I.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:v.name,occurrence:j.idx,alternatives:[h.alts]}});return S}function k(z,j,v,g){var P=[],V=B.reduce(z,function(S,h,x){var b=B.map(h,function(m){return{idx:x,path:m}});return S.concat(b)},[]);return B.forEach(V,function(S){var h=j.definition[S.idx];if(h.ignoreAmbiguities!==!0){var{idx:x,path:b}=S,m=B.findAll(V,function(i){return j.definition[i.idx].ignoreAmbiguities!==!0&&i.idx<x&&K.isStrictPrefixOfPath(i.path,b)}),s=B.map(m,function(i){var n=[i.idx+1,x+1],l=j.idx===0?"":j.idx,c=g.buildAlternationPrefixAmbiguityError({topLevelRule:v,alternation:j,ambiguityIndices:n,prefixPath:i.path});return{message:c,type:I.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:v.name,occurrence:l,alternatives:n}});P=P.concat(s)}}),P}A.checkPrefixAlternativesAmbiguities=k;function T(z,j,v){var g=[],P=B.map(j,function(V){return V.name});return B.forEach(z,function(V){var S=V.name;if(B.contains(P,S)){var h=v.buildNamespaceConflictError(V);g.push({message:h,type:I.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:S})}}),g}}),jk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.validateGrammar=A.resolveGrammar=void 0;var Q=t0(),E=Vk(),B=FX(),I=zU();function C(J){J=Q.defaults(J,{errMsgProvider:I.defaultGrammarResolverErrorProvider});var U={};return Q.forEach(J.rules,function(Y){U[Y.name]=Y}),E.resolveGrammar(U,J.errMsgProvider)}A.resolveGrammar=C;function K(J){return J=Q.defaults(J,{errMsgProvider:I.defaultGrammarValidatorErrorProvider}),B.validateGrammar(J.rules,J.maxLookahead,J.tokenTypes,J.errMsgProvider,J.grammarName)}A.validateGrammar=K}),DK=P0((A)=>{var Q=A&&A.__extends||function(){var $=function(L,W){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,G){Z.__proto__=G}||function(Z,G){for(var X in G)Object.prototype.hasOwnProperty.call(G,X)&&(Z[X]=G[X])},$(L,W)};return function(L,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");$(L,W);function Z(){this.constructor=L}L.prototype=W===null?Object.create(W):(Z.prototype=W.prototype,new Z)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.EarlyExitException=A.NotAllInputParsedException=A.NoViableAltException=A.MismatchedTokenException=A.isRecognitionException=void 0;var E=t0(),B="MismatchedTokenException",I="NoViableAltException",C="EarlyExitException",K="NotAllInputParsedException",J=[B,I,C,K];Object.freeze(J);function U($){return E.contains(J,$.name)}A.isRecognitionException=U;var Y=function($){Q(L,$);function L(W,Z){var G=this.constructor,X=$.call(this,W)||this;return X.token=Z,X.resyncedTokens=[],Object.setPrototypeOf(X,G.prototype),Error.captureStackTrace&&Error.captureStackTrace(X,X.constructor),X}return L}(Error),H=function($){Q(L,$);function L(W,Z,G){var X=$.call(this,W,Z)||this;return X.previousToken=G,X.name=B,X}return L}(Y);A.MismatchedTokenException=H;var R=function($){Q(L,$);function L(W,Z,G){var X=$.call(this,W,Z)||this;return X.previousToken=G,X.name=I,X}return L}(Y);A.NoViableAltException=R;var O=function($){Q(L,$);function L(W,Z){var G=$.call(this,W,Z)||this;return G.name=K,G}return L}(Y);A.NotAllInputParsedException=O;var N=function($){Q(L,$);function L(W,Z,G){var X=$.call(this,W,Z)||this;return X.previousToken=G,X.name=C,X}return L}(Y);A.EarlyExitException=N}),DX=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.attemptInRepetitionRecovery=A.Recoverable=A.InRuleRecoveryException=A.IN_RULE_RECOVERY_EXCEPTION=A.EOF_FOLLOW_KEY=void 0;var Q=i1(),E=t0(),B=DK(),I=qX(),C=EB();A.EOF_FOLLOW_KEY={},A.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";function K(Y){this.name=A.IN_RULE_RECOVERY_EXCEPTION,this.message=Y}A.InRuleRecoveryException=K,K.prototype=Error.prototype;var J=function(){function Y(){}return Y.prototype.initRecoverable=function(H){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=E.has(H,"recoveryEnabled")?H.recoveryEnabled:C.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=U)},Y.prototype.getTokenToInsert=function(H){var R=Q.createTokenInstance(H,"",NaN,NaN,NaN,NaN,NaN,NaN);return R.isInsertedInRecovery=!0,R},Y.prototype.canTokenTypeBeInsertedInRecovery=function(H){return!0},Y.prototype.tryInRepetitionRecovery=function(H,R,O,N){for(var $=this,L=this.findReSyncTokenType(),W=this.exportLexerState(),Z=[],G=!1,X=this.LA(1),q=this.LA(1),M=function(){var F=$.LA(0),D=$.errorMessageProvider.buildMismatchTokenMessage({expected:N,actual:X,previous:F,ruleName:$.getCurrRuleFullName()}),_=new B.MismatchedTokenException(D,X,$.LA(0));_.resyncedTokens=E.dropRight(Z),$.SAVE_ERROR(_)};!G;)if(this.tokenMatcher(q,N)){M();return}else if(O.call(this)){M(),H.apply(this,R);return}else this.tokenMatcher(q,L)?G=!0:(q=this.SKIP_TOKEN(),this.addToResyncTokens(q,Z));this.importLexerState(W)},Y.prototype.shouldInRepetitionRecoveryBeTried=function(H,R,O){return!(O===!1||H===void 0||R===void 0||this.tokenMatcher(this.LA(1),H)||this.isBackTracking()||this.canPerformInRuleRecovery(H,this.getFollowsForInRuleRecovery(H,R)))},Y.prototype.getFollowsForInRuleRecovery=function(H,R){var O=this.getCurrentGrammarPath(H,R),N=this.getNextPossibleTokenTypes(O);return N},Y.prototype.tryInRuleRecovery=function(H,R){if(this.canRecoverWithSingleTokenInsertion(H,R)){var O=this.getTokenToInsert(H);return O}if(this.canRecoverWithSingleTokenDeletion(H)){var N=this.SKIP_TOKEN();return this.consumeToken(),N}throw new K("sad sad panda")},Y.prototype.canPerformInRuleRecovery=function(H,R){return this.canRecoverWithSingleTokenInsertion(H,R)||this.canRecoverWithSingleTokenDeletion(H)},Y.prototype.canRecoverWithSingleTokenInsertion=function(H,R){var O=this;if(!this.canTokenTypeBeInsertedInRecovery(H)||E.isEmpty(R))return!1;var N=this.LA(1),$=E.find(R,function(L){return O.tokenMatcher(N,L)})!==void 0;return $},Y.prototype.canRecoverWithSingleTokenDeletion=function(H){var R=this.tokenMatcher(this.LA(2),H);return R},Y.prototype.isInCurrentRuleReSyncSet=function(H){var R=this.getCurrFollowKey(),O=this.getFollowSetFromFollowKey(R);return E.contains(O,H)},Y.prototype.findReSyncTokenType=function(){for(var H=this.flattenFollowSet(),R=this.LA(1),O=2;;){var N=R.tokenType;if(E.contains(H,N))return N;R=this.LA(O),O++}},Y.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return A.EOF_FOLLOW_KEY;var H=this.getLastExplicitRuleShortName(),R=this.getLastExplicitRuleOccurrenceIndex(),O=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(H),idxInCallingRule:R,inRule:this.shortRuleNameToFullName(O)}},Y.prototype.buildFullFollowKeyStack=function(){var H=this,R=this.RULE_STACK,O=this.RULE_OCCURRENCE_STACK;return E.map(R,function(N,$){return $===0?A.EOF_FOLLOW_KEY:{ruleName:H.shortRuleNameToFullName(N),idxInCallingRule:O[$],inRule:H.shortRuleNameToFullName(R[$-1])}})},Y.prototype.flattenFollowSet=function(){var H=this,R=E.map(this.buildFullFollowKeyStack(),function(O){return H.getFollowSetFromFollowKey(O)});return E.flatten(R)},Y.prototype.getFollowSetFromFollowKey=function(H){if(H===A.EOF_FOLLOW_KEY)return[Q.EOF];var R=H.ruleName+H.idxInCallingRule+I.IN+H.inRule;return this.resyncFollows[R]},Y.prototype.addToResyncTokens=function(H,R){return this.tokenMatcher(H,Q.EOF)||R.push(H),R},Y.prototype.reSyncTo=function(H){for(var R=[],O=this.LA(1);this.tokenMatcher(O,H)===!1;)O=this.SKIP_TOKEN(),this.addToResyncTokens(O,R);return E.dropRight(R)},Y.prototype.attemptInRepetitionRecovery=function(H,R,O,N,$,L,W){},Y.prototype.getCurrentGrammarPath=function(H,R){var O=this.getHumanReadableRuleStack(),N=E.cloneArr(this.RULE_OCCURRENCE_STACK),$={ruleStack:O,occurrenceStack:N,lastTok:H,lastTokOccurrence:R};return $},Y.prototype.getHumanReadableRuleStack=function(){var H=this;return E.map(this.RULE_STACK,function(R){return H.shortRuleNameToFullName(R)})},Y}();A.Recoverable=J;function U(Y,H,R,O,N,$,L){var W=this.getKeyForAutomaticLookahead(O,N),Z=this.firstAfterRepMap[W];if(Z===void 0){var G=this.getCurrRuleFullName(),X=this.getGAstProductions()[G],q=new $(X,N);Z=q.startWalking(),this.firstAfterRepMap[W]=Z}var{token:M,occurrence:F,isEndOfRule:D}=Z;this.RULE_STACK.length===1&&D&&M===void 0&&(M=Q.EOF,F=1),this.shouldInRepetitionRecoveryBeTried(M,F,L)&&this.tryInRepetitionRecovery(Y,H,R,M)}A.attemptInRepetitionRecovery=U}),R7=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.getKeyForAutomaticLookahead=A.AT_LEAST_ONE_SEP_IDX=A.MANY_SEP_IDX=A.AT_LEAST_ONE_IDX=A.MANY_IDX=A.OPTION_IDX=A.OR_IDX=A.BITS_FOR_ALT_IDX=A.BITS_FOR_RULE_IDX=A.BITS_FOR_OCCURRENCE_IDX=A.BITS_FOR_METHOD_TYPE=void 0,A.BITS_FOR_METHOD_TYPE=4,A.BITS_FOR_OCCURRENCE_IDX=8,A.BITS_FOR_RULE_IDX=12,A.BITS_FOR_ALT_IDX=8,A.OR_IDX=1<<A.BITS_FOR_OCCURRENCE_IDX,A.OPTION_IDX=2<<A.BITS_FOR_OCCURRENCE_IDX,A.MANY_IDX=3<<A.BITS_FOR_OCCURRENCE_IDX,A.AT_LEAST_ONE_IDX=4<<A.BITS_FOR_OCCURRENCE_IDX,A.MANY_SEP_IDX=5<<A.BITS_FOR_OCCURRENCE_IDX,A.AT_LEAST_ONE_SEP_IDX=6<<A.BITS_FOR_OCCURRENCE_IDX;function Q(B,I,C){return C|I|B}A.getKeyForAutomaticLookahead=Q;var E=32-A.BITS_FOR_ALT_IDX}),vk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.LooksAhead=void 0;var Q=VU(),E=t0(),B=EB(),I=R7(),C=TU(),K=function(){function J(){}return J.prototype.initLooksAhead=function(U){this.dynamicTokensEnabled=E.has(U,"dynamicTokensEnabled")?U.dynamicTokensEnabled:B.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=E.has(U,"maxLookahead")?U.maxLookahead:B.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=E.isES2015MapSupported()?/*@__PURE__*/new Map:[],E.isES2015MapSupported()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},J.prototype.preComputeLookaheadFunctions=function(U){var Y=this;E.forEach(U,function(H){Y.TRACE_INIT(H.name+" Rule Lookahead",function(){var R=C.collectMethods(H),O=R.alternation,N=R.repetition,$=R.option,L=R.repetitionMandatory,W=R.repetitionMandatoryWithSeparator,Z=R.repetitionWithSeparator;E.forEach(O,function(G){var X=G.idx===0?"":G.idx;Y.TRACE_INIT(""+C.getProductionDslName(G)+X,function(){var q=Q.buildLookaheadFuncForOr(G.idx,H,G.maxLookahead||Y.maxLookahead,G.hasPredicates,Y.dynamicTokensEnabled,Y.lookAheadBuilderForAlternatives),M=I.getKeyForAutomaticLookahead(Y.fullRuleNameToShort[H.name],I.OR_IDX,G.idx);Y.setLaFuncCache(M,q)})}),E.forEach(N,function(G){Y.computeLookaheadFunc(H,G.idx,I.MANY_IDX,Q.PROD_TYPE.REPETITION,G.maxLookahead,C.getProductionDslName(G))}),E.forEach($,function(G){Y.computeLookaheadFunc(H,G.idx,I.OPTION_IDX,Q.PROD_TYPE.OPTION,G.maxLookahead,C.getProductionDslName(G))}),E.forEach(L,function(G){Y.computeLookaheadFunc(H,G.idx,I.AT_LEAST_ONE_IDX,Q.PROD_TYPE.REPETITION_MANDATORY,G.maxLookahead,C.getProductionDslName(G))}),E.forEach(W,function(G){Y.computeLookaheadFunc(H,G.idx,I.AT_LEAST_ONE_SEP_IDX,Q.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,G.maxLookahead,C.getProductionDslName(G))}),E.forEach(Z,function(G){Y.computeLookaheadFunc(H,G.idx,I.MANY_SEP_IDX,Q.PROD_TYPE.REPETITION_WITH_SEPARATOR,G.maxLookahead,C.getProductionDslName(G))})})})},J.prototype.computeLookaheadFunc=function(U,Y,H,R,O,N){var $=this;this.TRACE_INIT(""+N+(Y===0?"":Y),function(){var L=Q.buildLookaheadFuncForOptionalProd(Y,U,O||$.maxLookahead,$.dynamicTokensEnabled,R,$.lookAheadBuilderForOptional),W=I.getKeyForAutomaticLookahead($.fullRuleNameToShort[U.name],H,Y);$.setLaFuncCache(W,L)})},J.prototype.lookAheadBuilderForOptional=function(U,Y,H){return Q.buildSingleAlternativeLookaheadFunction(U,Y,H)},J.prototype.lookAheadBuilderForAlternatives=function(U,Y,H,R){return Q.buildAlternativesLookAheadFunc(U,Y,H,R)},J.prototype.getKeyForAutomaticLookahead=function(U,Y){var H=this.getLastExplicitRuleShortName();return I.getKeyForAutomaticLookahead(H,U,Y)},J.prototype.getLaFuncFromCache=function(U){},J.prototype.getLaFuncFromMap=function(U){return this.lookAheadFuncsCache.get(U)},J.prototype.getLaFuncFromObj=function(U){return this.lookAheadFuncsCache[U]},J.prototype.setLaFuncCache=function(U,Y){},J.prototype.setLaFuncCacheUsingMap=function(U,Y){this.lookAheadFuncsCache.set(U,Y)},J.prototype.setLaFuncUsingObj=function(U,Y){this.lookAheadFuncsCache[U]=Y},J}();A.LooksAhead=K}),hk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.addNoneTerminalToCst=A.addTerminalToCst=A.setNodeLocationFull=A.setNodeLocationOnlyOffset=void 0;function Q(C,K){isNaN(C.startOffset)===!0?(C.startOffset=K.startOffset,C.endOffset=K.endOffset):C.endOffset<K.endOffset&&(C.endOffset=K.endOffset)}A.setNodeLocationOnlyOffset=Q;function E(C,K){isNaN(C.startOffset)===!0?(C.startOffset=K.startOffset,C.startColumn=K.startColumn,C.startLine=K.startLine,C.endOffset=K.endOffset,C.endColumn=K.endColumn,C.endLine=K.endLine):C.endOffset<K.endOffset&&(C.endOffset=K.endOffset,C.endColumn=K.endColumn,C.endLine=K.endLine)}A.setNodeLocationFull=E;function B(C,K,J){C.children[J]===void 0?C.children[J]=[K]:C.children[J].push(K)}A.addTerminalToCst=B;function I(C,K,J){C.children[K]===void 0?C.children[K]=[J]:C.children[K].push(J)}A.addNoneTerminalToCst=I}),MX=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.defineNameProp=A.functionName=A.classNameFromInstance=void 0;var Q=t0();function E(K){return I(K.constructor)}A.classNameFromInstance=E;var B="name";function I(K){var J=K.name;return J||"anonymous"}A.functionName=I;function C(K,J){var U=Object.getOwnPropertyDescriptor(K,B);return Q.isUndefined(U)||U.configurable?(Object.defineProperty(K,B,{enumerable:!1,configurable:!0,writable:!1,value:J}),!0):!1}A.defineNameProp=C}),yk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.validateRedundantMethods=A.validateMissingCstMethods=A.validateVisitor=A.CstVisitorDefinitionError=A.createBaseVisitorConstructorWithDefaults=A.createBaseSemanticVisitorConstructor=A.defaultVisit=void 0;var Q=t0(),E=MX();function B(R,O){for(var N=Q.keys(R),$=N.length,L=0;L<$;L++)for(var W=N[L],Z=R[W],G=Z.length,X=0;X<G;X++){var q=Z[X];q.tokenTypeIdx===void 0&&this[q.name](q.children,O)}}A.defaultVisit=B;function I(R,O){var N=function(){};E.defineNameProp(N,R+"BaseSemantics");var $={visit:function(L,W){if(Q.isArray(L)&&(L=L[0]),!Q.isUndefined(L))return this[L.name](L.children,W)},validateVisitor:function(){var L=J(this,O);if(!Q.isEmpty(L)){var W=Q.map(L,function(Z){return Z.msg});throw Error("Errors Detected in CST Visitor <"+E.functionName(this.constructor)+`>:
	`+(""+W.join(`

`).replace(/\n/g,`
	`)))}}};return N.prototype=$,N.prototype.constructor=N,N._RULE_NAMES=O,N}A.createBaseSemanticVisitorConstructor=I;function C(R,O,N){var $=function(){};E.defineNameProp($,R+"BaseSemanticsWithDefaults");var L=Object.create(N.prototype);return Q.forEach(O,function(W){L[W]=B}),$.prototype=L,$.prototype.constructor=$,$}A.createBaseVisitorConstructorWithDefaults=C;var K;(function(R){R[R.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",R[R.MISSING_METHOD=1]="MISSING_METHOD"})(K=A.CstVisitorDefinitionError||(A.CstVisitorDefinitionError={}));function J(R,O){var N=U(R,O),$=H(R,O);return N.concat($)}A.validateVisitor=J;function U(R,O){var N=Q.map(O,function($){if(!Q.isFunction(R[$]))return{msg:"Missing visitor method: <"+$+"> on "+E.functionName(R.constructor)+" CST Visitor.",type:K.MISSING_METHOD,methodName:$}});return Q.compact(N)}A.validateMissingCstMethods=U;var Y=["constructor","visit","validateVisitor"];function H(R,O){var N=[];for(var $ in R)Q.isFunction(R[$])&&!Q.contains(Y,$)&&!Q.contains(O,$)&&N.push({msg:"Redundant visitor method: <"+$+"> on "+E.functionName(R.constructor)+` CST Visitor
There is no Grammar Rule corresponding to this method's name.
`,type:K.REDUNDANT_METHOD,methodName:$});return N}A.validateRedundantMethods=H}),gk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.TreeBuilder=void 0;var Q=hk(),E=t0(),B=yk(),I=EB(),C=function(){function K(){}return K.prototype.initTreeBuilder=function(J){if(this.CST_STACK=[],this.outputCst=J.outputCst,this.nodeLocationTracking=E.has(J,"nodeLocationTracking")?J.nodeLocationTracking:I.DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=E.NOOP,this.cstFinallyStateUpdate=E.NOOP,this.cstPostTerminal=E.NOOP,this.cstPostNonTerminal=E.NOOP,this.cstPostRule=E.NOOP;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Q.setNodeLocationFull,this.setNodeLocationFromNode=Q.setNodeLocationFull,this.cstPostRule=E.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=E.NOOP,this.setNodeLocationFromNode=E.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Q.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=Q.setNodeLocationOnlyOffset,this.cstPostRule=E.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=E.NOOP,this.setNodeLocationFromNode=E.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=E.NOOP,this.setNodeLocationFromNode=E.NOOP,this.cstPostRule=E.NOOP,this.setInitialNodeLocation=E.NOOP;else throw Error('Invalid <nodeLocationTracking> config option: "'+J.nodeLocationTracking+'"')},K.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(J){J.location={startOffset:NaN,endOffset:NaN}},K.prototype.setInitialNodeLocationOnlyOffsetRegular=function(J){J.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},K.prototype.setInitialNodeLocationFullRecovery=function(J){J.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},K.prototype.setInitialNodeLocationFullRegular=function(J){var U=this.LA(1);J.location={startOffset:U.startOffset,startLine:U.startLine,startColumn:U.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},K.prototype.cstInvocationStateUpdate=function(J,U){var Y={name:J,children:{}};this.setInitialNodeLocation(Y),this.CST_STACK.push(Y)},K.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},K.prototype.cstPostRuleFull=function(J){var U=this.LA(0),Y=J.location;Y.startOffset<=U.startOffset?(Y.endOffset=U.endOffset,Y.endLine=U.endLine,Y.endColumn=U.endColumn):(Y.startOffset=NaN,Y.startLine=NaN,Y.startColumn=NaN)},K.prototype.cstPostRuleOnlyOffset=function(J){var U=this.LA(0),Y=J.location;Y.startOffset<=U.startOffset?Y.endOffset=U.endOffset:Y.startOffset=NaN},K.prototype.cstPostTerminal=function(J,U){var Y=this.CST_STACK[this.CST_STACK.length-1];Q.addTerminalToCst(Y,U,J),this.setNodeLocationFromToken(Y.location,U)},K.prototype.cstPostNonTerminal=function(J,U){var Y=this.CST_STACK[this.CST_STACK.length-1];Q.addNoneTerminalToCst(Y,U,J),this.setNodeLocationFromNode(Y.location,J.location)},K.prototype.getBaseCstVisitorConstructor=function(){if(E.isUndefined(this.baseCstVisitorConstructor)){var J=B.createBaseSemanticVisitorConstructor(this.className,E.keys(this.gastProductionsCache));return this.baseCstVisitorConstructor=J,J}return this.baseCstVisitorConstructor},K.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(E.isUndefined(this.baseCstVisitorWithDefaultsConstructor)){var J=B.createBaseVisitorConstructorWithDefaults(this.className,E.keys(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=J,J}return this.baseCstVisitorWithDefaultsConstructor},K.prototype.getLastExplicitRuleShortName=function(){var J=this.RULE_STACK;return J[J.length-1]},K.prototype.getPreviousExplicitRuleShortName=function(){var J=this.RULE_STACK;return J[J.length-2]},K.prototype.getLastExplicitRuleOccurrenceIndex=function(){var J=this.RULE_OCCURRENCE_STACK;return J[J.length-1]},K}();A.TreeBuilder=C}),xk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.LexerAdapter=void 0;var Q=EB(),E=function(){function B(){}return B.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(B.prototype,"input",{get:function(){return this.tokVector},set:function(I){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=I,this.tokVectorLength=I.length},enumerable:!1,configurable:!0}),B.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Q.END_OF_FILE},B.prototype.LA=function(I){var C=this.currIdx+I;return C<0||this.tokVectorLength<=C?Q.END_OF_FILE:this.tokVector[C]},B.prototype.consumeToken=function(){this.currIdx++},B.prototype.exportLexerState=function(){return this.currIdx},B.prototype.importLexerState=function(I){this.currIdx=I},B.prototype.resetLexerState=function(){this.currIdx=-1},B.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},B.prototype.getLexerPosition=function(){return this.exportLexerState()},B}();A.LexerAdapter=E}),bk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.RecognizerApi=void 0;var Q=t0(),E=DK(),B=EB(),I=zU(),C=FX(),K=mE(),J=function(){function U(){}return U.prototype.ACTION=function(Y){return Y.call(this)},U.prototype.consume=function(Y,H,R){return this.consumeInternal(H,Y,R)},U.prototype.subrule=function(Y,H,R){return this.subruleInternal(H,Y,R)},U.prototype.option=function(Y,H){return this.optionInternal(H,Y)},U.prototype.or=function(Y,H){return this.orInternal(H,Y)},U.prototype.many=function(Y,H){return this.manyInternal(Y,H)},U.prototype.atLeastOne=function(Y,H){return this.atLeastOneInternal(Y,H)},U.prototype.CONSUME=function(Y,H){return this.consumeInternal(Y,0,H)},U.prototype.CONSUME1=function(Y,H){return this.consumeInternal(Y,1,H)},U.prototype.CONSUME2=function(Y,H){return this.consumeInternal(Y,2,H)},U.prototype.CONSUME3=function(Y,H){return this.consumeInternal(Y,3,H)},U.prototype.CONSUME4=function(Y,H){return this.consumeInternal(Y,4,H)},U.prototype.CONSUME5=function(Y,H){return this.consumeInternal(Y,5,H)},U.prototype.CONSUME6=function(Y,H){return this.consumeInternal(Y,6,H)},U.prototype.CONSUME7=function(Y,H){return this.consumeInternal(Y,7,H)},U.prototype.CONSUME8=function(Y,H){return this.consumeInternal(Y,8,H)},U.prototype.CONSUME9=function(Y,H){return this.consumeInternal(Y,9,H)},U.prototype.SUBRULE=function(Y,H){return this.subruleInternal(Y,0,H)},U.prototype.SUBRULE1=function(Y,H){return this.subruleInternal(Y,1,H)},U.prototype.SUBRULE2=function(Y,H){return this.subruleInternal(Y,2,H)},U.prototype.SUBRULE3=function(Y,H){return this.subruleInternal(Y,3,H)},U.prototype.SUBRULE4=function(Y,H){return this.subruleInternal(Y,4,H)},U.prototype.SUBRULE5=function(Y,H){return this.subruleInternal(Y,5,H)},U.prototype.SUBRULE6=function(Y,H){return this.subruleInternal(Y,6,H)},U.prototype.SUBRULE7=function(Y,H){return this.subruleInternal(Y,7,H)},U.prototype.SUBRULE8=function(Y,H){return this.subruleInternal(Y,8,H)},U.prototype.SUBRULE9=function(Y,H){return this.subruleInternal(Y,9,H)},U.prototype.OPTION=function(Y){return this.optionInternal(Y,0)},U.prototype.OPTION1=function(Y){return this.optionInternal(Y,1)},U.prototype.OPTION2=function(Y){return this.optionInternal(Y,2)},U.prototype.OPTION3=function(Y){return this.optionInternal(Y,3)},U.prototype.OPTION4=function(Y){return this.optionInternal(Y,4)},U.prototype.OPTION5=function(Y){return this.optionInternal(Y,5)},U.prototype.OPTION6=function(Y){return this.optionInternal(Y,6)},U.prototype.OPTION7=function(Y){return this.optionInternal(Y,7)},U.prototype.OPTION8=function(Y){return this.optionInternal(Y,8)},U.prototype.OPTION9=function(Y){return this.optionInternal(Y,9)},U.prototype.OR=function(Y){return this.orInternal(Y,0)},U.prototype.OR1=function(Y){return this.orInternal(Y,1)},U.prototype.OR2=function(Y){return this.orInternal(Y,2)},U.prototype.OR3=function(Y){return this.orInternal(Y,3)},U.prototype.OR4=function(Y){return this.orInternal(Y,4)},U.prototype.OR5=function(Y){return this.orInternal(Y,5)},U.prototype.OR6=function(Y){return this.orInternal(Y,6)},U.prototype.OR7=function(Y){return this.orInternal(Y,7)},U.prototype.OR8=function(Y){return this.orInternal(Y,8)},U.prototype.OR9=function(Y){return this.orInternal(Y,9)},U.prototype.MANY=function(Y){this.manyInternal(0,Y)},U.prototype.MANY1=function(Y){this.manyInternal(1,Y)},U.prototype.MANY2=function(Y){this.manyInternal(2,Y)},U.prototype.MANY3=function(Y){this.manyInternal(3,Y)},U.prototype.MANY4=function(Y){this.manyInternal(4,Y)},U.prototype.MANY5=function(Y){this.manyInternal(5,Y)},U.prototype.MANY6=function(Y){this.manyInternal(6,Y)},U.prototype.MANY7=function(Y){this.manyInternal(7,Y)},U.prototype.MANY8=function(Y){this.manyInternal(8,Y)},U.prototype.MANY9=function(Y){this.manyInternal(9,Y)},U.prototype.MANY_SEP=function(Y){this.manySepFirstInternal(0,Y)},U.prototype.MANY_SEP1=function(Y){this.manySepFirstInternal(1,Y)},U.prototype.MANY_SEP2=function(Y){this.manySepFirstInternal(2,Y)},U.prototype.MANY_SEP3=function(Y){this.manySepFirstInternal(3,Y)},U.prototype.MANY_SEP4=function(Y){this.manySepFirstInternal(4,Y)},U.prototype.MANY_SEP5=function(Y){this.manySepFirstInternal(5,Y)},U.prototype.MANY_SEP6=function(Y){this.manySepFirstInternal(6,Y)},U.prototype.MANY_SEP7=function(Y){this.manySepFirstInternal(7,Y)},U.prototype.MANY_SEP8=function(Y){this.manySepFirstInternal(8,Y)},U.prototype.MANY_SEP9=function(Y){this.manySepFirstInternal(9,Y)},U.prototype.AT_LEAST_ONE=function(Y){this.atLeastOneInternal(0,Y)},U.prototype.AT_LEAST_ONE1=function(Y){return this.atLeastOneInternal(1,Y)},U.prototype.AT_LEAST_ONE2=function(Y){this.atLeastOneInternal(2,Y)},U.prototype.AT_LEAST_ONE3=function(Y){this.atLeastOneInternal(3,Y)},U.prototype.AT_LEAST_ONE4=function(Y){this.atLeastOneInternal(4,Y)},U.prototype.AT_LEAST_ONE5=function(Y){this.atLeastOneInternal(5,Y)},U.prototype.AT_LEAST_ONE6=function(Y){this.atLeastOneInternal(6,Y)},U.prototype.AT_LEAST_ONE7=function(Y){this.atLeastOneInternal(7,Y)},U.prototype.AT_LEAST_ONE8=function(Y){this.atLeastOneInternal(8,Y)},U.prototype.AT_LEAST_ONE9=function(Y){this.atLeastOneInternal(9,Y)},U.prototype.AT_LEAST_ONE_SEP=function(Y){this.atLeastOneSepFirstInternal(0,Y)},U.prototype.AT_LEAST_ONE_SEP1=function(Y){this.atLeastOneSepFirstInternal(1,Y)},U.prototype.AT_LEAST_ONE_SEP2=function(Y){this.atLeastOneSepFirstInternal(2,Y)},U.prototype.AT_LEAST_ONE_SEP3=function(Y){this.atLeastOneSepFirstInternal(3,Y)},U.prototype.AT_LEAST_ONE_SEP4=function(Y){this.atLeastOneSepFirstInternal(4,Y)},U.prototype.AT_LEAST_ONE_SEP5=function(Y){this.atLeastOneSepFirstInternal(5,Y)},U.prototype.AT_LEAST_ONE_SEP6=function(Y){this.atLeastOneSepFirstInternal(6,Y)},U.prototype.AT_LEAST_ONE_SEP7=function(Y){this.atLeastOneSepFirstInternal(7,Y)},U.prototype.AT_LEAST_ONE_SEP8=function(Y){this.atLeastOneSepFirstInternal(8,Y)},U.prototype.AT_LEAST_ONE_SEP9=function(Y){this.atLeastOneSepFirstInternal(9,Y)},U.prototype.RULE=function(Y,H,R){if(R===void 0&&(R=B.DEFAULT_RULE_CONFIG),Q.contains(this.definedRulesNames,Y)){var O=I.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:Y,grammarName:this.className}),N={message:O,type:B.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:Y};this.definitionErrors.push(N)}this.definedRulesNames.push(Y);var $=this.defineRule(Y,H,R);return this[Y]=$,$},U.prototype.OVERRIDE_RULE=function(Y,H,R){R===void 0&&(R=B.DEFAULT_RULE_CONFIG);var O=[];O=O.concat(C.validateRuleIsOverridden(Y,this.definedRulesNames,this.className)),this.definitionErrors=this.definitionErrors.concat(O);var N=this.defineRule(Y,H,R);return this[Y]=N,N},U.prototype.BACKTRACK=function(Y,H){return function(){this.isBackTrackingStack.push(1);var R=this.saveRecogState();try{return Y.apply(this,H),!0}catch(O){if(E.isRecognitionException(O))return!1;throw O}finally{this.reloadRecogState(R),this.isBackTrackingStack.pop()}}},U.prototype.getGAstProductions=function(){return this.gastProductionsCache},U.prototype.getSerializedGastProductions=function(){return K.serializeGrammar(Q.values(this.gastProductionsCache))},U}();A.RecognizerApi=J}),fk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.RecognizerEngine=void 0;var Q=t0(),E=R7(),B=DK(),I=VU(),C=PU(),K=EB(),J=DX(),U=i1(),Y=qK(),H=MX(),R=function(){function O(){}return O.prototype.initRecognizerEngine=function(N,$){if(this.className=H.classNameFromInstance(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Y.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Q.has($,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Q.isArray(N)){if(Q.isEmpty(N))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof N[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Q.isArray(N))this.tokensMap=Q.reduce(N,function(G,X){return G[X.name]=X,G},{});else if(Q.has(N,"modes")&&Q.every(Q.flatten(Q.values(N.modes)),Y.isTokenType)){var L=Q.flatten(Q.values(N.modes)),W=Q.uniq(L);this.tokensMap=Q.reduce(W,function(G,X){return G[X.name]=X,G},{})}else if(Q.isObject(N))this.tokensMap=Q.cloneObj(N);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=U.EOF;var Z=Q.every(Q.values(N),function(G){return Q.isEmpty(G.categoryMatches)});this.tokenMatcher=Z?Y.tokenStructuredMatcherNoCategories:Y.tokenStructuredMatcher,Y.augmentTokenTypes(Q.values(this.tokensMap))},O.prototype.defineRule=function(N,$,L){if(this.selfAnalysisDone)throw Error("Grammar rule <"+N+`> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);var W=Q.has(L,"resyncEnabled")?L.resyncEnabled:K.DEFAULT_RULE_CONFIG.resyncEnabled,Z=Q.has(L,"recoveryValueFunc")?L.recoveryValueFunc:K.DEFAULT_RULE_CONFIG.recoveryValueFunc,G=this.ruleShortNameIdx<<E.BITS_FOR_METHOD_TYPE+E.BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[G]=N,this.fullRuleNameToShort[N]=G;function X(F){try{if(this.outputCst===!0){$.apply(this,F);var D=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(D),D}else return $.apply(this,F)}catch(_){return this.invokeRuleCatch(_,W,Z)}finally{this.ruleFinallyStateUpdate()}}var q=function(F,D){return F===void 0&&(F=0),this.ruleInvocationStateUpdate(G,N,F),X.call(this,D)},M="ruleName";return q[M]=N,q.originalGrammarAction=$,q},O.prototype.invokeRuleCatch=function(N,$,L){var W=this.RULE_STACK.length===1,Z=$&&!this.isBackTracking()&&this.recoveryEnabled;if(B.isRecognitionException(N)){var G=N;if(Z){var X=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(X))if(G.resyncedTokens=this.reSyncTo(X),this.outputCst){var q=this.CST_STACK[this.CST_STACK.length-1];return q.recoveredNode=!0,q}else return L();else{if(this.outputCst){var q=this.CST_STACK[this.CST_STACK.length-1];q.recoveredNode=!0,G.partialCstResult=q}throw G}}else{if(W)return this.moveToTerminatedState(),L();throw G}}else throw N},O.prototype.optionInternal=function(N,$){var L=this.getKeyForAutomaticLookahead(E.OPTION_IDX,$);return this.optionInternalLogic(N,$,L)},O.prototype.optionInternalLogic=function(N,$,L){var W=this,Z=this.getLaFuncFromCache(L),G,X;if(N.DEF!==void 0){if(G=N.DEF,X=N.GATE,X!==void 0){var q=Z;Z=function(){return X.call(W)&&q.call(W)}}}else G=N;if(Z.call(this)===!0)return G.call(this)},O.prototype.atLeastOneInternal=function(N,$){var L=this.getKeyForAutomaticLookahead(E.AT_LEAST_ONE_IDX,N);return this.atLeastOneInternalLogic(N,$,L)},O.prototype.atLeastOneInternalLogic=function(N,$,L){var W=this,Z=this.getLaFuncFromCache(L),G,X;if($.DEF!==void 0){if(G=$.DEF,X=$.GATE,X!==void 0){var q=Z;Z=function(){return X.call(W)&&q.call(W)}}}else G=$;if(Z.call(this)===!0)for(var M=this.doSingleRepetition(G);Z.call(this)===!0&&M===!0;)M=this.doSingleRepetition(G);else throw this.raiseEarlyExitException(N,I.PROD_TYPE.REPETITION_MANDATORY,$.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[N,$],Z,E.AT_LEAST_ONE_IDX,N,C.NextTerminalAfterAtLeastOneWalker)},O.prototype.atLeastOneSepFirstInternal=function(N,$){var L=this.getKeyForAutomaticLookahead(E.AT_LEAST_ONE_SEP_IDX,N);this.atLeastOneSepFirstInternalLogic(N,$,L)},O.prototype.atLeastOneSepFirstInternalLogic=function(N,$,L){var W=this,Z=$.DEF,G=$.SEP,X=this.getLaFuncFromCache(L);if(X.call(this)===!0){Z.call(this);for(var q=function(){return W.tokenMatcher(W.LA(1),G)};this.tokenMatcher(this.LA(1),G)===!0;)this.CONSUME(G),Z.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[N,G,q,Z,C.NextTerminalAfterAtLeastOneSepWalker],q,E.AT_LEAST_ONE_SEP_IDX,N,C.NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(N,I.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,$.ERR_MSG)},O.prototype.manyInternal=function(N,$){var L=this.getKeyForAutomaticLookahead(E.MANY_IDX,N);return this.manyInternalLogic(N,$,L)},O.prototype.manyInternalLogic=function(N,$,L){var W=this,Z=this.getLaFuncFromCache(L),G,X;if($.DEF!==void 0){if(G=$.DEF,X=$.GATE,X!==void 0){var q=Z;Z=function(){return X.call(W)&&q.call(W)}}}else G=$;for(var M=!0;Z.call(this)===!0&&M===!0;)M=this.doSingleRepetition(G);this.attemptInRepetitionRecovery(this.manyInternal,[N,$],Z,E.MANY_IDX,N,C.NextTerminalAfterManyWalker,M)},O.prototype.manySepFirstInternal=function(N,$){var L=this.getKeyForAutomaticLookahead(E.MANY_SEP_IDX,N);this.manySepFirstInternalLogic(N,$,L)},O.prototype.manySepFirstInternalLogic=function(N,$,L){var W=this,Z=$.DEF,G=$.SEP,X=this.getLaFuncFromCache(L);if(X.call(this)===!0){Z.call(this);for(var q=function(){return W.tokenMatcher(W.LA(1),G)};this.tokenMatcher(this.LA(1),G)===!0;)this.CONSUME(G),Z.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[N,G,q,Z,C.NextTerminalAfterManySepWalker],q,E.MANY_SEP_IDX,N,C.NextTerminalAfterManySepWalker)}},O.prototype.repetitionSepSecondInternal=function(N,$,L,W,Z){for(;L();)this.CONSUME($),W.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[N,$,L,W,Z],L,E.AT_LEAST_ONE_SEP_IDX,N,Z)},O.prototype.doSingleRepetition=function(N){var $=this.getLexerPosition();N.call(this);var L=this.getLexerPosition();return L>$},O.prototype.orInternal=function(N,$){var L=this.getKeyForAutomaticLookahead(E.OR_IDX,$),W=Q.isArray(N)?N:N.DEF,Z=this.getLaFuncFromCache(L),G=Z.call(this,W);if(G!==void 0){var X=W[G];return X.ALT.call(this)}this.raiseNoAltException($,N.ERR_MSG)},O.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var N=this.LA(1),$=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:N,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new B.NotAllInputParsedException($,N))}},O.prototype.subruleInternal=function(N,$,L){var W;try{var Z=L!==void 0?L.ARGS:void 0;return W=N.call(this,$,Z),this.cstPostNonTerminal(W,L!==void 0&&L.LABEL!==void 0?L.LABEL:N.ruleName),W}catch(G){this.subruleInternalError(G,L,N.ruleName)}},O.prototype.subruleInternalError=function(N,$,L){throw B.isRecognitionException(N)&&N.partialCstResult!==void 0&&(this.cstPostNonTerminal(N.partialCstResult,$!==void 0&&$.LABEL!==void 0?$.LABEL:L),delete N.partialCstResult),N},O.prototype.consumeInternal=function(N,$,L){var W;try{var Z=this.LA(1);this.tokenMatcher(Z,N)===!0?(this.consumeToken(),W=Z):this.consumeInternalError(N,Z,L)}catch(G){W=this.consumeInternalRecovery(N,$,G)}return this.cstPostTerminal(L!==void 0&&L.LABEL!==void 0?L.LABEL:N.name,W),W},O.prototype.consumeInternalError=function(N,$,L){var W,Z=this.LA(0);throw L!==void 0&&L.ERR_MSG?W=L.ERR_MSG:W=this.errorMessageProvider.buildMismatchTokenMessage({expected:N,actual:$,previous:Z,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new B.MismatchedTokenException(W,$,Z))},O.prototype.consumeInternalRecovery=function(N,$,L){if(this.recoveryEnabled&&L.name==="MismatchedTokenException"&&!this.isBackTracking()){var W=this.getFollowsForInRuleRecovery(N,$);try{return this.tryInRuleRecovery(N,W)}catch(Z){throw Z.name===J.IN_RULE_RECOVERY_EXCEPTION?L:Z}}else throw L},O.prototype.saveRecogState=function(){var N=this.errors,$=Q.cloneArr(this.RULE_STACK);return{errors:N,lexerState:this.exportLexerState(),RULE_STACK:$,CST_STACK:this.CST_STACK}},O.prototype.reloadRecogState=function(N){this.errors=N.errors,this.importLexerState(N.lexerState),this.RULE_STACK=N.RULE_STACK},O.prototype.ruleInvocationStateUpdate=function(N,$,L){this.RULE_OCCURRENCE_STACK.push(L),this.RULE_STACK.push(N),this.cstInvocationStateUpdate($,N)},O.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},O.prototype.getCurrRuleFullName=function(){var N=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[N]},O.prototype.shortRuleNameToFullName=function(N){return this.shortRuleNameToFull[N]},O.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),U.EOF)},O.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},O}();A.RecognizerEngine=R}),uk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.ErrorHandler=void 0;var Q=DK(),E=t0(),B=VU(),I=EB(),C=function(){function K(){}return K.prototype.initErrorHandler=function(J){this._errors=[],this.errorMessageProvider=E.has(J,"errorMessageProvider")?J.errorMessageProvider:I.DEFAULT_PARSER_CONFIG.errorMessageProvider},K.prototype.SAVE_ERROR=function(J){if(Q.isRecognitionException(J))return J.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:E.cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(J),J;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(K.prototype,"errors",{get:function(){return E.cloneArr(this._errors)},set:function(J){this._errors=J},enumerable:!1,configurable:!0}),K.prototype.raiseEarlyExitException=function(J,U,Y){for(var H=this.getCurrRuleFullName(),R=this.getGAstProductions()[H],O=B.getLookaheadPathsForOptionalProd(J,R,U,this.maxLookahead),N=O[0],$=[],L=1;L<=this.maxLookahead;L++)$.push(this.LA(L));var W=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:N,actual:$,previous:this.LA(0),customUserDescription:Y,ruleName:H});throw this.SAVE_ERROR(new Q.EarlyExitException(W,this.LA(1),this.LA(0)))},K.prototype.raiseNoAltException=function(J,U){for(var Y=this.getCurrRuleFullName(),H=this.getGAstProductions()[Y],R=B.getLookaheadPathsForOr(J,H,this.maxLookahead),O=[],N=1;N<=this.maxLookahead;N++)O.push(this.LA(N));var $=this.LA(0),L=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:R,actual:O,previous:$,customUserDescription:U,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Q.NoViableAltException(L,this.LA(1),$))},K}();A.ErrorHandler=C}),pk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.ContentAssist=void 0;var Q=PU(),E=t0(),B=function(){function I(){}return I.prototype.initContentAssist=function(){},I.prototype.computeContentAssist=function(C,K){var J=this.gastProductionsCache[C];if(E.isUndefined(J))throw Error("Rule ->"+C+"<- does not exist in this grammar.");return Q.nextPossibleTokensAfter([J],K,this.tokenMatcher,this.maxLookahead)},I.prototype.getNextPossibleTokenTypes=function(C){var K=E.first(C.ruleStack),J=this.getGAstProductions(),U=J[K],Y=new Q.NextAfterTokenWalker(U,C).startWalking();return Y},I}();A.ContentAssist=B}),mk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.GastRecorder=void 0;var Q=t0(),E=mE(),B=SU(),I=qK(),C=i1(),K=EB(),J=R7(),U={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(U);var Y=!0,H=Math.pow(2,J.BITS_FOR_OCCURRENCE_IDX)-1,R=C.createToken({name:"RECORDING_PHASE_TOKEN",pattern:B.Lexer.NA});I.augmentTokenTypes([R]);var O=C.createTokenInstance(R,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(O);var N={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},$=function(){function X(){}return X.prototype.initGastRecorder=function(q){this.recordingProdStack=[],this.RECORDING_PHASE=!1},X.prototype.enableRecording=function(){var q=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var M=function(D){var _=D>0?D:"";q["CONSUME"+_]=function(w,k){return this.consumeInternalRecord(w,D,k)},q["SUBRULE"+_]=function(w,k){return this.subruleInternalRecord(w,D,k)},q["OPTION"+_]=function(w){return this.optionInternalRecord(w,D)},q["OR"+_]=function(w){return this.orInternalRecord(w,D)},q["MANY"+_]=function(w){this.manyInternalRecord(D,w)},q["MANY_SEP"+_]=function(w){this.manySepFirstInternalRecord(D,w)},q["AT_LEAST_ONE"+_]=function(w){this.atLeastOneInternalRecord(D,w)},q["AT_LEAST_ONE_SEP"+_]=function(w){this.atLeastOneSepFirstInternalRecord(D,w)}},F=0;F<10;F++)M(F);q.consume=function(D,_,w){return this.consumeInternalRecord(_,D,w)},q.subrule=function(D,_,w){return this.subruleInternalRecord(_,D,w)},q.option=function(D,_){return this.optionInternalRecord(_,D)},q.or=function(D,_){return this.orInternalRecord(_,D)},q.many=function(D,_){this.manyInternalRecord(D,_)},q.atLeastOne=function(D,_){this.atLeastOneInternalRecord(D,_)},q.ACTION=q.ACTION_RECORD,q.BACKTRACK=q.BACKTRACK_RECORD,q.LA=q.LA_RECORD})},X.prototype.disableRecording=function(){var q=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var M=0;M<10;M++){var F=M>0?M:"";delete q["CONSUME"+F],delete q["SUBRULE"+F],delete q["OPTION"+F],delete q["OR"+F],delete q["MANY"+F],delete q["MANY_SEP"+F],delete q["AT_LEAST_ONE"+F],delete q["AT_LEAST_ONE_SEP"+F]}delete q.consume,delete q.subrule,delete q.option,delete q.or,delete q.many,delete q.atLeastOne,delete q.ACTION,delete q.BACKTRACK,delete q.LA})},X.prototype.ACTION_RECORD=function(q){},X.prototype.BACKTRACK_RECORD=function(q,M){return function(){return!0}},X.prototype.LA_RECORD=function(q){return K.END_OF_FILE},X.prototype.topLevelRuleRecord=function(q,M){try{var F=new E.Rule({definition:[],name:q});return F.name=q,this.recordingProdStack.push(F),M.call(this),this.recordingProdStack.pop(),F}catch(D){if(D.KNOWN_RECORDER_ERROR!==!0)try{D.message=D.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch(_){throw D}throw D}},X.prototype.optionInternalRecord=function(q,M){return L.call(this,E.Option,q,M)},X.prototype.atLeastOneInternalRecord=function(q,M){L.call(this,E.RepetitionMandatory,M,q)},X.prototype.atLeastOneSepFirstInternalRecord=function(q,M){L.call(this,E.RepetitionMandatoryWithSeparator,M,q,Y)},X.prototype.manyInternalRecord=function(q,M){L.call(this,E.Repetition,M,q)},X.prototype.manySepFirstInternalRecord=function(q,M){L.call(this,E.RepetitionWithSeparator,M,q,Y)},X.prototype.orInternalRecord=function(q,M){return W.call(this,q,M)},X.prototype.subruleInternalRecord=function(q,M,F){if(G(M),!q||Q.has(q,"ruleName")===!1){var D=new Error("<SUBRULE"+Z(M)+"> argument is invalid"+(" expecting a Parser method reference but got: <"+JSON.stringify(q)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw D.KNOWN_RECORDER_ERROR=!0,D}var _=Q.peek(this.recordingProdStack),w=q.ruleName,k=new E.NonTerminal({idx:M,nonTerminalName:w,referencedRule:void 0});return _.definition.push(k),this.outputCst?N:U},X.prototype.consumeInternalRecord=function(q,M,F){if(G(M),!I.hasShortKeyProperty(q)){var D=new Error("<CONSUME"+Z(M)+"> argument is invalid"+(" expecting a TokenType reference but got: <"+JSON.stringify(q)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw D.KNOWN_RECORDER_ERROR=!0,D}var _=Q.peek(this.recordingProdStack),w=new E.Terminal({idx:M,terminalType:q});return _.definition.push(w),O},X}();A.GastRecorder=$;function L(X,q,M,F){F===void 0&&(F=!1),G(M);var D=Q.peek(this.recordingProdStack),_=Q.isFunction(q)?q:q.DEF,w=new X({definition:[],idx:M});return F&&(w.separator=q.SEP),Q.has(q,"MAX_LOOKAHEAD")&&(w.maxLookahead=q.MAX_LOOKAHEAD),this.recordingProdStack.push(w),_.call(this),D.definition.push(w),this.recordingProdStack.pop(),U}function W(X,q){var M=this;G(q);var F=Q.peek(this.recordingProdStack),D=Q.isArray(X)===!1,_=D===!1?X:X.DEF,w=new E.Alternation({definition:[],idx:q,ignoreAmbiguities:D&&X.IGNORE_AMBIGUITIES===!0});Q.has(X,"MAX_LOOKAHEAD")&&(w.maxLookahead=X.MAX_LOOKAHEAD);var k=Q.some(_,function(T){return Q.isFunction(T.GATE)});return w.hasPredicates=k,F.definition.push(w),Q.forEach(_,function(T){var z=new E.Alternative({definition:[]});w.definition.push(z),Q.has(T,"IGNORE_AMBIGUITIES")?z.ignoreAmbiguities=T.IGNORE_AMBIGUITIES:Q.has(T,"GATE")&&(z.ignoreAmbiguities=!0),M.recordingProdStack.push(z),T.ALT.call(M),M.recordingProdStack.pop()}),U}function Z(X){return X===0?"":""+X}function G(X){if(X<0||X>H){var q=new Error("Invalid DSL Method idx value: <"+X+`>
	`+("Idx value must be a none negative value smaller than "+(H+1)));throw q.KNOWN_RECORDER_ERROR=!0,q}}}),ck=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PerformanceTracer=void 0;var Q=t0(),E=EB(),B=function(){function I(){}return I.prototype.initPerformanceTracer=function(C){if(Q.has(C,"traceInitPerf")){var K=C.traceInitPerf,J=typeof K=="number";this.traceInitMaxIdent=J?K:1/0,this.traceInitPerf=J?K>0:K}else this.traceInitMaxIdent=0,this.traceInitPerf=E.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},I.prototype.TRACE_INIT=function(C,K){if(this.traceInitPerf===!0){this.traceInitIndent++;var J=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(J+"--> <"+C+">");var U=Q.timer(K),Y=U.time,H=U.value,R=Y>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&R(J+"<-- <"+C+"> time: "+Y+"ms"),this.traceInitIndent--,H}else return K()},I}();A.PerformanceTracer=B}),lk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.applyMixins=void 0;function Q(E,B){B.forEach(function(I){var C=I.prototype;Object.getOwnPropertyNames(C).forEach(function(K){if(K!=="constructor"){var J=Object.getOwnPropertyDescriptor(C,K);J&&(J.get||J.set)?Object.defineProperty(E.prototype,K,J):E.prototype[K]=I.prototype[K]}})})}A.applyMixins=Q}),EB=P0((A)=>{var Q=A&&A.__extends||function(){var D=function(_,w){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,T){k.__proto__=T}||function(k,T){for(var z in T)Object.prototype.hasOwnProperty.call(T,z)&&(k[z]=T[z])},D(_,w)};return function(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");D(_,w);function k(){this.constructor=_}_.prototype=w===null?Object.create(w):(k.prototype=w.prototype,new k)}}();Object.defineProperty(A,"__esModule",{value:!0}),A.EmbeddedActionsParser=A.CstParser=A.Parser=A.EMPTY_ALT=A.ParserDefinitionErrorType=A.DEFAULT_RULE_CONFIG=A.DEFAULT_PARSER_CONFIG=A.END_OF_FILE=void 0;var E=t0(),B=Pk(),I=i1(),C=zU(),K=jk(),J=DX(),U=vk(),Y=gk(),H=xk(),R=bk(),O=fk(),N=uk(),$=pk(),L=mk(),W=ck(),Z=lk();A.END_OF_FILE=I.createTokenInstance(I.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(A.END_OF_FILE),A.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:C.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),A.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});var G;(function(D){D[D.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",D[D.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",D[D.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",D[D.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",D[D.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",D[D.LEFT_RECURSION=5]="LEFT_RECURSION",D[D.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",D[D.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",D[D.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",D[D.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",D[D.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",D[D.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",D[D.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"})(G=A.ParserDefinitionErrorType||(A.ParserDefinitionErrorType={}));function X(D){return D===void 0&&(D=void 0),function(){return D}}A.EMPTY_ALT=X;var q=function(){function D(_,w){this.definitionErrors=[],this.selfAnalysisDone=!1;var k=this;if(k.initErrorHandler(w),k.initLexerAdapter(),k.initLooksAhead(w),k.initRecognizerEngine(_,w),k.initRecoverable(w),k.initTreeBuilder(w),k.initContentAssist(),k.initGastRecorder(w),k.initPerformanceTracer(w),E.has(w,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=E.has(w,"skipValidations")?w.skipValidations:A.DEFAULT_PARSER_CONFIG.skipValidations}return D.performSelfAnalysis=function(_){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")},D.prototype.performSelfAnalysis=function(){var _=this;this.TRACE_INIT("performSelfAnalysis",function(){var w;_.selfAnalysisDone=!0;var k=_.className;_.TRACE_INIT("toFastProps",function(){E.toFastProperties(_)}),_.TRACE_INIT("Grammar Recording",function(){try{_.enableRecording(),E.forEach(_.definedRulesNames,function(z){var j=_[z],v=j.originalGrammarAction,g=void 0;_.TRACE_INIT(z+" Rule",function(){g=_.topLevelRuleRecord(z,v)}),_.gastProductionsCache[z]=g})}finally{_.disableRecording()}});var T=[];if(_.TRACE_INIT("Grammar Resolving",function(){T=K.resolveGrammar({rules:E.values(_.gastProductionsCache)}),_.definitionErrors=_.definitionErrors.concat(T)}),_.TRACE_INIT("Grammar Validations",function(){if(E.isEmpty(T)&&_.skipValidations===!1){var z=K.validateGrammar({rules:E.values(_.gastProductionsCache),maxLookahead:_.maxLookahead,tokenTypes:E.values(_.tokensMap),errMsgProvider:C.defaultGrammarValidatorErrorProvider,grammarName:k});_.definitionErrors=_.definitionErrors.concat(z)}}),E.isEmpty(_.definitionErrors)&&(_.recoveryEnabled&&_.TRACE_INIT("computeAllProdsFollows",function(){var z=B.computeAllProdsFollows(E.values(_.gastProductionsCache));_.resyncFollows=z}),_.TRACE_INIT("ComputeLookaheadFunctions",function(){_.preComputeLookaheadFunctions(E.values(_.gastProductionsCache))})),!D.DEFER_DEFINITION_ERRORS_HANDLING&&!E.isEmpty(_.definitionErrors))throw w=E.map(_.definitionErrors,function(z){return z.message}),new Error(`Parser Definition Errors detected:
 `+w.join(`
-------------------------------
`))})},D.DEFER_DEFINITION_ERRORS_HANDLING=!1,D}();A.Parser=q,Z.applyMixins(q,[J.Recoverable,U.LooksAhead,Y.TreeBuilder,H.LexerAdapter,O.RecognizerEngine,R.RecognizerApi,N.ErrorHandler,$.ContentAssist,L.GastRecorder,W.PerformanceTracer]);var M=function(D){Q(_,D);function _(w,k){k===void 0&&(k=A.DEFAULT_PARSER_CONFIG);var T=this,z=E.cloneObj(k);return z.outputCst=!0,T=D.call(this,w,z)||this,T}return _}(q);A.CstParser=M;var F=function(D){Q(_,D);function _(w,k){k===void 0&&(k=A.DEFAULT_PARSER_CONFIG);var T=this,z=E.cloneObj(k);return z.outputCst=!1,T=D.call(this,w,z)||this,T}return _}(q);A.EmbeddedActionsParser=F}),dk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.createSyntaxDiagramsCode=void 0;var Q=WX();function E(B,I){var C=I===void 0?{}:I,K=C.resourceBase,J=K===void 0?"https://unpkg.com/chevrotain@"+Q.VERSION+"/diagrams/":K,U=C.css,Y=U===void 0?"https://unpkg.com/chevrotain@"+Q.VERSION+"/diagrams/diagrams.css":U,H=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,R=`
<link rel='stylesheet' href='`+Y+`'>
`,O=`
<script src='`+J+`vendor/railroad-diagrams.js'></script>
<script src='`+J+`src/diagrams_builder.js'></script>
<script src='`+J+`src/diagrams_behavior.js'></script>
<script src='`+J+`src/main.js'></script>
`,N=`
<div id="diagrams" align="center"></div>
`,$=`
<script>
    window.serializedGrammar = `+JSON.stringify(B,null,"  ")+`;
</script>
`,L=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
</script>
`;return H+R+O+N+$+L}A.createSyntaxDiagramsCode=E}),nk=P0((A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.Parser=A.createSyntaxDiagramsCode=A.clearCache=A.GAstVisitor=A.serializeProduction=A.serializeGrammar=A.Terminal=A.Rule=A.RepetitionWithSeparator=A.RepetitionMandatoryWithSeparator=A.RepetitionMandatory=A.Repetition=A.Option=A.NonTerminal=A.Alternative=A.Alternation=A.defaultLexerErrorProvider=A.NoViableAltException=A.NotAllInputParsedException=A.MismatchedTokenException=A.isRecognitionException=A.EarlyExitException=A.defaultParserErrorProvider=A.tokenName=A.tokenMatcher=A.tokenLabel=A.EOF=A.createTokenInstance=A.createToken=A.LexerDefinitionErrorType=A.Lexer=A.EMPTY_ALT=A.ParserDefinitionErrorType=A.EmbeddedActionsParser=A.CstParser=A.VERSION=void 0;var Q=WX();Object.defineProperty(A,"VERSION",{enumerable:!0,get:function(){return Q.VERSION}});var E=EB();Object.defineProperty(A,"CstParser",{enumerable:!0,get:function(){return E.CstParser}}),Object.defineProperty(A,"EmbeddedActionsParser",{enumerable:!0,get:function(){return E.EmbeddedActionsParser}}),Object.defineProperty(A,"ParserDefinitionErrorType",{enumerable:!0,get:function(){return E.ParserDefinitionErrorType}}),Object.defineProperty(A,"EMPTY_ALT",{enumerable:!0,get:function(){return E.EMPTY_ALT}});var B=SU();Object.defineProperty(A,"Lexer",{enumerable:!0,get:function(){return B.Lexer}}),Object.defineProperty(A,"LexerDefinitionErrorType",{enumerable:!0,get:function(){return B.LexerDefinitionErrorType}});var I=i1();Object.defineProperty(A,"createToken",{enumerable:!0,get:function(){return I.createToken}}),Object.defineProperty(A,"createTokenInstance",{enumerable:!0,get:function(){return I.createTokenInstance}}),Object.defineProperty(A,"EOF",{enumerable:!0,get:function(){return I.EOF}}),Object.defineProperty(A,"tokenLabel",{enumerable:!0,get:function(){return I.tokenLabel}}),Object.defineProperty(A,"tokenMatcher",{enumerable:!0,get:function(){return I.tokenMatcher}}),Object.defineProperty(A,"tokenName",{enumerable:!0,get:function(){return I.tokenName}});var C=zU();Object.defineProperty(A,"defaultParserErrorProvider",{enumerable:!0,get:function(){return C.defaultParserErrorProvider}});var K=DK();Object.defineProperty(A,"EarlyExitException",{enumerable:!0,get:function(){return K.EarlyExitException}}),Object.defineProperty(A,"isRecognitionException",{enumerable:!0,get:function(){return K.isRecognitionException}}),Object.defineProperty(A,"MismatchedTokenException",{enumerable:!0,get:function(){return K.MismatchedTokenException}}),Object.defineProperty(A,"NotAllInputParsedException",{enumerable:!0,get:function(){return K.NotAllInputParsedException}}),Object.defineProperty(A,"NoViableAltException",{enumerable:!0,get:function(){return K.NoViableAltException}});var J=$X();Object.defineProperty(A,"defaultLexerErrorProvider",{enumerable:!0,get:function(){return J.defaultLexerErrorProvider}});var U=mE();Object.defineProperty(A,"Alternation",{enumerable:!0,get:function(){return U.Alternation}}),Object.defineProperty(A,"Alternative",{enumerable:!0,get:function(){return U.Alternative}}),Object.defineProperty(A,"NonTerminal",{enumerable:!0,get:function(){return U.NonTerminal}}),Object.defineProperty(A,"Option",{enumerable:!0,get:function(){return U.Option}}),Object.defineProperty(A,"Repetition",{enumerable:!0,get:function(){return U.Repetition}}),Object.defineProperty(A,"RepetitionMandatory",{enumerable:!0,get:function(){return U.RepetitionMandatory}}),Object.defineProperty(A,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return U.RepetitionMandatoryWithSeparator}}),Object.defineProperty(A,"RepetitionWithSeparator",{enumerable:!0,get:function(){return U.RepetitionWithSeparator}}),Object.defineProperty(A,"Rule",{enumerable:!0,get:function(){return U.Rule}}),Object.defineProperty(A,"Terminal",{enumerable:!0,get:function(){return U.Terminal}});var Y=mE();Object.defineProperty(A,"serializeGrammar",{enumerable:!0,get:function(){return Y.serializeGrammar}}),Object.defineProperty(A,"serializeProduction",{enumerable:!0,get:function(){return Y.serializeProduction}});var H=FK();Object.defineProperty(A,"GAstVisitor",{enumerable:!0,get:function(){return H.GAstVisitor}});function R(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}A.clearCache=R;var O=dk();Object.defineProperty(A,"createSyntaxDiagramsCode",{enumerable:!0,get:function(){return O.createSyntaxDiagramsCode}});var N=function(){function $(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}return $}();A.Parser=N}),wX=nk();var Nx=wX.CstParser;var Fx={name:"GouraudShader",uniforms:oA.merge([vA.common,vA.specularmap,vA.envmap,vA.aomap,vA.lightmap,vA.emissivemap,vA.fog,vA.lights,{emissive:{value:new a(0)}}]),vertexShader:`

		#define GOURAUD

		varying vec3 vLightFront;
		varying vec3 vIndirectFront;

		#ifdef DOUBLE_SIDED
			varying vec3 vLightBack;
			varying vec3 vIndirectBack;
		#endif

		#include <common>
		#include <uv_pars_vertex>
		#include <envmap_pars_vertex>
		#include <bsdfs>
		#include <lights_pars_begin>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <morphtarget_pars_vertex>
		#include <skinning_pars_vertex>
		#include <shadowmap_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		void main() {

			#include <uv_vertex>
			#include <color_vertex>
			#include <morphcolor_vertex>

			#include <beginnormal_vertex>
			#include <morphnormal_vertex>
			#include <skinbase_vertex>
			#include <skinnormal_vertex>
			#include <defaultnormal_vertex>

			#include <begin_vertex>
			#include <morphtarget_vertex>
			#include <skinning_vertex>
			#include <project_vertex>
			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>

			#include <worldpos_vertex>
			#include <envmap_vertex>

			// inlining legacy <lights_lambert_vertex>

			vec3 diffuse = vec3( 1.0 );

			vec3 geometryPosition = mvPosition.xyz;
			vec3 geometryNormal = normalize( transformedNormal );
			vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );

			vec3 backGeometryNormal = - geometryNormal;

			vLightFront = vec3( 0.0 );
			vIndirectFront = vec3( 0.0 );
			#ifdef DOUBLE_SIDED
				vLightBack = vec3( 0.0 );
				vIndirectBack = vec3( 0.0 );
			#endif

			IncidentLight directLight;
			float dotNL;
			vec3 directLightColor_Diffuse;

			vIndirectFront += getAmbientLightIrradiance( ambientLightColor );

			#if defined( USE_LIGHT_PROBES )

				vIndirectFront += getLightProbeIrradiance( lightProbe, geometryNormal );

			#endif

			#ifdef DOUBLE_SIDED

				vIndirectBack += getAmbientLightIrradiance( ambientLightColor );

				#if defined( USE_LIGHT_PROBES )

					vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometryNormal );

				#endif

			#endif

			#if NUM_POINT_LIGHTS > 0

				#pragma unroll_loop_start
				for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

					getPointLightInfo( pointLights[ i ], geometryPosition, directLight );

					dotNL = dot( geometryNormal, directLight.direction );
					directLightColor_Diffuse = directLight.color;

					vLightFront += saturate( dotNL ) * directLightColor_Diffuse;

					#ifdef DOUBLE_SIDED

						vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;

					#endif

				}
				#pragma unroll_loop_end

			#endif

			#if NUM_SPOT_LIGHTS > 0

				#pragma unroll_loop_start
				for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

					getSpotLightInfo( spotLights[ i ], geometryPosition, directLight );

					dotNL = dot( geometryNormal, directLight.direction );
					directLightColor_Diffuse = directLight.color;

					vLightFront += saturate( dotNL ) * directLightColor_Diffuse;

					#ifdef DOUBLE_SIDED

						vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;

					#endif
				}
				#pragma unroll_loop_end

			#endif

			#if NUM_DIR_LIGHTS > 0

				#pragma unroll_loop_start
				for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

					getDirectionalLightInfo( directionalLights[ i ], directLight );

					dotNL = dot( geometryNormal, directLight.direction );
					directLightColor_Diffuse = directLight.color;

					vLightFront += saturate( dotNL ) * directLightColor_Diffuse;

					#ifdef DOUBLE_SIDED

						vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;

					#endif

				}
				#pragma unroll_loop_end

			#endif

			#if NUM_HEMI_LIGHTS > 0

				#pragma unroll_loop_start
				for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

					vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );

					#ifdef DOUBLE_SIDED

						vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometryNormal );

					#endif

				}
				#pragma unroll_loop_end

			#endif

			#include <shadowmap_vertex>
			#include <fog_vertex>

		}`,fragmentShader:`

		#define GOURAUD

		uniform vec3 diffuse;
		uniform vec3 emissive;
		uniform float opacity;

		varying vec3 vLightFront;
		varying vec3 vIndirectFront;

		#ifdef DOUBLE_SIDED
			varying vec3 vLightBack;
			varying vec3 vIndirectBack;
		#endif

		#include <common>
		#include <packing>
		#include <dithering_pars_fragment>
		#include <color_pars_fragment>
		#include <uv_pars_fragment>
		#include <map_pars_fragment>
		#include <alphamap_pars_fragment>
		#include <alphatest_pars_fragment>
		#include <aomap_pars_fragment>
		#include <lightmap_pars_fragment>
		#include <emissivemap_pars_fragment>
		#include <envmap_common_pars_fragment>
		#include <envmap_pars_fragment>
		#include <bsdfs>
		#include <lights_pars_begin>
		#include <fog_pars_fragment>
		#include <shadowmap_pars_fragment>
		#include <shadowmask_pars_fragment>
		#include <specularmap_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		void main() {

			#include <clipping_planes_fragment>

			vec4 diffuseColor = vec4( diffuse, opacity );
			ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
			vec3 totalEmissiveRadiance = emissive;

			#include <logdepthbuf_fragment>
			#include <map_fragment>
			#include <color_fragment>
			#include <alphamap_fragment>
			#include <alphatest_fragment>
			#include <specularmap_fragment>
			#include <emissivemap_fragment>

			// accumulation

			#ifdef DOUBLE_SIDED

				reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;

			#else

				reflectedLight.indirectDiffuse += vIndirectFront;

			#endif

			#ifdef USE_LIGHTMAP

				vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
				vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
				reflectedLight.indirectDiffuse += lightMapIrradiance;

			#endif

			reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );

			#ifdef DOUBLE_SIDED

				reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;

			#else

				reflectedLight.directDiffuse = vLightFront;

			#endif

			reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();

			// modulation

			#include <aomap_fragment>

			vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;

			#include <envmap_fragment>

			#include <opaque_fragment>
			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>
			#include <dithering_fragment>

		}`};class jU{constructor(A=new y(0,0,0),Q=new y(0,1,0),E=1){this.start=A,this.end=Q,this.radius=E}clone(){return new jU(this.start.clone(),this.end.clone(),this.radius)}set(A,Q,E){this.start.copy(A),this.end.copy(Q),this.radius=E}copy(A){this.start.copy(A.start),this.end.copy(A.end),this.radius=A.radius}getCenter(A){return A.copy(this.end).add(this.start).multiplyScalar(0.5)}translate(A){this.start.add(A),this.end.add(A)}checkAABBAxis(A,Q,E,B,I,C,K,J,U){return(I-A<U||I-E<U)&&(A-C<U||E-C<U)&&(K-Q<U||K-B<U)&&(Q-J<U||B-J<U)}intersectsBox(A){return this.checkAABBAxis(this.start.x,this.start.y,this.end.x,this.end.y,A.min.x,A.max.x,A.min.y,A.max.y,this.radius)&&this.checkAABBAxis(this.start.x,this.start.z,this.end.x,this.end.z,A.min.x,A.max.x,A.min.z,A.max.z,this.radius)&&this.checkAABBAxis(this.start.y,this.start.z,this.end.y,this.end.z,A.min.y,A.max.y,A.min.z,A.max.z,this.radius)}}var _X=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let A=0;A<256;A++)_X[256+A]=_X[A];var yx=new PQ,gx=new y,xx=new AA,bx=new AA,fx=new AA;var c0={c:null,u:[new y,new y,new y],e:[]},e0={c:null,u:[new y,new y,new y],e:[]},LQ=[[],[],[]],k0=[[],[],[]],NQ=[],o1=new y,r1=new y,a1=new y,cQ=new y,kX=new y,SX=new y,_B=new E0,TX=new g0,vU=new RA,zX=new RA,PX=new qE;class VX{constructor(A=new y,Q=new y,E=new E0){this.center=A,this.halfSize=Q,this.rotation=E}set(A,Q,E){return this.center=A,this.halfSize=Q,this.rotation=E,this}copy(A){return this.center.copy(A.center),this.halfSize.copy(A.halfSize),this.rotation.copy(A.rotation),this}clone(){return new this.constructor().copy(this)}getSize(A){return A.copy(this.halfSize).multiplyScalar(2)}clampPoint(A,Q){let E=this.halfSize;cQ.subVectors(A,this.center),this.rotation.extractBasis(o1,r1,a1),Q.copy(this.center);let B=o0.clamp(cQ.dot(o1),-E.x,E.x);Q.add(o1.multiplyScalar(B));let I=o0.clamp(cQ.dot(r1),-E.y,E.y);Q.add(r1.multiplyScalar(I));let C=o0.clamp(cQ.dot(a1),-E.z,E.z);return Q.add(a1.multiplyScalar(C)),Q}containsPoint(A){return cQ.subVectors(A,this.center),this.rotation.extractBasis(o1,r1,a1),Math.abs(cQ.dot(o1))<=this.halfSize.x&&Math.abs(cQ.dot(r1))<=this.halfSize.y&&Math.abs(cQ.dot(a1))<=this.halfSize.z}intersectsBox3(A){return this.intersectsOBB(sk.fromBox3(A))}intersectsSphere(A){return this.clampPoint(A.center,SX),SX.distanceToSquared(A.center)<=A.radius*A.radius}intersectsOBB(A,Q=Number.EPSILON){c0.c=this.center,c0.e[0]=this.halfSize.x,c0.e[1]=this.halfSize.y,c0.e[2]=this.halfSize.z,this.rotation.extractBasis(c0.u[0],c0.u[1],c0.u[2]),e0.c=A.center,e0.e[0]=A.halfSize.x,e0.e[1]=A.halfSize.y,e0.e[2]=A.halfSize.z,A.rotation.extractBasis(e0.u[0],e0.u[1],e0.u[2]);for(let I=0;I<3;I++)for(let C=0;C<3;C++)LQ[I][C]=c0.u[I].dot(e0.u[C]);cQ.subVectors(e0.c,c0.c),NQ[0]=cQ.dot(c0.u[0]),NQ[1]=cQ.dot(c0.u[1]),NQ[2]=cQ.dot(c0.u[2]);for(let I=0;I<3;I++)for(let C=0;C<3;C++)k0[I][C]=Math.abs(LQ[I][C])+Q;let E,B;for(let I=0;I<3;I++)if(E=c0.e[I],B=e0.e[0]*k0[I][0]+e0.e[1]*k0[I][1]+e0.e[2]*k0[I][2],Math.abs(NQ[I])>E+B)return!1;for(let I=0;I<3;I++)if(E=c0.e[0]*k0[0][I]+c0.e[1]*k0[1][I]+c0.e[2]*k0[2][I],B=e0.e[I],Math.abs(NQ[0]*LQ[0][I]+NQ[1]*LQ[1][I]+NQ[2]*LQ[2][I])>E+B)return!1;if(E=c0.e[1]*k0[2][0]+c0.e[2]*k0[1][0],B=e0.e[1]*k0[0][2]+e0.e[2]*k0[0][1],Math.abs(NQ[2]*LQ[1][0]-NQ[1]*LQ[2][0])>E+B)return!1;if(E=c0.e[1]*k0[2][1]+c0.e[2]*k0[1][1],B=e0.e[0]*k0[0][2]+e0.e[2]*k0[0][0],Math.abs(NQ[2]*LQ[1][1]-NQ[1]*LQ[2][1])>E+B)return!1;if(E=c0.e[1]*k0[2][2]+c0.e[2]*k0[1][2],B=e0.e[0]*k0[0][1]+e0.e[1]*k0[0][0],Math.abs(NQ[2]*LQ[1][2]-NQ[1]*LQ[2][2])>E+B)return!1;if(E=c0.e[0]*k0[2][0]+c0.e[2]*k0[0][0],B=e0.e[1]*k0[1][2]+e0.e[2]*k0[1][1],Math.abs(NQ[0]*LQ[2][0]-NQ[2]*LQ[0][0])>E+B)return!1;if(E=c0.e[0]*k0[2][1]+c0.e[2]*k0[0][1],B=e0.e[0]*k0[1][2]+e0.e[2]*k0[1][0],Math.abs(NQ[0]*LQ[2][1]-NQ[2]*LQ[0][1])>E+B)return!1;if(E=c0.e[0]*k0[2][2]+c0.e[2]*k0[0][2],B=e0.e[0]*k0[1][1]+e0.e[1]*k0[1][0],Math.abs(NQ[0]*LQ[2][2]-NQ[2]*LQ[0][2])>E+B)return!1;if(E=c0.e[0]*k0[1][0]+c0.e[1]*k0[0][0],B=e0.e[1]*k0[2][2]+e0.e[2]*k0[2][1],Math.abs(NQ[1]*LQ[0][0]-NQ[0]*LQ[1][0])>E+B)return!1;if(E=c0.e[0]*k0[1][1]+c0.e[1]*k0[0][1],B=e0.e[0]*k0[2][2]+e0.e[2]*k0[2][0],Math.abs(NQ[1]*LQ[0][1]-NQ[0]*LQ[1][1])>E+B)return!1;if(E=c0.e[0]*k0[1][2]+c0.e[1]*k0[0][2],B=e0.e[0]*k0[2][1]+e0.e[1]*k0[2][0],Math.abs(NQ[1]*LQ[0][2]-NQ[0]*LQ[1][2])>E+B)return!1;return!0}intersectsPlane(A){this.rotation.extractBasis(o1,r1,a1);let Q=this.halfSize.x*Math.abs(A.normal.dot(o1))+this.halfSize.y*Math.abs(A.normal.dot(r1))+this.halfSize.z*Math.abs(A.normal.dot(a1)),E=A.normal.dot(this.center)-A.constant;return Math.abs(E)<=Q}intersectRay(A,Q){if(this.getSize(kX),TX.setFromCenterAndSize(cQ.set(0,0,0),kX),vU.setFromMatrix3(this.rotation),vU.setPosition(this.center),zX.copy(vU).invert(),PX.copy(A).applyMatrix4(zX),PX.intersectBox(TX,Q))return Q.applyMatrix4(vU);else return null}intersectsRay(A){return this.intersectRay(A,cQ)!==null}fromBox3(A){return A.getCenter(this.center),A.getSize(this.halfSize).multiplyScalar(0.5),this.rotation.identity(),this}equals(A){return A.center.equals(this.center)&&A.halfSize.equals(this.halfSize)&&A.rotation.equals(this.rotation)}applyMatrix4(A){let Q=A.elements,E=cQ.set(Q[0],Q[1],Q[2]).length(),B=cQ.set(Q[4],Q[5],Q[6]).length(),I=cQ.set(Q[8],Q[9],Q[10]).length();if(A.determinant()<0)E=-E;_B.setFromMatrix4(A);let K=1/E,J=1/B,U=1/I;return _B.elements[0]*=K,_B.elements[1]*=K,_B.elements[2]*=K,_B.elements[3]*=J,_B.elements[4]*=J,_B.elements[5]*=J,_B.elements[6]*=U,_B.elements[7]*=U,_B.elements[8]*=U,this.rotation.multiply(_B),this.halfSize.x*=E,this.halfSize.y*=B,this.halfSize.z*=I,cQ.setFromMatrixPosition(A),this.center.add(cQ),this}}var sk=new VX;var dx=new y,nx=new y,sx=new y,ix=new y,ox=new UQ,rx=new $B,ax=new $B,tx=new KQ,ex=new jU,Ab=new y,Qb=new y,Eb=new y;class MK{constructor(A=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let Q=0;Q<256;Q++)this.p[Q]=Math.floor(A.random()*256);this.perm=[];for(let Q=0;Q<512;Q++)this.perm[Q]=this.p[Q&255];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(A,Q,E){return A[0]*Q+A[1]*E}dot3(A,Q,E,B){return A[0]*Q+A[1]*E+A[2]*B}dot4(A,Q,E,B,I){return A[0]*Q+A[1]*E+A[2]*B+A[3]*I}noise(A,Q){let E,B,I,C=0.5*(Math.sqrt(3)-1),K=(A+Q)*C,J=Math.floor(A+K),U=Math.floor(Q+K),Y=(3-Math.sqrt(3))/6,H=(J+U)*Y,R=J-H,O=U-H,N=A-R,$=Q-O,L,W;if(N>$)L=1,W=0;else L=0,W=1;let Z=N-L+Y,G=$-W+Y,X=N-1+2*Y,q=$-1+2*Y,M=J&255,F=U&255,D=this.perm[M+this.perm[F]]%12,_=this.perm[M+L+this.perm[F+W]]%12,w=this.perm[M+1+this.perm[F+1]]%12,k=0.5-N*N-$*$;if(k<0)E=0;else k*=k,E=k*k*this.dot(this.grad3[D],N,$);let T=0.5-Z*Z-G*G;if(T<0)B=0;else T*=T,B=T*T*this.dot(this.grad3[_],Z,G);let z=0.5-X*X-q*q;if(z<0)I=0;else z*=z,I=z*z*this.dot(this.grad3[w],X,q);return 70*(E+B+I)}noise3d(A,Q,E){let B,I,C,K,J=0.3333333333333333,U=(A+Q+E)*0.3333333333333333,Y=Math.floor(A+U),H=Math.floor(Q+U),R=Math.floor(E+U),O=0.16666666666666666,N=(Y+H+R)*0.16666666666666666,$=Y-N,L=H-N,W=R-N,Z=A-$,G=Q-L,X=E-W,q,M,F,D,_,w;if(Z>=G)if(G>=X)q=1,M=0,F=0,D=1,_=1,w=0;else if(Z>=X)q=1,M=0,F=0,D=1,_=0,w=1;else q=0,M=0,F=1,D=1,_=0,w=1;else if(G<X)q=0,M=0,F=1,D=0,_=1,w=1;else if(Z<X)q=0,M=1,F=0,D=0,_=1,w=1;else q=0,M=1,F=0,D=1,_=1,w=0;let k=Z-q+0.16666666666666666,T=G-M+0.16666666666666666,z=X-F+0.16666666666666666,j=Z-D+0.3333333333333333,v=G-_+0.3333333333333333,g=X-w+0.3333333333333333,P=Z-1+0.5,V=G-1+0.5,S=X-1+0.5,h=Y&255,x=H&255,b=R&255,m=this.perm[h+this.perm[x+this.perm[b]]]%12,s=this.perm[h+q+this.perm[x+M+this.perm[b+F]]]%12,i=this.perm[h+D+this.perm[x+_+this.perm[b+w]]]%12,n=this.perm[h+1+this.perm[x+1+this.perm[b+1]]]%12,l=0.6-Z*Z-G*G-X*X;if(l<0)B=0;else l*=l,B=l*l*this.dot3(this.grad3[m],Z,G,X);let c=0.6-k*k-T*T-z*z;if(c<0)I=0;else c*=c,I=c*c*this.dot3(this.grad3[s],k,T,z);let o=0.6-j*j-v*v-g*g;if(o<0)C=0;else o*=o,C=o*o*this.dot3(this.grad3[i],j,v,g);let e=0.6-P*P-V*V-S*S;if(e<0)K=0;else e*=e,K=e*e*this.dot3(this.grad3[n],P,V,S);return 32*(B+I+C+K)}noise4d(A,Q,E,B){let I=this.grad4,C=this.simplex,K=this.perm,J=(Math.sqrt(5)-1)/4,U=(5-Math.sqrt(5))/20,Y,H,R,O,N,$=(A+Q+E+B)*J,L=Math.floor(A+$),W=Math.floor(Q+$),Z=Math.floor(E+$),G=Math.floor(B+$),X=(L+W+Z+G)*U,q=L-X,M=W-X,F=Z-X,D=G-X,_=A-q,w=Q-M,k=E-F,T=B-D,z=_>w?32:0,j=_>k?16:0,v=w>k?8:0,g=_>T?4:0,P=w>T?2:0,V=k>T?1:0,S=z+j+v+g+P+V,h=C[S][0]>=3?1:0,x=C[S][1]>=3?1:0,b=C[S][2]>=3?1:0,m=C[S][3]>=3?1:0,s=C[S][0]>=2?1:0,i=C[S][1]>=2?1:0,n=C[S][2]>=2?1:0,l=C[S][3]>=2?1:0,c=C[S][0]>=1?1:0,o=C[S][1]>=1?1:0,e=C[S][2]>=1?1:0,BA=C[S][3]>=1?1:0,EA=_-h+U,CA=w-x+U,f=k-b+U,NA=T-m+U,YA=_-s+2*U,FA=w-i+2*U,ZA=k-n+2*U,jA=T-l+2*U,wA=_-c+3*U,VA=w-o+3*U,d=k-e+3*U,u=T-BA+3*U,QA=_-1+4*U,t=w-1+4*U,KA=k-1+4*U,HA=T-1+4*U,fA=L&255,zA=W&255,yA=Z&255,qA=G&255,LA=K[fA+K[zA+K[yA+K[qA]]]]%32,_A=K[fA+h+K[zA+x+K[yA+b+K[qA+m]]]]%32,B0=K[fA+s+K[zA+i+K[yA+n+K[qA+l]]]]%32,cA=K[fA+c+K[zA+o+K[yA+e+K[qA+BA]]]]%32,uA=K[fA+1+K[zA+1+K[yA+1+K[qA+1]]]]%32,pA=0.6-_*_-w*w-k*k-T*T;if(pA<0)Y=0;else pA*=pA,Y=pA*pA*this.dot4(I[LA],_,w,k,T);let iA=0.6-EA*EA-CA*CA-f*f-NA*NA;if(iA<0)H=0;else iA*=iA,H=iA*iA*this.dot4(I[_A],EA,CA,f,NA);let $0=0.6-YA*YA-FA*FA-ZA*ZA-jA*jA;if($0<0)R=0;else $0*=$0,R=$0*$0*this.dot4(I[B0],YA,FA,ZA,jA);let IA=0.6-wA*wA-VA*VA-d*d-u*u;if(IA<0)O=0;else IA*=IA,O=IA*IA*this.dot4(I[cA],wA,VA,d,u);let TA=0.6-QA*QA-t*t-KA*KA-HA*HA;if(TA<0)N=0;else TA*=TA,N=TA*TA*this.dot4(I[uA],QA,t,KA,HA);return 27*(Y+H+R+O+N)}}var Ub=new y;var Nb=new y,Gb=new J0,Wb=new y,Xb=new y,$b=new J0,Lb=new y;var lb=new RA;var sb=new y,ib=new y,rb=new y;var eb=new y,Af=new y;class hU extends xA{constructor(){super(hU.Geometry,new _0({opacity:0,transparent:!0}));this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;let A=new y,Q=new y,E=new d8(16,16),B=new d8(16,16),I=x0,C=hU.Geometry,K=new II({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),J=new II({uniforms:{map:{value:E},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),U=new xA(C,K),Y=[],H=N7.Shader,R=new II({name:H.name,uniforms:{map:{value:null},occlusionMap:{value:B},color:{value:new a(16777215)},scale:{value:new AA},screenPosition:{value:new y}},vertexShader:H.vertexShader,fragmentShader:H.fragmentShader,blending:XE,transparent:!0,depthWrite:!1}),O=new xA(C,R);this.addElement=function(Z){Y.push(Z)};let N=new AA,$=new AA,L=new b1,W=new MA;this.onBeforeRender=function(Z,G,X){Z.getCurrentViewport(W);let q=Z.getRenderTarget(),M=q!==null?q.texture.type:x0;if(I!==M)E.dispose(),B.dispose(),E.type=B.type=M,I=M;let F=W.w/W.z,D=W.z/2,_=W.w/2,w=16/W.w;if(N.set(w*F,w),L.min.set(W.x,W.y),L.max.set(W.x+(W.z-16),W.y+(W.w-16)),Q.setFromMatrixPosition(this.matrixWorld),Q.applyMatrix4(X.matrixWorldInverse),Q.z>0)return;if(A.copy(Q).applyMatrix4(X.projectionMatrix),$.x=W.x+A.x*D+D-8,$.y=W.y+A.y*_+_-8,L.containsPoint($)){Z.copyFramebufferToTexture(E,$);let k=K.uniforms;k.scale.value=N,k.screenPosition.value=A,Z.renderBufferDirect(X,null,C,K,U,null),Z.copyFramebufferToTexture(B,$),k=J.uniforms,k.scale.value=N,k.screenPosition.value=A,Z.renderBufferDirect(X,null,C,J,U,null);let T=-A.x*2,z=-A.y*2;for(let j=0,v=Y.length;j<v;j++){let g=Y[j],P=R.uniforms;P.color.value.copy(g.color),P.map.value=g.texture,P.screenPosition.value.x=A.x+T*g.distance,P.screenPosition.value.y=A.y+z*g.distance,w=g.size/W.w;let V=W.w/W.z;P.scale.value.set(w*V,w),R.uniformsNeedUpdate=!0,Z.renderBufferDirect(X,null,C,R,O,null)}}},this.dispose=function(){K.dispose(),J.dispose(),R.dispose(),E.dispose(),B.dispose();for(let Z=0,G=Y.length;Z<G;Z++)Y[Z].texture.dispose()}}}class N7{constructor(A,Q=1,E=0,B=new a(16777215)){this.texture=A,this.size=Q,this.distance=E,this.color=B}}N7.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};hU.Geometry=function(){let A=new hA,Q=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),E=new hE(Q,5);return A.setIndex([0,1,2,0,2,3]),A.setAttribute("position",new xQ(E,3,0,!1)),A.setAttribute("uv",new xQ(E,2,3,!1)),A}();var Yf=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),Of=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);class k6 extends xA{constructor(A,Q={}){super(A);this.isReflector=!0,this.type="Reflector",this.camera=new v0;let E=this,B=Q.color!==void 0?new a(Q.color):new a(8355711),I=Q.textureWidth||512,C=Q.textureHeight||512,K=Q.clipBias||0,J=Q.shader||k6.ReflectorShader,U=Q.multisample!==void 0?Q.multisample:4,Y=new UQ,H=new y,R=new y,O=new y,N=new RA,$=new y(0,0,-1),L=new MA,W=new y,Z=new y,G=new MA,X=new RA,q=this.camera,M=new Q0(I,C,{samples:U,type:sA}),F=new bA({name:J.name!==void 0?J.name:"unspecified",uniforms:oA.clone(J.uniforms),fragmentShader:J.fragmentShader,vertexShader:J.vertexShader});F.uniforms.tDiffuse.value=M.texture,F.uniforms.color.value=B,F.uniforms.textureMatrix.value=X,this.material=F,this.onBeforeRender=function(D,_,w){if(R.setFromMatrixPosition(E.matrixWorld),O.setFromMatrixPosition(w.matrixWorld),N.extractRotation(E.matrixWorld),H.set(0,0,1),H.applyMatrix4(N),W.subVectors(R,O),W.dot(H)>0)return;W.reflect(H).negate(),W.add(R),N.extractRotation(w.matrixWorld),$.set(0,0,-1),$.applyMatrix4(N),$.add(O),Z.subVectors(R,$),Z.reflect(H).negate(),Z.add(R),q.position.copy(W),q.up.set(0,1,0),q.up.applyMatrix4(N),q.up.reflect(H),q.lookAt(Z),q.far=w.far,q.updateMatrixWorld(),q.projectionMatrix.copy(w.projectionMatrix),X.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),X.multiply(q.projectionMatrix),X.multiply(q.matrixWorldInverse),X.multiply(E.matrixWorld),Y.setFromNormalAndCoplanarPoint(H,R),Y.applyMatrix4(q.matrixWorldInverse),L.set(Y.normal.x,Y.normal.y,Y.normal.z,Y.constant);let k=q.projectionMatrix;G.x=(Math.sign(L.x)+k.elements[8])/k.elements[0],G.y=(Math.sign(L.y)+k.elements[9])/k.elements[5],G.z=-1,G.w=(1+k.elements[10])/k.elements[14],L.multiplyScalar(2/L.dot(G)),k.elements[2]=L.x,k.elements[6]=L.y,k.elements[10]=L.z+1-K,k.elements[14]=L.w,E.visible=!1;let T=D.getRenderTarget(),z=D.xr.enabled,j=D.shadowMap.autoUpdate;if(D.xr.enabled=!1,D.shadowMap.autoUpdate=!1,D.setRenderTarget(M),D.state.buffers.depth.setMask(!0),D.autoClear===!1)D.clear();D.render(_,q),D.xr.enabled=z,D.shadowMap.autoUpdate=j,D.setRenderTarget(T);let v=w.viewport;if(v!==void 0)D.state.viewport(v);E.visible=!0},this.getRenderTarget=function(){return M},this.dispose=function(){M.dispose(),E.material.dispose()}}}k6.ReflectorShader={name:"ReflectorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};class sI extends xA{constructor(A,Q={}){super(A);this.isReflectorForSSRPass=!0,this.type="ReflectorForSSRPass";let E=this,B=Q.color!==void 0?new a(Q.color):new a(8355711),I=Q.textureWidth||512,C=Q.textureHeight||512,K=Q.clipBias||0,J=Q.shader||sI.ReflectorShader,U=Q.useDepthTexture===!0,Y=new y(0,1,0),H=new y,R=new y;E.needsUpdate=!1,E.maxDistance=sI.ReflectorShader.uniforms.maxDistance.value,E.opacity=sI.ReflectorShader.uniforms.opacity.value,E.color=B,E.resolution=Q.resolution||new AA(window.innerWidth,window.innerHeight),E._distanceAttenuation=sI.ReflectorShader.defines.DISTANCE_ATTENUATION,Object.defineProperty(E,"distanceAttenuation",{get(){return E._distanceAttenuation},set(T){if(E._distanceAttenuation===T)return;E._distanceAttenuation=T,E.material.defines.DISTANCE_ATTENUATION=T,E.material.needsUpdate=!0}}),E._fresnel=sI.ReflectorShader.defines.FRESNEL,Object.defineProperty(E,"fresnel",{get(){return E._fresnel},set(T){if(E._fresnel===T)return;E._fresnel=T,E.material.defines.FRESNEL=T,E.material.needsUpdate=!0}});let O=new y,N=new y,$=new y,L=new RA,W=new y(0,0,-1),Z=new y,G=new y,X=new RA,q=new v0,M;if(U)M=new IE,M.type=hB,M.minFilter=Z0,M.magFilter=Z0;let D=new Q0(I,C,{depthTexture:U?M:null,type:sA}),_=new bA({name:J.name!==void 0?J.name:"unspecified",transparent:U,defines:Object.assign({},sI.ReflectorShader.defines,{useDepthTexture:U}),uniforms:oA.clone(J.uniforms),fragmentShader:J.fragmentShader,vertexShader:J.vertexShader});if(_.uniforms.tDiffuse.value=D.texture,_.uniforms.color.value=E.color,_.uniforms.textureMatrix.value=X,U)_.uniforms.tDepth.value=D.depthTexture;this.material=_;let k=[new UQ(new y(0,1,0),K)];this.doRender=function(T,z,j){if(_.uniforms.maxDistance.value=E.maxDistance,_.uniforms.color.value=E.color,_.uniforms.opacity.value=E.opacity,H.copy(j.position).normalize(),R.copy(H).reflect(Y),_.uniforms.fresnelCoe.value=(H.dot(R)+1)/2,N.setFromMatrixPosition(E.matrixWorld),$.setFromMatrixPosition(j.matrixWorld),L.extractRotation(E.matrixWorld),O.set(0,0,1),O.applyMatrix4(L),Z.subVectors(N,$),Z.dot(O)>0)return;Z.reflect(O).negate(),Z.add(N),L.extractRotation(j.matrixWorld),W.set(0,0,-1),W.applyMatrix4(L),W.add($),G.subVectors(N,W),G.reflect(O).negate(),G.add(N),q.position.copy(Z),q.up.set(0,1,0),q.up.applyMatrix4(L),q.up.reflect(O),q.lookAt(G),q.far=j.far,q.updateMatrixWorld(),q.projectionMatrix.copy(j.projectionMatrix),_.uniforms.virtualCameraNear.value=j.near,_.uniforms.virtualCameraFar.value=j.far,_.uniforms.virtualCameraMatrixWorld.value=q.matrixWorld,_.uniforms.virtualCameraProjectionMatrix.value=j.projectionMatrix,_.uniforms.virtualCameraProjectionMatrixInverse.value=j.projectionMatrixInverse,_.uniforms.resolution.value=E.resolution,X.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),X.multiply(q.projectionMatrix),X.multiply(q.matrixWorldInverse),X.multiply(E.matrixWorld);let v=T.getRenderTarget(),g=T.xr.enabled,P=T.shadowMap.autoUpdate,V=T.clippingPlanes;if(T.xr.enabled=!1,T.shadowMap.autoUpdate=!1,T.clippingPlanes=k,T.setRenderTarget(D),T.state.buffers.depth.setMask(!0),T.autoClear===!1)T.clear();T.render(z,q),T.xr.enabled=g,T.shadowMap.autoUpdate=P,T.clippingPlanes=V,T.setRenderTarget(v);let S=j.viewport;if(S!==void 0)T.state.viewport(S)},this.getRenderTarget=function(){return D}}}sI.ReflectorShader={name:"ReflectorShader",defines:{DISTANCE_ATTENUATION:!0,FRESNEL:!0},uniforms:{color:{value:null},tDiffuse:{value:null},tDepth:{value:null},textureMatrix:{value:new RA},maxDistance:{value:180},opacity:{value:0.5},fresnelCoe:{value:null},virtualCameraNear:{value:null},virtualCameraFar:{value:null},virtualCameraProjectionMatrix:{value:new RA},virtualCameraMatrixWorld:{value:new RA},virtualCameraProjectionMatrixInverse:{value:new RA},resolution:{value:new AA}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;
		uniform float maxDistance;
		uniform float opacity;
		uniform float fresnelCoe;
		uniform float virtualCameraNear;
		uniform float virtualCameraFar;
		uniform mat4 virtualCameraProjectionMatrix;
		uniform mat4 virtualCameraProjectionMatrixInverse;
		uniform mat4 virtualCameraMatrixWorld;
		uniform vec2 resolution;
		varying vec4 vUv;
		#include <packing>
		float blendOverlay( float base, float blend ) {
			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );
		}
		vec3 blendOverlay( vec3 base, vec3 blend ) {
			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			return perspectiveDepthToViewZ( depth, virtualCameraNear, virtualCameraFar );
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( virtualCameraProjectionMatrixInverse * clipPosition ).xyz;//view
		}
		void main() {
			vec4 base = texture2DProj( tDiffuse, vUv );
			#ifdef useDepthTexture
				vec2 uv=(gl_FragCoord.xy-.5)/resolution.xy;
				uv.x=1.-uv.x;
				float depth = texture2DProj( tDepth, vUv ).r;
				float viewZ = getViewZ( depth );
				float clipW = virtualCameraProjectionMatrix[2][3] * viewZ+virtualCameraProjectionMatrix[3][3];
				vec3 viewPosition=getViewPosition( uv, depth, clipW );
				vec3 worldPosition=(virtualCameraMatrixWorld*vec4(viewPosition,1)).xyz;
				if(worldPosition.y>maxDistance) discard;
				float op=opacity;
				#ifdef DISTANCE_ATTENUATION
					float ratio=1.-(worldPosition.y/maxDistance);
					float attenuation=ratio*ratio;
					op=opacity*attenuation;
				#endif
				#ifdef FRESNEL
					op*=fresnelCoe;
				#endif
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), op );
			#else
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );
			#endif
		}
	`};class S6 extends xA{constructor(A,Q={}){super(A);this.isRefractor=!0,this.type="Refractor",this.camera=new v0;let E=this,B=Q.color!==void 0?new a(Q.color):new a(8355711),I=Q.textureWidth||512,C=Q.textureHeight||512,K=Q.clipBias||0,J=Q.shader||S6.RefractorShader,U=Q.multisample!==void 0?Q.multisample:4,Y=this.camera;Y.matrixAutoUpdate=!1,Y.userData.refractor=!0;let H=new UQ,R=new RA,O=new Q0(I,C,{samples:U,type:sA});this.material=new bA({name:J.name!==void 0?J.name:"unspecified",uniforms:oA.clone(J.uniforms),vertexShader:J.vertexShader,fragmentShader:J.fragmentShader,transparent:!0}),this.material.uniforms.color.value=B,this.material.uniforms.tDiffuse.value=O.texture,this.material.uniforms.textureMatrix.value=R;let N=function(){let G=new y,X=new y,q=new RA,M=new y,F=new y;return function D(_){return G.setFromMatrixPosition(E.matrixWorld),X.setFromMatrixPosition(_.matrixWorld),M.subVectors(G,X),q.extractRotation(E.matrixWorld),F.set(0,0,1),F.applyMatrix4(q),M.dot(F)<0}}(),$=function(){let G=new y,X=new y,q=new J0,M=new y;return function F(){E.matrixWorld.decompose(X,q,M),G.set(0,0,1).applyQuaternion(q).normalize(),G.negate(),H.setFromNormalAndCoplanarPoint(G,X)}}(),L=function(){let G=new UQ,X=new MA,q=new MA;return function M(F){Y.matrixWorld.copy(F.matrixWorld),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),Y.projectionMatrix.copy(F.projectionMatrix),Y.far=F.far,G.copy(H),G.applyMatrix4(Y.matrixWorldInverse),X.set(G.normal.x,G.normal.y,G.normal.z,G.constant);let D=Y.projectionMatrix;q.x=(Math.sign(X.x)+D.elements[8])/D.elements[0],q.y=(Math.sign(X.y)+D.elements[9])/D.elements[5],q.z=-1,q.w=(1+D.elements[10])/D.elements[14],X.multiplyScalar(2/X.dot(q)),D.elements[2]=X.x,D.elements[6]=X.y,D.elements[10]=X.z+1-K,D.elements[14]=X.w}}();function W(G){R.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),R.multiply(G.projectionMatrix),R.multiply(G.matrixWorldInverse),R.multiply(E.matrixWorld)}function Z(G,X,q){E.visible=!1;let M=G.getRenderTarget(),F=G.xr.enabled,D=G.shadowMap.autoUpdate;if(G.xr.enabled=!1,G.shadowMap.autoUpdate=!1,G.setRenderTarget(O),G.autoClear===!1)G.clear();G.render(X,Y),G.xr.enabled=F,G.shadowMap.autoUpdate=D,G.setRenderTarget(M);let _=q.viewport;if(_!==void 0)G.state.viewport(_);E.visible=!0}this.onBeforeRender=function(G,X,q){if(q.userData.refractor===!0)return;if(!N(q)===!0)return;$(),W(q),L(q),Z(G,X,q)},this.getRenderTarget=function(){return O},this.dispose=function(){O.dispose(),E.material.dispose()}}}S6.RefractorShader={name:"RefractorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`

		uniform mat4 textureMatrix;

		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform sampler2D tDiffuse;

		varying vec4 vUv;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};var Lf=new RA;class G7 extends xA{constructor(){let A=G7.SkyShader,Q=new bA({name:A.name,uniforms:oA.clone(A.uniforms),vertexShader:A.vertexShader,fragmentShader:A.fragmentShader,side:ZQ,depthWrite:!1});super(new bQ(1,1,1),Q);this.isSky=!0}}G7.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:0.005},mieDirectionalG:{value:0.8},sunPosition:{value:new y},up:{value:new y(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calculation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorption + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};class yU extends xA{constructor(A,Q={}){super(A);this.isWater=!0,this.type="Water";let E=this,B=Q.color!==void 0?new a(Q.color):new a(16777215),I=Q.textureWidth!==void 0?Q.textureWidth:512,C=Q.textureHeight!==void 0?Q.textureHeight:512,K=Q.clipBias!==void 0?Q.clipBias:0,J=Q.flowDirection!==void 0?Q.flowDirection:new AA(1,0),U=Q.flowSpeed!==void 0?Q.flowSpeed:0.03,Y=Q.reflectivity!==void 0?Q.reflectivity:0.02,H=Q.scale!==void 0?Q.scale:1,R=Q.shader!==void 0?Q.shader:yU.WaterShader,O=new nQ,N=Q.flowMap||void 0,$=Q.normalMap0||O.load("textures/water/Water_1_M_Normal.jpg"),L=Q.normalMap1||O.load("textures/water/Water_2_M_Normal.jpg"),W=0.15,Z=W*0.5,G=new RA,X=new gI;if(k6===void 0){console.error("THREE.Water: Required component Reflector not found.");return}if(S6===void 0){console.error("THREE.Water: Required component Refractor not found.");return}let q=new k6(A,{textureWidth:I,textureHeight:C,clipBias:K}),M=new S6(A,{textureWidth:I,textureHeight:C,clipBias:K});if(q.matrixAutoUpdate=!1,M.matrixAutoUpdate=!1,this.material=new bA({name:R.name,uniforms:oA.merge([vA.fog,R.uniforms]),vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,transparent:!0,fog:!0}),N!==void 0)this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:N};else this.material.uniforms.flowDirection={type:"v2",value:J};$.wrapS=$.wrapT=BQ,L.wrapS=L.wrapT=BQ,this.material.uniforms.tReflectionMap.value=q.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=M.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=$,this.material.uniforms.tNormalMap1.value=L,this.material.uniforms.color.value=B,this.material.uniforms.reflectivity.value=Y,this.material.uniforms.textureMatrix.value=G,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=Z,this.material.uniforms.config.value.z=Z,this.material.uniforms.config.value.w=H;function F(_){G.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),G.multiply(_.projectionMatrix),G.multiply(_.matrixWorldInverse),G.multiply(E.matrixWorld)}function D(){let _=X.getDelta(),w=E.material.uniforms.config;if(w.value.x+=U*_,w.value.y=w.value.x+Z,w.value.x>=W)w.value.x=0,w.value.y=Z;else if(w.value.y>=W)w.value.y=w.value.y-W}this.onBeforeRender=function(_,w,k){F(k),D(),E.visible=!1,q.matrixWorld.copy(E.matrixWorld),M.matrixWorld.copy(E.matrixWorld),q.onBeforeRender(_,w,k),M.onBeforeRender(_,w,k),E.visible=!0}}}yU.WaterShader={name:"WaterShader",uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new MA}},vertexShader:`

		#include <common>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>

		uniform mat4 textureMatrix;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			vUv = uv;
			vCoord = textureMatrix * vec4( position, 1.0 );

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vToEye = cameraPosition - worldPosition.xyz;

			vec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex
			gl_Position = projectionMatrix * mvPosition;

			#include <logdepthbuf_vertex>
			#include <fog_vertex>

		}`,fragmentShader:`

		#include <common>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>

		uniform sampler2D tReflectionMap;
		uniform sampler2D tRefractionMap;
		uniform sampler2D tNormalMap0;
		uniform sampler2D tNormalMap1;

		#ifdef USE_FLOWMAP
			uniform sampler2D tFlowMap;
		#else
			uniform vec2 flowDirection;
		#endif

		uniform vec3 color;
		uniform float reflectivity;
		uniform vec4 config;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			#include <logdepthbuf_fragment>

			float flowMapOffset0 = config.x;
			float flowMapOffset1 = config.y;
			float halfCycle = config.z;
			float scale = config.w;

			vec3 toEye = normalize( vToEye );

			// determine flow direction
			vec2 flow;
			#ifdef USE_FLOWMAP
				flow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;
			#else
				flow = flowDirection;
			#endif
			flow.x *= - 1.0;

			// sample normal maps (distort uvs with flowdata)
			vec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );
			vec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );

			// linear interpolate to get the final normal color
			float flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;
			vec4 normalColor = mix( normalColor0, normalColor1, flowLerp );

			// calculate normal vector
			vec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );

			// calculate the fresnel term to blend reflection and refraction maps
			float theta = max( dot( toEye, normal ), 0.0 );
			float reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );

			// calculate final uv coords
			vec3 coord = vCoord.xyz / vCoord.w;
			vec2 uv = coord.xy + coord.z * normal.xz * 0.05;

			vec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );
			vec4 refractColor = texture2D( tRefractionMap, uv );

			// multiply water color with the mix of both textures
			gl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>

		}`};var Vf=new y(1,1,1),jf=new y;var GQ={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};var W7={name:"ConvolutionShader",defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new AA(0.001953125,0)},cKernel:{value:[]}},vertexShader:`

		uniform vec2 uImageIncrement;

		varying vec2 vUv;

		void main() {

			vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float cKernel[ KERNEL_SIZE_INT ];

		uniform sampler2D tDiffuse;
		uniform vec2 uImageIncrement;

		varying vec2 vUv;

		void main() {

			vec2 imageCoord = vUv;
			vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );

			for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {

				sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];
				imageCoord += uImageIncrement;

			}

			gl_FragColor = sum;

		}`,buildKernel:function(A){let E=2*Math.ceil(A*3)+1;if(E>25)E=25;let B=(E-1)*0.5,I=new Array(E),C=0;for(let K=0;K<E;++K)I[K]=rk(K-B,A),C+=I[K];for(let K=0;K<E;++K)I[K]/=C;return I}};function rk(A,Q){return Math.exp(-(A*A)/(2*Q*Q))}class T6 extends s0{constructor(A=1,Q=25,E=4){super();this.renderTargetX=new Q0(1,1,{type:sA}),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new Q0(1,1,{type:sA}),this.renderTargetY.texture.name="BloomPass.y",this.combineUniforms=oA.clone(gU.uniforms),this.combineUniforms.strength.value=A,this.materialCombine=new bA({name:gU.name,uniforms:this.combineUniforms,vertexShader:gU.vertexShader,fragmentShader:gU.fragmentShader,blending:XE,transparent:!0});let B=W7;this.convolutionUniforms=oA.clone(B.uniforms),this.convolutionUniforms.uImageIncrement.value=T6.blurX,this.convolutionUniforms.cKernel.value=W7.buildKernel(E),this.materialConvolution=new bA({name:B.name,uniforms:this.convolutionUniforms,vertexShader:B.vertexShader,fragmentShader:B.fragmentShader,defines:{KERNEL_SIZE_FLOAT:Q.toFixed(1),KERNEL_SIZE_INT:Q.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new r0(null)}render(A,Q,E,B,I){if(I)A.state.buffers.stencil.setTest(!1);if(this.fsQuad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=E.texture,this.convolutionUniforms.uImageIncrement.value=T6.blurX,A.setRenderTarget(this.renderTargetX),A.clear(),this.fsQuad.render(A),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=T6.blurY,A.setRenderTarget(this.renderTargetY),A.clear(),this.fsQuad.render(A),this.fsQuad.material=this.materialCombine,this.combineUniforms.tDiffuse.value=this.renderTargetY.texture,I)A.state.buffers.stencil.setTest(!0);if(A.setRenderTarget(E),this.clear)A.clear();this.fsQuad.render(A)}setSize(A,Q){this.renderTargetX.setSize(A,Q),this.renderTargetY.setSize(A,Q)}dispose(){this.renderTargetX.dispose(),this.renderTargetY.dispose(),this.materialCombine.dispose(),this.materialConvolution.dispose(),this.fsQuad.dispose()}}var gU={name:"CombineShader",uniforms:{tDiffuse:{value:null},strength:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float strength;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = strength * texel;

		}`};T6.blurX=new AA(0.001953125,0);T6.blurY=new AA(0,0.001953125);var ak={name:"DotScreenShader",uniforms:{tDiffuse:{value:null},tSize:{value:new AA(256,256)},center:{value:new AA(0.5,0.5)},angle:{value:1.57},scale:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec2 center;
		uniform float angle;
		uniform float scale;
		uniform vec2 tSize;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		float pattern() {

			float s = sin( angle ), c = cos( angle );

			vec2 tex = vUv * tSize - center;
			vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;

			return ( sin( point.x ) * sin( point.y ) ) * 4.0;

		}

		void main() {

			vec4 color = texture2D( tDiffuse, vUv );

			float average = ( color.r + color.g + color.b ) / 3.0;

			gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );

		}`};var wK={name:"GTAOShader",defines:{PERSPECTIVE_CAMERA:1,SAMPLES:16,NORMAL_VECTOR_TYPE:1,DEPTH_SWIZZLING:"x",SCREEN_SPACE_RADIUS:0,SCREEN_SPACE_RADIUS_SCALE:100,SCENE_CLIP_BOX:0},uniforms:{tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},resolution:{value:new AA},cameraNear:{value:null},cameraFar:{value:null},cameraProjectionMatrix:{value:new RA},cameraProjectionMatrixInverse:{value:new RA},cameraWorldMatrix:{value:new RA},radius:{value:0.25},distanceExponent:{value:1},thickness:{value:1},distanceFallOff:{value:1},scale:{value:1},sceneBoxMin:{value:new y(-1,-1,-1)},sceneBoxMax:{value:new y(1,1,1)}},vertexShader:`

		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		varying vec2 vUv;
		uniform highp sampler2D tNormal;
		uniform highp sampler2D tDepth;
		uniform sampler2D tNoise;
		uniform vec2 resolution;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraProjectionMatrixInverse;		
		uniform mat4 cameraWorldMatrix;
		uniform float radius;
		uniform float distanceExponent;
		uniform float thickness;
		uniform float distanceFallOff;
		uniform float scale;
		#if SCENE_CLIP_BOX == 1
			uniform vec3 sceneBoxMin;
			uniform vec3 sceneBoxMax;
		#endif
		
		#include <common>
		#include <packing>

		#ifndef FRAGMENT_OUTPUT
		#define FRAGMENT_OUTPUT vec4(vec3(ao), 1.)
		#endif

		vec3 getViewPosition(const in vec2 screenPosition, const in float depth) {
			vec4 clipSpacePosition = vec4(vec3(screenPosition, depth) * 2.0 - 1.0, 1.0);
			vec4 viewSpacePosition = cameraProjectionMatrixInverse * clipSpacePosition;
			return viewSpacePosition.xyz / viewSpacePosition.w;
		}

		float getDepth(const vec2 uv) {  
			return textureLod(tDepth, uv.xy, 0.0).DEPTH_SWIZZLING;
		}

		float fetchDepth(const ivec2 uv) {   
			return texelFetch(tDepth, uv.xy, 0).DEPTH_SWIZZLING;
		}

		float getViewZ(const in float depth) {
			#if PERSPECTIVE_CAMERA == 1
				return perspectiveDepthToViewZ(depth, cameraNear, cameraFar);
			#else
				return orthographicDepthToViewZ(depth, cameraNear, cameraFar);
			#endif
		}

		vec3 computeNormalFromDepth(const vec2 uv) {
			vec2 size = vec2(textureSize(tDepth, 0));
			ivec2 p = ivec2(uv * size);
			float c0 = fetchDepth(p);
			float l2 = fetchDepth(p - ivec2(2, 0));
			float l1 = fetchDepth(p - ivec2(1, 0));
			float r1 = fetchDepth(p + ivec2(1, 0));
			float r2 = fetchDepth(p + ivec2(2, 0));
			float b2 = fetchDepth(p - ivec2(0, 2));
			float b1 = fetchDepth(p - ivec2(0, 1));
			float t1 = fetchDepth(p + ivec2(0, 1));
			float t2 = fetchDepth(p + ivec2(0, 2));
			float dl = abs((2.0 * l1 - l2) - c0);
			float dr = abs((2.0 * r1 - r2) - c0);
			float db = abs((2.0 * b1 - b2) - c0);
			float dt = abs((2.0 * t1 - t2) - c0);
			vec3 ce = getViewPosition(uv, c0).xyz;
			vec3 dpdx = (dl < dr) ? ce - getViewPosition((uv - vec2(1.0 / size.x, 0.0)), l1).xyz : -ce + getViewPosition((uv + vec2(1.0 / size.x, 0.0)), r1).xyz;
			vec3 dpdy = (db < dt) ? ce - getViewPosition((uv - vec2(0.0, 1.0 / size.y)), b1).xyz : -ce + getViewPosition((uv + vec2(0.0, 1.0 / size.y)), t1).xyz;
			return normalize(cross(dpdx, dpdy));
		}

		vec3 getViewNormal(const vec2 uv) {
			#if NORMAL_VECTOR_TYPE == 2
				return normalize(textureLod(tNormal, uv, 0.).rgb);
			#elif NORMAL_VECTOR_TYPE == 1
				return unpackRGBToNormal(textureLod(tNormal, uv, 0.).rgb);
			#else
				return computeNormalFromDepth(uv);
			#endif
		}

		vec3 getSceneUvAndDepth(vec3 sampleViewPos) {
			vec4 sampleClipPos = cameraProjectionMatrix * vec4(sampleViewPos, 1.);
			vec2 sampleUv = sampleClipPos.xy / sampleClipPos.w * 0.5 + 0.5;
			float sampleSceneDepth = getDepth(sampleUv);
			return vec3(sampleUv, sampleSceneDepth);
		}
		
		void main() {
			float depth = getDepth(vUv.xy);
			if (depth >= 1.0) {
				discard;
				return;
			}
			vec3 viewPos = getViewPosition(vUv, depth);
			vec3 viewNormal = getViewNormal(vUv);

			float radiusToUse = radius;
			float distanceFalloffToUse = thickness;
			#if SCREEN_SPACE_RADIUS == 1
				float radiusScale = getViewPosition(vec2(0.5 + float(SCREEN_SPACE_RADIUS_SCALE) / resolution.x, 0.0), depth).x;
				radiusToUse *= radiusScale;
				distanceFalloffToUse *= radiusScale;
			#endif

			#if SCENE_CLIP_BOX == 1
				vec3 worldPos = (cameraWorldMatrix * vec4(viewPos, 1.0)).xyz;
				float boxDistance = length(max(vec3(0.0), max(sceneBoxMin - worldPos, worldPos - sceneBoxMax)));
				if (boxDistance > radiusToUse) {
					discard;
					return;
				}
			#endif
			
			vec2 noiseResolution = vec2(textureSize(tNoise, 0));
			vec2 noiseUv = vUv * resolution / noiseResolution;
			vec4 noiseTexel = textureLod(tNoise, noiseUv, 0.0);
			vec3 randomVec = noiseTexel.xyz * 2.0 - 1.0;
			vec3 tangent = normalize(vec3(randomVec.xy, 0.));
			vec3 bitangent = vec3(-tangent.y, tangent.x, 0.);
			mat3 kernelMatrix = mat3(tangent, bitangent, vec3(0., 0., 1.));

			const int DIRECTIONS = SAMPLES < 30 ? 3 : 5;
			const int STEPS = (SAMPLES + DIRECTIONS - 1) / DIRECTIONS;
			float ao = 0.0;
			for (int i = 0; i < DIRECTIONS; ++i) {
				
				float angle = float(i) / float(DIRECTIONS) * PI;
				vec4 sampleDir = vec4(cos(angle), sin(angle), 0., 0.5 + 0.5 * noiseTexel.w); 
				sampleDir.xyz = normalize(kernelMatrix * sampleDir.xyz);

				vec3 viewDir = normalize(-viewPos.xyz);
				vec3 sliceBitangent = normalize(cross(sampleDir.xyz, viewDir));
				vec3 sliceTangent = cross(sliceBitangent, viewDir);
				vec3 normalInSlice = normalize(viewNormal - sliceBitangent * dot(viewNormal, sliceBitangent));
				
				vec3 tangentToNormalInSlice = cross(normalInSlice, sliceBitangent);
				vec2 cosHorizons = vec2(dot(viewDir, tangentToNormalInSlice), dot(viewDir, -tangentToNormalInSlice));
				
				for (int j = 0; j < STEPS; ++j) {
					vec3 sampleViewOffset = sampleDir.xyz * radiusToUse * sampleDir.w * pow(float(j + 1) / float(STEPS), distanceExponent);	

					vec3 sampleSceneUvDepth = getSceneUvAndDepth(viewPos + sampleViewOffset);
					vec3 sampleSceneViewPos = getViewPosition(sampleSceneUvDepth.xy, sampleSceneUvDepth.z);
					vec3 viewDelta = sampleSceneViewPos - viewPos;
					if (abs(viewDelta.z) < thickness) {
						float sampleCosHorizon = dot(viewDir, normalize(viewDelta));
						cosHorizons.x += max(0., (sampleCosHorizon - cosHorizons.x) * mix(1., 2. / float(j + 2), distanceFallOff));
					}		

					sampleSceneUvDepth = getSceneUvAndDepth(viewPos - sampleViewOffset);
					sampleSceneViewPos = getViewPosition(sampleSceneUvDepth.xy, sampleSceneUvDepth.z);
					viewDelta = sampleSceneViewPos - viewPos;
					if (abs(viewDelta.z) < thickness) {
						float sampleCosHorizon = dot(viewDir, normalize(viewDelta));
						cosHorizons.y += max(0., (sampleCosHorizon - cosHorizons.y) * mix(1., 2. / float(j + 2), distanceFallOff));
					}
				}

				vec2 sinHorizons = sqrt(1. - cosHorizons * cosHorizons);
				float nx = dot(normalInSlice, sliceTangent);
				float ny = dot(normalInSlice, viewDir);
				float nxb = 1. / 2. * (acos(cosHorizons.y) - acos(cosHorizons.x) + sinHorizons.x * cosHorizons.x - sinHorizons.y * cosHorizons.y);
				float nyb = 1. / 2. * (2. - cosHorizons.x * cosHorizons.x - cosHorizons.y * cosHorizons.y);
				float occlusion = nx * nxb + ny * nyb;
				ao += occlusion;
			}

			ao = clamp(ao / float(DIRECTIONS), 0., 1.);		
		#if SCENE_CLIP_BOX == 1
			ao = mix(ao, 1., smoothstep(0., radiusToUse, boxDistance));
		#endif
			ao = pow(ao, scale);

			gl_FragColor = FRAGMENT_OUTPUT;
		}`},_K={name:"GTAODepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`
		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		uniform sampler2D tDepth;
		uniform float cameraNear;
		uniform float cameraFar;
		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 screenPosition ) {
			#if PERSPECTIVE_CAMERA == 1
				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );
			#else
				return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		void main() {
			float depth = getLinearDepth( vUv );
			gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );

		}`},xU={name:"GTAOBlendShader",uniforms:{tDiffuse:{value:null},intensity:{value:1}},vertexShader:`
		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		uniform float intensity;
		uniform sampler2D tDiffuse;
		varying vec2 vUv;

		void main() {
			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = vec4(mix(vec3(1.), texel.rgb, intensity), texel.a);
		}`};function jX(A=5){let Q=Math.floor(A)%2===0?Math.floor(A)+1:Math.floor(A),E=ek(Q),B=E.length,I=new Uint8Array(B*4);for(let K=0;K<B;++K){let J=E[K],U=2*Math.PI*J/B,Y=new y(Math.cos(U),Math.sin(U),0).normalize();I[K*4]=(Y.x*0.5+0.5)*255,I[K*4+1]=(Y.y*0.5+0.5)*255,I[K*4+2]=127,I[K*4+3]=255}let C=new h0(I,Q,Q);return C.wrapS=BQ,C.wrapT=BQ,C.needsUpdate=!0,C}function ek(A){let Q=Math.floor(A)%2===0?Math.floor(A)+1:Math.floor(A),E=Q*Q,B=Array(E).fill(0),I=Math.floor(Q/2),C=Q-1;for(let K=1;K<=E;){if(I===-1&&C===Q)C=Q-2,I=0;else{if(C===Q)C=0;if(I<0)I=Q-1}if(B[I*Q+C]!==0){C-=2,I++;continue}else B[I*Q+C]=K++;C++,I--}return B}var kK={name:"PoissonDenoiseShader",defines:{SAMPLES:16,SAMPLE_VECTORS:X7(16,2,1),NORMAL_VECTOR_TYPE:1,DEPTH_VALUE_SOURCE:0},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},resolution:{value:new AA},cameraProjectionMatrixInverse:{value:new RA},lumaPhi:{value:5},depthPhi:{value:5},normalPhi:{value:5},radius:{value:4},index:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		varying vec2 vUv;

		uniform sampler2D tDiffuse;
		uniform sampler2D tNormal;
		uniform sampler2D tDepth;
		uniform sampler2D tNoise;
		uniform vec2 resolution;
		uniform mat4 cameraProjectionMatrixInverse;
		uniform float lumaPhi;
		uniform float depthPhi;
		uniform float normalPhi;
		uniform float radius;
		uniform int index;
		
		#include <common>
		#include <packing>

		#ifndef SAMPLE_LUMINANCE
		#define SAMPLE_LUMINANCE dot(vec3(0.2125, 0.7154, 0.0721), a)
		#endif

		#ifndef FRAGMENT_OUTPUT
		#define FRAGMENT_OUTPUT vec4(denoised, 1.)
		#endif

		float getLuminance(const in vec3 a) {
			return SAMPLE_LUMINANCE;
		}

		const vec3 poissonDisk[SAMPLES] = SAMPLE_VECTORS;

		vec3 getViewPosition(const in vec2 screenPosition, const in float depth) {
			vec4 clipSpacePosition = vec4(vec3(screenPosition, depth) * 2.0 - 1.0, 1.0);
			vec4 viewSpacePosition = cameraProjectionMatrixInverse * clipSpacePosition;
			return viewSpacePosition.xyz / viewSpacePosition.w;
		}
		
		float getDepth(const vec2 uv) {
		#if DEPTH_VALUE_SOURCE == 1    
			return textureLod(tDepth, uv.xy, 0.0).a;
		#else
			return textureLod(tDepth, uv.xy, 0.0).r;
		#endif
		}

		float fetchDepth(const ivec2 uv) {
			#if DEPTH_VALUE_SOURCE == 1    
				return texelFetch(tDepth, uv.xy, 0).a;
			#else
				return texelFetch(tDepth, uv.xy, 0).r;
			#endif
		}

		vec3 computeNormalFromDepth(const vec2 uv) {
			vec2 size = vec2(textureSize(tDepth, 0));
			ivec2 p = ivec2(uv * size);
			float c0 = fetchDepth(p);
			float l2 = fetchDepth(p - ivec2(2, 0));
			float l1 = fetchDepth(p - ivec2(1, 0));
			float r1 = fetchDepth(p + ivec2(1, 0));
			float r2 = fetchDepth(p + ivec2(2, 0));
			float b2 = fetchDepth(p - ivec2(0, 2));
			float b1 = fetchDepth(p - ivec2(0, 1));
			float t1 = fetchDepth(p + ivec2(0, 1));
			float t2 = fetchDepth(p + ivec2(0, 2));
			float dl = abs((2.0 * l1 - l2) - c0);
			float dr = abs((2.0 * r1 - r2) - c0);
			float db = abs((2.0 * b1 - b2) - c0);
			float dt = abs((2.0 * t1 - t2) - c0);
			vec3 ce = getViewPosition(uv, c0).xyz;
			vec3 dpdx = (dl < dr) ?  ce - getViewPosition((uv - vec2(1.0 / size.x, 0.0)), l1).xyz
									: -ce + getViewPosition((uv + vec2(1.0 / size.x, 0.0)), r1).xyz;
			vec3 dpdy = (db < dt) ?  ce - getViewPosition((uv - vec2(0.0, 1.0 / size.y)), b1).xyz
									: -ce + getViewPosition((uv + vec2(0.0, 1.0 / size.y)), t1).xyz;
			return normalize(cross(dpdx, dpdy));
		}

		vec3 getViewNormal(const vec2 uv) {
		#if NORMAL_VECTOR_TYPE == 2
			return normalize(textureLod(tNormal, uv, 0.).rgb);
		#elif NORMAL_VECTOR_TYPE == 1
			return unpackRGBToNormal(textureLod(tNormal, uv, 0.).rgb);
		#else
			return computeNormalFromDepth(uv);
		#endif
		}

		void denoiseSample(in vec3 center, in vec3 viewNormal, in vec3 viewPos, in vec2 sampleUv, inout vec3 denoised, inout float totalWeight) {
			vec4 sampleTexel = textureLod(tDiffuse, sampleUv, 0.0);
			float sampleDepth = getDepth(sampleUv);
			vec3 sampleNormal = getViewNormal(sampleUv);
			vec3 neighborColor = sampleTexel.rgb;
			vec3 viewPosSample = getViewPosition(sampleUv, sampleDepth);
			
			float normalDiff = dot(viewNormal, sampleNormal);
			float normalSimilarity = pow(max(normalDiff, 0.), normalPhi);
			float lumaDiff = abs(getLuminance(neighborColor) - getLuminance(center));
			float lumaSimilarity = max(1.0 - lumaDiff / lumaPhi, 0.0);
			float depthDiff = abs(dot(viewPos - viewPosSample, viewNormal));
			float depthSimilarity = max(1. - depthDiff / depthPhi, 0.);
			float w = lumaSimilarity * depthSimilarity * normalSimilarity;
		
			denoised += w * neighborColor;
			totalWeight += w;
		}
		
		void main() {
			float depth = getDepth(vUv.xy);	
			vec3 viewNormal = getViewNormal(vUv);	
			if (depth == 1. || dot(viewNormal, viewNormal) == 0.) {
				discard;
				return;
			}
			vec4 texel = textureLod(tDiffuse, vUv, 0.0);
			vec3 center = texel.rgb;
			vec3 viewPos = getViewPosition(vUv, depth);

			vec2 noiseResolution = vec2(textureSize(tNoise, 0));
			vec2 noiseUv = vUv * resolution / noiseResolution;
			vec4 noiseTexel = textureLod(tNoise, noiseUv, 0.0);
      		vec2 noiseVec = vec2(sin(noiseTexel[index % 4] * 2. * PI), cos(noiseTexel[index % 4] * 2. * PI));
    		mat2 rotationMatrix = mat2(noiseVec.x, -noiseVec.y, noiseVec.x, noiseVec.y);
		
			float totalWeight = 1.0;
			vec3 denoised = texel.rgb;
			for (int i = 0; i < SAMPLES; i++) {
				vec3 sampleDir = poissonDisk[i];
				vec2 offset = rotationMatrix * (sampleDir.xy * (1. + sampleDir.z * (radius - 1.)) / resolution);
				vec2 sampleUv = vUv + offset;
				denoiseSample(center, viewNormal, viewPos, sampleUv, denoised, totalWeight);
			}
		
			if (totalWeight > 0.) { 
				denoised /= totalWeight;
			}
			gl_FragColor = FRAGMENT_OUTPUT;
		}`};function X7(A,Q,E){let B=AS(A,Q,E),I="vec3[SAMPLES](";for(let C=0;C<A;C++){let K=B[C];I+=`vec3(${K.x}, ${K.y}, ${K.z})${C<A-1?",":")"}`}return I}function AS(A,Q,E){let B=[];for(let I=0;I<A;I++){let C=2*Math.PI*Q*I/A,K=Math.pow(I/(A-1),E);B.push(new y(Math.cos(C),Math.sin(C),K))}return B}class WI extends s0{constructor(A,Q,E,B,I,C,K){super();if(this.width=E!==void 0?E:512,this.height=B!==void 0?B:512,this.clear=!0,this.camera=Q,this.scene=A,this.output=0,this._renderGBuffer=!0,this._visibilityCache=/*@__PURE__*/new Map,this.blendIntensity=1,this.pdRings=2,this.pdRadiusExponent=2,this.pdSamples=16,this.gtaoNoiseTexture=jX(),this.pdNoiseTexture=this.generateNoise(),this.gtaoRenderTarget=new Q0(this.width,this.height,{type:sA}),this.pdRenderTarget=this.gtaoRenderTarget.clone(),this.gtaoMaterial=new bA({defines:Object.assign({},wK.defines),uniforms:oA.clone(wK.uniforms),vertexShader:wK.vertexShader,fragmentShader:wK.fragmentShader,blending:H0,depthTest:!1,depthWrite:!1}),this.gtaoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.gtaoMaterial.uniforms.tNoise.value=this.gtaoNoiseTexture,this.gtaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.normalMaterial=new gE,this.normalMaterial.blending=H0,this.pdMaterial=new bA({defines:Object.assign({},kK.defines),uniforms:oA.clone(kK.uniforms),vertexShader:kK.vertexShader,fragmentShader:kK.fragmentShader,depthTest:!1,depthWrite:!1}),this.pdMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.pdMaterial.uniforms.tNoise.value=this.pdNoiseTexture,this.pdMaterial.uniforms.resolution.value.set(this.width,this.height),this.pdMaterial.uniforms.lumaPhi.value=10,this.pdMaterial.uniforms.depthPhi.value=2,this.pdMaterial.uniforms.normalPhi.value=3,this.pdMaterial.uniforms.radius.value=8,this.depthRenderMaterial=new bA({defines:Object.assign({},_K.defines),uniforms:oA.clone(_K.uniforms),vertexShader:_K.vertexShader,fragmentShader:_K.fragmentShader,blending:H0}),this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new bA({uniforms:oA.clone(GQ.uniforms),vertexShader:GQ.vertexShader,fragmentShader:GQ.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:PB,blendDst:$E,blendEquation:kQ,blendSrcAlpha:LE,blendDstAlpha:$E,blendEquationAlpha:kQ}),this.blendMaterial=new bA({uniforms:oA.clone(xU.uniforms),vertexShader:xU.vertexShader,fragmentShader:xU.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blending:vQ,blendSrc:PB,blendDst:$E,blendEquation:kQ,blendSrcAlpha:LE,blendDstAlpha:$E,blendEquationAlpha:kQ}),this.fsQuad=new r0(null),this.originalClearColor=new a,this.setGBuffer(I?I.depthTexture:void 0,I?I.normalTexture:void 0),C!==void 0)this.updateGtaoMaterial(C);if(K!==void 0)this.updatePdMaterial(K)}dispose(){this.gtaoNoiseTexture.dispose(),this.pdNoiseTexture.dispose(),this.normalRenderTarget.dispose(),this.gtaoRenderTarget.dispose(),this.pdRenderTarget.dispose(),this.normalMaterial.dispose(),this.pdMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}get gtaoMap(){return this.pdRenderTarget.texture}setGBuffer(A,Q){if(A!==void 0)this.depthTexture=A,this.normalTexture=Q,this._renderGBuffer=!1;else this.depthTexture=new IE,this.depthTexture.format=oE,this.depthTexture.type=VE,this.normalRenderTarget=new Q0(this.width,this.height,{minFilter:Z0,magFilter:Z0,type:sA,depthTexture:this.depthTexture}),this.normalTexture=this.normalRenderTarget.texture,this._renderGBuffer=!0;let E=this.normalTexture?1:0,B=this.depthTexture===this.normalTexture?"w":"x";this.gtaoMaterial.defines.NORMAL_VECTOR_TYPE=E,this.gtaoMaterial.defines.DEPTH_SWIZZLING=B,this.gtaoMaterial.uniforms.tNormal.value=this.normalTexture,this.gtaoMaterial.uniforms.tDepth.value=this.depthTexture,this.pdMaterial.defines.NORMAL_VECTOR_TYPE=E,this.pdMaterial.defines.DEPTH_SWIZZLING=B,this.pdMaterial.uniforms.tNormal.value=this.normalTexture,this.pdMaterial.uniforms.tDepth.value=this.depthTexture,this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture}setSceneClipBox(A){if(A)this.gtaoMaterial.needsUpdate=this.gtaoMaterial.defines.SCENE_CLIP_BOX!==1,this.gtaoMaterial.defines.SCENE_CLIP_BOX=1,this.gtaoMaterial.uniforms.sceneBoxMin.value.copy(A.min),this.gtaoMaterial.uniforms.sceneBoxMax.value.copy(A.max);else this.gtaoMaterial.needsUpdate=this.gtaoMaterial.defines.SCENE_CLIP_BOX===0,this.gtaoMaterial.defines.SCENE_CLIP_BOX=0}updateGtaoMaterial(A){if(A.radius!==void 0)this.gtaoMaterial.uniforms.radius.value=A.radius;if(A.distanceExponent!==void 0)this.gtaoMaterial.uniforms.distanceExponent.value=A.distanceExponent;if(A.thickness!==void 0)this.gtaoMaterial.uniforms.thickness.value=A.thickness;if(A.distanceFallOff!==void 0)this.gtaoMaterial.uniforms.distanceFallOff.value=A.distanceFallOff,this.gtaoMaterial.needsUpdate=!0;if(A.scale!==void 0)this.gtaoMaterial.uniforms.scale.value=A.scale;if(A.samples!==void 0&&A.samples!==this.gtaoMaterial.defines.SAMPLES)this.gtaoMaterial.defines.SAMPLES=A.samples,this.gtaoMaterial.needsUpdate=!0;if(A.screenSpaceRadius!==void 0&&(A.screenSpaceRadius?1:0)!==this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS)this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS=A.screenSpaceRadius?1:0,this.gtaoMaterial.needsUpdate=!0}updatePdMaterial(A){let Q=!1;if(A.lumaPhi!==void 0)this.pdMaterial.uniforms.lumaPhi.value=A.lumaPhi;if(A.depthPhi!==void 0)this.pdMaterial.uniforms.depthPhi.value=A.depthPhi;if(A.normalPhi!==void 0)this.pdMaterial.uniforms.normalPhi.value=A.normalPhi;if(A.radius!==void 0&&A.radius!==this.radius)this.pdMaterial.uniforms.radius.value=A.radius;if(A.radiusExponent!==void 0&&A.radiusExponent!==this.pdRadiusExponent)this.pdRadiusExponent=A.radiusExponent,Q=!0;if(A.rings!==void 0&&A.rings!==this.pdRings)this.pdRings=A.rings,Q=!0;if(A.samples!==void 0&&A.samples!==this.pdSamples)this.pdSamples=A.samples,Q=!0;if(Q)this.pdMaterial.defines.SAMPLES=this.pdSamples,this.pdMaterial.defines.SAMPLE_VECTORS=X7(this.pdSamples,this.pdRings,this.pdRadiusExponent),this.pdMaterial.needsUpdate=!0}render(A,Q,E){if(this._renderGBuffer)this.overrideVisibility(),this.renderOverride(A,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility();switch(this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.gtaoMaterial.uniforms.cameraWorldMatrix.value.copy(this.camera.matrixWorld),this.renderPass(A,this.gtaoMaterial,this.gtaoRenderTarget,16777215,1),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.renderPass(A,this.pdMaterial,this.pdRenderTarget,16777215,1),this.output){case WI.OUTPUT.Off:break;case WI.OUTPUT.Diffuse:this.copyMaterial.uniforms.tDiffuse.value=E.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q);break;case WI.OUTPUT.AO:this.copyMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q);break;case WI.OUTPUT.Denoise:this.copyMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q);break;case WI.OUTPUT.Depth:this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.renderPass(A,this.depthRenderMaterial,this.renderToScreen?null:Q);break;case WI.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q);break;case WI.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=E.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q),this.blendMaterial.uniforms.intensity.value=this.blendIntensity,this.blendMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this.renderPass(A,this.blendMaterial,this.renderToScreen?null:Q);break;default:console.warn("THREE.GTAOPass: Unknown output type.")}}renderPass(A,Q,E,B,I){A.getClearColor(this.originalClearColor);let C=A.getClearAlpha(),K=A.autoClear;if(A.setRenderTarget(E),A.autoClear=!1,B!==void 0&&B!==null)A.setClearColor(B),A.setClearAlpha(I||0),A.clear();this.fsQuad.material=Q,this.fsQuad.render(A),A.autoClear=K,A.setClearColor(this.originalClearColor),A.setClearAlpha(C)}renderOverride(A,Q,E,B,I){A.getClearColor(this.originalClearColor);let C=A.getClearAlpha(),K=A.autoClear;if(A.setRenderTarget(E),A.autoClear=!1,B=Q.clearColor||B,I=Q.clearAlpha||I,B!==void 0&&B!==null)A.setClearColor(B),A.setClearAlpha(I||0),A.clear();this.scene.overrideMaterial=Q,A.render(this.scene,this.camera),this.scene.overrideMaterial=null,A.autoClear=K,A.setClearColor(this.originalClearColor),A.setClearAlpha(C)}setSize(A,Q){this.width=A,this.height=Q,this.gtaoRenderTarget.setSize(A,Q),this.normalRenderTarget.setSize(A,Q),this.pdRenderTarget.setSize(A,Q),this.gtaoMaterial.uniforms.resolution.value.set(A,Q),this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.pdMaterial.uniforms.resolution.value.set(A,Q),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse)}overrideVisibility(){let A=this.scene,Q=this._visibilityCache;A.traverse(function(E){if(Q.set(E,E.visible),E.isPoints||E.isLine)E.visible=!1})}restoreVisibility(){let A=this.scene,Q=this._visibilityCache;A.traverse(function(E){let B=Q.get(E);E.visible=B}),Q.clear()}generateNoise(A=64){let Q=new MK,E=A*A*4,B=new Uint8Array(E);for(let C=0;C<A;C++)for(let K=0;K<A;K++){let J=C,U=K;B[(C*A+K)*4]=(Q.noise(J,U)*0.5+0.5)*255,B[(C*A+K)*4+1]=(Q.noise(J+A,U)*0.5+0.5)*255,B[(C*A+K)*4+2]=(Q.noise(J,U+A)*0.5+0.5)*255,B[(C*A+K)*4+3]=(Q.noise(J+A,U+A)*0.5+0.5)*255}let I=new h0(B,A,A,V0,x0);return I.wrapS=BQ,I.wrapT=BQ,I.needsUpdate=!0,I}}WI.OUTPUT={Off:-1,Default:0,Diffuse:1,Depth:2,Normal:3,AO:4,Denoise:5};var QS={name:"HalftoneShader",uniforms:{tDiffuse:{value:null},shape:{value:1},radius:{value:4},rotateR:{value:Math.PI/12*1},rotateG:{value:Math.PI/12*2},rotateB:{value:Math.PI/12*3},scatter:{value:0},width:{value:1},height:{value:1},blending:{value:1},blendingMode:{value:1},greyscale:{value:!1},disable:{value:!1}},vertexShader:`

		varying vec2 vUV;

		void main() {

			vUV = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

		}`,fragmentShader:`

		#define SQRT2_MINUS_ONE 0.41421356
		#define SQRT2_HALF_MINUS_ONE 0.20710678
		#define PI2 6.28318531
		#define SHAPE_DOT 1
		#define SHAPE_ELLIPSE 2
		#define SHAPE_LINE 3
		#define SHAPE_SQUARE 4
		#define BLENDING_LINEAR 1
		#define BLENDING_MULTIPLY 2
		#define BLENDING_ADD 3
		#define BLENDING_LIGHTER 4
		#define BLENDING_DARKER 5
		uniform sampler2D tDiffuse;
		uniform float radius;
		uniform float rotateR;
		uniform float rotateG;
		uniform float rotateB;
		uniform float scatter;
		uniform float width;
		uniform float height;
		uniform int shape;
		uniform bool disable;
		uniform float blending;
		uniform int blendingMode;
		varying vec2 vUV;
		uniform bool greyscale;
		const int samples = 8;

		float blend( float a, float b, float t ) {

		// linear blend
			return a * ( 1.0 - t ) + b * t;

		}

		float hypot( float x, float y ) {

		// vector magnitude
			return sqrt( x * x + y * y );

		}

		float rand( vec2 seed ){

		// get pseudo-random number
			return fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );

		}

		float distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {

		// apply shape-specific transforms
			float dist = hypot( coord.x - p.x, coord.y - p.y );
			float rad = channel;

			if ( shape == SHAPE_DOT ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

			} else if ( shape == SHAPE_ELLIPSE ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

				if ( dist != 0.0 ) {
					float dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );
					dist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;
				}

			} else if ( shape == SHAPE_LINE ) {

				rad = pow( abs( rad ), 1.5) * rad_max;
				float dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;
				dist = hypot( normal.x * dot_p, normal.y * dot_p );

			} else if ( shape == SHAPE_SQUARE ) {

				float theta = atan( p.y - coord.y, p.x - coord.x ) - angle;
				float sin_t = abs( sin( theta ) );
				float cos_t = abs( cos( theta ) );
				rad = pow( abs( rad ), 1.4 );
				rad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );

			}

			return rad - dist;

		}

		struct Cell {

		// grid sample positions
			vec2 normal;
			vec2 p1;
			vec2 p2;
			vec2 p3;
			vec2 p4;
			float samp2;
			float samp1;
			float samp3;
			float samp4;

		};

		vec4 getSample( vec2 point ) {

		// multi-sampled point
			vec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );
			float base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;
			float step = PI2 / float( samples );
			float dist = radius * 0.66;

			for ( int i = 0; i < samples; ++i ) {

				float r = base + step * float( i );
				vec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );
				tex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );

			}

			tex /= float( samples ) + 1.0;
			return tex;

		}

		float getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {

		// get colour for given point
			float dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;

			if ( channel == 0 ) {

				c.samp1 = getSample( c.p1 ).r;
				c.samp2 = getSample( c.p2 ).r;
				c.samp3 = getSample( c.p3 ).r;
				c.samp4 = getSample( c.p4 ).r;

			} else if (channel == 1) {

				c.samp1 = getSample( c.p1 ).g;
				c.samp2 = getSample( c.p2 ).g;
				c.samp3 = getSample( c.p3 ).g;
				c.samp4 = getSample( c.p4 ).g;

			} else {

				c.samp1 = getSample( c.p1 ).b;
				c.samp3 = getSample( c.p3 ).b;
				c.samp2 = getSample( c.p2 ).b;
				c.samp4 = getSample( c.p4 ).b;

			}

			dist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );
			dist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );
			dist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );
			dist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );
			res = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;
			res = clamp( res, 0.0, 1.0 );

			return res;

		}

		Cell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {

		// get containing cell
			Cell c;

		// calc grid
			vec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );
			float threshold = step * 0.5;
			float dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );
			float dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );
			vec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );
			float offset_normal = mod( hypot( offset.x, offset.y ), step );
			float normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;
			float normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;
			float offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );
			float line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;
			float line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;

		// get closest corner
			c.normal = n;
			c.p1.x = p.x - n.x * normal_scale + n.y * line_scale;
			c.p1.y = p.y - n.y * normal_scale - n.x * line_scale;

		// scatter
			if ( scatter != 0.0 ) {

				float off_mag = scatter * threshold * 0.5;
				float off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;
				c.p1.x += cos( off_angle ) * off_mag;
				c.p1.y += sin( off_angle ) * off_mag;

			}

		// find corners
			float normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );
			float line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );
			c.p2.x = c.p1.x - n.x * normal_step;
			c.p2.y = c.p1.y - n.y * normal_step;
			c.p3.x = c.p1.x + n.y * line_step;
			c.p3.y = c.p1.y - n.x * line_step;
			c.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;
			c.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;

			return c;

		}

		float blendColour( float a, float b, float t ) {

		// blend colours
			if ( blendingMode == BLENDING_LINEAR ) {
				return blend( a, b, 1.0 - t );
			} else if ( blendingMode == BLENDING_ADD ) {
				return blend( a, min( 1.0, a + b ), t );
			} else if ( blendingMode == BLENDING_MULTIPLY ) {
				return blend( a, max( 0.0, a * b ), t );
			} else if ( blendingMode == BLENDING_LIGHTER ) {
				return blend( a, max( a, b ), t );
			} else if ( blendingMode == BLENDING_DARKER ) {
				return blend( a, min( a, b ), t );
			} else {
				return blend( a, b, 1.0 - t );
			}

		}

		void main() {

			if ( ! disable ) {

		// setup
				vec2 p = vec2( vUV.x * width, vUV.y * height );
				vec2 origin = vec2( 0, 0 );
				float aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;

		// get channel samples
				Cell cell_r = getReferenceCell( p, origin, rotateR, radius );
				Cell cell_g = getReferenceCell( p, origin, rotateG, radius );
				Cell cell_b = getReferenceCell( p, origin, rotateB, radius );
				float r = getDotColour( cell_r, p, 0, rotateR, aa );
				float g = getDotColour( cell_g, p, 1, rotateG, aa );
				float b = getDotColour( cell_b, p, 2, rotateB, aa );

		// blend with original
				vec4 colour = texture2D( tDiffuse, vUV );
				r = blendColour( r, colour.r, blending );
				g = blendColour( g, colour.g, blending );
				b = blendColour( b, colour.b, blending );

				if ( greyscale ) {
					r = g = b = (r + b + g) / 3.0;
				}

				gl_FragColor = vec4( r, g, b, 1.0 );

			} else {

				gl_FragColor = texture2D( tDiffuse, vUV );

			}

		}`};class t1 extends s0{constructor(A,Q,E,B){super();this.renderScene=Q,this.renderCamera=E,this.selectedObjects=B!==void 0?B:[],this.visibleEdgeColor=new a(1,1,1),this.hiddenEdgeColor=new a(0.1,0.04,0.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=/*@__PURE__*/new Map,this._selectionCache=/*@__PURE__*/new Set,this.resolution=A!==void 0?new AA(A.x,A.y):new AA(256,256);let I=Math.round(this.resolution.x/this.downSampleRatio),C=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Q0(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new hI,this.depthMaterial.side=y0,this.depthMaterial.depthPacking=b8,this.depthMaterial.blending=H0,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=y0,this.prepareMaskMaterial.fragmentShader=Y(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Q0(this.resolution.x,this.resolution.y,{type:sA}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Q0(I,C,{type:sA}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Q0(I,C,{type:sA}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Q0(Math.round(I/2),Math.round(C/2),{type:sA}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Q0(I,C,{type:sA}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Q0(Math.round(I/2),Math.round(C/2),{type:sA}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;let K=4,J=4;this.separableBlurMaterial1=this.getSeparableBlurMaterial(K),this.separableBlurMaterial1.uniforms.texSize.value.set(I,C),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeparableBlurMaterial(J),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(I/2),Math.round(C/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=J,this.overlayMaterial=this.getOverlayMaterial();let U=GQ;this.copyUniforms=oA.clone(U.uniforms),this.materialCopy=new bA({uniforms:this.copyUniforms,vertexShader:U.vertexShader,fragmentShader:U.fragmentShader,blending:H0,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new a,this.oldClearAlpha=1,this.fsQuad=new r0(null),this.tempPulseColor1=new a,this.tempPulseColor2=new a,this.textureMatrix=new RA;function Y(H,R){let O=R.isPerspectiveCamera?"perspective":"orthographic";return H.replace(/DEPTH_TO_VIEW_Z/g,O+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(A,Q){this.renderTargetMaskBuffer.setSize(A,Q),this.renderTargetDepthBuffer.setSize(A,Q);let E=Math.round(A/this.downSampleRatio),B=Math.round(Q/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(E,B),this.renderTargetBlurBuffer1.setSize(E,B),this.renderTargetEdgeBuffer1.setSize(E,B),this.separableBlurMaterial1.uniforms.texSize.value.set(E,B),E=Math.round(E/2),B=Math.round(B/2),this.renderTargetBlurBuffer2.setSize(E,B),this.renderTargetEdgeBuffer2.setSize(E,B),this.separableBlurMaterial2.uniforms.texSize.value.set(E,B)}updateSelectionCache(){let A=this._selectionCache;function Q(E){if(E.isMesh)A.add(E)}A.clear();for(let E=0;E<this.selectedObjects.length;E++)this.selectedObjects[E].traverse(Q)}changeVisibilityOfSelectedObjects(A){let Q=this._visibilityCache;for(let E of this._selectionCache)if(A===!0)E.visible=Q.get(E);else Q.set(E,E.visible),E.visible=A}changeVisibilityOfNonSelectedObjects(A){let Q=this._visibilityCache,E=this._selectionCache;function B(I){if(I.isMesh||I.isSprite){if(!E.has(I)){let C=I.visible;if(A===!1||Q.get(I)===!0)I.visible=A;Q.set(I,C)}}else if(I.isPoints||I.isLine)if(A===!0)I.visible=Q.get(I);else Q.set(I,I.visible),I.visible=A}this.renderScene.traverse(B)}updateTextureMatrix(){this.textureMatrix.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(A,Q,E,B,I){if(this.selectedObjects.length>0){A.getClearColor(this._oldClearColor),this.oldClearAlpha=A.getClearAlpha();let C=A.autoClear;if(A.autoClear=!1,I)A.state.buffers.stencil.setTest(!1);A.setClearColor(16777215,1),this.updateSelectionCache(),this.changeVisibilityOfSelectedObjects(!1);let K=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,A.setRenderTarget(this.renderTargetDepthBuffer),A.clear(),A.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,A.setRenderTarget(this.renderTargetMaskBuffer),A.clear(),A.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this._selectionCache.clear(),this.renderScene.background=K,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,A.setRenderTarget(this.renderTargetMaskDownSampleBuffer),A.clear(),this.fsQuad.render(A),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){let J=0.625+Math.cos(performance.now()*0.01/this.pulsePeriod)*0.75/2;this.tempPulseColor1.multiplyScalar(J),this.tempPulseColor2.multiplyScalar(J)}if(this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,A.setRenderTarget(this.renderTargetEdgeBuffer1),A.clear(),this.fsQuad.render(A),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=t1.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,A.setRenderTarget(this.renderTargetBlurBuffer1),A.clear(),this.fsQuad.render(A),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=t1.BlurDirectionY,A.setRenderTarget(this.renderTargetEdgeBuffer1),A.clear(),this.fsQuad.render(A),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=t1.BlurDirectionX,A.setRenderTarget(this.renderTargetBlurBuffer2),A.clear(),this.fsQuad.render(A),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=t1.BlurDirectionY,A.setRenderTarget(this.renderTargetEdgeBuffer2),A.clear(),this.fsQuad.render(A),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,I)A.state.buffers.stencil.setTest(!0);A.setRenderTarget(E),this.fsQuad.render(A),A.setClearColor(this._oldClearColor,this.oldClearAlpha),A.autoClear=C}if(this.renderToScreen)this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=E.texture,A.setRenderTarget(null),this.fsQuad.render(A)}getPrepareMaskMaterial(){return new bA({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new AA(0.5,0.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif

					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new bA({uniforms:{maskTexture:{value:null},texSize:{value:new AA(0.5,0.5)},visibleEdgeColor:{value:new y(1,1,1)},hiddenEdgeColor:{value:new y(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeparableBlurMaterial(A){return new bA({defines:{MAX_RADIUS:A},uniforms:{colorTexture:{value:null},texSize:{value:new AA(0.5,0.5)},direction:{value:new AA(0.5,0.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new bA({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:XE,depthTest:!1,depthWrite:!1,transparent:!0})}}t1.BlurDirectionX=new AA(1,0);t1.BlurDirectionY=new AA(0,1);var SK={name:"SAOShader",defines:{NUM_SAMPLES:7,NUM_RINGS:4,DIFFUSE_TEXTURE:0,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new AA(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new RA},cameraInverseProjectionMatrix:{value:new RA},scale:{value:1},intensity:{value:0.1},bias:{value:0.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		#include <common>

		varying vec2 vUv;

		#if DIFFUSE_TEXTURE == 1
		uniform sampler2D tDiffuse;
		#endif

		uniform highp sampler2D tDepth;
		uniform highp sampler2D tNormal;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float scale;
		uniform float intensity;
		uniform float bias;
		uniform float kernelRadius;
		uniform float minResolution;
		uniform vec2 size;
		uniform float randomSeed;

		// RGBA depth

		#include <packing>

		vec4 getDefaultColor( const in vec2 screenPosition ) {
			#if DIFFUSE_TEXTURE == 1
			return texture2D( tDiffuse, vUv );
			#else
			return vec4( 1.0 );
			#endif
		}

		float getDepth( const in vec2 screenPosition ) {
			return texture2D( tDepth, screenPosition ).x;
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {
			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];
			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );
			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;
		}

		vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {
			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );
		}

		float scaleDividedByCameraFar;
		float minResolutionMultipliedByCameraFar;

		float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {
			vec3 viewDelta = sampleViewPosition - centerViewPosition;
			float viewDistance = length( viewDelta );
			float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;

			return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );
		}

		// moving costly divides into consts
		const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );
		const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );

		float getAmbientOcclusion( const in vec3 centerViewPosition ) {
			// precompute some variables require in getOcclusion.
			scaleDividedByCameraFar = scale / cameraFar;
			minResolutionMultipliedByCameraFar = minResolution * cameraFar;
			vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );

			// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/
			float angle = rand( vUv + randomSeed ) * PI2;
			vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;
			vec2 radiusStep = radius;

			float occlusionSum = 0.0;
			float weightSum = 0.0;

			for( int i = 0; i < NUM_SAMPLES; i ++ ) {
				vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;
				radius += radiusStep;
				angle += ANGLE_STEP;

				float sampleDepth = getDepth( sampleUv );
				if( sampleDepth >= ( 1.0 - EPSILON ) ) {
					continue;
				}

				float sampleViewZ = getViewZ( sampleDepth );
				vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );
				occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );
				weightSum += 1.0;
			}

			if( weightSum == 0.0 ) discard;

			return occlusionSum * ( intensity / weightSum );
		}

		void main() {
			float centerDepth = getDepth( vUv );
			if( centerDepth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = getViewZ( centerDepth );
			vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );

			float ambientOcclusion = getAmbientOcclusion( viewPosition );

			gl_FragColor = getDefaultColor( vUv );
			gl_FragColor.xyz *=  1.0 - ambientOcclusion;
		}`};var XI={name:"DepthLimitedBlurShader",defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new AA(512,512)},sampleUvOffsets:{value:[new AA(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1000},depthCutoff:{value:10}},vertexShader:`

		#include <common>

		uniform vec2 size;

		varying vec2 vUv;
		varying vec2 vInvSize;

		void main() {
			vUv = uv;
			vInvSize = 1.0 / size;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		#include <common>
		#include <packing>

		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform float depthCutoff;

		uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];
		uniform float sampleWeights[ KERNEL_RADIUS + 1 ];

		varying vec2 vUv;
		varying vec2 vInvSize;

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		void main() {
			float depth = getDepth( vUv );
			if( depth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = -getViewZ( depth );
			bool rBreak = false, lBreak = false;

			float weightSum = sampleWeights[0];
			vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;

			for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {

				float sampleWeight = sampleWeights[i];
				vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;

				vec2 sampleUv = vUv + sampleUvOffset;
				float viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;

				if( ! rBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

				sampleUv = vUv - sampleUvOffset;
				viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;

				if( ! lBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

			}

			gl_FragColor = diffuseSum / weightSum;
		}`},TK={createSampleWeights:function(A,Q){let E=[];for(let B=0;B<=A;B++)E.push(ES(B,Q));return E},createSampleOffsets:function(A,Q){let E=[];for(let B=0;B<=A;B++)E.push(Q.clone().multiplyScalar(B));return E},configure:function(A,Q,E,B){A.defines.KERNEL_RADIUS=Q,A.uniforms.sampleUvOffsets.value=TK.createSampleOffsets(Q,B),A.uniforms.sampleWeights.value=TK.createSampleWeights(Q,E),A.needsUpdate=!0}};function ES(A,Q){return Math.exp(-(A*A)/(2*(Q*Q)))/(Math.sqrt(2*Math.PI)*Q)}class bU extends s0{constructor(A,Q,E=new AA(256,256)){super();this.scene=A,this.camera=Q,this.clear=!0,this.needsSwap=!1,this.originalClearColor=new a,this._oldClearColor=new a,this.oldClearAlpha=1,this.params={output:0,saoBias:0.5,saoIntensity:0.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:0.01},this.resolution=new AA(E.x,E.y),this.saoRenderTarget=new Q0(this.resolution.x,this.resolution.y,{type:sA}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone();let B=new IE;B.format=oE,B.type=VE,this.normalRenderTarget=new Q0(this.resolution.x,this.resolution.y,{minFilter:Z0,magFilter:Z0,type:sA,depthTexture:B}),this.normalMaterial=new gE,this.normalMaterial.blending=H0,this.saoMaterial=new bA({defines:Object.assign({},SK.defines),fragmentShader:SK.fragmentShader,vertexShader:SK.vertexShader,uniforms:oA.clone(SK.uniforms)}),this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=B,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=H0,this.vBlurMaterial=new bA({uniforms:oA.clone(XI.uniforms),defines:Object.assign({},XI.defines),vertexShader:XI.vertexShader,fragmentShader:XI.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=0,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=B,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=H0,this.hBlurMaterial=new bA({uniforms:oA.clone(XI.uniforms),defines:Object.assign({},XI.defines),vertexShader:XI.vertexShader,fragmentShader:XI.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=0,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=B,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=H0,this.materialCopy=new bA({uniforms:oA.clone(GQ.uniforms),vertexShader:GQ.vertexShader,fragmentShader:GQ.fragmentShader,blending:H0}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=vQ,this.materialCopy.blendSrc=PB,this.materialCopy.blendDst=$E,this.materialCopy.blendEquation=kQ,this.materialCopy.blendSrcAlpha=LE,this.materialCopy.blendDstAlpha=$E,this.materialCopy.blendEquationAlpha=kQ,this.fsQuad=new r0(null)}render(A,Q,E){if(this.renderToScreen)this.materialCopy.blending=H0,this.materialCopy.uniforms.tDiffuse.value=E.texture,this.materialCopy.needsUpdate=!0,this.renderPass(A,this.materialCopy,null);A.getClearColor(this._oldClearColor),this.oldClearAlpha=A.getClearAlpha();let B=A.autoClear;A.autoClear=!1,this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;let I=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);if(this.vBlurMaterial.uniforms.depthCutoff.value=I,this.hBlurMaterial.uniforms.depthCutoff.value=I,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)TK.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new AA(0,1)),TK.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new AA(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius;if(this.renderOverride(A,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(A,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur)this.renderPass(A,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(A,this.hBlurMaterial,this.saoRenderTarget,16777215,1);let C=this.materialCopy;if(this.params.output===bU.OUTPUT.Normal)this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0;else this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0;if(this.params.output===bU.OUTPUT.Default)C.blending=vQ;else C.blending=H0;this.renderPass(A,C,this.renderToScreen?null:E),A.setClearColor(this._oldClearColor,this.oldClearAlpha),A.autoClear=B}renderPass(A,Q,E,B,I){A.getClearColor(this.originalClearColor);let C=A.getClearAlpha(),K=A.autoClear;if(A.setRenderTarget(E),A.autoClear=!1,B!==void 0&&B!==null)A.setClearColor(B),A.setClearAlpha(I||0),A.clear();this.fsQuad.material=Q,this.fsQuad.render(A),A.autoClear=K,A.setClearColor(this.originalClearColor),A.setClearAlpha(C)}renderOverride(A,Q,E,B,I){A.getClearColor(this.originalClearColor);let C=A.getClearAlpha(),K=A.autoClear;if(A.setRenderTarget(E),A.autoClear=!1,B=Q.clearColor||B,I=Q.clearAlpha||I,B!==void 0&&B!==null)A.setClearColor(B),A.setClearAlpha(I||0),A.clear();this.scene.overrideMaterial=Q,A.render(this.scene,this.camera),this.scene.overrideMaterial=null,A.autoClear=K,A.setClearColor(this.originalClearColor),A.setClearAlpha(C)}setSize(A,Q){this.saoRenderTarget.setSize(A,Q),this.blurIntermediateRenderTarget.setSize(A,Q),this.normalRenderTarget.setSize(A,Q),this.saoMaterial.uniforms.size.value.set(A,Q),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(A,Q),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(A,Q),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}}bU.OUTPUT={Default:0,SAO:1,Normal:2};var BS={name:"SMAAEdgesShader",defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new AA(0.0009765625,0.001953125)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		void SMAAEdgeDetectionVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAAEdgeDetectionVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
			vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );

			// Calculate color deltas:
			vec4 delta;
			vec3 C = texture2D( colorTex, texcoord ).rgb;

			vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
			vec3 t = abs( C - Cleft );
			delta.x = max( max( t.r, t.g ), t.b );

			vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
			t = abs( C - Ctop );
			delta.y = max( max( t.r, t.g ), t.b );

			// We do the usual threshold:
			vec2 edges = step( threshold, delta.xy );

			// Then discard if there is no edge:
			if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
				discard;

			// Calculate right and bottom deltas:
			vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
			t = abs( C - Cright );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
			t = abs( C - Cbottom );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the maximum delta in the direct neighborhood:
			float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

			// Calculate left-left and top-top deltas:
			vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
			t = abs( C - Cleftleft );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
			t = abs( C - Ctoptop );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the final maximum delta:
			maxDelta = max( max( maxDelta, delta.z ), delta.w );

			// Local contrast adaptation in action:
			edges.xy *= step( 0.5 * maxDelta, delta.xy );

			return vec4( edges, 0.0, 0.0 );
		}

		void main() {

			gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );

		}`},IS={name:"SMAAWeightsShader",defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new AA(0.0009765625,0.001953125)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];
		varying vec2 vPixcoord;

		void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
			vPixcoord = texcoord / resolution;

			// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components

			// And these for the searches, they indicate the ends of the loops:
			vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );

		}

		void main() {

			vUv = uv;

			SMAABlendingWeightCalculationVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )

		uniform sampler2D tDiffuse;
		uniform sampler2D tArea;
		uniform sampler2D tSearch;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[3];
		varying vec2 vPixcoord;

		#if __VERSION__ == 100
		vec2 round( vec2 x ) {
			return sign( x ) * floor( abs( x ) + 0.5 );
		}
		#endif

		float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
			// Not required if searchTex accesses are set to point:
			// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);
			// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +
			//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;
			e.r = bias + e.r * scale;
			return 255.0 * texture2D( searchTex, e, 0.0 ).r;
		}

		float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			/**
				* @PSEUDO_GATHER4
				* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to
				* sample between edge, thus fetching four edges in a row.
				* Sampling with different offsets in each direction allows to disambiguate
				* which edges are active from the four fetched ones.
				*/
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			// We correct the previous (-0.25, -0.125) offset we applied:
			texcoord.x += 0.25 * resolution.x;

			// The searches are bias by 1, so adjust the coords accordingly:
			texcoord.x += resolution.x;

			// Disambiguate the length added by the last step:
			texcoord.x += 2.0 * resolution.x; // Undo last step
			texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);

			return texcoord.x;
		}

		float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			texcoord.x -= 0.25 * resolution.x;
			texcoord.x -= resolution.x;
			texcoord.x -= 2.0 * resolution.x;
			texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );

			return texcoord.x;
		}

		float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y; // WebGL port note: Changed sign
			texcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y; // WebGL port note: Changed sign
			texcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
			// Rounding prevents precision errors of bilinear filtering:
			vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;

			// We do a scale and bias for mapping to texel space:
			texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );

			// Move to proper place, according to the subpixel offset:
			texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;

			return texture2D( areaTex, texcoord, 0.0 ).rg;
		}

		vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
			vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );

			vec2 e = texture2D( edgesTex, texcoord ).rg;

			if ( e.g > 0.0 ) { // Edge at north
				vec2 d;

				// Find the distance to the left:
				vec2 coords;
				coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
				coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)
				d.x = coords.x;

				// Now fetch the left crossing edges, two at a time using bilinear
				// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to
				// discern what value each edge has:
				float e1 = texture2D( edgesTex, coords, 0.0 ).r;

				// Find the distance to the right:
				coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
				d.y = coords.x;

				// We want the distances to be in pixel units (doing this here allow to
				// better interleave arithmetic and memory accesses):
				d = d / resolution.x - pixcoord.x;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the right crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;

				// Ok, we know how this pattern looks like, now it is time for getting
				// the actual area:
				weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
			}

			if ( e.r > 0.0 ) { // Edge at west
				vec2 d;

				// Find the distance to the top:
				vec2 coords;

				coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
				coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;
				d.x = coords.y;

				// Fetch the top crossing edges:
				float e1 = texture2D( edgesTex, coords, 0.0 ).g;

				// Find the distance to the bottom:
				coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
				d.y = coords.y;

				// We want the distances to be in pixel units:
				d = d / resolution.y - pixcoord.y;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the bottom crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;

				// Get the area for this direction:
				weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
			}

			return weights;
		}

		void main() {

			gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );

		}`},CS={name:"SMAABlendShader",uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new AA(0.0009765625,0.001953125)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAANeighborhoodBlendingVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tColor;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
			// Fetch the blending weights for current pixel:
			vec4 a;
			a.xz = texture2D( blendTex, texcoord ).xz;
			a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
			a.w = texture2D( blendTex, offset[ 1 ].xy ).a;

			// Is there any blending weight with a value greater than 0.0?
			if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
				return texture2D( colorTex, texcoord, 0.0 );
			} else {
				// Up to 4 lines can be crossing a pixel (one through each edge). We
				// favor blending by choosing the line with the maximum weight for each
				// direction:
				vec2 offset;
				offset.x = a.a > a.b ? a.a : -a.b; // left vs. right
				offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs

				// Then we go in the direction that has the maximum weight:
				if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical
					offset.y = 0.0;
				} else {
					offset.x = 0.0;
				}

				// Fetch the opposite color and lerp by hand:
				vec4 C = texture2D( colorTex, texcoord, 0.0 );
				texcoord += sign( offset ) * resolution;
				vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
				float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );

				// WebGL port note: Added gamma correction
				C.xyz = pow(C.xyz, vec3(2.2));
				Cop.xyz = pow(Cop.xyz, vec3(2.2));
				vec4 mixed = mix(C, Cop, s);
				mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));

				return mixed;
			}
		}

		void main() {

			gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );

		}`};var zK={name:"SSAOShader",defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new AA},cameraProjectionMatrix:{value:new RA},cameraInverseProjectionMatrix:{value:new RA},kernelRadius:{value:8},minDistance:{value:0.005},maxDistance:{value:0.05}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform highp sampler2D tNormal;
		uniform highp sampler2D tDepth;
		uniform sampler2D tNoise;

		uniform vec3 kernel[ KERNEL_SIZE ];

		uniform vec2 resolution;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float kernelRadius;
		uniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference
		uniform float maxDistance; // avoid the influence of fragments which are too far away

		varying vec2 vUv;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {

			return texture2D( tDepth, screenPosition ).x;

		}

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		float getViewZ( const in float depth ) {

			#if PERSPECTIVE_CAMERA == 1

				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );

			#else

				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );

			#endif

		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {

			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];

			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );

			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;

		}

		vec3 getViewNormal( const in vec2 screenPosition ) {

			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );

		}

		void main() {

			float depth = getDepth( vUv );

			if ( depth == 1.0 ) {

				gl_FragColor = vec4( 1.0 ); // don't influence background
				
			} else {

				float viewZ = getViewZ( depth );

				vec3 viewPosition = getViewPosition( vUv, depth, viewZ );
				vec3 viewNormal = getViewNormal( vUv );

				vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );
				vec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );

				// compute matrix used to reorient a kernel vector

				vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );
				vec3 bitangent = cross( viewNormal, tangent );
				mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );

				float occlusion = 0.0;

				for ( int i = 0; i < KERNEL_SIZE; i ++ ) {

					vec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space
					vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point

					vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC
					samplePointNDC /= samplePointNDC.w;

					vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates

					float realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture
					float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value
					float delta = sampleDepth - realDepth;

					if ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion

						occlusion += 1.0;

					}

				}

				occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );

				gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );

			}

		}`},PK={name:"SSAODepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );

		}`},VK={name:"SSAOBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new AA}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		void main() {

			vec2 texelSize = ( 1.0 / resolution );
			float result = 0.0;

			for ( int i = - 2; i <= 2; i ++ ) {

				for ( int j = - 2; j <= 2; j ++ ) {

					vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;
					result += texture2D( tDiffuse, vUv + offset ).r;

				}

			}

			gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );

		}`};class e1 extends s0{constructor(A,Q,E,B,I=32){super();this.width=E!==void 0?E:512,this.height=B!==void 0?B:512,this.clear=!0,this.needsSwap=!1,this.camera=Q,this.scene=A,this.kernelRadius=8,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=0.005,this.maxDistance=0.1,this._visibilityCache=/*@__PURE__*/new Map,this.generateSampleKernel(I),this.generateRandomKernelRotations();let C=new IE;C.format=oE,C.type=VE,this.normalRenderTarget=new Q0(this.width,this.height,{minFilter:Z0,magFilter:Z0,type:sA,depthTexture:C}),this.ssaoRenderTarget=new Q0(this.width,this.height,{type:sA}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new bA({defines:Object.assign({},zK.defines),uniforms:oA.clone(zK.uniforms),vertexShader:zK.vertexShader,fragmentShader:zK.fragmentShader,blending:H0}),this.ssaoMaterial.defines.KERNEL_SIZE=I,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new gE,this.normalMaterial.blending=H0,this.blurMaterial=new bA({defines:Object.assign({},VK.defines),uniforms:oA.clone(VK.uniforms),vertexShader:VK.vertexShader,fragmentShader:VK.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new bA({defines:Object.assign({},PK.defines),uniforms:oA.clone(PK.uniforms),vertexShader:PK.vertexShader,fragmentShader:PK.fragmentShader,blending:H0}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new bA({uniforms:oA.clone(GQ.uniforms),vertexShader:GQ.vertexShader,fragmentShader:GQ.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:PB,blendDst:$E,blendEquation:kQ,blendSrcAlpha:LE,blendDstAlpha:$E,blendEquationAlpha:kQ}),this.fsQuad=new r0(null),this.originalClearColor=new a}dispose(){this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(A,Q,E){switch(this.overrideVisibility(),this.renderOverride(A,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(A,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(A,this.blurMaterial,this.blurRenderTarget),this.output){case e1.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:E);break;case e1.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:E);break;case e1.OUTPUT.Depth:this.renderPass(A,this.depthRenderMaterial,this.renderToScreen?null:E);break;case e1.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:E);break;case e1.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=vQ,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:E);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(A,Q,E,B,I){A.getClearColor(this.originalClearColor);let C=A.getClearAlpha(),K=A.autoClear;if(A.setRenderTarget(E),A.autoClear=!1,B!==void 0&&B!==null)A.setClearColor(B),A.setClearAlpha(I||0),A.clear();this.fsQuad.material=Q,this.fsQuad.render(A),A.autoClear=K,A.setClearColor(this.originalClearColor),A.setClearAlpha(C)}renderOverride(A,Q,E,B,I){A.getClearColor(this.originalClearColor);let C=A.getClearAlpha(),K=A.autoClear;if(A.setRenderTarget(E),A.autoClear=!1,B=Q.clearColor||B,I=Q.clearAlpha||I,B!==void 0&&B!==null)A.setClearColor(B),A.setClearAlpha(I||0),A.clear();this.scene.overrideMaterial=Q,A.render(this.scene,this.camera),this.scene.overrideMaterial=null,A.autoClear=K,A.setClearColor(this.originalClearColor),A.setClearAlpha(C)}setSize(A,Q){this.width=A,this.height=Q,this.ssaoRenderTarget.setSize(A,Q),this.normalRenderTarget.setSize(A,Q),this.blurRenderTarget.setSize(A,Q),this.ssaoMaterial.uniforms.resolution.value.set(A,Q),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(A,Q)}generateSampleKernel(A){let Q=this.kernel;for(let E=0;E<A;E++){let B=new y;B.x=Math.random()*2-1,B.y=Math.random()*2-1,B.z=Math.random(),B.normalize();let I=E/A;I=o0.lerp(0.1,1,I*I),B.multiplyScalar(I),Q.push(B)}}generateRandomKernelRotations(){let E=new MK,B=16,I=new Float32Array(16);for(let C=0;C<16;C++){let K=Math.random()*2-1,J=Math.random()*2-1,U=0;I[C]=E.noise3d(K,J,0)}this.noiseTexture=new h0(I,4,4,SQ,m0),this.noiseTexture.wrapS=BQ,this.noiseTexture.wrapT=BQ,this.noiseTexture.needsUpdate=!0}overrideVisibility(){let A=this.scene,Q=this._visibilityCache;A.traverse(function(E){if(Q.set(E,E.visible),E.isPoints||E.isLine)E.visible=!1})}restoreVisibility(){let A=this.scene,Q=this._visibilityCache;A.traverse(function(E){let B=Q.get(E);E.visible=B}),Q.clear()}}e1.OUTPUT={Default:0,SSAO:1,Blur:2,Depth:3,Normal:4};var kB={name:"SSRShader",defines:{MAX_STEP:0,PERSPECTIVE_CAMERA:!0,DISTANCE_ATTENUATION:!0,FRESNEL:!0,INFINITE_THICK:!1,SELECTIVE:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new AA},cameraProjectionMatrix:{value:new RA},cameraInverseProjectionMatrix:{value:new RA},opacity:{value:0.5},maxDistance:{value:180},cameraRange:{value:0},thickness:{value:0.018}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float thickness;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef PERSPECTIVE_CAMERA
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef SELECTIVE
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef PERSPECTIVE_CAMERA
				vec3 viewIncidentDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#else
				vec3 viewIncidentDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidentDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef PERSPECTIVE_CAMERA
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<float(MAX_STEP);i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef PERSPECTIVE_CAMERA
					// https://comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
				#endif

				// if(viewReflectRayZ>vZ) continue; // will cause "npm run make-screenshot webgl_postprocessing_ssr" high probability hang.
				// https://github.com/mrdoob/three.js/pull/21539#issuecomment-821061164
				if(viewReflectRayZ<=vZ){

					bool hit;
					#ifdef INFINITE_THICK
						hit=true;
					#else
						float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

						float minThickness;
						vec2 xyNeighbor=xy;
						xyNeighbor.x+=1.;
						vec2 uvNeighbor=xyNeighbor/resolution;
						vec3 vPNeighbor=getViewPosition(uvNeighbor,d,cW);
						minThickness=vPNeighbor.x-vP.x;
						minThickness*=3.;
						float tk=max(minThickness,thickness);

						hit=away<=tk;
					#endif

					if(hit){
						vec3 vN=getViewNormal( uv );
						if(dot(viewReflectDir,vN)>=0.) continue;
						float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
						if(distance>maxDistance) break;
						float op=opacity;
						#ifdef DISTANCE_ATTENUATION
							float ratio=1.-(distance/maxDistance);
							float attenuation=ratio*ratio;
							op=opacity*attenuation;
						#endif
						#ifdef FRESNEL
							float fresnelCoe=(dot(viewIncidentDir,viewReflectDir)+1.)/2.;
							op*=fresnelCoe;
						#endif
						vec4 reflectColor=texture2D(tDiffuse,uv);
						gl_FragColor.xyz=reflectColor.xyz;
						gl_FragColor.a=op;
						break;
					}
				}
			}
		}
	`},jK={name:"SSRDepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
			gl_FragColor = vec4( vec3( d ), 1.0 );

		}

	`},$I={name:"SSRBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new AA},opacity:{value:0.5}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;
		void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

			vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`};class iI extends s0{constructor({renderer:A,scene:Q,camera:E,width:B,height:I,selects:C,bouncing:K=!1,groundReflector:J}){super();this.width=B!==void 0?B:512,this.height=I!==void 0?I:512,this.clear=!0,this.renderer=A,this.scene=Q,this.camera=E,this.groundReflector=J,this.opacity=kB.uniforms.opacity.value,this.output=0,this.maxDistance=kB.uniforms.maxDistance.value,this.thickness=kB.uniforms.thickness.value,this.tempColor=new a,this._selects=C,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(Y){if(this._selects===Y)return;if(this._selects=Y,Array.isArray(Y))this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0;else this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0}}),this._bouncing=K,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(Y){if(this._bouncing===Y)return;if(this._bouncing=Y,Y)this.ssrMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture;else this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture}}),this.blur=!0,this._distanceAttenuation=kB.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(Y){if(this._distanceAttenuation===Y)return;this._distanceAttenuation=Y,this.ssrMaterial.defines.DISTANCE_ATTENUATION=Y,this.ssrMaterial.needsUpdate=!0}}),this._fresnel=kB.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(Y){if(this._fresnel===Y)return;this._fresnel=Y,this.ssrMaterial.defines.FRESNEL=Y,this.ssrMaterial.needsUpdate=!0}}),this._infiniteThick=kB.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(Y){if(this._infiniteThick===Y)return;this._infiniteThick=Y,this.ssrMaterial.defines.INFINITE_THICK=Y,this.ssrMaterial.needsUpdate=!0}});let U=new IE;U.type=hB,U.minFilter=Z0,U.magFilter=Z0,this.beautyRenderTarget=new Q0(this.width,this.height,{minFilter:Z0,magFilter:Z0,type:sA,depthTexture:U,depthBuffer:!0}),this.prevRenderTarget=new Q0(this.width,this.height,{minFilter:Z0,magFilter:Z0}),this.normalRenderTarget=new Q0(this.width,this.height,{minFilter:Z0,magFilter:Z0,type:sA}),this.metalnessRenderTarget=new Q0(this.width,this.height,{minFilter:Z0,magFilter:Z0,type:sA}),this.ssrRenderTarget=new Q0(this.width,this.height,{minFilter:Z0,magFilter:Z0}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new bA({defines:Object.assign({},kB.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:oA.clone(kB.uniforms),vertexShader:kB.vertexShader,fragmentShader:kB.fragmentShader,blending:H0}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new gE,this.normalMaterial.blending=H0,this.metalnessOnMaterial=new _0({color:"white"}),this.metalnessOffMaterial=new _0({color:"black"}),this.blurMaterial=new bA({defines:Object.assign({},$I.defines),uniforms:oA.clone($I.uniforms),vertexShader:$I.vertexShader,fragmentShader:$I.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new bA({defines:Object.assign({},$I.defines),uniforms:oA.clone($I.uniforms),vertexShader:$I.vertexShader,fragmentShader:$I.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new bA({defines:Object.assign({},jK.defines),uniforms:oA.clone(jK.uniforms),vertexShader:jK.vertexShader,fragmentShader:jK.fragmentShader,blending:H0}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new bA({uniforms:oA.clone(GQ.uniforms),vertexShader:GQ.vertexShader,fragmentShader:GQ.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:EE,blendDst:iE,blendEquation:kQ,blendSrcAlpha:EE,blendDstAlpha:iE,blendEquationAlpha:kQ}),this.fsQuad=new r0(null),this.originalClearColor=new a}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(A,Q){if(A.setRenderTarget(this.beautyRenderTarget),A.clear(),this.groundReflector)this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0;if(A.render(this.scene,this.camera),this.groundReflector)this.groundReflector.visible=!1;if(this.renderOverride(A,this.normalMaterial,this.normalRenderTarget,0,0),this.selective)this.renderMetalness(A,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0);if(this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(A,this.ssrMaterial,this.ssrRenderTarget),this.blur)this.renderPass(A,this.blurMaterial,this.blurRenderTarget),this.renderPass(A,this.blurMaterial2,this.blurRenderTarget2);switch(this.output){case iI.OUTPUT.Default:if(this.bouncing){if(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.prevRenderTarget),this.blur)this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture;else this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture;this.copyMaterial.blending=zB,this.renderPass(A,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q)}else{if(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q),this.blur)this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture;else this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture;this.copyMaterial.blending=zB,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q)}break;case iI.OUTPUT.SSR:if(this.blur)this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture;else this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture;if(this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q),this.bouncing){if(this.blur)this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture;else this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture;this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=zB,this.renderPass(A,this.copyMaterial,this.prevRenderTarget)}break;case iI.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q);break;case iI.OUTPUT.Depth:this.renderPass(A,this.depthRenderMaterial,this.renderToScreen?null:Q);break;case iI.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q);break;case iI.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=H0,this.renderPass(A,this.copyMaterial,this.renderToScreen?null:Q);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(A,Q,E,B,I){this.originalClearColor.copy(A.getClearColor(this.tempColor));let C=A.getClearAlpha(this.tempColor),K=A.autoClear;if(A.setRenderTarget(E),A.autoClear=!1,B!==void 0&&B!==null)A.setClearColor(B),A.setClearAlpha(I||0),A.clear();this.fsQuad.material=Q,this.fsQuad.render(A),A.autoClear=K,A.setClearColor(this.originalClearColor),A.setClearAlpha(C)}renderOverride(A,Q,E,B,I){this.originalClearColor.copy(A.getClearColor(this.tempColor));let C=A.getClearAlpha(this.tempColor),K=A.autoClear;if(A.setRenderTarget(E),A.autoClear=!1,B=Q.clearColor||B,I=Q.clearAlpha||I,B!==void 0&&B!==null)A.setClearColor(B),A.setClearAlpha(I||0),A.clear();this.scene.overrideMaterial=Q,A.render(this.scene,this.camera),this.scene.overrideMaterial=null,A.autoClear=K,A.setClearColor(this.originalClearColor),A.setClearAlpha(C)}renderMetalness(A,Q,E,B,I){this.originalClearColor.copy(A.getClearColor(this.tempColor));let C=A.getClearAlpha(this.tempColor),K=A.autoClear,J=this.scene.background,U=this.scene.fog;if(A.setRenderTarget(E),A.autoClear=!1,this.scene.background=null,this.scene.fog=null,B=Q.clearColor||B,I=Q.clearAlpha||I,B!==void 0&&B!==null)A.setClearColor(B),A.setClearAlpha(I||0),A.clear();this.scene.traverseVisible((Y)=>{if(Y._SSRPassBackupMaterial=Y.material,this._selects.includes(Y))Y.material=this.metalnessOnMaterial;else Y.material=this.metalnessOffMaterial}),A.render(this.scene,this.camera),this.scene.traverseVisible((Y)=>{Y.material=Y._SSRPassBackupMaterial}),A.autoClear=K,A.setClearColor(this.originalClearColor),A.setClearAlpha(C),this.scene.background=J,this.scene.fog=U}setSize(A,Q){this.width=A,this.height=Q,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(A*A+Q*Q),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(A,Q),this.prevRenderTarget.setSize(A,Q),this.ssrRenderTarget.setSize(A,Q),this.normalRenderTarget.setSize(A,Q),this.metalnessRenderTarget.setSize(A,Q),this.blurRenderTarget.setSize(A,Q),this.blurRenderTarget2.setSize(A,Q),this.ssrMaterial.uniforms.resolution.value.set(A,Q),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(A,Q),this.blurMaterial2.uniforms.resolution.value.set(A,Q)}}iI.OUTPUT={Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7};var vX={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new a(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class vK extends s0{constructor(A,Q,E,B){super();this.strength=Q!==void 0?Q:1,this.radius=E,this.threshold=B,this.resolution=A!==void 0?new AA(A.x,A.y):new AA(256,256),this.clearColor=new a(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let I=Math.round(this.resolution.x/2),C=Math.round(this.resolution.y/2);this.renderTargetBright=new Q0(I,C,{type:sA}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let H=0;H<this.nMips;H++){let R=new Q0(I,C,{type:sA});R.texture.name="UnrealBloomPass.h"+H,R.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(R);let O=new Q0(I,C,{type:sA});O.texture.name="UnrealBloomPass.v"+H,O.texture.generateMipmaps=!1,this.renderTargetsVertical.push(O),I=Math.round(I/2),C=Math.round(C/2)}let K=vX;this.highPassUniforms=oA.clone(K.uniforms),this.highPassUniforms.luminosityThreshold.value=B,this.highPassUniforms.smoothWidth.value=0.01,this.materialHighPassFilter=new bA({uniforms:this.highPassUniforms,vertexShader:K.vertexShader,fragmentShader:K.fragmentShader}),this.separableBlurMaterials=[];let J=[3,5,7,9,11];I=Math.round(this.resolution.x/2),C=Math.round(this.resolution.y/2);for(let H=0;H<this.nMips;H++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(J[H])),this.separableBlurMaterials[H].uniforms.invSize.value=new AA(1/I,1/C),I=Math.round(I/2),C=Math.round(C/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=Q,this.compositeMaterial.uniforms.bloomRadius.value=0.1;let U=[1,0.8,0.6,0.4,0.2];this.compositeMaterial.uniforms.bloomFactors.value=U,this.bloomTintColors=[new y(1,1,1),new y(1,1,1),new y(1,1,1),new y(1,1,1),new y(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;let Y=GQ;this.copyUniforms=oA.clone(Y.uniforms),this.blendMaterial=new bA({uniforms:this.copyUniforms,vertexShader:Y.vertexShader,fragmentShader:Y.fragmentShader,blending:XE,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new a,this.oldClearAlpha=1,this.basic=new _0,this.fsQuad=new r0(null)}dispose(){for(let A=0;A<this.renderTargetsHorizontal.length;A++)this.renderTargetsHorizontal[A].dispose();for(let A=0;A<this.renderTargetsVertical.length;A++)this.renderTargetsVertical[A].dispose();this.renderTargetBright.dispose();for(let A=0;A<this.separableBlurMaterials.length;A++)this.separableBlurMaterials[A].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(A,Q){let E=Math.round(A/2),B=Math.round(Q/2);this.renderTargetBright.setSize(E,B);for(let I=0;I<this.nMips;I++)this.renderTargetsHorizontal[I].setSize(E,B),this.renderTargetsVertical[I].setSize(E,B),this.separableBlurMaterials[I].uniforms.invSize.value=new AA(1/E,1/B),E=Math.round(E/2),B=Math.round(B/2)}render(A,Q,E,B,I){A.getClearColor(this._oldClearColor),this.oldClearAlpha=A.getClearAlpha();let C=A.autoClear;if(A.autoClear=!1,A.setClearColor(this.clearColor,0),I)A.state.buffers.stencil.setTest(!1);if(this.renderToScreen)this.fsQuad.material=this.basic,this.basic.map=E.texture,A.setRenderTarget(null),A.clear(),this.fsQuad.render(A);this.highPassUniforms.tDiffuse.value=E.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,A.setRenderTarget(this.renderTargetBright),A.clear(),this.fsQuad.render(A);let K=this.renderTargetBright;for(let J=0;J<this.nMips;J++)this.fsQuad.material=this.separableBlurMaterials[J],this.separableBlurMaterials[J].uniforms.colorTexture.value=K.texture,this.separableBlurMaterials[J].uniforms.direction.value=vK.BlurDirectionX,A.setRenderTarget(this.renderTargetsHorizontal[J]),A.clear(),this.fsQuad.render(A),this.separableBlurMaterials[J].uniforms.colorTexture.value=this.renderTargetsHorizontal[J].texture,this.separableBlurMaterials[J].uniforms.direction.value=vK.BlurDirectionY,A.setRenderTarget(this.renderTargetsVertical[J]),A.clear(),this.fsQuad.render(A),K=this.renderTargetsVertical[J];if(this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,A.setRenderTarget(this.renderTargetsHorizontal[0]),A.clear(),this.fsQuad.render(A),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,I)A.state.buffers.stencil.setTest(!0);if(this.renderToScreen)A.setRenderTarget(null),this.fsQuad.render(A);else A.setRenderTarget(E),this.fsQuad.render(A);A.setClearColor(this._oldClearColor,this.oldClearAlpha),A.autoClear=C}getSeparableBlurMaterial(A){let Q=[];for(let E=0;E<A;E++)Q.push(0.39894*Math.exp(-0.5*E*E/(A*A))/A);return new bA({defines:{KERNEL_RADIUS:A},uniforms:{colorTexture:{value:null},invSize:{value:new AA(0.5,0.5)},direction:{value:new AA(0.5,0.5)},gaussianCoefficients:{value:Q}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(A){return new bA({defines:{NUM_MIPS:A},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}vK.BlurDirectionX=new AA(1,0);vK.BlurDirectionY=new AA(0,1);var $m=new y,Lm=new RA,qm=new RA,Fm=new y,Dm=new y;var _m=new y,km=new J0,Sm=new y;var Tm=new RA,zm=new RA;var KS={name:"BokehShader",uniforms:{textureWidth:{value:1},textureHeight:{value:1},focalDepth:{value:1},focalLength:{value:24},fstop:{value:0.9},tColor:{value:null},tDepth:{value:null},maxblur:{value:1},showFocus:{value:0},manualdof:{value:0},vignetting:{value:0},depthblur:{value:0},threshold:{value:0.5},gain:{value:2},bias:{value:0.5},fringe:{value:0.7},znear:{value:0.1},zfar:{value:100},noise:{value:1},dithering:{value:0.0001},pentagon:{value:0},shaderFocus:{value:1},focusCoords:{value:new AA}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		varying vec2 vUv;

		uniform sampler2D tColor;
		uniform sampler2D tDepth;
		uniform float textureWidth;
		uniform float textureHeight;

		uniform float focalDepth;  //focal distance value in meters, but you may use autofocus option below
		uniform float focalLength; //focal length in mm
		uniform float fstop; //f-stop value
		uniform bool showFocus; //show debug focus point and focal range (red = focal point, green = focal range)

		/*
		make sure that these two values are the same for your camera, otherwise distances will be wrong.
		*/

		uniform float znear; // camera clipping start
		uniform float zfar; // camera clipping end

		//------------------------------------------
		//user variables

		const int samples = SAMPLES; //samples on the first ring
		const int rings = RINGS; //ring count

		const int maxringsamples = rings * samples;

		uniform bool manualdof; // manual dof calculation
		float ndofstart = 1.0; // near dof blur start
		float ndofdist = 2.0; // near dof blur falloff distance
		float fdofstart = 1.0; // far dof blur start
		float fdofdist = 3.0; // far dof blur falloff distance

		float CoC = 0.03; //circle of confusion size in mm (35mm film = 0.03mm)

		uniform bool vignetting; // use optical lens vignetting

		float vignout = 1.3; // vignetting outer border
		float vignin = 0.0; // vignetting inner border
		float vignfade = 22.0; // f-stops till vignette fades

		uniform bool shaderFocus;
		// disable if you use external focalDepth value

		uniform vec2 focusCoords;
		// autofocus point on screen (0.0,0.0 - left lower corner, 1.0,1.0 - upper right)
		// if center of screen use vec2(0.5, 0.5);

		uniform float maxblur;
		//clamp value of max blur (0.0 = no blur, 1.0 default)

		uniform float threshold; // highlight threshold;
		uniform float gain; // highlight gain;

		uniform float bias; // bokeh edge bias
		uniform float fringe; // bokeh chromatic aberration / fringing

		uniform bool noise; //use noise instead of pattern for sample dithering

		uniform float dithering;

		uniform bool depthblur; // blur the depth buffer
		float dbsize = 1.25; // depth blur size

		/*
		next part is experimental
		not looking good with small sample and ring count
		looks okay starting from samples = 4, rings = 4
		*/

		uniform bool pentagon; //use pentagon as bokeh shape?
		float feather = 0.4; //pentagon shape feather

		//------------------------------------------

		float penta(vec2 coords) {
			//pentagonal shape
			float scale = float(rings) - 1.3;
			vec4  HS0 = vec4( 1.0,         0.0,         0.0,  1.0);
			vec4  HS1 = vec4( 0.309016994, 0.951056516, 0.0,  1.0);
			vec4  HS2 = vec4(-0.809016994, 0.587785252, 0.0,  1.0);
			vec4  HS3 = vec4(-0.809016994,-0.587785252, 0.0,  1.0);
			vec4  HS4 = vec4( 0.309016994,-0.951056516, 0.0,  1.0);
			vec4  HS5 = vec4( 0.0        ,0.0         , 1.0,  1.0);

			vec4  one = vec4( 1.0 );

			vec4 P = vec4((coords),vec2(scale, scale));

			vec4 dist = vec4(0.0);
			float inorout = -4.0;

			dist.x = dot( P, HS0 );
			dist.y = dot( P, HS1 );
			dist.z = dot( P, HS2 );
			dist.w = dot( P, HS3 );

			dist = smoothstep( -feather, feather, dist );

			inorout += dot( dist, one );

			dist.x = dot( P, HS4 );
			dist.y = HS5.w - abs( P.z );

			dist = smoothstep( -feather, feather, dist );
			inorout += dist.x;

			return clamp( inorout, 0.0, 1.0 );
		}

		float bdepth(vec2 coords) {
			// Depth buffer blur
			float d = 0.0;
			float kernel[9];
			vec2 offset[9];

			vec2 wh = vec2(1.0/textureWidth,1.0/textureHeight) * dbsize;

			offset[0] = vec2(-wh.x,-wh.y);
			offset[1] = vec2( 0.0, -wh.y);
			offset[2] = vec2( wh.x -wh.y);

			offset[3] = vec2(-wh.x,  0.0);
			offset[4] = vec2( 0.0,   0.0);
			offset[5] = vec2( wh.x,  0.0);

			offset[6] = vec2(-wh.x, wh.y);
			offset[7] = vec2( 0.0,  wh.y);
			offset[8] = vec2( wh.x, wh.y);

			kernel[0] = 1.0/16.0;   kernel[1] = 2.0/16.0;   kernel[2] = 1.0/16.0;
			kernel[3] = 2.0/16.0;   kernel[4] = 4.0/16.0;   kernel[5] = 2.0/16.0;
			kernel[6] = 1.0/16.0;   kernel[7] = 2.0/16.0;   kernel[8] = 1.0/16.0;


			for( int i=0; i<9; i++ ) {
				float tmp = texture2D(tDepth, coords + offset[i]).r;
				d += tmp * kernel[i];
			}

			return d;
		}


		vec3 color(vec2 coords,float blur) {
			//processing the sample

			vec3 col = vec3(0.0);
			vec2 texel = vec2(1.0/textureWidth,1.0/textureHeight);

			col.r = texture2D(tColor,coords + vec2(0.0,1.0)*texel*fringe*blur).r;
			col.g = texture2D(tColor,coords + vec2(-0.866,-0.5)*texel*fringe*blur).g;
			col.b = texture2D(tColor,coords + vec2(0.866,-0.5)*texel*fringe*blur).b;

			vec3 lumcoeff = vec3(0.299,0.587,0.114);
			float lum = dot(col.rgb, lumcoeff);
			float thresh = max((lum-threshold)*gain, 0.0);
			return col+mix(vec3(0.0),col,thresh*blur);
		}

		vec3 debugFocus(vec3 col, float blur, float depth) {
			float edge = 0.002*depth; //distance based edge smoothing
			float m = clamp(smoothstep(0.0,edge,blur),0.0,1.0);
			float e = clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);

			col = mix(col,vec3(1.0,0.5,0.0),(1.0-m)*0.6);
			col = mix(col,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);

			return col;
		}

		float linearize(float depth) {
			return -zfar * znear / (depth * (zfar - znear) - zfar);
		}

		float vignette() {
			float dist = distance(vUv.xy, vec2(0.5,0.5));
			dist = smoothstep(vignout+(fstop/vignfade), vignin+(fstop/vignfade), dist);
			return clamp(dist,0.0,1.0);
		}

		float gather(float i, float j, int ringsamples, inout vec3 col, float w, float h, float blur) {
			float rings2 = float(rings);
			float step = PI*2.0 / float(ringsamples);
			float pw = cos(j*step)*i;
			float ph = sin(j*step)*i;
			float p = 1.0;
			if (pentagon) {
				p = penta(vec2(pw,ph));
			}
			col += color(vUv.xy + vec2(pw*w,ph*h), blur) * mix(1.0, i/rings2, bias) * p;
			return 1.0 * mix(1.0, i /rings2, bias) * p;
		}

		void main() {
			//scene depth calculation

			float depth = linearize(texture2D(tDepth,vUv.xy).x);

			// Blur depth?
			if ( depthblur ) {
				depth = linearize(bdepth(vUv.xy));
			}

			//focal plane calculation

			float fDepth = focalDepth;

			if (shaderFocus) {

				fDepth = linearize(texture2D(tDepth,focusCoords).x);

			}

			// dof blur factor calculation

			float blur = 0.0;

			if (manualdof) {
				float a = depth-fDepth; // Focal plane
				float b = (a-fdofstart)/fdofdist; // Far DoF
				float c = (-a-ndofstart)/ndofdist; // Near Dof
				blur = (a>0.0) ? b : c;
			} else {
				float f = focalLength; // focal length in mm
				float d = fDepth*1000.0; // focal plane in mm
				float o = depth*1000.0; // depth in mm

				float a = (o*f)/(o-f);
				float b = (d*f)/(d-f);
				float c = (d-f)/(d*fstop*CoC);

				blur = abs(a-b)*c;
			}

			blur = clamp(blur,0.0,1.0);

			// calculation of pattern for dithering

			vec2 noise = vec2(rand(vUv.xy), rand( vUv.xy + vec2( 0.4, 0.6 ) ) )*dithering*blur;

			// getting blur x and y step factor

			float w = (1.0/textureWidth)*blur*maxblur+noise.x;
			float h = (1.0/textureHeight)*blur*maxblur+noise.y;

			// calculation of final color

			vec3 col = vec3(0.0);

			if(blur < 0.05) {
				//some optimization thingy
				col = texture2D(tColor, vUv.xy).rgb;
			} else {
				col = texture2D(tColor, vUv.xy).rgb;
				float s = 1.0;
				int ringsamples;

				for (int i = 1; i <= rings; i++) {
					/*unboxstart*/
					ringsamples = i * samples;

					for (int j = 0 ; j < maxringsamples ; j++) {
						if (j >= ringsamples) break;
						s += gather(float(i), float(j), ringsamples, col, w, h, blur);
					}
					/*unboxend*/
				}

				col /= s; //divide by sample count
			}

			if (showFocus) {
				col = debugFocus(col, blur, depth);
			}

			if (vignetting) {
				col *= vignette();
			}

			gl_FragColor.rgb = col;
			gl_FragColor.a = 1.0;

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
		}`};var im={name:"ColorCorrectionShader",uniforms:{tDiffuse:{value:null},powRGB:{value:new y(2,2,2)},mulRGB:{value:new y(1,1,1)},addRGB:{value:new y(0,0,0)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 powRGB;
		uniform vec3 mulRGB;
		uniform vec3 addRGB;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.rgb = mulRGB * pow( ( gl_FragColor.rgb + addRGB ), powRGB );

		}`};var am={name:"ColorifyShader",uniforms:{tDiffuse:{value:null},color:{value:new a(16777215)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			gl_FragColor = vec4( v * color, texel.w );

		}`};var Ec={name:"FXAAShader",uniforms:{tDiffuse:{value:null},resolution:{value:new AA(0.0009765625,0.001953125)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		// FXAA algorithm from NVIDIA, C# implementation by Jasper Flick, GLSL port by Dave Hoskins
		// http://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf
		// https://catlikecoding.com/unity/tutorials/advanced-rendering/fxaa/

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;

		#define EDGE_STEP_COUNT 6
		#define EDGE_GUESS 8.0
		#define EDGE_STEPS 1.0, 1.5, 2.0, 2.0, 2.0, 4.0
		const float edgeSteps[EDGE_STEP_COUNT] = float[EDGE_STEP_COUNT]( EDGE_STEPS );

		float _ContrastThreshold = 0.0312;
		float _RelativeThreshold = 0.063;
		float _SubpixelBlending = 1.0;

		vec4 Sample( sampler2D  tex2D, vec2 uv ) {

			return texture( tex2D, uv );

		}

		float SampleLuminance( sampler2D tex2D, vec2 uv ) {

			return dot( Sample( tex2D, uv ).rgb, vec3( 0.3, 0.59, 0.11 ) );

		}

		float SampleLuminance( sampler2D tex2D, vec2 texSize, vec2 uv, float uOffset, float vOffset ) {

			uv += texSize * vec2(uOffset, vOffset);
			return SampleLuminance(tex2D, uv);

		}

		struct LuminanceData {

			float m, n, e, s, w;
			float ne, nw, se, sw;
			float highest, lowest, contrast;

		};

		LuminanceData SampleLuminanceNeighborhood( sampler2D tex2D, vec2 texSize, vec2 uv ) {

			LuminanceData l;
			l.m = SampleLuminance( tex2D, uv );
			l.n = SampleLuminance( tex2D, texSize, uv,  0.0,  1.0 );
			l.e = SampleLuminance( tex2D, texSize, uv,  1.0,  0.0 );
			l.s = SampleLuminance( tex2D, texSize, uv,  0.0, -1.0 );
			l.w = SampleLuminance( tex2D, texSize, uv, -1.0,  0.0 );

			l.ne = SampleLuminance( tex2D, texSize, uv,  1.0,  1.0 );
			l.nw = SampleLuminance( tex2D, texSize, uv, -1.0,  1.0 );
			l.se = SampleLuminance( tex2D, texSize, uv,  1.0, -1.0 );
			l.sw = SampleLuminance( tex2D, texSize, uv, -1.0, -1.0 );

			l.highest = max( max( max( max( l.n, l.e ), l.s ), l.w ), l.m );
			l.lowest = min( min( min( min( l.n, l.e ), l.s ), l.w ), l.m );
			l.contrast = l.highest - l.lowest;
			return l;

		}

		bool ShouldSkipPixel( LuminanceData l ) {

			float threshold = max( _ContrastThreshold, _RelativeThreshold * l.highest );
			return l.contrast < threshold;

		}

		float DeterminePixelBlendFactor( LuminanceData l ) {

			float f = 2.0 * ( l.n + l.e + l.s + l.w );
			f += l.ne + l.nw + l.se + l.sw;
			f *= 1.0 / 12.0;
			f = abs( f - l.m );
			f = clamp( f / l.contrast, 0.0, 1.0 );

			float blendFactor = smoothstep( 0.0, 1.0, f );
			return blendFactor * blendFactor * _SubpixelBlending;

		}

		struct EdgeData {

			bool isHorizontal;
			float pixelStep;
			float oppositeLuminance, gradient;

		};

		EdgeData DetermineEdge( vec2 texSize, LuminanceData l ) {

			EdgeData e;
			float horizontal =
				abs( l.n + l.s - 2.0 * l.m ) * 2.0 +
				abs( l.ne + l.se - 2.0 * l.e ) +
				abs( l.nw + l.sw - 2.0 * l.w );
			float vertical =
				abs( l.e + l.w - 2.0 * l.m ) * 2.0 +
				abs( l.ne + l.nw - 2.0 * l.n ) +
				abs( l.se + l.sw - 2.0 * l.s );
			e.isHorizontal = horizontal >= vertical;

			float pLuminance = e.isHorizontal ? l.n : l.e;
			float nLuminance = e.isHorizontal ? l.s : l.w;
			float pGradient = abs( pLuminance - l.m );
			float nGradient = abs( nLuminance - l.m );

			e.pixelStep = e.isHorizontal ? texSize.y : texSize.x;
			
			if (pGradient < nGradient) {

				e.pixelStep = -e.pixelStep;
				e.oppositeLuminance = nLuminance;
				e.gradient = nGradient;

			} else {

				e.oppositeLuminance = pLuminance;
				e.gradient = pGradient;

			}

			return e;

		}

		float DetermineEdgeBlendFactor( sampler2D  tex2D, vec2 texSize, LuminanceData l, EdgeData e, vec2 uv ) {

			vec2 uvEdge = uv;
			vec2 edgeStep;
			if (e.isHorizontal) {

				uvEdge.y += e.pixelStep * 0.5;
				edgeStep = vec2( texSize.x, 0.0 );

			} else {

				uvEdge.x += e.pixelStep * 0.5;
				edgeStep = vec2( 0.0, texSize.y );

			}

			float edgeLuminance = ( l.m + e.oppositeLuminance ) * 0.5;
			float gradientThreshold = e.gradient * 0.25;

			vec2 puv = uvEdge + edgeStep * edgeSteps[0];
			float pLuminanceDelta = SampleLuminance( tex2D, puv ) - edgeLuminance;
			bool pAtEnd = abs( pLuminanceDelta ) >= gradientThreshold;

			for ( int i = 1; i < EDGE_STEP_COUNT && !pAtEnd; i++ ) {

				puv += edgeStep * edgeSteps[i];
				pLuminanceDelta = SampleLuminance( tex2D, puv ) - edgeLuminance;
				pAtEnd = abs( pLuminanceDelta ) >= gradientThreshold;

			}

			if ( !pAtEnd ) {

				puv += edgeStep * EDGE_GUESS;

			}

			vec2 nuv = uvEdge - edgeStep * edgeSteps[0];
			float nLuminanceDelta = SampleLuminance( tex2D, nuv ) - edgeLuminance;
			bool nAtEnd = abs( nLuminanceDelta ) >= gradientThreshold;

			for ( int i = 1; i < EDGE_STEP_COUNT && !nAtEnd; i++ ) {

				nuv -= edgeStep * edgeSteps[i];
				nLuminanceDelta = SampleLuminance( tex2D, nuv ) - edgeLuminance;
				nAtEnd = abs( nLuminanceDelta ) >= gradientThreshold;

			}

			if ( !nAtEnd ) {

				nuv -= edgeStep * EDGE_GUESS;

			}

			float pDistance, nDistance;
			if ( e.isHorizontal ) {

				pDistance = puv.x - uv.x;
				nDistance = uv.x - nuv.x;

			} else {
				
				pDistance = puv.y - uv.y;
				nDistance = uv.y - nuv.y;

			}

			float shortestDistance;
			bool deltaSign;
			if ( pDistance <= nDistance ) {

				shortestDistance = pDistance;
				deltaSign = pLuminanceDelta >= 0.0;

			} else {

				shortestDistance = nDistance;
				deltaSign = nLuminanceDelta >= 0.0;

			}

			if ( deltaSign == ( l.m - edgeLuminance >= 0.0 ) ) {

				return 0.0;

			}

			return 0.5 - shortestDistance / ( pDistance + nDistance );

		}

		vec4 ApplyFXAA( sampler2D  tex2D, vec2 texSize, vec2 uv ) {

			LuminanceData luminance = SampleLuminanceNeighborhood( tex2D, texSize, uv );
			if ( ShouldSkipPixel( luminance ) ) {

				return Sample( tex2D, uv );

			}

			float pixelBlend = DeterminePixelBlendFactor( luminance );
			EdgeData edge = DetermineEdge( texSize, luminance );
			float edgeBlend = DetermineEdgeBlendFactor( tex2D, texSize, luminance, edge, uv );
			float finalBlend = max( pixelBlend, edgeBlend );

			if (edge.isHorizontal) {

				uv.y += edge.pixelStep * finalBlend;

			} else {

				uv.x += edge.pixelStep * finalBlend;

			}

			return Sample( tex2D, uv );

		}

		void main() {

			gl_FragColor = ApplyFXAA( tDiffuse, resolution.xy, vUv );
			
		}`};var Kc={name:"FreiChenShader",uniforms:{tDiffuse:{value:null},aspect:{value:new AA(512,512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		varying vec2 vUv;

		uniform vec2 aspect;

		vec2 texel = vec2( 1.0 / aspect.x, 1.0 / aspect.y );


		mat3 G[9];

		// hard coded matrix values!!!! as suggested in https://github.com/neilmendoza/ofxPostProcessing/blob/master/src/EdgePass.cpp#L45

		const mat3 g0 = mat3( 0.3535533845424652, 0, -0.3535533845424652, 0.5, 0, -0.5, 0.3535533845424652, 0, -0.3535533845424652 );
		const mat3 g1 = mat3( 0.3535533845424652, 0.5, 0.3535533845424652, 0, 0, 0, -0.3535533845424652, -0.5, -0.3535533845424652 );
		const mat3 g2 = mat3( 0, 0.3535533845424652, -0.5, -0.3535533845424652, 0, 0.3535533845424652, 0.5, -0.3535533845424652, 0 );
		const mat3 g3 = mat3( 0.5, -0.3535533845424652, 0, -0.3535533845424652, 0, 0.3535533845424652, 0, 0.3535533845424652, -0.5 );
		const mat3 g4 = mat3( 0, -0.5, 0, 0.5, 0, 0.5, 0, -0.5, 0 );
		const mat3 g5 = mat3( -0.5, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5 );
		const mat3 g6 = mat3( 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.6666666865348816, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204 );
		const mat3 g7 = mat3( -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, 0.6666666865348816, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408 );
		const mat3 g8 = mat3( 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408 );

		void main(void)
		{

			G[0] = g0,
			G[1] = g1,
			G[2] = g2,
			G[3] = g3,
			G[4] = g4,
			G[5] = g5,
			G[6] = g6,
			G[7] = g7,
			G[8] = g8;

			mat3 I;
			float cnv[9];
			vec3 sample;

		/* fetch the 3x3 neighbourhood and use the RGB vector's length as intensity value */
			for (float i=0.0; i<3.0; i++) {
				for (float j=0.0; j<3.0; j++) {
					sample = texture2D(tDiffuse, vUv + texel * vec2(i-1.0,j-1.0) ).rgb;
					I[int(i)][int(j)] = length(sample);
				}
			}

		/* calculate the convolution values for all the masks */
			for (int i=0; i<9; i++) {
				float dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);
				cnv[i] = dp3 * dp3;
			}

			float M = (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]);
			float S = (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + (cnv[8] + M);

			gl_FragColor = vec4(vec3(sqrt(M/S)), 1.0);
		}`};var Oc={name:"GodRaysGenerateShader",uniforms:{tInput:{value:null},fStepSize:{value:1},vSunPositionScreenSpace:{value:new y}},vertexShader:`

		varying vec2 vUv;

		void main() {

		 vUv = uv;
		 gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

	 }`,fragmentShader:`

		#define TAPS_PER_PASS 6.0

		varying vec2 vUv;

		uniform sampler2D tInput;

		uniform vec3 vSunPositionScreenSpace;
		uniform float fStepSize; // filter step size

		void main() {

		// delta from current pixel to "sun" position

			vec2 delta = vSunPositionScreenSpace.xy - vUv;
			float dist = length( delta );

		// Step vector (uv space)

			vec2 stepv = fStepSize * delta / dist;

		// Number of iterations between pixel and sun

			float iters = dist/fStepSize;

			vec2 uv = vUv.xy;
			float col = 0.0;

		// This breaks ANGLE in Chrome 22
		//	- see http://code.google.com/p/chromium/issues/detail?id=153105

		/*
		// Unrolling didn't do much on my hardware (ATI Mobility Radeon 3450),
		// so i've just left the loop

		"for ( float i = 0.0; i < TAPS_PER_PASS; i += 1.0 ) {",

		// Accumulate samples, making sure we don't walk past the light source.

		// The check for uv.y < 1 would not be necessary with "border" UV wrap
		// mode, with a black border color. I don't think this is currently
		// exposed by three.js. As a result there might be artifacts when the
		// sun is to the left, right or bottom of screen as these cases are
		// not specifically handled.

		"	col += ( i <= iters && uv.y < 1.0 ? texture2D( tInput, uv ).r : 0.0 );",
		"	uv += stepv;",

		"}",
		*/

		// Unrolling loop manually makes it work in ANGLE

			float f = min( 1.0, max( vSunPositionScreenSpace.z / 1000.0, 0.0 ) ); // used to fade out godrays

			if ( 0.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;
			uv += stepv;

			if ( 1.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;
			uv += stepv;

			if ( 2.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;
			uv += stepv;

			if ( 3.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;
			uv += stepv;

			if ( 4.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;
			uv += stepv;

			if ( 5.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;
			uv += stepv;

		// Should technically be dividing by 'iters but 'TAPS_PER_PASS' smooths out
		// objectionable artifacts, in particular near the sun position. The side
		// effect is that the result is darker than it should be around the sun, as
		// TAPS_PER_PASS is greater than the number of samples actually accumulated.
		// When the result is inverted (in the shader 'godrays_combine this produces
		// a slight bright spot at the position of the sun, even when it is occluded.

			gl_FragColor = vec4( col/TAPS_PER_PASS );
			gl_FragColor.a = 1.0;

		}`};var Hc={name:"GodRaysFakeSunShader",uniforms:{vSunPositionScreenSpace:{value:new y},fAspect:{value:1},sunColor:{value:new a(16772608)},bgColor:{value:new a(0)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		varying vec2 vUv;

		uniform vec3 vSunPositionScreenSpace;
		uniform float fAspect;

		uniform vec3 sunColor;
		uniform vec3 bgColor;

		void main() {

			vec2 diff = vUv - vSunPositionScreenSpace.xy;

		// Correct for aspect ratio

			diff.x *= fAspect;

			float prop = clamp( length( diff ) / 0.5, 0.0, 1.0 );
			prop = 0.35 * pow( 1.0 - prop, 3.0 );

			gl_FragColor.xyz = ( vSunPositionScreenSpace.z > 0.0 ) ? mix( sunColor, bgColor, 1.0 - prop ) : bgColor;
			gl_FragColor.w = 1.0;

		}`};var qc={name:"NormalMapShader",uniforms:{heightMap:{value:null},resolution:{value:new AA(512,512)},scale:{value:new AA(1,1)},height:{value:0.05}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float height;
		uniform vec2 resolution;
		uniform sampler2D heightMap;

		varying vec2 vUv;

		void main() {

			float val = texture2D( heightMap, vUv ).x;

			float valU = texture2D( heightMap, vUv + vec2( 1.0 / resolution.x, 0.0 ) ).x;
			float valV = texture2D( heightMap, vUv + vec2( 0.0, 1.0 / resolution.y ) ).x;

			gl_FragColor = vec4( ( 0.5 * normalize( vec3( val - valU, val - valV, height  ) ) + 0.5 ), 1.0 );

		}`};var _c={name:"SobelOperatorShader",uniforms:{tDiffuse:{value:null},resolution:{value:new AA}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;

		void main() {

			vec2 texel = vec2( 1.0 / resolution.x, 1.0 / resolution.y );

		// kernel definition (in glsl matrices are filled in column-major order)

			const mat3 Gx = mat3( -1, -2, -1, 0, 0, 0, 1, 2, 1 ); // x direction kernel
			const mat3 Gy = mat3( -1, 0, 1, -2, 0, 2, -1, 0, 1 ); // y direction kernel

		// fetch the 3x3 neighbourhood of a fragment

		// first column

			float tx0y0 = texture2D( tDiffuse, vUv + texel * vec2( -1, -1 ) ).r;
			float tx0y1 = texture2D( tDiffuse, vUv + texel * vec2( -1,  0 ) ).r;
			float tx0y2 = texture2D( tDiffuse, vUv + texel * vec2( -1,  1 ) ).r;

		// second column

			float tx1y0 = texture2D( tDiffuse, vUv + texel * vec2(  0, -1 ) ).r;
			float tx1y1 = texture2D( tDiffuse, vUv + texel * vec2(  0,  0 ) ).r;
			float tx1y2 = texture2D( tDiffuse, vUv + texel * vec2(  0,  1 ) ).r;

		// third column

			float tx2y0 = texture2D( tDiffuse, vUv + texel * vec2(  1, -1 ) ).r;
			float tx2y1 = texture2D( tDiffuse, vUv + texel * vec2(  1,  0 ) ).r;
			float tx2y2 = texture2D( tDiffuse, vUv + texel * vec2(  1,  1 ) ).r;

		// gradient value in x direction

			float valueGx = Gx[0][0] * tx0y0 + Gx[1][0] * tx1y0 + Gx[2][0] * tx2y0 +
				Gx[0][1] * tx0y1 + Gx[1][1] * tx1y1 + Gx[2][1] * tx2y1 +
				Gx[0][2] * tx0y2 + Gx[1][2] * tx1y2 + Gx[2][2] * tx2y2;

		// gradient value in y direction

			float valueGy = Gy[0][0] * tx0y0 + Gy[1][0] * tx1y0 + Gy[2][0] * tx2y0 +
				Gy[0][1] * tx0y1 + Gy[1][1] * tx1y1 + Gy[2][1] * tx2y1 +
				Gy[0][2] * tx0y2 + Gy[1][2] * tx1y2 + Gy[2][2] * tx2y2;

		// magnitude of the total gradient

			float G = sqrt( ( valueGx * valueGx ) + ( valueGy * valueGy ) );

			gl_FragColor = vec4( vec3( G ), 1 );

		}`};function JS(A,Q,E){return A.split(Q).join(E)}var US=G0.meshphong_frag.slice(0,G0.meshphong_frag.indexOf("void main() {")),YS=G0.meshphong_frag.slice(G0.meshphong_frag.indexOf("void main() {")),Tc={name:"SubsurfaceScatteringShader",uniforms:oA.merge([CE.phong.uniforms,{thicknessMap:{value:null},thicknessColor:{value:new a(16777215)},thicknessDistortion:{value:0.1},thicknessAmbient:{value:0},thicknessAttenuation:{value:0.1},thicknessPower:{value:2},thicknessScale:{value:10}}]),vertexShader:["#define USE_UV",G0.meshphong_vert].join(`
`),fragmentShader:["#define USE_UV","#define SUBSURFACE",US,"uniform sampler2D thicknessMap;","uniform float thicknessPower;","uniform float thicknessScale;","uniform float thicknessDistortion;","uniform float thicknessAmbient;","uniform float thicknessAttenuation;","uniform vec3 thicknessColor;","void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, inout ReflectedLight reflectedLight) {","\tvec3 thickness = thicknessColor * texture2D(thicknessMap, uv).r;","\tvec3 scatteringHalf = normalize(directLight.direction + (geometryNormal * thicknessDistortion));","\tfloat scatteringDot = pow(saturate(dot(geometryViewDir, -scatteringHalf)), thicknessPower) * thicknessScale;","\tvec3 scatteringIllu = (scatteringDot + thicknessAmbient) * thickness;","\treflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;","}",YS.replace("#include <lights_fragment_begin>",JS(G0.lights_fragment_begin,"RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );",["RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );","#if defined( SUBSURFACE ) && defined( USE_UV )"," RE_Direct_Scattering(directLight, vUv, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, reflectedLight);","#endif"].join(`
`)))].join(`
`)};var jc={uniforms:{uDirLightPos:{value:new y},uDirLightColor:{value:new a(15658734)},uAmbientLightColor:{value:new a(328965)},uBaseColor:{value:new a(16777215)}},vertexShader:`

		varying vec3 vNormal;
		varying vec3 vRefract;

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
			vec3 worldNormal = normalize ( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );

			vNormal = normalize( normalMatrix * normal );

			vec3 I = worldPosition.xyz - cameraPosition;
			vRefract = refract( normalize( I ), worldNormal, 1.02 );

			gl_Position = projectionMatrix * mvPosition;

		}`,fragmentShader:`

		uniform vec3 uBaseColor;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		varying vec3 vRefract;

		void main() {

			float directionalLightWeighting = max( dot( normalize( vNormal ), uDirLightPos ), 0.0);
			vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;

			float intensity = smoothstep( - 0.5, 1.0, pow( length(lightWeighting), 20.0 ) );
			intensity += length(lightWeighting) * 0.2;

			float cameraWeighting = dot( normalize( vNormal ), vRefract );
			intensity += pow( 1.0 - length( cameraWeighting ), 6.0 );
			intensity = intensity * 0.2 + 0.3;

			if ( intensity < 0.50 ) {

				gl_FragColor = vec4( 2.0 * intensity * uBaseColor, 1.0 );

			} else {

				gl_FragColor = vec4( 1.0 - 2.0 * ( 1.0 - intensity ) * ( 1.0 - uBaseColor ), 1.0 );

			}

			#include <colorspace_fragment>

		}`},vc={uniforms:{uDirLightPos:{value:new y},uDirLightColor:{value:new a(15658734)},uAmbientLightColor:{value:new a(328965)},uBaseColor:{value:new a(15658734)},uLineColor1:{value:new a(8421504)},uLineColor2:{value:new a(0)},uLineColor3:{value:new a(0)},uLineColor4:{value:new a(0)}},vertexShader:`

		varying vec3 vNormal;

		void main() {

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			vNormal = normalize( normalMatrix * normal );

		}`,fragmentShader:`

		uniform vec3 uBaseColor;
		uniform vec3 uLineColor1;
		uniform vec3 uLineColor2;
		uniform vec3 uLineColor3;
		uniform vec3 uLineColor4;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		void main() {

			float camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 0.4);
			float light = max( dot( normalize( vNormal ), uDirLightPos ), 0.0);

			gl_FragColor = vec4( uBaseColor, 1.0 );

			if ( length(uAmbientLightColor + uDirLightColor * light) < 1.00 ) {

				gl_FragColor *= vec4( uLineColor1, 1.0 );

			}

			if ( length(uAmbientLightColor + uDirLightColor * camera) < 0.50 ) {

				gl_FragColor *= vec4( uLineColor2, 1.0 );

			}

			#include <colorspace_fragment>

		}`},hc={uniforms:{uDirLightPos:{value:new y},uDirLightColor:{value:new a(15658734)},uAmbientLightColor:{value:new a(328965)},uBaseColor:{value:new a(16777215)},uLineColor1:{value:new a(0)},uLineColor2:{value:new a(0)},uLineColor3:{value:new a(0)},uLineColor4:{value:new a(0)}},vertexShader:`

		varying vec3 vNormal;

		void main() {

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			vNormal = normalize( normalMatrix * normal );

		}`,fragmentShader:`

		uniform vec3 uBaseColor;
		uniform vec3 uLineColor1;
		uniform vec3 uLineColor2;
		uniform vec3 uLineColor3;
		uniform vec3 uLineColor4;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		void main() {

			float directionalLightWeighting = max( dot( normalize(vNormal), uDirLightPos ), 0.0);
			vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;

			gl_FragColor = vec4( uBaseColor, 1.0 );

			if ( length(lightWeighting) < 1.00 ) {

				if ( mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {

					gl_FragColor = vec4( uLineColor1, 1.0 );

				}

			}

			if ( length(lightWeighting) < 0.75 ) {

				if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {

					gl_FragColor = vec4( uLineColor2, 1.0 );

				}

			}

			if ( length(lightWeighting) < 0.50 ) {

				if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {

					gl_FragColor = vec4( uLineColor3, 1.0 );

				}

			}

			if ( length(lightWeighting) < 0.3465 ) {

				if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {

					gl_FragColor = vec4( uLineColor4, 1.0 );

			}

			}

			#include <colorspace_fragment>

		}`},yc={uniforms:{uDirLightPos:{value:new y},uDirLightColor:{value:new a(15658734)},uAmbientLightColor:{value:new a(328965)},uBaseColor:{value:new a(16777215)},uLineColor1:{value:new a(0)}},vertexShader:`

		varying vec3 vNormal;

		void main() {

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			vNormal = normalize( normalMatrix * normal );

		}`,fragmentShader:`

		uniform vec3 uBaseColor;
		uniform vec3 uLineColor1;
		uniform vec3 uLineColor2;
		uniform vec3 uLineColor3;
		uniform vec3 uLineColor4;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		void main() {

			float directionalLightWeighting = max( dot( normalize(vNormal), uDirLightPos ), 0.0);
			vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;

			gl_FragColor = vec4( uBaseColor, 1.0 );

			if ( length(lightWeighting) < 1.00 ) {

				if ( ( mod(gl_FragCoord.x, 4.001) + mod(gl_FragCoord.y, 4.0) ) > 6.00 ) {

					gl_FragColor = vec4( uLineColor1, 1.0 );

				}

			}

			if ( length(lightWeighting) < 0.50 ) {

				if ( ( mod(gl_FragCoord.x + 2.0, 4.001) + mod(gl_FragCoord.y + 2.0, 4.0) ) > 6.00 ) {

					gl_FragColor = vec4( uLineColor1, 1.0 );

				}

			}

			#include <colorspace_fragment>

		}`};var bc={name:"TriangleBlurShader",uniforms:{texture:{value:null},delta:{value:new AA(1,1)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		#define ITERATIONS 10.0

		uniform sampler2D texture;
		uniform vec2 delta;

		varying vec2 vUv;

		void main() {

			vec4 color = vec4( 0.0 );

			float total = 0.0;

		// randomize the lookup values to hide the fixed number of samples

			float offset = rand( vUv );

			for ( float t = -ITERATIONS; t <= ITERATIONS; t ++ ) {

				float percent = ( t + offset - 0.5 ) / ITERATIONS;
				float weight = 1.0 - abs( percent );

				color += texture2D( texture, vUv + delta * percent ) * weight;
				total += weight;

			}

			gl_FragColor = color / total;

		}`};var mc={name:"VelocityShader",uniforms:oA.merge([vA.common,vA.displacementmap,{modelMatrixPrev:{value:new RA},currentProjectionViewMatrix:{value:new RA},previousProjectionViewMatrix:{value:new RA}}]),vertexShader:`
#define NORMAL

#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )

	varying vec3 vViewPosition;

#endif

#include <common>
#include <packing>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

uniform mat4 previousProjectionViewMatrix;
uniform mat4 currentProjectionViewMatrix;

uniform mat4 modelMatrixPrev;

varying vec4 clipPositionCurrent;
varying vec4 clipPositionPrevious;

void main() {


	#include <uv_vertex>

	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <displacementmap_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>

#ifdef USE_SKINNING

	vec4 mvPosition = modelViewMatrix * skinned;
	clipPositionCurrent  = currentProjectionViewMatrix * modelMatrix * skinned;
	clipPositionPrevious = previousProjectionViewMatrix * modelMatrixPrev * skinned;

#else

	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
	clipPositionCurrent  = currentProjectionViewMatrix * modelMatrix * vec4( transformed, 1.0 );
	clipPositionPrevious = previousProjectionViewMatrix * modelMatrixPrev * vec4( transformed, 1.0 );

#endif

	gl_Position = projectionMatrix * mvPosition;

	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}
`,fragmentShader:`
#define NORMAL

uniform float opacity;

#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

varying vec4 clipPositionCurrent;
varying vec4 clipPositionPrevious;

void main() {

	vec4 diffuseColor = vec4( 1.0 );
	diffuseColor.a = opacity;

	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>

	vec2 ndcPositionCurrent  = clipPositionCurrent.xy/clipPositionCurrent.w;
	vec2 ndcPositionPrevious = clipPositionPrevious.xy/clipPositionPrevious.w;
	vec2 vel = ( ndcPositionCurrent - ndcPositionPrevious ) * 0.5;
	vel = vel * 0.5 + 0.5;
	vec2 v1 = packDepthToRG(vel.x);
	vec2 v2 = packDepthToRG(vel.y);
	gl_FragColor = vec4(v1.x, v1.y, v2.x, v2.y);

	#include <logdepthbuf_fragment>

}

`};var ic={uniforms:{u_size:{value:new y(1,1,1)},u_renderstyle:{value:0},u_renderthreshold:{value:0.5},u_clim:{value:new AA(1,1)},u_data:{value:null},u_cmdata:{value:null}},vertexShader:`

		varying vec4 v_nearpos;
		varying vec4 v_farpos;
		varying vec3 v_position;

		void main() {
				// Prepare transforms to map to "camera view". See also:
				// https://threejs.org/docs/#api/renderers/webgl/WebGLProgram
				mat4 viewtransformf = modelViewMatrix;
				mat4 viewtransformi = inverse(modelViewMatrix);

				// Project local vertex coordinate to camera position. Then do a step
				// backward (in cam coords) to the near clipping plane, and project back. Do
				// the same for the far clipping plane. This gives us all the information we
				// need to calculate the ray and truncate it to the viewing cone.
				vec4 position4 = vec4(position, 1.0);
				vec4 pos_in_cam = viewtransformf * position4;

				// Intersection of ray and near clipping plane (z = -1 in clip coords)
				pos_in_cam.z = -pos_in_cam.w;
				v_nearpos = viewtransformi * pos_in_cam;

				// Intersection of ray and far clipping plane (z = +1 in clip coords)
				pos_in_cam.z = pos_in_cam.w;
				v_farpos = viewtransformi * pos_in_cam;

				// Set varyings and output pos
				v_position = position;
				gl_Position = projectionMatrix * viewMatrix * modelMatrix * position4;
		}`,fragmentShader:`

				precision highp float;
				precision mediump sampler3D;

				uniform vec3 u_size;
				uniform int u_renderstyle;
				uniform float u_renderthreshold;
				uniform vec2 u_clim;

				uniform sampler3D u_data;
				uniform sampler2D u_cmdata;

				varying vec3 v_position;
				varying vec4 v_nearpos;
				varying vec4 v_farpos;

				// The maximum distance through our rendering volume is sqrt(3).
				const int MAX_STEPS = 887;	// 887 for 512^3, 1774 for 1024^3
				const int REFINEMENT_STEPS = 4;
				const float relative_step_size = 1.0;
				const vec4 ambient_color = vec4(0.2, 0.4, 0.2, 1.0);
				const vec4 diffuse_color = vec4(0.8, 0.2, 0.2, 1.0);
				const vec4 specular_color = vec4(1.0, 1.0, 1.0, 1.0);
				const float shininess = 40.0;

				void cast_mip(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray);
				void cast_iso(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray);

				float sample1(vec3 texcoords);
				vec4 apply_colormap(float val);
				vec4 add_lighting(float val, vec3 loc, vec3 step, vec3 view_ray);


				void main() {
						// Normalize clipping plane info
						vec3 farpos = v_farpos.xyz / v_farpos.w;
						vec3 nearpos = v_nearpos.xyz / v_nearpos.w;

						// Calculate unit vector pointing in the view direction through this fragment.
						vec3 view_ray = normalize(nearpos.xyz - farpos.xyz);

						// Compute the (negative) distance to the front surface or near clipping plane.
						// v_position is the back face of the cuboid, so the initial distance calculated in the dot
						// product below is the distance from near clip plane to the back of the cuboid
						float distance = dot(nearpos - v_position, view_ray);
						distance = max(distance, min((-0.5 - v_position.x) / view_ray.x,
																				(u_size.x - 0.5 - v_position.x) / view_ray.x));
						distance = max(distance, min((-0.5 - v_position.y) / view_ray.y,
																				(u_size.y - 0.5 - v_position.y) / view_ray.y));
						distance = max(distance, min((-0.5 - v_position.z) / view_ray.z,
																				(u_size.z - 0.5 - v_position.z) / view_ray.z));

						// Now we have the starting position on the front surface
						vec3 front = v_position + view_ray * distance;

						// Decide how many steps to take
						int nsteps = int(-distance / relative_step_size + 0.5);
						if ( nsteps < 1 )
								discard;

						// Get starting location and step vector in texture coordinates
						vec3 step = ((v_position - front) / u_size) / float(nsteps);
						vec3 start_loc = front / u_size;

						// For testing: show the number of steps. This helps to establish
						// whether the rays are correctly oriented
						//'gl_FragColor = vec4(0.0, float(nsteps) / 1.0 / u_size.x, 1.0, 1.0);
						//'return;

						if (u_renderstyle == 0)
								cast_mip(start_loc, step, nsteps, view_ray);
						else if (u_renderstyle == 1)
								cast_iso(start_loc, step, nsteps, view_ray);

						if (gl_FragColor.a < 0.05)
								discard;
				}


				float sample1(vec3 texcoords) {
						/* Sample float value from a 3D texture. Assumes intensity data. */
						return texture(u_data, texcoords.xyz).r;
				}


				vec4 apply_colormap(float val) {
						val = (val - u_clim[0]) / (u_clim[1] - u_clim[0]);
						return texture2D(u_cmdata, vec2(val, 0.5));
				}


				void cast_mip(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray) {

						float max_val = -1e6;
						int max_i = 100;
						vec3 loc = start_loc;

						// Enter the raycasting loop. In WebGL 1 the loop index cannot be compared with
						// non-constant expression. So we use a hard-coded max, and an additional condition
						// inside the loop.
						for (int iter=0; iter<MAX_STEPS; iter++) {
								if (iter >= nsteps)
										break;
								// Sample from the 3D texture
								float val = sample1(loc);
								// Apply MIP operation
								if (val > max_val) {
										max_val = val;
										max_i = iter;
								}
								// Advance location deeper into the volume
								loc += step;
						}

						// Refine location, gives crispier images
						vec3 iloc = start_loc + step * (float(max_i) - 0.5);
						vec3 istep = step / float(REFINEMENT_STEPS);
						for (int i=0; i<REFINEMENT_STEPS; i++) {
								max_val = max(max_val, sample1(iloc));
								iloc += istep;
						}

						// Resolve final color
						gl_FragColor = apply_colormap(max_val);
				}


				void cast_iso(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray) {

						gl_FragColor = vec4(0.0);	// init transparent
						vec4 color3 = vec4(0.0);	// final color
						vec3 dstep = 1.5 / u_size;	// step to sample derivative
						vec3 loc = start_loc;

						float low_threshold = u_renderthreshold - 0.02 * (u_clim[1] - u_clim[0]);

						// Enter the raycasting loop. In WebGL 1 the loop index cannot be compared with
						// non-constant expression. So we use a hard-coded max, and an additional condition
						// inside the loop.
						for (int iter=0; iter<MAX_STEPS; iter++) {
								if (iter >= nsteps)
										break;

								// Sample from the 3D texture
								float val = sample1(loc);

								if (val > low_threshold) {
										// Take the last interval in smaller steps
										vec3 iloc = loc - 0.5 * step;
										vec3 istep = step / float(REFINEMENT_STEPS);
										for (int i=0; i<REFINEMENT_STEPS; i++) {
												val = sample1(iloc);
												if (val > u_renderthreshold) {
														gl_FragColor = add_lighting(val, iloc, dstep, view_ray);
														return;
												}
												iloc += istep;
										}
								}

								// Advance location deeper into the volume
								loc += step;
						}
				}


				vec4 add_lighting(float val, vec3 loc, vec3 step, vec3 view_ray)
				{
					// Calculate color by incorporating lighting

						// View direction
						vec3 V = normalize(view_ray);

						// calculate normal vector from gradient
						vec3 N;
						float val1, val2;
						val1 = sample1(loc + vec3(-step[0], 0.0, 0.0));
						val2 = sample1(loc + vec3(+step[0], 0.0, 0.0));
						N[0] = val1 - val2;
						val = max(max(val1, val2), val);
						val1 = sample1(loc + vec3(0.0, -step[1], 0.0));
						val2 = sample1(loc + vec3(0.0, +step[1], 0.0));
						N[1] = val1 - val2;
						val = max(max(val1, val2), val);
						val1 = sample1(loc + vec3(0.0, 0.0, -step[2]));
						val2 = sample1(loc + vec3(0.0, 0.0, +step[2]));
						N[2] = val1 - val2;
						val = max(max(val1, val2), val);

						float gm = length(N); // gradient magnitude
						N = normalize(N);

						// Flip normal so it points towards viewer
						float Nselect = float(dot(N, V) > 0.0);
						N = (2.0 * Nselect - 1.0) * N;	// ==	Nselect * N - (1.0-Nselect)*N;

						// Init colors
						vec4 ambient_color = vec4(0.0, 0.0, 0.0, 0.0);
						vec4 diffuse_color = vec4(0.0, 0.0, 0.0, 0.0);
						vec4 specular_color = vec4(0.0, 0.0, 0.0, 0.0);

						// note: could allow multiple lights
						for (int i=0; i<1; i++)
						{
								 // Get light direction (make sure to prevent zero devision)
								vec3 L = normalize(view_ray);	//lightDirs[i];
								float lightEnabled = float( length(L) > 0.0 );
								L = normalize(L + (1.0 - lightEnabled));

								// Calculate lighting properties
								float lambertTerm = clamp(dot(N, L), 0.0, 1.0);
								vec3 H = normalize(L+V); // Halfway vector
								float specularTerm = pow(max(dot(H, N), 0.0), shininess);

								// Calculate mask
								float mask1 = lightEnabled;

								// Calculate colors
								ambient_color +=	mask1 * ambient_color;	// * gl_LightSource[i].ambient;
								diffuse_color +=	mask1 * lambertTerm;
								specular_color += mask1 * specularTerm * specular_color;
						}

						// Calculate final color by componing different components
						vec4 final_color;
						vec4 color = apply_colormap(val);
						final_color = color * (ambient_color + diffuse_color) + specular_color;
						final_color.a = color.a;
						return final_color;
				}`};var GS=new Array(4),WS=new ArrayBuffer(5120),hX=0;for(let A=0;A<5;A++)GS[A]=new Uint32Array(WS,hX,256),hX+=1024;class hK{static createButton(A,Q={}){let E=document.createElement("button");function B(){let U=null;async function Y(O){O.addEventListener("end",H),await A.xr.setSession(O),E.textContent="EXIT VR",U=O}function H(){U.removeEventListener("end",H),E.textContent="ENTER VR",U=null}E.style.display="",E.style.cursor="pointer",E.style.left="calc(50% - 50px)",E.style.width="100px",E.textContent="ENTER VR";let R={...Q,optionalFeatures:["local-floor","bounded-floor","layers",...Q.optionalFeatures||[]]};if(E.onmouseenter=function(){E.style.opacity="1.0"},E.onmouseleave=function(){E.style.opacity="0.5"},E.onclick=function(){if(U===null)navigator.xr.requestSession("immersive-vr",R).then(Y);else if(U.end(),navigator.xr.offerSession!==void 0)navigator.xr.offerSession("immersive-vr",R).then(Y).catch((O)=>{console.warn(O)})},navigator.xr.offerSession!==void 0)navigator.xr.offerSession("immersive-vr",R).then(Y).catch((O)=>{console.warn(O)})}function I(){E.style.display="",E.style.cursor="auto",E.style.left="calc(50% - 75px)",E.style.width="150px",E.onmouseenter=null,E.onmouseleave=null,E.onclick=null}function C(){I(),E.textContent="VR NOT SUPPORTED"}function K(U){I(),console.warn("Exception when trying to call xr.isSessionSupported",U),E.textContent="VR NOT ALLOWED"}function J(U){U.style.position="absolute",U.style.bottom="20px",U.style.padding="12px 6px",U.style.border="1px solid #fff",U.style.borderRadius="4px",U.style.background="rgba(0,0,0,0.1)",U.style.color="#fff",U.style.font="normal 13px sans-serif",U.style.textAlign="center",U.style.opacity="0.5",U.style.outline="none",U.style.zIndex="999"}if("xr"in navigator)return E.id="VRButton",E.style.display="none",J(E),navigator.xr.isSessionSupported("immersive-vr").then(function(U){if(U?B():C(),U&&hK.xrSessionIsGranted)E.click()}).catch(K),E;else{let U=document.createElement("a");if(window.isSecureContext===!1)U.href=document.location.href.replace(/^http:/,"https:"),U.innerHTML="WEBXR NEEDS HTTPS";else U.href="https://immersiveweb.dev/",U.innerHTML="WEBXR NOT AVAILABLE";return U.style.left="calc(50% - 90px)",U.style.width="180px",U.style.textDecoration="none",J(U),U}}static registerSessionGrantedListener(){if(typeof navigator!=="undefined"&&"xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{hK.xrSessionIsGranted=!0})}}}hK.xrSessionIsGranted=!1;hK.registerSessionGrantedListener();var yX={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:0.05,AxisTouchThreshold:0.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};var zl={xAxis:0,yAxis:0,button:0,state:yX.ComponentState.DEFAULT};var ul=new RA,pl=new y;var LS=`
// 頂点シェーダーに入力される attribute 変数
//attribute vec4 position;       //!< 入力: 位置情報
//attribute vec2 uv;             //!< 入力: テクスチャー座標
//attribute vec3 normal;         //!< 入力: 法線ベクトル
// All provided by three.js ^^

// vertex color is not actually the color of the shape, as such
// it is a custom attribute _COLOR in the glTF

attribute vec4 _color;           //!< 入力: 頂点の色
attribute vec3 tangent;          //!< 入力: 異方位

// フラグメントシェーダーへの入力
varying   vec4 v_color;          //!< 出力: 頂点の色
varying   vec4 v_position;       //!< 出力: 位置情報
varying   vec3 v_normal;         //!< 出力: 法線ベクトル
varying   vec3 v_tangent;        //!< 出力: 異方位
varying   vec2 v_texCoord;       //!< 出力: テクスチャー座標

// ユニフォーム
//uniform mat3 normalMatrix;     //!< ユニフォーム: モデルの法線用行列
//uniform mat4 modelViewMatrix;  //!< ユニフォーム: プロジェクション行列
//uniform mat4 projectionMatrix; //!< ユニフォーム: モデル行列
// All provided by three.js ^^

// skinning_pars_vertex.glsl.js
#ifdef USE_SKINNING
    uniform mat4 bindMatrix;
    uniform mat4 bindMatrixInverse;
    uniform highp sampler2D boneTexture;
    mat4 getBoneMatrix( const in float i ) {
        int size = textureSize( boneTexture, 0 ).x;
        int j = int( i ) * 4;
        int x = j % size;
        int y = j / size;
        vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
        vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
        vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
        vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
        return mat4( v1, v2, v3, v4 );
    }
#endif

void main()
{

    // begin_vertex.glsl.js
    vec3 transformed = vec3( position );
// skinbase_vertex.glsl.js
#ifdef USE_SKINNING
    mat4 boneMatX = getBoneMatrix( skinIndex.x );
    mat4 boneMatY = getBoneMatrix( skinIndex.y );
    mat4 boneMatZ = getBoneMatrix( skinIndex.z );
    mat4 boneMatW = getBoneMatrix( skinIndex.w );
    // skinning_vertex.glsl.js
    vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
    vec4 skinned = vec4( 0.0 );
    skinned += boneMatX * skinVertex * skinWeight.x;
    skinned += boneMatY * skinVertex * skinWeight.y;
    skinned += boneMatZ * skinVertex * skinWeight.z;
    skinned += boneMatW * skinVertex * skinWeight.w;
    transformed = ( bindMatrixInverse * skinned ).xyz;
#endif

//#ifdef FFL_COORDINATE_MODE_NORMAL
    // 頂点座標を変換
    v_position = modelViewMatrix * vec4(transformed, 1.0);
    gl_Position =  projectionMatrix * v_position;

    vec3 objectNormal = normal;
    vec3 objectTangent = tangent.xyz;
// skinnormal_vertex.glsl.js
#ifdef USE_SKINNING
    mat4 skinMatrix = mat4( 0.0 );
    skinMatrix += skinWeight.x * boneMatX;
    skinMatrix += skinWeight.y * boneMatY;
    skinMatrix += skinWeight.z * boneMatZ;
    skinMatrix += skinWeight.w * boneMatW;
    skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;

    objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
    objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;

#endif

    // 法線も変換
    //v_normal = mat3(inverse(u_mv)) * a_normal;
    v_normal = normalize(normalMatrix * objectNormal);
//#elif defined(FFL_COORDINATE_MODE_NONE)
//    // 頂点座標を変換
//    gl_Position = vec4(a_position.x, a_position.y * -1.0, a_position.z, a_position.w);
//    v_position = a_position;
//
//    v_normal = a_normal;
//#endif

     // その他の情報も書き出す
    v_texCoord = uv;
    // safe normalize
    if (tangent != vec3(0.0, 0.0, 0.0))
    {
        v_tangent = normalize(normalMatrix * objectTangent);
    }
    else
    {
        v_tangent = vec3(0.0, 0.0, 0.0);
    }

    v_color = _color;
}
`,qS=`
//
//  sample.flg
//  Fragment shader
//  Copyright (c) 2014 Nintendo Co., Ltd. All rights reserved.
//
//

#ifdef GL_ES
precision mediump float;
#else
#   define lowp
#   define mediump
#   define highp
#endif


//
//  定数定義ファイル
//

/// シェーダーモード
#define FFL_SHADER_MODE_UR 0
#define FFL_SHADER_MODE_UB 1

/// 変調処理のマクロ
#define FFL_MODULATE_MODE_CONSTANT        0
#define FFL_MODULATE_MODE_TEXTURE_DIRECT  1
#define FFL_MODULATE_MODE_RGB_LAYERED     2
#define FFL_MODULATE_MODE_ALPHA           3
#define FFL_MODULATE_MODE_LUMINANCE_ALPHA 4
#define FFL_MODULATE_MODE_ALPHA_OPA       5

/// スペキュラのモード
#define FFL_SPECULAR_MODE_BLINN 0
#define FFL_SPECULAR_MODE_ANISO 1

/// ライトのON/OFF
#define FFL_LIGHT_MODE_DISABLE 0
#define FFL_LIGHT_MODE_ENABLE 1

/// フラグメントのディスカードモード
#define FFL_DISCARD_FRAGMENT_DISABLE 0
#define FFL_DISCARD_FRAGMENT_ENABLE  1

/// 座標変換モード
#define FFL_COORDINATE_MODE_NONE   0
#define FFL_COORDINATE_MODE_NORMAL 1

//
//  関数の定義ファイル
//

/**
 * @brief 異方性反射の反射率を計算します。
 * @param[in] light   ライトの向き
 * @param[in] tangent 接線
 * @param[in] eye     視線の向き
 * @param[in] power   鋭さ
 */
mediump float calculateAnisotropicSpecular(mediump vec3 light, mediump vec3 tangent, mediump vec3 eye, mediump float power )
{
	mediump float dotLT = dot(light, tangent);
	mediump float dotVT = dot(eye, tangent);
	mediump float dotLN = sqrt(1.0 - dotLT * dotLT);
	mediump float dotVR = dotLN*sqrt(1.0 - dotVT * dotVT) - dotLT * dotVT;

	return pow(max(0.0, dotVR), power);
}

/**
 * @brief 異方性反射の反射率を計算します。
 * @param[in] light   ライトの向き
 * @param[in] normal  法線
 * @param[in] eye     視線の向き
 * @param[in] power   鋭さ
 */
mediump float calculateBlinnSpecular(mediump vec3 light, mediump vec3 normal, mediump vec3 eye, mediump float power)
{
	return pow(max(dot(reflect(-light, normal), eye), 0.0), power);
}

/**
 * @brief 異方性反射、ブリン反射をブレンドします。
 * @param[in] blend ブレンド率
 * @param[in] blinn ブリンの値
 * @param[in] aniso 異方性の値
 */
mediump float calculateSpecularBlend(mediump float blend, mediump float blinn, mediump float aniso)
{
	return mix(aniso, blinn, blend);
}

/**
 * @brief アンビエントを計算します。
 * @param[in] light    ライト
 * @param[in] material マテリアル
 */
mediump vec3 calculateAmbientColor(mediump vec3 light, mediump vec3 material)
{
	return light * material;
}

/**
 * @brief 拡散を計算します。
 * @param[in] light    ライト
 * @param[in] material マテリアル
 * @param[in] ln       ライトと法線の内積
 */
mediump vec3 calculateDiffuseColor(mediump vec3 light, mediump vec3 material, mediump float ln)
{
	return light * material * ln;
}

/**
 * @brief 鏡面反射を計算します。
 * @param[in] light      ライト
 * @param[in] material   マテリアル
 * @param[in] reflection 反射率
 * @param[in] strength   幅
 */
mediump vec3 calculateSpecularColor(mediump vec3 light, mediump vec3 material, mediump float reflection, mediump float strength)
{
	return light * material * reflection * strength;
}

/**
 * @brief リムを計算します。
 * @param[in] color   リム色
 * @param[in] normalZ 法線のZ方向
 * @param[in] width   リム幅
 * @param[in] power   リムの鋭さ
 */
mediump vec3 calculateRimColor(mediump vec3 color, mediump float normalZ, mediump float width, mediump float power)
{
	return color * pow(width * (1.0 - abs(normalZ)), power);
}

/**
 * @brief ライト方向と法線の内積を求める
 * @note 特殊な実装になっています。
 */
mediump float calculateDot(mediump vec3 light, mediump vec3 normal)
{
	return max(dot(light, normal), 0.1);
}

// フラグメントシェーダーに入力される varying 変数
varying mediump vec4 v_color;          //!< 出力: 頂点の色
varying highp   vec4 v_position;       //!< 出力: 位置情報
varying highp   vec3 v_normal;         //!< 出力: 法線ベクトル
// NOTE: ^^ Those two need to be highp to avoid weird black dot issue on Android
varying mediump vec3 v_tangent;        //!< 出力: 異方位
varying mediump vec2 v_texCoord;       //!< 出力: テクスチャー座標

/// constカラー
uniform mediump vec4  u_const1; ///< constカラー1
uniform mediump vec4  u_const2; ///< constカラー2
uniform mediump vec4  u_const3; ///< constカラー3

/// ライト設定
uniform mediump vec3 u_light_ambient;  ///< カメラ空間のライト方向
uniform mediump vec3 u_light_diffuse;  ///< 拡散光用ライト
uniform mediump vec3 u_light_dir;
uniform bool u_light_enable;
uniform mediump vec3 u_light_specular; ///< 鏡面反射用ライト強度

/// マテリアル設定
uniform mediump vec3 u_material_ambient;         ///< 環境光用マテリアル設定
uniform mediump vec3 u_material_diffuse;         ///< 拡散光用マテリアル設定
uniform mediump vec3 u_material_specular;        ///< 鏡面反射用マテリアル設定
uniform int u_material_specular_mode;            ///< スペキュラの反射モード(CharModelに依存する設定のためub_modulateにしている)
uniform mediump float u_material_specular_power; ///< スペキュラの鋭さ(0.0を指定すると頂点カラーの設定が利用される)

/// 変調設定
uniform int u_mode;   ///< 描画モード

/// リム設定
uniform mediump vec3  u_rim_color;
uniform mediump float u_rim_power;

// サンプラー
uniform sampler2D s_texture;


// -------------------------------------------------------
// メイン文
void main()
{
    mediump vec4 color;

    mediump float specularPower    = u_material_specular_power;
    mediump float rimWidth         = v_color.a;

//#ifdef FFL_MODULATE_MODE_CONSTANT
    if(u_mode == FFL_MODULATE_MODE_CONSTANT)
    {
        color = u_const1;
    }
//#elif defined(FFL_MODULATE_MODE_TEXTURE_DIRECT)
    else if(u_mode == FFL_MODULATE_MODE_TEXTURE_DIRECT)
    {
        color = texture2D(s_texture, v_texCoord);
    }
//#elif defined(FFL_MODULATE_MODE_RGB_LAYERED)
    else if(u_mode == FFL_MODULATE_MODE_RGB_LAYERED)
    {
        color = texture2D(s_texture, v_texCoord);
        color = vec4(color.r * u_const1.rgb + color.g * u_const2.rgb + color.b * u_const3.rgb, color.a);
    }
//#elif defined(FFL_MODULATE_MODE_ALPHA)
    else if(u_mode == FFL_MODULATE_MODE_ALPHA)
    {
        color = texture2D(s_texture, v_texCoord);
        color = vec4(u_const1.rgb, color.r);
    }
//#elif defined(FFL_MODULATE_MODE_LUMINANCE_ALPHA)
    else if(u_mode == FFL_MODULATE_MODE_LUMINANCE_ALPHA)
    {
        color = texture2D(s_texture, v_texCoord);
        color = vec4(color.g * u_const1.rgb, color.r);
    }
//#elif defined(FFL_MODULATE_MODE_ALPHA_OPA)
    else if(u_mode == FFL_MODULATE_MODE_ALPHA_OPA)
    {
        color = texture2D(s_texture, v_texCoord);
        color = vec4(color.r * u_const1.rgb, 1.0);
    }
//#endif

    // avoids little outline around mask elements
    if(u_mode != FFL_MODULATE_MODE_CONSTANT && color.a == 0.0)
    {
        discard;
    }

//#ifdef FFL_LIGHT_MODE_ENABLE
    if(u_light_enable)
    {
        /// 環境光の計算
        mediump vec3 ambient = calculateAmbientColor(u_light_ambient.xyz, u_material_ambient.xyz);

        /// 法線ベクトルの正規化
        mediump vec3 norm = normalize(v_normal);

        /// 視線ベクトル
        mediump vec3 eye = normalize(-v_position.xyz);
        
        // ライトの向き
        mediump float fDot = calculateDot(u_light_dir, norm);

        /// Diffuse計算
        mediump vec3 diffuse = calculateDiffuseColor(u_light_diffuse.xyz, u_material_diffuse.xyz, fDot);
        
        /// Specular計算
        mediump float specularBlinn = calculateBlinnSpecular(u_light_dir, norm, eye, u_material_specular_power);
        
        /// Specularの値を確保する変数を宣言
        mediump float reflection;
        mediump float strength = v_color.g;
        if(u_material_specular_mode == 0)
        {
            /// Blinnモデルの場合
            strength = 1.0;
            reflection = specularBlinn;
        }
        else
        {
            /// Aisoモデルの場合
            mediump float specularAniso = calculateAnisotropicSpecular(u_light_dir, v_tangent, eye, u_material_specular_power);
            reflection = calculateSpecularBlend(v_color.r, specularBlinn, specularAniso);
        }
        /// Specularの色を取得
        mediump vec3 specular = calculateSpecularColor(u_light_specular.xyz, u_material_specular.xyz, reflection, strength);

        // リムの色を計算
        mediump vec3 rimColor = calculateRimColor(u_rim_color.rgb, norm.z, rimWidth, u_rim_power);

        // カラーの計算
        color.rgb = (ambient + diffuse) * color.rgb + specular + rimColor;
    }
//#endif

    gl_FragColor = color;
}
`;class BB extends bA{static defaultLightAmbient=new a(0.73,0.73,0.73);static defaultLightDiffuse=new a(0.6,0.6,0.6);static defaultLightSpecular=new a(0.7,0.7,0.7);static defaultLightDir=new y(-0.4531539381,0.4226179123,0.7848858833);static defaultRimColor=new a(0.3,0.3,0.3);static defaultRimPower=2;static defaultLightDirection=this.defaultLightDir;static materialParams=[{ambient:new a(0.85,0.75,0.75),diffuse:new a(0.75,0.75,0.75),specular:new a(0.3,0.3,0.3),specularPower:1.2,specularMode:0},{ambient:new a(1,1,1),diffuse:new a(0.7,0.7,0.7),specular:new a(0,0,0),specularPower:40,specularMode:1},{ambient:new a(0.9,0.85,0.85),diffuse:new a(0.75,0.75,0.75),specular:new a(0.22,0.22,0.22),specularPower:1.5,specularMode:0},{ambient:new a(0.85,0.75,0.75),diffuse:new a(0.75,0.75,0.75),specular:new a(0.3,0.3,0.3),specularPower:1.2,specularMode:0},{ambient:new a(1,1,1),diffuse:new a(0.7,0.7,0.7),specular:new a(0.35,0.35,0.35),specularPower:10,specularMode:1},{ambient:new a(0.75,0.75,0.75),diffuse:new a(0.72,0.72,0.72),specular:new a(0.3,0.3,0.3),specularPower:1.5,specularMode:0},{ambient:new a(1,1,1),diffuse:new a(0.7,0.7,0.7),specular:new a(0,0,0),specularPower:40,specularMode:1},{ambient:new a(1,1,1),diffuse:new a(0.7,0.7,0.7),specular:new a(0,0,0),specularPower:40,specularMode:1},{ambient:new a(1,1,1),diffuse:new a(0.7,0.7,0.7),specular:new a(0,0,0),specularPower:40,specularMode:1},{ambient:new a(0.95622,0.95622,0.95622),diffuse:new a(0.49673,0.49673,0.49673),specular:new a(0.24099,0.24099,0.24099),specularPower:3,specularMode:0},{ambient:new a(0.95622,0.95622,0.95622),diffuse:new a(1.08497,1.08497,1.08497),specular:new a(0.2409,0.2409,0.2409),specularPower:3,specularMode:0}];static getBlendOptionsFromModulateType(A){if(A>=0&&A<=5)return{blending:vQ,blendSrcAlpha:EE,blendDstAlpha:PE};else if(A>=6&&A<=8)return{blending:vQ,blendSrc:EE,blendDst:iE,blendDstAlpha:PE};else if(A>=9&&A<=13)return{blending:vQ,blendSrc:N1,blendSrcAlpha:EE,blendDst:LE};else if(A>=14&&A<=17)return{blending:vQ,blendSrc:EE,blendDst:iE,blendSrcAlpha:PE,blendDstAlpha:PE};else return console.error("Unknown modulate type:",A),{}}modulateMode;modulateType;modulateColor;lightEnable;constructor(A={}){let Q=A.modulateMode??0,E=A.modulateType??0,B=A.lightEnable??!0,I=A.lightDirection??BB.defaultLightDir.clone(),C=A.map||null,K=A.customMaterial||null,J={};if(Array.isArray(A.modulateColor)&&A.modulateColor.length===3)J={u_const1:{value:A.modulateColor[0]},u_const2:{value:A.modulateColor[1]},u_const3:{value:A.modulateColor[2]}};else J={u_const1:{value:A.modulateColor||new MA(1,1,1,1)}};let U=BB.materialParams[E]||BB.materialParams[0];if(K)U=K;let Y=Object.assign({},J,{u_light_ambient:{value:A.lightAmbient||BB.defaultLightAmbient},u_light_diffuse:{value:A.lightDiffuse||BB.defaultLightDiffuse},u_light_specular:{value:A.lightSpecular||BB.defaultLightSpecular},u_light_dir:{value:I},u_light_enable:{value:B},u_material_ambient:{value:U.ambient},u_material_diffuse:{value:U.diffuse},u_material_specular:{value:U.specular},u_material_specular_mode:{value:U.specularMode},u_material_specular_power:{value:U.specularPower},u_mode:{value:Q},u_rim_color:{value:BB.defaultRimColor},u_rim_power:{value:BB.defaultRimPower},s_texture:{value:C}});super({vertexShader:A.vertexShader||LS,fragmentShader:A.fragmentShader||qS,uniforms:Y,side:A.side||jQ,...Q!==0?BB.getBlendOptionsFromModulateType(E):{}});this.modulateMode=Q,this.modulateType=E,this.modulateColor=A.modulateColor,this.lightEnable=B}get map(){return this.uniforms.s_texture.value}set map(A){this.uniforms.s_texture.value=A}get lightDirection(){return this.uniforms.u_light_dir.value}set lightDirection(A){this.uniforms.u_light_dir.value=A}}var FS=`
#define AGX_FEATURE_ALBEDO_TEXTURE
/**
 * @file    LUT.vsh
 * @brief   LUT
 * @since   2014/10/02
 *
 * Copyright (c)2014 Nintendo Co., Ltd. All rights reserved.
 */

// シェーダーの種類毎に設定されるマクロリスト
// AGX_FEATURE_VERTEX_COLOR         頂点カラーが有効
// AGX_FEATURE_ALBEDO_TEXTURE       アルベドテクスチャーが有効
// AGX_FEATURE_BUMP_TEXTURE         バンプテクスチャーが有効
// AGX_FEATURE_MASK_TEXTURE         マスクテクスチャーが有効
// AGX_FEATURE_ALPHA_TEXTURE        アルファテクスチャーが有効
// AGX_FEATURE_SPHERE_MAP_TEXTURE   スフィア環境マップが有効
// AGX_FEATURE_SKIN_MASK            肌マスクが有効（u_const1）
// AGX_FEATURE_HAIR_MASK            髪マスクが有効（u_const2）
// AGX_FEATURE_ALPHA_TEST           アルファテストが有効
// AGX_FEATURE_FADE_OUT_COLOR       フェードアウトカラーが有効（u_const3）
// AGX_FEATURE_DISABLE_LIGHT        ライトが無効
// AGX_FEATURE_ALPHA_COLOR_FILTER   アルベドアルファによる色替えが有効
// AGX_FEATURE_ALBEDO_ALPHA         アルベドのアルファをカラーのアルファに適用
// AGX_FEATURE_PREMULTIPLY_ALPHA    プレマルチプライアルファな描画
// AGX_FEATURE_MII                  Miiを描画する
// AGX_FEATURE_MII_CONSTANT         Miiを描画する：Constant
// AGX_FEATURE_MII_TEXTURE_DIRECT   Miiを描画する：Texture Direct
// AGX_FEATURE_MII_RGB_LAYERED      Miiを描画する：RGB Layered
// AGX_FEATURE_MII_ALPHA            Miiを描画する：Alpha
// AGX_FEATURE_MII_LUMINANCE_ALPHA  Miiを描画する：Luminance Alpha
// AGX_FEATURE_MII_ALPHA_OPA        Miiを描画する：Alpha Opa
//
// AGX_BONE_MAX     ボーンの最大数

#ifdef GL_ES
precision highp float;
#else
#   define lowp
#   define mediump
#   define highp
#endif

//#ifndef AGX_BONE_MAX
//#   define AGX_BONE_MAX 15
//#endif
#ifndef AGX_DIR_LIGHT_MAX
#   define AGX_DIR_LIGHT_MAX 2
#endif

// ----------------------------------------
// 頂点シェーダーに入力される attribute 変数
//attribute highp   vec3 position;   //!< 入力:[ 1 : 1 ] 位置情報
#if defined(AGX_FEATURE_ALBEDO_TEXTURE) || defined(AGX_FEATURE_BUMP_TEXTURE) || defined(AGX_FEATURE_MASK_TEXTURE) || defined(AGX_FEATURE_ALPHA_TEXTURE)
//attribute mediump vec2 uv;  //!< 入力:[ 1 : 5 ] テクスチャー座標
#endif
//attribute mediump vec3 normal;     //!< 入力:[ 1 : 2 ] 法線ベクトル
//attribute mediump vec4 aBoneIndex;  //!< 入力:[ 1 : 3 ] ボーンのインデックス（最大4つ）
//attribute mediump vec4 aBoneWeight; //!< 入力:[ 1 : 4 ] ボーンの影響度（最大4つ）
#if defined(AGX_FEATURE_VERTEX_COLOR)
//attribute lowp    vec4 _color;      //!< 入力:[ 1 : 6 ] 頂点カラー
#endif
#if defined(AGX_FEATURE_BUMP_TEXTURE)
//attribute mediump vec3 tangent;    //!< 入力:[ 1 : 7 ] 接線ベクトル
#endif

// ^^ Commented attributes are provided by three.js.

// ----------------------------------------
// 頂点シェーダーに入力される uniform 変数
//uniform highp   mat4 modelViewMatrix;                            //!< 入力:[ 4      /  4 :   4 ] モデルの合成行列
//uniform mat4 projectionMatrix;
//uniform highp   mat4 viewMatrix;                           //!< 入力:[ 4      /  4 :   8 ] モデルのビュー行列
//uniform mediump mat3 normalMatrix;                         //!< 入力:[ 3      /  3 :  11 ] モデルの法線用行列
//uniform highp   mat4 modelMatrix;                          //!< 入力:[ 4      /  4 :  15 ] モデルのワールド変換行列
//uniform lowp    int  uBoneCount;                            //!< 入力:[ 1      /  1 :  16 ] ボーンの個数
//uniform highp   mat4 uBoneMatrices[AGX_BONE_MAX];           //!< 入力:[ 4 x 15 / 60 :  76 ] ボーンの行列配列
//uniform mediump mat3 uBoneNormalMatrices[AGX_BONE_MAX];     //!< 入力:[ 3 x 15 / 45 : 121 ] ボーンの法線行列配列
// ^^ Unused in favor of three.js skinning.
uniform lowp    int  uDirLightCount;                        //!< 入力:[ 1      /  1 : 122 ] 方向ライトの数
uniform mediump vec4 uDirLightDirAndType0;//!< 入力:[ 1 x  2 /  2 : 124 ] 平行ライトの向く方向
uniform mediump vec4 uDirLightDirAndType1;//!< 入力:[ 1 x  2 /  2 : 124 ] 平行ライトの向く方向
uniform mediump vec3 uDirLightColor0;     //!< 入力:[ 1 x  2 /  2 : 126 ] 平行ライトのカラー
uniform mediump vec3 uDirLightColor1;     //!< 入力:[ 1 x  2 /  2 : 126 ] 平行ライトのカラー
uniform mediump vec3 uHSLightSkyColor;                      //!< 入力:[ 1      /  1 : 127 ] 半球ライトのスカイカラー
uniform mediump vec3 uHSLightGroundColor;                   //!< 入力:[ 1      /  1 : 128 ] 半球ライトのグラウンドカラー
//uniform mediump vec3 cameraPosition;                                //!< 入力:[ 1      /  1 : 129 ] カメラの位置
// ^^ previously uEyePt
uniform mediump float uAlpha;                               //!< 入力:[ 1      /  1 : 130 ] アルファ値

// ^^ Commented uniforms are provided by three.js.

// ----------------------------------------
// フラグメントシェーダーに渡される varying 変数
varying lowp    vec4    vModelColor;                            //!< 出力:[ 1 : 1 ] モデルの色
#if !defined(AGX_FEATURE_BUMP_TEXTURE)
varying mediump vec3    vNormal;                                //!< 出力:[ 1 : 2 ] モデルの法線
#endif
#if defined(AGX_FEATURE_ALBEDO_TEXTURE) || defined(AGX_FEATURE_BUMP_TEXTURE) || defined(AGX_FEATURE_MASK_TEXTURE) || defined(AGX_FEATURE_ALPHA_TEXTURE)
varying mediump vec2    vTexcoord0;                             //!< 出力:[ 1 : 3 ] テクスチャーUV
#endif
// camera
varying mediump vec3    vEyeVecWorldOrTangent;                  //!< 出力:[ 1 : 4 ] 視線ベクトル
#if !defined(AGX_FEATURE_DISABLE_LIGHT)
// punctual light
varying mediump vec3    vPunctualLightDirWorldOrTangent;        //!< 出力:[ 1 : 5 ] ライトの方向
varying mediump vec3    vPunctualLightHalfVecWorldOrTangent;    //!< 出力:[ 1 : 6 ] カメラとライトのハーフベクトル
// GI
varying mediump vec3    vGISpecularLightColor;                  //!< 出力:[ 1 : 7 ] GIフレネルで使用するカラー
// Lighting Result
varying mediump vec3    vDiffuseColor;                          //!< 出力:[ 1 : 8 ] ディフューズライティング結果
#endif
// Reflect
#if defined(AGX_FEATURE_SPHERE_MAP_TEXTURE)
varying lowp    vec3    vReflectDir;                            //!< 出力:[ 1 : 9 ] 環境マップの反射ベクトル
#endif

// skinning_pars_vertex.glsl.js
#ifdef USE_SKINNING
    uniform mat4 bindMatrix;
    uniform mat4 bindMatrixInverse;
    uniform highp sampler2D boneTexture;
    mat4 getBoneMatrix( const in float i ) {
        int size = textureSize( boneTexture, 0 ).x;
        int j = int( i ) * 4;
        int x = j % size;
        int y = j / size;
        vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
        vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
        vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
        vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
        return mat4( v1, v2, v3, v4 );
    }
#endif

// ------------------------------------------------------------
// 頂点シェーダーのエントリーポイント
// ------------------------------------------------------------
void main()
{
    // ------------------------------------------------------------
    // 頂点変換用の処理
    // ------------------------------------------------------------
    highp   vec4 position_;  //!< 最終的な頂点
    mediump vec3 normal_;    //!< 最終的な法線
    mediump vec3 tangent_;   //!< 最終的な接線
    highp   vec4 positionWorld; //!< ワールド空間上での頂点


    // begin_vertex.glsl.js
    vec3 transformed = vec3( position );
// skinbase_vertex.glsl.js
#ifdef USE_SKINNING
    mat4 boneMatX = getBoneMatrix( skinIndex.x );
    mat4 boneMatY = getBoneMatrix( skinIndex.y );
    mat4 boneMatZ = getBoneMatrix( skinIndex.z );
    mat4 boneMatW = getBoneMatrix( skinIndex.w );
    // skinning_vertex.glsl.js
    vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
    vec4 skinned = vec4( 0.0 );
    skinned += boneMatX * skinVertex * skinWeight.x;
    skinned += boneMatY * skinVertex * skinWeight.y;
    skinned += boneMatZ * skinVertex * skinWeight.z;
    skinned += boneMatW * skinVertex * skinWeight.w;
    transformed = ( bindMatrixInverse * skinned ).xyz;
#endif

    // ----------------------------------------
    // ボーンが存在しない場合は位置と法線に手を加えない
    position_ = vec4(transformed.xyz, 1.0);



    normal_ = normal;
#if defined(AGX_FEATURE_BUMP_TEXTURE)
    tangent_ = tangent.xyz;
#endif
    // skinnormal_vertex.glsl.js
#ifdef USE_SKINNING
    mat4 skinMatrix = mat4( 0.0 );
    skinMatrix += skinWeight.x * boneMatX;
    skinMatrix += skinWeight.y * boneMatY;
    skinMatrix += skinWeight.z * boneMatZ;
    skinMatrix += skinWeight.w * boneMatW;
    skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;

    normal_ = vec4( skinMatrix * vec4( normal_, 0.0 ) ).xyz;
#if defined(AGX_FEATURE_BUMP_TEXTURE)
    tangent_ = vec4( skinMatrix * vec4( tangent_, 0.0 ) ).xyz;
#endif // defined(AGX_FEATURE_BUMP_TEXTURE)
#endif // USE_SKINNING

    // ----------------------------------------
    // ワールド上での位置を求める
    positionWorld = modelMatrix * position_;
    // 最終結果を行う
    position_ = projectionMatrix * modelViewMatrix * position_;
    normal_   = normalize(normalMatrix * normal_);
#if defined(AGX_FEATURE_BUMP_TEXTURE)
    tangent  = normalize(normalMatrix * tangent_);
#endif

    // ----------------------------------------
    // 計算結果を保持させる
    gl_Position = position_;
#if !defined(AGX_FEATURE_BUMP_TEXTURE)
    vNormal     = normal_;
#endif
#if defined(AGX_FEATURE_ALBEDO_TEXTURE) || defined(AGX_FEATURE_BUMP_TEXTURE) || defined(AGX_FEATURE_MASK_TEXTURE) || defined(AGX_FEATURE_ALPHA_TEXTURE)
    // テクスチャー座標を設定する
    vTexcoord0 = uv;
#endif
    // モデルの色を指定する
#if defined(AGX_FEATURE_VERTEX_COLOR)
    lowp vec4 modelColor = aColor;

#else
    lowp vec4 modelColor = vec4(1.0, 1.0, 1.0, 1.0);
#endif

    // プリマルチプライドアルファ
#if defined(AGX_FEATURE_PREMULTIPLY_ALPHA)
    modelColor *= uAlpha;
#else
    modelColor.a *= uAlpha;
#endif


    // ------------------------------------------------------------
    // ライト用の処理
    // ------------------------------------------------------------
    mediump vec3 eyeVecWorld;   //!< ワールド状態での視線ベクトル
    mediump vec3 eyeVec;        //!< 最終的にフラグメントシェーダーに渡す視線ベクトル（バンプの有無によって、ワールド座標系になったり、タンジェント座標系になったりする）

    vec4 eye = modelViewMatrix * position_;

    // 視線ベクトルを取得する
    //eyeVecWorld = normalize(cameraPosition - positionWorld.xyz);
    eyeVecWorld = normalize(-(eye.xyz) - positionWorld.xyz);//normalize(cameraPosition - positionWorld.xyz);
    eyeVec = eyeVecWorld;

    lowp vec3 diffuseColor = vec3(0.0); // バーテックスシェーダーで計算できるディフューズの色をここに格納する

#   if defined(AGX_FEATURE_BUMP_TEXTURE)
    // Normal, Binormal, Tangent を取得する
    mediump vec3 n = normal;
    mediump vec3 t = tangent;
    mediump vec3 b = cross(n, t);
    // 接空間からローカルへ変換する行列を設定する（mat3(N, T, B)の逆行列）
    mediump mat3 tangentMatrix = mat3(t.x, b.x, n.x, t.y, b.y, n.y, t.z, b.z, n.z);
    // 視線ベクトルを接空間へ
    vEyeVecWorldOrTangent.xyz = tangentMatrix * eyeVec;
#else
    vEyeVecWorldOrTangent.xyz = eyeVec;
#endif

#if !defined(AGX_FEATURE_DISABLE_LIGHT)
    // punctual lightの設定
    if (uDirLightCount > 0)
    {
        mediump vec3 lightDir;

        // 方向ライト
        if (uDirLightDirAndType0.w < 0.0) { lightDir = uDirLightDirAndType0.xyz; }
        // 点光源ライト
        else                                { lightDir = uDirLightDirAndType0.xyz - positionWorld.xyz; }
        lightDir = normalize(lightDir);

#   if defined(AGX_FEATURE_BUMP_TEXTURE)
        // ライトを接空間へ
        vPunctualLightDirWorldOrTangent.xyz = tangentMatrix * lightDir;
#   else
        vPunctualLightDirWorldOrTangent.xyz = lightDir;
#   endif

        // Halfベクトルを求める
        vPunctualLightHalfVecWorldOrTangent.xyz = normalize(vPunctualLightDirWorldOrTangent.xyz + vEyeVecWorldOrTangent.xyz);

        // Diffuse計算
        diffuseColor += (uDirLightColor0.rgb * clamp(dot(lightDir, normal), 0.0, 1.0));
    }
    if (uDirLightCount > 1)
    {
        mediump vec3 lightDir;

        // 方向ライト
        if (uDirLightDirAndType1.w < 0.0) { lightDir = uDirLightDirAndType1.xyz; }
        // 点光源ライト
        else                                { lightDir = uDirLightDirAndType1.xyz - positionWorld.xyz; }
        lightDir = normalize(lightDir);

        diffuseColor += max(dot(lightDir, normal), 0.0) * uDirLightColor1;
    }
    // ライトは1.0を超えないように
    diffuseColor = min(diffuseColor, 1.0);
#endif

#if defined(AGX_FEATURE_SPHERE_MAP_TEXTURE)
    {
        // キューブ環境マップ用の反射ベクトルを求める
//        vReflectDir = reflect(normalize(positionWorld.xyz - cameraPosition), normal);

        // スフィア環境マップ用の反射ベクトルを求める
//        vReflectDir = normalize((uViewMatrix * vec4(normal, 0.0)).xyz) * 0.5 + 0.5;

        // ビュー座標系での位置と法線を取得
        mediump vec3 viewNormal   = normalize(mat3(uViewMatrix) * normal);
        mediump vec4 viewPosition = uViewMatrix * positionWorld;
        viewPosition = viewPosition / viewPosition.w;
        // ビュー座標系での頂点ベクトルを取得
        viewPosition.z = 1.0 - viewPosition.z;
        mediump vec3 viewPositionVec = normalize(viewPosition.xyz);
        // ビュー座標系での反射ベクトルを求める
        mediump vec3 viewReflect  = viewPositionVec - 2.0 * dot(viewPositionVec, viewNormal) * viewNormal;
        // 両面スフィア環境マップではないので、反射ベクトルを調整
        viewReflect = normalize(viewReflect - vec3(0.0, 0.0, 1.5));
        // 反射ベクトルをテクスチャー座標系へ
        vReflectDir = viewReflect * 0.5 + 0.5;

        // 公式
//        mediump vec3  viewPositionVec = normalize(vec3(uViewMatrix * positionWorld));
//        mediump vec3  viewReflectVec = viewPositionVec - 2.0 * dot(viewPositionVec, normal) * normal;
//        mediump float m = 2.0 * sqrt(viewReflectVec.x * viewReflectVec.x +
//                                     viewReflectVec.y * viewReflectVec.y +
//                                     (viewReflectVec.z + 1.0) * (viewReflectVec.z * 1.0));
//        vReflectDir = viewReflectVec / m + 0.5;

        // 別版
//        mediump vec3 posW = positionWorld.xyz;
//        mediump vec3 dir  = normalize(mat3(uViewMatrix) * normal);
//
//        mediump float radius     = 75.0;
//        mediump vec3  posWDir    = dot(dir, posW) * dir;
//        mediump vec3  posWDirV   = posW - posWDir;
//        mediump float lengthDir  = sqrt(radius * radius - dot(posWDirV, posWDirV)) - length(posWDir);
//        vReflectDir = normalize(posW + dir * lengthDir) * 0.5 + 0.5;
    }
#endif

#if !defined(AGX_FEATURE_DISABLE_LIGHT)
    // GIの計算
    {
        mediump vec3 hemiColor;
        mediump vec3 sky = uHSLightSkyColor;
        mediump vec3 ground = uHSLightGroundColor;

        {
            mediump float skyRatio = (normal.y + 1.0) * 0.5;
            hemiColor =  (sky * skyRatio + ground * (1.0 - skyRatio));
            diffuseColor += hemiColor;
        }

        {
//            mediump vec3 reflectDir = -reflect(normal, eyeVecWorld); // おそらくコレで良いはず
            mediump vec3 reflectDir = 2.0 * dot(eyeVecWorld, normal) * normal - eyeVecWorld; // 多少冗長でも、正しい計算で行なう

            mediump float skyRatio = (reflectDir.y + 1.0) * 0.5;
            hemiColor =  (sky * skyRatio + ground * (1.0 - skyRatio));
            vGISpecularLightColor.rgb = hemiColor;
        }
    }
#endif

    // モデルの色を設定
    vModelColor = modelColor;
#if !defined(AGX_FEATURE_DISABLE_LIGHT)
    vDiffuseColor.rgb = diffuseColor;
#endif
}
`,DS=`
#define AGX_FEATURE_ALBEDO_TEXTURE
#define AGX_FEATURE_MII
/**
 * @file    LUT.fsh
 * @brief   LUT
 * @since   2014/10/02
 *
 * Copyright (c)2014 Nintendo Co., Ltd. All rights reserved.
 */

// シェーダーの種類毎に設定されるマクロリスト
// AGX_FEATURE_VERTEX_COLOR         頂点カラーが有効
// AGX_FEATURE_ALBEDO_TEXTURE       アルベドテクスチャーが有効
// AGX_FEATURE_BUMP_TEXTURE         バンプテクスチャーが有効
// AGX_FEATURE_MASK_TEXTURE         マスクテクスチャーが有効
// AGX_FEATURE_ALPHA_TEXTURE        アルファテクスチャーが有効
// AGX_FEATURE_SPHERE_MAP_TEXTURE   スフィア環境マップが有効
// AGX_FEATURE_SKIN_MASK            肌マスクが有効（u_const1）
// AGX_FEATURE_HAIR_MASK            髪マスクが有効（u_const2）
// AGX_FEATURE_ALPHA_TEST           アルファテストが有効
// AGX_FEATURE_FADE_OUT_COLOR       フェードアウトカラーが有効（u_const3）
// AGX_FEATURE_DISABLE_LIGHT        ライトが無効
// AGX_FEATURE_ALPHA_COLOR_FILTER   アルベドアルファによる色替えが有効
// AGX_FEATURE_ALBEDO_ALPHA         アルベドのアルファをカラーのアルファに適用
// AGX_FEATURE_PREMULTIPLY_ALPHA    プレマルチプライアルファな描画
// AGX_FEATURE_MII                  Miiを描画する
// AGX_FEATURE_MII_CONSTANT         Miiを描画する：Constant
// AGX_FEATURE_MII_TEXTURE_DIRECT   Miiを描画する：Texture Direct
// AGX_FEATURE_MII_RGB_LAYERED      Miiを描画する：RGB Layered
// AGX_FEATURE_MII_ALPHA            Miiを描画する：Alpha
// AGX_FEATURE_MII_LUMINANCE_ALPHA  Miiを描画する：Luminance Alpha
// AGX_FEATURE_MII_ALPHA_OPA        Miiを描画する：Alpha Opa

#ifdef GL_ES
precision mediump float;
#else
#   define lowp
#   define mediump
#   define highp
#endif

/// 変調処理のマクロ
#define FFL_MODULATE_MODE_CONSTANT        0
#define FFL_MODULATE_MODE_TEXTURE_DIRECT  1
#define FFL_MODULATE_MODE_RGB_LAYERED     2
#define FFL_MODULATE_MODE_ALPHA           3
#define FFL_MODULATE_MODE_LUMINANCE_ALPHA 4
#define FFL_MODULATE_MODE_ALPHA_OPA       5

// ----------------------------------------
// フラグメントシェーダーに入力される uniform 変数
uniform int   uMode;   ///< 描画モード
uniform bool uAlphaTest;
uniform bool uLightEnable;
uniform mediump vec4    u_const1;            //!< 入力:[ 1 : 1 ] カラー0 (OR 肌カラー)
uniform mediump vec4    u_const2;            //!< 入力:[ 1 : 2 ] カラー1 (OR 髪カラー)
uniform mediump vec4    u_const3;            //!< 入力:[ 1 : 3 ] カラー2 (OR フェードアウトカラー)
//#if !defined(AGX_FEATURE_DISABLE_LIGHT)
uniform mediump vec3    uLightColor;        //!< 入力:[ 1 : 4 ] ライトの色
//#endif

#if defined(AGX_FEATURE_ALBEDO_TEXTURE)
uniform sampler2D       uAlbedoTexture;     //!< 入力: テクスチャー
#endif
#if defined(AGX_FEATURE_BUMP_TEXTURE)
uniform sampler2D       uNormalTexture;     //!< 入力: ノーマルマップ
#endif
#if defined(AGX_FEATURE_MASK_TEXTURE)
uniform sampler2D       uMaskTexture;       //!< 入力：マスクテクスチャー
#endif
#if defined(AGX_FEATURE_ALPHA_TEXTURE)
uniform sampler2D       uAlphaTexture;      //!< 入力：アルファテクスチャー
#endif
uniform sampler2D       uLUTSpecTexture;    //!< 入力: スペキュラーLUT
uniform sampler2D       uLUTFresTexture;    //!< 入力: フレネルLUT
#if defined(AGX_FEATURE_SPHERE_MAP_TEXTURE)
uniform sampler2D       uSphereMapTexture;  //!< 入力: スフィア環境マップ
#endif

// ----------------------------------------
// フラグメントシェーダーに渡される varying 変数
varying lowp    vec4    vModelColor;                            //!< 出力:[ 1 : 1 ] モデルの色
#if !defined(AGX_FEATURE_BUMP_TEXTURE)
varying mediump vec3    vNormal;                                //!< 出力:[ 1 : 2 ] モデルの法線
#endif
#if defined(AGX_FEATURE_ALBEDO_TEXTURE) || defined(AGX_FEATURE_BUMP_TEXTURE) || defined(AGX_FEATURE_MASK_TEXTURE) || defined(AGX_FEATURE_ALPHA_TEXTURE)
varying mediump vec2    vTexcoord0;                             //!< 出力:[ 1 : 3 ] テクスチャーUV
#endif
// camera
varying mediump vec3    vEyeVecWorldOrTangent;                  //!< 出力:[ 1 : 4 ] 視線ベクトル
//#if !defined(AGX_FEATURE_DISABLE_LIGHT)
// punctual light
varying mediump vec3    vPunctualLightDirWorldOrTangent;        //!< 出力:[ 1 : 5 ] ライトの方向
varying mediump vec3    vPunctualLightHalfVecWorldOrTangent;    //!< 出力:[ 1 : 6 ] カメラとライトのハーフベクトル
// GI
varying mediump vec3    vGISpecularLightColor;                  //!< 出力:[ 1 : 7 ] GIフレネルで使用するカラー
// Lighting Result
varying mediump vec3    vDiffuseColor;                          //!< 出力:[ 1 : 8 ] ディフューズライティング結果
//#endif
// Reflect
#if defined(AGX_FEATURE_SPHERE_MAP_TEXTURE)
varying lowp    vec3    vReflectDir;                            //!< 出力:[ 1 : 9 ] 環境マップの反射ベクトル
#endif

// ------------------------------------------------------------
// フラグメントシェーダーのエントリーポイント
// ------------------------------------------------------------
void main()
{

    // ディフューズカラーを取得
    lowp vec4 albedoColor = vec4(1.0, 1.0, 1.0, 1.0);

    // ============================================================
    //  Mii
    // ============================================================
#if defined(AGX_FEATURE_MII)

   //#if defined(AGX_FEATURE_MII_CONSTANT)
    if(uMode == FFL_MODULATE_MODE_CONSTANT)
    {
        albedoColor = vec4(u_const1.rgb, 1.0);
    }
    //#elif defined(AGX_FEATURE_MII_TEXTURE_DIRECT)
    else if(uMode == FFL_MODULATE_MODE_TEXTURE_DIRECT)
    {
        albedoColor = texture2D(uAlbedoTexture, vTexcoord0);
    }
    //#elif defined(AGX_FEATURE_MII_RGB_LAYERED)
    else if(uMode == FFL_MODULATE_MODE_RGB_LAYERED)
    {
        albedoColor = texture2D(uAlbedoTexture, vTexcoord0);
        albedoColor = vec4(albedoColor.r * u_const1.rgb + albedoColor.g * u_const2.rgb + albedoColor.b * u_const3.rgb,
                           albedoColor.a);
    }
    //#elif defined(AGX_FEATURE_MII_ALPHA)
    else if(uMode == FFL_MODULATE_MODE_ALPHA)
    {
        albedoColor = texture2D(uAlbedoTexture, vTexcoord0);
        albedoColor = vec4(u_const1.rgb, albedoColor.r);
    }
    //#elif defined(AGX_FEATURE_MII_LUMINANCE_ALPHA)
    else if(uMode == FFL_MODULATE_MODE_LUMINANCE_ALPHA)
    {
        albedoColor = texture2D(uAlbedoTexture, vTexcoord0);
        albedoColor = vec4(albedoColor.g * u_const1.rgb, albedoColor.r);
    }
    //#elif defined(AGX_FEATURE_MII_ALPHA_OPA)
    else if(uMode == FFL_MODULATE_MODE_ALPHA_OPA)
    {
        albedoColor = texture2D(uAlbedoTexture, vTexcoord0);
        albedoColor = vec4(albedoColor.r * u_const1.rgb, 1.0);
    }
//#endif

    albedoColor = albedoColor * vModelColor;
#endif

    // ============================================================
    //  Albedo Texture
    // ============================================================
#if !defined(AGX_FEATURE_MII) && defined(AGX_FEATURE_ALBEDO_TEXTURE)
    albedoColor = texture2D(uAlbedoTexture, vTexcoord0);
#endif
#if defined(AGX_FEATURE_ALPHA_TEXTURE)
    albedoColor.a   = texture2D(uAlphaTexture, vTexcoord0).r;
#endif

    // ============================================================
    //  Color Mask
    // ============================================================
    // ----------------------------------------
    // Deprecated
#if defined(AGX_FEATURE_ALPHA_COLOR_FILTER)
    // 一部の場所にColor0を反映する
    albedoColor.rgb = (albedoColor.rgb * albedoColor.a + u_const1.rgb * (1.0 - albedoColor.a));
    albedoColor.a = 1.0;
#elif defined(AGX_FEATURE_MASK_TEXTURE)
    lowp vec3  maskTextureColor = texture2D(uMaskTexture, vTexcoord0).rgb;

#   if defined(AGX_FEATURE_SKIN_MASK) && defined(AGX_FEATURE_HAIR_MASK)
    // 肌と髪両方マスクが存在する
    lowp float maskColorValue = maskTextureColor.g + maskTextureColor.b;
    lowp vec3  maskColor      = maskTextureColor.g * u_const1.rgb + maskTextureColor.b * u_const2.rgb;
    albedoColor.rgb = (albedoColor.rgb * (1.0 - maskColorValue) + maskColor);

#   elif defined(AGX_FEATURE_SKIN_MASK)
    // 肌しかマスクが存在しない
    albedoColor.rgb = (albedoColor.rgb * (1.0 - maskTextureColor.g) + maskTextureColor.g * u_const1.rgb);

#   elif defined(AGX_FEATURE_HAIR_MASK)
    // 髪しかマスクが存在しない
    albedoColor.rgb = (albedoColor.rgb * (1.0 - maskTextureColor.b) + maskTextureColor.b * u_const2.rgb);

#   endif
#endif

    // アルベドに頂点カラーを掛ける
    albedoColor *= vModelColor;

    // ============================================================
    //  Alpha test
    // ============================================================
//#if defined(AGX_FEATURE_ALPHA_TEST)
    if (uAlphaTest && albedoColor.a < 0.5) { discard; }
//#endif

    // ============================================================
    //  Bumpmap
    // ============================================================
    // 頂点からの情報
    lowp vec3 normalWorldOrTangent;
#if defined(AGX_FEATURE_BUMP_TEXTURE)
    // バンプマップから法線を取得する
    mediump vec3 bumpNormal = texture2D(uNormalTexture, vTexcoord0).rgb;

    // 法線の正規化は処理が重いのでいったん正規化しない様に...
//    normalWorldOrTangent = normalize(bumpNormal * 2.0 - 1.0);
    normalWorldOrTangent = bumpNormal * 2.0 - 1.0;

#else
    // 法線を正規化して取得する
    normalWorldOrTangent = normalize(vNormal);
#endif

    // ============================================================
    //  Lighting
    // ============================================================
    // 最終的なカラー情報
    lowp vec4 colorOut = vec4(0.0, 0.0, 0.0, albedoColor.a);  // 最終的に出力される色
    lowp vec3 fresnel  = vec3(0.0, 0.0, 0.0);   // フレネル
    lowp vec3 specular = vec3(0.0, 0.0, 0.0);   // スペキュラー

//#if !defined(AGX_FEATURE_DISABLE_LIGHT)
if (uLightEnable) {

    // BRDFの計算を行う（バンプマッピングの場合は接空間）
    lowp vec3 N = normalWorldOrTangent;
    lowp vec3 V = vEyeVecWorldOrTangent.xyz;//normalize(vEyeVecWorldOrTangent.xyz);
    lowp vec3 I = vPunctualLightDirWorldOrTangent.xyz;//normalize(vPunctualLightDirWorldOrTangent.xyz);
    lowp vec3 H = vPunctualLightHalfVecWorldOrTangent.xyz;//normalize(vPunctualLightHalfVecWorldOrTangent.xyz);


    // ----------------------------------------
    // punctual light
    // 平行光源や点光源などの厳密なライティング計算を行なうもの
    {
        lowp float fSpecular = dot(N, H);

        lowp float specularIntensity = texture2D(uLUTSpecTexture, vec2(fSpecular)).r;
        specular = (specularIntensity * uLightColor.rgb);
    }

    // ----------------------------------------
    // GI
    // 半球ライトやIBL、SHのように法線方向に半球積分された結果でライティング計算を行なうもの
    {
        lowp float fFresnel = dot(N, V);
        lowp float fresnelIntensity = texture2D(uLUTFresTexture, vec2(fFresnel)).r;

        fresnel = (fresnelIntensity * vGISpecularLightColor.rgb);
    }
}
//#endif

#if defined(AGX_FEATURE_SPHERE_MAP_TEXTURE)
    // スフィア環境マップ
    specular += texture2D(uSphereMapTexture, vReflectDir.xy).rgb;
#endif

    // ============================================================
    //  Specular Mask
    // ============================================================
#if !defined(AGX_FEATURE_ALPHA_COLOR_FILTER) && defined(AGX_FEATURE_MASK_TEXTURE)
    // スペキュラーマスク
    specular = specular * maskTextureColor.r + fresnel;
#else
    specular += fresnel;
#endif

    // ============================================================
    //  Output
    // ============================================================
//#if !defined(AGX_FEATURE_DISABLE_LIGHT)
if (uLightEnable)
    colorOut.rgb = vDiffuseColor.rgb * albedoColor.rgb + specular;
//#else
else
    colorOut.rgb = albedoColor.rgb;
//#endif

    // フェードアウトを実装する
#if defined(AGX_FEATURE_FADE_OUT_COLOR)
    colorOut.rgb = (colorOut.rgb * (1.0 - u_const3.a)) + (u_const3.rgb * u_const3.a);
#endif

    // 色を反映させる
    gl_FragColor = colorOut;

    //#include <tonemapping_fragment>
    //#include <colorspace_fragment>
}
`;class A8{keys;constructor(A){this.keys=A.sort((Q,E)=>Q.x-E.x)}interpolate(A,Q,E,B,I){let C=2*A*A*A-3*A*A+1,K=A*A*A-2*A*A+A,J=-2*A*A*A+3*A*A,U=A*A*A-A*A;return C*Q+K*B+J*E+U*I}clamp(A,Q,E){return Math.min(Math.max(A,Q),E)}generateLUT(A=512){let Q=new Uint8Array(A),E=0;for(let B=0;B<A;B++){let I=B/(A-1);while(E<this.keys.length-2&&I>this.keys[E+1].x)E++;let C=this.keys[E],K=this.keys[E+1],J=(I-C.x)/(K.x-C.x);J=isNaN(J)?0:J;let U=this.interpolate(J,C.y,K.y,C.dx*(K.x-C.x),K.dx*(K.x-C.x));Q[B]=Math.round(this.clamp(U,0,1)*255)}return Q}}class K0 extends bA{static LUTSpecularTextureType={NONE:0,DEFAULT_02:1,SKIN_01:2,MAX:3};static LUTFresnelTextureType={NONE:0,DEFAULT_02:1,SKIN_01:2,MAX:3};static lutDefinitions={specular:{[K0.LUTSpecularTextureType.NONE]:new A8([{x:0,y:0,dx:0,dy:0},{x:1,y:0,dx:0,dy:0}]),[K0.LUTSpecularTextureType.DEFAULT_02]:new A8([{x:0,y:0,dx:0,dy:0},{x:0.05,y:0,dx:0,dy:0},{x:0.8,y:0.038,dx:0.157894736842105,dy:0.157894736842105},{x:1,y:0.11,dx:0,dy:0}]),[K0.LUTSpecularTextureType.SKIN_01]:new A8([{x:0,y:0.03,dx:-0.105263157894737,dy:-0.105263157894737},{x:1,y:0,dx:0,dy:0}])},fresnel:{[K0.LUTFresnelTextureType.NONE]:new A8([{x:0,y:0,dx:0,dy:0},{x:1,y:0,dx:0,dy:0}]),[K0.LUTFresnelTextureType.DEFAULT_02]:new A8([{x:0,y:0.3,dx:-0.105263157894734,dy:-0.105263157894734},{x:0.175,y:0.23,dx:-0.626315789473681,dy:-0.626315789473681},{x:0.6,y:0.05,dx:-0.210526315789474,dy:-0.210526315789474},{x:1,y:0,dx:-0.105263157894737,dy:-0.105263157894737}]),[K0.LUTFresnelTextureType.SKIN_01]:new A8([{x:0.005,y:0.35,dx:-0.105263157894734,dy:-0.105263157894734},{x:0.173,y:0.319,dx:-0.205263157894734,dy:-0.205263157894734},{x:0.552,y:0.051,dx:-0.210526315789474,dy:-0.210526315789474},{x:1,y:0.001,dx:0,dy:0}])}};static modulateToLUTSpecular=[K0.LUTSpecularTextureType.SKIN_01,K0.LUTSpecularTextureType.DEFAULT_02,K0.LUTSpecularTextureType.SKIN_01,K0.LUTSpecularTextureType.SKIN_01,K0.LUTSpecularTextureType.DEFAULT_02,K0.LUTSpecularTextureType.DEFAULT_02,K0.LUTSpecularTextureType.DEFAULT_02,K0.LUTSpecularTextureType.NONE,K0.LUTSpecularTextureType.NONE,K0.LUTSpecularTextureType.DEFAULT_02,K0.LUTSpecularTextureType.DEFAULT_02];static modulateToLUTFresnel=[K0.LUTFresnelTextureType.SKIN_01,K0.LUTFresnelTextureType.DEFAULT_02,K0.LUTFresnelTextureType.SKIN_01,K0.LUTFresnelTextureType.SKIN_01,K0.LUTFresnelTextureType.DEFAULT_02,K0.LUTFresnelTextureType.DEFAULT_02,K0.LUTFresnelTextureType.DEFAULT_02,K0.LUTFresnelTextureType.NONE,K0.LUTFresnelTextureType.NONE,K0.LUTFresnelTextureType.DEFAULT_02,K0.LUTFresnelTextureType.DEFAULT_02];static _lutTextures=null;static getLUTTextures(A=512){if(!K0._lutTextures){let Q={specular:{},fresnel:{}},E=Number(ZB)<137?L1:SQ;for(let[B,I]of Object.entries(K0.lutDefinitions.specular)){let C=I.generateLUT(A),K=new h0(C,A,1,E,x0);K.needsUpdate=!0,Q.specular[B]=K}for(let[B,I]of Object.entries(K0.lutDefinitions.fresnel)){let C=I.generateLUT(A),K=new h0(C,A,1,E,x0);K.needsUpdate=!0,Q.fresnel[B]=K}K0._lutTextures=Q}return K0._lutTextures}static defaultHSLightGroundColor=new a(0.87843,0.72157,0.5898);static defaultHSLightSkyColor=new a(0.87843,0.83451,0.80314);static defaultDirLightColor0=new a(0.35137,0.32392,0.32392);static defaultDirLightColor1=new a(0.10039,0.09255,0.09255);static defaultDirLightCount=2;static defaultDirLightDirAndType0=new MA(-0.2,0.5,0.8,-1);static defaultDirLightDirAndType1=new MA(0,-0.19612,0.98058,-1);static defaultLightColor=new a(0.35137,0.32392,0.32392);static defaultLightDirection=this.defaultDirLightDirAndType0;static getBlendOptionsFromModulateType(A){if(A>=0&&A<=5)return{blending:vQ,blendSrcAlpha:EE,blendDstAlpha:PE};else if(A>=6&&A<=8)return{blending:vQ,blendSrc:EE,blendDst:iE,blendDstAlpha:PE};else if(A>=9&&A<=13)return{blending:vQ,blendSrc:N1,blendSrcAlpha:EE,blendDst:LE};else if(A>=14&&A<=17)return{blending:vQ,blendSrc:EE,blendDst:iE,blendSrcAlpha:PE,blendDstAlpha:PE};else return console.error(`Unknown modulate type: ${A}.`),{}}modulateMode;modulateType;modulateColor;lightEnable;_side;constructor(A={}){let Q=A.modulateMode??0,E=A.modulateType??0,B=A.lightEnable??!0,I=A.map||null,C=E>=6&&E<=8?!0:A.alphaTest,K=E===6?y0:A.side||jQ,J={};if(Array.isArray(A.modulateColor)&&A.modulateColor.length===3)J={u_const1:{value:A.modulateColor[0]},u_const2:{value:A.modulateColor[1]},u_const3:{value:A.modulateColor[2]}};else J={u_const1:{value:A.modulateColor||new MA(1,1,1,1)}};let U=K0.getLUTTextures(),Y=K0.modulateToLUTSpecular[E]??K0.LUTSpecularTextureType.NONE,H=K0.modulateToLUTFresnel[E]??K0.LUTFresnelTextureType.NONE,R=U.specular[Y],O=U.fresnel[H],N=Object.assign({},J,{uBoneCount:{value:0},uAlpha:{value:1},uHSLightGroundColor:{value:A.hslightGroundColor||K0.defaultHSLightGroundColor},uHSLightSkyColor:{value:A.hslightSkyColor||K0.defaultHSLightSkyColor},uDirLightColor0:{value:A.dirLightColor0||K0.defaultDirLightColor0},uDirLightColor1:{value:A.dirLightColor1||K0.defaultDirLightColor1},uDirLightCount:{value:A.dirLightCount||K0.defaultDirLightCount},uDirLightDirAndType0:{value:A.dirLightDirAndType0||K0.defaultDirLightDirAndType0.clone()},uDirLightDirAndType1:{value:A.dirLightDirAndType1||K0.defaultDirLightDirAndType1.clone()},uLightEnable:{value:B},uLightColor:{value:A.lightColor||K0.defaultLightColor},uMode:{value:Q},uAlphaTest:{value:C},uAlbedoTexture:{value:I},uLUTSpecTexture:{value:R},uLUTFresTexture:{value:O}});super({vertexShader:A.vertexShader||FS,fragmentShader:A.fragmentShader||DS,uniforms:N,side:K,...Q!==0?K0.getBlendOptionsFromModulateType(E):{}});this.modulateMode=Q,this.modulateType=E,this.modulateColor=A.modulateColor,this.lightEnable=B,this._side=A.side}get map(){return this.uniforms.uAlbedoTexture.value}set map(A){this.uniforms.uAlbedoTexture.value=A}get lightDirection(){return this.uniforms.uDirLightDirAndType0.value}set lightDirection(A){this.uniforms.uDirLightDirAndType0.value=A,this.uniforms.uDirLightDirAndType0.value.w=-1}}var bo={specularMode:0},fo={ambient:new MA(0.8,0.8,0.8,1),diffuse:new MA(0.8,0.8,0.8,1),specular:new MA(0.1,0.1,0.1,1),specularPower:0.01,specularMode:0},uo=[{ambient:new MA(0.85,0.75,0.75,1),diffuse:new MA(0.75,0.75,0.75,1),specular:new MA(0.3,0.3,0.3,1),specularPower:1.2,specularMode:0},{ambient:new MA(1,1,1,1),diffuse:new MA(0.7,0.7,0.7,1),specular:new MA(0,0,0,1),specularPower:40,specularMode:1},{ambient:new MA(0.9,0.85,0.85,1),diffuse:new MA(0.75,0.75,0.75,1),specular:new MA(0.22,0.22,0.22,1),specularPower:1.5,specularMode:0},{ambient:new MA(0.85,0.75,0.75,1),diffuse:new MA(0.75,0.75,0.75,1),specular:new MA(0.3,0.3,0.3,1),specularPower:1.2,specularMode:0},{ambient:new MA(1,1,1,1),diffuse:new MA(0.7,0.7,0.7,1),specular:new MA(0.35,0.35,0.35,1),specularPower:10,specularMode:1},{ambient:new MA(0.75,0.75,0.75,1),diffuse:new MA(0.72,0.72,0.72,1),specular:new MA(0.3,0.3,0.3,1),specularPower:1.5,specularMode:0},{ambient:new MA(1,1,1,1),diffuse:new MA(0.7,0.7,0.7,1),specular:new MA(0,0,0,1),specularPower:40,specularMode:1},{ambient:new MA(1,1,1,1),diffuse:new MA(0.7,0.7,0.7,1),specular:new MA(0,0,0,1),specularPower:40,specularMode:1},{ambient:new MA(1,1,1,1),diffuse:new MA(0.7,0.7,0.7,1),specular:new MA(0,0,0,1),specularPower:40,specularMode:1},{ambient:new MA(0.95622,0.95622,0.95622,1),diffuse:new MA(0.49673,0.49673,0.49673,1),specular:new MA(0.24099,0.24099,0.24099,1),specularPower:3,specularMode:0},{ambient:new MA(0.95622,0.95622,0.95622,1),diffuse:new MA(1.08497,1.08497,1.08497,1),specular:new MA(0.2409,0.2409,0.2409,1),specularPower:3,specularMode:0}],po=new MA(0.73,0.73,0.73,1),mo=new MA(0.6,0.6,0.6,1),co=new MA(0.7,0.7,0.7,1),lo=new MA(0.5,0.5,0.5,1),no=new MA(0.9,0.9,0.9,1),so=new MA(1,1,1,1),io=new y(-0.4531539381,0.4226179123,0.7848858833),oo=new y(-0.35,1,0.8),ro=new y(-0.5,0.366,0.785),ao=new MA(0.3,0.3,0.3,1),to=2,eo=[0.25098,0.27451,0.30588],Ar=[0.43922,0.12549,0.06275];var Qr=[0.75294,0.62745,0.18824],Er=[0.05126930067255049,0.061246141699984984,0.07618418934386001],Br=[0.1620327698875954,0.014443805936996105,0.0051820344376627735];var Ir=[0.5271132835871205,0.3515313874944194,0.02955820686563641];var Cr="#902010";var Kr="#c0a030",Jr={0:[0.824,0.118,0.078],1:[1,0.431,0.098],2:[1,0.847,0.125],3:[0.471,0.824,0.125],4:[0,0.471,0.188],5:[0.039,0.282,0.706],6:[0.235,0.667,0.871],7:[0.961,0.353,0.49],8:[0.451,0.157,0.678],9:[0.282,0.22,0.094],10:[0.878,0.878,0.878],11:[0.094,0.094,0.078]};var wE;if(typeof window==="undefined")wE=self;else wE=window;wE.FFLShaderMaterial=BB;wE.LUTShaderMaterial=K0;var fK={WiiU:{m:null,f:null},Switch:{m:null,f:null},Miitomo:{m:null,f:null}},MS=new YK;//! NOTE: THIS ASSUMES THE ROOT IS THE PUBLIC FOLDER
function gX(A,Q){return`/assets/models/miiBody${A}_${Q}.glb`}async function xX(A){let Q=await MS.loadAsync(A);var E=new xI(Q.scene);let B=Q.scene,I=Q.animations[0];E.clipAction(I,B).stop();let K=Q.animations.find((U)=>U.name==="Wait"),J=E.clipAction(K,B);return J.play(),J.timeScale=0,E.update(),B}async function lX(){fK.Miitomo.m=await xX(gX("M","miitomo")),fK.Miitomo.f=await xX(gX("F","miitomo"))}wE.bodyModels=fK;function bX(A,Q="GeneratedType",E=0){if(E>5)return"";let B="  ".repeat(E),I=`${B}/**
${B} * @typedef {Object} ${Q}
`;Object.keys(A).forEach((C)=>{if(C.startsWith("_"))return;let K=A[C],J=typeof K,U;if(K===null)U="null";else if(Array.isArray(K)){let Y=K.length>0?typeof K[0]:"any";if(typeof K[0]==="object"&&K[0]!==null)Y=bX(K[0],`${Q}_${C}_Item`,E+1);U=`Array<${Y}>`}else if(J==="object")U=bX(K,`${Q}_${C}`,E+1)||"Object";else U=J;I+=`${B} * @property {${U}} ${C}
`}),I+=`${B} */
`,console.log(I)}function Nr(typeName){if(typeof typeName!=="string")throw new Error;eval(`
		const empty = new Uint8Array(${typeName}.size);
		generateJSDoc(${typeName}.unpack(empty), typeName);
	`)}if(r.default===void 0){let A=wE._}var gK={OPA_BEARD:0,OPA_FACELINE:1,OPA_HAIR_NORMAL:2,OPA_FOREHEAD_NORMAL:3,XLU_MASK:4,XLU_NOSELINE:5,OPA_NOSE:6,OPA_HAT_NORMAL:7,XLU_GLASS:8,OPA_HAIR_CAP:9,OPA_FOREHEAD_CAP:10,OPA_HAT_CAP:11,MAX:12},Q8={POSITION:0,TEXCOORD:1,NORMAL:2,TANGENT:3,COLOR:4,MAX:5},fU={NONE:0,BACK:1,FRONT:2,MAX:3},wS={CONSTANT:0,TEXTURE_DIRECT:1,RGB_LAYERED:2,ALPHA:3,LUMINANCE_ALPHA:4,ALPHA_OPA:5},V6={SHAPE_FACELINE:0,SHAPE_BEARD:1,SHAPE_NOSE:2,SHAPE_FOREHEAD:3,SHAPE_HAIR:4,SHAPE_CAP:5,SHAPE_MASK:6,SHAPE_NOSELINE:7,SHAPE_GLASS:8,MUSTACHE:9,MOUTH:10,EYEBROW:11,EYE:12,MOLE:13,FACE_MAKE:14,FACE_LINE:15,FACE_BEARD:16,FILL:17,SHAPE_MAX:9},uK={MIDDLE:0,HIGH:1,MAX:2},pK={NORMAL:0,MAX:70},dX={NORMAL:1,HAT:2,FACE_ONLY:4,FLATTEN_NOSE:8,NEW_EXPRESSIONS:16,NEW_MASK_ONLY:32},_S=r.default.struct([r.default.uint32le("size"),r.default.uint32le("stride"),r.default.uintptr("ptr")]),kS=r.default.struct([r.default.struct("attributeBuffers",[_S],5)]),SS=r.default.struct([r.default.uint32le("primitiveType"),r.default.uint32le("indexCount"),r.default.uint32le("_8"),r.default.uintptr("pIndexBuffer")]),q7=r.default.struct([r.default.float32le("r"),r.default.float32le("g"),r.default.float32le("b"),r.default.float32le("a")]),cB=r.default.struct([r.default.float32le("x"),r.default.float32le("y"),r.default.float32le("z")]),TS=r.default.struct([r.default.uint32le("mode"),r.default.uint32le("type"),r.default.uintptr("pColorR"),r.default.uintptr("pColorG"),r.default.uintptr("pColorB"),r.default.uintptr("pTexture2D")]),lB=r.default.struct([r.default.struct("attributeBufferParam",[kS]),r.default.struct("modulateParam",[TS]),r.default.uint32le("cullMode"),r.default.struct("primitiveParam",[SS])]),nX=r.default.struct([r.default.uint8("data",10)]),dB=r.default.struct([r.default.int32le("miiVersion"),r.default.struct("faceline",[r.default.int32le("type"),r.default.int32le("color"),r.default.int32le("texture"),r.default.int32le("make")]),r.default.struct("hair",[r.default.int32le("type"),r.default.int32le("color"),r.default.int32le("flip")]),r.default.struct("eye",[r.default.int32le("type"),r.default.int32le("color"),r.default.int32le("scale"),r.default.int32le("aspect"),r.default.int32le("rotate"),r.default.int32le("x"),r.default.int32le("y")]),r.default.struct("eyebrow",[r.default.int32le("type"),r.default.int32le("color"),r.default.int32le("scale"),r.default.int32le("aspect"),r.default.int32le("rotate"),r.default.int32le("x"),r.default.int32le("y")]),r.default.struct("nose",[r.default.int32le("type"),r.default.int32le("scale"),r.default.int32le("y")]),r.default.struct("mouth",[r.default.int32le("type"),r.default.int32le("color"),r.default.int32le("scale"),r.default.int32le("aspect"),r.default.int32le("y")]),r.default.struct("beard",[r.default.int32le("mustache"),r.default.int32le("type"),r.default.int32le("color"),r.default.int32le("scale"),r.default.int32le("y")]),r.default.struct("glass",[r.default.int32le("type"),r.default.int32le("color"),r.default.int32le("scale"),r.default.int32le("y")]),r.default.struct("mole",[r.default.int32le("type"),r.default.int32le("scale"),r.default.int32le("x"),r.default.int32le("y")]),r.default.struct("body",[r.default.int32le("height"),r.default.int32le("build")]),r.default.struct("personal",[r.default.char16le("name",22),r.default.char16le("creator",22),r.default.int32le("gender"),r.default.int32le("birthMonth"),r.default.int32le("birthDay"),r.default.int32le("favoriteColor"),r.default.uint8("favorite"),r.default.uint8("copyable"),r.default.uint8("ngWord"),r.default.uint8("localonly"),r.default.int32le("regionMove"),r.default.int32le("fontRegion"),r.default.int32le("roomIndex"),r.default.int32le("positionInRoom"),r.default.int32le("birthPlatform")]),r.default.struct("createID",[nX]),r.default.uint16le("padding_0"),r.default.int32le("authorType"),r.default.uint8("authorID",8)]),cU=96,F7=-2147483648,z6=(A)=>A|F7,P6=(A)=>A&~F7===0?A:A&~F7,$7=r.default.struct([r.default.char16le("name",22),r.default.char16le("creator",22),r.default.struct("createID",[nX]),r.default.byte("_padding0",2),r.default.struct("skinColor",[q7]),r.default.uint32le("flags"),r.default.uint8("facelineType"),r.default.uint8("hairType"),r.default.byte("_padding1",2)]),zS=r.default.struct([r.default.uintptr("pTexture2DRenderBufferColorTargetDepthTarget",4)]),PS=r.default.struct([r.default.uintptr("pTextureFaceLine"),r.default.struct("drawParamFaceLine",[lB]),r.default.uintptr("pTextureFaceMake"),r.default.struct("drawParamFaceMake",[lB]),r.default.uintptr("pTextureFaceBeard"),r.default.struct("drawParamFaceBeard",[lB]),r.default.uintptr("pRenderTextureCompressorParam",2)]),fX=r.default.struct([r.default.struct("drawParamRawMaskPartsEye",[lB],2),r.default.struct("drawParamRawMaskPartsEyebrow",[lB],2),r.default.struct("drawParamRawMaskPartsMouth",[lB]),r.default.struct("drawParamRawMaskPartsMustache",[lB],2),r.default.struct("drawParamRawMaskPartsMole",[lB]),r.default.struct("drawParamRawMaskPartsFill",[lB])]),sX=r.default.struct([r.default.uint8("partsTextures",340),r.default.uintptr("pRawMaskDrawParam",pK.MAX),r.default.byte("_remaining",284)]),yK=r.default.struct([r.default.struct("maskTextures",[sX]),r.default.struct("facelineTexture",[PS])]),VS=r.default.struct([r.default.uintptr("pRenderTextures",pK.MAX)]),jS=1073741823,E8=r.default.struct([r.default.uint32le("resolution"),r.default.uint32le("allExpressionFlag",3),r.default.uint32le("modelFlag"),r.default.uint32le("resourceType")]);E8.default={resolution:512,allExpressionFlag:new Uint32Array([1,0,0]),modelFlag:dX.NORMAL,resourceType:uK.HIGH};var Gr=E8.default,vS=r.default.struct([r.default.struct("min",[cB]),r.default.struct("max",[cB])]),hS=r.default.struct([r.default.struct("hatTranslate",[cB]),r.default.struct("headFrontRotate",[cB]),r.default.struct("headFrontTranslate",[cB]),r.default.struct("headSideRotate",[cB]),r.default.struct("headSideTranslate",[cB]),r.default.struct("headTopRotate",[cB]),r.default.struct("headTopTranslate",[cB])]),lU=r.default.struct([r.default.struct("charInfo",[dB]),r.default.struct("charModelDesc",[E8]),r.default.uint32le("expression"),r.default.uintptr("pTextureTempObject"),r.default.struct("drawParam",[lB],gK.MAX),r.default.uintptr("pShapeData",gK.MAX),r.default.struct("facelineRenderTexture",[zS]),r.default.uintptr("pCapGlassNoselineTextures",3),r.default.struct("maskTextures",[VS]),r.default.struct("beardHairFaceCenterPos",[cB],3),r.default.struct("partsTransform",[hS]),r.default.uint32le("modelType"),r.default.struct("boundingBox",[vS],3)]),iX={OFFICIAL:0,DEFAULT:1,MIDDLE_DB:2,STORE_DATA_OFFICIAL:3,STORE_DATA:4,BUFFER:5,DIRECT_POINTER:6},uX=r.default.struct([r.default.uint32le("dataSource"),r.default.uintptr("pBuffer"),r.default.uint16le("index")]),Wr={MALE:0,FEMALE:1,ALL:2},Xr={CHILD:0,ADULT:1,ELDER:2,ALL:3},$r={BLACK:0,WHITE:1,ASIAN:2,ALL:3},pX=r.default.struct([r.default.uintptr("pData",uK.MAX),r.default.uint32le("size",uK.MAX)]),L7={R8_UNORM:0,R8_G8_UNORM:1,R8_G8_B8_A8_UNORM:2,MAX:3},mX=r.default.struct([r.default.uint16le("width"),r.default.uint16le("height"),r.default.uint8("mipCount"),r.default.uint8("format"),r.default.uint8("isGX2Tiled"),r.default.byte("_padding",1),r.default.uint32le("imageSize"),r.default.uintptr("imagePtr"),r.default.uint32le("mipSize"),r.default.uintptr("mipPtr"),r.default.uint32le("mipLevelOffset",13)]),cX=r.default.struct([r.default.uintptr("pObj"),r.default.uint8("useOriginalTileMode"),r.default.byte("_padding",3),r.default.uintptr("pCreateFunc"),r.default.uintptr("pDeleteFunc")]);class oX{constructor(A=wE.Module){this.module=A,this.textures=/*@__PURE__*/new Map,this.textureCallbackPtr=null,this._setupTextureCallbacks()}_setupTextureCallbacks(){let A=this.module;this.createCallback=A.addFunction(this._textureCreateFunc.bind(this),"vppp"),this.deleteCallback=A.addFunction(this._textureDeleteFunc.bind(this),"vpp");let Q={pObj:0,useOriginalTileMode:!1,_padding:[0,0,0],pCreateFunc:this.createCallback,pDeleteFunc:this.deleteCallback},E=cX.pack(Q);this.textureCallbackPtr=A._malloc(cX.size),A.HEAPU8.set(new Uint8Array(E),this.textureCallbackPtr),A._FFLSetTextureCallback(this.textureCallbackPtr)}_getTextureFormat(A){let Q=Number(ZB)<137,E=Q?L1:SQ,B=Q?ZC:jE,C={[L7.R8_UNORM]:E,[L7.R8_G8_UNORM]:B,[L7.R8_G8_B8_A8_UNORM]:V0}[A];if(C===void 0)throw new Error(`_textureCreateFunc: Unexpected FFLTextureFormat value: ${A}`);return C}_textureCreateFunc(A,Q,E){let B=this.module.HEAPU8.subarray(Q,Q+mX.size),I=mX.unpack(B),C=this._getTextureFormat(I.format),K=this.module.HEAPU8.slice(I.imagePtr,I.imagePtr+I.imageSize),J=new h0(K,I.width,I.height,C,x0);if(J.magFilter=L0,J.minFilter=L0,Number(ZB)>=138)J.minFilter=hQ,J.generateMipmaps=!1,this._addMipmaps(J,I);J.needsUpdate=!0,this.set(J.id,J),this.module.HEAPU32[E/4]=J.id}_addMipmaps(A,Q){if(Q.mipPtr===0||Q.mipCount<2)return;let E=[1,2,4][Q.format];if(!E)throw new Error(`_addMipmaps: Unexpected FFLTextureFormat value: ${Q.format}`);for(let B=1;B<Q.mipCount;B++){let I=Q.mipLevelOffset[B-1],C=Math.max(1,Q.width>>B),K=Math.max(1,Q.height>>B),J=C*K*E,U=Q.mipPtr+I,Y=this.module.HEAPU8.slice(U,U+J);A.mipmaps.push({data:Y,width:C,height:K})}}_textureDeleteFunc(A,Q){let E=this.module.HEAPU32[Q/4],B=this.textures.get(E)}get(A){let Q=this.textures.get(A);if(!Q)console.error("Unknown texture",A);return Q}set(A,Q){Q._dispose=Q.dispose.bind(Q),Q.dispose=()=>{this.delete(A)},this.textures.set(A,Q)}delete(A){let Q=this.textures.get(A);if(Q)Q._dispose(),Q.source=null,this.textures.delete(A)}}function w7(A,Q){let E;if(typeof Q!=="number")E=`Unexpected type for FFLResult from ${A}: ${typeof Q}`;else if(Q!==0)E=`${A} failed with FFLResult: ${Q}`;if(E)throw new Error(E)}async function yS(A,Q){let E,B;try{if(A instanceof ArrayBuffer)A=new Uint8Array(A);if(A instanceof Uint8Array)console.warn("initializeFFL -> _loadDataIntoHeap: resource was passed as Uint8Array/ArrayBuffer. Please pass in a fetch Response instance for improved efficiency."),E=A.length,B=Q._malloc(E),console.debug(`loadDataIntoHeap: Loading from Uint8Array. Size: ${E}, pointer: ${B}`),Q.HEAPU8.set(A,B);else if(A instanceof Response){if(!A.body)throw new Error("Fetch response is not streamable.");let I=A.headers.get("Content-Length");if(!I)throw new Error("Fetch response missing Content-Length.");E=parseInt(I,10),B=Q._malloc(E),console.debug(`loadDataIntoHeap: Streaming ${E} bytes from fetch response. URL: ${A.url}, pointer: ${B}`);let C=A.body.getReader(),K=B;while(!0){let{done:J,value:U}=await C.read();if(J)break;Q.HEAPU8.set(U,K),K+=U.length}}else throw new Error("loadDataIntoHeap: type is not Uint8Array or Response");return{pointer:B,size:E}}catch(I){if(B)Q._free(B);throw I}}var pU;async function gS(A,Q=wE.Module){console.debug("initializeFFL: Entrypoint, waiting for module to be ready.");let E;return new Promise((B)=>{if(!Q.calledRun&&!Q.onRuntimeInitialized)Q.onRuntimeInitialized=()=>{console.debug("initializeFFL: Emscripten runtime initialized, resolving."),B()},console.debug(`initializeFFL: module.calledRun: ${Q.calledRun}, module.onRuntimeInitialized: ${Q.onRuntimeInitialized} / << assigned and waiting.`);else console.debug("initializeFFL: Assuming module is ready."),B()}).then(async()=>{if(A instanceof Promise)A=await A}).then(()=>{return yS(A,Q)}).then(({pointer:B,size:I})=>{console.debug(`initializeFFL: Resource loaded into heap. Pointer: ${B}, Size: ${I}`);let C={pData:[0,0],size:[0,0]};C.pData[uK.HIGH]=B,C.size[uK.HIGH]=I,pU=C;let K=pX.pack(C);E=Q._malloc(pX.size),Q.HEAPU8.set(K,E);let J=Q._FFLInitRes(0,E);w7("FFLInitRes",J),Q._FFLInitResGPUStep(),Q._FFLSetNormalIsSnorm8_8_8_8(!0),Q._FFLSetTextureFlipY(!0)}).catch((B)=>{throw Q._free(),console.error("initializeFFL failed:",B),B}).finally(()=>{if(E)Q._free(E)})}async function rX(A=null,Q=wE.Module){if(!A&&typeof document!=="undefined"){let B=document.querySelector("meta[itemprop=ffl-js-resource-fetch-path]");if(!B||!B.getAttribute("content"))throw new Error('initializeFFLWithResource: Element not found or does not have "content" attribute with path to FFL resource: meta[itemprop=ffl-js-resource-fetch-path]');A=B.getAttribute("content")}if(!A)throw new Error("initializeFFLWithResource: resourcePath must be a string");try{let B=await fetch(A);await gS(B,Q),wE.FFLTextures=new oX(Q),console.debug("initializeFFLWithResource: FFLiManager and TextureManager initialized, exiting")}catch(B){throw alert(`Error initializing FFL with resource: ${B}`),B}}function Lr(A){if(!pU){console.warn("exitFFL was called when FFL is not initialized.");return}console.debug("exitFFL called, _resourceDesc:",pU),A._FFLExit(),pU.pData.forEach((Q)=>{if(Q)A._free(_fflResourcePtr)})}class xK{constructor(A,Q=wE.Module,E=wE.FFLShaderMaterial){this._module=Q,this._materialClass=E,this._ptr=A,this.__ptr=A;let B=this._module.HEAPU8.subarray(A,A+lU.size);this._model=lU.unpack(B),this._facelineTarget=null,this._maskTargets=new Array(pK.MAX).fill(null),this.meshes=new i0,this._addCharModelMeshes(Q)}_addCharModelMeshes(A){for(let Q=0;Q<gK.MAX;Q++){let E=this._model.drawParam[Q],B=aX(E,this._materialClass,A);if(!B)continue;switch(B.renderOrder=E.modulateParam.type,Q){case gK.OPA_FACELINE:{this._facelineID=B.id;break}case gK.XLU_MASK:{this._maskID=B.id;break}}this.meshes.add(B)}}_getTextureTempObjectPtr(){return this._model.pTextureTempObject}_getTextureTempObject(){let A=this._getTextureTempObjectPtr();return yK.unpack(this._module.HEAPU8.subarray(A,A+yK.size))}_getAdditionalInfo(){let A=this._module,Q=A._malloc($7.size),E=A._FFLGetAdditionalInfo(Q,iX.BUFFER,this._ptr,0,!1);w7("FFLGetAdditionalInfo",E);let B=$7.unpack(A.HEAPU8.subarray(Q,Q+$7.size));return A._free(Q),B}_getPartsTransform(){let A=this._model.partsTransform;for(let Q in A){if(A[Q].x===void 0)throw new Error;A[Q]=new y(A[Q].x,A[Q].y,A[Q].z)}return A}_getFacelineColor(){let A=this._module,Q=this._model.charInfo.faceline.color,E=A._malloc(q7.size);A._FFLGetFacelineColor(E,Q);let B=bK(E,A);return A._free(E),new a().setRGB(B.x,B.y,B.z)}_getFavoriteColor(A=!1){let Q=this._module,E=this._model.charInfo.personal.favoriteColor,B=Q._malloc(q7.size);Q._FFLGetFavoriteColor(B,E);let I=bK(B,Q);return Q._free(B),new a().setRGB(I.x,I.y,I.z,A===!1?N0:b0)}_getGender(){return this._model.charInfo.personal.gender}_getCharInfoUint8Array(){return dB.pack(this._model.charInfo)}_getPartsTexturesPtr(){return this._model.pTextureTempObject+yK.fields.maskTextures.offset+sX.fields.partsTextures.offset}_getFacelineTempObjectPtr(){return this._model.pTextureTempObject+yK.fields.facelineTexture.offset}_getMaskTempObjectPtr(){return this._model.pTextureTempObject+yK.fields.maskTextures.offset}_getBoundingBox(){let A=this._model.boundingBox[this._model.modelType],Q=new y(A.min.x,A.min.y,A.min.z),E=new y(A.max.x,A.max.y,A.max.z);return new g0(Q,E)}_getResolution(){return this._model.charModelDesc.resolution&jS}_finalizeCharModel(){if(!this._ptr)return;this._module._FFLDeleteCharModel(this._ptr),this._module._free(this._ptr),this._ptr=null}_disposeTextures(){if(this._facelineTarget)this._facelineTarget.dispose(),this._facelineTarget=null;this._maskTargets.forEach((A,Q)=>{if(!A)return;A.dispose(),this._maskTargets[Q]=null})}dispose(){this._finalizeCharModel(),P7(this.meshes),this.meshes=null,this._disposeTextures()}getStoreData(){let A=this._getCharInfoUint8Array(),Q=this._module,E=Q._malloc(dB.size),B=Q._malloc(cU);Q.HEAPU8.set(A,E);let I=Q._FFLpGetStoreDataFromCharInfo(B,E),C=Q.HEAPU8.slice(B,B+cU);if(Q._free(E),Q._free(B),!I)throw new Error("getStoreData: call to FFLpGetStoreDataFromCharInfo returned false, CharInfo verification probably failed");return C}setExpression(A){this._model.expression=A;let Q=this._maskTargets[A];if(!Q||!Q.texture)throw new Error(`setExpression: this._maskTargets[${A}].texture is not a valid texture`);let E=this.meshes.getObjectById(this._maskID);if(!E)throw new Error("setExpression: this.meshes[FFLiShapeType.XLU_MASK] does not exist, cannot set expression on the mask");E.material.map=Q.texture,E.material.needsUpdate=!0}get expression(){return this._model.expression}set expression(A){throw new Error("nope you cannot do this, try setExpression instead")}get facelineColor(){if(!this._facelineColor)this._facelineColor=this._getFacelineColor();return this._facelineColor}get favoriteColor(){if(!this._favoriteColor)this._favoriteColor=this._getFavoriteColor();return this._favoriteColor}get partsTransform(){if(!this._partsTransform)this._partsTransform=this._getPartsTransform();return this._partsTransform}get boundingBox(){if(!this._boundingBox)this._boundingBox=this._getBoundingBox();return this._boundingBox}static BodyScaleMode={Apply:0,Limit:1};getBodyScale(A=xK.BodyScaleMode.Apply){let Q=this._model.charInfo.body.build,E=this._model.charInfo.body.height,B=new y;switch(A){case xK.BodyScaleMode.Apply:{B.x=Q*(E*0.003671875+0.4)/128+E*0.001796875+0.4,B.y=E*0.006015625+0.5;break}case xK.BodyScaleMode.Limit:{let I=E/128;B.y=I*0.55+0.6,B.x=I*0.3+0.6,B.x=(I*0.6+0.8-B.x)*(Q/128)+B.x;break}default:throw new Error(`getBodyScale: Unexpected value for scaleMode: ${A}`)}return B.z=B.x,B}}var uU={GrayNormal:0,BluePresent:1,RedRegular:2,GoldSpecial:3},qr={[uU.GrayNormal]:new a(4212558),[uU.BluePresent]:new a(2637946),[uU.RedRegular]:new a(7348245),[uU.GoldSpecial]:new a(12623920)};function xS(A,Q){let E=Q._malloc(dB.size),B={dataSource:iX.DIRECT_POINTER,pBuffer:E,index:0};if(!(A instanceof Uint8Array))try{if(typeof A!=="object")throw new Error("_allocateModelSource: data passed in is not FFLiCharInfo object or Uint8Array");A=dB.pack(A)}catch(I){throw Q._free(E),I}switch(A.length){case cU:{let I=Q._malloc(cU);Q.HEAPU8.set(A,I);let C=Q._FFLpGetCharInfoFromStoreData(E,I);if(Q._free(I),!C)throw Q._free(E),new Error("_allocateModelSource: call to FFLpGetCharInfoFromStoreData returned false, CharInfo verification probably failed");break}case dB.size:Q.HEAPU8.set(A,E);break;case mU.size+1:A=oS(A);case mU.size:{let I=mU.unpack(A),C=iS(I);A=dB.pack(C),Q.HEAPU8.set(A,E);break}default:throw Q._free(E),new Error(`_allocateModelSource: Unknown data length: ${A.length}`)}return B}function bS(A,Q,E=!1){let B=0,I=!1;if(typeof A==="number")B=A,I=!1;else I=!0,B=Q._malloc(dB.size),Q.HEAPU8.set(A,B);let C=Q._FFLiVerifyCharInfoWithReason(B,E);if(I)Q._free(B);if(C!==0)throw new Error(`FFLiVerifyCharInfoWithReason failed with result: ${C}`)}function Fr(A,Q,E,B){let I=A._malloc(dB.size);A._FFLiGetRandomCharInfo(I,Q,E,B);let C=A.HEAPU8.slice(I,I+dB.size);return A._free(I),C}function fS(A){function Q(B){if(B>=pK.MAX)throw new Error(`makeExpressionFlag: input out of range: got ${B}, max: ${pK.MAX}`)}let E=new Uint32Array([0,0,0]);if(typeof A==="number")A=[A];else if(!Array.isArray(A))throw new Error("makeExpressionFlag: expected array or single number");for(let B of A){Q(B);let I=Math.floor(B/32),C=B%32;E[I]|=1<<C}return E}function _7(A,Q,E,B=wE.Module,I=!0){Q=Q||E8.default;let C=B._malloc(uX.size),K=B._malloc(E8.size),J=B._malloc(lU.size),U=xS(A,B),Y=U.pBuffer,H=uX.pack(U);B.HEAPU8.set(H,C),Q.modelFlag|=dX.NEW_EXPRESSIONS;let R=E8.pack(Q);B.HEAPU8.set(R,K);try{if(I)bS(Y,B,!1);let N=B._FFLInitCharModelCPUStep(J,C,K);w7("FFLInitCharModelCPUStep",N)}catch(N){throw B._free(J),N}finally{B._free(C),B._free(K),B._free(Y)}let O=new xK(J,B,E);return O._data=A,O}function Dr(A,Q,E,B=null){let I;if(Q=Q||A._data,!Q)throw new Error("updateCharModel: newData is null. It should be retrieved from charModel._data which is set by createCharModel.");let C=A._model.charModelDesc.allExpressionFlag;switch(!0){case(Array.isArray(B)||typeof B==="number"):B=fS(B);case B instanceof Uint32Array:C=B;case!B:{I=A._model.charModelDesc,I.allExpressionFlag=C;break}case typeof B==="object":{I=B;break}default:throw new Error("updateCharModel: Unexpected type for descOrExpFlag")}A.dispose();let K=_7(Q,I,A._materialClass,A._module);return S7(K,E,A._module),K}function aX(A,Q,E){if(!A)throw new Error("drawParamToMesh: drawParam may be null.");if(A.primitiveParam.indexCount===0)return null;let B=uS(A,E),C={[fU.NONE]:y0,[fU.BACK]:jQ,[fU.FRONT]:ZQ,[fU.MAX]:y0}[A.cullMode];if(C===void 0)throw new Error(`drawParamToMesh: Unexpected value for FFLCullMode: ${A.cullMode}`);let K=pS(A.modulateParam),J={side:C,map:K,...mS(A.modulateParam,E)},U=new Q(J),Y=new xA(B,U);if(Y.geometry.userData)Y.geometry.userData.modulateType=A.modulateParam.type,Y.geometry.userData.modulateMode=A.modulateParam.mode;return Y}function uS(A,Q){let E=A.attributeBufferParam.attributeBuffers,B=E[Q8.POSITION];if(B.size===0)throw new Error("_bindDrawParamGeometry: Position buffer must not have size of 0");let I=B.size/B.stride,C=new hA,K=A.primitiveParam.pIndexBuffer/2,J=A.primitiveParam.indexCount,U=Q.HEAPU16.subarray(K,K+J);return C.setIndex(new VI(new Uint16Array(U),1)),Object.entries(E).forEach(([Y,H])=>{let R=parseInt(Y);if(H.size===0&&R!==Q8.POSITION)return;switch(R){case Q8.POSITION:{let O=H.ptr/4,N=Q.HEAPF32.subarray(O,O+I*4),$=new hE(N,4);C.setAttribute("position",new xQ($,3,0));break}case Q8.NORMAL:{let O=Q.HEAP8.subarray(H.ptr,H.ptr+H.size);C.setAttribute("normal",new p8(O,H.stride,!0));break}case Q8.TANGENT:{let O=Q.HEAP8.subarray(H.ptr,H.ptr+H.size);C.setAttribute("tangent",new p8(O,H.stride,!0));break}case Q8.TEXCOORD:{let O=H.ptr/4,N=Q.HEAPF32.subarray(O,O+I*2);C.setAttribute("uv",new PA(N,H.stride/4));break}case Q8.COLOR:{if(H.stride===0)break;let O=Q.HEAPU8.subarray(H.ptr,H.ptr+H.size);C.setAttribute("_color",new qC(O,H.stride,!0));break}}}),C}function pS(A,Q=wE.FFLTextures){if(!A.pTexture2D||A.type===V6.SHAPE_FACELINE||A.type===V6.SHAPE_MASK)return null;let E=A.pTexture2D,B=Q.get(E);if(!B)throw new Error(`_getTextureFromModulateParam: Texture not found for ${E}.`);if([V6.SHAPE_FACELINE,V6.SHAPE_CAP,V6.SHAPE_GLASS].includes(A.type))B.wrapS=OE,B.wrapT=OE,B.needsUpdate=!0;return B}function mS(A,Q){let E=new MA(0,0,0,0);if(A.pColorR!==0){let I=A.pColorR/4,C=Q.HEAPF32.subarray(I,I+4);E=new MA(C[0],C[1],C[2],C[3])}if(A.pColorG!==0&&A.pColorB!==0)E=[bK(A.pColorR,Q),bK(A.pColorG,Q),bK(A.pColorB,Q)];let B=!(A.mode!==wS.CONSTANT&&A.type>=V6.SHAPE_MAX);return{modulateMode:A.mode,modulateType:A.type,modulateColor:E,lightEnable:B}}function bK(A,Q){if(!A)return console.error("getVector4FromFFLColorPtr: Received null pointer"),new MA(0,0,0,0);let E=Q.HEAPF32.subarray(A/4,A/4+4);return new MA(E[0],E[1],E[2],E[3])}var k7=!1;function S7(A,Q){let E=A._module,B=A._getTextureTempObject();if(cS(A,B,Q,E),lS(A,B,Q,E),!k7)A._finalizeCharModel();A.setExpression(A.expression)}var D7=()=>null,M7=()=>null;function Mr(A){D7=async(Q,E)=>{let B=await V7(Q,E,!0);A(B),D7=()=>null}}function wr(A){M7=async(Q,E)=>{let B=await V7(Q,E,!0);A(B),M7=()=>null}}function cS(A,Q,E,B){let I=A._getFacelineTempObjectPtr();B._FFLiInvalidateTempObjectFacelineTexture(I);let C=[Q.facelineTexture.drawParamFaceLine,Q.facelineTexture.drawParamFaceBeard,Q.facelineTexture.drawParamFaceMake].filter((O)=>O&&O.modulateParam.pTexture2D!==0);if(C.length===0)return;let K=A.facelineColor,{scene:J}=tX(C,K,A._materialClass,A._module,E),U=A._getResolution()/2,Y=A._getResolution(),H={depthBuffer:!1,stencilBuffer:!1,wrapS:OE,wrapT:OE},R=z7(J,T7(),E,U,Y,H);if(D7(R,E),nS(A,R),!k7)B._FFLiDeleteTempObjectFacelineTexture(I,A._ptr,A._model.charModelDesc.resourceType);P7(J)}function lS(A,Q,E,B){let I=A._getMaskTempObjectPtr(),C=A._ptr+lU.fields.charModelDesc.offset+E8.fields.allExpressionFlag.offset,K=[];for(let J=0;J<A._model.maskTextures.pRenderTextures.length;J++){if(A._model.maskTextures.pRenderTextures[J]===0)continue;let U=Q.maskTextures.pRawMaskDrawParam[J],Y=fX.unpack(B.HEAPU8.subarray(U,U+fX.size));B._FFLiInvalidateRawMask(U);let{target:H,scene:R}=dS(A,Y,E,B);A._maskTargets[J]=H,K.push(R)}if(K.forEach((J)=>{P7(J)}),!k7)B._FFLiDeleteTempObjectMaskTextures(I,C,A._model.charModelDesc.resourceType),B._FFLiDeleteTextureTempObject(A._ptr)}function dS(A,Q,E,B){let I=[Q.drawParamRawMaskPartsMustache[0],Q.drawParamRawMaskPartsMustache[1],Q.drawParamRawMaskPartsMouth,Q.drawParamRawMaskPartsEyebrow[0],Q.drawParamRawMaskPartsEyebrow[1],Q.drawParamRawMaskPartsEye[0],Q.drawParamRawMaskPartsEye[1],Q.drawParamRawMaskPartsMole].filter((Y)=>Y&&Y.primitiveParam.indexCount!==0);if(I.length===0)return console.error("No mask drawParams found"),null;let C={depthBuffer:!1,stencilBuffer:!1},{scene:K}=tX(I,null,A._materialClass,B),J=A._getResolution(),U=z7(K,T7(),E,J,J,C);return M7(U,E),{target:U,scene:K}}function nS(A,Q){if(!Q||!Q.texture)throw new Error("setFaceline: passed in RenderTarget is invalid");A._facelineTarget=Q;let E=A.meshes.getObjectById(A._facelineID);if(!E)throw new Error("setFaceline: charModel.meshes[FFLiShapeType.OPA_FACELINE] does not exist");E.material.map=Q.texture,E.material.needsUpdate=!0}function tX(A,Q=null,E,B){let I=new yQ;I.background=Q||null;let C=[];return A.forEach((K)=>{let J=aX(K,E,B);if(J)I.add(J),C.push(J)}),{scene:I,meshes:C}}function T7(A=!1){let Q=new HE(-1,1,A?-1:1,A?1:-1,0.1,10);return Q.position.z=1,Q}function z7(A,Q,E,B,I,C={}){let K={minFilter:L0,magFilter:L0,...C},J=new Q0(B,I,K),U=E.getRenderTarget();return E.setRenderTarget(J),E.render(A,Q),E.setRenderTarget(U),J}function P7(A,Q){if(A.traverse((E)=>{if(!E.isMesh)return;if(E.geometry)E.geometry.dispose();if(E.material){if(E.material.map)E.material.map.dispose();E.material.dispose()}}),Q&&Q instanceof yQ)Q.remove(A);A.children=[]}function V7(A,Q,E=!1){return new Promise((B)=>{let I=new yQ;I.background=null;let C=new _0({side:y0,map:A.texture,transparent:!0}),K=new dQ(2,2),J=new xA(K,C);I.add(J);let U=T7(E),Y=Q.getRenderTarget(),H=Q.outputColorSpace,R=new AA;Q.getSize(R),Q.setRenderTarget(null),Q.outputColorSpace=O0?O0.workingColorSpace:null,Q.setSize(A.width,A.height,!1),Q.render(I,U);function O(){C.dispose(),K.dispose(),I.remove(J),Q.outputColorSpace=H,Q.setSize(R.x,R.y,!1),Q.setRenderTarget(Y)}if(typeof window==="undefined")Q.domElement.convertToBlob({type:"image/png"}).then((N)=>{B({type:"blob",result:N}),O()});else{let N=Q.domElement.toDataURL("image/png");B({type:"dataURL",result:N}),O()}})}function _r(A,Q){if(!Q)console.warn(`appendImageFromDataUrl: you did not specify "container" so we will use document.body, don't be surprised if your image ends up in brazil`),Q=document.body;let E=new Image;E.src=A,Q.appendChild(E)}var LI={Face:0,MakeIcon:1,IconFovy45:2,AllBody:3};function sS(A,Q=1,E=1){let B=Q/E;switch(A){case LI.Face:{let C=new v0(15,B,0.1,1000);return C.position.set(0,34.5,380),C.lookAt(0,34.3,0),C}case LI.MakeIcon:{let C=new v0(10,B,500,1000);return C.position.set(0,34.5,600),C.lookAt(0,34.5,0),C}case LI.IconFovy45:{let I=new v0(45,B,50,1000);return I.position.set(0,34,110),I.lookAt(0,34,0),I}case LI.AllBody:{let C=new v0(15,B,50,1500);return C.position.set(0,50,900),C.lookAt(0,105,0),C}default:throw new Error("getCameraForViewType: not implemented")}}function eX(A,Q,E=LI.MakeIcon,B=256,I=256,C=!1){return new Promise((K)=>{let J=new yQ;J.background=null;let U=A._getGender();if(C){let L,W,Z,G;var Y=A.getBodyScale();switch(U){case 0:{L=fK.Miitomo.m,W=L.getObjectByName("body_m"),Z=L.getObjectByName("hands_m"),G=L.getObjectByName("legs_m");break}case 1:{L=fK.Miitomo.f,W=L.getObjectByName("body_f"),Z=L.getObjectByName("hands_f"),G=L.getObjectByName("legs_f");break}}L.scale.set(1,Y.y*10,1);var H=new g0().setFromObject(L);console.log("pos y:",H.max.y),L.position.set(0,-H.max.y,0),J.add(L);var R=A._getFavoriteColor(!0);W.material=new K0({modulateType:9,modulateMode:0,modulateColor:new MA(R.r,R.g,R.b,1)}),G.material=new K0({modulateType:10,modulateMode:0,modulateColor:new MA(0.3,0.3,0.3,1)})}J.add(A.meshes.clone());let O=sS(E),N=z7(J,O,Q,B,I),$=V7(N,Q);N.dispose(),K($)})}var mU=r.default.struct([r.default.uint8("beardColor"),r.default.uint8("beardType"),r.default.uint8("build"),r.default.uint8("eyeAspect"),r.default.uint8("eyeColor"),r.default.uint8("eyeRotate"),r.default.uint8("eyeScale"),r.default.uint8("eyeType"),r.default.uint8("eyeX"),r.default.uint8("eyeY"),r.default.uint8("eyebrowAspect"),r.default.uint8("eyebrowColor"),r.default.uint8("eyebrowRotate"),r.default.uint8("eyebrowScale"),r.default.uint8("eyebrowType"),r.default.uint8("eyebrowX"),r.default.uint8("eyebrowY"),r.default.uint8("facelineColor"),r.default.uint8("facelineMake"),r.default.uint8("facelineType"),r.default.uint8("facelineWrinkle"),r.default.uint8("favoriteColor"),r.default.uint8("gender"),r.default.uint8("glassColor"),r.default.uint8("glassScale"),r.default.uint8("glassType"),r.default.uint8("glassY"),r.default.uint8("hairColor"),r.default.uint8("hairFlip"),r.default.uint8("hairType"),r.default.uint8("height"),r.default.uint8("moleScale"),r.default.uint8("moleType"),r.default.uint8("moleX"),r.default.uint8("moleY"),r.default.uint8("mouthAspect"),r.default.uint8("mouthColor"),r.default.uint8("mouthScale"),r.default.uint8("mouthType"),r.default.uint8("mouthY"),r.default.uint8("mustacheScale"),r.default.uint8("mustacheType"),r.default.uint8("mustacheY"),r.default.uint8("noseScale"),r.default.uint8("noseType"),r.default.uint8("noseY")]);function iS(A){return{miiVersion:0,faceline:{type:A.facelineType,color:A.facelineColor,texture:A.facelineWrinkle,make:A.facelineMake},hair:{type:A.hairType,color:z6(A.hairColor),flip:A.hairFlip},eye:{type:A.eyeType,color:z6(A.eyeColor),scale:A.eyeScale,aspect:A.eyeAspect,rotate:A.eyeRotate,x:A.eyeX,y:A.eyeY},eyebrow:{type:A.eyebrowType,color:z6(A.eyebrowColor),scale:A.eyebrowScale,aspect:A.eyebrowAspect,rotate:A.eyebrowRotate,x:A.eyebrowX,y:A.eyebrowY},nose:{type:A.noseType,scale:A.noseScale,y:A.noseY},mouth:{type:A.mouthType,color:z6(A.mouthColor),scale:A.mouthScale,aspect:A.mouthAspect,y:A.mouthY},beard:{mustache:A.mustacheType,type:A.beardType,color:z6(A.beardColor),scale:A.mustacheScale,y:A.mustacheY},glass:{type:A.glassType,color:z6(A.glassColor),scale:A.glassScale,y:A.glassY},mole:{type:A.moleType,scale:A.moleScale,x:A.moleX,y:A.moleY},body:{height:A.height,build:A.build},personal:{name:"",creator:"",gender:A.gender,birthMonth:0,birthDay:0,favoriteColor:A.favoriteColor,favorite:0,copyable:0,ngWord:0,localonly:0,regionMove:0,fontRegion:0,roomIndex:0,positionInRoom:0,birthPlatform:3},createID:{data:new Array(10).fill(0)},padding_0:0,authorType:0,authorID:new Array(8).fill(0)}}function oS(A){let Q=new Uint8Array(A),B=Q[0];for(let I=1;I<48;I++){let C=Q[I],K=(C-7+256)%256;Q[I-1]=K^B,B=C}return Q.slice(0,mU.size)}function kr(A){return{beardColor:P6(A.beard.color),beardType:A.beard.type,build:A.body.build,eyeAspect:A.eye.aspect,eyeColor:P6(A.eye.color),eyeRotate:A.eye.rotate,eyeScale:A.eye.scale,eyeType:A.eye.type,eyeX:A.eye.x,eyeY:A.eye.y,eyebrowAspect:A.eyebrow.aspect,eyebrowColor:P6(A.eyebrow.color),eyebrowRotate:A.eyebrow.rotate,eyebrowScale:A.eyebrow.scale,eyebrowType:A.eyebrow.type,eyebrowX:A.eyebrow.x,eyebrowY:A.eyebrow.y,facelineColor:A.faceline.color,facelineMake:A.faceline.make,facelineType:A.faceline.type,facelineWrinkle:A.faceline.texture,favoriteColor:A.personal.favoriteColor,gender:A.personal.gender,glassColor:P6(A.glass.color),glassScale:A.glass.scale,glassType:A.glass.type,glassY:A.glass.y,hairColor:P6(A.hair.color),hairFlip:A.hair.flip,hairType:A.hair.type,height:A.body.height,moleScale:A.mole.scale,moleType:A.mole.type,moleX:A.mole.x,moleY:A.mole.y,mouthAspect:A.mouth.aspect,mouthColor:P6(A.mouth.color),mouthScale:A.mouth.scale,mouthType:A.mouth.type,mouthY:A.mouth.y,mustacheScale:A.beard.scale,mustacheType:A.beard.mustache,mustacheY:A.beard.y,noseScale:A.nose.scale,noseType:A.nose.type,noseY:A.nose.y}}var rS=(A)=>A.replace(/\s+/g,""),aS=(A)=>new Uint8Array(A.match(/.{1,2}/g).map((Q)=>parseInt(Q,16)));function tS(A){let Q=A.replace(/-/g,"+").replace(/_/g,"/"),E=Q.padEnd(Q.length+(4-Q.length%4)%4,"=");return Uint8Array.from(atob(E),(B)=>B.charCodeAt(0))}var Sr=(A)=>btoa(String.fromCharCode.apply(null,A));function Tr(A){let Q,E=rS(A);if(/^[0-9a-fA-F]+$/.test(E))Q=aS(E);else Q=tS(E);return Q}var iU,L$,y7;function C8(...A){console.log("[FFLWorker]",...A)}function yz(){y7=new AK({antialias:!0,alpha:!0,canvas:L$})}self.onmessage=async(A)=>{C8("Message received from main script",A);let Q=A.data;switch(Q.type){case"Init":{C8("Loading FFL Module"),iU=(await Promise.resolve().then(() => ($$(),X$))).default.Module,C8("Initialized Module!",iU),C8("Loading FFL Resource..."),await lX(),await rX(Q.resourcePath,iU),C8("Loaded FFL Resource!"),L$=Q.offscreenCanvas,yz(),postMessage({ready:!0});break}case"MakeIcon":{C8("Call MakeIcon");var E=performance.now();let C={type:"dataURL",result:""},K;try{let J=Q.data;K=_7(J,void 0,K0,iU,!1),S7(K,y7);let U=LI.MakeIcon;switch(Q.view){case"face":case"variableiconbody":U=LI.MakeIcon;break;case"all_body_sugar":U=LI.MakeIcon;break}C=await eX(K,y7,U,512,512)}catch(J){console.error("Library error: Could not make icon",J)}finally{K.dispose();var B=performance.now();C8(`Got it in ${(B-E).toFixed(0)}ms! Sending to main thread.`);var I=void 0;if(C.type==="blob")I=URL.createObjectURL(C.result),setTimeout(()=>{URL.revokeObjectURL(I)},500);postMessage({id:Q.id,result:I||C.result})}}}};
